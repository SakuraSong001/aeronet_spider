(function(a,b){if(typeof exports==="object"){module.exports=b()}else if(typeof define==="function"&&define.amd){define([],b)}else{a.ol=b()}})(this,function(){var OPENLAYERS={};var goog=this.goog={};this.CLOSURE_NO_DEPS=true;var COMPILED=false;var goog=goog||{};goog.global=this;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;goog.isDef=function(a){return a!==void 0};goog.exportPath_=function(a,b,c){var d=a.split(".");var e=c||goog.global;if(!(d[0]in e)&&e.execScript){e.execScript("var "+d[0])}for(var f;d.length&&(f=d.shift());){if(!d.length&&goog.isDef(b)){e[f]=b}else if(e[f]){e=e[f]}else{e=e[f]={}}}};goog.define=function(a,b){var c=b;if(!COMPILED){if(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,a)){c=goog.global.CLOSURE_UNCOMPILED_DEFINES[a]}else if(goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)){c=goog.global.CLOSURE_DEFINES[a]}}goog.exportPath_(a,c)};goog.define("goog.DEBUG",true);goog.define("goog.LOCALE","en");goog.define("goog.TRUSTED_SITE",true);goog.define("goog.STRICT_MODE_COMPATIBLE",false);goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG);goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",false);goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a)){throw Error('Namespace "'+a+'" already declared.')}}goog.constructNamespace_(a)};goog.constructNamespace_=function(a,b){if(!COMPILED){delete goog.implicitNamespaces_[a];var c=a;while(c=c.substring(0,c.lastIndexOf("."))){if(goog.getObjectByName(c)){break}goog.implicitNamespaces_[c]=true}}goog.exportPath_(a,b)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;goog.module=function(a){if(!goog.isString(a)||!a||a.search(goog.VALID_MODULE_RE_)==-1){throw Error("Invalid module identifier")}if(!goog.isInModuleLoader_()){throw Error("Module "+a+" has been loaded incorrectly.")}if(goog.moduleLoaderState_.moduleName){throw Error("goog.module may only be called once per module.")}goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a)){throw Error('Namespace "'+a+'" already declared.')}delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};goog.module.getInternal_=function(a){if(!COMPILED){if(goog.isProvided_(a)){return a in goog.loadedModules_?goog.loadedModules_[a]:goog.getObjectByName(a)}else{return null}}};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.moduleLoaderState_!=null};goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_()){throw new Error("goog.module.declareLegacyNamespace must be called from "+"within a goog.module")}if(!COMPILED&&!goog.moduleLoaderState_.moduleName){throw Error("goog.module must be called prior to "+"goog.module.declareLegacyNamespace.")}goog.moduleLoaderState_.declareLegacyNamespace=true};goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE){a=a||"";throw Error("Importing test-only code into non-debug environment"+(a?": "+a:"."))}};goog.forwardDeclare=function(a){};goog.forwardDeclare("Document");goog.forwardDeclare("XMLHttpRequest");if(!COMPILED){goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))};goog.implicitNamespaces_={"goog.module":true}}goog.getObjectByName=function(a,b){var c=a.split(".");var d=b||goog.global;for(var e;e=c.shift();){if(goog.isDefAndNotNull(d[e])){d=d[e]}else{return null}}return d};goog.globalize=function(a,b){var c=b||goog.global;for(var d in a){c[d]=a[d]}};goog.addDependency=function(a,b,c,d){if(goog.DEPENDENCIES_ENABLED){var e,f;var g=a.replace(/\\/g,"/");var h=goog.dependencies_;for(var i=0;e=b[i];i++){h.nameToPath[e]=g;h.pathIsModule[g]=!!d}for(var j=0;f=c[j];j++){if(!(g in h.requires)){h.requires[g]={}}h.requires[g][f]=true}}};goog.define("goog.ENABLE_DEBUG_LOADER",true);goog.logToConsole_=function(a){if(goog.global.console){goog.global.console["error"](a)}};goog.require=function(a){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_){goog.maybeProcessDeferredDep_(a)}if(goog.isProvided_(a)){if(goog.isInModuleLoader_()){return goog.module.getInternal_(a)}else{return null}}if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=true;goog.writeScripts_();return null}}var c="goog.require could not find: "+a;goog.logToConsole_(c);throw Error(c)}};goog.basePath="";goog.global.CLOSURE_BASE_PATH;goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_){return a.instance_}if(goog.DEBUG){goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a}return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.define("goog.LOAD_MODULE_USING_EVAL",true);goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;if(goog.DEPENDENCIES_ENABLED){goog.included_={};goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}};goog.inHtmlDocument_=function(){var a=goog.global.document;return typeof a!="undefined"&&"write"in a};goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else if(!goog.inHtmlDocument_()){return}var a=goog.global.document;var b=a.getElementsByTagName("SCRIPT");for(var c=b.length-1;c>=0;--c){var d=b[c];var e=d.src;var f=e.lastIndexOf("?");var g=f==-1?e.length:f;if(e.substr(g-7,7)=="base.js"){goog.basePath=e.substr(0,g-7);return}}};goog.importScript_=function(a,b){var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(c(a,b)){goog.dependencies_.written[a]=true}};goog.IS_OLD_IE_=!!(!goog.global.atob&&goog.global.document&&goog.global.document.all);goog.importModule_=function(a){var b='goog.retrieveAndExecModule_("'+a+'");';if(goog.importScript_("",b)){goog.dependencies_.written[a]=true}};goog.queuedModules_=[];goog.wrapModule_=function(a,b){if(!goog.LOAD_MODULE_USING_EVAL||!goog.isDef(goog.global.JSON)){return""+"goog.loadModule(function(exports) {"+'"use strict";'+b+"\n"+";return exports"+"});"+"\n//# sourceURL="+a+"\n"}else{return""+"goog.loadModule("+goog.global.JSON.stringify(b+"\n//# sourceURL="+a+"\n")+");"}};goog.loadQueuedModules_=function(){var a=goog.queuedModules_.length;if(a>0){var b=goog.queuedModules_;goog.queuedModules_=[];for(var c=0;c<a;c++){var d=b[c];goog.maybeProcessDeferredPath_(d)}}};goog.maybeProcessDeferredDep_=function(a){if(goog.isDeferredModule_(a)&&goog.allDepsAreAvailable_(a)){var b=goog.getPathFromDeps_(a);goog.maybeProcessDeferredPath_(goog.basePath+b)}};goog.isDeferredModule_=function(a){var b=goog.getPathFromDeps_(a);if(b&&goog.dependencies_.pathIsModule[b]){var c=goog.basePath+b;return c in goog.dependencies_.deferred}return false};goog.allDepsAreAvailable_=function(a){var b=goog.getPathFromDeps_(a);if(b&&b in goog.dependencies_.requires){for(var c in goog.dependencies_.requires[b]){if(!goog.isProvided_(c)&&!goog.isDeferredModule_(c)){return false}}}return true};goog.maybeProcessDeferredPath_=function(a){if(a in goog.dependencies_.deferred){var b=goog.dependencies_.deferred[a];delete goog.dependencies_.deferred[a];goog.globalEval(b)}};goog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:undefined};var c;if(goog.isFunction(a)){c=a.call(goog.global,{})}else if(goog.isString(a)){c=goog.loadModuleFromSource_.call(goog.global,a)}else{throw Error("Invalid module definition")}var d=goog.moduleLoaderState_.moduleName;if(!goog.isString(d)||!d){throw Error('Invalid module name "'+d+'"')}if(goog.moduleLoaderState_.declareLegacyNamespace){goog.constructNamespace_(d,c)}else if(goog.SEAL_MODULE_EXPORTS&&Object.seal){Object.seal(c)}goog.loadedModules_[d]=c}finally{goog.moduleLoaderState_=b}};goog.loadModuleFromSource_=function(){"use strict";var exports={};eval(arguments[0]);return exports};goog.writeScriptSrcNode_=function(a){goog.global.document.write('<script type="text/javascript" src="'+a+'"></'+"script>")};goog.appendScriptSrcNode_=function(a){var b=goog.global.document;var c=b.createElement("script");c.type="text/javascript";c.src=a;c.defer=false;c.async=false;b.head.appendChild(c)};goog.writeScriptTag_=function(a,b){if(goog.inHtmlDocument_()){var c=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&c.readyState=="complete"){var d=/\bdeps.js$/.test(a);if(d){return false}else{throw Error('Cannot write "'+a+'" after document load')}}var e=goog.IS_OLD_IE_;if(b===undefined){if(!e){if(goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){goog.appendScriptSrcNode_(a)}else{goog.writeScriptSrcNode_(a)}}else{var f=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";c.write('<script type="text/javascript" src="'+a+'"'+f+"></"+"script>")}}else{c.write('<script type="text/javascript">'+b+"</"+"script>")}return true}else{return false}};goog.lastNonModuleScriptIndex_=0;goog.onScriptLoad_=function(a,b){if(a.readyState=="complete"&&goog.lastNonModuleScriptIndex_==b){goog.loadQueuedModules_()}return true};goog.writeScripts_=function(){var a=[];var b={};var c=goog.dependencies_;function d(e){if(e in c.written){return}if(e in c.visited){if(!(e in b)){b[e]=true;a.push(e)}return}c.visited[e]=true;if(e in c.requires){for(var f in c.requires[e]){if(!goog.isProvided_(f)){if(f in c.nameToPath){d(c.nameToPath[f])}else{throw Error("Undefined nameToPath for "+f)}}}}if(!(e in b)){b[e]=true;a.push(e)}}for(var e in goog.included_){if(!c.written[e]){d(e)}}for(var f=0;f<a.length;f++){var e=a[f];goog.dependencies_.written[e]=true}var g=goog.moduleLoaderState_;goog.moduleLoaderState_=null;var h=false;for(var f=0;f<a.length;f++){var e=a[f];if(e){if(!c.pathIsModule[e]){goog.importScript_(goog.basePath+e)}else{h=true;goog.importModule_(goog.basePath+e)}}else{goog.moduleLoaderState_=g;throw Error("Undefined script input")}}goog.moduleLoaderState_=g};goog.getPathFromDeps_=function(a){if(a in goog.dependencies_.nameToPath){return goog.dependencies_.nameToPath[a]}else{return null}};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS){goog.importScript_(goog.basePath+"deps.js")}}goog.normalizePath_=function(a){var b=a.split("/");var c=0;while(c<b.length){if(b[c]=="."){b.splice(c,1)}else if(c&&b[c]==".."&&b[c-1]&&b[c-1]!=".."){b.splice(--c,2)}else{c++}}return b.join("/")};goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC){return goog.global.CLOSURE_LOAD_FILE_SYNC(a)}else{var b=new goog.global["XMLHttpRequest"];b.open("get",a,false);b.send();return b.responseText}};goog.retrieveAndExecModule_=function(a){if(!COMPILED){var b=a;a=goog.normalizePath_(a);var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;var d=goog.loadFileSync_(a);if(d!=null){var e=goog.wrapModule_(a,d);var f=goog.IS_OLD_IE_;if(f){goog.dependencies_.deferred[b]=e;goog.queuedModules_.push(b)}else{c(a,e)}}else{throw new Error("load of "+a+"failed")}}};goog.typeOf=function(a){var b=typeof a;if(b=="object"){if(a){if(a instanceof Array){return"array"}else if(a instanceof Object){return b}var c=Object.prototype.toString.call(a);if(c=="[object Window]"){return"object"}if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice")){return"array"}if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call")){return"function"}}else{return"null"}}else if(b=="function"&&typeof a.call=="undefined"){return"object"}return b};goog.isNull=function(a){return a===null};goog.isDefAndNotNull=function(a){return a!=null};goog.isArray=function(a){return goog.typeOf(a)=="array"};goog.isArrayLike=function(a){var b=goog.typeOf(a);return b=="array"||b=="object"&&typeof a.length=="number"};goog.isDateLike=function(a){return goog.isObject(a)&&typeof a.getFullYear=="function"};goog.isString=function(a){return typeof a=="string"};goog.isBoolean=function(a){return typeof a=="boolean"};goog.isNumber=function(a){return typeof a=="number"};goog.isFunction=function(a){return goog.typeOf(a)=="function"};goog.isObject=function(a){var b=typeof a;return b=="object"&&a!=null||b=="function"};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){if("removeAttribute"in a){a.removeAttribute(goog.UID_PROPERTY_)}try{delete a[goog.UID_PROPERTY_]}catch(a){}};goog.UID_PROPERTY_="closure_uid_"+(Math.random()*1e9>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if(b=="object"||b=="array"){if(a.clone){return a.clone()}var c=b=="array"?[]:{};for(var d in a){c[d]=goog.cloneObject(a[d])}return c}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};goog.bindJs_=function(a,b,c){if(!a){throw new Error}if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}else{return function(){return a.apply(b,arguments)}}};goog.bind=function(a,b,c){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1){goog.bind=goog.bindNative_}else{goog.bind=goog.bindJs_}return goog.bind.apply(null,arguments)};goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b){a[c]=b[c]}};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};goog.globalEval=function(a){if(goog.global.execScript){goog.global.execScript(a,"JavaScript")}else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _evalTest_ = 1;");if(typeof goog.global["_evalTest_"]!="undefined"){try{delete goog.global["_evalTest_"]}catch(a){}goog.evalWorksForGlobals_=true}else{goog.evalWorksForGlobals_=false}}if(goog.evalWorksForGlobals_){goog.global.eval(a)}else{var b=goog.global.document;var c=b.createElement("SCRIPT");c.type="text/javascript";c.defer=false;c.appendChild(b.createTextNode(a));b.body.appendChild(c);b.body.removeChild(c)}}else{throw Error("goog.globalEval not available")}};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a};var d=function(a){var b=a.split("-");var d=[];for(var e=0;e<b.length;e++){d.push(c(b[e]))}return d.join("-")};var e;if(goog.cssNameMapping_){e=goog.cssNameMappingStyle_=="BY_WHOLE"?c:d}else{e=function(a){return a}}if(b){return a+"-"+e(b)}else{return e(a)}};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING){goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING}goog.getMsg=function(a,b){if(b){a=a.replace(/\{\$([^}]+)}/g,function(a,c){return c in b?b[c]:a})}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,d){var e=new Array(arguments.length-2);for(var f=2;f<arguments.length;f++){e[f-2]=arguments[f]}return b.prototype[c].apply(a,e)}};goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d){throw Error("arguments.caller not defined.  goog.base() cannot be used "+"with strict mode code. See "+"http://www.ecma-international.org/ecma-262/5.1/#sec-C")}if(d.superClass_){var e=new Array(arguments.length-1);for(var f=1;f<arguments.length;f++){e[f-1]=arguments[f]}return d.superClass_.constructor.apply(a,e)}var g=new Array(arguments.length-2);for(var f=2;f<arguments.length;f++){g[f-2]=arguments[f]}var h=false;for(var i=a.constructor;i;i=i.superClass_&&i.superClass_.constructor){if(i.prototype[b]===d){h=true}else if(h){return i.prototype[b].apply(a,g)}}if(a[b]===d){return a.constructor.prototype[b].apply(a,g)}else{throw Error("goog.base called from a method of one name "+"to a method of a different name")}};goog.scope=function(a){a.call(goog.global)};if(!COMPILED){goog.global["COMPILED"]=COMPILED}goog.defineClass=function(a,b){var c=b.constructor;var d=b.statics;if(!c||c==Object.prototype.constructor){c=function(){throw Error("cannot instantiate an interface (no constructor defined).")}}var e=goog.defineClass.createSealingConstructor_(c,a);if(a){goog.inherits(e,a)}delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(e.prototype,b);if(d!=null){if(d instanceof Function){d(e)}else{goog.defineClass.applyProperties_(e,d)}}return e};goog.defineClass.ClassDescriptor;goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG);goog.defineClass.createSealingConstructor_=function(a,b){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(b&&b.prototype&&b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]){return a}var c=function(){var b=a.apply(this,arguments)||this;b[goog.UID_PROPERTY_]=b[goog.UID_PROPERTY_];if(this.constructor===c){Object.seal(b)}return b};return c}return a};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.defineClass.applyProperties_=function(a,b){var c;for(c in b){if(Object.prototype.hasOwnProperty.call(b,c)){a[c]=b[c]}}for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++){c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d];if(Object.prototype.hasOwnProperty.call(b,c)){a[c]=b[c]}}};goog.tagUnsealableClass=function(a){if(!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES){a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=true}};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";goog.provide("ol.PostRenderFunction");goog.provide("ol.PreRenderFunction");ol.PostRenderFunction;ol.PreRenderFunction;goog.provide("goog.debug.Error");goog.debug.Error=function(a){if(Error.captureStackTrace){Error.captureStackTrace(this,goog.debug.Error)}else{var b=(new Error).stack;if(b){this.stack=b}}if(a){this.message=String(a)}this.reportErrorToServer=true};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.provide("goog.dom.NodeType");goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.provide("goog.string");goog.provide("goog.string.Unicode");goog.define("goog.string.DETECT_DOUBLE_ESCAPING",false);goog.define("goog.string.FORCE_NON_DOM_HTML_UNESCAPING",false);goog.string.Unicode={NBSP:" "};goog.string.startsWith=function(a,b){return a.lastIndexOf(b,0)==0};goog.string.endsWith=function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)==c};goog.string.caseInsensitiveStartsWith=function(a,b){return goog.string.caseInsensitiveCompare(b,a.substr(0,b.length))==0};goog.string.caseInsensitiveEndsWith=function(a,b){return goog.string.caseInsensitiveCompare(b,a.substr(a.length-b.length,b.length))==0};goog.string.caseInsensitiveEquals=function(a,b){return a.toLowerCase()==b.toLowerCase()};goog.string.subs=function(a,b){var c=a.split("%s");var d="";var e=Array.prototype.slice.call(arguments,1);while(e.length&&c.length>1){d+=c.shift()+e.shift()}return d+c.join("%s")};goog.string.collapseWhitespace=function(a){return a.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmptyOrWhitespace=function(a){return/^[\s\xa0]*$/.test(a)};goog.string.isEmptyString=function(a){return a.length==0};goog.string.isEmpty=goog.string.isEmptyOrWhitespace;goog.string.isEmptyOrWhitespaceSafe=function(a){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(a))};goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(a){return!/[^\t\n\r ]/.test(a)};goog.string.isAlpha=function(a){return!/[^a-zA-Z]/.test(a)};goog.string.isNumeric=function(a){return!/[^0-9]/.test(a)};goog.string.isAlphaNumeric=function(a){return!/[^a-zA-Z0-9]/.test(a)};goog.string.isSpace=function(a){return a==" "};goog.string.isUnicodeChar=function(a){return a.length==1&&a>=" "&&a<="~"||a>=""&&a<="�"};goog.string.stripNewlines=function(a){return a.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(a){return a.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(a){return a.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(a){return a.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(a){return a.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(a,b){var c=String(a).toLowerCase();var d=String(b).toLowerCase();if(c<d){return-1}else if(c==d){return 0}else{return 1}};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;goog.string.numerateCompare=function(a,b){if(a==b){return 0}if(!a){return-1}if(!b){return 1}var c=a.toLowerCase().match(goog.string.numerateCompareRegExp_);var d=b.toLowerCase().match(goog.string.numerateCompareRegExp_);var e=Math.min(c.length,d.length);for(var f=0;f<e;f++){var g=c[f];var h=d[f];if(g!=h){var i=parseInt(g,10);if(!isNaN(i)){var j=parseInt(h,10);if(!isNaN(j)&&i-j){return i-j}}return g<h?-1:1}}if(c.length!=d.length){return c.length-d.length}return a<b?-1:1};goog.string.urlEncode=function(a){return encodeURIComponent(String(a))};goog.string.urlDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};goog.string.newLineToBr=function(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")};goog.string.htmlEscape=function(a,b){if(b){a=a.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;");if(goog.string.DETECT_DOUBLE_ESCAPING){a=a.replace(goog.string.E_RE_,"&#101;")}return a}else{if(!goog.string.ALL_RE_.test(a))return a;if(a.indexOf("&")!=-1){a=a.replace(goog.string.AMP_RE_,"&amp;")}if(a.indexOf("<")!=-1){a=a.replace(goog.string.LT_RE_,"&lt;")}if(a.indexOf(">")!=-1){a=a.replace(goog.string.GT_RE_,"&gt;")}if(a.indexOf('"')!=-1){a=a.replace(goog.string.QUOT_RE_,"&quot;")}if(a.indexOf("'")!=-1){a=a.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")}if(a.indexOf("\0")!=-1){a=a.replace(goog.string.NULL_RE_,"&#0;")}if(goog.string.DETECT_DOUBLE_ESCAPING&&a.indexOf("e")!=-1){a=a.replace(goog.string.E_RE_,"&#101;")}return a}};goog.string.AMP_RE_=/&/g;goog.string.LT_RE_=/</g;goog.string.GT_RE_=/>/g;goog.string.QUOT_RE_=/"/g;goog.string.SINGLE_QUOTE_RE_=/'/g;goog.string.NULL_RE_=/\x00/g;goog.string.E_RE_=/e/g;goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/;goog.string.unescapeEntities=function(a){if(goog.string.contains(a,"&")){if(!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global){return goog.string.unescapeEntitiesUsingDom_(a)}else{return goog.string.unescapePureXmlEntities_(a)}}return a};goog.string.unescapeEntitiesWithDocument=function(a,b){if(goog.string.contains(a,"&")){return goog.string.unescapeEntitiesUsingDom_(a,b)}return a};goog.string.unescapeEntitiesUsingDom_=function(a,b){var c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};var d;if(b){d=b.createElement("div")}else{d=goog.global.document.createElement("div")}return a.replace(goog.string.HTML_ENTITY_PATTERN_,function(a,b){var e=c[a];if(e){return e}if(b.charAt(0)=="#"){var f=Number("0"+b.substr(1));if(!isNaN(f)){e=String.fromCharCode(f)}}if(!e){d.innerHTML=a+" ";e=d.firstChild.nodeValue.slice(0,-1)}return c[a]=e})};goog.string.unescapePureXmlEntities_=function(a){return a.replace(/&([^;]+);/g,function(a,b){switch(b){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if(b.charAt(0)=="#"){var c=Number("0"+b.substr(1));if(!isNaN(c)){return String.fromCharCode(c)}}return a}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(a,b){return goog.string.newLineToBr(a.replace(/  /g," &#160;"),b)};goog.string.preserveSpaces=function(a){return a.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(a,b){var c=b.length;for(var d=0;d<c;d++){var e=c==1?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e){return a.substring(1,a.length-1)}}return a};goog.string.truncate=function(a,b,c){if(c){a=goog.string.unescapeEntities(a)}if(a.length>b){a=a.substring(0,b-3)+"..."}if(c){a=goog.string.htmlEscape(a)}return a};goog.string.truncateMiddle=function(a,b,c,d){if(c){a=goog.string.unescapeEntities(a)}if(d&&a.length>b){if(d>b){d=b}var e=a.length-d;var f=b-d;a=a.substring(0,f)+"..."+a.substring(e)}else if(a.length>b){var g=Math.floor(b/2);var h=a.length-g;g+=b%2;a=a.substring(0,g)+"..."+a.substring(h)}if(c){a=goog.string.htmlEscape(a)}return a};goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(a){a=String(a);if(a.quote){return a.quote()}else{var b=['"'];for(var c=0;c<a.length;c++){var d=a.charAt(c);var e=d.charCodeAt(0);b[c+1]=goog.string.specialEscapeChars_[d]||(e>31&&e<127?d:goog.string.escapeChar(d))}b.push('"');return b.join("")}};goog.string.escapeString=function(a){var b=[];for(var c=0;c<a.length;c++){b[c]=goog.string.escapeChar(a.charAt(c))}return b.join("")};goog.string.escapeChar=function(a){if(a in goog.string.jsEscapeCache_){return goog.string.jsEscapeCache_[a]}if(a in goog.string.specialEscapeChars_){return goog.string.jsEscapeCache_[a]=goog.string.specialEscapeChars_[a]}var b=a;var c=a.charCodeAt(0);if(c>31&&c<127){b=a}else{if(c<256){b="\\x";if(c<16||c>256){b+="0"}}else{b="\\u";if(c<4096){b+="0"}}b+=c.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[a]=b};goog.string.contains=function(a,b){return a.indexOf(b)!=-1};goog.string.caseInsensitiveContains=function(a,b){return goog.string.contains(a.toLowerCase(),b.toLowerCase())};goog.string.countOf=function(a,b){return a&&b?a.split(b).length-1:0};goog.string.removeAt=function(a,b,c){var d=a;if(b>=0&&b<a.length&&c>0){d=a.substr(0,b)+a.substr(b+c,a.length-b-c)}return d};goog.string.remove=function(a,b){var c=new RegExp(goog.string.regExpEscape(b),"");return a.replace(c,"")};goog.string.removeAll=function(a,b){var c=new RegExp(goog.string.regExpEscape(b),"g");return a.replace(c,"")};goog.string.regExpEscape=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(a,b){return new Array(b+1).join(a)};goog.string.padNumber=function(a,b,c){var d=goog.isDef(c)?a.toFixed(c):String(a);var e=d.indexOf(".");if(e==-1){e=d.length}return goog.string.repeat("0",Math.max(0,b-e))+d};goog.string.makeSafe=function(a){return a==null?"":String(a)};goog.string.buildString=function(a){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){var a=2147483648;return Math.floor(Math.random()*a).toString(36)+Math.abs(Math.floor(Math.random()*a)^goog.now()).toString(36)};goog.string.compareVersions=function(a,b){var c=0;var d=goog.string.trim(String(a)).split(".");var e=goog.string.trim(String(b)).split(".");var f=Math.max(d.length,e.length);for(var g=0;c==0&&g<f;g++){var h=d[g]||"";var i=e[g]||"";var j=new RegExp("(\\d*)(\\D*)","g");var k=new RegExp("(\\d*)(\\D*)","g");do{var l=j.exec(h)||["","",""];var m=k.exec(i)||["","",""];if(l[0].length==0&&m[0].length==0){break}var n=l[1].length==0?0:parseInt(l[1],10);var o=m[1].length==0?0:parseInt(m[1],10);c=goog.string.compareElements_(n,o)||goog.string.compareElements_(l[2].length==0,m[2].length==0)||goog.string.compareElements_(l[2],m[2])}while(c==0)}return c};goog.string.compareElements_=function(a,b){if(a<b){return-1}else if(a>b){return 1}return 0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(a){var b=0;for(var c=0;c<a.length;++c){b=31*b+a.charCodeAt(c);b%=goog.string.HASHCODE_MAX_}return b};goog.string.uniqueStringCounter_=Math.random()*2147483648|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(a){var b=Number(a);if(b==0&&goog.string.isEmptyOrWhitespace(a)){return NaN}return b};goog.string.isLowerCamelCase=function(a){return/^[a-z]+([A-Z][a-z]*)*$/.test(a)};goog.string.isUpperCamelCase=function(a){return/^([A-Z][a-z]*)+$/.test(a)};goog.string.toCamelCase=function(a){return String(a).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})};goog.string.toSelectorCase=function(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(a,b){var c=goog.isString(b)?goog.string.regExpEscape(b):"\\s";c=c?"|["+c+"]+":"";var d=new RegExp("(^"+c+")([a-z])","g");return a.replace(d,function(a,b,c){return b+c.toUpperCase()})};goog.string.capitalize=function(a){return String(a.charAt(0)).toUpperCase()+String(a.substr(1)).toLowerCase()};goog.string.parseInt=function(a){if(isFinite(a)){a=String(a)}if(goog.isString(a)){return/^\s*-?0x/i.test(a)?parseInt(a,16):parseInt(a,10)}return NaN};goog.string.splitLimit=function(a,b,c){var d=a.split(b);var e=[];while(c>0&&d.length){e.push(d.shift());c--}if(d.length){e.push(d.join(b))}return e};goog.string.editDistance=function(a,b){var c=[];var d=[];if(a==b){return 0}if(!a.length||!b.length){return Math.max(a.length,b.length)}for(var e=0;e<b.length+1;e++){c[e]=e}for(var e=0;e<a.length;e++){d[0]=e+1;for(var f=0;f<b.length;f++){var g=a[e]!=b[f];d[f+1]=Math.min(d[f]+1,c[f+1]+1,c[f]+g)}for(var f=0;f<c.length;f++){c[f]=d[f]}}return d[b.length]};goog.provide("goog.asserts");goog.provide("goog.asserts.AssertionError");goog.require("goog.debug.Error");goog.require("goog.dom.NodeType");goog.require("goog.string");goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG);goog.asserts.AssertionError=function(a,b){b.unshift(a);goog.debug.Error.call(this,goog.string.subs.apply(null,b));b.shift();this.messagePattern=a};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(a){throw a};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;goog.asserts.doAssertFailure_=function(a,b,c,d){var e="Assertion failed";if(c){e+=": "+c;var f=d}else if(a){e+=": "+a;f=b}var g=new goog.asserts.AssertionError(""+e,f||[]);goog.asserts.errorHandler_(g)};goog.asserts.setErrorHandler=function(a){if(goog.asserts.ENABLE_ASSERTS){goog.asserts.errorHandler_=a}};goog.asserts.assert=function(a,b,c){if(goog.asserts.ENABLE_ASSERTS&&!a){goog.asserts.doAssertFailure_("",null,b,Array.prototype.slice.call(arguments,2))}return a};goog.asserts.fail=function(a,b){if(goog.asserts.ENABLE_ASSERTS){goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))}};goog.asserts.assertNumber=function(a,b,c){if(goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(a)){goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2))}return a};goog.asserts.assertString=function(a,b,c){
if(goog.asserts.ENABLE_ASSERTS&&!goog.isString(a)){goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2))}return a};goog.asserts.assertFunction=function(a,b,c){if(goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(a)){goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2))}return a};goog.asserts.assertObject=function(a,b,c){if(goog.asserts.ENABLE_ASSERTS&&!goog.isObject(a)){goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2))}return a};goog.asserts.assertArray=function(a,b,c){if(goog.asserts.ENABLE_ASSERTS&&!goog.isArray(a)){goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2))}return a};goog.asserts.assertBoolean=function(a,b,c){if(goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(a)){goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2))}return a};goog.asserts.assertElement=function(a,b,c){if(goog.asserts.ENABLE_ASSERTS&&(!goog.isObject(a)||a.nodeType!=goog.dom.NodeType.ELEMENT)){goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2))}return a};goog.asserts.assertInstanceof=function(a,b,c,d){if(goog.asserts.ENABLE_ASSERTS&&!(a instanceof b)){goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(b),goog.asserts.getType_(a)],c,Array.prototype.slice.call(arguments,3))}return a};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var a in Object.prototype){goog.asserts.fail(a+" should not be enumerable in Object.prototype.")}};goog.asserts.getType_=function(a){if(a instanceof Function){return a.displayName||a.name||"unknown type name"}else if(a instanceof Object){return a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}else{return a===null?"null":typeof a}};goog.provide("goog.array");goog.provide("goog.array.ArrayLike");goog.require("goog.asserts");goog.define("goog.NATIVE_ARRAY_PROTOTYPES",goog.TRUSTED_SITE);goog.define("goog.array.ASSUME_NATIVE_FUNCTIONS",false);goog.array.ArrayLike;goog.array.peek=function(a){return a[a.length-1]};goog.array.last=goog.array.peek;goog.array.ARRAY_PROTOTYPE_=Array.prototype;goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(a,b,c){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(a,b,c)}:function(a,b,c){var d=c==null?0:c<0?Math.max(0,a.length+c):c;if(goog.isString(a)){if(!goog.isString(b)||b.length!=1){return-1}return a.indexOf(b,d)}for(var e=d;e<a.length;e++){if(e in a&&a[e]===b)return e}return-1};goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(a,b,c){goog.asserts.assert(a.length!=null);var d=c==null?a.length-1:c;return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(a,b,d)}:function(a,b,c){var d=c==null?a.length-1:c;if(d<0){d=Math.max(0,a.length+d)}if(goog.isString(a)){if(!goog.isString(b)||b.length!=1){return-1}return a.lastIndexOf(b,d)}for(var e=d;e>=0;e--){if(e in a&&a[e]===b)return e}return-1};goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(a,b,c){goog.asserts.assert(a.length!=null);goog.array.ARRAY_PROTOTYPE_.forEach.call(a,b,c)}:function(a,b,c){var d=a.length;var e=goog.isString(a)?a.split(""):a;for(var f=0;f<d;f++){if(f in e){b.call(c,e[f],f,a)}}};goog.array.forEachRight=function(a,b,c){var d=a.length;var e=goog.isString(a)?a.split(""):a;for(var f=d-1;f>=0;--f){if(f in e){b.call(c,e[f],f,a)}}};goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(a,b,c){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.filter.call(a,b,c)}:function(a,b,c){var d=a.length;var e=[];var f=0;var g=goog.isString(a)?a.split(""):a;for(var h=0;h<d;h++){if(h in g){var i=g[h];if(b.call(c,i,h,a)){e[f++]=i}}}return e};goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(a,b,c){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.map.call(a,b,c)}:function(a,b,c){var d=a.length;var e=new Array(d);var f=goog.isString(a)?a.split(""):a;for(var g=0;g<d;g++){if(g in f){e[g]=b.call(c,f[g],g,a)}}return e};goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(a,b,c,d){goog.asserts.assert(a.length!=null);if(d){b=goog.bind(b,d)}return goog.array.ARRAY_PROTOTYPE_.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;goog.array.forEach(a,function(c,f){e=b.call(d,e,c,f,a)});return e};goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(a,b,c,d){goog.asserts.assert(a.length!=null);if(d){b=goog.bind(b,d)}return goog.array.ARRAY_PROTOTYPE_.reduceRight.call(a,b,c)}:function(a,b,c,d){var e=c;goog.array.forEachRight(a,function(c,f){e=b.call(d,e,c,f,a)});return e};goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(a,b,c){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.some.call(a,b,c)}:function(a,b,c){var d=a.length;var e=goog.isString(a)?a.split(""):a;for(var f=0;f<d;f++){if(f in e&&b.call(c,e[f],f,a)){return true}}return false};goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(a,b,c){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.every.call(a,b,c)}:function(a,b,c){var d=a.length;var e=goog.isString(a)?a.split(""):a;for(var f=0;f<d;f++){if(f in e&&!b.call(c,e[f],f,a)){return false}}return true};goog.array.count=function(a,b,c){var d=0;goog.array.forEach(a,function(a,e,f){if(b.call(c,a,e,f)){++d}},c);return d};goog.array.find=function(a,b,c){var d=goog.array.findIndex(a,b,c);return d<0?null:goog.isString(a)?a.charAt(d):a[d]};goog.array.findIndex=function(a,b,c){var d=a.length;var e=goog.isString(a)?a.split(""):a;for(var f=0;f<d;f++){if(f in e&&b.call(c,e[f],f,a)){return f}}return-1};goog.array.findRight=function(a,b,c){var d=goog.array.findIndexRight(a,b,c);return d<0?null:goog.isString(a)?a.charAt(d):a[d]};goog.array.findIndexRight=function(a,b,c){var d=a.length;var e=goog.isString(a)?a.split(""):a;for(var f=d-1;f>=0;f--){if(f in e&&b.call(c,e[f],f,a)){return f}}return-1};goog.array.contains=function(a,b){return goog.array.indexOf(a,b)>=0};goog.array.isEmpty=function(a){return a.length==0};goog.array.clear=function(a){if(!goog.isArray(a)){for(var b=a.length-1;b>=0;b--){delete a[b]}}a.length=0};goog.array.insert=function(a,b){if(!goog.array.contains(a,b)){a.push(b)}};goog.array.insertAt=function(a,b,c){goog.array.splice(a,c,0,b)};goog.array.insertArrayAt=function(a,b,c){goog.partial(goog.array.splice,a,c,0).apply(null,b)};goog.array.insertBefore=function(a,b,c){var d;if(arguments.length==2||(d=goog.array.indexOf(a,c))<0){a.push(b)}else{goog.array.insertAt(a,b,d)}};goog.array.remove=function(a,b){var c=goog.array.indexOf(a,b);var d;if(d=c>=0){goog.array.removeAt(a,c)}return d};goog.array.removeAt=function(a,b){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.call(a,b,1).length==1};goog.array.removeIf=function(a,b,c){var d=goog.array.findIndex(a,b,c);if(d>=0){goog.array.removeAt(a,d);return true}return false};goog.array.removeAllIf=function(a,b,c){var d=0;goog.array.forEachRight(a,function(e,f){if(b.call(c,e,f,a)){if(goog.array.removeAt(a,f)){d++}}});return d};goog.array.concat=function(a){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.join=function(a){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.toArray=function(a){var b=a.length;if(b>0){var c=new Array(b);for(var d=0;d<b;d++){c[d]=a[d]}return c}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(goog.isArrayLike(d)){var e=a.length||0;var f=d.length||0;a.length=e+f;for(var g=0;g<f;g++){a[e+g]=d[g]}}else{a.push(d)}}};goog.array.splice=function(a,b,c,d){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.apply(a,goog.array.slice(arguments,1))};goog.array.slice=function(a,b,c){goog.asserts.assert(a.length!=null);if(arguments.length<=2){return goog.array.ARRAY_PROTOTYPE_.slice.call(a,b)}else{return goog.array.ARRAY_PROTOTYPE_.slice.call(a,b,c)}};goog.array.removeDuplicates=function(a,b,c){var d=b||a;var e=function(a){return goog.isObject(a)?"o"+goog.getUid(a):(typeof a).charAt(0)+a};var f=c||e;var g={},h=0,i=0;while(i<a.length){var j=a[i++];var k=f(j);if(!Object.prototype.hasOwnProperty.call(g,k)){g[k]=true;d[h++]=j}}d.length=h};goog.array.binarySearch=function(a,b,c){return goog.array.binarySearch_(a,c||goog.array.defaultCompare,false,b)};goog.array.binarySelect=function(a,b,c){return goog.array.binarySearch_(a,b,true,undefined,c)};goog.array.binarySearch_=function(a,b,c,d,e){var f=0;var g=a.length;var h;while(f<g){var i=f+g>>1;var j;if(c){j=b.call(e,a[i],i,a)}else{j=b(d,a[i])}if(j>0){f=i+1}else{g=i;h=!j}}return h?f:~f};goog.array.sort=function(a,b){a.sort(b||goog.array.defaultCompare)};goog.array.stableSort=function(a,b){for(var c=0;c<a.length;c++){a[c]={index:c,value:a[c]}}var d=b||goog.array.defaultCompare;function e(a,b){return d(a.value,b.value)||a.index-b.index}goog.array.sort(a,e);for(var c=0;c<a.length;c++){a[c]=a[c].value}};goog.array.sortByKey=function(a,b,c){var d=c||goog.array.defaultCompare;goog.array.sort(a,function(a,c){return d(b(a),b(c))})};goog.array.sortObjectsByKey=function(a,b,c){goog.array.sortByKey(a,function(a){return a[b]},c)};goog.array.isSorted=function(a,b,c){var d=b||goog.array.defaultCompare;for(var e=1;e<a.length;e++){var f=d(a[e-1],a[e]);if(f>0||f==0&&c){return false}}return true};goog.array.equals=function(a,b,c){if(!goog.isArrayLike(a)||!goog.isArrayLike(b)||a.length!=b.length){return false}var d=a.length;var e=c||goog.array.defaultCompareEquality;for(var f=0;f<d;f++){if(!e(a[f],b[f])){return false}}return true};goog.array.compare3=function(a,b,c){var d=c||goog.array.defaultCompare;var e=Math.min(a.length,b.length);for(var f=0;f<e;f++){var g=d(a[f],b[f]);if(g!=0){return g}}return goog.array.defaultCompare(a.length,b.length)};goog.array.defaultCompare=function(a,b){return a>b?1:a<b?-1:0};goog.array.inverseDefaultCompare=function(a,b){return-goog.array.defaultCompare(a,b)};goog.array.defaultCompareEquality=function(a,b){return a===b};goog.array.binaryInsert=function(a,b,c){var d=goog.array.binarySearch(a,b,c);if(d<0){goog.array.insertAt(a,b,-(d+1));return true}return false};goog.array.binaryRemove=function(a,b,c){var d=goog.array.binarySearch(a,b,c);return d>=0?goog.array.removeAt(a,d):false};goog.array.bucket=function(a,b,c){var d={};for(var e=0;e<a.length;e++){var f=a[e];var g=b.call(c,f,e,a);if(goog.isDef(g)){var h=d[g]||(d[g]=[]);h.push(f)}}return d};goog.array.toObject=function(a,b,c){var d={};goog.array.forEach(a,function(e,f){d[b.call(c,e,f,a)]=e});return d};goog.array.range=function(a,b,c){var d=[];var e=0;var f=a;var g=c||1;if(b!==undefined){e=a;f=b}if(g*(f-e)<0){return[]}if(g>0){for(var h=e;h<f;h+=g){d.push(h)}}else{for(var h=e;h>f;h+=g){d.push(h)}}return d};goog.array.repeat=function(a,b){var c=[];for(var d=0;d<b;d++){c[d]=a}return c};goog.array.flatten=function(a){var b=8192;var c=[];for(var d=0;d<arguments.length;d++){var e=arguments[d];if(goog.isArray(e)){for(var f=0;f<e.length;f+=b){var g=goog.array.slice(e,f,f+b);var h=goog.array.flatten.apply(null,g);for(var i=0;i<h.length;i++){c.push(h[i])}}}else{c.push(e)}}return c};goog.array.rotate=function(a,b){goog.asserts.assert(a.length!=null);if(a.length){b%=a.length;if(b>0){goog.array.ARRAY_PROTOTYPE_.unshift.apply(a,a.splice(-b,b))}else if(b<0){goog.array.ARRAY_PROTOTYPE_.push.apply(a,a.splice(0,-b))}}return a};goog.array.moveItem=function(a,b,c){goog.asserts.assert(b>=0&&b<a.length);goog.asserts.assert(c>=0&&c<a.length);var d=goog.array.ARRAY_PROTOTYPE_.splice.call(a,b,1);goog.array.ARRAY_PROTOTYPE_.splice.call(a,c,0,d[0])};goog.array.zip=function(a){if(!arguments.length){return[]}var b=[];for(var c=0;true;c++){var d=[];for(var e=0;e<arguments.length;e++){var f=arguments[e];if(c>=f.length){return b}d.push(f[c])}b.push(d)}};goog.array.shuffle=function(a,b){var c=b||Math.random;for(var d=a.length-1;d>0;d--){var e=Math.floor(c()*(d+1));var f=a[d];a[d]=a[e];a[e]=f}};goog.array.copyByIndex=function(a,b){var c=[];goog.array.forEach(b,function(b){c.push(a[b])});return c};goog.provide("goog.labs.userAgent.util");goog.require("goog.string");goog.labs.userAgent.util.getNativeUserAgentString_=function(){var a=goog.labs.userAgent.util.getNavigator_();if(a){var b=a.userAgent;if(b){return b}}return""};goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator};goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_();goog.labs.userAgent.util.setUserAgent=function(a){goog.labs.userAgent.util.userAgent_=a||goog.labs.userAgent.util.getNativeUserAgentString_()};goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_};goog.labs.userAgent.util.matchUserAgent=function(a){var b=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(b,a)};goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(a){var b=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(b,a)};goog.labs.userAgent.util.extractVersionTuples=function(a){var b=new RegExp("(\\w[\\w ]+)"+"/"+"([^\\s]+)"+"\\s*"+"(?:\\((.*?)\\))?","g");var c=[];var d;while(d=b.exec(a)){c.push([d[1],d[2],d[3]||undefined])}return c};goog.provide("goog.object");goog.object.forEach=function(a,b,c){for(var d in a){b.call(c,a[d],d,a)}};goog.object.filter=function(a,b,c){var d={};for(var e in a){if(b.call(c,a[e],e,a)){d[e]=a[e]}}return d};goog.object.map=function(a,b,c){var d={};for(var e in a){d[e]=b.call(c,a[e],e,a)}return d};goog.object.some=function(a,b,c){for(var d in a){if(b.call(c,a[d],d,a)){return true}}return false};goog.object.every=function(a,b,c){for(var d in a){if(!b.call(c,a[d],d,a)){return false}}return true};goog.object.getCount=function(a){var b=0;for(var c in a){b++}return b};goog.object.getAnyKey=function(a){for(var b in a){return b}};goog.object.getAnyValue=function(a){for(var b in a){return a[b]}};goog.object.contains=function(a,b){return goog.object.containsValue(a,b)};goog.object.getValues=function(a){var b=[];var c=0;for(var d in a){b[c++]=a[d]}return b};goog.object.getKeys=function(a){var b=[];var c=0;for(var d in a){b[c++]=d}return b};goog.object.getValueByKeys=function(a,b){var c=goog.isArrayLike(b);var d=c?b:arguments;for(var e=c?0:1;e<d.length;e++){a=a[d[e]];if(!goog.isDef(a)){break}}return a};goog.object.containsKey=function(a,b){return b in a};goog.object.containsValue=function(a,b){for(var c in a){if(a[c]==b){return true}}return false};goog.object.findKey=function(a,b,c){for(var d in a){if(b.call(c,a[d],d,a)){return d}}return undefined};goog.object.findValue=function(a,b,c){var d=goog.object.findKey(a,b,c);return d&&a[d]};goog.object.isEmpty=function(a){for(var b in a){return false}return true};goog.object.clear=function(a){for(var b in a){delete a[b]}};goog.object.remove=function(a,b){var c;if(c=b in a){delete a[b]}return c};goog.object.add=function(a,b,c){if(b in a){throw Error('The object already contains the key "'+b+'"')}goog.object.set(a,b,c)};goog.object.get=function(a,b,c){if(b in a){return a[b]}return c};goog.object.set=function(a,b,c){a[b]=c};goog.object.setIfUndefined=function(a,b,c){return b in a?a[b]:a[b]=c};goog.object.setWithReturnValueIfNotSet=function(a,b,c){if(b in a){return a[b]}var d=c();a[b]=d;return d};goog.object.equals=function(a,b){for(var c in a){if(!(c in b)||a[c]!==b[c]){return false}}for(var c in b){if(!(c in a)){return false}}return true};goog.object.clone=function(a){var b={};for(var c in a){b[c]=a[c]}return b};goog.object.unsafeClone=function(a){var b=goog.typeOf(a);if(b=="object"||b=="array"){if(a.clone){return a.clone()}var c=b=="array"?[]:{};for(var d in a){c[d]=goog.object.unsafeClone(a[d])}return c}return a};goog.object.transpose=function(a){var b={};for(var c in a){b[a[c]]=c}return b};goog.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.object.extend=function(a,b){var c,d;for(var e=1;e<arguments.length;e++){d=arguments[e];for(c in d){a[c]=d[c]}for(var f=0;f<goog.object.PROTOTYPE_FIELDS_.length;f++){c=goog.object.PROTOTYPE_FIELDS_[f];if(Object.prototype.hasOwnProperty.call(d,c)){a[c]=d[c]}}}};goog.object.create=function(a){var b=arguments.length;if(b==1&&goog.isArray(arguments[0])){return goog.object.create.apply(null,arguments[0])}if(b%2){throw Error("Uneven number of arguments")}var c={};for(var d=0;d<b;d+=2){c[arguments[d]]=arguments[d+1]}return c};goog.object.createSet=function(a){var b=arguments.length;if(b==1&&goog.isArray(arguments[0])){return goog.object.createSet.apply(null,arguments[0])}var c={};for(var d=0;d<b;d++){c[arguments[d]]=true}return c};goog.object.createImmutableView=function(a){var b=a;if(Object.isFrozen&&!Object.isFrozen(a)){b=Object.create(a);Object.freeze(b)}return b};goog.object.isImmutableView=function(a){return!!Object.isFrozen&&Object.isFrozen(a)};goog.provide("goog.labs.userAgent.browser");goog.require("goog.array");goog.require("goog.labs.userAgent.util");goog.require("goog.object");goog.require("goog.string");goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")};goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")};goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))};goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")};goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")};goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchOpera_()&&!goog.labs.userAgent.browser.matchEdge_()};goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())};goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_;goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_;goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_;goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_;goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_;goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_;goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_;goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_;goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_;goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")};goog.labs.userAgent.browser.getVersion=function(){var a=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE()){return goog.labs.userAgent.browser.getIEVersion_(a)}var b=goog.labs.userAgent.util.extractVersionTuples(a);var c={};goog.array.forEach(b,function(a){var b=a[0];var d=a[1];c[b]=d});var d=goog.partial(goog.object.containsKey,c);function e(a){var b=goog.array.find(a,d);return c[b]||""}if(goog.labs.userAgent.browser.isOpera()){return e(["Version","Opera","OPR"])}if(goog.labs.userAgent.browser.isEdge()){return e(["Edge"])}if(goog.labs.userAgent.browser.isChrome()){return e(["Chrome","CriOS"])}var f=b[2];return f&&f[1]||""};goog.labs.userAgent.browser.isVersionOrHigher=function(a){return goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),a)>=0};goog.labs.userAgent.browser.getIEVersion_=function(a){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1]){return b[1]}var c="";var d=/MSIE +([\d\.]+)/.exec(a);if(d&&d[1]){var e=/Trident\/(\d.\d)/.exec(a);if(d[1]=="7.0"){if(e&&e[1]){switch(e[1]){case"4.0":c="8.0";break;case"5.0":c="9.0";break;case"6.0":c="10.0";break;case"7.0":c="11.0";break}}else{c="7.0"}}else{c=d[1]}}return c};goog.provide("goog.labs.userAgent.engine");goog.require("goog.array");goog.require("goog.labs.userAgent.util");goog.require("goog.string");goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")};goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.getVersion=function(){var a=goog.labs.userAgent.util.getUserAgent();if(a){var b=goog.labs.userAgent.util.extractVersionTuples(a);var c=goog.labs.userAgent.engine.getEngineTuple_(b);if(c){if(c[0]=="Gecko"){return goog.labs.userAgent.engine.getVersionForKey_(b,"Firefox")}return c[1]}var d=b[0];var e;if(d&&(e=d[2])){var f=/Trident\/([^\s;]+)/.exec(e);if(f){return f[1]}}}return""};goog.labs.userAgent.engine.getEngineTuple_=function(a){if(!goog.labs.userAgent.engine.isEdge()){return a[1]}for(var b=0;b<a.length;b++){var c=a[b];if(c[0]=="Edge"){return c}}};goog.labs.userAgent.engine.isVersionOrHigher=function(a){return goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),a)>=0};goog.labs.userAgent.engine.getVersionForKey_=function(a,b){var c=goog.array.find(a,function(a){return b==a[0]});return c&&c[1]||""};goog.provide("goog.labs.userAgent.platform");goog.require("goog.labs.userAgent.util");goog.require("goog.string");goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")};goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")};goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()};goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")};goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")};goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")};goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")};goog.labs.userAgent.platform.getVersion=function(){var a=goog.labs.userAgent.util.getUserAgent();var b="",c;if(goog.labs.userAgent.platform.isWindows()){c=/Windows (?:NT|Phone) ([0-9.]+)/;var d=c.exec(a);if(d){b=d[1]}else{b="0.0"}}else if(goog.labs.userAgent.platform.isIos()){c=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/;var d=c.exec(a);b=d&&d[1].replace(/_/g,".")}else if(goog.labs.userAgent.platform.isMacintosh()){c=/Mac OS X ([0-9_.]+)/;var d=c.exec(a);b=d?d[1].replace(/_/g,"."):"10"}else if(goog.labs.userAgent.platform.isAndroid()){c=/Android\s+([^\);]+)(\)|;)/;var d=c.exec(a);b=d&&d[1]}else if(goog.labs.userAgent.platform.isChromeOS()){c=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/;var d=c.exec(a);b=d&&d[1]}return b||""};goog.labs.userAgent.platform.isVersionOrHigher=function(a){return goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),a)>=0};goog.provide("goog.userAgent");goog.require("goog.labs.userAgent.browser");goog.require("goog.labs.userAgent.engine");goog.require("goog.labs.userAgent.platform");goog.require("goog.labs.userAgent.util");goog.require("goog.string");goog.define("goog.userAgent.ASSUME_IE",false);goog.define("goog.userAgent.ASSUME_EDGE",false);goog.define("goog.userAgent.ASSUME_GECKO",false);goog.define("goog.userAgent.ASSUME_WEBKIT",false);goog.define("goog.userAgent.ASSUME_MOBILE_WEBKIT",false);goog.define("goog.userAgent.ASSUME_OPERA",false);goog.define("goog.userAgent.ASSUME_ANY_VERSION",false);goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()};goog.userAgent.getNavigator=function(){return goog.global["navigator"]||null};goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera();goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE();goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge();goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko();goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit();goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")};goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_();goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var a=goog.userAgent.getNavigator();return a&&a.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.define("goog.userAgent.ASSUME_MAC",false);goog.define("goog.userAgent.ASSUME_WINDOWS",false);goog.define("goog.userAgent.ASSUME_LINUX",false);goog.define("goog.userAgent.ASSUME_X11",false);goog.define("goog.userAgent.ASSUME_ANDROID",false);goog.define("goog.userAgent.ASSUME_IPHONE",false);goog.define("goog.userAgent.ASSUME_IPAD",false);goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD;goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows();goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()};goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_();goog.userAgent.isX11_=function(){var a=goog.userAgent.getNavigator();return!!a&&goog.string.contains(a["appVersion"]||"","X11")};goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_();goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid();goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone();goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad();goog.userAgent.determineVersion_=function(){if(goog.userAgent.OPERA&&goog.global["opera"]){var a=goog.global["opera"].version;return goog.isFunction(a)?a():a}var b="";var c=goog.userAgent.getVersionRegexResult_();if(c){b=c?c[1]:""}if(goog.userAgent.IE){var d=goog.userAgent.getDocumentMode_();if(d>parseFloat(b)){return String(d)}}return b};goog.userAgent.getVersionRegexResult_=function(){var a=goog.userAgent.getUserAgentString();if(goog.userAgent.GECKO){return/rv\:([^\);]+)(\)|;)/.exec(a)}if(goog.userAgent.EDGE){return/Edge\/([\d\.]+)/.exec(a)}if(goog.userAgent.IE){return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a)}if(goog.userAgent.WEBKIT){return/WebKit\/(\S+)/.exec(a)}};goog.userAgent.getDocumentMode_=function(){var a=goog.global["document"];return a?a["documentMode"]:undefined};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(a,b){return goog.string.compareVersions(a,b)};goog.userAgent.isVersionOrHigherCache_={};goog.userAgent.isVersionOrHigher=function(a){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[a]||(goog.userAgent.isVersionOrHigherCache_[a]=goog.string.compareVersions(goog.userAgent.VERSION,a)>=0)};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(a){return goog.userAgent.DOCUMENT_MODE>=a};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;goog.userAgent.DOCUMENT_MODE=function(){var a=goog.global["document"];var b=goog.userAgent.getDocumentMode_();if(!a||!goog.userAgent.IE){return undefined}return b||(a["compatMode"]=="CSS1Compat"?parseInt(goog.userAgent.VERSION,10):5)}();goog.require("goog.userAgent");goog.provide("ol");ol.ASSUME_TOUCH=false;ol.DEFAULT_MAX_ZOOM=42;ol.DEFAULT_MIN_ZOOM=0;ol.DEFAULT_TILE_CACHE_HIGH_WATER_MARK=2048;ol.DEFAULT_TILE_SIZE=256;ol.DEFAULT_WMS_VERSION="1.3.0";ol.DRAG_BOX_HYSTERESIS_PIXELS=8;ol.ENABLE_CANVAS=true;ol.ENABLE_DOM=true;ol.ENABLE_IMAGE=true;ol.ENABLE_NAMED_COLORS=false;ol.ENABLE_PROJ4JS=true;ol.ENABLE_TILE=true;ol.ENABLE_VECTOR=true;ol.ENABLE_WEBGL=true;ol.LEGACY_IE_SUPPORT=false;ol.INITIAL_ATLAS_SIZE=256;ol.IS_LEGACY_IE=goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9.0")&&goog.userAgent.VERSION!=="";ol.MAX_ATLAS_SIZE=-1;ol.MOUSEWHEELZOOM_MAXDELTA=1;ol.MOUSEWHEELZOOM_TIMEOUT_DURATION=80;ol.OVERVIEWMAP_MAX_RATIO=.75;ol.OVERVIEWMAP_MIN_RATIO=.1;ol.SIMPLIFY_TOLERANCE=.5;ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK=1024;ol.WEBGL_MAX_TEXTURE_SIZE;ol.WEBGL_EXTENSIONS;ol.inherits=goog.inherits;goog.provide("goog.math");goog.require("goog.array");goog.require("goog.asserts")
;goog.math.randomInt=function(a){return Math.floor(Math.random()*a)};goog.math.uniformRandom=function(a,b){return a+Math.random()*(b-a)};goog.math.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};goog.math.modulo=function(a,b){var c=a%b;return c*b<0?c+b:c};goog.math.lerp=function(a,b,c){return a+c*(b-a)};goog.math.nearlyEquals=function(a,b,c){return Math.abs(a-b)<=(c||1e-6)};goog.math.standardAngle=function(a){return goog.math.modulo(a,360)};goog.math.standardAngleInRadians=function(a){return goog.math.modulo(a,2*Math.PI)};goog.math.toRadians=function(a){return a*Math.PI/180};goog.math.toDegrees=function(a){return a*180/Math.PI};goog.math.angleDx=function(a,b){return b*Math.cos(goog.math.toRadians(a))};goog.math.angleDy=function(a,b){return b*Math.sin(goog.math.toRadians(a))};goog.math.angle=function(a,b,c,d){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(d-b,c-a)))};goog.math.angleDifference=function(a,b){var c=goog.math.standardAngle(b)-goog.math.standardAngle(a);if(c>180){c=c-360}else if(c<=-180){c=360+c}return c};goog.math.sign=Math.sign||function(a){if(a>0){return 1}if(a<0){return-1}return a};goog.math.longestCommonSubsequence=function(a,b,c,d){var e=c||function(a,b){return a==b};var f=d||function(b,c){return a[b]};var g=a.length;var h=b.length;var i=[];for(var j=0;j<g+1;j++){i[j]=[];i[j][0]=0}for(var k=0;k<h+1;k++){i[0][k]=0}for(j=1;j<=g;j++){for(k=1;k<=h;k++){if(e(a[j-1],b[k-1])){i[j][k]=i[j-1][k-1]+1}else{i[j][k]=Math.max(i[j-1][k],i[j][k-1])}}}var l=[];var j=g,k=h;while(j>0&&k>0){if(e(a[j-1],b[k-1])){l.unshift(f(j-1,k-1));j--;k--}else{if(i[j-1][k]>i[j][k-1]){j--}else{k--}}}return l};goog.math.sum=function(a){return goog.array.reduce(arguments,function(a,b){return a+b},0)};goog.math.average=function(a){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.sampleVariance=function(a){var b=arguments.length;if(b<2){return 0}var c=goog.math.average.apply(null,arguments);var d=goog.math.sum.apply(null,goog.array.map(arguments,function(a){return Math.pow(a-c,2)}))/(b-1);return d};goog.math.standardDeviation=function(a){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))};goog.math.isInt=function(a){return isFinite(a)&&a%1==0};goog.math.isFiniteNumber=function(a){return isFinite(a)&&!isNaN(a)};goog.math.isNegativeZero=function(a){return a==0&&1/a<0};goog.math.log10Floor=function(a){if(a>0){var b=Math.round(Math.log(a)*Math.LOG10E);return b-(parseFloat("1e"+b)>a)}return a==0?-Infinity:NaN};goog.math.safeFloor=function(a,b){goog.asserts.assert(!goog.isDef(b)||b>0);return Math.floor(a+(b||2e-15))};goog.math.safeCeil=function(a,b){goog.asserts.assert(!goog.isDef(b)||b>0);return Math.ceil(a-(b||2e-15))};goog.provide("ol.CenterConstraint");goog.provide("ol.CenterConstraintType");goog.require("goog.math");ol.CenterConstraintType;ol.CenterConstraint.createExtent=function(a){return function(b){if(goog.isDef(b)){return[goog.math.clamp(b[0],a[0],a[2]),goog.math.clamp(b[1],a[1],a[3])]}else{return undefined}}};ol.CenterConstraint.none=function(a){return a};goog.provide("ol.array");goog.require("goog.array");goog.require("goog.asserts");ol.array.binaryFindNearest=function(a,b){var c=goog.array.binarySearch(a,b,function(a,b){return b-a});if(c>=0){return c}else if(c==-1){return 0}else if(c==-a.length-1){return a.length-1}else{var d=-c-2;var e=-c-1;if(a[d]-b<b-a[e]){return d}else{return e}}};ol.array.linearFindNearest=function(a,b,c){var d=a.length;if(a[0]<=b){return 0}else if(b<=a[d-1]){return d-1}else{var e;if(c>0){for(e=1;e<d;++e){if(a[e]<b){return e-1}}}else if(c<0){for(e=1;e<d;++e){if(a[e]<=b){return e}}}else{for(e=1;e<d;++e){if(a[e]==b){return e}else if(a[e]<b){if(a[e-1]-b<b-a[e]){return e-1}else{return e}}}}goog.asserts.fail();return d-1}};ol.array.reverseSubArray=function(a,b,c){goog.asserts.assert(b>=0,"Array begin index should be equal to or greater than 0");goog.asserts.assert(c<a.length,"Array end index should be less than the array length");while(b<c){var d=a[b];a[b]=a[c];a[c]=d;++b;--c}};goog.provide("ol.ResolutionConstraint");goog.provide("ol.ResolutionConstraintType");goog.require("goog.math");goog.require("ol.array");ol.ResolutionConstraintType;ol.ResolutionConstraint.createSnapToResolutions=function(a){return function(b,c,d){if(goog.isDef(b)){var e=ol.array.linearFindNearest(a,b,d);e=goog.math.clamp(e+c,0,a.length-1);return a[e]}else{return undefined}}};ol.ResolutionConstraint.createSnapToPower=function(a,b,c){return function(d,e,f){if(goog.isDef(d)){var g;if(f>0){g=0}else if(f<0){g=1}else{g=.5}var h=Math.floor(Math.log(b/d)/Math.log(a)+g);var i=Math.max(h+e,0);if(goog.isDef(c)){i=Math.min(i,c)}return b/Math.pow(a,i)}else{return undefined}}};goog.provide("ol.RotationConstraint");goog.provide("ol.RotationConstraintType");goog.require("goog.math");ol.RotationConstraintType;ol.RotationConstraint.disable=function(a,b){if(goog.isDef(a)){return 0}else{return undefined}};ol.RotationConstraint.none=function(a,b){if(goog.isDef(a)){return a+b}else{return undefined}};ol.RotationConstraint.createSnapToN=function(a){var b=2*Math.PI/a;return function(a,c){if(goog.isDef(a)){a=Math.floor((a+c)/b+.5)*b;return a}else{return undefined}}};ol.RotationConstraint.createSnapToZero=function(a){var b=a||goog.math.toRadians(5);return function(a,c){if(goog.isDef(a)){if(Math.abs(a+c)<=b){return 0}else{return a+c}}else{return undefined}}};goog.provide("ol.Constraints");goog.require("ol.CenterConstraintType");goog.require("ol.ResolutionConstraintType");goog.require("ol.RotationConstraintType");ol.Constraints=function(a,b,c){this.center=a;this.resolution=b;this.rotation=c};goog.provide("goog.debug.EntryPointMonitor");goog.provide("goog.debug.entryPointRegistry");goog.require("goog.asserts");goog.debug.EntryPointMonitor=function(){};goog.debug.EntryPointMonitor.prototype.wrap;goog.debug.EntryPointMonitor.prototype.unwrap;goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=false;goog.debug.entryPointRegistry.register=function(a){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=a;if(goog.debug.entryPointRegistry.monitorsMayExist_){var b=goog.debug.entryPointRegistry.monitors_;for(var c=0;c<b.length;c++){a(goog.bind(b[c].wrap,b[c]))}}};goog.debug.entryPointRegistry.monitorAll=function(a){goog.debug.entryPointRegistry.monitorsMayExist_=true;var b=goog.bind(a.wrap,a);for(var c=0;c<goog.debug.entryPointRegistry.refList_.length;c++){goog.debug.entryPointRegistry.refList_[c](b)}goog.debug.entryPointRegistry.monitors_.push(a)};goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(a){var b=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(a==b[b.length-1],"Only the most recent monitor can be unwrapped.");var c=goog.bind(a.unwrap,a);for(var d=0;d<goog.debug.entryPointRegistry.refList_.length;d++){goog.debug.entryPointRegistry.refList_[d](c)}b.length--};goog.provide("goog.events.BrowserFeature");goog.require("goog.userAgent");goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global["document"]&&document.documentElement&&"ontouchstart"in document.documentElement)||!!(goog.global["navigator"]&&goog.global["navigator"]["msMaxTouchPoints"])};goog.provide("goog.disposable.IDisposable");goog.disposable.IDisposable=function(){};goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod;goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod;goog.provide("goog.Disposable");goog.provide("goog.dispose");goog.provide("goog.disposeAll");goog.require("goog.disposable.IDisposable");goog.Disposable=function(){if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF){if(goog.Disposable.INCLUDE_STACK_ON_CREATION){this.creationStack=(new Error).stack}goog.Disposable.instances_[goog.getUid(this)]=this}this.disposed_=this.disposed_;this.onDisposeCallbacks_=this.onDisposeCallbacks_};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.define("goog.Disposable.MONITORING_MODE",0);goog.define("goog.Disposable.INCLUDE_STACK_ON_CREATION",true);goog.Disposable.instances_={};goog.Disposable.getUndisposedObjects=function(){var a=[];for(var b in goog.Disposable.instances_){if(goog.Disposable.instances_.hasOwnProperty(b)){a.push(goog.Disposable.instances_[Number(b)])}}return a};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=false;goog.Disposable.prototype.onDisposeCallbacks_;goog.Disposable.prototype.creationStack;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;goog.Disposable.prototype.dispose=function(){if(!this.disposed_){this.disposed_=true;this.disposeInternal();if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF){var a=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(a)){throw Error(this+" did not call the goog.Disposable base "+"constructor or was disposed of after a clearUndisposedObjects "+"call")}delete goog.Disposable.instances_[a]}}};goog.Disposable.prototype.registerDisposable=function(a){this.addOnDisposeCallback(goog.partial(goog.dispose,a))};goog.Disposable.prototype.addOnDisposeCallback=function(a,b){if(this.disposed_){a.call(b);return}if(!this.onDisposeCallbacks_){this.onDisposeCallbacks_=[]}this.onDisposeCallbacks_.push(goog.isDef(b)?goog.bind(a,b):a)};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_){while(this.onDisposeCallbacks_.length){this.onDisposeCallbacks_.shift()()}}};goog.Disposable.isDisposed=function(a){if(a&&typeof a.isDisposed=="function"){return a.isDisposed()}return false};goog.dispose=function(a){if(a&&typeof a.dispose=="function"){a.dispose()}};goog.disposeAll=function(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];if(goog.isArrayLike(d)){goog.disposeAll.apply(null,d)}else{goog.dispose(d)}}};goog.provide("goog.events.EventId");goog.events.EventId=function(a){this.id=a};goog.events.EventId.prototype.toString=function(){return this.id};goog.provide("goog.events.Event");goog.provide("goog.events.EventLike");goog.require("goog.Disposable");goog.require("goog.events.EventId");goog.events.EventLike;goog.events.Event=function(a,b){this.type=a instanceof goog.events.EventId?String(a):a;this.target=b;this.currentTarget=this.target;this.propagationStopped_=false;this.defaultPrevented=false;this.returnValue_=true};goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=true};goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=true;this.returnValue_=false};goog.events.Event.stopPropagation=function(a){a.stopPropagation()};goog.events.Event.preventDefault=function(a){a.preventDefault()};goog.provide("goog.events.EventType");goog.require("goog.userAgent");goog.events.getVendorPrefixedName_=function(a){return goog.userAgent.WEBKIT?"webkit"+a:goog.userAgent.OPERA?"o"+a.toLowerCase():a.toLowerCase()};goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",RESET:"reset",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified",BEFOREPRINT:"beforeprint",AFTERPRINT:"afterprint"};goog.provide("goog.reflect");goog.reflect.object=function(a,b){return b};goog.reflect.sinkValue=function(a){goog.reflect.sinkValue[" "](a);return a};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(a,b){try{goog.reflect.sinkValue(a[b]);return true}catch(a){}return false};goog.provide("goog.events.BrowserEvent");goog.provide("goog.events.BrowserEvent.MouseButton");goog.require("goog.events.BrowserFeature");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.reflect");goog.require("goog.userAgent");goog.events.BrowserEvent=function(a,b){goog.events.BrowserEvent.base(this,"constructor",a?a.type:"");this.target=null;this.currentTarget=null;this.relatedTarget=null;this.offsetX=0;this.offsetY=0;this.clientX=0;this.clientY=0;this.screenX=0;this.screenY=0;this.button=0;this.keyCode=0;this.charCode=0;this.ctrlKey=false;this.altKey=false;this.shiftKey=false;this.metaKey=false;this.state=null;this.platformModifierKey=false;this.event_=null;if(a){this.init(a,b)}};goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];goog.events.BrowserEvent.prototype.init=function(a,b){var c=this.type=a.type;var d=a.changedTouches?a.changedTouches[0]:null;this.target=goog.isNull(d)?a.target||a.srcElement:d.target;this.currentTarget=b;var e=a.relatedTarget;if(e){if(goog.userAgent.GECKO){if(!goog.reflect.canAccessProperty(e,"nodeName")){e=null}}}else if(c==goog.events.EventType.MOUSEOVER){e=a.fromElement}else if(c==goog.events.EventType.MOUSEOUT){e=a.toElement}this.relatedTarget=e;if(!goog.isNull(d)){this.clientX=d.clientX!==undefined?d.clientX:d.pageX;this.clientY=d.clientY!==undefined?d.clientY:d.pageY;this.screenX=d.screenX||0;this.screenY=d.screenY||0}else{this.offsetX=goog.userAgent.WEBKIT||a.offsetX!==undefined?a.offsetX:a.layerX;this.offsetY=goog.userAgent.WEBKIT||a.offsetY!==undefined?a.offsetY:a.layerY;this.clientX=a.clientX!==undefined?a.clientX:a.pageX;this.clientY=a.clientY!==undefined?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0}this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.platformModifierKey=goog.userAgent.MAC?a.metaKey:a.ctrlKey;this.state=a.state;this.event_=a;if(a.defaultPrevented){this.preventDefault()}};goog.events.BrowserEvent.prototype.isButton=function(a){if(!goog.events.BrowserFeature.HAS_W3C_BUTTON){if(this.type=="click"){return a==goog.events.BrowserEvent.MouseButton.LEFT}else{return!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[a])}}else{return this.event_.button==a}};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);if(this.event_.stopPropagation){this.event_.stopPropagation()}else{this.event_.cancelBubble=true}};goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var a=this.event_;if(!a.preventDefault){a.returnValue=false;if(goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT){try{var b=112;var c=123;if(a.ctrlKey||a.keyCode>=b&&a.keyCode<=c){a.keyCode=-1}}catch(a){}}}else{a.preventDefault()}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.provide("goog.events.Listenable");goog.provide("goog.events.ListenableKey");goog.require("goog.events.EventId");goog.events.Listenable=function(){};goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(Math.random()*1e6|0);goog.events.Listenable.addImplementation=function(a){a.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=true};goog.events.Listenable.isImplementedBy=function(a){return!!(a&&a[goog.events.Listenable.IMPLEMENTED_BY_PROP])};goog.events.Listenable.prototype.listen;goog.events.Listenable.prototype.listenOnce;goog.events.Listenable.prototype.unlisten;goog.events.Listenable.prototype.unlistenByKey;goog.events.Listenable.prototype.dispatchEvent;goog.events.Listenable.prototype.removeAllListeners;goog.events.Listenable.prototype.getParentEventTarget;goog.events.Listenable.prototype.fireListeners;goog.events.Listenable.prototype.getListeners;goog.events.Listenable.prototype.getListener;goog.events.Listenable.prototype.hasListener;goog.events.ListenableKey=function(){};goog.events.ListenableKey.counter_=0;goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_};goog.events.ListenableKey.prototype.src;goog.events.ListenableKey.prototype.type;goog.events.ListenableKey.prototype.listener;goog.events.ListenableKey.prototype.capture;goog.events.ListenableKey.prototype.handler;goog.events.ListenableKey.prototype.key;goog.provide("goog.events.Listener");goog.require("goog.events.ListenableKey");goog.events.Listener=function(a,b,c,d,e,f){if(goog.events.Listener.ENABLE_MONITORING){this.creationStack=(new Error).stack}this.listener=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.handler=f;this.key=goog.events.ListenableKey.reserveKey();this.callOnce=false;this.removed=false};goog.define("goog.events.Listener.ENABLE_MONITORING",false);goog.events.Listener.prototype.creationStack;goog.events.Listener.prototype.markAsRemoved=function(){this.removed=true;this.listener=null;this.proxy=null;this.src=null;this.handler=null};goog.provide("goog.events.ListenerMap");goog.require("goog.array");goog.require("goog.events.Listener");goog.require("goog.object");goog.events.ListenerMap=function(a){this.src=a;this.listeners={};this.typeCount_=0};goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_};goog.events.ListenerMap.prototype.getListenerCount=function(){var a=0;for(var b in this.listeners){a+=this.listeners[b].length}return a};goog.events.ListenerMap.prototype.add=function(a,b,c,d,e){var f=a.toString();var g=this.listeners[f];if(!g){g=this.listeners[f]=[];this.typeCount_++}var h;var i=goog.events.ListenerMap.findListenerIndex_(g,b,d,e);if(i>-1){h=g[i];if(!c){h.callOnce=false}}else{h=new goog.events.Listener(b,null,this.src,f,!!d,e);h.callOnce=c;g.push(h)}return h};goog.events.ListenerMap.prototype.remove=function(a,b,c,d){var e=a.toString();if(!(e in this.listeners)){return false}var f=this.listeners[e];var g=goog.events.ListenerMap.findListenerIndex_(f,b,c,d);if(g>-1){var h=f[g];h.markAsRemoved();goog.array.removeAt(f,g);if(f.length==0){delete this.listeners[e];this.typeCount_--}return true}return false};goog.events.ListenerMap.prototype.removeByKey=function(a){var b=a.type;if(!(b in this.listeners)){return false}var c=goog.array.remove(this.listeners[b],a);if(c){a.markAsRemoved();if(this.listeners[b].length==0){delete this.listeners[b];this.typeCount_--}}return c};goog.events.ListenerMap.prototype.removeAll=function(a){var b=a&&a.toString();var c=0;for(var d in this.listeners){if(!b||d==b){var e=this.listeners[d];for(var f=0;f<e.length;f++){++c;e[f].markAsRemoved()}delete this.listeners[d];this.typeCount_--}}return c};goog.events.ListenerMap.prototype.getListeners=function(a,b){var c=this.listeners[a.toString()];var d=[];if(c){for(var e=0;e<c.length;++e){var f=c[e];if(f.capture==b){d.push(f)}}}return d};goog.events.ListenerMap.prototype.getListener=function(a,b,c,d){var e=this.listeners[a.toString()];var f=-1;if(e){f=goog.events.ListenerMap.findListenerIndex_(e,b,c,d)}return f>-1?e[f]:null};goog.events.ListenerMap.prototype.hasListener=function(a,b){var c=goog.isDef(a);var d=c?a.toString():"";var e=goog.isDef(b);return goog.object.some(this.listeners,function(a,f){for(var g=0;g<a.length;++g){if((!c||a[g].type==d)&&(!e||a[g].capture==b)){return true}}return false})};goog.events.ListenerMap.findListenerIndex_=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.listener==b&&f.capture==!!c&&f.handler==d){return e}}return-1};goog.provide("goog.events");goog.provide("goog.events.CaptureSimulationMode");goog.provide("goog.events.Key");goog.provide("goog.events.ListenableType");goog.require("goog.asserts");goog.require("goog.debug.entryPointRegistry");goog.require("goog.events.BrowserEvent");goog.require("goog.events.BrowserFeature");goog.require("goog.events.Listenable");goog.require("goog.events.ListenerMap");goog.forwardDeclare("goog.debug.ErrorHandler");goog.forwardDeclare("goog.events.EventWrapper");goog.events.Key;goog.events.ListenableType;goog.events.LISTENER_MAP_PROP_="closure_lm_"+(Math.random()*1e6|0);goog.events.onString_="on";goog.events.onStringMap_={};goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2};goog.define("goog.events.CAPTURE_SIMULATION_MODE",2);goog.events.listenerCountEstimate_=0;goog.events.listen=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++){goog.events.listen(a,b[f],c,d,e)}return null}c=goog.events.wrapListener(c);if(goog.events.Listenable.isImplementedBy(a)){return a.listen(b,c,d,e)}else{return goog.events.listen_(a,b,c,false,d,e)}};goog.events.listen_=function(a,b,c,d,e,f){if(!b){throw Error("Invalid event type")}var g=!!e;if(g&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL){goog.asserts.fail("Can not register capture listener in IE8-.");return null}else if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT){return null}}var h=goog.events.getListenerMap_(a);if(!h){a[goog.events.LISTENER_MAP_PROP_]=h=new goog.events.ListenerMap(a)}var i=h.add(b,c,d,e,f);if(i.proxy){return i}var j=goog.events.getProxy();i.proxy=j;j.src=a;j.listener=i;if(a.addEventListener){a.addEventListener(b.toString(),j,g)}else if(a.attachEvent){a.attachEvent(goog.events.getOnString_(b.toString()),j)}else{throw Error("addEventListener and attachEvent are unavailable.")}goog.events.listenerCountEstimate_++;return i};goog.events.getProxy=function(){var a=goog.events.handleBrowserEvent_;var b=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(c){return a.call(b.src,b.listener,c)}:function(c){var d=a.call(b.src,b.listener,c);if(!d)return d};return b};goog.events.listenOnce=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++){goog.events.listenOnce(a,b[f],c,d,e)}return null}c=goog.events.wrapListener(c);if(goog.events.Listenable.isImplementedBy(a)){return a.listenOnce(b,c,d,e)}else{return goog.events.listen_(a,b,c,true,d,e)}};goog.events.listenWithWrapper=function(a,b,c,d,e){b.listen(a,c,d,e)};goog.events.unlisten=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++){goog.events.unlisten(a,b[f],c,d,e)}return null}c=goog.events.wrapListener(c);if(goog.events.Listenable.isImplementedBy(a)){return a.unlisten(b,c,d,e)}if(!a){return false}var g=!!d;var h=goog.events.getListenerMap_(a);if(h){var i=h.getListener(b,c,g,e);if(i){return goog.events.unlistenByKey(i)}}return false};goog.events.unlistenByKey=function(a){if(goog.isNumber(a)){return false}var b=a;if(!b||b.removed){return false}var c=b.src;if(goog.events.Listenable.isImplementedBy(c)){return c.unlistenByKey(b)}var d=b.type;var e=b.proxy;if(c.removeEventListener){c.removeEventListener(d,e,b.capture)}else if(c.detachEvent){c.detachEvent(goog.events.getOnString_(d),e)}goog.events.listenerCountEstimate_--;var f=goog.events.getListenerMap_(c);if(f){f.removeByKey(b);if(f.getTypeCount()==0){f.src=null;c[goog.events.LISTENER_MAP_PROP_]=null}}else{b.markAsRemoved()}return true};goog.events.unlistenWithWrapper=function(a,b,c,d,e){b.unlisten(a,c,d,e)};goog.events.removeAll=function(a,b){if(!a){return 0}if(goog.events.Listenable.isImplementedBy(a)){return a.removeAllListeners(b)}var c=goog.events.getListenerMap_(a);if(!c){return 0}var d=0;var e=b&&b.toString();for(var f in c.listeners){if(!e||f==e){var g=c.listeners[f].concat();for(var h=0;h<g.length;++h){if(goog.events.unlistenByKey(g[h])){++d}}}}return d};goog.events.getListeners=function(a,b,c){if(goog.events.Listenable.isImplementedBy(a)){return a.getListeners(b,c)}else{if(!a){return[]}var d=goog.events.getListenerMap_(a);return d?d.getListeners(b,c):[]}};goog.events.getListener=function(a,b,c,d,e){b=b;c=goog.events.wrapListener(c);var f=!!d;if(goog.events.Listenable.isImplementedBy(a)){return a.getListener(b,c,f,e)}if(!a){return null}var g=goog.events.getListenerMap_(a);if(g){return g.getListener(b,c,f,e)}return null};goog.events.hasListener=function(a,b,c){if(goog.events.Listenable.isImplementedBy(a)){return a.hasListener(b,c)}var d=goog.events.getListenerMap_(a);return!!d&&d.hasListener(b,c)};goog.events.expose=function(a){var b=[];for(var c in a){if(a[c]&&a[c].id){b.push(c+" = "+a[c]+" ("+a[c].id+")")}else{b.push(c+" = "+a[c])}}return b.join("\n")};goog.events.getOnString_=function(a){if(a in goog.events.onStringMap_){return goog.events.onStringMap_[a]}return goog.events.onStringMap_[a]=goog.events.onString_+a};goog.events.fireListeners=function(a,b,c,d){if(goog.events.Listenable.isImplementedBy(a)){return a.fireListeners(b,c,d)}return goog.events.fireListeners_(a,b,c,d)};goog.events.fireListeners_=function(a,b,c,d){var e=true;var f=goog.events.getListenerMap_(a);if(f){var g=f.listeners[b.toString()];if(g){g=g.concat();for(var h=0;h<g.length;h++){var i=g[h];if(i&&i.capture==c&&!i.removed){var j=goog.events.fireListener(i,d);e=e&&j!==false}}}}return e};goog.events.fireListener=function(a,b){var c=a.listener;var d=a.handler||a.src;if(a.callOnce){goog.events.unlistenByKey(a)}return c.call(d,b)};goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_};goog.events.dispatchEvent=function(a,b){goog.asserts.assert(goog.events.Listenable.isImplementedBy(a),"Can not use goog.events.dispatchEvent with "+"non-goog.events.Listenable instance.");return a.dispatchEvent(b)};goog.events.protectBrowserEventEntryPoint=function(a){goog.events.handleBrowserEvent_=a.protectEntryPoint(goog.events.handleBrowserEvent_)};goog.events.handleBrowserEvent_=function(a,b){if(a.removed){return true}if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var c=b||goog.getObjectByName("window.event");var d=new goog.events.BrowserEvent(c,this);var e=true;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(c)){goog.events.markIeEvent_(c);var f=[];for(var g=d.currentTarget;g;g=g.parentNode){f.push(g)}var h=a.type;for(var i=f.length-1;!d.propagationStopped_&&i>=0;i--){d.currentTarget=f[i];var j=goog.events.fireListeners_(f[i],h,true,d);e=e&&j}for(var i=0;!d.propagationStopped_&&i<f.length;i++){d.currentTarget=f[i];var j=goog.events.fireListeners_(f[i],h,false,d);e=e&&j}}}else{e=goog.events.fireListener(a,d)}return e}return goog.events.fireListener(a,new goog.events.BrowserEvent(b,this))};goog.events.markIeEvent_=function(a){var b=false;if(a.keyCode==0){try{a.keyCode=-1;return}catch(a){b=true}}if(b||a.returnValue==undefined){a.returnValue=true}};goog.events.isMarkedIeEvent_=function(a){return a.keyCode<0||a.returnValue!=undefined};goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(a){return a+"_"+goog.events.uniqueIdCounter_++};goog.events.getListenerMap_=function(a){var b=a[goog.events.LISTENER_MAP_PROP_];return b instanceof goog.events.ListenerMap?b:null};goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(Math.random()*1e9>>>0);goog.events.wrapListener=function(a){goog.asserts.assert(a,"Listener can not be null.");if(goog.isFunction(a)){return a}goog.asserts.assert(a.handleEvent,"An object listener must have handleEvent method.");if(!a[goog.events.LISTENER_WRAPPER_PROP_]){a[goog.events.LISTENER_WRAPPER_PROP_]=function(b){return a.handleEvent(b)}}return a[goog.events.LISTENER_WRAPPER_PROP_]};goog.debug.entryPointRegistry.register(function(a){goog.events.handleBrowserEvent_=a(goog.events.handleBrowserEvent_)});goog.provide("goog.events.EventTarget");goog.require("goog.Disposable");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.Listenable");goog.require("goog.events.ListenerMap");goog.require("goog.object");goog.events.EventTarget=function(){goog.Disposable.call(this);this.eventTargetListeners_=new goog.events.ListenerMap(this);this.actualEventTarget_=this;this.parentEventTarget_=null};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.MAX_ANCESTORS_=1e3;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};goog.events.EventTarget.prototype.setParentEventTarget=function(a){this.parentEventTarget_=a}
;goog.events.EventTarget.prototype.addEventListener=function(a,b,c,d){goog.events.listen(this,a,b,c,d)};goog.events.EventTarget.prototype.removeEventListener=function(a,b,c,d){goog.events.unlisten(this,a,b,c,d)};goog.events.EventTarget.prototype.dispatchEvent=function(a){this.assertInitialized_();var b,c=this.getParentEventTarget();if(c){b=[];var d=1;for(;c;c=c.getParentEventTarget()){b.push(c);goog.asserts.assert(++d<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop")}}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,a,b)};goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);this.removeAllListeners();this.parentEventTarget_=null};goog.events.EventTarget.prototype.listen=function(a,b,c,d){this.assertInitialized_();return this.eventTargetListeners_.add(String(a),b,false,c,d)};goog.events.EventTarget.prototype.listenOnce=function(a,b,c,d){return this.eventTargetListeners_.add(String(a),b,true,c,d)};goog.events.EventTarget.prototype.unlisten=function(a,b,c,d){return this.eventTargetListeners_.remove(String(a),b,c,d)};goog.events.EventTarget.prototype.unlistenByKey=function(a){return this.eventTargetListeners_.removeByKey(a)};goog.events.EventTarget.prototype.removeAllListeners=function(a){if(!this.eventTargetListeners_){return 0}return this.eventTargetListeners_.removeAll(a)};goog.events.EventTarget.prototype.fireListeners=function(a,b,c){var d=this.eventTargetListeners_.listeners[String(a)];if(!d){return true}d=d.concat();var e=true;for(var f=0;f<d.length;++f){var g=d[f];if(g&&!g.removed&&g.capture==b){var h=g.listener;var i=g.handler||g.src;if(g.callOnce){this.unlistenByKey(g)}e=h.call(i,c)!==false&&e}}return e&&c.returnValue_!=false};goog.events.EventTarget.prototype.getListeners=function(a,b){return this.eventTargetListeners_.getListeners(String(a),b)};goog.events.EventTarget.prototype.getListener=function(a,b,c,d){return this.eventTargetListeners_.getListener(String(a),b,c,d)};goog.events.EventTarget.prototype.hasListener=function(a,b){var c=goog.isDef(a)?String(a):undefined;return this.eventTargetListeners_.hasListener(c,b)};goog.events.EventTarget.prototype.setTargetForTesting=function(a){this.actualEventTarget_=a};goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass "+"(goog.events.EventTarget) constructor?")};goog.events.EventTarget.dispatchEventInternal_=function(a,b,c){var d=b.type||b;if(goog.isString(b)){b=new goog.events.Event(b,a)}else if(!(b instanceof goog.events.Event)){var e=b;b=new goog.events.Event(d,a);goog.object.extend(b,e)}else{b.target=b.target||a}var f=true,g;if(c){for(var h=c.length-1;!b.propagationStopped_&&h>=0;h--){g=b.currentTarget=c[h];f=g.fireListeners(d,true,b)&&f}}if(!b.propagationStopped_){g=b.currentTarget=a;f=g.fireListeners(d,true,b)&&f;if(!b.propagationStopped_){f=g.fireListeners(d,false,b)&&f}}if(c){for(h=0;!b.propagationStopped_&&h<c.length;h++){g=b.currentTarget=c[h];f=g.fireListeners(d,false,b)&&f}}return f};goog.provide("ol.Observable");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");ol.Observable=function(){goog.base(this);this.revision_=0};goog.inherits(ol.Observable,goog.events.EventTarget);ol.Observable.unByKey=function(a){goog.events.unlistenByKey(a)};ol.Observable.prototype.changed=function(){++this.revision_;this.dispatchEvent(goog.events.EventType.CHANGE)};ol.Observable.prototype.getRevision=function(){return this.revision_};ol.Observable.prototype.on=function(a,b,c){return goog.events.listen(this,a,b,false,c)};ol.Observable.prototype.once=function(a,b,c){return goog.events.listenOnce(this,a,b,false,c)};ol.Observable.prototype.un=function(a,b,c){goog.events.unlisten(this,a,b,false,c)};ol.Observable.prototype.unByKey=ol.Observable.unByKey;goog.provide("ol.Object");goog.provide("ol.ObjectEvent");goog.provide("ol.ObjectEventType");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.object");goog.require("ol.Observable");ol.ObjectEventType={PROPERTYCHANGE:"propertychange"};ol.ObjectEvent=function(a,b,c){goog.base(this,a);this.key=b;this.oldValue=c};goog.inherits(ol.ObjectEvent,goog.events.Event);ol.Object=function(a){goog.base(this);goog.getUid(this);this.values_={};if(goog.isDef(a)){this.setProperties(a)}};goog.inherits(ol.Object,ol.Observable);ol.Object.changeEventTypeCache_={};ol.Object.getChangeEventType=function(a){return ol.Object.changeEventTypeCache_.hasOwnProperty(a)?ol.Object.changeEventTypeCache_[a]:ol.Object.changeEventTypeCache_[a]="change:"+a};ol.Object.prototype.get=function(a){var b;if(this.values_.hasOwnProperty(a)){b=this.values_[a]}return b};ol.Object.prototype.getKeys=function(){return goog.object.getKeys(this.values_)};ol.Object.prototype.getProperties=function(){var a={};var b;for(b in this.values_){a[b]=this.values_[b]}return a};ol.Object.prototype.notify=function(a,b){var c;c=ol.Object.getChangeEventType(a);this.dispatchEvent(new ol.ObjectEvent(c,a,b));c=ol.ObjectEventType.PROPERTYCHANGE;this.dispatchEvent(new ol.ObjectEvent(c,a,b))};ol.Object.prototype.set=function(a,b){var c=this.values_[a];this.values_[a]=b;this.notify(a,c)};ol.Object.prototype.setProperties=function(a){var b;for(b in a){this.set(b,a[b])}};ol.Object.prototype.unset=function(a){if(a in this.values_){var b=this.values_[a];delete this.values_[a];this.notify(a,b)}};goog.provide("ol.Size");goog.provide("ol.size");goog.require("goog.asserts");ol.Size;ol.size.buffer=function(a,b,c){if(!goog.isDef(c)){c=[0,0]}c[0]=a[0]+2*b;c[1]=a[1]+2*b;return c};ol.size.equals=function(a,b){return a[0]==b[0]&&a[1]==b[1]};ol.size.hasArea=function(a){return a[0]>0&&a[1]>0};ol.size.scale=function(a,b,c){if(!goog.isDef(c)){c=[0,0]}c[0]=a[0]*b+.5|0;c[1]=a[1]*b+.5|0;return c};ol.size.toSize=function(a,b){if(goog.isArray(a)){return a}else{goog.asserts.assert(goog.isNumber(a));if(!goog.isDef(b)){b=[a,a]}else{b[0]=a;b[1]=a}return b}};goog.provide("ol.Coordinate");goog.provide("ol.CoordinateFormatType");goog.provide("ol.coordinate");goog.require("goog.math");goog.require("goog.string");ol.CoordinateFormatType;ol.Coordinate;ol.coordinate.add=function(a,b){a[0]+=b[0];a[1]+=b[1];return a};ol.coordinate.closestOnSegment=function(a,b){var c=a[0];var d=a[1];var e=b[0];var f=b[1];var g=e[0];var h=e[1];var i=f[0];var j=f[1];var k=i-g;var l=j-h;var m=k===0&&l===0?0:(k*(c-g)+l*(d-h))/(k*k+l*l||0);var n,o;if(m<=0){n=g;o=h}else if(m>=1){n=i;o=j}else{n=g+m*k;o=h+m*l}return[n,o]};ol.coordinate.createStringXY=function(a){return function(b){return ol.coordinate.toStringXY(b,a)}};ol.coordinate.degreesToStringHDMS_=function(a,b){var c=goog.math.modulo(a+180,360)-180;var d=Math.abs(Math.round(3600*c));return Math.floor(d/3600)+"° "+goog.string.padNumber(Math.floor(d/60%60),2)+"′ "+goog.string.padNumber(Math.floor(d%60),2)+"″ "+b.charAt(c<0?1:0)};ol.coordinate.format=function(a,b,c){if(goog.isDef(a)){return b.replace("{x}",a[0].toFixed(c)).replace("{y}",a[1].toFixed(c))}else{return""}};ol.coordinate.equals=function(a,b){var c=true;for(var d=a.length-1;d>=0;--d){if(a[d]!=b[d]){c=false;break}}return c};ol.coordinate.rotate=function(a,b){var c=Math.cos(b);var d=Math.sin(b);var e=a[0]*c-a[1]*d;var f=a[1]*c+a[0]*d;a[0]=e;a[1]=f;return a};ol.coordinate.scale=function(a,b){a[0]*=b;a[1]*=b;return a};ol.coordinate.sub=function(a,b){a[0]-=b[0];a[1]-=b[1];return a};ol.coordinate.squaredDistance=function(a,b){var c=a[0]-b[0];var d=a[1]-b[1];return c*c+d*d};ol.coordinate.squaredDistanceToSegment=function(a,b){return ol.coordinate.squaredDistance(a,ol.coordinate.closestOnSegment(a,b))};ol.coordinate.toStringHDMS=function(a){if(goog.isDef(a)){return ol.coordinate.degreesToStringHDMS_(a[1],"NS")+" "+ol.coordinate.degreesToStringHDMS_(a[0],"EW")}else{return""}};ol.coordinate.toStringXY=function(a,b){return ol.coordinate.format(a,"{x}, {y}",b)};ol.coordinate.fromProjectedArray=function(a,b){var c=b.charAt(0);if(c==="n"||c==="s"){return[a[1],a[0]]}else{return a}};goog.provide("goog.vec.Float32Array");goog.vec.Float32Array=function(a){this.length=a.length||a;for(var b=0;b<this.length;b++){this[b]=a[b]||0}};goog.vec.Float32Array.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++){this[b+c]=a[c]}};goog.vec.Float32Array.prototype.toString=Array.prototype.join;if(typeof Float32Array=="undefined"){goog.exportProperty(goog.vec.Float32Array,"BYTES_PER_ELEMENT",goog.vec.Float32Array.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float32Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float32Array.prototype,"set",goog.vec.Float32Array.prototype.set);goog.exportProperty(goog.vec.Float32Array.prototype,"toString",goog.vec.Float32Array.prototype.toString);goog.exportSymbol("Float32Array",goog.vec.Float32Array)}goog.provide("goog.vec.Float64Array");goog.vec.Float64Array=function(a){this.length=a.length||a;for(var b=0;b<this.length;b++){this[b]=a[b]||0}};goog.vec.Float64Array.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++){this[b+c]=a[c]}};goog.vec.Float64Array.prototype.toString=Array.prototype.join;if(typeof Float64Array=="undefined"){try{goog.exportProperty(goog.vec.Float64Array,"BYTES_PER_ELEMENT",goog.vec.Float64Array.BYTES_PER_ELEMENT)}catch(a){}goog.exportProperty(goog.vec.Float64Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float64Array.prototype,"set",goog.vec.Float64Array.prototype.set);goog.exportProperty(goog.vec.Float64Array.prototype,"toString",goog.vec.Float64Array.prototype.toString);goog.exportSymbol("Float64Array",goog.vec.Float64Array)}goog.provide("goog.vec");goog.provide("goog.vec.AnyType");goog.provide("goog.vec.ArrayType");goog.provide("goog.vec.Float32");goog.provide("goog.vec.Float64");goog.provide("goog.vec.Number");goog.require("goog.vec.Float32Array");goog.require("goog.vec.Float64Array");goog.vec.Float32;goog.vec.Float64;goog.vec.Number;goog.vec.AnyType;goog.vec.ArrayType;goog.vec.EPSILON=1e-6;goog.provide("goog.vec.Vec3");goog.require("goog.vec");goog.vec.Vec3.Float32;goog.vec.Vec3.Float64;goog.vec.Vec3.Number;goog.vec.Vec3.AnyType;goog.vec.Vec3.Type;goog.vec.Vec3.Vec3Like;goog.vec.Vec3.createFloat32=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat64=function(){return new Float64Array(3)};goog.vec.Vec3.createNumber=function(){var a=new Array(3);goog.vec.Vec3.setFromValues(a,0,0,0);return a};goog.vec.Vec3.create=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat32FromArray=function(a){var b=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromArray(b,a);return b};goog.vec.Vec3.createFloat32FromValues=function(a,b,c){var d=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromValues(d,a,b,c);return d};goog.vec.Vec3.cloneFloat32=goog.vec.Vec3.createFloat32FromArray;goog.vec.Vec3.createFloat64FromArray=function(a){var b=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromArray(b,a);return b};goog.vec.Vec3.createFloat64FromValues=function(a,b,c){var d=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromValues(d,a,b,c);return d};goog.vec.Vec3.cloneFloat64=goog.vec.Vec3.createFloat64FromArray;goog.vec.Vec3.createFromArray=function(a){var b=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(b,a);return b};goog.vec.Vec3.createFromValues=function(a,b,c){var d=goog.vec.Vec3.create();goog.vec.Vec3.setFromValues(d,a,b,c);return d};goog.vec.Vec3.clone=function(a){var b=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(b,a);return b};goog.vec.Vec3.setFromValues=function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a};goog.vec.Vec3.setFromArray=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a};goog.vec.Vec3.add=function(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};goog.vec.Vec3.subtract=function(a,b,c){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};goog.vec.Vec3.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};goog.vec.Vec3.abs=function(a,b){b[0]=Math.abs(a[0]);b[1]=Math.abs(a[1]);b[2]=Math.abs(a[2]);return b};goog.vec.Vec3.scale=function(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};goog.vec.Vec3.magnitudeSquared=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d};goog.vec.Vec3.magnitude=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)};goog.vec.Vec3.normalize=function(a,b){var c=1/goog.vec.Vec3.magnitude(a);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;return b};goog.vec.Vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};goog.vec.Vec3.cross=function(a,b,c){var d=a[0],e=a[1],f=a[2];var g=b[0],h=b[1],i=b[2];c[0]=e*i-f*h;c[1]=f*g-d*i;c[2]=d*h-e*g;return c};goog.vec.Vec3.distanceSquared=function(a,b){var c=a[0]-b[0];var d=a[1]-b[1];var e=a[2]-b[2];return c*c+d*d+e*e};goog.vec.Vec3.distance=function(a,b){return Math.sqrt(goog.vec.Vec3.distanceSquared(a,b))};goog.vec.Vec3.direction=function(a,b,c){var d=b[0]-a[0];var e=b[1]-a[1];var f=b[2]-a[2];var g=Math.sqrt(d*d+e*e+f*f);if(g){g=1/g;c[0]=d*g;c[1]=e*g;c[2]=f*g}else{c[0]=c[1]=c[2]=0}return c};goog.vec.Vec3.lerp=function(a,b,c,d){var e=a[0],f=a[1],g=a[2];d[0]=(b[0]-e)*c+e;d[1]=(b[1]-f)*c+f;d[2]=(b[2]-g)*c+g;return d};goog.vec.Vec3.max=function(a,b,c){if(goog.isNumber(b)){c[0]=Math.max(a[0],b);c[1]=Math.max(a[1],b);c[2]=Math.max(a[2],b)}else{c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2])}return c};goog.vec.Vec3.min=function(a,b,c){if(goog.isNumber(b)){c[0]=Math.min(a[0],b);c[1]=Math.min(a[1],b);c[2]=Math.min(a[2],b)}else{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2])}return c};goog.vec.Vec3.equals=function(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]};goog.provide("goog.vec.Vec4");goog.require("goog.vec");goog.vec.Vec4.Float32;goog.vec.Vec4.Float64;goog.vec.Vec4.Number;goog.vec.Vec4.AnyType;goog.vec.Vec4.Type;goog.vec.Vec4.Vec4Like;goog.vec.Vec4.createFloat32=function(){return new Float32Array(4)};goog.vec.Vec4.createFloat64=function(){return new Float64Array(4)};goog.vec.Vec4.createNumber=function(){var a=new Array(4);goog.vec.Vec4.setFromValues(a,0,0,0,0);return a};goog.vec.Vec4.create=function(){return new Float32Array(4)};goog.vec.Vec4.createFromArray=function(a){var b=goog.vec.Vec4.create();goog.vec.Vec4.setFromArray(b,a);return b};goog.vec.Vec4.createFloat32FromArray=function(a){var b=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromArray(b,a);return b};goog.vec.Vec4.createFloat32FromValues=function(a,b,c,d){var e=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromValues(e,a,b,c,d);return e};goog.vec.Vec4.cloneFloat32=goog.vec.Vec4.createFloat32FromArray;goog.vec.Vec4.createFloat64FromArray=function(a){var b=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromArray(b,a);return b};goog.vec.Vec4.createFloat64FromValues=function(a,b,c,d){var e=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromValues(e,a,b,c,d);return e};goog.vec.Vec4.cloneFloat64=goog.vec.Vec4.createFloat64FromArray;goog.vec.Vec4.createFromValues=function(a,b,c,d){var e=goog.vec.Vec4.create();goog.vec.Vec4.setFromValues(e,a,b,c,d);return e};goog.vec.Vec4.clone=goog.vec.Vec4.createFromArray;goog.vec.Vec4.setFromValues=function(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e;return a};goog.vec.Vec4.setFromArray=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};goog.vec.Vec4.add=function(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};goog.vec.Vec4.subtract=function(a,b,c){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};goog.vec.Vec4.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};goog.vec.Vec4.abs=function(a,b){b[0]=Math.abs(a[0]);b[1]=Math.abs(a[1]);b[2]=Math.abs(a[2]);b[3]=Math.abs(a[3]);return b};goog.vec.Vec4.scale=function(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};goog.vec.Vec4.magnitudeSquared=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e};goog.vec.Vec4.magnitude=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)};goog.vec.Vec4.normalize=function(a,b){var c=1/goog.vec.Vec4.magnitude(a);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;return b};goog.vec.Vec4.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};goog.vec.Vec4.lerp=function(a,b,c,d){var e=a[0],f=a[1],g=a[2],h=a[3];d[0]=(b[0]-e)*c+e;d[1]=(b[1]-f)*c+f;d[2]=(b[2]-g)*c+g;d[3]=(b[3]-h)*c+h;return d};goog.vec.Vec4.max=function(a,b,c){if(goog.isNumber(b)){c[0]=Math.max(a[0],b);c[1]=Math.max(a[1],b);c[2]=Math.max(a[2],b);c[3]=Math.max(a[3],b)}else{c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);c[3]=Math.max(a[3],b[3])}return c};goog.vec.Vec4.min=function(a,b,c){if(goog.isNumber(b)){c[0]=Math.min(a[0],b);c[1]=Math.min(a[1],b);c[2]=Math.min(a[2],b);c[3]=Math.min(a[3],b)}else{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);c[3]=Math.min(a[3],b[3])}return c};goog.vec.Vec4.equals=function(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]};goog.provide("goog.vec.Mat4");goog.require("goog.vec");goog.require("goog.vec.Vec3");goog.require("goog.vec.Vec4");goog.vec.Mat4.Float32;goog.vec.Mat4.Float64;goog.vec.Mat4.Number;goog.vec.Mat4.AnyType;goog.vec.Mat4.Type;goog.vec.Mat4.Mat4Like;goog.vec.Mat4.createFloat32=function(){return new Float32Array(16)};goog.vec.Mat4.createFloat64=function(){return new Float64Array(16)};goog.vec.Mat4.createNumber=function(){var a=new Array(16);goog.vec.Mat4.setFromValues(a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return a};goog.vec.Mat4.create=function(){return goog.vec.Mat4.createFloat32()};goog.vec.Mat4.createFloat32Identity=function(){var a=goog.vec.Mat4.createFloat32();a[0]=a[5]=a[10]=a[15]=1;return a};goog.vec.Mat4.createFloat64Identity=function(){var a=goog.vec.Mat4.createFloat64();a[0]=a[5]=a[10]=a[15]=1;return a};goog.vec.Mat4.createNumberIdentity=function(){var a=new Array(16);goog.vec.Mat4.setFromValues(a,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return a};goog.vec.Mat4.createIdentity=function(){return goog.vec.Mat4.createFloat32Identity()};goog.vec.Mat4.createFloat32FromArray=function(a){var b=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(b,a);return b};goog.vec.Mat4.createFloat32FromValues=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromValues(q,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p);return q};goog.vec.Mat4.cloneFloat32=goog.vec.Mat4.createFloat32FromArray;goog.vec.Mat4.createFloat64FromArray=function(a){var b=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromArray(b,a);return b};goog.vec.Mat4.createFloat64FromValues=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromValues(q,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p);return q};goog.vec.Mat4.cloneFloat64=goog.vec.Mat4.createFloat64FromArray;goog.vec.Mat4.createFromArray=function(a){var b=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(b,a);return b};goog.vec.Mat4.createFromValues=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return goog.vec.Mat4.createFloat32FromValues(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p)};goog.vec.Mat4.clone=goog.vec.Mat4.createFromArray;goog.vec.Mat4.getElement=function(a,b,c){return a[b+c*4]};goog.vec.Mat4.setElement=function(a,b,c,d){a[b+c*4]=d;return a};goog.vec.Mat4.setFromValues=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=i;a[8]=j;a[9]=k;a[10]=l;a[11]=m;a[12]=n;a[13]=o;a[14]=p;a[15]=q;return a};goog.vec.Mat4.setFromArray=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};goog.vec.Mat4.setFromRowMajorArray=function(a,b){a[0]=b[0];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=b[1];a[5]=b[5];a[6]=b[9];a[7]=b[13];a[8]=b[2];a[9]=b[6];a[10]=b[10];a[11]=b[14];a[12]=b[3];a[13]=b[7];a[14]=b[11];a[15]=b[15];return a};goog.vec.Mat4.setDiagonalValues=function(a,b,c,d,e){a[0]=b;a[5]=c;a[10]=d;a[15]=e;return a};goog.vec.Mat4.setDiagonal=function(a,b){a[0]=b[0];a[5]=b[1];a[10]=b[2];a[15]=b[3];return a};goog.vec.Mat4.getDiagonal=function(a,b,c){if(!c){b[0]=a[0];b[1]=a[5];b[2]=a[10];b[3]=a[15]}else{var d=c>0?4*c:-c;for(var e=0;e<4-Math.abs(c);e++){b[e]=a[d+5*e]}}return b};goog.vec.Mat4.setColumnValues=function(a,b,c,d,e,f){var g=b*4;a[g]=c;a[g+1]=d;a[g+2]=e;a[g+3]=f;return a};goog.vec.Mat4.setColumn=function(a,b,c){var d=b*4;a[d]=c[0];a[d+1]=c[1];a[d+2]=c[2];a[d+3]=c[3];return a};goog.vec.Mat4.getColumn=function(a,b,c){var d=b*4;c[0]=a[d];c[1]=a[d+1];c[2]=a[d+2];c[3]=a[d+3];return c};goog.vec.Mat4.setColumns=function(a,b,c,d,e){goog.vec.Mat4.setColumn(a,0,b);goog.vec.Mat4.setColumn(a,1,c);goog.vec.Mat4.setColumn(a,2,d);goog.vec.Mat4.setColumn(a,3,e);return a};goog.vec.Mat4.getColumns=function(a,b,c,d,e){goog.vec.Mat4.getColumn(a,0,b);goog.vec.Mat4.getColumn(a,1,c);goog.vec.Mat4.getColumn(a,2,d);goog.vec.Mat4.getColumn(a,3,e)};goog.vec.Mat4.setRowValues=function(a,b,c,d,e,f){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=f;return a};goog.vec.Mat4.setRow=function(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3];return a};goog.vec.Mat4.getRow=function(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12];return c};goog.vec.Mat4.setRows=function(a,b,c,d,e){goog.vec.Mat4.setRow(a,0,b);goog.vec.Mat4.setRow(a,1,c);goog.vec.Mat4.setRow(a,2,d);goog.vec.Mat4.setRow(a,3,e);return a};goog.vec.Mat4.getRows=function(a,b,c,d,e){goog.vec.Mat4.getRow(a,0,b);goog.vec.Mat4.getRow(a,1,c);goog.vec.Mat4.getRow(a,2,d);goog.vec.Mat4.getRow(a,3,e)};goog.vec.Mat4.makeZero=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=0;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=0;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=0;return a};goog.vec.Mat4.makeIdentity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};goog.vec.Mat4.addMat=function(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];c[9]=a[9]+b[9];c[10]=a[10]+b[10];c[11]=a[11]+b[11];c[12]=a[12]+b[12];c[13]=a[13]+b[13];c[14]=a[14]+b[14];c[15]=a[15]+b[15];return c};goog.vec.Mat4.subMat=function(a,b,c){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];c[9]=a[9]-b[9];c[10]=a[10]-b[10];c[11]=a[11]-b[11];c[12]=a[12]-b[12];c[13]=a[13]-b[13];c[14]=a[14]-b[14];c[15]=a[15]-b[15];return c};goog.vec.Mat4.multScalar=function(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;c[4]=a[4]*b;c[5]=a[5]*b;c[6]=a[6]*b;c[7]=a[7]*b;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12]*b;c[13]=a[13]*b;c[14]=a[14]*b;c[15]=a[15]*b;return c};goog.vec.Mat4.multMat=function(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3];var h=a[4],i=a[5],j=a[6],k=a[7];var l=a[8],m=a[9],n=a[10],o=a[11];var p=a[12],q=a[13],r=a[14],s=a[15];var t=b[0],u=b[1],v=b[2],w=b[3];var x=b[4],y=b[5],z=b[6],A=b[7];var B=b[8],C=b[9],D=b[10],E=b[11];var F=b[12],G=b[13],H=b[14],I=b[15];c[0]=d*t+h*u+l*v+p*w;c[1]=e*t+i*u+m*v+q*w;c[2]=f*t+j*u+n*v+r*w;c[3]=g*t+k*u+o*v+s*w;c[4]=d*x+h*y+l*z+p*A;c[5]=e*x+i*y+m*z+q*A;c[6]=f*x+j*y+n*z+r*A;c[7]=g*x+k*y+o*z+s*A;c[8]=d*B+h*C+l*D+p*E;c[9]=e*B+i*C+m*D+q*E;c[10]=f*B+j*C+n*D+r*E;c[11]=g*B+k*C+o*D+s*E;c[12]=d*F+h*G+l*H+p*I;c[13]=e*F+i*G+m*H+q*I;c[14]=f*F+j*G+n*H+r*I;c[15]=g*F+k*G+o*H+s*I;return c};goog.vec.Mat4.transpose=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3];var f=a[6],g=a[7];var h=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=f;b[11]=a[14];b[12]=e;b[13]=g;b[14]=h}else{b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15]}return b};goog.vec.Mat4.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];var f=a[4],g=a[5],h=a[6],i=a[7];var j=a[8],k=a[9],l=a[10],m=a[11];var n=a[12],o=a[13],p=a[14],q=a[15];var r=b*g-c*f;var s=b*h-d*f;var t=b*i-e*f;var u=c*h-d*g;var v=c*i-e*g;var w=d*i-e*h;var x=j*o-k*n;var y=j*p-l*n;var z=j*q-m*n;var A=k*p-l*o;var B=k*q-m*o;var C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x};goog.vec.Mat4.invert=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];var g=a[4],h=a[5],i=a[6],j=a[7];var k=a[8],l=a[9],m=a[10],n=a[11];var o=a[12],p=a[13],q=a[14],r=a[15];var s=c*h-d*g;var t=c*i-e*g;var u=c*j-f*g;var v=d*i-e*h;var w=d*j-f*h;var x=e*j-f*i;var y=k*p-l*o;var z=k*q-m*o;var A=k*r-n*o;var B=l*q-m*p;var C=l*r-n*p;var D=m*r-n*q;var E=s*D-t*C+u*B+v*A-w*z+x*y;if(E==0){return false}var F=1/E;b[0]=(h*D-i*C+j*B)*F;b[1]=(-d*D+e*C-f*B)*F;b[2]=(p*x-q*w+r*v)*F;b[3]=(-l*x+m*w-n*v)*F;b[4]=(-g*D+i*A-j*z)*F;b[5]=(c*D-e*A+f*z)*F;b[6]=(-o*x+q*u-r*t)*F;b[7]=(k*x-m*u+n*t)*F;b[8]=(g*C-h*A+j*y)*F;b[9]=(-c*C+d*A-f*y)*F;b[10]=(o*w-p*u+r*s)*F;b[11]=(-k*w+l*u-n*s)*F;b[12]=(-g*B+h*z-i*y)*F;b[13]=(c*B-d*z+e*y)*F;b[14]=(-o*v+p*t-q*s)*F;b[15]=(k*v-l*t+m*s)*F;return true};goog.vec.Mat4.equals=function(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]&&a[4]==b[4]&&a[5]==b[5]&&a[6]==b[6]&&a[7]==b[7]&&a[8]==b[8]&&a[9]==b[9]&&a[10]==b[10]&&a[11]==b[11]&&a[12]==b[12]&&a[13]==b[13]&&a[14]==b[14]&&a[15]==b[15]};goog.vec.Mat4.multVec3=function(a,b,c){var d=b[0],e=b[1],f=b[2];c[0]=d*a[0]+e*a[4]+f*a[8]+a[12];c[1]=d*a[1]+e*a[5]+f*a[9]+a[13];c[2]=d*a[2]+e*a[6]+f*a[10]+a[14];return c};goog.vec.Mat4.multVec3NoTranslate=function(a,b,c){var d=b[0],e=b[1],f=b[2];c[0]=d*a[0]+e*a[4]+f*a[8];c[1]=d*a[1]+e*a[5]+f*a[9];c[2]=d*a[2]+e*a[6]+f*a[10];return c};goog.vec.Mat4.multVec3Projective=function(a,b,c){var d=b[0],e=b[1],f=b[2];var g=1/(d*a[3]+e*a[7]+f*a[11]+a[15]);c[0]=(d*a[0]+e*a[4]+f*a[8]+a[12])*g;c[1]=(d*a[1]+e*a[5]+f*a[9]+a[13])*g;c[2]=(d*a[2]+e*a[6]+f*a[10]+a[14])*g;return c};goog.vec.Mat4.multVec4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];c[0]=d*a[0]+e*a[4]+f*a[8]+g*a[12];c[1]=d*a[1]+e*a[5]+f*a[9]+g*a[13];c[2]=d*a[2]+e*a[6]+f*a[10]+g*a[14];c[3]=d*a[3]+e*a[7]+f*a[11]+g*a[15];return c};goog.vec.Mat4.makeTranslate=function(a,b,c,d){goog.vec.Mat4.makeIdentity(a);return goog.vec.Mat4.setColumnValues(a,3,b,c,d,1)};goog.vec.Mat4.makeScale=function(a,b,c,d){goog.vec.Mat4.makeIdentity(a);return goog.vec.Mat4.setDiagonalValues(a,b,c,d,1)};goog.vec.Mat4.makeRotate=function(a,b,c,d,e){var f=Math.cos(b);var g=1-f;var h=Math.sin(b);return goog.vec.Mat4.setFromValues(a,c*c*g+f,c*d*g+e*h,c*e*g-d*h,0,c*d*g-e*h,d*d*g+f,d*e*g+c*h,0,c*e*g+d*h,d*e*g-c*h,e*e*g+f,0,0,0,0,1)};goog.vec.Mat4.makeRotateX=function(a,b){var c=Math.cos(b);var d=Math.sin(b);return goog.vec.Mat4.setFromValues(a,1,0,0,0,0,c,d,0,0,-d,c,0,0,0,0,1)};goog.vec.Mat4.makeRotateY=function(a,b){var c=Math.cos(b);var d=Math.sin(b);return goog.vec.Mat4.setFromValues(a,c,0,-d,0,0,1,0,0,d,0,c,0,0,0,0,1)};goog.vec.Mat4.makeRotateZ=function(a,b){var c=Math.cos(b);var d=Math.sin(b);return goog.vec.Mat4.setFromValues(a,c,d,0,0,-d,c,0,0,0,0,1,0,0,0,0,1)};goog.vec.Mat4.makeFrustum=function(a,b,c,d,e,f,g){var h=2*f/(c-b);var i=2*f/(e-d);var j=(c+b)/(c-b);var k=(e+d)/(e-d);var l=-(g+f)/(g-f);var m=-(2*g*f)/(g-f);return goog.vec.Mat4.setFromValues(a,h,0,0,0,0,i,0,0,j,k,l,-1,0,0,m,0)};goog.vec.Mat4.makePerspective=function(a,b,c,d,e){var f=b/2;var g=e-d;var h=Math.sin(f);if(g==0||h==0||c==0){return a}var i=Math.cos(f)/h;return goog.vec.Mat4.setFromValues(a,i/c,0,0,0,0,i,0,0,0,0,-(e+d)/g,-1,0,0,-(2*d*e)/g,0)};goog.vec.Mat4.makeOrtho=function(a,b,c,d,e,f,g){var h=2/(c-b);var i=2/(e-d);var j=-2/(g-f);var k=-(c+b)/(c-b);var l=-(e+d)/(e-d);var m=-(g+f)/(g-f);return goog.vec.Mat4.setFromValues(a,h,0,0,0,0,i,0,0,0,0,j,0,k,l,m,1)};goog.vec.Mat4.makeLookAt=function(a,b,c,d){var e=goog.vec.Mat4.tmpVec4_[0];goog.vec.Vec3.subtract(c,b,e);goog.vec.Vec3.normalize(e,e);e[3]=0;var f=goog.vec.Mat4.tmpVec4_[1];goog.vec.Vec3.cross(e,d,f);goog.vec.Vec3.normalize(f,f);f[3]=0;var g=goog.vec.Mat4.tmpVec4_[2];goog.vec.Vec3.cross(f,e,g);goog.vec.Vec3.normalize(g,g);g[3]=0;goog.vec.Vec3.negate(e,e);goog.vec.Mat4.setRow(a,0,f);goog.vec.Mat4.setRow(a,1,g);goog.vec.Mat4.setRow(a,2,e);goog.vec.Mat4.setRowValues(a,3,0,0,0,1);goog.vec.Mat4.translate(a,-b[0],-b[1],-b[2]);return a};goog.vec.Mat4.toLookAt=function(a,b,c,d){var e=goog.vec.Mat4.tmpMat4_[0];if(!goog.vec.Mat4.invert(a,e)){return false}if(b){b[0]=e[12];b[1]=e[13];b[2]=e[14]}if(c||d){if(!c){c=goog.vec.Mat4.tmpVec3_[0]}c[0]=-a[2];c[1]=-a[6];c[2]=-a[10];goog.vec.Vec3.normalize(c,c)}if(d){var f=goog.vec.Mat4.tmpVec3_[1];f[0]=a[0];f[1]=a[4];f[2]=a[8];goog.vec.Vec3.cross(f,c,d);goog.vec.Vec3.normalize(d,d)}return true};goog.vec.Mat4.makeEulerZXZ=function(a,b,c,d){var e=Math.cos(b);var f=Math.sin(b);var g=Math.cos(c);var h=Math.sin(c);var i=Math.cos(d);var j=Math.sin(d);a[0]=e*i-g*f*j;a[1]=g*e*j+i*f;a[2]=j*h;a[3]=0;a[4]=-e*j-i*g*f;a[5]=e*g*i-f*j;a[6]=i*h;a[7]=0;a[8]=h*f;a[9]=-e*h;a[10]=g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};goog.vec.Mat4.toEulerZXZ=function(a,b,c){var d=Math.sqrt(a[2]*a[2]+a[6]*a[6]);var e=c?-1:1;if(d>goog.vec.EPSILON){b[2]=Math.atan2(a[2]*e,a[6]*e);b[1]=Math.atan2(d*e,a[10]);b[0]=Math.atan2(a[8]*e,-a[9]*e)}else{b[0]=0;b[1]=Math.atan2(d*e,a[10]);b[2]=Math.atan2(a[1],a[0])}b[0]=(b[0]+Math.PI*2)%(Math.PI*2);b[2]=(b[2]+Math.PI*2)%(Math.PI*2);b[1]=(b[1]*e+Math.PI*2)%(Math.PI*2)*e;return b};goog.vec.Mat4.translate=function(a,b,c,d){return goog.vec.Mat4.setColumnValues(a,3,a[0]*b+a[4]*c+a[8]*d+a[12],a[1]*b+a[5]*c+a[9]*d+a[13],a[2]*b+a[6]*c+a[10]*d+a[14],a[3]*b+a[7]*c+a[11]*d+a[15])};goog.vec.Mat4.scale=function(a,b,c,d){return goog.vec.Mat4.setFromValues(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};goog.vec.Mat4.rotate=function(a,b,c,d,e){var f=a[0],g=a[1],h=a[2],i=a[3];var j=a[4],k=a[5],l=a[6],m=a[7];var n=a[8],o=a[9],p=a[10],q=a[11];var r=a[12],s=a[13],t=a[14],u=a[15];var v=Math.cos(b);var w=Math.sin(b);var x=1-v;var y=c*c*x+v;var z=c*d*x+e*w;var A=c*e*x-d*w;var B=c*d*x-e*w;var C=d*d*x+v;var D=d*e*x+c*w;var E=c*e*x+d*w;var F=d*e*x-c*w;var G=e*e*x+v;return goog.vec.Mat4.setFromValues(a,f*y+j*z+n*A,g*y+k*z+o*A,h*y+l*z+p*A,i*y+m*z+q*A,f*B+j*C+n*D,g*B+k*C+o*D,h*B+l*C+p*D,i*B+m*C+q*D,f*E+j*F+n*G,g*E+k*F+o*G,h*E+l*F+p*G,i*E+m*F+q*G,r,s,t,u)};goog.vec.Mat4.rotateX=function(a,b){var c=a[4],d=a[5],e=a[6],f=a[7];var g=a[8],h=a[9],i=a[10],j=a[11];var k=Math.cos(b);var l=Math.sin(b);a[4]=c*k+g*l;a[5]=d*k+h*l;a[6]=e*k+i*l;a[7]=f*k+j*l;a[8]=c*-l+g*k;a[9]=d*-l+h*k;a[10]=e*-l+i*k;a[11]=f*-l+j*k;return a};goog.vec.Mat4.rotateY=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];var g=a[8],h=a[9],i=a[10],j=a[11];var k=Math.cos(b);var l=Math.sin(b);a[0]=c*k+g*-l;a[1]=d*k+h*-l;a[2]=e*k+i*-l;a[3]=f*k+j*-l;a[8]=c*l+g*k;a[9]=d*l+h*k;a[10]=e*l+i*k;a[11]=f*l+j*k;return a};goog.vec.Mat4.rotateZ=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];var g=a[4],h=a[5],i=a[6],j=a[7];var k=Math.cos(b);var l=Math.sin(b);a[0]=c*k+g*l;a[1]=d*k+h*l;a[2]=e*k+i*l;a[3]=f*k+j*l;a[4]=c*-l+g*k;a[5]=d*-l+h*k;a[6]=e*-l+i*k;a[7]=f*-l+j*k;return a};goog.vec.Mat4.getTranslation=function(a,b){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};goog.vec.Mat4.tmpVec3_=[goog.vec.Vec3.createFloat64(),goog.vec.Vec3.createFloat64()];goog.vec.Mat4.tmpVec4_=[goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64()];goog.vec.Mat4.tmpMat4_=[goog.vec.Mat4.createFloat64()];goog.provide("ol.TransformFunction");ol.TransformFunction;goog.provide("ol.Extent");goog.provide("ol.extent");goog.provide("ol.extent.Corner");goog.provide("ol.extent.Relationship");goog.require("goog.asserts");goog.require("goog.vec.Mat4");goog.require("ol.Coordinate");goog.require("ol.Size");goog.require("ol.TransformFunction");ol.Extent;ol.extent.Corner={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}
;ol.extent.Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};ol.extent.boundingExtent=function(a){var b=ol.extent.createEmpty();for(var c=0,d=a.length;c<d;++c){ol.extent.extendCoordinate(b,a[c])}return b};ol.extent.boundingExtentXYs_=function(a,b,c){goog.asserts.assert(a.length>0,"xs length should be larger than 0");goog.asserts.assert(b.length>0,"ys length should be larger than 0");var d=Math.min.apply(null,a);var e=Math.min.apply(null,b);var f=Math.max.apply(null,a);var g=Math.max.apply(null,b);return ol.extent.createOrUpdate(d,e,f,g,c)};ol.extent.buffer=function(a,b,c){if(goog.isDef(c)){c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]+b;c[3]=a[3]+b;return c}else{return[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}};ol.extent.clone=function(a,b){if(goog.isDef(b)){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}else{return a.slice()}};ol.extent.closestSquaredDistanceXY=function(a,b,c){var d,e;if(b<a[0]){d=a[0]-b}else if(a[2]<b){d=b-a[2]}else{d=0}if(c<a[1]){e=a[1]-c}else if(a[3]<c){e=c-a[3]}else{e=0}return d*d+e*e};ol.extent.containsCoordinate=function(a,b){return ol.extent.containsXY(a,b[0],b[1])};ol.extent.containsExtent=function(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]};ol.extent.containsXY=function(a,b,c){return a[0]<=b&&b<=a[2]&&a[1]<=c&&c<=a[3]};ol.extent.coordinateRelationship=function(a,b){var c=a[0];var d=a[1];var e=a[2];var f=a[3];var g=b[0];var h=b[1];var i=ol.extent.Relationship.UNKNOWN;if(g<c){i=i|ol.extent.Relationship.LEFT}else if(g>e){i=i|ol.extent.Relationship.RIGHT}if(h<d){i=i|ol.extent.Relationship.BELOW}else if(h>f){i=i|ol.extent.Relationship.ABOVE}if(i===ol.extent.Relationship.UNKNOWN){i=ol.extent.Relationship.INTERSECTING}return i};ol.extent.createEmpty=function(){return[Infinity,Infinity,-Infinity,-Infinity]};ol.extent.createOrUpdate=function(a,b,c,d,e){if(goog.isDef(e)){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e}else{return[a,b,c,d]}};ol.extent.createOrUpdateEmpty=function(a){return ol.extent.createOrUpdate(Infinity,Infinity,-Infinity,-Infinity,a)};ol.extent.createOrUpdateFromCoordinate=function(a,b){var c=a[0];var d=a[1];return ol.extent.createOrUpdate(c,d,c,d,b)};ol.extent.createOrUpdateFromCoordinates=function(a,b){var c=ol.extent.createOrUpdateEmpty(b);return ol.extent.extendCoordinates(c,a)};ol.extent.createOrUpdateFromFlatCoordinates=function(a,b,c,d,e){var f=ol.extent.createOrUpdateEmpty(e);return ol.extent.extendFlatCoordinates(f,a,b,c,d)};ol.extent.createOrUpdateFromRings=function(a,b){var c=ol.extent.createOrUpdateEmpty(b);return ol.extent.extendRings(c,a)};ol.extent.empty=function(a){a[0]=a[1]=Infinity;a[2]=a[3]=-Infinity;return a};ol.extent.equals=function(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]};ol.extent.extend=function(a,b){if(b[0]<a[0]){a[0]=b[0]}if(b[2]>a[2]){a[2]=b[2]}if(b[1]<a[1]){a[1]=b[1]}if(b[3]>a[3]){a[3]=b[3]}return a};ol.extent.extendCoordinate=function(a,b){if(b[0]<a[0]){a[0]=b[0]}if(b[0]>a[2]){a[2]=b[0]}if(b[1]<a[1]){a[1]=b[1]}if(b[1]>a[3]){a[3]=b[1]}};ol.extent.extendCoordinates=function(a,b){var c,d;for(c=0,d=b.length;c<d;++c){ol.extent.extendCoordinate(a,b[c])}return a};ol.extent.extendFlatCoordinates=function(a,b,c,d,e){for(;c<d;c+=e){ol.extent.extendXY(a,b[c],b[c+1])}return a};ol.extent.extendRings=function(a,b){var c,d;for(c=0,d=b.length;c<d;++c){ol.extent.extendCoordinates(a,b[c])}return a};ol.extent.extendXY=function(a,b,c){a[0]=Math.min(a[0],b);a[1]=Math.min(a[1],c);a[2]=Math.max(a[2],b);a[3]=Math.max(a[3],c)};ol.extent.forEachCorner=function(a,b,c){var d;d=b.call(c,ol.extent.getBottomLeft(a));if(d){return d}d=b.call(c,ol.extent.getBottomRight(a));if(d){return d}d=b.call(c,ol.extent.getTopRight(a));if(d){return d}d=b.call(c,ol.extent.getTopLeft(a));if(d){return d}return false};ol.extent.getArea=function(a){var b=0;if(!ol.extent.isEmpty(a)){b=ol.extent.getWidth(a)*ol.extent.getHeight(a)}return b};ol.extent.getBottomLeft=function(a){return[a[0],a[1]]};ol.extent.getBottomRight=function(a){return[a[2],a[1]]};ol.extent.getCenter=function(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]};ol.extent.getCorner=function(a,b){var c;if(b===ol.extent.Corner.BOTTOM_LEFT){c=ol.extent.getBottomLeft(a)}else if(b===ol.extent.Corner.BOTTOM_RIGHT){c=ol.extent.getBottomRight(a)}else if(b===ol.extent.Corner.TOP_LEFT){c=ol.extent.getTopLeft(a)}else if(b===ol.extent.Corner.TOP_RIGHT){c=ol.extent.getTopRight(a)}else{goog.asserts.fail("Invalid corner: %s",b)}goog.asserts.assert(goog.isDef(c),"coordinate should be defined");return c};ol.extent.getEnlargedArea=function(a,b){var c=Math.min(a[0],b[0]);var d=Math.min(a[1],b[1]);var e=Math.max(a[2],b[2]);var f=Math.max(a[3],b[3]);return(e-c)*(f-d)};ol.extent.getForViewAndSize=function(a,b,c,d,e){var f=b*d[0]/2;var g=b*d[1]/2;var h=Math.cos(c);var i=Math.sin(c);var j=[-f,-f,f,f];var k=[-g,g,-g,g];var l,m,n;for(l=0;l<4;++l){m=j[l];n=k[l];j[l]=a[0]+m*h-n*i;k[l]=a[1]+m*i+n*h}return ol.extent.boundingExtentXYs_(j,k,e)};ol.extent.getHeight=function(a){return a[3]-a[1]};ol.extent.getIntersectionArea=function(a,b){var c=ol.extent.getIntersection(a,b);return ol.extent.getArea(c)};ol.extent.getIntersection=function(a,b,c){var d=goog.isDef(c)?c:ol.extent.createEmpty();if(ol.extent.intersects(a,b)){if(a[0]>b[0]){d[0]=a[0]}else{d[0]=b[0]}if(a[1]>b[1]){d[1]=a[1]}else{d[1]=b[1]}if(a[2]<b[2]){d[2]=a[2]}else{d[2]=b[2]}if(a[3]<b[3]){d[3]=a[3]}else{d[3]=b[3]}}return d};ol.extent.getMargin=function(a){return ol.extent.getWidth(a)+ol.extent.getHeight(a)};ol.extent.getSize=function(a){return[a[2]-a[0],a[3]-a[1]]};ol.extent.getTopLeft=function(a){return[a[0],a[3]]};ol.extent.getTopRight=function(a){return[a[2],a[3]]};ol.extent.getWidth=function(a){return a[2]-a[0]};ol.extent.intersects=function(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]};ol.extent.isEmpty=function(a){return a[2]<a[0]||a[3]<a[1]};ol.extent.isInfinite=function(a){return a[0]==-Infinity||a[1]==-Infinity||a[2]==Infinity||a[3]==Infinity};ol.extent.normalize=function(a,b){return[(b[0]-a[0])/(a[2]-a[0]),(b[1]-a[1])/(a[3]-a[1])]};ol.extent.returnOrUpdate=function(a,b){if(goog.isDef(b)){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}else{return a}};ol.extent.scaleFromCenter=function(a,b){var c=(a[2]-a[0])/2*(b-1);var d=(a[3]-a[1])/2*(b-1);a[0]-=c;a[2]+=c;a[1]-=d;a[3]+=d};ol.extent.intersectsSegment=function(a,b,c){var d=false;var e=ol.extent.coordinateRelationship(a,b);var f=ol.extent.coordinateRelationship(a,c);if(e===ol.extent.Relationship.INTERSECTING||f===ol.extent.Relationship.INTERSECTING){d=true}else{var g=a[0];var h=a[1];var i=a[2];var j=a[3];var k=b[0];var l=b[1];var m=c[0];var n=c[1];var o=(n-l)/(m-k);var p,q;if(!!(f&ol.extent.Relationship.ABOVE)&&!(e&ol.extent.Relationship.ABOVE)){p=m-(n-j)/o;d=p>=g&&p<=i}if(!d&&!!(f&ol.extent.Relationship.RIGHT)&&!(e&ol.extent.Relationship.RIGHT)){q=n-(m-i)*o;d=q>=h&&q<=j}if(!d&&!!(f&ol.extent.Relationship.BELOW)&&!(e&ol.extent.Relationship.BELOW)){p=m-(n-h)/o;d=p>=g&&p<=i}if(!d&&!!(f&ol.extent.Relationship.LEFT)&&!(e&ol.extent.Relationship.LEFT)){q=n-(m-g)*o;d=q>=h&&q<=j}}return d};ol.extent.touches=function(a,b){var c=ol.extent.intersects(a,b);return c&&(a[0]==b[2]||a[2]==b[0]||a[1]==b[3]||a[3]==b[1])};ol.extent.applyTransform=function(a,b,c){var d=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(d,d,2);var e=[d[0],d[2],d[4],d[6]];var f=[d[1],d[3],d[5],d[7]];return ol.extent.boundingExtentXYs_(e,f,c)};ol.extent.transform2D=function(a,b,c){var d=goog.isDef(c)?c:[];var e=goog.vec.Mat4.getElement(b,0,0);var f=goog.vec.Mat4.getElement(b,1,0);var g=goog.vec.Mat4.getElement(b,0,1);var h=goog.vec.Mat4.getElement(b,1,1);var i=goog.vec.Mat4.getElement(b,0,3);var j=goog.vec.Mat4.getElement(b,1,3);var k=[0,2,0,2];var l=[1,1,3,3];var m=[];var n=[];var o,p,q;for(o=0;o<4;++o){p=a[k[o]];q=a[l[o]];m[o]=e*p+g*q+i;n[o]=f*p+h*q+j}d[0]=Math.min.apply(null,m);d[1]=Math.min.apply(null,n);d[2]=Math.max.apply(null,m);d[3]=Math.max.apply(null,n);return d};goog.provide("goog.functions");goog.functions.constant=function(a){return function(){return a}};goog.functions.FALSE=goog.functions.constant(false);goog.functions.TRUE=goog.functions.constant(true);goog.functions.NULL=goog.functions.constant(null);goog.functions.identity=function(a,b){return a};goog.functions.error=function(a){return function(){throw Error(a)}};goog.functions.fail=function(a){return function(){throw a}};goog.functions.lock=function(a,b){b=b||0;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}};goog.functions.nth=function(a){return function(){return arguments[a]}};goog.functions.withReturnValue=function(a,b){return goog.functions.sequence(a,goog.functions.constant(b))};goog.functions.equalTo=function(a,b){return function(c){return b?a==c:a===c}};goog.functions.compose=function(a,b){var c=arguments;var d=c.length;return function(){var a;if(d){a=c[d-1].apply(this,arguments)}for(var b=d-2;b>=0;b--){a=c[b].call(this,a)}return a}};goog.functions.sequence=function(a){var b=arguments;var c=b.length;return function(){var a;for(var d=0;d<c;d++){a=b[d].apply(this,arguments)}return a}};goog.functions.and=function(a){var b=arguments;var c=b.length;return function(){for(var a=0;a<c;a++){if(!b[a].apply(this,arguments)){return false}}return true}};goog.functions.or=function(a){var b=arguments;var c=b.length;return function(){for(var a=0;a<c;a++){if(b[a].apply(this,arguments)){return true}}return false}};goog.functions.not=function(a){return function(){return!a.apply(this,arguments)}};goog.functions.create=function(a,b){var c=function(){};c.prototype=a.prototype;var d=new c;a.apply(d,Array.prototype.slice.call(arguments,1));return d};goog.define("goog.functions.CACHE_RETURN_VALUE",true);goog.functions.cacheReturnValue=function(a){var b=false;var c;return function(){if(!goog.functions.CACHE_RETURN_VALUE){return a()}if(!b){c=a();b=true}return c}};goog.functions.once=function(a){var b=a;return function(){if(b){var a=b;b=null;a()}}};goog.provide("ol.Sphere");goog.require("goog.math");ol.Sphere=function(a){this.radius=a};ol.Sphere.prototype.geodesicArea=function(a){var b=0,c=a.length;var d=a[c-1][0];var e=a[c-1][1];for(var f=0;f<c;f++){var g=a[f][0],h=a[f][1];b+=goog.math.toRadians(g-d)*(2+Math.sin(goog.math.toRadians(e))+Math.sin(goog.math.toRadians(h)));d=g;e=h}return b*this.radius*this.radius/2};ol.Sphere.prototype.haversineDistance=function(a,b){var c=goog.math.toRadians(a[1]);var d=goog.math.toRadians(b[1]);var e=(d-c)/2;var f=goog.math.toRadians(b[0]-a[0])/2;var g=Math.sin(e)*Math.sin(e)+Math.sin(f)*Math.sin(f)*Math.cos(c)*Math.cos(d);return 2*this.radius*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))};ol.Sphere.prototype.offset=function(a,b,c){var d=goog.math.toRadians(a[1]);var e=goog.math.toRadians(a[0]);var f=b/this.radius;var g=Math.asin(Math.sin(d)*Math.cos(f)+Math.cos(d)*Math.sin(f)*Math.cos(c));var h=e+Math.atan2(Math.sin(c)*Math.sin(f)*Math.cos(d),Math.cos(f)-Math.sin(d)*Math.sin(g));return[goog.math.toDegrees(h),goog.math.toDegrees(g)]};goog.provide("ol.sphere.NORMAL");goog.require("ol.Sphere");ol.sphere.NORMAL=new ol.Sphere(6370997);goog.provide("ol.proj");goog.provide("ol.proj.METERS_PER_UNIT");goog.provide("ol.proj.Projection");goog.provide("ol.proj.ProjectionLike");goog.provide("ol.proj.Units");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol");goog.require("ol.Extent");goog.require("ol.TransformFunction");goog.require("ol.extent");goog.require("ol.sphere.NORMAL");ol.proj.ProjectionLike;ol.proj.Units={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",USFEET:"us-ft"};ol.proj.METERS_PER_UNIT={};ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]=2*Math.PI*ol.sphere.NORMAL.radius/360;ol.proj.METERS_PER_UNIT[ol.proj.Units.FEET]=.3048;ol.proj.METERS_PER_UNIT[ol.proj.Units.METERS]=1;ol.proj.METERS_PER_UNIT[ol.proj.Units.USFEET]=1200/3937;ol.proj.Projection=function(a){this.code_=a.code;this.units_=a.units;this.extent_=goog.isDef(a.extent)?a.extent:null;this.worldExtent_=goog.isDef(a.worldExtent)?a.worldExtent:null;this.axisOrientation_=goog.isDef(a.axisOrientation)?a.axisOrientation:"enu";this.global_=goog.isDef(a.global)?a.global:false;this.canWrapX_=this.global_&&!goog.isNull(this.extent_);this.getPointResolutionFunc_=goog.isDef(a.getPointResolution)?a.getPointResolution:this.getPointResolution_;this.defaultTileGrid_=null;var b=ol.proj.projections_;var c=a.code;goog.asserts.assert(goog.isDef(c),'Option "code" is required for constructing instance');if(ol.ENABLE_PROJ4JS&&typeof proj4=="function"&&!goog.isDef(b[c])){var d=proj4.defs(c);if(goog.isDef(d)){if(goog.isDef(d.axis)&&!goog.isDef(a.axisOrientation)){this.axisOrientation_=d.axis}if(!goog.isDef(a.units)){var e=d.units;if(!goog.isDef(e)){if(goog.isDef(d.to_meter)){e=d.to_meter.toString();ol.proj.METERS_PER_UNIT[e]=d.to_meter}}this.units_=e}var f,g,h,i;for(f in b){g=proj4.defs(f);if(goog.isDef(g)){h=ol.proj.get(f);if(g===d){ol.proj.addEquivalentProjections([h,this])}else{i=proj4(f,c);ol.proj.addCoordinateTransforms(h,this,i.forward,i.inverse)}}}}}};ol.proj.Projection.prototype.canWrapX=function(){return this.canWrapX_};ol.proj.Projection.prototype.getCode=function(){return this.code_};ol.proj.Projection.prototype.getExtent=function(){return this.extent_};ol.proj.Projection.prototype.getUnits=function(){return this.units_};ol.proj.Projection.prototype.getMetersPerUnit=function(){return ol.proj.METERS_PER_UNIT[this.units_]};ol.proj.Projection.prototype.getWorldExtent=function(){return this.worldExtent_};ol.proj.Projection.prototype.getAxisOrientation=function(){return this.axisOrientation_};ol.proj.Projection.prototype.isGlobal=function(){return this.global_};ol.proj.Projection.prototype.setGlobal=function(a){this.global_=a;this.canWrapX_=a&&!goog.isNull(this.extent_)};ol.proj.Projection.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_};ol.proj.Projection.prototype.setDefaultTileGrid=function(a){this.defaultTileGrid_=a};ol.proj.Projection.prototype.setExtent=function(a){this.extent_=a;this.canWrapX_=this.global_&&!goog.isNull(a)};ol.proj.Projection.prototype.setWorldExtent=function(a){this.worldExtent_=a};ol.proj.Projection.prototype.setGetPointResolution=function(a){this.getPointResolutionFunc_=a};ol.proj.Projection.prototype.getPointResolution_=function(a,b){var c=this.getUnits();if(c==ol.proj.Units.DEGREES){return a}else{var d=ol.proj.getTransformFromProjections(this,ol.proj.get("EPSG:4326"));var e=[b[0]-a/2,b[1],b[0]+a/2,b[1],b[0],b[1]-a/2,b[0],b[1]+a/2];e=d(e,e,2);var f=ol.sphere.NORMAL.haversineDistance(e.slice(0,2),e.slice(2,4));var g=ol.sphere.NORMAL.haversineDistance(e.slice(4,6),e.slice(6,8));var h=(f+g)/2;var i=this.getMetersPerUnit();if(goog.isDef(i)){h/=i}return h}};ol.proj.Projection.prototype.getPointResolution=function(a,b){return this.getPointResolutionFunc_(a,b)};ol.proj.projections_={};ol.proj.transforms_={};ol.proj.addEquivalentProjections=function(a){ol.proj.addProjections(a);goog.array.forEach(a,function(b){goog.array.forEach(a,function(a){if(b!==a){ol.proj.addTransform(b,a,ol.proj.cloneTransform)}})})};ol.proj.addEquivalentTransforms=function(a,b,c,d){goog.array.forEach(a,function(a){goog.array.forEach(b,function(b){ol.proj.addTransform(a,b,c);ol.proj.addTransform(b,a,d)})})};ol.proj.addProjection=function(a){ol.proj.projections_[a.getCode()]=a;ol.proj.addTransform(a,a,ol.proj.cloneTransform)};ol.proj.addProjections=function(a){var b=[];goog.array.forEach(a,function(a){b.push(ol.proj.addProjection(a))})};ol.proj.clearAllProjections=function(){ol.proj.projections_={};ol.proj.transforms_={}};ol.proj.createProjection=function(a,b){if(!goog.isDefAndNotNull(a)){return ol.proj.get(b)}else if(goog.isString(a)){return ol.proj.get(a)}else{goog.asserts.assertInstanceof(a,ol.proj.Projection,"projection should be an ol.proj.Projection");return a}};ol.proj.addTransform=function(a,b,c){var d=a.getCode();var e=b.getCode();var f=ol.proj.transforms_;if(!goog.object.containsKey(f,d)){f[d]={}}f[d][e]=c};ol.proj.addCoordinateTransforms=function(a,b,c,d){var e=ol.proj.get(a);var f=ol.proj.get(b);ol.proj.addTransform(e,f,ol.proj.createTransformFromCoordinateTransform(c));ol.proj.addTransform(f,e,ol.proj.createTransformFromCoordinateTransform(d))};ol.proj.createTransformFromCoordinateTransform=function(a){return function(b,c,d){var e=b.length;var f=goog.isDef(d)?d:2;var g=goog.isDef(c)?c:new Array(e);var h,i,j;for(i=0;i<e;i+=f){h=a([b[i],b[i+1]]);g[i]=h[0];g[i+1]=h[1];for(j=f-1;j>=2;--j){g[i+j]=b[i+j]}}return g}};ol.proj.removeTransform=function(a,b){var c=a.getCode();var d=b.getCode();var e=ol.proj.transforms_;goog.asserts.assert(c in e,"sourceCode should be in transforms");goog.asserts.assert(d in e[c],"destinationCode should be in transforms of sourceCode");var f=e[c][d];delete e[c][d];var g=goog.object.getKeys(e[c]);if(g.length===0){delete e[c]}return f};ol.proj.fromLonLat=function(a,b){return ol.proj.transform(a,"EPSG:4326",goog.isDef(b)?b:"EPSG:3857")};ol.proj.toLonLat=function(a,b){return ol.proj.transform(a,goog.isDef(b)?b:"EPSG:3857","EPSG:4326")};ol.proj.get=function(a){var b;if(a instanceof ol.proj.Projection){b=a}else if(goog.isString(a)){var c=a;b=ol.proj.projections_[c];if(ol.ENABLE_PROJ4JS&&!goog.isDef(b)&&typeof proj4=="function"&&goog.isDef(proj4.defs(c))){b=new ol.proj.Projection({code:c});ol.proj.addProjection(b)}}else{b=null}return b};ol.proj.equivalent=function(a,b){if(a===b){return true}else if(a.getCode()===b.getCode()){return true}else if(a.getUnits()!=b.getUnits()){return false}else{var c=ol.proj.getTransformFromProjections(a,b);return c===ol.proj.cloneTransform}};ol.proj.getTransform=function(a,b){var c=ol.proj.get(a);var d=ol.proj.get(b);return ol.proj.getTransformFromProjections(c,d)};ol.proj.getTransformFromProjections=function(a,b){var c=ol.proj.transforms_;var d=a.getCode();var e=b.getCode();var f;if(goog.object.containsKey(c,d)&&goog.object.containsKey(c[d],e)){f=c[d][e]}if(!goog.isDef(f)){goog.asserts.assert(goog.isDef(f),"transform should be defined");f=ol.proj.identityTransform}return f};ol.proj.identityTransform=function(a,b,c){if(goog.isDef(b)&&a!==b){goog.asserts.fail("This should not be used internally.");for(var d=0,e=a.length;d<e;++d){b[d]=a[d]}a=b}return a};ol.proj.cloneTransform=function(a,b,c){var d;if(goog.isDef(b)){for(var e=0,f=a.length;e<f;++e){b[e]=a[e]}d=b}else{d=a.slice()}return d};ol.proj.transform=function(a,b,c){var d=ol.proj.getTransform(b,c);return d(a,undefined,a.length)};ol.proj.transformExtent=function(a,b,c){var d=ol.proj.getTransform(b,c);return ol.extent.applyTransform(a,d)};ol.proj.transformWithProjections=function(a,b,c){var d=ol.proj.getTransformFromProjections(b,c);return d(a)};goog.provide("ol.geom.Geometry");goog.provide("ol.geom.GeometryLayout");goog.provide("ol.geom.GeometryType");goog.require("goog.functions");goog.require("ol.Object");goog.require("ol.extent");goog.require("ol.proj");ol.geom.GeometryType={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};ol.geom.GeometryLayout={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};ol.geom.Geometry=function(){goog.base(this);this.extent_=ol.extent.createEmpty();this.extentRevision_=-1;this.simplifiedGeometryCache={};this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=0};goog.inherits(ol.geom.Geometry,ol.Object);ol.geom.Geometry.prototype.clone=goog.abstractMethod;ol.geom.Geometry.prototype.closestPointXY=goog.abstractMethod;ol.geom.Geometry.prototype.getClosestPoint=function(a,b){var c=goog.isDef(b)?b:[NaN,NaN];this.closestPointXY(a[0],a[1],c,Infinity);return c};ol.geom.Geometry.prototype.containsCoordinate=function(a){return this.containsXY(a[0],a[1])};ol.geom.Geometry.prototype.computeExtent=goog.abstractMethod;ol.geom.Geometry.prototype.containsXY=goog.functions.FALSE;ol.geom.Geometry.prototype.getExtent=function(a){if(this.extentRevision_!=this.getRevision()){this.extent_=this.computeExtent(this.extent_);this.extentRevision_=this.getRevision()}return ol.extent.returnOrUpdate(this.extent_,a)};ol.geom.Geometry.prototype.getSimplifiedGeometry=goog.abstractMethod;ol.geom.Geometry.prototype.getType=goog.abstractMethod;ol.geom.Geometry.prototype.applyTransform=goog.abstractMethod;ol.geom.Geometry.prototype.intersectsExtent=goog.abstractMethod;ol.geom.Geometry.prototype.translate=goog.abstractMethod;ol.geom.Geometry.prototype.transform=function(a,b){this.applyTransform(ol.proj.getTransform(a,b));return this};goog.provide("ol.geom.flat.transform");goog.require("goog.vec.Mat4");ol.geom.flat.transform.transform2D=function(a,b,c,d,e,f){var g=goog.vec.Mat4.getElement(e,0,0);var h=goog.vec.Mat4.getElement(e,1,0);var i=goog.vec.Mat4.getElement(e,0,1);var j=goog.vec.Mat4.getElement(e,1,1);var k=goog.vec.Mat4.getElement(e,0,3);var l=goog.vec.Mat4.getElement(e,1,3);var m=goog.isDef(f)?f:[];var n=0;var o;for(o=b;o<c;o+=d){var p=a[o];var q=a[o+1];m[n++]=g*p+i*q+k;m[n++]=h*p+j*q+l}if(goog.isDef(f)&&m.length!=n){m.length=n}return m};ol.geom.flat.transform.translate=function(a,b,c,d,e,f,g){var h=goog.isDef(g)?g:[];var i=0;var j,k;for(j=b;j<c;j+=d){h[i++]=a[j]+e;h[i++]=a[j+1]+f;for(k=j+2;k<j+d;++k){h[i++]=a[k]}}if(goog.isDef(g)&&h.length!=i){h.length=i}return h};goog.provide("ol.geom.SimpleGeometry");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.object");goog.require("ol.extent");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.flat.transform");ol.geom.SimpleGeometry=function(){goog.base(this);this.layout=ol.geom.GeometryLayout.XY;this.stride=2;this.flatCoordinates=null};goog.inherits(ol.geom.SimpleGeometry,ol.geom.Geometry);ol.geom.SimpleGeometry.getLayoutForStride_=function(a){if(a==2){return ol.geom.GeometryLayout.XY}else if(a==3){return ol.geom.GeometryLayout.XYZ}else if(a==4){return ol.geom.GeometryLayout.XYZM}else{goog.asserts.fail("unsupported stride: "+a)}};ol.geom.SimpleGeometry.getStrideForLayout=function(a){if(a==ol.geom.GeometryLayout.XY){return 2}else if(a==ol.geom.GeometryLayout.XYZ){return 3}else if(a==ol.geom.GeometryLayout.XYM){return 3}else if(a==ol.geom.GeometryLayout.XYZM){return 4}else{goog.asserts.fail("unsupported layout: "+a)}};ol.geom.SimpleGeometry.prototype.containsXY=goog.functions.FALSE;ol.geom.SimpleGeometry.prototype.computeExtent=function(a){return ol.extent.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a)};ol.geom.SimpleGeometry.prototype.getCoordinates=goog.abstractMethod;ol.geom.SimpleGeometry.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)};ol.geom.SimpleGeometry.prototype.getFlatCoordinates=function(){return this.flatCoordinates};ol.geom.SimpleGeometry.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)};ol.geom.SimpleGeometry.prototype.getLayout=function(){return this.layout};ol.geom.SimpleGeometry.prototype.getSimplifiedGeometry=function(a){if(this.simplifiedGeometryRevision!=this.getRevision()){goog.object.clear(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(a<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&a<=this.simplifiedGeometryMaxMinSquaredTolerance){return this}var b=a.toString();if(this.simplifiedGeometryCache.hasOwnProperty(b)){return this.simplifiedGeometryCache[b]}else{var c=this.getSimplifiedGeometryInternal(a);var d=c.getFlatCoordinates();if(d.length<this.flatCoordinates.length){this.simplifiedGeometryCache[b]=c;return c}else{this.simplifiedGeometryMaxMinSquaredTolerance=a;return this}}};ol.geom.SimpleGeometry.prototype.getSimplifiedGeometryInternal=function(a){return this};ol.geom.SimpleGeometry.prototype.getStride=function(){return this.stride};ol.geom.SimpleGeometry.prototype.setFlatCoordinatesInternal=function(a,b){this.stride=ol.geom.SimpleGeometry.getStrideForLayout(a);this.layout=a;this.flatCoordinates=b};ol.geom.SimpleGeometry.prototype.setCoordinates=goog.abstractMethod;ol.geom.SimpleGeometry.prototype.setLayout=function(a,b,c){var d;if(goog.isDef(a)){d=ol.geom.SimpleGeometry.getStrideForLayout(a)}else{var e;for(e=0;e<c;++e){if(b.length===0){this.layout=ol.geom.GeometryLayout.XY;this.stride=2;return}else{b=b[0]}}d=b.length;a=ol.geom.SimpleGeometry.getLayoutForStride_(d)}this.layout=a;this.stride=d};ol.geom.SimpleGeometry.prototype.applyTransform=function(a){if(!goog.isNull(this.flatCoordinates)){a(this.flatCoordinates,this.flatCoordinates,this.stride);this.changed()}};ol.geom.SimpleGeometry.prototype.translate=function(a,b){var c=this.getFlatCoordinates();if(!goog.isNull(c)){var d=this.getStride();ol.geom.flat.transform.translate(c,0,c.length,d,a,b,c);this.changed()}};ol.geom.transformSimpleGeometry2D=function(a,b,c){var d=a.getFlatCoordinates();if(goog.isNull(d)){return null}else{var e=a.getStride();return ol.geom.flat.transform.transform2D(d,0,d.length,e,b,c)}};goog.provide("ol.geom.flat.area");ol.geom.flat.area.linearRing=function(a,b,c,d){var e=0;var f=a[c-d];var g=a[c-d+1];for(;b<c;b+=d){var h=a[b];var i=a[b+1];e+=g*h-f*i;f=h;g=i}return e/2};ol.geom.flat.area.linearRings=function(a,b,c,d){var e=0;var f,g;for(f=0,g=c.length;f<g;++f){var h=c[f];e+=ol.geom.flat.area.linearRing(a,b,h,d);b=h}return e};ol.geom.flat.area.linearRingss=function(a,b,c,d){var e=0;var f,g;for(f=0,g=c.length;f<g;++f){var h=c[f];e+=ol.geom.flat.area.linearRings(a,b,h,d);b=h[h.length-1]}return e};goog.provide("ol.math");goog.require("goog.asserts");ol.math.cosh=function(a){return(Math.exp(a)+Math.exp(-a))/2};ol.math.coth=function(a){var b=Math.exp(-2*a);return(1+b)/(1-b)};ol.math.csch=function(a){return 2/(Math.exp(a)-Math.exp(-a))};ol.math.roundUpToPowerOfTwo=function(a){goog.asserts.assert(0<a,"x should be larger than 0");return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))};ol.math.sech=function(a){return 2/(Math.exp(a)+Math.exp(-a))};ol.math.sinh=function(a){return(Math.exp(a)-Math.exp(-a))/2};ol.math.squaredSegmentDistance=function(a,b,c,d,e,f){var g=e-c;var h=f-d;if(g!==0||h!==0){var i=((a-c)*g+(b-d)*h)/(g*g+h*h);if(i>1){c=e;d=f}else if(i>0){c+=g*i;d+=h*i}}return ol.math.squaredDistance(a,b,c,d)};ol.math.squaredDistance=function(a,b,c,d){var e=c-a;var f=d-b;return e*e+f*f};ol.math.tanh=function(a){var b=Math.exp(-2*a);return(1-b)/(1+b)};goog.provide("ol.geom.flat.closest");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.math");ol.geom.flat.closest.point=function(a,b,c,d,e,f,g){var h=a[b];var i=a[b+1];var j=a[c]-h;var k=a[c+1]-i;var l,m;if(j===0&&k===0){m=b}else{var n=((e-h)*j+(f-i)*k)/(j*j+k*k);if(n>1){m=c}else if(n>0){for(l=0;l<d;++l){g[l]=goog.math.lerp(a[b+l],a[c+l],n)}g.length=d;return}else{m=b}}for(l=0;l<d;++l){g[l]=a[m+l]}g.length=d};ol.geom.flat.closest.getMaxSquaredDelta=function(a,b,c,d,e){var f=a[b];var g=a[b+1];for(b+=d;b<c;b+=d){var h=a[b];var i=a[b+1];var j=ol.math.squaredDistance(f,g,h,i);if(j>e){e=j}f=h;g=i}return e};ol.geom.flat.closest.getsMaxSquaredDelta=function(a,b,c,d,e){var f,g;for(f=0,g=c.length;f<g;++f){var h=c[f];e=ol.geom.flat.closest.getMaxSquaredDelta(a,b,h,d,e);b=h}return e};ol.geom.flat.closest.getssMaxSquaredDelta=function(a,b,c,d,e){var f,g;for(f=0,g=c.length;f<g;++f){var h=c[f];e=ol.geom.flat.closest.getsMaxSquaredDelta(a,b,h,d,e);b=h[h.length-1]}return e};ol.geom.flat.closest.getClosestPoint=function(a,b,c,d,e,f,g,h,i,j,k){if(b==c){return j}var l,m;if(e===0){m=ol.math.squaredDistance(g,h,a[b],a[b+1]);if(m<j){for(l=0;l<d;++l){i[l]=a[b+l]}i.length=d;return m}else{return j}}goog.asserts.assert(e>0,"maxDelta should be larger than 0");var n=goog.isDef(k)?k:[NaN,NaN];var o=b+d;while(o<c){ol.geom.flat.closest.point(a,o-d,o,d,g,h,n);m=ol.math.squaredDistance(g,h,n[0],n[1]);if(m<j){j=m;for(l=0;l<d;++l){i[l]=n[l]}i.length=d;o+=d}else{o+=d*Math.max((Math.sqrt(m)-Math.sqrt(j))/e|0,1)}}if(f){ol.geom.flat.closest.point(a,c-d,b,d,g,h,n);m=ol.math.squaredDistance(g,h,n[0],n[1]);if(m<j){j=m;for(l=0;l<d;++l){i[l]=n[l]}i.length=d}}return j};ol.geom.flat.closest.getsClosestPoint=function(a,b,c,d,e,f,g,h,i,j,k){var l=goog.isDef(k)?k:[NaN,NaN];var m,n;for(m=0,n=c.length;m<n;++m){var o=c[m];j=ol.geom.flat.closest.getClosestPoint(a,b,o,d,e,f,g,h,i,j,l);b=o}return j};ol.geom.flat.closest.getssClosestPoint=function(a,b,c,d,e,f,g,h,i,j,k){var l=goog.isDef(k)?k:[NaN,NaN];var m,n;for(m=0,n=c.length;m<n;++m){var o=c[m];j=ol.geom.flat.closest.getsClosestPoint(a,b,o,d,e,f,g,h,i,j,l);b=o[o.length-1]}return j};goog.provide("ol.geom.flat.deflate");goog.require("goog.asserts");ol.geom.flat.deflate.coordinate=function(a,b,c,d){goog.asserts.assert(c.length==d,"length of the coordinate array should match stride");var e,f;for(e=0,f=c.length;e<f;++e){a[b++]=c[e]}return b};ol.geom.flat.deflate.coordinates=function(a,b,c,d){var e,f;for(e=0,f=c.length;e<f;++e){var g=c[e];goog.asserts.assert(g.length==d,"length of coordinate array should match stride");var h;for(h=0;h<d;++h){a[b++]=g[h]}}return b};ol.geom.flat.deflate.coordinatess=function(a,b,c,d,e){var f=goog.isDef(e)?e:[];var g=0;var h,i;for(h=0,i=c.length;h<i;++h){var j=ol.geom.flat.deflate.coordinates(a,b,c[h],d);f[g++]=j;b=j}f.length=g;return f};ol.geom.flat.deflate.coordinatesss=function(a,b,c,d,e){var f=goog.isDef(e)?e:[];var g=0;var h,i;for(h=0,i=c.length;h<i;++h){var j=ol.geom.flat.deflate.coordinatess(a,b,c[h],d,f[g]);f[g++]=j;b=j[j.length-1]}f.length=g;return f};goog.provide("ol.geom.flat.inflate");ol.geom.flat.inflate.coordinates=function(a,b,c,d,e){var f=goog.isDef(e)?e:[];var g=0;var h;for(h=b;h<c;h+=d){f[g++]=a.slice(h,h+d)}f.length=g;return f};ol.geom.flat.inflate.coordinatess=function(a,b,c,d,e){var f=goog.isDef(e)?e:[];var g=0;var h,i;for(h=0,i=c.length;h<i;++h){var j=c[h];f[g++]=ol.geom.flat.inflate.coordinates(a,b,j,d,f[g]);b=j}f.length=g;return f};ol.geom.flat.inflate.coordinatesss=function(a,b,c,d,e){var f=goog.isDef(e)?e:[];var g=0;var h,i;for(h=0,i=c.length;h<i;++h){var j=c[h];f[g++]=ol.geom.flat.inflate.coordinatess(a,b,j,d,f[g]);b=j[j.length-1]}f.length=g;return f};goog.provide("ol.geom.flat.simplify");goog.require("ol.math");ol.geom.flat.simplify.lineString=function(a,b,c,d,e,f,g){var h=goog.isDef(g)?g:[];if(!f){c=ol.geom.flat.simplify.radialDistance(a,b,c,d,e,h,0);a=h;b=0;d=2}h.length=ol.geom.flat.simplify.douglasPeucker(a,b,c,d,e,h,0);return h};ol.geom.flat.simplify.douglasPeucker=function(a,b,c,d,e,f,g){var h=(c-b)/d;if(h<3){for(;b<c;b+=d){f[g++]=a[b];f[g++]=a[b+1]}return g}var i=new Array(h);i[0]=1;i[h-1]=1;var j=[b,c-d];var k=0;var l;while(j.length>0){var m=j.pop();var n=j.pop();var o=0;var p=a[n];var q=a[n+1];var r=a[m];var s=a[m+1];for(l=n+d;l<m;l+=d){var t=a[l];var u=a[l+1];var v=ol.math.squaredSegmentDistance(t,u,p,q,r,s);if(v>o){k=l;o=v}}if(o>e){i[(k-b)/d]=1;if(n+d<k){j.push(n,k)}if(k+d<m){j.push(k,m)}}}for(l=0;l<h;++l){if(i[l]){f[g++]=a[b+l*d];f[g++]=a[b+l*d+1]}}return g};ol.geom.flat.simplify.douglasPeuckers=function(a,b,c,d,e,f,g,h){var i,j;for(i=0,j=c.length;i<j;++i){var k=c[i];g=ol.geom.flat.simplify.douglasPeucker(a,b,k,d,e,f,g);h.push(g);b=k}return g};ol.geom.flat.simplify.douglasPeuckerss=function(a,b,c,d,e,f,g,h){var i,j;for(i=0,j=c.length;i<j;++i){var k=c[i];var l=[];g=ol.geom.flat.simplify.douglasPeuckers(a,b,k,d,e,f,g,l);h.push(l);b=k[k.length-1]}return g};ol.geom.flat.simplify.radialDistance=function(a,b,c,d,e,f,g){if(c<=b+d){for(;b<c;b+=d){f[g++]=a[b];f[g++]=a[b+1]}return g}var h=a[b];var i=a[b+1];f[g++]=h;f[g++]=i;var j=h;var k=i;for(b+=d;b<c;b+=d){j=a[b];k=a[b+1];if(ol.math.squaredDistance(h,i,j,k)>e){f[g++]=j;f[g++]=k;h=j;i=k}}if(j!=h||k!=i){f[g++]=j;f[g++]=k}return g};ol.geom.flat.simplify.snap=function(a,b){return b*Math.round(a/b)};ol.geom.flat.simplify.quantize=function(a,b,c,d,e,f,g){if(b==c){return g}var h=ol.geom.flat.simplify.snap(a[b],e);var i=ol.geom.flat.simplify.snap(a[b+1],e);b+=d;f[g++]=h;f[g++]=i;var j,k;do{j=ol.geom.flat.simplify.snap(a[b],e);k=ol.geom.flat.simplify.snap(a[b+1],e);b+=d;if(b==c){f[g++]=j;f[g++]=k;return g}
}while(j==h&&k==i);while(b<c){var l,m;l=ol.geom.flat.simplify.snap(a[b],e);m=ol.geom.flat.simplify.snap(a[b+1],e);b+=d;if(l==j&&m==k){continue}var n=j-h;var o=k-i;var p=l-h;var q=m-i;if(n*q==o*p&&(n<0&&p<n||n==p||n>0&&p>n)&&(o<0&&q<o||o==q||o>0&&q>o)){j=l;k=m;continue}f[g++]=j;f[g++]=k;h=j;i=k;j=l;k=m}f[g++]=j;f[g++]=k;return g};ol.geom.flat.simplify.quantizes=function(a,b,c,d,e,f,g,h){var i,j;for(i=0,j=c.length;i<j;++i){var k=c[i];g=ol.geom.flat.simplify.quantize(a,b,k,d,e,f,g);h.push(g);b=k}return g};ol.geom.flat.simplify.quantizess=function(a,b,c,d,e,f,g,h){var i,j;for(i=0,j=c.length;i<j;++i){var k=c[i];var l=[];g=ol.geom.flat.simplify.quantizes(a,b,k,d,e,f,g,l);h.push(l);b=k[k.length-1]}return g};goog.provide("ol.geom.LinearRing");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.area");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.simplify");ol.geom.LinearRing=function(a,b){goog.base(this);this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(a,b)};goog.inherits(ol.geom.LinearRing,ol.geom.SimpleGeometry);ol.geom.LinearRing.prototype.clone=function(){var a=new ol.geom.LinearRing(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return a};ol.geom.LinearRing.prototype.closestPointXY=function(a,b,c,d){if(d<ol.extent.closestSquaredDistanceXY(this.getExtent(),a,b)){return d}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,true,a,b,c,d)};ol.geom.LinearRing.prototype.getArea=function(){return ol.geom.flat.area.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LinearRing.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LinearRing.prototype.getSimplifiedGeometryInternal=function(a){var b=[];b.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b,0);var c=new ol.geom.LinearRing(null);c.setFlatCoordinates(ol.geom.GeometryLayout.XY,b);return c};ol.geom.LinearRing.prototype.getType=function(){return ol.geom.GeometryType.LINEAR_RING};ol.geom.LinearRing.prototype.setCoordinates=function(a,b){if(goog.isNull(a)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(b,a,1);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,a,this.stride);this.changed()}};ol.geom.LinearRing.prototype.setFlatCoordinates=function(a,b){this.setFlatCoordinatesInternal(a,b);this.changed()};goog.provide("ol.geom.Point");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.deflate");goog.require("ol.math");ol.geom.Point=function(a,b){goog.base(this);this.setCoordinates(a,b)};goog.inherits(ol.geom.Point,ol.geom.SimpleGeometry);ol.geom.Point.prototype.clone=function(){var a=new ol.geom.Point(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return a};ol.geom.Point.prototype.closestPointXY=function(a,b,c,d){var e=this.flatCoordinates;var f=ol.math.squaredDistance(a,b,e[0],e[1]);if(f<d){var g=this.stride;var h;for(h=0;h<g;++h){c[h]=e[h]}c.length=g;return f}else{return d}};ol.geom.Point.prototype.getCoordinates=function(){return goog.isNull(this.flatCoordinates)?[]:this.flatCoordinates.slice()};ol.geom.Point.prototype.computeExtent=function(a){return ol.extent.createOrUpdateFromCoordinate(this.flatCoordinates,a)};ol.geom.Point.prototype.getType=function(){return ol.geom.GeometryType.POINT};ol.geom.Point.prototype.intersectsExtent=function(a){return ol.extent.containsXY(a,this.flatCoordinates[0],this.flatCoordinates[1])};ol.geom.Point.prototype.setCoordinates=function(a,b){if(goog.isNull(a)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(b,a,0);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinate(this.flatCoordinates,0,a,this.stride);this.changed()}};ol.geom.Point.prototype.setFlatCoordinates=function(a,b){this.setFlatCoordinatesInternal(a,b);this.changed()};goog.provide("ol.geom.flat.contains");goog.require("goog.asserts");goog.require("ol.extent");ol.geom.flat.contains.linearRingContainsExtent=function(a,b,c,d,e){var f=ol.extent.forEachCorner(e,function(e){return!ol.geom.flat.contains.linearRingContainsXY(a,b,c,d,e[0],e[1])});return!f};ol.geom.flat.contains.linearRingContainsXY=function(a,b,c,d,e,f){var g=false;var h=a[c-d];var i=a[c-d+1];for(;b<c;b+=d){var j=a[b];var k=a[b+1];var l=i>f!=k>f&&e<(j-h)*(f-i)/(k-i)+h;if(l){g=!g}h=j;i=k}return g};ol.geom.flat.contains.linearRingsContainsXY=function(a,b,c,d,e,f){goog.asserts.assert(c.length>0,"ends should not be an empty array");if(c.length===0){return false}if(!ol.geom.flat.contains.linearRingContainsXY(a,b,c[0],d,e,f)){return false}var g,h;for(g=1,h=c.length;g<h;++g){if(ol.geom.flat.contains.linearRingContainsXY(a,c[g-1],c[g],d,e,f)){return false}}return true};ol.geom.flat.contains.linearRingssContainsXY=function(a,b,c,d,e,f){goog.asserts.assert(c.length>0,"endss should not be an empty array");if(c.length===0){return false}var g,h;for(g=0,h=c.length;g<h;++g){var i=c[g];if(ol.geom.flat.contains.linearRingsContainsXY(a,b,i,d,e,f)){return true}b=i[i.length-1]}return false};goog.provide("ol.geom.flat.interiorpoint");goog.require("goog.asserts");goog.require("ol.geom.flat.contains");ol.geom.flat.interiorpoint.linearRings=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n;var o=e[f+1];var p=[];var q=c[0];k=a[q-d];m=a[q-d+1];for(h=b;h<q;h+=d){l=a[h];n=a[h+1];if(o<=m&&n<=o||m<=o&&o<=n){j=(o-m)/(n-m)*(l-k)+k;p.push(j)}k=l;m=n}var r=NaN;var s=-Infinity;p.sort();k=p[0];for(h=1,i=p.length;h<i;++h){l=p[h];var t=Math.abs(l-k);if(t>s){j=(k+l)/2;if(ol.geom.flat.contains.linearRingsContainsXY(a,b,c,d,j,o)){r=j;s=t}}k=l}if(isNaN(r)){r=e[f]}if(goog.isDef(g)){g.push(r,o);return g}else{return[r,o]}};ol.geom.flat.interiorpoint.linearRingss=function(a,b,c,d,e){goog.asserts.assert(2*c.length==e.length,"endss.length times 2 should be flatCenters.length");var f=[];var g,h;for(g=0,h=c.length;g<h;++g){var i=c[g];f=ol.geom.flat.interiorpoint.linearRings(a,b,i,d,e,2*g,f);b=i[i.length-1]}return f};goog.provide("ol.geom.flat.segments");ol.geom.flat.segments.forEach=function(a,b,c,d,e,f){var g=[a[b],a[b+1]];var h=[];var i;for(;b+d<c;b+=d){h[0]=a[b+d];h[1]=a[b+d+1];i=e.call(f,g,h);if(i){return i}g[0]=h[0];g[1]=h[1]}return false};goog.provide("ol.geom.flat.intersectsextent");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.flat.contains");goog.require("ol.geom.flat.segments");ol.geom.flat.intersectsextent.lineString=function(a,b,c,d,e){var f=ol.extent.extendFlatCoordinates(ol.extent.createEmpty(),a,b,c,d);if(!ol.extent.intersects(e,f)){return false}if(ol.extent.containsExtent(e,f)){return true}if(f[0]>=e[0]&&f[2]<=e[2]){return true}if(f[1]>=e[1]&&f[3]<=e[3]){return true}return ol.geom.flat.segments.forEach(a,b,c,d,function(a,b){return ol.extent.intersectsSegment(e,a,b)})};ol.geom.flat.intersectsextent.lineStrings=function(a,b,c,d,e){var f,g;for(f=0,g=c.length;f<g;++f){if(ol.geom.flat.intersectsextent.lineString(a,b,c[f],d,e)){return true}b=c[f]}return false};ol.geom.flat.intersectsextent.linearRing=function(a,b,c,d,e){if(ol.geom.flat.intersectsextent.lineString(a,b,c,d,e)){return true}if(ol.geom.flat.contains.linearRingContainsXY(a,b,c,d,e[0],e[1])){return true}if(ol.geom.flat.contains.linearRingContainsXY(a,b,c,d,e[0],e[3])){return true}if(ol.geom.flat.contains.linearRingContainsXY(a,b,c,d,e[2],e[1])){return true}if(ol.geom.flat.contains.linearRingContainsXY(a,b,c,d,e[2],e[3])){return true}return false};ol.geom.flat.intersectsextent.linearRings=function(a,b,c,d,e){goog.asserts.assert(c.length>0,"ends should not be an empty array");if(!ol.geom.flat.intersectsextent.linearRing(a,b,c[0],d,e)){return false}if(c.length===1){return true}var f,g;for(f=1,g=c.length;f<g;++f){if(ol.geom.flat.contains.linearRingContainsExtent(a,c[f-1],c[f],d,e)){return false}}return true};ol.geom.flat.intersectsextent.linearRingss=function(a,b,c,d,e){goog.asserts.assert(c.length>0,"endss should not be an empty array");var f,g;for(f=0,g=c.length;f<g;++f){var h=c[f];if(ol.geom.flat.intersectsextent.linearRings(a,b,h,d,e)){return true}b=h[h.length-1]}return false};goog.provide("ol.geom.flat.reverse");ol.geom.flat.reverse.coordinates=function(a,b,c,d){while(b<c-d){var e;for(e=0;e<d;++e){var f=a[b+e];a[b+e]=a[c-d+e];a[c-d+e]=f}b+=d;c-=d}};goog.provide("ol.geom.flat.orient");goog.require("ol.geom.flat.reverse");ol.geom.flat.orient.linearRingIsClockwise=function(a,b,c,d){var e=0;var f=a[c-d];var g=a[c-d+1];for(;b<c;b+=d){var h=a[b];var i=a[b+1];e+=(h-f)*(i+g);f=h;g=i}return e>0};ol.geom.flat.orient.linearRingsAreOriented=function(a,b,c,d,e){var f=goog.isDef(e)?e:false;var g,h;for(g=0,h=c.length;g<h;++g){var i=c[g];var j=ol.geom.flat.orient.linearRingIsClockwise(a,b,i,d);if(g===0){if(f&&j||!f&&!j){return false}}else{if(f&&!j||!f&&j){return false}}b=i}return true};ol.geom.flat.orient.linearRingssAreOriented=function(a,b,c,d,e){var f,g;for(f=0,g=c.length;f<g;++f){if(!ol.geom.flat.orient.linearRingsAreOriented(a,b,c[f],d,e)){return false}}return true};ol.geom.flat.orient.orientLinearRings=function(a,b,c,d,e){var f=goog.isDef(e)?e:false;var g,h;for(g=0,h=c.length;g<h;++g){var i=c[g];var j=ol.geom.flat.orient.linearRingIsClockwise(a,b,i,d);var k=g===0?f&&j||!f&&!j:f&&!j||!f&&j;if(k){ol.geom.flat.reverse.coordinates(a,b,i,d)}b=i}return b};ol.geom.flat.orient.orientLinearRingss=function(a,b,c,d,e){var f,g;for(f=0,g=c.length;f<g;++f){b=ol.geom.flat.orient.orientLinearRings(a,b,c[f],d,e)}return b};goog.provide("ol.geom.Polygon");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LinearRing");goog.require("ol.geom.Point");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.area");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.contains");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interiorpoint");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.orient");goog.require("ol.geom.flat.simplify");ol.geom.Polygon=function(a,b){goog.base(this);this.ends_=[];this.flatInteriorPointRevision_=-1;this.flatInteriorPoint_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(a,b)};goog.inherits(ol.geom.Polygon,ol.geom.SimpleGeometry);ol.geom.Polygon.prototype.appendLinearRing=function(a){goog.asserts.assert(a.getLayout()==this.layout,"layout of linearRing should match layout");if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=a.getFlatCoordinates().slice()}else{goog.array.extend(this.flatCoordinates,a.getFlatCoordinates())}this.ends_.push(this.flatCoordinates.length);this.changed()};ol.geom.Polygon.prototype.clone=function(){var a=new ol.geom.Polygon(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return a};ol.geom.Polygon.prototype.closestPointXY=function(a,b,c,d){if(d<ol.extent.closestSquaredDistanceXY(this.getExtent(),a,b)){return d}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,true,a,b,c,d)};ol.geom.Polygon.prototype.containsXY=function(a,b){return ol.geom.flat.contains.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a,b)};ol.geom.Polygon.prototype.getArea=function(){return ol.geom.flat.area.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)};ol.geom.Polygon.prototype.getCoordinates=function(a){var b;if(goog.isDef(a)){b=this.getOrientedFlatCoordinates().slice();ol.geom.flat.orient.orientLinearRings(b,0,this.ends_,this.stride,a)}else{b=this.flatCoordinates}return ol.geom.flat.inflate.coordinatess(b,0,this.ends_,this.stride)};ol.geom.Polygon.prototype.getEnds=function(){return this.ends_};ol.geom.Polygon.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var a=ol.extent.getCenter(this.getExtent());this.flatInteriorPoint_=ol.geom.flat.interiorpoint.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a,0);this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_};ol.geom.Polygon.prototype.getInteriorPoint=function(){return new ol.geom.Point(this.getFlatInteriorPoint())};ol.geom.Polygon.prototype.getLinearRingCount=function(){return this.ends_.length};ol.geom.Polygon.prototype.getLinearRing=function(a){goog.asserts.assert(0<=a&&a<this.ends_.length,"index should be in between 0 and and length of this.ends_");if(a<0||this.ends_.length<=a){return null}var b=new ol.geom.LinearRing(null);b.setFlatCoordinates(this.layout,this.flatCoordinates.slice(a===0?0:this.ends_[a-1],this.ends_[a]));return b};ol.geom.Polygon.prototype.getLinearRings=function(){var a=this.layout;var b=this.flatCoordinates;var c=this.ends_;var d=[];var e=0;var f,g;for(f=0,g=c.length;f<g;++f){var h=c[f];var i=new ol.geom.LinearRing(null);i.setFlatCoordinates(a,b.slice(e,h));d.push(i);e=h}return d};ol.geom.Polygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var a=this.flatCoordinates;if(ol.geom.flat.orient.linearRingsAreOriented(a,0,this.ends_,this.stride)){this.orientedFlatCoordinates_=a}else{this.orientedFlatCoordinates_=a.slice();this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};ol.geom.Polygon.prototype.getSimplifiedGeometryInternal=function(a){var b=[];var c=[];b.length=ol.geom.flat.simplify.quantizes(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(a),b,0,c);var d=new ol.geom.Polygon(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XY,b,c);return d};ol.geom.Polygon.prototype.getType=function(){return ol.geom.GeometryType.POLYGON};ol.geom.Polygon.prototype.intersectsExtent=function(a){return ol.geom.flat.intersectsextent.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a)};ol.geom.Polygon.prototype.setCoordinates=function(a,b){if(goog.isNull(a)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_)}else{this.setLayout(b,a,2);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}var c=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,a,this.stride,this.ends_);this.flatCoordinates.length=c.length===0?0:c[c.length-1];this.changed()}};ol.geom.Polygon.prototype.setFlatCoordinates=function(a,b,c){if(goog.isNull(b)){goog.asserts.assert(!goog.isNull(c)&&c.length===0,"ends cannot be null and should be an empty array")}else if(c.length===0){goog.asserts.assert(b.length===0,"flatCoordinates should be an empty array")}else{goog.asserts.assert(b.length==c[c.length-1],"the length of flatCoordinates should be the last entry of ends")}this.setFlatCoordinatesInternal(a,b);this.ends_=c;this.changed()};ol.geom.Polygon.circular=function(a,b,c,d){var e=goog.isDef(d)?d:32;var f=[];var g;for(g=0;g<e;++g){goog.array.extend(f,a.offset(b,c,2*Math.PI*g/e))}f.push(f[0],f[1]);var h=new ol.geom.Polygon(null);h.setFlatCoordinates(ol.geom.GeometryLayout.XY,f,[f.length]);return h};ol.geom.Polygon.fromExtent=function(a){var b=a[0];var c=a[1];var d=a[2];var e=a[3];var f=[b,c,b,e,d,e,d,c,b,c];var g=new ol.geom.Polygon(null);g.setFlatCoordinates(ol.geom.GeometryLayout.XY,f,[f.length]);return g};ol.geom.Polygon.fromCircle=function(a,b,c){var d=goog.isDef(b)?b:32;var e=a.getStride();var f=a.getLayout();var g=new ol.geom.Polygon(null,f);var h=goog.array.repeat(0,e*(d+1));var i=[h.length];g.setFlatCoordinates(f,h,i);ol.geom.Polygon.makeRegular(g,a.getCenter(),a.getRadius(),c);return g};ol.geom.Polygon.makeRegular=function(a,b,c,d){var e=a.getFlatCoordinates();var f=a.getLayout();var g=a.getStride();var h=a.getEnds();goog.asserts.assert(h.length===1,"only 1 ring is supported");var i=e.length/g-1;var j=goog.isDef(d)?d:0;var k,l,m;for(var n=0;n<=i;++n){m=n*g;k=j+goog.math.modulo(n,i)*2*Math.PI/i;e[m]=b[0]+c*Math.cos(k);e[m+1]=b[1]+c*Math.sin(k)}a.setFlatCoordinates(f,e,h)};goog.provide("ol.View");goog.provide("ol.ViewHint");goog.provide("ol.ViewProperty");goog.require("goog.asserts");goog.require("ol");goog.require("ol.CenterConstraint");goog.require("ol.Constraints");goog.require("ol.Object");goog.require("ol.ResolutionConstraint");goog.require("ol.RotationConstraint");goog.require("ol.RotationConstraintType");goog.require("ol.Size");goog.require("ol.coordinate");goog.require("ol.extent");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");ol.ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};ol.ViewHint={ANIMATING:0,INTERACTING:1};ol.View=function(a){goog.base(this);var b=goog.isDef(a)?a:{};this.hints_=[0,0];var c={};c[ol.ViewProperty.CENTER]=goog.isDef(b.center)?b.center:null;this.projection_=ol.proj.createProjection(b.projection,"EPSG:3857");var d=ol.View.createResolutionConstraint_(b);this.maxResolution_=d.maxResolution;this.minResolution_=d.minResolution;this.minZoom_=d.minZoom;var e=ol.View.createCenterConstraint_(b);var f=d.constraint;var g=ol.View.createRotationConstraint_(b);this.constraints_=new ol.Constraints(e,f,g);if(goog.isDef(b.resolution)){c[ol.ViewProperty.RESOLUTION]=b.resolution}else if(goog.isDef(b.zoom)){c[ol.ViewProperty.RESOLUTION]=this.constrainResolution(this.maxResolution_,b.zoom-this.minZoom_)}c[ol.ViewProperty.ROTATION]=goog.isDef(b.rotation)?b.rotation:0;this.setProperties(c)};goog.inherits(ol.View,ol.Object);ol.View.prototype.calculateCenterRotate=function(a,b){var c;var d=this.getCenter();if(goog.isDef(d)){c=[d[0]-b[0],d[1]-b[1]];ol.coordinate.rotate(c,a-this.getRotation());ol.coordinate.add(c,b)}return c};ol.View.prototype.calculateCenterZoom=function(a,b){var c;var d=this.getCenter();var e=this.getResolution();if(goog.isDef(d)&&goog.isDef(e)){var f=b[0]-a*(b[0]-d[0])/e;var g=b[1]-a*(b[1]-d[1])/e;c=[f,g]}return c};ol.View.prototype.constrainCenter=function(a){return this.constraints_.center(a)};ol.View.prototype.constrainResolution=function(a,b,c){var d=b||0;var e=c||0;return this.constraints_.resolution(a,d,e)};ol.View.prototype.constrainRotation=function(a,b){var c=b||0;return this.constraints_.rotation(a,c)};ol.View.prototype.getCenter=function(){return this.get(ol.ViewProperty.CENTER)};ol.View.prototype.getHints=function(){return this.hints_.slice()};ol.View.prototype.calculateExtent=function(a){var b=this.getCenter();goog.asserts.assert(goog.isDefAndNotNull(b),"The view center is not defined");var c=this.getResolution();goog.asserts.assert(goog.isDef(c),"The view resolution is not defined");var d=this.getRotation();goog.asserts.assert(goog.isDef(d),"The view rotation is not defined");return ol.extent.getForViewAndSize(b,c,d,a)};ol.View.prototype.getProjection=function(){return this.projection_};ol.View.prototype.getResolution=function(){return this.get(ol.ViewProperty.RESOLUTION)};ol.View.prototype.getResolutionForExtent=function(a,b){var c=ol.extent.getWidth(a)/b[0];var d=ol.extent.getHeight(a)/b[1];return Math.max(c,d)};ol.View.prototype.getResolutionForValueFunction=function(a){var b=a||2;var c=this.maxResolution_;var d=this.minResolution_;var e=Math.log(c/d)/Math.log(b);return function(a){var f=c/Math.pow(b,a*e);goog.asserts.assert(f>=d&&f<=c,"calculated resolution outside allowed bounds (%s <= %s <= %s)",d,f,c);return f}};ol.View.prototype.getRotation=function(){return this.get(ol.ViewProperty.ROTATION)};ol.View.prototype.getValueForResolutionFunction=function(a){var b=a||2;var c=this.maxResolution_;var d=this.minResolution_;var e=Math.log(c/d)/Math.log(b);return function(a){var d=Math.log(c/a)/Math.log(b)/e;goog.asserts.assert(d>=0&&d<=1,"calculated value (%s) ouside allowed range (0-1)",d);return d}};ol.View.prototype.getState=function(){goog.asserts.assert(this.isDef(),"the view was not defined (had no center and/or resolution)");var a=this.getCenter();var b=this.getProjection();var c=this.getResolution();var d=this.getRotation();return{center:[Math.round(a[0]/c)*c,Math.round(a[1]/c)*c],projection:goog.isDef(b)?b:null,resolution:c,rotation:d}};ol.View.prototype.getZoom=function(){var a;var b=this.getResolution();if(goog.isDef(b)){var c,d=0;do{c=this.constrainResolution(this.maxResolution_,d);if(c==b){a=d;break}++d}while(c>this.minResolution_)}return goog.isDef(a)?this.minZoom_+a:a};ol.View.prototype.fit=function(a,b,c){if(!(a instanceof ol.geom.SimpleGeometry)){goog.asserts.assert(goog.isArray(a),"invalid extent or geometry");goog.asserts.assert(!ol.extent.isEmpty(a),"cannot fit empty extent");a=ol.geom.Polygon.fromExtent(a)}var d=goog.isDef(c)?c:{};var e=goog.isDef(d.padding)?d.padding:[0,0,0,0];var f=goog.isDef(d.constrainResolution)?d.constrainResolution:true;var g=goog.isDef(d.nearest)?d.nearest:false;var h;if(goog.isDef(d.minResolution)){h=d.minResolution}else if(goog.isDef(d.maxZoom)){h=this.constrainResolution(this.maxResolution_,d.maxZoom-this.minZoom_,0)}else{h=0}var i=a.getFlatCoordinates();var j=this.getRotation();goog.asserts.assert(goog.isDef(j),"rotation was not defined");var k=Math.cos(-j);var l=Math.sin(-j);var m=+Infinity;var n=+Infinity;var o=-Infinity;var p=-Infinity;var q=a.getStride();for(var r=0,s=i.length;r<s;r+=q){var t=i[r]*k-i[r+1]*l;var u=i[r]*l+i[r+1]*k;m=Math.min(m,t);n=Math.min(n,u);o=Math.max(o,t);p=Math.max(p,u)}var v=this.getResolutionForExtent([m,n,o,p],[b[0]-e[1]-e[3],b[1]-e[0]-e[2]]);v=isNaN(v)?h:Math.max(v,h);if(f){var w=this.constrainResolution(v,0,0);if(!g&&w<v){w=this.constrainResolution(w,-1,0)}v=w}this.setResolution(v);l=-l;var x=(m+o)/2;var y=(n+p)/2;x+=(e[1]-e[3])/2*v;y+=(e[0]-e[2])/2*v;var z=x*k-y*l;var A=y*k+x*l;this.setCenter([z,A])};ol.View.prototype.centerOn=function(a,b,c){var d=this.getRotation();var e=Math.cos(-d);var f=Math.sin(-d);var g=a[0]*e-a[1]*f;var h=a[1]*e+a[0]*f;var i=this.getResolution();g+=(b[0]/2-c[0])*i;h+=(c[1]-b[1]/2)*i;f=-f;var j=g*e-h*f;var k=h*e+g*f;this.setCenter([j,k])};ol.View.prototype.isDef=function(){return goog.isDefAndNotNull(this.getCenter())&&goog.isDef(this.getResolution())};ol.View.prototype.rotate=function(a,b){if(goog.isDef(b)){var c=this.calculateCenterRotate(a,b);this.setCenter(c)}this.setRotation(a)};ol.View.prototype.setCenter=function(a){this.set(ol.ViewProperty.CENTER,a)};ol.View.prototype.setHint=function(a,b){goog.asserts.assert(0<=a&&a<this.hints_.length,"illegal hint (%s), must be between 0 and %s",a,this.hints_.length);this.hints_[a]+=b;goog.asserts.assert(this.hints_[a]>=0,"Hint at %s must be positive, was %s",a,this.hints_[a]);return this.hints_[a]};ol.View.prototype.setResolution=function(a){this.set(ol.ViewProperty.RESOLUTION,a)};ol.View.prototype.setRotation=function(a){this.set(ol.ViewProperty.ROTATION,a)};ol.View.prototype.setZoom=function(a){var b=this.constrainResolution(this.maxResolution_,a-this.minZoom_,0);this.setResolution(b)};ol.View.createCenterConstraint_=function(a){if(goog.isDef(a.extent)){return ol.CenterConstraint.createExtent(a.extent)}else{return ol.CenterConstraint.none}};ol.View.createResolutionConstraint_=function(a){var b;var c;var d;var e=28;var f=2;var g=goog.isDef(a.minZoom)?a.minZoom:ol.DEFAULT_MIN_ZOOM;var h=goog.isDef(a.maxZoom)?a.maxZoom:e;var i=goog.isDef(a.zoomFactor)?a.zoomFactor:f;if(goog.isDef(a.resolutions)){var j=a.resolutions;c=j[0];d=j[j.length-1];b=ol.ResolutionConstraint.createSnapToResolutions(j)}else{var k=ol.proj.createProjection(a.projection,"EPSG:3857");var l=k.getExtent();var m=goog.isNull(l)?360*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/ol.proj.METERS_PER_UNIT[k.getUnits()]:Math.max(ol.extent.getWidth(l),ol.extent.getHeight(l));var n=m/ol.DEFAULT_TILE_SIZE/Math.pow(f,ol.DEFAULT_MIN_ZOOM);var o=n/Math.pow(f,e-ol.DEFAULT_MIN_ZOOM);c=a.maxResolution;if(goog.isDef(c)){g=0}else{c=n/Math.pow(i,g)}d=a.minResolution;if(!goog.isDef(d)){if(goog.isDef(a.maxZoom)){if(goog.isDef(a.maxResolution)){d=c/Math.pow(i,h)}else{d=n/Math.pow(i,h)}}else{d=o}}h=g+Math.floor(Math.log(c/d)/Math.log(i));d=c/Math.pow(i,h-g);b=ol.ResolutionConstraint.createSnapToPower(i,c,h-g)}return{constraint:b,maxResolution:c,minResolution:d,minZoom:g}};ol.View.createRotationConstraint_=function(a){var b=goog.isDef(a.enableRotation)?a.enableRotation:true;if(b){var c=a.constrainRotation;if(!goog.isDef(c)||c===true){return ol.RotationConstraint.createSnapToZero()}else if(c===false){return ol.RotationConstraint.none}else if(goog.isNumber(c)){return ol.RotationConstraint.createSnapToN(c)}else{goog.asserts.fail("illegal option for constrainRotation (%s)",c);return ol.RotationConstraint.none}}else{return ol.RotationConstraint.disable}};goog.provide("goog.fx.easing");goog.fx.easing.easeIn=function(a){return goog.fx.easing.easeInInternal_(a,3)};goog.fx.easing.easeInInternal_=function(a,b){return Math.pow(a,b)};goog.fx.easing.easeOut=function(a){return goog.fx.easing.easeOutInternal_(a,3)};goog.fx.easing.easeOutInternal_=function(a,b){return 1-goog.fx.easing.easeInInternal_(1-a,b)};goog.fx.easing.easeOutLong=function(a){return goog.fx.easing.easeOutInternal_(a,4)};goog.fx.easing.inAndOut=function(a){return 3*a*a-2*a*a*a};goog.provide("ol.easing");goog.require("goog.fx.easing");ol.easing.easeIn=goog.fx.easing.easeIn;ol.easing.easeOut=goog.fx.easing.easeOut;ol.easing.inAndOut=goog.fx.easing.inAndOut;ol.easing.linear=function(a){return a};ol.easing.upAndDown=function(a){if(a<.5){return ol.easing.inAndOut(2*a)}else{return 1-ol.easing.inAndOut(2*(a-.5))}};goog.provide("ol.animation");goog.require("ol.PreRenderFunction");goog.require("ol.ViewHint");goog.require("ol.coordinate");goog.require("ol.easing");ol.animation.bounce=function(a){var b=a.resolution;var c=goog.isDef(a.start)?a.start:goog.now();var d=goog.isDef(a.duration)?a.duration:1e3;var e=goog.isDef(a.easing)?a.easing:ol.easing.upAndDown;return function(a,f){if(f.time<c){f.animate=true;f.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else if(f.time<c+d){var g=e((f.time-c)/d);var h=b-f.viewState.resolution;f.animate=true;f.viewState.resolution+=g*h;f.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}};ol.animation.pan=function(a){var b=a.source;var c=goog.isDef(a.start)?a.start:goog.now();var d=b[0];var e=b[1];var f=goog.isDef(a.duration)?a.duration:1e3;var g=goog.isDef(a.easing)?a.easing:ol.easing.inAndOut;return function(a,b){if(b.time<c){b.animate=true;b.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else if(b.time<c+f){var h=1-g((b.time-c)/f);var i=d-b.viewState.center[0];var j=e-b.viewState.center[1];b.animate=true;b.viewState.center[0]+=h*i;b.viewState.center[1]+=h*j;b.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}};ol.animation.rotate=function(a){var b=goog.isDef(a.rotation)?a.rotation:0;var c=goog.isDef(a.start)?a.start:goog.now();var d=goog.isDef(a.duration)?a.duration:1e3;var e=goog.isDef(a.easing)?a.easing:ol.easing.inAndOut;var f=goog.isDef(a.anchor)?a.anchor:null;return function(a,g){if(g.time<c){g.animate=true;g.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else if(g.time<c+d){var h=1-e((g.time-c)/d);var i=(b-g.viewState.rotation)*h;g.animate=true;g.viewState.rotation+=i;if(!goog.isNull(f)){var j=g.viewState.center;ol.coordinate.sub(j,f);ol.coordinate.rotate(j,i);ol.coordinate.add(j,f)}g.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}};ol.animation.zoom=function(a){var b=a.resolution;var c=goog.isDef(a.start)?a.start:goog.now();var d=goog.isDef(a.duration)?a.duration:1e3;var e=goog.isDef(a.easing)?a.easing:ol.easing.inAndOut;return function(a,f){if(f.time<c){f.animate=true;f.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else if(f.time<c+d){var g=1-e((f.time-c)/d);var h=b-f.viewState.resolution;f.animate=true;f.viewState.resolution+=g*h;f.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}};goog.provide("ol.TileCoord");goog.provide("ol.tilecoord");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.extent");ol.TileCoord;ol.QuadKeyCharCode={ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0)};ol.tilecoord.createFromString=function(a){var b=a.split("/");goog.asserts.assert(b.length===3,'must provide a string in "z/x/y" format, got "%s"',a);b=goog.array.map(b,function(a,b,c){return parseInt(a,10)});return b};ol.tilecoord.createOrUpdate=function(a,b,c,d){if(goog.isDef(d)){d[0]=a;d[1]=b;d[2]=c;return d}else{return[a,b,c]}};ol.tilecoord.getKeyZXY=function(a,b,c){return a+"/"+b+"/"+c};ol.tilecoord.hash=function(a){return(a[1]<<a[0])+a[2]};ol.tilecoord.quadKey=function(a){var b=a[0];var c=new Array(b);var d=1<<b-1;var e,f;for(e=0;e<b;++e){f=ol.QuadKeyCharCode.ZERO;if(a[1]&d){f+=1}if(a[2]&d){f+=2}c[e]=String.fromCharCode(f);d>>=1}return c.join("")};ol.tilecoord.toString=function(a){return ol.tilecoord.getKeyZXY(a[0],a[1],a[2])};ol.tilecoord.wrapX=function(a,b,c){var d=a[0];var e=b.getTileCoordCenter(a);var f=ol.tilegrid.extentFromProjection(c);if(!ol.extent.containsCoordinate(f,e)){var g=ol.extent.getWidth(f);var h=Math.ceil((f[0]-e[0])/g);e[0]+=g*h;return b.getTileCoordForCoordAndZ(e,d)}else{return a}};ol.tilecoord.withinExtentAndZ=function(a,b){var c=a[0];var d=a[1];var e=a[2];if(b.getMinZoom()>c||c>b.getMaxZoom()){return false}var f=b.getExtent();var g;if(goog.isNull(f)){g=b.getFullTileRange(c)}else{g=b.getTileRangeForExtentAndZ(f,c)}if(goog.isNull(g)){return true}else{return g.containsXY(d,e)}};goog.provide("ol.TileRange");goog.require("goog.asserts");goog.require("ol.Size");goog.require("ol.TileCoord");ol.TileRange=function(a,b,c,d){this.minX=a;this.maxX=b;this.minY=c;this.maxY=d};ol.TileRange.boundingTileRange=function(a){var b=arguments[0];var c=b[0];var d=b[1];var e=b[2];var f=new ol.TileRange(d,d,e,e);var g,h,i,j,k,l;for(g=1,h=arguments.length;g<h;++g){i=arguments[g];l=i[0];j=i[1];k=i[2];goog.asserts.assert(l==c,"passed tilecoords all have the same Z-value");f.minX=Math.min(f.minX,j);f.maxX=Math.max(f.maxX,j);f.minY=Math.min(f.minY,k);f.maxY=Math.max(f.maxY,k)}return f};ol.TileRange.createOrUpdate=function(a,b,c,d,e){if(goog.isDef(e)){e.minX=a;e.maxX=b;e.minY=c;e.maxY=d;return e}else{return new ol.TileRange(a,b,c,d)}};ol.TileRange.prototype.contains=function(a){return this.containsXY(a[1],a[2])};ol.TileRange.prototype.containsTileRange=function(a){return this.minX<=a.minX&&a.maxX<=this.maxX&&this.minY<=a.minY&&a.maxY<=this.maxY};ol.TileRange.prototype.containsXY=function(a,b){return this.minX<=a&&a<=this.maxX&&this.minY<=b&&b<=this.maxY};ol.TileRange.prototype.equals=function(a){return this.minX==a.minX&&this.minY==a.minY&&this.maxX==a.maxX&&this.maxY==a.maxY};ol.TileRange.prototype.extend=function(a){if(a.minX<this.minX){this.minX=a.minX}if(a.maxX>this.maxX){this.maxX=a.maxX}if(a.minY<this.minY){this.minY=a.minY}if(a.maxY>this.maxY){this.maxY=a.maxY}};ol.TileRange.prototype.getHeight=function(){return this.maxY-this.minY+1};ol.TileRange.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]}
;ol.TileRange.prototype.getWidth=function(){return this.maxX-this.minX+1};ol.TileRange.prototype.intersects=function(a){return this.minX<=a.maxX&&this.maxX>=a.minX&&this.minY<=a.maxY&&this.maxY>=a.minY};goog.provide("ol.Attribution");goog.require("goog.math");goog.require("ol.TileRange");ol.Attribution=function(a){this.html_=a.html;this.tileRanges_=goog.isDef(a.tileRanges)?a.tileRanges:null};ol.Attribution.prototype.getHTML=function(){return this.html_};ol.Attribution.prototype.intersectsAnyTileRange=function(a,b,c){if(goog.isNull(this.tileRanges_)){return true}var d,e,f,g;for(g in a){if(!(g in this.tileRanges_)){continue}f=a[g];var h;for(d=0,e=this.tileRanges_[g].length;d<e;++d){h=this.tileRanges_[g][d];if(h.intersects(f)){return true}var i=b.getTileRangeForExtentAndZ(c.getExtent(),parseInt(g,10));var j=i.getWidth();if(f.minX<i.minX||f.maxX>i.maxX){if(h.intersects(new ol.TileRange(goog.math.modulo(f.minX,j),goog.math.modulo(f.maxX,j),f.minY,f.maxY))){return true}if(f.getWidth()>j&&h.intersects(i)){return true}}}}return false};goog.provide("ol.CanvasFunctionType");ol.CanvasFunctionType;goog.provide("ol.Collection");goog.provide("ol.CollectionEvent");goog.provide("ol.CollectionEventType");goog.require("goog.array");goog.require("goog.events.Event");goog.require("ol.Object");ol.CollectionEventType={ADD:"add",REMOVE:"remove"};ol.CollectionEvent=function(a,b,c){goog.base(this,a,c);this.element=b};goog.inherits(ol.CollectionEvent,goog.events.Event);ol.CollectionProperty={LENGTH:"length"};ol.Collection=function(a){goog.base(this);this.array_=goog.isDef(a)?a:[];this.updateLength_()};goog.inherits(ol.Collection,ol.Object);ol.Collection.prototype.clear=function(){while(this.getLength()>0){this.pop()}};ol.Collection.prototype.extend=function(a){var b,c;for(b=0,c=a.length;b<c;++b){this.push(a[b])}return this};ol.Collection.prototype.forEach=function(a,b){goog.array.forEach(this.array_,a,b)};ol.Collection.prototype.getArray=function(){return this.array_};ol.Collection.prototype.item=function(a){return this.array_[a]};ol.Collection.prototype.getLength=function(){return this.get(ol.CollectionProperty.LENGTH)};ol.Collection.prototype.insertAt=function(a,b){goog.array.insertAt(this.array_,b,a);this.updateLength_();this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.ADD,b,this))};ol.Collection.prototype.pop=function(){return this.removeAt(this.getLength()-1)};ol.Collection.prototype.push=function(a){var b=this.array_.length;this.insertAt(b,a);return b};ol.Collection.prototype.remove=function(a){var b=this.array_;var c,d;for(c=0,d=b.length;c<d;++c){if(b[c]===a){return this.removeAt(c)}}return undefined};ol.Collection.prototype.removeAt=function(a){var b=this.array_[a];goog.array.removeAt(this.array_,a);this.updateLength_();this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.REMOVE,b,this));return b};ol.Collection.prototype.setAt=function(a,b){var c=this.getLength();if(a<c){var d=this.array_[a];this.array_[a]=b;this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.REMOVE,d,this));this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.ADD,b,this))}else{var e;for(e=c;e<a;++e){this.insertAt(e,undefined)}this.insertAt(a,b)}};ol.Collection.prototype.updateLength_=function(){this.set(ol.CollectionProperty.LENGTH,this.array_.length)};goog.provide("goog.color.names");goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.provide("goog.color");goog.provide("goog.color.Hsl");goog.provide("goog.color.Hsv");goog.provide("goog.color.Rgb");goog.require("goog.color.names");goog.require("goog.math");goog.color.Rgb;goog.color.Hsv;goog.color.Hsl;goog.color.parse=function(a){var b={};a=String(a);var c=goog.color.prependHashIfNecessaryHelper(a);if(goog.color.isValidHexColor_(c)){b.hex=goog.color.normalizeHex(c);b.type="hex";return b}else{var d=goog.color.isValidRgbColor_(a);if(d.length){b.hex=goog.color.rgbArrayToHex(d);b.type="rgb";return b}else if(goog.color.names){var e=goog.color.names[a.toLowerCase()];if(e){b.hex=e;b.type="named";return b}}}throw Error(a+" is not a valid color string")};goog.color.isValidColor=function(a){var b=goog.color.prependHashIfNecessaryHelper(a);return!!(goog.color.isValidHexColor_(b)||goog.color.isValidRgbColor_(a).length||goog.color.names&&goog.color.names[a.toLowerCase()])};goog.color.parseRgb=function(a){var b=goog.color.isValidRgbColor_(a);if(!b.length){throw Error(a+" is not a valid RGB color")}return b};goog.color.hexToRgbStyle=function(a){return goog.color.rgbStyle_(goog.color.hexToRgb(a))};goog.color.hexTripletRe_=/#(.)(.)(.)/;goog.color.normalizeHex=function(a){if(!goog.color.isValidHexColor_(a)){throw Error("'"+a+"' is not a valid hex color")}if(a.length==4){a=a.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3")}return a.toLowerCase()};goog.color.hexToRgb=function(a){a=goog.color.normalizeHex(a);var b=parseInt(a.substr(1,2),16);var c=parseInt(a.substr(3,2),16);var d=parseInt(a.substr(5,2),16);return[b,c,d]};goog.color.rgbToHex=function(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(isNaN(a)||a<0||a>255||isNaN(b)||b<0||b>255||isNaN(c)||c<0||c>255){throw Error('"('+a+","+b+","+c+'") is not a valid RGB color')}var d=goog.color.prependZeroIfNecessaryHelper(a.toString(16));var e=goog.color.prependZeroIfNecessaryHelper(b.toString(16));var f=goog.color.prependZeroIfNecessaryHelper(c.toString(16));return"#"+d+e+f};goog.color.rgbArrayToHex=function(a){return goog.color.rgbToHex(a[0],a[1],a[2])};goog.color.rgbToHsl=function(a,b,c){var d=a/255;var e=b/255;var f=c/255;var g=Math.max(d,e,f);var h=Math.min(d,e,f);var i=0;var j=0;var k=.5*(g+h);if(g!=h){if(g==d){i=60*(e-f)/(g-h)}else if(g==e){i=60*(f-d)/(g-h)+120}else if(g==f){i=60*(d-e)/(g-h)+240}if(0<k&&k<=.5){j=(g-h)/(2*k)}else{j=(g-h)/(2-2*k)}}return[Math.round(i+360)%360,j,k]};goog.color.rgbArrayToHsl=function(a){return goog.color.rgbToHsl(a[0],a[1],a[2])};goog.color.hueToRgb_=function(a,b,c){if(c<0){c+=1}else if(c>1){c-=1}if(6*c<1){return a+(b-a)*6*c}else if(2*c<1){return b}else if(3*c<2){return a+(b-a)*(2/3-c)*6}return a};goog.color.hslToRgb=function(a,b,c){var d=0;var e=0;var f=0;var g=a/360;if(b==0){d=e=f=c*255}else{var h=0;var i=0;if(c<.5){i=c*(1+b)}else{i=c+b-b*c}h=2*c-i;d=255*goog.color.hueToRgb_(h,i,g+1/3);e=255*goog.color.hueToRgb_(h,i,g);f=255*goog.color.hueToRgb_(h,i,g-1/3)}return[Math.round(d),Math.round(e),Math.round(f)]};goog.color.hslArrayToRgb=function(a){return goog.color.hslToRgb(a[0],a[1],a[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(a){return goog.color.validHexColorRe_.test(a)};goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/;goog.color.isNormalizedHexColor_=function(a){return goog.color.normalizedHexColorRe_.test(a)};goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(a){var b=a.match(goog.color.rgbColorRe_);if(b){var c=Number(b[1]);var d=Number(b[2]);var e=Number(b[3]);if(c>=0&&c<=255&&d>=0&&d<=255&&e>=0&&e<=255){return[c,d,e]}}return[]};goog.color.prependZeroIfNecessaryHelper=function(a){return a.length==1?"0"+a:a};goog.color.prependHashIfNecessaryHelper=function(a){return a.charAt(0)=="#"?a:"#"+a};goog.color.rgbStyle_=function(a){return"rgb("+a.join(",")+")"};goog.color.hsvToRgb=function(a,b,c){var d=0;var e=0;var f=0;if(b==0){d=c;e=c;f=c}else{var g=Math.floor(a/60);var h=a/60-g;var i=c*(1-b);var j=c*(1-b*h);var k=c*(1-b*(1-h));switch(g){case 1:d=j;e=c;f=i;break;case 2:d=i;e=c;f=k;break;case 3:d=i;e=j;f=c;break;case 4:d=k;e=i;f=c;break;case 5:d=c;e=i;f=j;break;case 6:case 0:d=c;e=k;f=i;break}}return[Math.floor(d),Math.floor(e),Math.floor(f)]};goog.color.rgbToHsv=function(a,b,c){var d=Math.max(Math.max(a,b),c);var e=Math.min(Math.min(a,b),c);var f;var g;var h=d;if(e==d){f=0;g=0}else{var i=d-e;g=i/d;if(a==d){f=(b-c)/i}else if(b==d){f=2+(c-a)/i}else{f=4+(a-b)/i}f*=60;if(f<0){f+=360}if(f>360){f-=360}}return[f,g,h]};goog.color.rgbArrayToHsv=function(a){return goog.color.rgbToHsv(a[0],a[1],a[2])};goog.color.hsvArrayToRgb=function(a){return goog.color.hsvToRgb(a[0],a[1],a[2])};goog.color.hexToHsl=function(a){var b=goog.color.hexToRgb(a);return goog.color.rgbToHsl(b[0],b[1],b[2])};goog.color.hslToHex=function(a,b,c){return goog.color.rgbArrayToHex(goog.color.hslToRgb(a,b,c))};goog.color.hslArrayToHex=function(a){return goog.color.rgbArrayToHex(goog.color.hslToRgb(a[0],a[1],a[2]))};goog.color.hexToHsv=function(a){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(a))};goog.color.hsvToHex=function(a,b,c){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(a,b,c))};goog.color.hsvArrayToHex=function(a){return goog.color.hsvToHex(a[0],a[1],a[2])};goog.color.hslDistance=function(a,b){var c,d;if(a[2]<=.5){c=a[1]*a[2]}else{c=a[1]*(1-a[2])}if(b[2]<=.5){d=b[1]*b[2]}else{d=b[1]*(1-b[2])}var e=a[0]/360;var f=b[0]/360;var g=(e-f)*2*Math.PI;return(a[2]-b[2])*(a[2]-b[2])+c*c+d*d-2*c*d*Math.cos(g)};goog.color.blend=function(a,b,c){c=goog.math.clamp(c,0,1);return[Math.round(c*a[0]+(1-c)*b[0]),Math.round(c*a[1]+(1-c)*b[1]),Math.round(c*a[2]+(1-c)*b[2])]};goog.color.darken=function(a,b){var c=[0,0,0];return goog.color.blend(c,a,b)};goog.color.lighten=function(a,b){var c=[255,255,255];return goog.color.blend(c,a,b)};goog.color.highContrast=function(a,b){var c=[];for(var d=0;d<b.length;d++){c.push({color:b[d],diff:goog.color.yiqBrightnessDiff_(b[d],a)+goog.color.colorDiff_(b[d],a)})}c.sort(function(a,b){return b.diff-a.diff});return c[0].color};goog.color.yiqBrightness_=function(a){return Math.round((a[0]*299+a[1]*587+a[2]*114)/1e3)};goog.color.yiqBrightnessDiff_=function(a,b){return Math.abs(goog.color.yiqBrightness_(a)-goog.color.yiqBrightness_(b))};goog.color.colorDiff_=function(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])};goog.provide("ol.Color");goog.provide("ol.color");goog.require("goog.asserts");goog.require("goog.color");goog.require("goog.color.names");goog.require("goog.math");goog.require("goog.vec.Mat4");goog.require("ol");ol.Color;ol.color.hexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;ol.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;ol.color.rgbaColorRe_=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i;ol.color.blend=function(a,b,c){var d=goog.isDef(c)?c:[];var e=a[3];var f=b[3];if(e==1){d[0]=b[0]*f+a[0]*(1-f)+.5|0;d[1]=b[1]*f+a[1]*(1-f)+.5|0;d[2]=b[2]*f+a[2]*(1-f)+.5|0;d[3]=1}else if(f===0){d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=e}else{var g=f+e*(1-f);if(g===0){d[0]=0;d[1]=0;d[2]=0;d[3]=0}else{d[0]=(b[0]*f+a[0]*e*(1-f))/g+.5|0;d[1]=(b[1]*f+a[1]*e*(1-f))/g+.5|0;d[2]=(b[2]*f+a[2]*e*(1-f))/g+.5|0;d[3]=g}}goog.asserts.assert(ol.color.isValid(d),"Output color of blend should be a valid color");return d};ol.color.asArray=function(a){if(goog.isArray(a)){return a}else{goog.asserts.assert(goog.isString(a),"Color should be a string");return ol.color.fromString(a)}};ol.color.asString=function(a){if(goog.isString(a)){return a}else{goog.asserts.assert(goog.isArray(a),"Color should be an array");return ol.color.toString(a)}};ol.color.equals=function(a,b){return a===b||a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]};ol.color.fromString=function(){var a=1024;var b={};var c=0;return function(d){var e;if(b.hasOwnProperty(d)){e=b[d]}else{if(c>=a){var f=0;var g;for(g in b){if((f++&3)===0){delete b[g];--c}}}e=ol.color.fromStringInternal_(d);b[d]=e;++c}return e}}();ol.color.fromStringInternal_=function(a){var b=false;if(ol.ENABLE_NAMED_COLORS&&goog.color.names.hasOwnProperty(a)){a=goog.color.names[a];b=true}var c,d,e,f,g,h;if(b||(h=ol.color.hexColorRe_.exec(a))){var i=a.length-1;goog.asserts.assert(i==3||i==6,"Color string length should be 3 or 6");var j=i==3?1:2;c=parseInt(a.substr(1+0*j,j),16);d=parseInt(a.substr(1+1*j,j),16);e=parseInt(a.substr(1+2*j,j),16);if(j==1){c=(c<<4)+c;d=(d<<4)+d;e=(e<<4)+e}f=1;g=[c,d,e,f];goog.asserts.assert(ol.color.isValid(g),"Color should be a valid color");return g}else if(h=ol.color.rgbaColorRe_.exec(a)){c=Number(h[1]);d=Number(h[2]);e=Number(h[3]);f=Number(h[4]);g=[c,d,e,f];return ol.color.normalize(g,g)}else if(h=ol.color.rgbColorRe_.exec(a)){c=Number(h[1]);d=Number(h[2]);e=Number(h[3]);g=[c,d,e,1];return ol.color.normalize(g,g)}else{goog.asserts.fail(a+" is not a valid color")}};ol.color.isValid=function(a){return 0<=a[0]&&a[0]<256&&0<=a[1]&&a[1]<256&&0<=a[2]&&a[2]<256&&0<=a[3]&&a[3]<=1};ol.color.normalize=function(a,b){var c=goog.isDef(b)?b:[];c[0]=goog.math.clamp(a[0]+.5|0,0,255);c[1]=goog.math.clamp(a[1]+.5|0,0,255);c[2]=goog.math.clamp(a[2]+.5|0,0,255);c[3]=goog.math.clamp(a[3],0,1);return c};ol.color.toString=function(a){var b=a[0];if(b!=(b|0)){b=b+.5|0}var c=a[1];if(c!=(c|0)){c=c+.5|0}var d=a[2];if(d!=(d|0)){d=d+.5|0}var e=a[3];return"rgba("+b+","+c+","+d+","+e+")"};ol.color.transform=function(a,b,c){var d=goog.isDef(c)?c:[];d=goog.vec.Mat4.multVec3(b,a,d);goog.asserts.assert(goog.isArray(d),"result should be an array");d[3]=a[3];return ol.color.normalize(d,d)};ol.color.stringOrColorEquals=function(a,b){if(a===b||a==b){return true}if(goog.isString(a)){a=ol.color.fromString(a)}if(goog.isString(b)){b=ol.color.fromString(b)}return ol.color.equals(a,b)};goog.provide("ol.color.Matrix");goog.require("goog.vec.Mat4");ol.color.Matrix=function(){this.colorMatrix_=goog.vec.Mat4.createNumber();this.brightness_=undefined;this.brightnessMatrix_=goog.vec.Mat4.createNumber();this.contrast_=undefined;this.contrastMatrix_=goog.vec.Mat4.createNumber();this.hue_=undefined;this.hueMatrix_=goog.vec.Mat4.createNumber();this.saturation_=undefined;this.saturationMatrix_=goog.vec.Mat4.createNumber()};ol.color.Matrix.makeBrightness=function(a,b){goog.vec.Mat4.makeTranslate(a,b,b,b);return a};ol.color.Matrix.makeContrast=function(a,b){goog.vec.Mat4.makeScale(a,b,b,b);var c=-.5*b+.5;goog.vec.Mat4.setColumnValues(a,3,c,c,c,1);return a};ol.color.Matrix.makeHue=function(a,b){var c=Math.cos(b);var d=Math.sin(b);var e=.213+c*.787-d*.213;var f=.715-c*.715-d*.715;var g=.072-c*.072+d*.928;var h=0;var i=.213-c*.213+d*.143;var j=.715+c*.285+d*.14;var k=.072-c*.072-d*.283;var l=0;var m=.213-c*.213-d*.787;var n=.715-c*.715+d*.715;var o=.072+c*.928+d*.072;var p=0;var q=0;var r=0;var s=0;var t=1;goog.vec.Mat4.setFromValues(a,e,i,m,q,f,j,n,r,g,k,o,s,h,l,p,t);return a};ol.color.Matrix.makeSaturation=function(a,b){var c=.213+.787*b;var d=.715-.715*b;var e=.072-.072*b;var f=0;var g=.213-.213*b;var h=.715+.285*b;var i=.072-.072*b;var j=0;var k=.213-.213*b;var l=.715-.715*b;var m=.072+.928*b;var n=0;var o=0;var p=0;var q=0;var r=1;goog.vec.Mat4.setFromValues(a,c,g,k,o,d,h,l,p,e,i,m,q,f,j,n,r);return a};ol.color.Matrix.prototype.getMatrix=function(a,b,c,d){var e=false;if(goog.isDef(a)&&a!==this.brightness_){ol.color.Matrix.makeBrightness(this.brightnessMatrix_,a);this.brightness_=a;e=true}if(goog.isDef(b)&&b!==this.contrast_){ol.color.Matrix.makeContrast(this.contrastMatrix_,b);this.contrast_=b;e=true}if(goog.isDef(c)&&c!==this.hue_){ol.color.Matrix.makeHue(this.hueMatrix_,c);this.hue_=c;e=true}if(goog.isDef(d)&&d!==this.saturation_){ol.color.Matrix.makeSaturation(this.saturationMatrix_,d);this.saturation_=d;e=true}if(e){var f=this.colorMatrix_;goog.vec.Mat4.makeIdentity(f);if(goog.isDef(b)){goog.vec.Mat4.multMat(f,this.contrastMatrix_,f)}if(goog.isDef(a)){goog.vec.Mat4.multMat(f,this.brightnessMatrix_,f)}if(goog.isDef(d)){goog.vec.Mat4.multMat(f,this.saturationMatrix_,f)}if(goog.isDef(c)){goog.vec.Mat4.multMat(f,this.hueMatrix_,f)}}return this.colorMatrix_};goog.provide("goog.dom.BrowserFeature");goog.require("goog.userAgent");goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE,LEGACY_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)};goog.provide("goog.dom.TagName");goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEMPLATE:"TEMPLATE",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"};goog.provide("goog.dom.tags");goog.require("goog.object");goog.dom.tags.VOID_TAGS_=goog.object.createSet("area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr");goog.dom.tags.isVoidTag=function(a){return goog.dom.tags.VOID_TAGS_[a]===true};goog.provide("goog.string.TypedString");goog.string.TypedString=function(){};goog.string.TypedString.prototype.implementsGoogStringTypedString;goog.string.TypedString.prototype.getTypedStringValue;goog.provide("goog.string.Const");goog.require("goog.asserts");goog.require("goog.string.TypedString");goog.string.Const=function(){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_="";this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_};goog.string.Const.prototype.implementsGoogStringTypedString=true;goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_};goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"};goog.string.Const.unwrap=function(a){if(a instanceof goog.string.Const&&a.constructor===goog.string.Const&&a.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_){return a.stringConstValueWithSecurityContract__googStringSecurityPrivate_}else{goog.asserts.fail("expected object of type Const, got '"+a+"'");return"type_error:Const"}};goog.string.Const.from=function(a){return goog.string.Const.create__googStringSecurityPrivate_(a)};goog.string.Const.TYPE_MARKER_={};goog.string.Const.create__googStringSecurityPrivate_=function(a){var b=new goog.string.Const;b.stringConstValueWithSecurityContract__googStringSecurityPrivate_=a;return b};goog.provide("goog.html.SafeStyle");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="";this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyle.prototype.implementsGoogStringTypedString=true;goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeStyle.fromConstant=function(a){var b=goog.string.Const.unwrap(a);if(b.length===0){return goog.html.SafeStyle.EMPTY}goog.html.SafeStyle.checkStyle_(b);goog.asserts.assert(goog.string.endsWith(b,";"),"Last character of style string is not ';': "+b);goog.asserts.assert(goog.string.contains(b,":"),"Style string must contain at least one ':', to "+'specify a "name: value" pair: '+b);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(b)};goog.html.SafeStyle.checkStyle_=function(a){goog.asserts.assert(!/[<>]/.test(a),"Forbidden characters in style string: "+a)};goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_};if(goog.DEBUG){goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}}goog.html.SafeStyle.unwrap=function(a){if(a instanceof goog.html.SafeStyle&&a.constructor===goog.html.SafeStyle&&a.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return a.privateDoNotAccessOrElseSafeStyleWrappedValue_}else{goog.asserts.fail("expected object of type SafeStyle, got '"+a+"'");return"type_error:SafeStyle"}};goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(a){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(a)};goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(a){this.privateDoNotAccessOrElseSafeStyleWrappedValue_=a;return this};goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse("");goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez";goog.html.SafeStyle.PropertyMap;goog.html.SafeStyle.create=function(a){var b="";for(var c in a){if(!/^[-_a-zA-Z0-9]+$/.test(c)){throw Error("Name allows only [-_a-zA-Z0-9], got: "+c)}var d=a[c];if(d==null){continue}if(d instanceof goog.string.Const){d=goog.string.Const.unwrap(d);goog.asserts.assert(!/[{;}]/.test(d),"Value does not allow [{;}].")}else if(!goog.html.SafeStyle.VALUE_RE_.test(d)){goog.asserts.fail("String value allows only [-,.\"'%_!# a-zA-Z0-9], got: "+d);d=goog.html.SafeStyle.INNOCUOUS_STRING}else if(!goog.html.SafeStyle.hasBalancedQuotes_(d)){goog.asserts.fail("String value requires balanced quotes, got: "+d);d=goog.html.SafeStyle.INNOCUOUS_STRING}b+=c+":"+d+";"}if(!b){return goog.html.SafeStyle.EMPTY}goog.html.SafeStyle.checkStyle_(b);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(b)};goog.html.SafeStyle.hasBalancedQuotes_=function(a){var b=true;var c=true;for(var d=0;d<a.length;d++){var e=a.charAt(d);if(e=="'"&&c){b=!b}else if(e=='"'&&b){c=!c}}return b&&c};goog.html.SafeStyle.VALUE_RE_=/^[-,."'%_!# a-zA-Z0-9]+$/;goog.html.SafeStyle.concat=function(a){var b="";var c=function(a){if(goog.isArray(a)){goog.array.forEach(a,c)}else{b+=goog.html.SafeStyle.unwrap(a)}};goog.array.forEach(arguments,c);if(!b){return goog.html.SafeStyle.EMPTY}return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(b)};goog.provide("goog.html.SafeStyleSheet");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="";this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=true;goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeStyleSheet.concat=function(a){var b="";var c=function(a){if(goog.isArray(a)){goog.array.forEach(a,c)}else{b+=goog.html.SafeStyleSheet.unwrap(a)}};goog.array.forEach(arguments,c);return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(b)};goog.html.SafeStyleSheet.fromConstant=function(a){var b=goog.string.Const.unwrap(a);if(b.length===0){return goog.html.SafeStyleSheet.EMPTY}goog.asserts.assert(!goog.string.contains(b,"<"),"Forbidden '<' character in style sheet string: "+b);return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(b)};goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_};if(goog.DEBUG){goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}}goog.html.SafeStyleSheet.unwrap=function(a){if(a instanceof goog.html.SafeStyleSheet&&a.constructor===goog.html.SafeStyleSheet&&a.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return a.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_}else{goog.asserts.fail("expected object of type SafeStyleSheet, got '"+a+"'");return"type_error:SafeStyleSheet"}};goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(a){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(a)};goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(a){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=a;return this};goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse("");goog.provide("goog.fs.url");goog.fs.url.createObjectUrl=function(a){return goog.fs.url.getUrlObject_().createObjectURL(a)};goog.fs.url.revokeObjectUrl=function(a){goog.fs.url.getUrlObject_().revokeObjectURL(a)};goog.fs.url.UrlObject_;goog.fs.url.getUrlObject_=function(){var a=goog.fs.url.findUrlObject_();if(a!=null){return a}else{throw Error("This browser doesn't seem to support blob URLs")}};goog.fs.url.findUrlObject_=function(){if(goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)){return goog.global.URL}else if(goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)){return goog.global.webkitURL}else if(goog.isDef(goog.global.createObjectURL)){return goog.global}else{return null}};goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null};goog.provide("goog.i18n.bidi");goog.provide("goog.i18n.bidi.Dir");goog.provide("goog.i18n.bidi.DirectionalString");goog.provide("goog.i18n.bidi.Format");goog.define("goog.i18n.bidi.FORCE_RTL",false);goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||goog.LOCALE.length>=3&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_");goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"};goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0};goog.i18n.bidi.RIGHT="right";goog.i18n.bidi.LEFT="left";goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT;goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT;goog.i18n.bidi.toDir=function(a,b){if(typeof a=="number"){return a>0?goog.i18n.bidi.Dir.LTR:a<0?goog.i18n.bidi.Dir.RTL:b?null:goog.i18n.bidi.Dir.NEUTRAL}else if(a==null){return null}else{return a?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR}};goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿"+"‎Ⰰ-﬜︀-﹯﻽-￿";goog.i18n.bidi.rtlChars_="֑-ۯۺ-߿‏יִ-﷿ﹰ-ﻼ";goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g;goog.i18n.bidi.stripHtmlIfNeeded_=function(a,b){return b?a.replace(goog.i18n.bidi.htmlSkipReg_,""):a};goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.hasAnyRtl=function(a,b){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl;goog.i18n.bidi.hasAnyLtr=function(a,b){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.isRtlChar=function(a){return goog.i18n.bidi.rtlRe_.test(a)};goog.i18n.bidi.isLtrChar=function(a){return goog.i18n.bidi.ltrRe_.test(a)};goog.i18n.bidi.isNeutralChar=function(a){return!goog.i18n.bidi.isLtrChar(a)&&!goog.i18n.bidi.isRtlChar(a)};goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]")
;goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.startsWithRtl=function(a,b){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl;goog.i18n.bidi.startsWithLtr=function(a,b){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr;goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/;goog.i18n.bidi.isNeutralText=function(a,b){a=goog.i18n.bidi.stripHtmlIfNeeded_(a,b);return goog.i18n.bidi.isRequiredLtrRe_.test(a)||!goog.i18n.bidi.hasAnyLtr(a)&&!goog.i18n.bidi.hasAnyRtl(a)};goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$");goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$");goog.i18n.bidi.endsWithLtr=function(a,b){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr;goog.i18n.bidi.endsWithRtl=function(a,b){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,b))};goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl;goog.i18n.bidi.rtlLocalesRe_=new RegExp("^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|"+".*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))"+"(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)","i");goog.i18n.bidi.isRtlLanguage=function(a){return goog.i18n.bidi.rtlLocalesRe_.test(a)};goog.i18n.bidi.bracketGuardHtmlRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(&lt;.*?(&gt;)+)/g;goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g;goog.i18n.bidi.guardBracketInHtml=function(a,b){var c=b===undefined?goog.i18n.bidi.hasAnyRtl(a):b;if(c){return a.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=rtl>$&</span>")}return a.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=ltr>$&</span>")};goog.i18n.bidi.guardBracketInText=function(a,b){var c=b===undefined?goog.i18n.bidi.hasAnyRtl(a):b;var d=c?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return a.replace(goog.i18n.bidi.bracketGuardTextRe_,d+"$&"+d)};goog.i18n.bidi.enforceRtlInHtml=function(a){if(a.charAt(0)=="<"){return a.replace(/<\w+/,"$& dir=rtl")}return"\n<span dir=rtl>"+a+"</span>"};goog.i18n.bidi.enforceRtlInText=function(a){return goog.i18n.bidi.Format.RLE+a+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.enforceLtrInHtml=function(a){if(a.charAt(0)=="<"){return a.replace(/<\w+/,"$& dir=ltr")}return"\n<span dir=ltr>"+a+"</span>"};goog.i18n.bidi.enforceLtrInText=function(a){return goog.i18n.bidi.Format.LRE+a+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g;goog.i18n.bidi.leftRe_=/left/gi;goog.i18n.bidi.rightRe_=/right/gi;goog.i18n.bidi.tempRe_=/%%%%/g;goog.i18n.bidi.mirrorCSS=function(a){return a.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)};goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g;goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g;goog.i18n.bidi.normalizeHebrewQuote=function(a){return a.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")};goog.i18n.bidi.wordSeparatorRe_=/\s+/;goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/;goog.i18n.bidi.rtlDetectionThreshold_=.4;goog.i18n.bidi.estimateDirection=function(a,b){var c=0;var d=0;var e=false;var f=goog.i18n.bidi.stripHtmlIfNeeded_(a,b).split(goog.i18n.bidi.wordSeparatorRe_);for(var g=0;g<f.length;g++){var h=f[g];if(goog.i18n.bidi.startsWithRtl(h)){c++;d++}else if(goog.i18n.bidi.isRequiredLtrRe_.test(h)){e=true}else if(goog.i18n.bidi.hasAnyLtr(h)){d++}else if(goog.i18n.bidi.hasNumeralsRe_.test(h)){e=true}}return d==0?e?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:c/d>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};goog.i18n.bidi.detectRtlDirectionality=function(a,b){return goog.i18n.bidi.estimateDirection(a,b)==goog.i18n.bidi.Dir.RTL};goog.i18n.bidi.setElementDirAndAlign=function(a,b){if(a){b=goog.i18n.bidi.toDir(b);if(b){a.style.textAlign=b==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT;a.dir=b==goog.i18n.bidi.Dir.RTL?"rtl":"ltr"}}};goog.i18n.bidi.setElementDirByTextDirectionality=function(a,b){switch(goog.i18n.bidi.estimateDirection(b)){case goog.i18n.bidi.Dir.LTR:a.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:a.dir="rtl";break;default:a.removeAttribute("dir")}};goog.i18n.bidi.DirectionalString=function(){};goog.i18n.bidi.DirectionalString.prototype.implementsGoogI18nBidiDirectionalString;goog.i18n.bidi.DirectionalString.prototype.getDirection;goog.provide("goog.html.SafeUrl");goog.require("goog.asserts");goog.require("goog.fs.url");goog.require("goog.i18n.bidi.Dir");goog.require("goog.i18n.bidi.DirectionalString");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez";goog.html.SafeUrl.prototype.implementsGoogStringTypedString=true;goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_};goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=true;goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};if(goog.DEBUG){goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}}goog.html.SafeUrl.unwrap=function(a){if(a instanceof goog.html.SafeUrl&&a.constructor===goog.html.SafeUrl&&a.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return a.privateDoNotAccessOrElseSafeHtmlWrappedValue_}else{goog.asserts.fail("expected object of type SafeUrl, got '"+a+"'");return"type_error:SafeUrl"}};goog.html.SafeUrl.fromConstant=function(a){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(a))};goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm))$/i;goog.html.SafeUrl.fromBlob=function(a){var b=goog.html.SAFE_MIME_TYPE_PATTERN_.test(a.type)?goog.fs.url.createObjectUrl(a):goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(b)};goog.html.DATA_URL_PATTERN_=/^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i;goog.html.SafeUrl.fromDataUrl=function(a){var b=a.match(goog.html.DATA_URL_PATTERN_);var c=b&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(b[1]);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(c?a:goog.html.SafeUrl.INNOCUOUS_STRING)};goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^&:\/?#]*(?:[\/?#]|$))/i;goog.html.SafeUrl.sanitize=function(a){if(a instanceof goog.html.SafeUrl){return a}else if(a.implementsGoogStringTypedString){a=a.getTypedStringValue()}else{a=String(a)}if(!goog.html.SAFE_URL_PATTERN_.test(a)){a=goog.html.SafeUrl.INNOCUOUS_STRING}return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(a){var b=new goog.html.SafeUrl;b.privateDoNotAccessOrElseSafeHtmlWrappedValue_=a;return b};goog.provide("goog.html.TrustedResourceUrl");goog.require("goog.asserts");goog.require("goog.i18n.bidi.Dir");goog.require("goog.i18n.bidi.DirectionalString");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="";this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=true;goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_};goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=true;goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};if(goog.DEBUG){goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}}goog.html.TrustedResourceUrl.unwrap=function(a){if(a instanceof goog.html.TrustedResourceUrl&&a.constructor===goog.html.TrustedResourceUrl&&a.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return a.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_}else{goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+a+"'");return"type_error:TrustedResourceUrl"}};goog.html.TrustedResourceUrl.fromConstant=function(a){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(a))};goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(a){var b=new goog.html.TrustedResourceUrl;b.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=a;return b};goog.provide("goog.html.SafeHtml");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.TagName");goog.require("goog.dom.tags");goog.require("goog.html.SafeStyle");goog.require("goog.html.SafeStyleSheet");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.i18n.bidi.Dir");goog.require("goog.i18n.bidi.DirectionalString");goog.require("goog.object");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;this.dir_=null};goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=true;goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_};goog.html.SafeHtml.prototype.implementsGoogStringTypedString=true;goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_};if(goog.DEBUG){goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}}goog.html.SafeHtml.unwrap=function(a){if(a instanceof goog.html.SafeHtml&&a.constructor===goog.html.SafeHtml&&a.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return a.privateDoNotAccessOrElseSafeHtmlWrappedValue_}else{goog.asserts.fail("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}};goog.html.SafeHtml.TextOrHtml_;goog.html.SafeHtml.htmlEscape=function(a){if(a instanceof goog.html.SafeHtml){return a}var b=null;if(a.implementsGoogI18nBidiDirectionalString){b=a.getDirection()}var c;if(a.implementsGoogStringTypedString){c=a.getTypedStringValue()}else{c=String(a)}return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.htmlEscape(c),b)};goog.html.SafeHtml.htmlEscapePreservingNewlines=function(a){if(a instanceof goog.html.SafeHtml){return a}var b=goog.html.SafeHtml.htmlEscape(a);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.newLineToBr(goog.html.SafeHtml.unwrap(b)),b.getDirection())};goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(a){if(a instanceof goog.html.SafeHtml){return a}var b=goog.html.SafeHtml.htmlEscape(a);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.whitespaceEscape(goog.html.SafeHtml.unwrap(b)),b.getDirection())};goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape;goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/;goog.html.SafeHtml.URL_ATTRIBUTES_=goog.object.createSet("action","cite","data","formaction","href","manifest","poster","src");goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_=goog.object.createSet(goog.dom.TagName.EMBED,goog.dom.TagName.IFRAME,goog.dom.TagName.LINK,goog.dom.TagName.OBJECT,goog.dom.TagName.SCRIPT,goog.dom.TagName.STYLE,goog.dom.TagName.TEMPLATE);goog.html.SafeHtml.AttributeValue_;goog.html.SafeHtml.create=function(a,b,c){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(a)){throw Error("Invalid tag name <"+a+">.")}if(a.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_){throw Error("Tag name <"+a+"> is not allowed for SafeHtml.")}return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(a,b,c)};goog.html.SafeHtml.createIframe=function(a,b,c,d){var e={};e["src"]=a||null;e["srcdoc"]=b||null;var f={sandbox:""};var g=goog.html.SafeHtml.combineAttributes(e,f,c);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",g,d)};goog.html.SafeHtml.createStyle=function(a,b){var c={type:"text/css"};var d={};var e=goog.html.SafeHtml.combineAttributes(c,d,b);var f="";a=goog.array.concat(a);for(var g=0;g<a.length;g++){f+=goog.html.SafeStyleSheet.unwrap(a[g])}var h=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(f,goog.i18n.bidi.Dir.NEUTRAL);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",e,h)};goog.html.SafeHtml.getAttrNameAndValue_=function(a,b,c){if(c instanceof goog.string.Const){c=goog.string.Const.unwrap(c)}else if(b.toLowerCase()=="style"){c=goog.html.SafeHtml.getStyleValue_(c)}else if(/^on/i.test(b)){throw Error('Attribute "'+b+'" requires goog.string.Const value, "'+c+'" given.')}else if(b.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_){if(c instanceof goog.html.TrustedResourceUrl){c=goog.html.TrustedResourceUrl.unwrap(c)}else if(c instanceof goog.html.SafeUrl){c=goog.html.SafeUrl.unwrap(c)}else if(goog.isString(c)){c=goog.html.SafeUrl.sanitize(c).getTypedStringValue()}else{throw Error('Attribute "'+b+'" on tag "'+a+'" requires goog.html.SafeUrl, goog.string.Const, or string,'+' value "'+c+'" given.')}}if(c.implementsGoogStringTypedString){c=c.getTypedStringValue()}goog.asserts.assert(goog.isString(c)||goog.isNumber(c),"String or number value expected, got "+typeof c+" with value: "+c);return b+'="'+goog.string.htmlEscape(String(c))+'"'};goog.html.SafeHtml.getStyleValue_=function(a){if(!goog.isObject(a)){throw Error('The "style" attribute requires goog.html.SafeStyle or map '+"of style properties, "+typeof a+" given: "+a)}if(!(a instanceof goog.html.SafeStyle)){a=goog.html.SafeStyle.create(a)}return goog.html.SafeStyle.unwrap(a)};goog.html.SafeHtml.createWithDir=function(a,b,c,d){var e=goog.html.SafeHtml.create(b,c,d);e.dir_=a;return e};goog.html.SafeHtml.concat=function(a){var b=goog.i18n.bidi.Dir.NEUTRAL;var c="";var d=function(a){if(goog.isArray(a)){goog.array.forEach(a,d)}else{var e=goog.html.SafeHtml.htmlEscape(a);c+=goog.html.SafeHtml.unwrap(e);var f=e.getDirection();if(b==goog.i18n.bidi.Dir.NEUTRAL){b=f}else if(f!=goog.i18n.bidi.Dir.NEUTRAL&&b!=f){b=null}}};goog.array.forEach(arguments,d);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(c,b)};goog.html.SafeHtml.concatWithDir=function(a,b){var c=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));c.dir_=a;return c};goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(a,b){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(a,b)};goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(a,b){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=a;this.dir_=b;return this};goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(a,b,c){var d=null;var e="<"+a;if(b){for(var f in b){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(f)){throw Error('Invalid attribute name "'+f+'".')}var g=b[f];if(!goog.isDefAndNotNull(g)){continue}e+=" "+goog.html.SafeHtml.getAttrNameAndValue_(a,f,g)}}var h=c;if(!goog.isDefAndNotNull(h)){h=[]}else if(!goog.isArray(h)){h=[h]}if(goog.dom.tags.isVoidTag(a.toLowerCase())){goog.asserts.assert(!h.length,"Void tag <"+a+"> does not allow content.");e+=">"}else{var i=goog.html.SafeHtml.concat(h);e+=">"+goog.html.SafeHtml.unwrap(i)+"</"+a+">";d=i.getDirection()}var j=b&&b["dir"];if(j){if(/^(ltr|rtl|auto)$/i.test(j)){d=goog.i18n.bidi.Dir.NEUTRAL}else{d=null}}return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(e,d)};goog.html.SafeHtml.combineAttributes=function(a,b,c){var d={};var e;for(e in a){goog.asserts.assert(e.toLowerCase()==e,"Must be lower case");d[e]=a[e]}for(e in b){goog.asserts.assert(e.toLowerCase()==e,"Must be lower case");d[e]=b[e]}for(e in c){var f=e.toLowerCase();if(f in a){throw Error('Cannot override "'+f+'" attribute, got "'+e+'" with value "'+c[e]+'"')}if(f in b){delete d[f]}d[e]=c[e]}return d};goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL);goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL);goog.provide("goog.dom.safe");goog.provide("goog.dom.safe.InsertAdjacentHtmlPosition");goog.require("goog.asserts");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.string");goog.require("goog.string.Const");goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"};goog.dom.safe.insertAdjacentHtml=function(a,b,c){a.insertAdjacentHTML(b,goog.html.SafeHtml.unwrap(c))};goog.dom.safe.setInnerHtml=function(a,b){a.innerHTML=goog.html.SafeHtml.unwrap(b)};goog.dom.safe.setOuterHtml=function(a,b){a.outerHTML=goog.html.SafeHtml.unwrap(b)};goog.dom.safe.documentWrite=function(a,b){a.write(goog.html.SafeHtml.unwrap(b))};goog.dom.safe.setAnchorHref=function(a,b){var c;if(b instanceof goog.html.SafeUrl){c=b}else{c=goog.html.SafeUrl.sanitize(b)}a.href=goog.html.SafeUrl.unwrap(c)};goog.dom.safe.setEmbedSrc=function(a,b){a.src=goog.html.TrustedResourceUrl.unwrap(b)};goog.dom.safe.setFrameSrc=function(a,b){a.src=goog.html.TrustedResourceUrl.unwrap(b)};goog.dom.safe.setIframeSrc=function(a,b){a.src=goog.html.TrustedResourceUrl.unwrap(b)};goog.dom.safe.setLinkHrefAndRel=function(a,b,c){a.rel=c;if(goog.string.caseInsensitiveContains(c,"stylesheet")){goog.asserts.assert(b instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"');a.href=goog.html.TrustedResourceUrl.unwrap(b)}else if(b instanceof goog.html.TrustedResourceUrl){a.href=goog.html.TrustedResourceUrl.unwrap(b)}else if(b instanceof goog.html.SafeUrl){a.href=goog.html.SafeUrl.unwrap(b)}else{a.href=goog.html.SafeUrl.sanitize(b).getTypedStringValue()}};goog.dom.safe.setObjectData=function(a,b){a.data=goog.html.TrustedResourceUrl.unwrap(b)};goog.dom.safe.setScriptSrc=function(a,b){a.src=goog.html.TrustedResourceUrl.unwrap(b)};goog.dom.safe.setLocationHref=function(a,b){var c;if(b instanceof goog.html.SafeUrl){c=b}else{c=goog.html.SafeUrl.sanitize(b)}a.href=goog.html.SafeUrl.unwrap(c)};goog.dom.safe.openInWindow=function(a,b,c,d,e){var f;if(a instanceof goog.html.SafeUrl){f=a}else{f=goog.html.SafeUrl.sanitize(a)}var g=b||window;return g.open(goog.html.SafeUrl.unwrap(f),c?goog.string.Const.unwrap(c):"",d,e)};goog.provide("goog.math.Coordinate");goog.require("goog.math");goog.math.Coordinate=function(a,b){this.x=goog.isDef(a)?a:0;this.y=goog.isDef(b)?b:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};if(goog.DEBUG){goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}}goog.math.Coordinate.equals=function(a,b){if(a==b){return true}if(!a||!b){return false}return a.x==b.x&&a.y==b.y};goog.math.Coordinate.distance=function(a,b){var c=a.x-b.x;var d=a.y-b.y;return Math.sqrt(c*c+d*d)};goog.math.Coordinate.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};goog.math.Coordinate.azimuth=function(a){return goog.math.angle(0,0,a.x,a.y)};goog.math.Coordinate.squaredDistance=function(a,b){var c=a.x-b.x;var d=a.y-b.y;return c*c+d*d};goog.math.Coordinate.difference=function(a,b){return new goog.math.Coordinate(a.x-b.x,a.y-b.y)};goog.math.Coordinate.sum=function(a,b){return new goog.math.Coordinate(a.x+b.x,a.y+b.y)};goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};goog.math.Coordinate.prototype.translate=function(a,b){if(a instanceof goog.math.Coordinate){this.x+=a.x;this.y+=a.y}else{this.x+=a;if(goog.isNumber(b)){this.y+=b}}return this};goog.math.Coordinate.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.x*=a;this.y*=c;return this};goog.math.Coordinate.prototype.rotateRadians=function(a,b){var c=b||new goog.math.Coordinate(0,0);var d=this.x;var e=this.y;var f=Math.cos(a);var g=Math.sin(a);this.x=(d-c.x)*f-(e-c.y)*g+c.x;this.y=(d-c.x)*g+(e-c.y)*f+c.y};goog.math.Coordinate.prototype.rotateDegrees=function(a,b){this.rotateRadians(goog.math.toRadians(a),b)};goog.provide("goog.math.Size");goog.math.Size=function(a,b){this.width=a;this.height=b};goog.math.Size.equals=function(a,b){if(a==b){return true}if(!a||!b){return false}return a.width==b.width&&a.height==b.height};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};if(goog.DEBUG){goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}}goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return(this.width+this.height)*2};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Size.prototype.fitsInside=function(a){return this.width<=a.width&&this.height<=a.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.width*=a;this.height*=c;return this};goog.math.Size.prototype.scaleToCover=function(a){var b=this.aspectRatio()<=a.aspectRatio()?a.width/this.width:a.height/this.height;return this.scale(b)};goog.math.Size.prototype.scaleToFit=function(a){var b=this.aspectRatio()>a.aspectRatio()?a.width/this.width:a.height/this.height;return this.scale(b)};goog.provide("goog.dom");goog.provide("goog.dom.Appendable");goog.provide("goog.dom.DomHelper");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.BrowserFeature");goog.require("goog.dom.NodeType");goog.require("goog.dom.TagName");goog.require("goog.dom.safe");goog.require("goog.html.SafeHtml");goog.require("goog.math.Coordinate");goog.require("goog.math.Size");goog.require("goog.object");goog.require("goog.string");goog.require("goog.string.Unicode");goog.require("goog.userAgent");goog.define("goog.dom.ASSUME_QUIRKS_MODE",false);goog.define("goog.dom.ASSUME_STANDARDS_MODE",false);goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.getDomHelper=function(a){return a?new goog.dom.DomHelper(goog.dom.getOwnerDocument(a)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};goog.dom.defaultDomHelper_;goog.dom.getDocument=function(){return document};goog.dom.getElement=function(a){return goog.dom.getElementHelper_(document,a)};goog.dom.getElementHelper_=function(a,b){return goog.isString(b)?a.getElementById(b):b};goog.dom.getRequiredElement=function(a){return goog.dom.getRequiredElementHelper_(document,a)};goog.dom.getRequiredElementHelper_=function(a,b){goog.asserts.assertString(b);var c=goog.dom.getElementHelper_(a,b);c=goog.asserts.assertElement(c,"No element found with id: "+b);return c};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagNameAndClass=function(a,b,c){return goog.dom.getElementsByTagNameAndClass_(document,a,b,c)};goog.dom.getElementsByClass=function(a,b){var c=b||document;if(goog.dom.canUseQuerySelector_(c)){return c.querySelectorAll("."+a)}return goog.dom.getElementsByTagNameAndClass_(document,"*",a,b)};goog.dom.getElementByClass=function(a,b){var c=b||document;var d=null;if(c.getElementsByClassName){d=c.getElementsByClassName(a)[0]}else if(goog.dom.canUseQuerySelector_(c)){d=c.querySelector("."+a)}else{d=goog.dom.getElementsByTagNameAndClass_(document,"*",a,b)[0]}return d||null};goog.dom.getRequiredElementByClass=function(a,b){var c=goog.dom.getElementByClass(a,b);return goog.asserts.assert(c,"No element found with className: "+a)};goog.dom.canUseQuerySelector_=function(a){return!!(a.querySelectorAll&&a.querySelector)};goog.dom.getElementsByTagNameAndClass_=function(a,b,c,d){var e=d||a;var f=b&&b!="*"?b.toUpperCase():"";if(goog.dom.canUseQuerySelector_(e)&&(f||c)){var g=f+(c?"."+c:"");return e.querySelectorAll(g)}if(c&&e.getElementsByClassName){var h=e.getElementsByClassName(c);if(f){var i={};var j=0;for(var k=0,l;l=h[k];k++){if(f==l.nodeName){i[j++]=l}}i.length=j;return i}else{return h}}var h=e.getElementsByTagName(f||"*");if(c){var i={};var j=0;for(var k=0,l;l=h[k];k++){var m=l.className;if(typeof m.split=="function"&&goog.array.contains(m.split(/\s+/),c)){i[j++]=l}}i.length=j;return i}else{return h}};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;goog.dom.setProperties=function(a,b){goog.object.forEach(b,function(b,c){if(c=="style"){a.style.cssText=b}else if(c=="class"){a.className=b}else if(c=="for"){a.htmlFor=b}else if(goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(c)){a.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[c],b)}else if(goog.string.startsWith(c,"aria-")||goog.string.startsWith(c,"data-")){a.setAttribute(c,b)}else{a[c]=b}})};goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(a){return goog.dom.getViewportSize_(a||window)};goog.dom.getViewportSize_=function(a){var b=a.document;var c=goog.dom.isCss1CompatMode_(b)?b.documentElement:b.body;return new goog.math.Size(c.clientWidth,c.clientHeight)};goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeight_=function(a){var b=a.document;var c=0;if(b){var d=b.body;var e=b.documentElement;if(!(e&&d)){return 0}var f=goog.dom.getViewportSize_(a).height;if(goog.dom.isCss1CompatMode_(b)&&e.scrollHeight){c=e.scrollHeight!=f?e.scrollHeight:e.offsetHeight}else{var g=e.scrollHeight;var h=e.offsetHeight;if(e.clientHeight!=h){g=d.scrollHeight;h=d.offsetHeight}if(g>f){c=g>h?g:h}else{c=g<h?g:h}}}return c};goog.dom.getPageScroll=function(a){var b=a||goog.global||window;return goog.dom.getDomHelper(b.document).getDocumentScroll()};goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};goog.dom.getDocumentScroll_=function(a){var b=goog.dom.getDocumentScrollElement_(a);var c=goog.dom.getWindow_(a);if(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&c.pageYOffset!=b.scrollTop){return new goog.math.Coordinate(b.scrollLeft,b.scrollTop)}return new goog.math.Coordinate(c.pageXOffset||b.scrollLeft,c.pageYOffset||b.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};goog.dom.getDocumentScrollElement_=function(a){if(a.scrollingElement){return a.scrollingElement}if(!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(a)){return a.documentElement}return a.body||a.documentElement};goog.dom.getWindow=function(a){return a?goog.dom.getWindow_(a):window};goog.dom.getWindow_=function(a){return a.parentWindow||a.defaultView};goog.dom.createDom=function(a,b,c){return goog.dom.createDom_(document,arguments)};goog.dom.createDom_=function(a,b){var c=b[0];var d=b[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&d&&(d.name||d.type)){var e=["<",c];if(d.name){e.push(' name="',goog.string.htmlEscape(d.name),'"')}if(d.type){e.push(' type="',goog.string.htmlEscape(d.type),'"');var f={};goog.object.extend(f,d);delete f["type"];d=f}e.push(">");c=e.join("")}var g=a.createElement(c);if(d){if(goog.isString(d)){g.className=d}else if(goog.isArray(d)){g.className=d.join(" ")}else{goog.dom.setProperties(g,d)}}if(b.length>2){goog.dom.append_(a,g,b,2)}return g};goog.dom.append_=function(a,b,c,d){function e(c){if(c){b.appendChild(goog.isString(c)?a.createTextNode(c):c)}}for(var f=d;f<c.length;f++){var g=c[f];if(goog.isArrayLike(g)&&!goog.dom.isNodeLike(g)){goog.array.forEach(goog.dom.isNodeList(g)?goog.array.toArray(g):g,e)}else{e(g)}}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(a){return document.createElement(a)};goog.dom.createTextNode=function(a){return document.createTextNode(String(a))};goog.dom.createTable=function(a,b,c){return goog.dom.createTable_(document,a,b,!!c)};goog.dom.createTable_=function(a,b,c,d){var e=a.createElement(goog.dom.TagName.TABLE);var f=e.appendChild(a.createElement(goog.dom.TagName.TBODY));for(var g=0;g<b;g++){var h=a.createElement(goog.dom.TagName.TR);for(var i=0;i<c;i++){var j=a.createElement(goog.dom.TagName.TD);if(d){goog.dom.setTextContent(j,goog.string.Unicode.NBSP)}h.appendChild(j)}f.appendChild(h)}return e};goog.dom.safeHtmlToNode=function(a){return goog.dom.safeHtmlToNode_(document,a)};goog.dom.safeHtmlToNode_=function(a,b){var c=a.createElement(goog.dom.TagName.DIV);if(goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT){goog.dom.safe.setInnerHtml(c,goog.html.SafeHtml.concat(goog.html.SafeHtml.create("br"),b));c.removeChild(c.firstChild)}else{goog.dom.safe.setInnerHtml(c,b)}return goog.dom.childrenToNode_(a,c)};goog.dom.htmlToDocumentFragment=function(a){return goog.dom.htmlToDocumentFragment_(document,a)};goog.dom.htmlToDocumentFragment_=function(a,b){var c=a.createElement(goog.dom.TagName.DIV);if(goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT){c.innerHTML="<br>"+b;c.removeChild(c.firstChild)}else{c.innerHTML=b}return goog.dom.childrenToNode_(a,c)};goog.dom.childrenToNode_=function(a,b){if(b.childNodes.length==1){return b.removeChild(b.firstChild)}else{var c=a.createDocumentFragment();while(b.firstChild){c.appendChild(b.firstChild)}return c}};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};goog.dom.isCss1CompatMode_=function(a){if(goog.dom.COMPAT_MODE_KNOWN_){return goog.dom.ASSUME_STANDARDS_MODE}return a.compatMode=="CSS1Compat"};goog.dom.canHaveChildren=function(a){if(a.nodeType!=goog.dom.NodeType.ELEMENT){return false}switch(a.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:
case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return false}return true};goog.dom.appendChild=function(a,b){a.appendChild(b)};goog.dom.append=function(a,b){goog.dom.append_(goog.dom.getOwnerDocument(a),a,arguments,1)};goog.dom.removeChildren=function(a){var b;while(b=a.firstChild){a.removeChild(b)}};goog.dom.insertSiblingBefore=function(a,b){if(b.parentNode){b.parentNode.insertBefore(a,b)}};goog.dom.insertSiblingAfter=function(a,b){if(b.parentNode){b.parentNode.insertBefore(a,b.nextSibling)}};goog.dom.insertChildAt=function(a,b,c){a.insertBefore(b,a.childNodes[c]||null)};goog.dom.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};goog.dom.replaceNode=function(a,b){var c=b.parentNode;if(c){c.replaceChild(a,b)}};goog.dom.flattenElement=function(a){var b,c=a.parentNode;if(c&&c.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(a.removeNode){return a.removeNode(false)}else{while(b=a.firstChild){c.insertBefore(b,a)}return goog.dom.removeNode(a)}}};goog.dom.getChildren=function(a){if(goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&a.children!=undefined){return a.children}return goog.array.filter(a.childNodes,function(a){return a.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(a){if(goog.isDef(a.firstElementChild)){return a.firstElementChild}return goog.dom.getNextElementNode_(a.firstChild,true)};goog.dom.getLastElementChild=function(a){if(goog.isDef(a.lastElementChild)){return a.lastElementChild}return goog.dom.getNextElementNode_(a.lastChild,false)};goog.dom.getNextElementSibling=function(a){if(goog.isDef(a.nextElementSibling)){return a.nextElementSibling}return goog.dom.getNextElementNode_(a.nextSibling,true)};goog.dom.getPreviousElementSibling=function(a){if(goog.isDef(a.previousElementSibling)){return a.previousElementSibling}return goog.dom.getNextElementNode_(a.previousSibling,false)};goog.dom.getNextElementNode_=function(a,b){while(a&&a.nodeType!=goog.dom.NodeType.ELEMENT){a=b?a.nextSibling:a.previousSibling}return a};goog.dom.getNextNode=function(a){if(!a){return null}if(a.firstChild){return a.firstChild}while(a&&!a.nextSibling){a=a.parentNode}return a?a.nextSibling:null};goog.dom.getPreviousNode=function(a){if(!a){return null}if(!a.previousSibling){return a.parentNode}a=a.previousSibling;while(a&&a.lastChild){a=a.lastChild}return a};goog.dom.isNodeLike=function(a){return goog.isObject(a)&&a.nodeType>0};goog.dom.isElement=function(a){return goog.isObject(a)&&a.nodeType==goog.dom.NodeType.ELEMENT};goog.dom.isWindow=function(a){return goog.isObject(a)&&a["window"]==a};goog.dom.getParentElement=function(a){var b;if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY){var c=goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10");if(!(c&&goog.global["SVGElement"]&&a instanceof goog.global["SVGElement"])){b=a.parentElement;if(b){return b}}}b=a.parentNode;return goog.dom.isElement(b)?b:null};goog.dom.contains=function(a,b){if(a.contains&&b.nodeType==goog.dom.NodeType.ELEMENT){return a==b||a.contains(b)}if(typeof a.compareDocumentPosition!="undefined"){return a==b||Boolean(a.compareDocumentPosition(b)&16)}while(b&&a!=b){b=b.parentNode}return b==a};goog.dom.compareNodeOrder=function(a,b){if(a==b){return 0}if(a.compareDocumentPosition){return a.compareDocumentPosition(b)&2?1:-1}if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(a.nodeType==goog.dom.NodeType.DOCUMENT){return-1}if(b.nodeType==goog.dom.NodeType.DOCUMENT){return 1}}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=a.nodeType==goog.dom.NodeType.ELEMENT;var d=b.nodeType==goog.dom.NodeType.ELEMENT;if(c&&d){return a.sourceIndex-b.sourceIndex}else{var e=a.parentNode;var f=b.parentNode;if(e==f){return goog.dom.compareSiblingOrder_(a,b)}if(!c&&goog.dom.contains(e,b)){return-1*goog.dom.compareParentsDescendantNodeIe_(a,b)}if(!d&&goog.dom.contains(f,a)){return goog.dom.compareParentsDescendantNodeIe_(b,a)}return(c?a.sourceIndex:e.sourceIndex)-(d?b.sourceIndex:f.sourceIndex)}}var g=goog.dom.getOwnerDocument(a);var h,i;h=g.createRange();h.selectNode(a);h.collapse(true);i=g.createRange();i.selectNode(b);i.collapse(true);return h.compareBoundaryPoints(goog.global["Range"].START_TO_END,i)};goog.dom.compareParentsDescendantNodeIe_=function(a,b){var c=a.parentNode;if(c==b){return-1}var d=b;while(d.parentNode!=c){d=d.parentNode}return goog.dom.compareSiblingOrder_(d,a)};goog.dom.compareSiblingOrder_=function(a,b){var c=b;while(c=c.previousSibling){if(c==a){return-1}}return 1};goog.dom.findCommonAncestor=function(a){var b,c=arguments.length;if(!c){return null}else if(c==1){return arguments[0]}var d=[];var e=Infinity;for(b=0;b<c;b++){var f=[];var g=arguments[b];while(g){f.unshift(g);g=g.parentNode}d.push(f);e=Math.min(e,f.length)}var h=null;for(b=0;b<e;b++){var i=d[0][b];for(var j=1;j<c;j++){if(i!=d[j][b]){return h}}h=i}return h};goog.dom.getOwnerDocument=function(a){goog.asserts.assert(a,"Node cannot be null or undefined.");return a.nodeType==goog.dom.NodeType.DOCUMENT?a:a.ownerDocument||a.document};goog.dom.getFrameContentDocument=function(a){var b=a.contentDocument||a.contentWindow.document;return b};goog.dom.getFrameContentWindow=function(a){return a.contentWindow||goog.dom.getWindow(goog.dom.getFrameContentDocument(a))};goog.dom.setTextContent=function(a,b){goog.asserts.assert(a!=null,"goog.dom.setTextContent expects a non-null value for node");if("textContent"in a){a.textContent=b}else if(a.nodeType==goog.dom.NodeType.TEXT){a.data=b}else if(a.firstChild&&a.firstChild.nodeType==goog.dom.NodeType.TEXT){while(a.lastChild!=a.firstChild){a.removeChild(a.lastChild)}a.firstChild.data=b}else{goog.dom.removeChildren(a);var c=goog.dom.getOwnerDocument(a);a.appendChild(c.createTextNode(String(b)))}};goog.dom.getOuterHtml=function(a){if("outerHTML"in a){return a.outerHTML}else{var b=goog.dom.getOwnerDocument(a);var c=b.createElement(goog.dom.TagName.DIV);c.appendChild(a.cloneNode(true));return c.innerHTML}};goog.dom.findNode=function(a,b){var c=[];var d=goog.dom.findNodes_(a,b,c,true);return d?c[0]:undefined};goog.dom.findNodes=function(a,b){var c=[];goog.dom.findNodes_(a,b,c,false);return c};goog.dom.findNodes_=function(a,b,c,d){if(a!=null){var e=a.firstChild;while(e){if(b(e)){c.push(e);if(d){return true}}if(goog.dom.findNodes_(e,b,c,d)){return true}e=e.nextSibling}}return false};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};goog.dom.isFocusableTabIndex=function(a){return goog.dom.hasSpecifiedTabIndex_(a)&&goog.dom.isTabIndexFocusable_(a)};goog.dom.setFocusableTabIndex=function(a,b){if(b){a.tabIndex=0}else{a.tabIndex=-1;a.removeAttribute("tabIndex")}};goog.dom.isFocusable=function(a){var b;if(goog.dom.nativelySupportsFocus_(a)){b=!a.disabled&&(!goog.dom.hasSpecifiedTabIndex_(a)||goog.dom.isTabIndexFocusable_(a))}else{b=goog.dom.isFocusableTabIndex(a)}return b&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(a):b};goog.dom.hasSpecifiedTabIndex_=function(a){var b=a.getAttributeNode("tabindex");return goog.isDefAndNotNull(b)&&b.specified};goog.dom.isTabIndexFocusable_=function(a){var b=a.tabIndex;return goog.isNumber(b)&&b>=0&&b<32768};goog.dom.nativelySupportsFocus_=function(a){return a.tagName==goog.dom.TagName.A||a.tagName==goog.dom.TagName.INPUT||a.tagName==goog.dom.TagName.TEXTAREA||a.tagName==goog.dom.TagName.SELECT||a.tagName==goog.dom.TagName.BUTTON};goog.dom.hasNonZeroBoundingRect_=function(a){var b=goog.isFunction(a["getBoundingClientRect"])?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth};return goog.isDefAndNotNull(b)&&b.height>0&&b.width>0};goog.dom.getTextContent=function(a){var b;if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in a){b=goog.string.canonicalizeNewlines(a.innerText)}else{var c=[];goog.dom.getTextContent_(a,c,true);b=c.join("")}b=b.replace(/ \xAD /g," ").replace(/\xAD/g,"");b=b.replace(/\u200B/g,"");if(!goog.dom.BrowserFeature.CAN_USE_INNER_TEXT){b=b.replace(/ +/g," ")}if(b!=" "){b=b.replace(/^\s*/,"")}return b};goog.dom.getRawTextContent=function(a){var b=[];goog.dom.getTextContent_(a,b,false);return b.join("")};goog.dom.getTextContent_=function(a,b,c){if(a.nodeName in goog.dom.TAGS_TO_IGNORE_){}else if(a.nodeType==goog.dom.NodeType.TEXT){if(c){b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{b.push(a.nodeValue)}}else if(a.nodeName in goog.dom.PREDEFINED_TAG_VALUES_){b.push(goog.dom.PREDEFINED_TAG_VALUES_[a.nodeName])}else{var d=a.firstChild;while(d){goog.dom.getTextContent_(d,b,c);d=d.nextSibling}}};goog.dom.getNodeTextLength=function(a){return goog.dom.getTextContent(a).length};goog.dom.getNodeTextOffset=function(a,b){var c=b||goog.dom.getOwnerDocument(a).body;var d=[];while(a&&a!=c){var e=a;while(e=e.previousSibling){d.unshift(goog.dom.getTextContent(e))}a=a.parentNode}return goog.string.trimLeft(d.join("")).replace(/ +/g," ").length};goog.dom.getNodeAtOffset=function(a,b,c){var d=[a],e=0,f=null;while(d.length>0&&e<b){f=d.pop();if(f.nodeName in goog.dom.TAGS_TO_IGNORE_){}else if(f.nodeType==goog.dom.NodeType.TEXT){var g=f.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");e+=g.length}else if(f.nodeName in goog.dom.PREDEFINED_TAG_VALUES_){e+=goog.dom.PREDEFINED_TAG_VALUES_[f.nodeName].length}else{for(var h=f.childNodes.length-1;h>=0;h--){d.push(f.childNodes[h])}}}if(goog.isObject(c)){c.remainder=f?f.nodeValue.length+b-e-1:0;c.node=f}return f};goog.dom.isNodeList=function(a){if(a&&typeof a.length=="number"){if(goog.isObject(a)){return typeof a.item=="function"||typeof a.item=="string"}else if(goog.isFunction(a)){return typeof a.item=="function"}}return false};goog.dom.getAncestorByTagNameAndClass=function(a,b,c,d){if(!b&&!c){return null}var e=b?b.toUpperCase():null;return goog.dom.getAncestor(a,function(a){return(!e||a.nodeName==e)&&(!c||goog.isString(a.className)&&goog.array.contains(a.className.split(/\s+/),c))},true,d)};goog.dom.getAncestorByClass=function(a,b,c){return goog.dom.getAncestorByTagNameAndClass(a,null,b,c)};goog.dom.getAncestor=function(a,b,c,d){if(!c){a=a.parentNode}var e=d==null;var f=0;while(a&&(e||f<=d)){goog.asserts.assert(a.name!="parentNode");if(b(a)){return a}a=a.parentNode;f++}return null};goog.dom.getActiveElement=function(a){try{return a&&a.activeElement}catch(a){}return null};goog.dom.getPixelRatio=function(){var a=goog.dom.getWindow();if(goog.isDef(a.devicePixelRatio)){return a.devicePixelRatio}else if(a.matchMedia){return goog.dom.matchesPixelRatio_(.75)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(3)||1}return 1};goog.dom.matchesPixelRatio_=function(a){var b=goog.dom.getWindow();var c="(-webkit-min-device-pixel-ratio: "+a+"),"+"(min--moz-device-pixel-ratio: "+a+"),"+"(min-resolution: "+a+"dppx)";return b.matchMedia(c).matches?a:0};goog.dom.DomHelper=function(a){this.document_=a||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;goog.dom.DomHelper.prototype.setDocument=function(a){this.document_=a};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(a){return goog.dom.getElementHelper_(this.document_,a)};goog.dom.DomHelper.prototype.getRequiredElement=function(a){return goog.dom.getRequiredElementHelper_(this.document_,a)};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(a,b,c){return goog.dom.getElementsByTagNameAndClass_(this.document_,a,b,c)};goog.dom.DomHelper.prototype.getElementsByClass=function(a,b){var c=b||this.document_;return goog.dom.getElementsByClass(a,c)};goog.dom.DomHelper.prototype.getElementByClass=function(a,b){var c=b||this.document_;return goog.dom.getElementByClass(a,c)};goog.dom.DomHelper.prototype.getRequiredElementByClass=function(a,b){var c=b||this.document_;return goog.dom.getRequiredElementByClass(a,c)};goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(a){return goog.dom.getViewportSize(a||this.getWindow())};goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.Appendable;goog.dom.DomHelper.prototype.createDom=function(a,b,c){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(a){return this.document_.createElement(a)};goog.dom.DomHelper.prototype.createTextNode=function(a){return this.document_.createTextNode(String(a))};goog.dom.DomHelper.prototype.createTable=function(a,b,c){return goog.dom.createTable_(this.document_,a,b,!!c)};goog.dom.DomHelper.prototype.safeHtmlToNode=function(a){return goog.dom.safeHtmlToNode_(this.document_,a)};goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(a){return goog.dom.htmlToDocumentFragment_(this.document_,a)};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.getActiveElement=function(a){return goog.dom.getActiveElement(a||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.provide("goog.dom.classlist");goog.require("goog.array");goog.define("goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST",false);goog.dom.classlist.get=function(a){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList){return a.classList}var b=a.className;return goog.isString(b)&&b.match(/\S+/g)||[]};goog.dom.classlist.set=function(a,b){a.className=b};goog.dom.classlist.contains=function(a,b){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList){return a.classList.contains(b)}return goog.array.contains(goog.dom.classlist.get(a),b)};goog.dom.classlist.add=function(a,b){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList){a.classList.add(b);return}if(!goog.dom.classlist.contains(a,b)){a.className+=a.className.length>0?" "+b:b}};goog.dom.classlist.addAll=function(a,b){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList){goog.array.forEach(b,function(b){goog.dom.classlist.add(a,b)});return}var c={};goog.array.forEach(goog.dom.classlist.get(a),function(a){c[a]=true});goog.array.forEach(b,function(a){c[a]=true});a.className="";for(var d in c){a.className+=a.className.length>0?" "+d:d}};goog.dom.classlist.remove=function(a,b){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList){a.classList.remove(b);return}if(goog.dom.classlist.contains(a,b)){a.className=goog.array.filter(goog.dom.classlist.get(a),function(a){return a!=b}).join(" ")}};goog.dom.classlist.removeAll=function(a,b){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList){goog.array.forEach(b,function(b){goog.dom.classlist.remove(a,b)});return}a.className=goog.array.filter(goog.dom.classlist.get(a),function(a){return!goog.array.contains(b,a)}).join(" ")};goog.dom.classlist.enable=function(a,b,c){if(c){goog.dom.classlist.add(a,b)}else{goog.dom.classlist.remove(a,b)}};goog.dom.classlist.enableAll=function(a,b,c){var d=c?goog.dom.classlist.addAll:goog.dom.classlist.removeAll;d(a,b)};goog.dom.classlist.swap=function(a,b,c){if(goog.dom.classlist.contains(a,b)){goog.dom.classlist.remove(a,b);goog.dom.classlist.add(a,c);return true}return false};goog.dom.classlist.toggle=function(a,b){var c=!goog.dom.classlist.contains(a,b);goog.dom.classlist.enable(a,b,c);return c};goog.dom.classlist.addRemove=function(a,b,c){goog.dom.classlist.remove(a,b);goog.dom.classlist.add(a,c)};goog.provide("goog.dom.vendor");goog.require("goog.string");goog.require("goog.userAgent");goog.dom.vendor.getVendorJsPrefix=function(){if(goog.userAgent.WEBKIT){return"Webkit"}else if(goog.userAgent.GECKO){return"Moz"}else if(goog.userAgent.IE){return"ms"}else if(goog.userAgent.OPERA){return"O"}return null};goog.dom.vendor.getVendorPrefix=function(){if(goog.userAgent.WEBKIT){return"-webkit"}else if(goog.userAgent.GECKO){return"-moz"}else if(goog.userAgent.IE){return"-ms"}else if(goog.userAgent.OPERA){return"-o"}return null};goog.dom.vendor.getPrefixedPropertyName=function(a,b){if(b&&a in b){return a}var c=goog.dom.vendor.getVendorJsPrefix();if(c){c=c.toLowerCase();var d=c+goog.string.toTitleCase(a);return!goog.isDef(b)||d in b?d:null}return null};goog.dom.vendor.getPrefixedEventType=function(a){var b=goog.dom.vendor.getVendorJsPrefix()||"";return(b+a).toLowerCase()};goog.provide("goog.math.Box");goog.require("goog.math.Coordinate");goog.math.Box=function(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};goog.math.Box.boundingBox=function(a){var b=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x);for(var c=1;c<arguments.length;c++){b.expandToIncludeCoordinate(arguments[c])}return b};goog.math.Box.prototype.getWidth=function(){return this.right-this.left};goog.math.Box.prototype.getHeight=function(){return this.bottom-this.top};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};if(goog.DEBUG){goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"}}goog.math.Box.prototype.contains=function(a){return goog.math.Box.contains(this,a)};goog.math.Box.prototype.expand=function(a,b,c,d){if(goog.isObject(a)){this.top-=a.top;this.right+=a.right;this.bottom+=a.bottom;this.left-=a.left}else{this.top-=a;this.right+=b;this.bottom+=c;this.left-=d}return this};goog.math.Box.prototype.expandToInclude=function(a){this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.right=Math.max(this.right,a.right);this.bottom=Math.max(this.bottom,a.bottom)};goog.math.Box.prototype.expandToIncludeCoordinate=function(a){this.top=Math.min(this.top,a.y);this.right=Math.max(this.right,a.x);this.bottom=Math.max(this.bottom,a.y);this.left=Math.min(this.left,a.x)};goog.math.Box.equals=function(a,b){if(a==b){return true}if(!a||!b){return false}return a.top==b.top&&a.right==b.right&&a.bottom==b.bottom&&a.left==b.left};goog.math.Box.contains=function(a,b){if(!a||!b){return false}if(b instanceof goog.math.Box){return b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom}return b.x>=a.left&&b.x<=a.right&&b.y>=a.top&&b.y<=a.bottom};goog.math.Box.relativePositionX=function(a,b){if(b.x<a.left){return b.x-a.left}else if(b.x>a.right){return b.x-a.right}return 0};goog.math.Box.relativePositionY=function(a,b){if(b.y<a.top){return b.y-a.top}else if(b.y>a.bottom){return b.y-a.bottom}return 0};goog.math.Box.distance=function(a,b){var c=goog.math.Box.relativePositionX(a,b);var d=goog.math.Box.relativePositionY(a,b);return Math.sqrt(c*c+d*d)};goog.math.Box.intersects=function(a,b){return a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom};goog.math.Box.intersectsWithPadding=function(a,b,c){return a.left<=b.right+c&&b.left<=a.right+c&&a.top<=b.bottom+c&&b.top<=a.bottom+c};goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(a,b){if(a instanceof goog.math.Coordinate){this.left+=a.x;this.right+=a.x;this.top+=a.y;this.bottom+=a.y}else{this.left+=a;this.right+=a;if(goog.isNumber(b)){this.top+=b;this.bottom+=b}}return this};goog.math.Box.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};goog.provide("goog.math.Rect");goog.require("goog.math.Box");goog.require("goog.math.Coordinate");goog.require("goog.math.Size");goog.math.Rect=function(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){var a=this.left+this.width;var b=this.top+this.height;return new goog.math.Box(this.top,a,b,this.left)};goog.math.Rect.createFromPositionAndSize=function(a,b){return new goog.math.Rect(a.x,a.y,b.width,b.height)};goog.math.Rect.createFromBox=function(a){return new goog.math.Rect(a.left,a.top,a.right-a.left,a.bottom-a.top)};if(goog.DEBUG){goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"}}goog.math.Rect.equals=function(a,b){if(a==b){return true}if(!a||!b){return false}return a.left==b.left&&a.width==b.width&&a.top==b.top&&a.height==b.height};goog.math.Rect.prototype.intersection=function(a){var b=Math.max(this.left,a.left);var c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);var e=Math.min(this.top+this.height,a.top+a.height);if(d<=e){this.left=b;this.top=d;this.width=c-b;this.height=e-d;return true}}return false};goog.math.Rect.intersection=function(a,b){var c=Math.max(a.left,b.left);var d=Math.min(a.left+a.width,b.left+b.width);if(c<=d){var e=Math.max(a.top,b.top);var f=Math.min(a.top+a.height,b.top+b.height);if(e<=f){return new goog.math.Rect(c,e,d-c,f-e)}}return null};goog.math.Rect.intersects=function(a,b){return a.left<=b.left+b.width&&b.left<=a.left+a.width&&a.top<=b.top+b.height&&b.top<=a.top+a.height};goog.math.Rect.prototype.intersects=function(a){return goog.math.Rect.intersects(this,a)};goog.math.Rect.difference=function(a,b){var c=goog.math.Rect.intersection(a,b);if(!c||!c.height||!c.width){return[a.clone()]}var d=[];var e=a.top;var f=a.height;var g=a.left+a.width;var h=a.top+a.height;var i=b.left+b.width;var j=b.top+b.height;if(b.top>a.top){d.push(new goog.math.Rect(a.left,a.top,a.width,b.top-a.top));e=b.top;f-=b.top-a.top}if(j<h){d.push(new goog.math.Rect(a.left,j,a.width,h-j));f=j-e}if(b.left>a.left){d.push(new goog.math.Rect(a.left,e,b.left-a.left,f))}if(i<g){d.push(new goog.math.Rect(i,e,g-i,f))}return d};goog.math.Rect.prototype.difference=function(a){return goog.math.Rect.difference(this,a)};goog.math.Rect.prototype.boundingRect=function(a){var b=Math.max(this.left+this.width,a.left+a.width);var c=Math.max(this.top+this.height,a.top+a.height);this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.width=b-this.left;this.height=c-this.top};goog.math.Rect.boundingRect=function(a,b){if(!a||!b){return null}var c=a.clone();c.boundingRect(b);return c};goog.math.Rect.prototype.contains=function(a){if(a instanceof goog.math.Rect){return this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height}else{return a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height}};goog.math.Rect.prototype.squaredDistance=function(a){var b=a.x<this.left?this.left-a.x:Math.max(a.x-(this.left+this.width),0);var c=a.y<this.top?this.top-a.y:Math.max(a.y-(this.top+this.height),0);return b*b+c*c};goog.math.Rect.prototype.distance=function(a){return Math.sqrt(this.squaredDistance(a))};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)};goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)};goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(a,b){if(a instanceof goog.math.Coordinate){this.left+=a.x;this.top+=a.y}else{this.left+=a;if(goog.isNumber(b)){this.top+=b}}return this};goog.math.Rect.prototype.scale=function(a,b){var c=goog.isNumber(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};goog.provide("goog.style");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.NodeType");goog.require("goog.dom.TagName");goog.require("goog.dom.vendor");goog.require("goog.math.Box");goog.require("goog.math.Coordinate");goog.require("goog.math.Rect");goog.require("goog.math.Size");goog.require("goog.object");goog.require("goog.string");goog.require("goog.userAgent");goog.forwardDeclare("goog.events.BrowserEvent");goog.forwardDeclare("goog.events.Event");goog.style.setStyle=function(a,b,c){if(goog.isString(b)){goog.style.setStyle_(a,c,b)}else{for(var d in b){goog.style.setStyle_(a,b[d],d)}}};goog.style.setStyle_=function(a,b,c){var d=goog.style.getVendorJsStyleName_(a,c);if(d){a.style[d]=b}};goog.style.styleNameCache_={};goog.style.getVendorJsStyleName_=function(a,b){var c=goog.style.styleNameCache_[b];if(!c){var d=goog.string.toCamelCase(b);c=d;if(a.style[d]===undefined){var e=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(d);if(a.style[e]!==undefined){c=e}}goog.style.styleNameCache_[b]=c}return c};goog.style.getVendorStyleName_=function(a,b){var c=goog.string.toCamelCase(b);if(a.style[c]===undefined){var d=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(c);if(a.style[d]!==undefined){return goog.dom.vendor.getVendorPrefix()+"-"+b}}return b};goog.style.getStyle=function(a,b){var c=a.style[goog.string.toCamelCase(b)];if(typeof c!=="undefined"){return c}return a.style[goog.style.getVendorJsStyleName_(a,b)]||""};goog.style.getComputedStyle=function(a,b){var c=goog.dom.getOwnerDocument(a);if(c.defaultView&&c.defaultView.getComputedStyle){var d=c.defaultView.getComputedStyle(a,null);if(d){return d[b]||d.getPropertyValue(b)||""}}return""};goog.style.getCascadedStyle=function(a,b){return a.currentStyle?a.currentStyle[b]:null};goog.style.getStyle_=function(a,b){return goog.style.getComputedStyle(a,b)||goog.style.getCascadedStyle(a,b)||a.style&&a.style[b]};goog.style.getComputedBoxSizing=function(a){return goog.style.getStyle_(a,"boxSizing")||goog.style.getStyle_(a,"MozBoxSizing")||goog.style.getStyle_(a,"WebkitBoxSizing")||null};goog.style.getComputedPosition=function(a){return goog.style.getStyle_(a,"position")};goog.style.getBackgroundColor=function(a){return goog.style.getStyle_(a,"backgroundColor")};goog.style.getComputedOverflowX=function(a){return goog.style.getStyle_(a,"overflowX")};goog.style.getComputedOverflowY=function(a){return goog.style.getStyle_(a,"overflowY")};goog.style.getComputedZIndex=function(a){return goog.style.getStyle_(a,"zIndex")};goog.style.getComputedTextAlign=function(a){return goog.style.getStyle_(a,"textAlign")};goog.style.getComputedCursor=function(a){return goog.style.getStyle_(a,"cursor")};goog.style.getComputedTransform=function(a){var b=goog.style.getVendorStyleName_(a,"transform");return goog.style.getStyle_(a,b)||goog.style.getStyle_(a,"transform")};goog.style.setPosition=function(a,b,c){var d,e;if(b instanceof goog.math.Coordinate){d=b.x;e=b.y}else{d=b;e=c}a.style.left=goog.style.getPixelStyleValue_(d,false);a.style.top=goog.style.getPixelStyleValue_(e,false)};goog.style.getPosition=function(a){return new goog.math.Coordinate(a.offsetLeft,a.offsetTop)};goog.style.getClientViewportElement=function(a){var b;if(a){b=goog.dom.getOwnerDocument(a)}else{b=goog.dom.getDocument()}if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)&&!goog.dom.getDomHelper(b).isCss1CompatMode()){return b.body}return b.documentElement};goog.style.getViewportPageOffset=function(a){var b=a.body;var c=a.documentElement;var d=b.scrollLeft||c.scrollLeft;var e=b.scrollTop||c.scrollTop;return new goog.math.Coordinate(d,e)}
;goog.style.getBoundingClientRect_=function(a){var b;try{b=a.getBoundingClientRect()}catch(a){return{left:0,top:0,right:0,bottom:0}}if(goog.userAgent.IE&&a.ownerDocument.body){var c=a.ownerDocument;b.left-=c.documentElement.clientLeft+c.body.clientLeft;b.top-=c.documentElement.clientTop+c.body.clientTop}return b};goog.style.getOffsetParent=function(a){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8)){return a.offsetParent}var b=goog.dom.getOwnerDocument(a);var c=goog.style.getStyle_(a,"position");var d=c=="fixed"||c=="absolute";for(var e=a.parentNode;e&&e!=b;e=e.parentNode){if(e.nodeType==goog.dom.NodeType.DOCUMENT_FRAGMENT&&e.host){e=e.host}c=goog.style.getStyle_(e,"position");d=d&&c=="static"&&e!=b.documentElement&&e!=b.body;if(!d&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight||c=="fixed"||c=="absolute"||c=="relative")){return e}}return null};goog.style.getVisibleRectForElement=function(a){var b=new goog.math.Box(0,Infinity,Infinity,0);var c=goog.dom.getDomHelper(a);var d=c.getDocument().body;var e=c.getDocument().documentElement;var f=c.getDocumentScrollElement();for(var g=a;g=goog.style.getOffsetParent(g);){if((!goog.userAgent.IE||g.clientWidth!=0)&&(!goog.userAgent.WEBKIT||g.clientHeight!=0||g!=d)&&(g!=d&&g!=e&&goog.style.getStyle_(g,"overflow")!="visible")){var h=goog.style.getPageOffset(g);var i=goog.style.getClientLeftTop(g);h.x+=i.x;h.y+=i.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+g.clientWidth);b.bottom=Math.min(b.bottom,h.y+g.clientHeight);b.left=Math.max(b.left,h.x)}}var j=f.scrollLeft,k=f.scrollTop;b.left=Math.max(b.left,j);b.top=Math.max(b.top,k);var l=c.getViewportSize();b.right=Math.min(b.right,j+l.width);b.bottom=Math.min(b.bottom,k+l.height);return b.top>=0&&b.left>=0&&b.bottom>b.top&&b.right>b.left?b:null};goog.style.getContainerOffsetToScrollInto=function(a,b,c){var d=goog.style.getPageOffset(a);var e=goog.style.getPageOffset(b);var f=goog.style.getBorderBox(b);var g=d.x-e.x-f.left;var h=d.y-e.y-f.top;var i=b.clientWidth-a.offsetWidth;var j=b.clientHeight-a.offsetHeight;var k=b.scrollLeft;var l=b.scrollTop;if(b==goog.dom.getDocument().body||b==goog.dom.getDocument().documentElement){k=e.x+f.left;l=e.y+f.top;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)){k+=f.left;l+=f.top}}if(c){k+=g-i/2;l+=h-j/2}else{k+=Math.min(g,Math.max(g-i,0));l+=Math.min(h,Math.max(h-j,0))}return new goog.math.Coordinate(k,l)};goog.style.scrollIntoContainerView=function(a,b,c){var d=goog.style.getContainerOffsetToScrollInto(a,b,c);b.scrollLeft=d.x;b.scrollTop=d.y};goog.style.getClientLeftTop=function(a){return new goog.math.Coordinate(a.clientLeft,a.clientTop)};goog.style.getPageOffset=function(a){var b=goog.dom.getOwnerDocument(a);goog.asserts.assertObject(a,"Parameter is required");var c=new goog.math.Coordinate(0,0);var d=goog.style.getClientViewportElement(b);if(a==d){return c}var e=goog.style.getBoundingClientRect_(a);var f=goog.dom.getDomHelper(b).getDocumentScroll();c.x=e.left+f.x;c.y=e.top+f.y;return c};goog.style.getPageOffsetLeft=function(a){return goog.style.getPageOffset(a).x};goog.style.getPageOffsetTop=function(a){return goog.style.getPageOffset(a).y};goog.style.getFramedPageOffset=function(a,b){var c=new goog.math.Coordinate(0,0);var d=goog.dom.getWindow(goog.dom.getOwnerDocument(a));var e=a;do{var f=d==b?goog.style.getPageOffset(e):goog.style.getClientPositionForElement_(goog.asserts.assert(e));c.x+=f.x;c.y+=f.y}while(d&&d!=b&&d!=d.parent&&(e=d.frameElement)&&(d=d.parent));return c};goog.style.translateRectForAnotherFrame=function(a,b,c){if(b.getDocument()!=c.getDocument()){var d=b.getDocument().body;var e=goog.style.getFramedPageOffset(d,c.getWindow());e=goog.math.Coordinate.difference(e,goog.style.getPageOffset(d));if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)&&!b.isCss1CompatMode()){e=goog.math.Coordinate.difference(e,b.getDocumentScroll())}a.left+=e.x;a.top+=e.y}};goog.style.getRelativePosition=function(a,b){var c=goog.style.getClientPosition(a);var d=goog.style.getClientPosition(b);return new goog.math.Coordinate(c.x-d.x,c.y-d.y)};goog.style.getClientPositionForElement_=function(a){var b=goog.style.getBoundingClientRect_(a);return new goog.math.Coordinate(b.left,b.top)};goog.style.getClientPosition=function(a){goog.asserts.assert(a);if(a.nodeType==goog.dom.NodeType.ELEMENT){return goog.style.getClientPositionForElement_(a)}else{var b=a.changedTouches?a.changedTouches[0]:a;return new goog.math.Coordinate(b.clientX,b.clientY)}};goog.style.setPageOffset=function(a,b,c){var d=goog.style.getPageOffset(a);if(b instanceof goog.math.Coordinate){c=b.y;b=b.x}var e=b-d.x;var f=c-d.y;goog.style.setPosition(a,a.offsetLeft+e,a.offsetTop+f)};goog.style.setSize=function(a,b,c){var d;if(b instanceof goog.math.Size){d=b.height;b=b.width}else{if(c==undefined){throw Error("missing height argument")}d=c}goog.style.setWidth(a,b);goog.style.setHeight(a,d)};goog.style.getPixelStyleValue_=function(a,b){if(typeof a=="number"){a=(b?Math.round(a):a)+"px"}return a};goog.style.setHeight=function(a,b){a.style.height=goog.style.getPixelStyleValue_(b,true)};goog.style.setWidth=function(a,b){a.style.width=goog.style.getPixelStyleValue_(b,true)};goog.style.getSize=function(a){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,a)};goog.style.evaluateWithTemporaryDisplay_=function(a,b){if(goog.style.getStyle_(b,"display")!="none"){return a(b)}var c=b.style;var d=c.display;var e=c.visibility;var f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";var g=a(b);c.display=d;c.position=f;c.visibility=e;return g};goog.style.getSizeWithDisplay_=function(a){var b=a.offsetWidth;var c=a.offsetHeight;var d=goog.userAgent.WEBKIT&&!b&&!c;if((!goog.isDef(b)||d)&&a.getBoundingClientRect){var e=goog.style.getBoundingClientRect_(a);return new goog.math.Size(e.right-e.left,e.bottom-e.top)}return new goog.math.Size(b,c)};goog.style.getTransformedSize=function(a){if(!a.getBoundingClientRect){return null}var b=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,a);return new goog.math.Size(b.right-b.left,b.bottom-b.top)};goog.style.getBounds=function(a){var b=goog.style.getPageOffset(a);var c=goog.style.getSize(a);return new goog.math.Rect(b.x,b.y,c.width,c.height)};goog.style.toCamelCase=function(a){return goog.string.toCamelCase(String(a))};goog.style.toSelectorCase=function(a){return goog.string.toSelectorCase(a)};goog.style.getOpacity=function(a){var b=a.style;var c="";if("opacity"in b){c=b.opacity}else if("MozOpacity"in b){c=b.MozOpacity}else if("filter"in b){var d=b.filter.match(/alpha\(opacity=([\d.]+)\)/);if(d){c=String(d[1]/100)}}return c==""?c:Number(c)};goog.style.setOpacity=function(a,b){var c=a.style;if("opacity"in c){c.opacity=b}else if("MozOpacity"in c){c.MozOpacity=b}else if("filter"in c){if(b===""){c.filter=""}else{c.filter="alpha(opacity="+b*100+")"}}};goog.style.setTransparentBackgroundImage=function(a,b){var c=a.style;if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")){c.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader("+'src="'+b+'", sizingMethod="crop")'}else{c.backgroundImage="url("+b+")";c.backgroundPosition="top left";c.backgroundRepeat="no-repeat"}};goog.style.clearTransparentBackgroundImage=function(a){var b=a.style;if("filter"in b){b.filter=""}else{b.backgroundImage="none"}};goog.style.showElement=function(a,b){goog.style.setElementShown(a,b)};goog.style.setElementShown=function(a,b){a.style.display=b?"":"none"};goog.style.isElementShown=function(a){return a.style.display!="none"};goog.style.installStyles=function(a,b){var c=goog.dom.getDomHelper(b);var d=null;var e=c.getDocument();if(goog.userAgent.IE&&e.createStyleSheet){d=e.createStyleSheet();goog.style.setStyles(d,a)}else{var f=c.getElementsByTagNameAndClass(goog.dom.TagName.HEAD)[0];if(!f){var g=c.getElementsByTagNameAndClass(goog.dom.TagName.BODY)[0];f=c.createDom(goog.dom.TagName.HEAD);g.parentNode.insertBefore(f,g)}d=c.createDom(goog.dom.TagName.STYLE);goog.style.setStyles(d,a);c.appendChild(f,d)}return d};goog.style.uninstallStyles=function(a){var b=a.ownerNode||a.owningElement||a;goog.dom.removeNode(b)};goog.style.setStyles=function(a,b){if(goog.userAgent.IE&&goog.isDef(a.cssText)){a.cssText=b}else{a.innerHTML=b}};goog.style.setPreWrap=function(a){var b=a.style;if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")){b.whiteSpace="pre";b.wordWrap="break-word"}else if(goog.userAgent.GECKO){b.whiteSpace="-moz-pre-wrap"}else{b.whiteSpace="pre-wrap"}};goog.style.setInlineBlock=function(a){var b=a.style;b.position="relative";if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")){b.zoom="1";b.display="inline"}else{b.display="inline-block"}};goog.style.isRightToLeft=function(a){return"rtl"==goog.style.getStyle_(a,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null;goog.style.isUnselectable=function(a){if(goog.style.unselectableStyle_){return a.style[goog.style.unselectableStyle_].toLowerCase()=="none"}else if(goog.userAgent.IE||goog.userAgent.OPERA){return a.getAttribute("unselectable")=="on"}return false};goog.style.setUnselectable=function(a,b,c){var d=!c?a.getElementsByTagName("*"):null;var e=goog.style.unselectableStyle_;if(e){var f=b?"none":"";if(a.style){a.style[e]=f}if(d){for(var g=0,h;h=d[g];g++){if(h.style){h.style[e]=f}}}}else if(goog.userAgent.IE||goog.userAgent.OPERA){var f=b?"on":"";a.setAttribute("unselectable",f);if(d){for(var g=0,h;h=d[g];g++){h.setAttribute("unselectable",f)}}}};goog.style.getBorderBoxSize=function(a){return new goog.math.Size(a.offsetWidth,a.offsetHeight)};goog.style.setBorderBoxSize=function(a,b){var c=goog.dom.getOwnerDocument(a);var d=goog.dom.getDomHelper(c).isCss1CompatMode();if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("10")&&(!d||!goog.userAgent.isVersionOrHigher("8"))){var e=a.style;if(d){var f=goog.style.getPaddingBox(a);var g=goog.style.getBorderBox(a);e.pixelWidth=b.width-g.left-f.left-f.right-g.right;e.pixelHeight=b.height-g.top-f.top-f.bottom-g.bottom}else{e.pixelWidth=b.width;e.pixelHeight=b.height}}else{goog.style.setBoxSizingSize_(a,b,"border-box")}};goog.style.getContentBoxSize=function(a){var b=goog.dom.getOwnerDocument(a);var c=goog.userAgent.IE&&a.currentStyle;if(c&&goog.dom.getDomHelper(b).isCss1CompatMode()&&c.width!="auto"&&c.height!="auto"&&!c.boxSizing){var d=goog.style.getIePixelValue_(a,c.width,"width","pixelWidth");var e=goog.style.getIePixelValue_(a,c.height,"height","pixelHeight");return new goog.math.Size(d,e)}else{var f=goog.style.getBorderBoxSize(a);var g=goog.style.getPaddingBox(a);var h=goog.style.getBorderBox(a);return new goog.math.Size(f.width-h.left-g.left-g.right-h.right,f.height-h.top-g.top-g.bottom-h.bottom)}};goog.style.setContentBoxSize=function(a,b){var c=goog.dom.getOwnerDocument(a);var d=goog.dom.getDomHelper(c).isCss1CompatMode();if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("10")&&(!d||!goog.userAgent.isVersionOrHigher("8"))){var e=a.style;if(d){e.pixelWidth=b.width;e.pixelHeight=b.height}else{var f=goog.style.getPaddingBox(a);var g=goog.style.getBorderBox(a);e.pixelWidth=b.width+g.left+f.left+f.right+g.right;e.pixelHeight=b.height+g.top+f.top+f.bottom+g.bottom}}else{goog.style.setBoxSizingSize_(a,b,"content-box")}};goog.style.setBoxSizingSize_=function(a,b,c){var d=a.style;if(goog.userAgent.GECKO){d.MozBoxSizing=c}else if(goog.userAgent.WEBKIT){d.WebkitBoxSizing=c}else{d.boxSizing=c}d.width=Math.max(b.width,0)+"px";d.height=Math.max(b.height,0)+"px"};goog.style.getIePixelValue_=function(a,b,c,d){if(/^\d+px?$/.test(b)){return parseInt(b,10)}else{var e=a.style[c];var f=a.runtimeStyle[c];a.runtimeStyle[c]=a.currentStyle[c];a.style[c]=b;var g=a.style[d];a.style[c]=e;a.runtimeStyle[c]=f;return g}};goog.style.getIePixelDistance_=function(a,b){var c=goog.style.getCascadedStyle(a,b);return c?goog.style.getIePixelValue_(a,c,"left","pixelLeft"):0};goog.style.getBox_=function(a,b){if(goog.userAgent.IE){var c=goog.style.getIePixelDistance_(a,b+"Left");var d=goog.style.getIePixelDistance_(a,b+"Right");var e=goog.style.getIePixelDistance_(a,b+"Top");var f=goog.style.getIePixelDistance_(a,b+"Bottom");return new goog.math.Box(e,d,f,c)}else{var c=goog.style.getComputedStyle(a,b+"Left");var d=goog.style.getComputedStyle(a,b+"Right");var e=goog.style.getComputedStyle(a,b+"Top");var f=goog.style.getComputedStyle(a,b+"Bottom");return new goog.math.Box(parseFloat(e),parseFloat(d),parseFloat(f),parseFloat(c))}};goog.style.getPaddingBox=function(a){return goog.style.getBox_(a,"padding")};goog.style.getMarginBox=function(a){return goog.style.getBox_(a,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};goog.style.getIePixelBorder_=function(a,b){if(goog.style.getCascadedStyle(a,b+"Style")=="none"){return 0}var c=goog.style.getCascadedStyle(a,b+"Width");if(c in goog.style.ieBorderWidthKeywords_){return goog.style.ieBorderWidthKeywords_[c]}return goog.style.getIePixelValue_(a,c,"left","pixelLeft")};goog.style.getBorderBox=function(a){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var b=goog.style.getIePixelBorder_(a,"borderLeft");var c=goog.style.getIePixelBorder_(a,"borderRight");var d=goog.style.getIePixelBorder_(a,"borderTop");var e=goog.style.getIePixelBorder_(a,"borderBottom");return new goog.math.Box(d,c,e,b)}else{var b=goog.style.getComputedStyle(a,"borderLeftWidth");var c=goog.style.getComputedStyle(a,"borderRightWidth");var d=goog.style.getComputedStyle(a,"borderTopWidth");var e=goog.style.getComputedStyle(a,"borderBottomWidth");return new goog.math.Box(parseFloat(d),parseFloat(c),parseFloat(e),parseFloat(b))}};goog.style.getFontFamily=function(a){var b=goog.dom.getOwnerDocument(a);var c="";if(b.body.createTextRange&&goog.dom.contains(b,a)){var d=b.body.createTextRange();d.moveToElementText(a);try{c=d.queryCommandValue("FontName")}catch(a){c=""}}if(!c){c=goog.style.getStyle_(a,"fontFamily")}var e=c.split(",");if(e.length>1)c=e[0];return goog.string.stripQuotes(c,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;goog.style.getLengthUnits=function(a){var b=a.match(goog.style.lengthUnitRegex_);return b&&b[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,in:1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};goog.style.getFontSize=function(a){var b=goog.style.getStyle_(a,"fontSize");var c=goog.style.getLengthUnits(b);if(b&&"px"==c){return parseInt(b,10)}if(goog.userAgent.IE){if(c in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_){return goog.style.getIePixelValue_(a,b,"left","pixelLeft")}else if(a.parentNode&&a.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&c in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_){var d=a.parentNode;var e=goog.style.getStyle_(d,"fontSize");return goog.style.getIePixelValue_(d,b==e?"1em":b,"left","pixelLeft")}}var f=goog.dom.createDom(goog.dom.TagName.SPAN,{style:"visibility:hidden;position:absolute;"+"line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(a,f);b=f.offsetHeight;goog.dom.removeNode(f);return b};goog.style.parseStyleAttribute=function(a){var b={};goog.array.forEach(a.split(/\s*;\s*/),function(a){var c=a.split(/\s*:\s*/);if(c.length==2){b[goog.string.toCamelCase(c[0].toLowerCase())]=c[1]}});return b};goog.style.toStyleAttribute=function(a){var b=[];goog.object.forEach(a,function(a,c){b.push(goog.string.toSelectorCase(c),":",a,";")});return b.join("")};goog.style.setFloat=function(a,b){a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=b};goog.style.getFloat=function(a){return a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};goog.style.getScrollbarWidth=function(a){var b=goog.dom.createElement(goog.dom.TagName.DIV);if(a){b.className=a}b.style.cssText="overflow:auto;"+"position:absolute;top:0;width:100px;height:100px";var c=goog.dom.createElement(goog.dom.TagName.DIV);goog.style.setSize(c,"200px","200px");b.appendChild(c);goog.dom.appendChild(goog.dom.getDocument().body,b);var d=b.offsetWidth-b.clientWidth;goog.dom.removeNode(b);return d};goog.style.MATRIX_TRANSLATION_REGEX_=new RegExp("matrix\\([0-9\\.\\-]+, [0-9\\.\\-]+, "+"[0-9\\.\\-]+, [0-9\\.\\-]+, "+"([0-9\\.\\-]+)p?x?, ([0-9\\.\\-]+)p?x?\\)");goog.style.getCssTranslation=function(a){var b=goog.style.getComputedTransform(a);if(!b){return new goog.math.Coordinate(0,0)}var c=b.match(goog.style.MATRIX_TRANSLATION_REGEX_);if(!c){return new goog.math.Coordinate(0,0)}return new goog.math.Coordinate(parseFloat(c[1]),parseFloat(c[2]))};goog.provide("ol.MapEvent");goog.provide("ol.MapEventType");goog.require("goog.events.Event");ol.MapEventType={POSTRENDER:"postrender",MOVEEND:"moveend"};ol.MapEvent=function(a,b,c){goog.base(this,a);this.map=b;this.frameState=goog.isDef(c)?c:null};goog.inherits(ol.MapEvent,goog.events.Event);goog.provide("ol.control.Control");goog.require("goog.array");goog.require("goog.dom");goog.require("goog.events");goog.require("ol.MapEventType");goog.require("ol.Object");ol.control.Control=function(a){goog.base(this);this.element=goog.isDef(a.element)?a.element:null;this.target_=null;this.map_=null;this.listenerKeys=[];this.render=goog.isDef(a.render)?a.render:goog.nullFunction;if(goog.isDef(a.target)){this.setTarget(a.target)}};goog.inherits(ol.control.Control,ol.Object);ol.control.Control.prototype.disposeInternal=function(){goog.dom.removeNode(this.element);goog.base(this,"disposeInternal")};ol.control.Control.prototype.getMap=function(){return this.map_};ol.control.Control.prototype.setMap=function(a){if(!goog.isNull(this.map_)){goog.dom.removeNode(this.element)}if(!goog.array.isEmpty(this.listenerKeys)){goog.array.forEach(this.listenerKeys,goog.events.unlistenByKey);this.listenerKeys.length=0}this.map_=a;if(!goog.isNull(this.map_)){var b=!goog.isNull(this.target_)?this.target_:a.getOverlayContainerStopEvent();goog.dom.appendChild(b,this.element);if(this.render!==goog.nullFunction){this.listenerKeys.push(goog.events.listen(a,ol.MapEventType.POSTRENDER,this.render,false,this))}a.render()}};ol.control.Control.prototype.setTarget=function(a){this.target_=goog.dom.getElement(a)};goog.provide("ol.css");ol.css.CLASS_HIDDEN="ol-hidden";ol.css.CLASS_UNSELECTABLE="ol-unselectable";ol.css.CLASS_UNSUPPORTED="ol-unsupported";ol.css.CLASS_CONTROL="ol-control";goog.provide("ol.structs.LRUCache");goog.require("goog.asserts");goog.require("goog.object");ol.structs.LRUCache=function(){this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null};ol.structs.LRUCache.prototype.assertValid=function(){if(this.count_===0){goog.asserts.assert(goog.object.isEmpty(this.entries_),"entries must be an empty object (count = 0)");goog.asserts.assert(goog.isNull(this.oldest_),"oldest must be null (count = 0)");goog.asserts.assert(goog.isNull(this.newest_),"newest must be null (count = 0)")}else{goog.asserts.assert(goog.object.getCount(this.entries_)==this.count_,"number of entries matches count");goog.asserts.assert(!goog.isNull(this.oldest_),"we have an oldest entry");goog.asserts.assert(goog.isNull(this.oldest_.older),"no entry is older than oldest");goog.asserts.assert(!goog.isNull(this.newest_),"we have a newest entry");goog.asserts.assert(goog.isNull(this.newest_.newer),"no entry is newer than newest");var a,b;var c=null;a=0;for(b=this.oldest_;!goog.isNull(b);b=b.newer){goog.asserts.assert(b.older===c,"entry.older links to correct older");c=b;++a}goog.asserts.assert(a==this.count_,"iterated correct amount of times");var d=null;a=0;for(b=this.newest_;!goog.isNull(b);b=b.older){goog.asserts.assert(b.newer===d,"entry.newer links to correct newer");d=b;++a}goog.asserts.assert(a==this.count_,"iterated correct amount of times")}};ol.structs.LRUCache.prototype.clear=function(){this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null};ol.structs.LRUCache.prototype.containsKey=function(a){return this.entries_.hasOwnProperty(a)};ol.structs.LRUCache.prototype.forEach=function(a,b){var c=this.oldest_;while(!goog.isNull(c)){a.call(b,c.value_,c.key_,this);c=c.newer}};ol.structs.LRUCache.prototype.get=function(a){var b=this.entries_[a];goog.asserts.assert(goog.isDef(b),"an entry exists for key %s",a);if(b===this.newest_){return b.value_}else if(b===this.oldest_){this.oldest_=this.oldest_.newer;this.oldest_.older=null}else{b.newer.older=b.older;b.older.newer=b.newer}b.newer=null;b.older=this.newest_;this.newest_.newer=b;this.newest_=b;return b.value_};ol.structs.LRUCache.prototype.getCount=function(){return this.count_};ol.structs.LRUCache.prototype.getKeys=function(){var a=new Array(this.count_);var b=0;var c;for(c=this.newest_;!goog.isNull(c);c=c.older){a[b++]=c.key_}goog.asserts.assert(b==this.count_,"iterated correct number of times");return a};ol.structs.LRUCache.prototype.getValues=function(){var a=new Array(this.count_);var b=0;var c;for(c=this.newest_;!goog.isNull(c);c=c.older){a[b++]=c.value_}goog.asserts.assert(b==this.count_,"iterated correct number of times");return a};ol.structs.LRUCache.prototype.peekLast=function(){goog.asserts.assert(!goog.isNull(this.oldest_),"oldest must not be null");return this.oldest_.value_};ol.structs.LRUCache.prototype.peekLastKey=function(){goog.asserts.assert(!goog.isNull(this.oldest_),"oldest must not be null");return this.oldest_.key_};ol.structs.LRUCache.prototype.pop=function(){goog.asserts.assert(!goog.isNull(this.oldest_),"oldest must not be null");goog.asserts.assert(!goog.isNull(this.newest_),"newest must not be null");var a=this.oldest_;goog.asserts.assert(a.key_ in this.entries_,"oldest is indexed in entries");delete this.entries_[a.key_];if(!goog.isNull(a.newer)){a.newer.older=null}this.oldest_=a.newer;if(goog.isNull(this.oldest_)){this.newest_=null}--this.count_;return a.value_};ol.structs.LRUCache.prototype.set=function(a,b){goog.asserts.assert(!(a in{}),'key is not a standard property of objects (e.g. "__proto__")');goog.asserts.assert(!(a in this.entries_),"key is not used already");var c={key_:a,newer:null,older:this.newest_,value_:b};if(goog.isNull(this.newest_)){this.oldest_=c}else{this.newest_.newer=c}this.newest_=c;this.entries_[a]=c;++this.count_};ol.structs.LRUCacheEntry;goog.provide("ol.TileCache");goog.require("ol");goog.require("ol.TileRange");goog.require("ol.structs.LRUCache");goog.require("ol.tilecoord");ol.TileCache=function(a){goog.base(this);this.highWaterMark_=goog.isDef(a)?a:ol.DEFAULT_TILE_CACHE_HIGH_WATER_MARK};goog.inherits(ol.TileCache,ol.structs.LRUCache);ol.TileCache.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark_};ol.TileCache.prototype.expireCache=function(a){var b,c;while(this.canExpireCache()){b=this.peekLast();c=b.tileCoord[0].toString();if(c in a&&a[c].contains(b.tileCoord)){break}else{this.pop().dispose()}}};ol.TileCache.prototype.pruneTileRange=function(a){var b=this.getCount(),c;while(b--){c=this.peekLastKey();if(a.contains(ol.tilecoord.createFromString(c))){this.pop().dispose()}else{this.get(c)}}};goog.provide("ol.Tile");goog.provide("ol.TileState");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("ol.TileCoord");ol.TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};ol.Tile=function(a,b){goog.base(this);this.tileCoord=a;this.state=b};goog.inherits(ol.Tile,goog.events.EventTarget);ol.Tile.prototype.changed=function(){this.dispatchEvent(goog.events.EventType.CHANGE)};ol.Tile.prototype.getImage=goog.abstractMethod;ol.Tile.prototype.getKey=function(){return goog.getUid(this).toString()};ol.Tile.prototype.getTileCoord=function(){return this.tileCoord};ol.Tile.prototype.getState=function(){return this.state};ol.Tile.prototype.load=goog.abstractMethod;goog.provide("ol.source.Source");goog.provide("ol.source.State");goog.require("ol.Attribution");goog.require("ol.Object");goog.require("ol.proj");ol.source.State={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};ol.source.SourceOptions;ol.source.Source=function(a){goog.base(this);this.projection_=ol.proj.get(a.projection);this.attributions_=goog.isDef(a.attributions)?a.attributions:null;this.logo_=a.logo;this.state_=goog.isDef(a.state)?a.state:ol.source.State.READY;this.wrapX_=goog.isDef(a.wrapX)?a.wrapX:false};goog.inherits(ol.source.Source,ol.Object);ol.source.Source.prototype.forEachFeatureAtCoordinate=goog.nullFunction;ol.source.Source.prototype.getAttributions=function(){return this.attributions_};ol.source.Source.prototype.getLogo=function(){return this.logo_};ol.source.Source.prototype.getProjection=function(){return this.projection_};ol.source.Source.prototype.getResolutions=goog.abstractMethod;ol.source.Source.prototype.getState=function(){return this.state_};ol.source.Source.prototype.getWrapX=function(){return this.wrapX_};ol.source.Source.prototype.setAttributions=function(a){this.attributions_=a;this.changed()};ol.source.Source.prototype.setLogo=function(a){this.logo_=a};ol.source.Source.prototype.setState=function(a){this.state_=a;this.changed()};ol.source.Source.prototype.setProjection=function(a){this.projection_=a};goog.provide("ol.tilegrid.TileGrid");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");goog.require("goog.object");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.TileCoord");goog.require("ol.TileRange");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.extent.Corner");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");goog.require("ol.size");goog.require("ol.tilecoord");ol.tilegrid.TileGrid=function(a){this.minZoom=goog.isDef(a.minZoom)?a.minZoom:0;this.resolutions_=a.resolutions;goog.asserts.assert(goog.array.isSorted(this.resolutions_,function(a,b){return b-a},true),"resolutions must be sorted in descending order");this.maxZoom=this.resolutions_.length-1;this.origin_=goog.isDef(a.origin)?a.origin:null;this.origins_=null;if(goog.isDef(a.origins)){this.origins_=a.origins;goog.asserts.assert(this.origins_.length==this.resolutions_.length,"number of origins and resolutions must be equal")}var b=a.extent;if(goog.isDef(b)&&goog.isNull(this.origin_)&&goog.isNull(this.origins_)){this.origin_=ol.extent.getTopLeft(b)}goog.asserts.assert(goog.isNull(this.origin_)&&!goog.isNull(this.origins_)||!goog.isNull(this.origin_)&&goog.isNull(this.origins_),"either origin or origins must be configured, never both");this.tileSizes_=null;if(goog.isDef(a.tileSizes)){this.tileSizes_=a.tileSizes;goog.asserts.assert(this.tileSizes_.length==this.resolutions_.length,"number of tileSizes and resolutions must be equal")}this.tileSize_=goog.isDef(a.tileSize)?a.tileSize:goog.isNull(this.tileSizes_)?ol.DEFAULT_TILE_SIZE:null;goog.asserts.assert(goog.isNull(this.tileSize_)&&!goog.isNull(this.tileSizes_)||!goog.isNull(this.tileSize_)&&goog.isNull(this.tileSizes_),"either tileSize or tileSizes must be configured, never both");this.extent_=goog.isDef(b)?b:null;this.fullTileRanges_=null;if(goog.isDef(a.sizes)){goog.asserts.assert(a.sizes.length==this.resolutions_.length,"number of sizes and resolutions must be equal");this.fullTileRanges_=goog.array.map(a.sizes,function(a,c){goog.asserts.assert(a[0]!==0,"width must not be 0");goog.asserts.assert(a[1]!==0,"height must not be 0");var d=new ol.TileRange(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(this.minZoom<=c&&c<=this.maxZoom&&goog.isDef(b)){goog.asserts.assert(d.containsTileRange(this.getTileRangeForExtentAndZ(b,c)),"extent tile range must not exceed tilegrid width and height")}return d},this)}else if(goog.isDefAndNotNull(b)){this.calculateTileRanges_(b)}this.tmpSize_=[0,0]};ol.tilegrid.TileGrid.tmpTileCoord_=[0,0,0];ol.tilegrid.TileGrid.prototype.forEachTileCoordParentTileRange=function(a,b,c,d,e){var f=this.getTileCoordExtent(a,e);var g=a[0]-1;while(g>=this.minZoom){if(b.call(c,g,this.getTileRangeForExtentAndZ(f,g,d))){return true}--g}return false};ol.tilegrid.TileGrid.prototype.getExtent=function(){return this.extent_};ol.tilegrid.TileGrid.prototype.getMaxZoom=function(){return this.maxZoom};ol.tilegrid.TileGrid.prototype.getMinZoom=function(){return this.minZoom};ol.tilegrid.TileGrid.prototype.getOrigin=function(a){if(!goog.isNull(this.origin_)){return this.origin_}else{goog.asserts.assert(!goog.isNull(this.origins_),"origins cannot be null if origin is null");goog.asserts.assert(this.minZoom<=a&&a<=this.maxZoom,"given z is not in allowed range (%s <= %s <= %s)",this.minZoom,a,this.maxZoom);return this.origins_[a]}};ol.tilegrid.TileGrid.prototype.getResolution=function(a){goog.asserts.assert(this.minZoom<=a&&a<=this.maxZoom,"given z is not in allowed range (%s <= %s <= %s)",this.minZoom,a,this.maxZoom);return this.resolutions_[a]};ol.tilegrid.TileGrid.prototype.getResolutions=function(){return this.resolutions_};ol.tilegrid.TileGrid.prototype.getTileCoordChildTileRange=function(a,b,c){if(a[0]<this.maxZoom){var d=this.getTileCoordExtent(a,c);return this.getTileRangeForExtentAndZ(d,a[0]+1,b)}else{return null}};ol.tilegrid.TileGrid.prototype.getTileRangeExtent=function(a,b,c){var d=this.getOrigin(a);var e=this.getResolution(a);var f=ol.size.toSize(this.getTileSize(a),this.tmpSize_);var g=d[0]+b.minX*f[0]*e;var h=d[0]+(b.maxX+1)*f[0]*e;var i=d[1]+b.minY*f[1]*e;var j=d[1]+(b.maxY+1)*f[1]*e;return ol.extent.createOrUpdate(g,i,h,j,c)};ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndResolution=function(a,b,c){var d=ol.tilegrid.TileGrid.tmpTileCoord_;this.getTileCoordForXYAndResolution_(a[0],a[1],b,false,d);var e=d[1];var f=d[2];this.getTileCoordForXYAndResolution_(a[2],a[3],b,true,d);return ol.TileRange.createOrUpdate(e,d[1],f,d[2],c)};ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndZ=function(a,b,c){var d=this.getResolution(b);return this.getTileRangeForExtentAndResolution(a,d,c)};ol.tilegrid.TileGrid.prototype.getTileCoordCenter=function(a){var b=this.getOrigin(a[0]);var c=this.getResolution(a[0]);var d=ol.size.toSize(this.getTileSize(a[0]),this.tmpSize_);return[b[0]+(a[1]+.5)*d[0]*c,b[1]+(a[2]+.5)*d[1]*c]};ol.tilegrid.TileGrid.prototype.getTileCoordExtent=function(a,b){var c=this.getOrigin(a[0]);var d=this.getResolution(a[0]);var e=ol.size.toSize(this.getTileSize(a[0]),this.tmpSize_);var f=c[0]+a[1]*e[0]*d;var g=c[1]+a[2]*e[1]*d;var h=f+e[0]*d;var i=g+e[1]*d;return ol.extent.createOrUpdate(f,g,h,i,b)};ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution=function(a,b,c){return this.getTileCoordForXYAndResolution_(a[0],a[1],b,false,c)};ol.tilegrid.TileGrid.prototype.getTileCoordForXYAndResolution_=function(a,b,c,d,e){var f=this.getZForResolution(c);var g=c/this.getResolution(f);var h=this.getOrigin(f);var i=ol.size.toSize(this.getTileSize(f),this.tmpSize_);var j=d?.5:0;var k=d?0:.5;var l=Math.floor((a-h[0])/c+j);var m=Math.floor((b-h[1])/c+k);var n=g*l/i[0];var o=g*m/i[1];if(d){n=Math.ceil(n)-1;o=Math.ceil(o)-1}else{n=Math.floor(n);o=Math.floor(o)}return ol.tilecoord.createOrUpdate(f,n,o,e)};ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ=function(a,b,c){var d=this.getResolution(b);return this.getTileCoordForXYAndResolution_(a[0],a[1],d,false,c)};ol.tilegrid.TileGrid.prototype.getTileCoordResolution=function(a){goog.asserts.assert(this.minZoom<=a[0]&&a[0]<=this.maxZoom,"z of given tilecoord is not in allowed range (%s <= %s <= %s",this.minZoom,a[0],this.maxZoom);return this.resolutions_[a[0]]};ol.tilegrid.TileGrid.prototype.getTileSize=function(a){if(!goog.isNull(this.tileSize_)){return this.tileSize_}else{goog.asserts.assert(!goog.isNull(this.tileSizes_),"tileSizes cannot be null if tileSize is null");goog.asserts.assert(this.minZoom<=a&&a<=this.maxZoom,"z is not in allowed range (%s <= %s <= %s",this.minZoom,a,this.maxZoom);return this.tileSizes_[a]}};ol.tilegrid.TileGrid.prototype.getFullTileRange=function(a){if(goog.isNull(this.fullTileRanges_)){return null}else{goog.asserts.assert(this.minZoom<=a&&a<=this.maxZoom,"z is not in allowed range (%s <= %s <= %s",this.minZoom,a,this.maxZoom);return this.fullTileRanges_[a]}}
;ol.tilegrid.TileGrid.prototype.getZForResolution=function(a){var b=ol.array.linearFindNearest(this.resolutions_,a,0);return goog.math.clamp(b,this.minZoom,this.maxZoom)};ol.tilegrid.TileGrid.prototype.calculateTileRanges_=function(a){var b=this.resolutions_.length;var c=new Array(b);for(var d=this.minZoom;d<b;++d){c[d]=this.getTileRangeForExtentAndZ(a,d)}this.fullTileRanges_=c};ol.tilegrid.getForProjection=function(a){var b=a.getDefaultTileGrid();if(goog.isNull(b)){b=ol.tilegrid.createForProjection(a);a.setDefaultTileGrid(b)}return b};ol.tilegrid.createForExtent=function(a,b,c,d){var e=goog.isDef(d)?d:ol.extent.Corner.TOP_LEFT;var f=ol.tilegrid.resolutionsFromExtent(a,b,c);return new ol.tilegrid.TileGrid({extent:a,origin:ol.extent.getCorner(a,e),resolutions:f,tileSize:c})};ol.tilegrid.createXYZ=function(a){var b={};goog.object.extend(b,goog.isDef(a)?a:{});if(!goog.isDef(b.extent)){b.extent=ol.proj.get("EPSG:3857").getExtent()}b.resolutions=ol.tilegrid.resolutionsFromExtent(b.extent,b.maxZoom,b.tileSize);delete b.maxZoom;return new ol.tilegrid.TileGrid(b)};ol.tilegrid.resolutionsFromExtent=function(a,b,c){var d=goog.isDef(b)?b:ol.DEFAULT_MAX_ZOOM;var e=ol.extent.getHeight(a);var f=ol.extent.getWidth(a);var g=ol.size.toSize(goog.isDef(c)?c:ol.DEFAULT_TILE_SIZE);var h=Math.max(f/g[0],e/g[1]);var i=d+1;var j=new Array(i);for(var k=0;k<i;++k){j[k]=h/Math.pow(2,k)}return j};ol.tilegrid.createForProjection=function(a,b,c,d){var e=ol.tilegrid.extentFromProjection(a);return ol.tilegrid.createForExtent(e,b,c,d)};ol.tilegrid.extentFromProjection=function(a){a=ol.proj.get(a);var b=a.getExtent();if(goog.isNull(b)){var c=180*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/a.getMetersPerUnit();b=ol.extent.createOrUpdate(-c,-c,c,c)}return b};goog.provide("ol.source.Tile");goog.provide("ol.source.TileEvent");goog.provide("ol.source.TileOptions");goog.require("goog.asserts");goog.require("goog.events.Event");goog.require("ol.Attribution");goog.require("ol.Extent");goog.require("ol.TileCache");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.size");goog.require("ol.source.Source");goog.require("ol.tilecoord");goog.require("ol.tilegrid.TileGrid");ol.source.TileOptions;ol.source.Tile=function(a){goog.base(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state,wrapX:a.wrapX});this.opaque_=goog.isDef(a.opaque)?a.opaque:false;this.tilePixelRatio_=goog.isDef(a.tilePixelRatio)?a.tilePixelRatio:1;this.tileGrid=goog.isDef(a.tileGrid)?a.tileGrid:null;this.tileCache=new ol.TileCache;this.tmpSize=[0,0]};goog.inherits(ol.source.Tile,ol.source.Source);ol.source.Tile.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()};ol.source.Tile.prototype.expireCache=function(a){this.tileCache.expireCache(a)};ol.source.Tile.prototype.forEachLoadedTile=function(a,b,c){var d=true;var e,f,g;for(var h=b.minX;h<=b.maxX;++h){for(var i=b.minY;i<=b.maxY;++i){f=this.getKeyZXY(a,h,i);g=false;if(this.tileCache.containsKey(f)){e=this.tileCache.get(f);g=e.getState()===ol.TileState.LOADED;if(g){g=c(e)!==false}}if(!g){d=false}}}return d};ol.source.Tile.prototype.getGutter=function(){return 0};ol.source.Tile.prototype.getKeyZXY=ol.tilecoord.getKeyZXY;ol.source.Tile.prototype.getOpaque=function(){return this.opaque_};ol.source.Tile.prototype.getResolutions=function(){return this.tileGrid.getResolutions()};ol.source.Tile.prototype.getTile=goog.abstractMethod;ol.source.Tile.prototype.getTileGrid=function(){return this.tileGrid};ol.source.Tile.prototype.getTileGridForProjection=function(a){if(goog.isNull(this.tileGrid)){return ol.tilegrid.getForProjection(a)}else{return this.tileGrid}};ol.source.Tile.prototype.getTilePixelSize=function(a,b,c){var d=this.getTileGridForProjection(c);return ol.size.scale(ol.size.toSize(d.getTileSize(a),this.tmpSize),this.tilePixelRatio_,this.tmpSize)};ol.source.Tile.prototype.getTileCoordForTileUrlFunction=function(a,b){var c=goog.isDef(b)?b:this.getProjection();var d=this.getTileGridForProjection(c);goog.asserts.assert(!goog.isNull(d),"tile grid needed");if(this.getWrapX()&&c.isGlobal()){a=ol.tilecoord.wrapX(a,d,c)}return ol.tilecoord.withinExtentAndZ(a,d)?a:null};ol.source.Tile.prototype.useTile=goog.nullFunction;ol.source.TileEvent=function(a,b){goog.base(this,a);this.tile=b};goog.inherits(ol.source.TileEvent,goog.events.Event);ol.source.TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};goog.provide("ol.control.Attribution");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("goog.style");goog.require("ol.Attribution");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.source.Tile");ol.control.Attribution=function(a){var b=goog.isDef(a)?a:{};this.ulElement_=goog.dom.createElement(goog.dom.TagName.UL);this.logoLi_=goog.dom.createElement(goog.dom.TagName.LI);goog.dom.appendChild(this.ulElement_,this.logoLi_);goog.style.setElementShown(this.logoLi_,false);this.collapsed_=goog.isDef(b.collapsed)?b.collapsed:true;this.collapsible_=goog.isDef(b.collapsible)?b.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var c=goog.isDef(b.className)?b.className:"ol-attribution";var d=goog.isDef(b.tipLabel)?b.tipLabel:"Attributions";var e=goog.isDef(b.collapseLabel)?b.collapseLabel:"»";this.collapseLabel_=goog.isString(e)?goog.dom.createDom(goog.dom.TagName.SPAN,{},e):e;var f=goog.isDef(b.label)?b.label:"i";this.label_=goog.isString(f)?goog.dom.createDom(goog.dom.TagName.SPAN,{},f):f;var g=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;var h=goog.dom.createDom(goog.dom.TagName.BUTTON,{type:"button",title:d},g);goog.events.listen(h,goog.events.EventType.CLICK,this.handleClick_,false,this);goog.events.listen(h,[goog.events.EventType.MOUSEOUT,goog.events.EventType.FOCUSOUT],function(){this.blur()},false);var i=c+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible");var j=goog.dom.createDom(goog.dom.TagName.DIV,i,this.ulElement_,h);var k=goog.isDef(b.render)?b.render:ol.control.Attribution.render;goog.base(this,{element:j,render:k,target:b.target});this.renderedVisible_=true;this.attributionElements_={};this.attributionElementRenderedVisible_={};this.logoElements_={}};goog.inherits(ol.control.Attribution,ol.control.Control);ol.control.Attribution.prototype.getSourceAttributions=function(a){var b,c,d,e,f,g,h,i,j,k;var l;var m=a.layerStatesArray;var n=goog.object.clone(a.attributions);var o={};var p=a.viewState.projection;goog.asserts.assert(!goog.isNull(p),"projection cannot be null");for(b=0,c=m.length;b<c;b++){g=m[b].layer.getSource();if(goog.isNull(g)){continue}k=goog.getUid(g).toString();j=g.getAttributions();if(goog.isNull(j)){continue}for(d=0,e=j.length;d<e;d++){h=j[d];i=goog.getUid(h).toString();if(i in n){continue}f=a.usedTiles[k];if(goog.isDef(f)){goog.asserts.assertInstanceof(g,ol.source.Tile,"source should be an ol.source.Tile");var q=g.getTileGridForProjection(p);goog.asserts.assert(!goog.isNull(q),"tileGrid cannot be null");l=h.intersectsAnyTileRange(f,q,p)}else{l=false}if(l){if(i in o){delete o[i]}n[i]=h}else{o[i]=h}}}return[n,o]};ol.control.Attribution.render=function(a){this.updateElement_(a.frameState)};ol.control.Attribution.prototype.updateElement_=function(a){if(goog.isNull(a)){if(this.renderedVisible_){goog.style.setElementShown(this.element,false);this.renderedVisible_=false}return}var b=this.getSourceAttributions(a);var c=b[0];var d=b[1];var e,f;for(f in this.attributionElements_){if(f in c){if(!this.attributionElementRenderedVisible_[f]){goog.style.setElementShown(this.attributionElements_[f],true);this.attributionElementRenderedVisible_[f]=true}delete c[f]}else if(f in d){if(this.attributionElementRenderedVisible_[f]){goog.style.setElementShown(this.attributionElements_[f],false);delete this.attributionElementRenderedVisible_[f]}delete d[f]}else{goog.dom.removeNode(this.attributionElements_[f]);delete this.attributionElements_[f];delete this.attributionElementRenderedVisible_[f]}}for(f in c){e=goog.dom.createElement(goog.dom.TagName.LI);e.innerHTML=c[f].getHTML();goog.dom.appendChild(this.ulElement_,e);this.attributionElements_[f]=e;this.attributionElementRenderedVisible_[f]=true}for(f in d){e=goog.dom.createElement(goog.dom.TagName.LI);e.innerHTML=d[f].getHTML();goog.style.setElementShown(e,false);goog.dom.appendChild(this.ulElement_,e);this.attributionElements_[f]=e}var g=!goog.object.isEmpty(this.attributionElementRenderedVisible_)||!goog.object.isEmpty(a.logos);if(this.renderedVisible_!=g){goog.style.setElementShown(this.element,g);this.renderedVisible_=g}if(g&&goog.object.isEmpty(this.attributionElementRenderedVisible_)){goog.dom.classlist.add(this.element,"ol-logo-only")}else{goog.dom.classlist.remove(this.element,"ol-logo-only")}this.insertLogos_(a)};ol.control.Attribution.prototype.insertLogos_=function(a){var b;var c=a.logos;var d=this.logoElements_;for(b in d){if(!(b in c)){goog.dom.removeNode(d[b]);delete d[b]}}var e,f,g;for(g in c){if(!(g in d)){e=new Image;e.src=g;var h=c[g];if(h===""){f=e}else{f=goog.dom.createDom(goog.dom.TagName.A,{href:h});f.appendChild(e)}goog.dom.appendChild(this.logoLi_,f);d[g]=f}}goog.style.setElementShown(this.logoLi_,!goog.object.isEmpty(c))};ol.control.Attribution.prototype.handleClick_=function(a){a.preventDefault();this.handleToggle_()};ol.control.Attribution.prototype.handleToggle_=function(){goog.dom.classlist.toggle(this.element,"ol-collapsed");if(this.collapsed_){goog.dom.replaceNode(this.collapseLabel_,this.label_)}else{goog.dom.replaceNode(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_};ol.control.Attribution.prototype.getCollapsible=function(){return this.collapsible_};ol.control.Attribution.prototype.setCollapsible=function(a){if(this.collapsible_===a){return}this.collapsible_=a;goog.dom.classlist.toggle(this.element,"ol-uncollapsible");if(!a&&this.collapsed_){this.handleToggle_()}};ol.control.Attribution.prototype.setCollapsed=function(a){if(!this.collapsible_||this.collapsed_===a){return}this.handleToggle_()};ol.control.Attribution.prototype.getCollapsed=function(){return this.collapsed_};goog.provide("ol.control.Rotate");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.math");goog.require("ol.animation");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.easing");ol.control.Rotate=function(a){var b=goog.isDef(a)?a:{};var c=goog.isDef(b.className)?b.className:"ol-rotate";var d=goog.isDef(b.label)?b.label:"⇧";this.label_=null;if(goog.isString(d)){this.label_=goog.dom.createDom(goog.dom.TagName.SPAN,"ol-compass",d)}else{this.label_=d;goog.dom.classlist.add(this.label_,"ol-compass")}var e=goog.isDef(b.tipLabel)?b.tipLabel:"Reset rotation";var f=goog.dom.createDom(goog.dom.TagName.BUTTON,{class:c+"-reset",type:"button",title:e},this.label_);goog.events.listen(f,goog.events.EventType.CLICK,ol.control.Rotate.prototype.handleClick_,false,this);var g=c+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL;var h=goog.dom.createDom(goog.dom.TagName.DIV,g,f);var i=goog.isDef(b.render)?b.render:ol.control.Rotate.render;goog.base(this,{element:h,render:i,target:b.target});this.duration_=goog.isDef(b.duration)?b.duration:250;this.autoHide_=goog.isDef(b.autoHide)?b.autoHide:true;this.rotation_=undefined;if(this.autoHide_){goog.dom.classlist.add(this.element,ol.css.CLASS_HIDDEN)}};goog.inherits(ol.control.Rotate,ol.control.Control);ol.control.Rotate.prototype.handleClick_=function(a){a.preventDefault();this.resetNorth_()};ol.control.Rotate.prototype.resetNorth_=function(){var a=this.getMap();var b=a.getView();if(goog.isNull(b)){return}var c=b.getRotation();while(c<-Math.PI){c+=2*Math.PI}while(c>Math.PI){c-=2*Math.PI}if(goog.isDef(c)){if(this.duration_>0){a.beforeRender(ol.animation.rotate({rotation:c,duration:this.duration_,easing:ol.easing.easeOut}))}b.setRotation(0)}};ol.control.Rotate.render=function(a){var b=a.frameState;if(goog.isNull(b)){return}var c=b.viewState.rotation;if(c!=this.rotation_){var d="rotate("+goog.math.toDegrees(c)+"deg)";if(this.autoHide_){goog.dom.classlist.enable(this.element,ol.css.CLASS_HIDDEN,c===0)}this.label_.style.msTransform=d;this.label_.style.webkitTransform=d;this.label_.style.transform=d}this.rotation_=c};goog.provide("ol.control.Zoom");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.animation");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.easing");ol.control.Zoom=function(a){var b=goog.isDef(a)?a:{};var c=goog.isDef(b.className)?b.className:"ol-zoom";var d=goog.isDef(b.delta)?b.delta:1;var e=goog.isDef(b.zoomInLabel)?b.zoomInLabel:"+";var f=goog.isDef(b.zoomOutLabel)?b.zoomOutLabel:"−";var g=goog.isDef(b.zoomInTipLabel)?b.zoomInTipLabel:"Zoom in";var h=goog.isDef(b.zoomOutTipLabel)?b.zoomOutTipLabel:"Zoom out";var i=goog.dom.createDom(goog.dom.TagName.BUTTON,{class:c+"-in",type:"button",title:g},e);goog.events.listen(i,goog.events.EventType.CLICK,goog.partial(ol.control.Zoom.prototype.handleClick_,d),false,this);var j=goog.dom.createDom(goog.dom.TagName.BUTTON,{class:c+"-out",type:"button",title:h},f);goog.events.listen(j,goog.events.EventType.CLICK,goog.partial(ol.control.Zoom.prototype.handleClick_,-d),false,this);goog.events.listen(j,[goog.events.EventType.MOUSEOUT,goog.events.EventType.FOCUSOUT],function(){this.blur()},false);var k=c+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL;var l=goog.dom.createDom(goog.dom.TagName.DIV,k,i,j);goog.base(this,{element:l,target:b.target});this.duration_=goog.isDef(b.duration)?b.duration:250};goog.inherits(ol.control.Zoom,ol.control.Control);ol.control.Zoom.prototype.handleClick_=function(a,b){b.preventDefault();this.zoomByDelta_(a)};ol.control.Zoom.prototype.zoomByDelta_=function(a){var b=this.getMap();var c=b.getView();if(goog.isNull(c)){return}var d=c.getResolution();if(goog.isDef(d)){if(this.duration_>0){b.beforeRender(ol.animation.zoom({resolution:d,duration:this.duration_,easing:ol.easing.easeOut}))}var e=c.constrainResolution(d,a);c.setResolution(e)}};goog.provide("ol.control");goog.require("ol.Collection");goog.require("ol.control.Attribution");goog.require("ol.control.Rotate");goog.require("ol.control.Zoom");ol.control.defaults=function(a){var b=goog.isDef(a)?a:{};var c=new ol.Collection;var d=goog.isDef(b.zoom)?b.zoom:true;if(d){c.push(new ol.control.Zoom(b.zoomOptions))}var e=goog.isDef(b.rotate)?b.rotate:true;if(e){c.push(new ol.control.Rotate(b.rotateOptions))}var f=goog.isDef(b.attribution)?b.attribution:true;if(f){c.push(new ol.control.Attribution(b.attributionOptions))}return c};goog.provide("goog.dom.fullscreen");goog.provide("goog.dom.fullscreen.EventType");goog.require("goog.dom");goog.require("goog.userAgent");goog.dom.fullscreen.EventType={CHANGE:function(){if(goog.userAgent.WEBKIT){return"webkitfullscreenchange"}if(goog.userAgent.GECKO){return"mozfullscreenchange"}if(goog.userAgent.IE){return"MSFullscreenChange"}return"fullscreenchange"}()};goog.dom.fullscreen.isSupported=function(a){var b=goog.dom.fullscreen.getDocument_(a);var c=b.body;return!!(c.webkitRequestFullscreen||c.mozRequestFullScreen&&b.mozFullScreenEnabled||c.msRequestFullscreen&&b.msFullscreenEnabled||c.requestFullscreen&&b.fullscreenEnabled)};goog.dom.fullscreen.requestFullScreen=function(a){if(a.webkitRequestFullscreen){a.webkitRequestFullscreen()}else if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else if(a.msRequestFullscreen){a.msRequestFullscreen()}else if(a.requestFullscreen){a.requestFullscreen()}};goog.dom.fullscreen.requestFullScreenWithKeys=function(a){if(a.mozRequestFullScreenWithKeys){a.mozRequestFullScreenWithKeys()}else if(a.webkitRequestFullscreen){a.webkitRequestFullscreen()}else{goog.dom.fullscreen.requestFullScreen(a)}};goog.dom.fullscreen.exitFullScreen=function(a){var b=goog.dom.fullscreen.getDocument_(a);if(b.webkitCancelFullScreen){b.webkitCancelFullScreen()}else if(b.mozCancelFullScreen){b.mozCancelFullScreen()}else if(b.msExitFullscreen){b.msExitFullscreen()}else if(b.exitFullscreen){b.exitFullscreen()}};goog.dom.fullscreen.isFullScreen=function(a){var b=goog.dom.fullscreen.getDocument_(a);return!!(b.webkitIsFullScreen||b.mozFullScreen||b.msFullscreenElement||b.fullscreenElement)};goog.dom.fullscreen.getFullScreenElement=function(a){var b=goog.dom.fullscreen.getDocument_(a);var c=[b.webkitFullscreenElement,b.mozFullScreenElement,b.msFullscreenElement,b.fullscreenElement];for(var d=0;d<c.length;d++){if(c[d]!=null){return c[d]}}return null};goog.dom.fullscreen.getDocument_=function(a){return a?a.getDocument():goog.dom.getDomHelper().getDocument()};goog.provide("ol.control.FullScreen");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.dom.fullscreen");goog.require("goog.dom.fullscreen.EventType");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.control.Control");goog.require("ol.css");ol.control.FullScreen=function(a){var b=goog.isDef(a)?a:{};this.cssClassName_=goog.isDef(b.className)?b.className:"ol-full-screen";var c=goog.isDef(b.label)?b.label:"↔";this.labelNode_=goog.isString(c)?goog.dom.createTextNode(c):c;var d=goog.isDef(b.labelActive)?b.labelActive:"×";this.labelActiveNode_=goog.isString(d)?goog.dom.createTextNode(d):d;var e=goog.isDef(b.tipLabel)?b.tipLabel:"Toggle full-screen";var f=goog.dom.createDom(goog.dom.TagName.BUTTON,{class:this.cssClassName_+"-"+goog.dom.fullscreen.isFullScreen(),type:"button",title:e},this.labelNode_);goog.events.listen(f,goog.events.EventType.CLICK,this.handleClick_,false,this);goog.events.listen(goog.global.document,goog.dom.fullscreen.EventType.CHANGE,this.handleFullScreenChange_,false,this);var g=this.cssClassName_+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+" "+(!goog.dom.fullscreen.isSupported()?ol.css.CLASS_UNSUPPORTED:"");var h=goog.dom.createDom(goog.dom.TagName.DIV,g,f);goog.base(this,{element:h,target:b.target});this.keys_=goog.isDef(b.keys)?b.keys:false};goog.inherits(ol.control.FullScreen,ol.control.Control);ol.control.FullScreen.prototype.handleClick_=function(a){a.preventDefault();this.handleFullScreen_()};ol.control.FullScreen.prototype.handleFullScreen_=function(){if(!goog.dom.fullscreen.isSupported()){return}var a=this.getMap();if(goog.isNull(a)){return}if(goog.dom.fullscreen.isFullScreen()){goog.dom.fullscreen.exitFullScreen()}else{var b=a.getTarget();goog.asserts.assert(goog.isDefAndNotNull(b),"target should be defined");var c=goog.dom.getElement(b);goog.asserts.assert(goog.isDefAndNotNull(c),"element should be defined");if(this.keys_){goog.dom.fullscreen.requestFullScreenWithKeys(c)}else{goog.dom.fullscreen.requestFullScreen(c)}}};ol.control.FullScreen.prototype.handleFullScreenChange_=function(){var a=this.cssClassName_+"-true";var b=this.cssClassName_+"-false";var c=goog.dom.getFirstElementChild(this.element);var d=this.getMap();if(goog.dom.fullscreen.isFullScreen()){goog.dom.classlist.swap(c,b,a);goog.dom.replaceNode(this.labelActiveNode_,this.labelNode_)}else{goog.dom.classlist.swap(c,a,b);goog.dom.replaceNode(this.labelNode_,this.labelActiveNode_)}if(!goog.isNull(d)){d.updateSize()}};goog.provide("ol.Pixel");ol.Pixel;goog.provide("ol.control.MousePosition");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.CoordinateFormatType");goog.require("ol.Object");goog.require("ol.Pixel");goog.require("ol.TransformFunction");goog.require("ol.control.Control");goog.require("ol.proj");goog.require("ol.proj.Projection");ol.control.MousePositionProperty={PROJECTION:"projection",COORDINATE_FORMAT:"coordinateFormat"};ol.control.MousePosition=function(a){var b=goog.isDef(a)?a:{};var c=goog.isDef(b.className)?b.className:"ol-mouse-position";var d=goog.dom.createDom(goog.dom.TagName.DIV,c);var e=goog.isDef(b.render)?b.render:ol.control.MousePosition.render;goog.base(this,{element:d,render:e,target:b.target});goog.events.listen(this,ol.Object.getChangeEventType(ol.control.MousePositionProperty.PROJECTION),this.handleProjectionChanged_,false,this);if(goog.isDef(b.coordinateFormat)){this.setCoordinateFormat(b.coordinateFormat)}if(goog.isDef(b.projection)){this.setProjection(ol.proj.get(b.projection))}this.undefinedHTML_=goog.isDef(b.undefinedHTML)?b.undefinedHTML:"";this.renderedHTML_=d.innerHTML;this.mapProjection_=null;this.transform_=null;this.lastMouseMovePixel_=null};goog.inherits(ol.control.MousePosition,ol.control.Control);ol.control.MousePosition.render=function(a){var b=a.frameState;if(goog.isNull(b)){this.mapProjection_=null}else{if(this.mapProjection_!=b.viewState.projection){this.mapProjection_=b.viewState.projection;this.transform_=null}}this.updateHTML_(this.lastMouseMovePixel_)};ol.control.MousePosition.prototype.handleProjectionChanged_=function(){this.transform_=null};ol.control.MousePosition.prototype.getCoordinateFormat=function(){return this.get(ol.control.MousePositionProperty.COORDINATE_FORMAT)};ol.control.MousePosition.prototype.getProjection=function(){return this.get(ol.control.MousePositionProperty.PROJECTION)};ol.control.MousePosition.prototype.handleMouseMove=function(a){var b=this.getMap();this.lastMouseMovePixel_=b.getEventPixel(a.getBrowserEvent());this.updateHTML_(this.lastMouseMovePixel_)};ol.control.MousePosition.prototype.handleMouseOut=function(a){this.updateHTML_(null);this.lastMouseMovePixel_=null};ol.control.MousePosition.prototype.setMap=function(a){goog.base(this,"setMap",a);if(!goog.isNull(a)){var b=a.getViewport();this.listenerKeys.push(goog.events.listen(b,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,false,this),goog.events.listen(b,goog.events.EventType.MOUSEOUT,this.handleMouseOut,false,this))}};ol.control.MousePosition.prototype.setCoordinateFormat=function(a){this.set(ol.control.MousePositionProperty.COORDINATE_FORMAT,a)};ol.control.MousePosition.prototype.setProjection=function(a){this.set(ol.control.MousePositionProperty.PROJECTION,a)};ol.control.MousePosition.prototype.updateHTML_=function(a){var b=this.undefinedHTML_;if(!goog.isNull(a)&&!goog.isNull(this.mapProjection_)){if(goog.isNull(this.transform_)){var c=this.getProjection();if(goog.isDef(c)){this.transform_=ol.proj.getTransformFromProjections(this.mapProjection_,c)}else{this.transform_=ol.proj.identityTransform}}var d=this.getMap();var e=d.getCoordinateFromPixel(a);if(!goog.isNull(e)){this.transform_(e,e);var f=this.getCoordinateFormat();if(goog.isDef(f)){b=f(e)}else{b=e.toString()}}}if(!goog.isDef(this.renderedHTML_)||b!=this.renderedHTML_){this.element.innerHTML=b;this.renderedHTML_=b}};goog.provide("goog.async.AnimationDelay");goog.require("goog.Disposable");goog.require("goog.events");goog.require("goog.functions");goog.async.AnimationDelay=function(a,b,c){goog.async.AnimationDelay.base(this,"constructor");this.id_=null;this.usingListeners_=false;this.listener_=a;this.handler_=c;this.win_=b||window;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.AnimationDelay,goog.Disposable);goog.async.AnimationDelay.TIMEOUT=20;goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint";goog.async.AnimationDelay.prototype.start=function(){this.stop();this.usingListeners_=false;var a=this.getRaf_();var b=this.getCancelRaf_();if(a&&!b&&this.win_.mozRequestAnimationFrame){this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_);this.win_.mozRequestAnimationFrame(null);this.usingListeners_=true}else if(a&&b){this.id_=a.call(this.win_,this.callback_)}else{this.id_=this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)}};goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var a=this.getRaf_();var b=this.getCancelRaf_();if(a&&!b&&this.win_.mozRequestAnimationFrame){goog.events.unlistenByKey(this.id_)}else if(a&&b){b.call(this.win_,this.id_)}else{this.win_.clearTimeout(this.id_)}}this.id_=null};goog.async.AnimationDelay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.AnimationDelay.prototype.fireIfActive=function(){if(this.isActive()){this.fire()}};goog.async.AnimationDelay.prototype.isActive=function(){return this.id_!=null};goog.async.AnimationDelay.prototype.doAction_=function(){if(this.usingListeners_&&this.id_){goog.events.unlistenByKey(this.id_)}this.id_=null;this.listener_.call(this.handler_,goog.now())};goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop();goog.async.AnimationDelay.base(this,"disposeInternal")};goog.async.AnimationDelay.prototype.getRaf_=function(){var a=this.win_;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||null};goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var a=this.win_;return a.cancelAnimationFrame||a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||null};goog.provide("goog.async.nextTick");goog.provide("goog.async.throwException");goog.require("goog.debug.entryPointRegistry");goog.require("goog.dom.TagName");goog.require("goog.functions");goog.require("goog.labs.userAgent.browser");goog.require("goog.labs.userAgent.engine");goog.async.throwException=function(a){goog.global.setTimeout(function(){throw a},0)};goog.async.nextTick=function(a,b,c){var d=a;if(b){d=goog.bind(a,b)}d=goog.async.nextTick.wrapCallback_(d);if(goog.isFunction(goog.global.setImmediate)&&(c||!goog.global.Window||!goog.global.Window.prototype||goog.global.Window.prototype.setImmediate!=goog.global.setImmediate)){goog.global.setImmediate(d);return}if(!goog.async.nextTick.setImmediate_){goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()}goog.async.nextTick.setImmediate_(d)};goog.async.nextTick.setImmediate_;goog.async.nextTick.getSetImmediateEmulator_=function(){var a=goog.global["MessageChannel"];if(typeof a==="undefined"&&typeof window!=="undefined"&&window.postMessage&&window.addEventListener&&!goog.labs.userAgent.engine.isPresto()){a=function(){var a=document.createElement(goog.dom.TagName.IFRAME);a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;var c=b.document;c.open();c.write("");c.close();var d="callImmediate"+Math.random();var e=b.location.protocol=="file:"?"*":b.location.protocol+"//"+b.location.host;var f=goog.bind(function(a){if(e!="*"&&a.origin!=e||a.data!=d){return}this["port1"].onmessage()},this);b.addEventListener("message",f,false);this["port1"]={};this["port2"]={postMessage:function(){b.postMessage(d,e)}}}}if(typeof a!=="undefined"&&!goog.labs.userAgent.browser.isIE()){var b=new a;var c={};var d=c;b["port1"].onmessage=function(){if(goog.isDef(c.next)){c=c.next;var a=c.cb;c.cb=null;a()}};return function(a){d.next={cb:a};d=d.next;b["port2"].postMessage(0)}}if(typeof document!=="undefined"&&"onreadystatechange"in document.createElement(goog.dom.TagName.SCRIPT)){return function(a){var b=document.createElement(goog.dom.TagName.SCRIPT);b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}}return function(a){goog.global.setTimeout(a,0)}};goog.async.nextTick.wrapCallback_=goog.functions.identity;goog.debug.entryPointRegistry.register(function(a){goog.async.nextTick.wrapCallback_=a});goog.provide("goog.html.SafeScript");goog.require("goog.asserts");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="";this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeScript.prototype.implementsGoogStringTypedString=true;goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeScript.fromConstant=function(a){var b=goog.string.Const.unwrap(a);if(b.length===0){return goog.html.SafeScript.EMPTY}return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(b)};goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_};if(goog.DEBUG){goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}}goog.html.SafeScript.unwrap=function(a){if(a instanceof goog.html.SafeScript&&a.constructor===goog.html.SafeScript&&a.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return a.privateDoNotAccessOrElseSafeScriptWrappedValue_}else{goog.asserts.fail("expected object of type SafeScript, got '"+a+"'");return"type_error:SafeScript"}};goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(a){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(a)};goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(a){this.privateDoNotAccessOrElseSafeScriptWrappedValue_=a;return this};goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("");goog.provide("goog.html.uncheckedconversions");goog.require("goog.asserts");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeScript");goog.require("goog.html.SafeStyle");goog.require("goog.html.SafeStyleSheet");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.string");goog.require("goog.string.Const");goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(a,b,c){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(b,c||null)};goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(a,b){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.isEmpty(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(b)};goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(a,b){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(b)};goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(a,b){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(b)};goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(a,b){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(b)}
;goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(a,b){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(b)};goog.provide("goog.structs");goog.require("goog.array");goog.require("goog.object");goog.structs.getCount=function(a){if(typeof a.getCount=="function"){return a.getCount()}if(goog.isArrayLike(a)||goog.isString(a)){return a.length}return goog.object.getCount(a)};goog.structs.getValues=function(a){if(typeof a.getValues=="function"){return a.getValues()}if(goog.isString(a)){return a.split("")}if(goog.isArrayLike(a)){var b=[];var c=a.length;for(var d=0;d<c;d++){b.push(a[d])}return b}return goog.object.getValues(a)};goog.structs.getKeys=function(a){if(typeof a.getKeys=="function"){return a.getKeys()}if(typeof a.getValues=="function"){return undefined}if(goog.isArrayLike(a)||goog.isString(a)){var b=[];var c=a.length;for(var d=0;d<c;d++){b.push(d)}return b}return goog.object.getKeys(a)};goog.structs.contains=function(a,b){if(typeof a.contains=="function"){return a.contains(b)}if(typeof a.containsValue=="function"){return a.containsValue(b)}if(goog.isArrayLike(a)||goog.isString(a)){return goog.array.contains(a,b)}return goog.object.containsValue(a,b)};goog.structs.isEmpty=function(a){if(typeof a.isEmpty=="function"){return a.isEmpty()}if(goog.isArrayLike(a)||goog.isString(a)){return goog.array.isEmpty(a)}return goog.object.isEmpty(a)};goog.structs.clear=function(a){if(typeof a.clear=="function"){a.clear()}else if(goog.isArrayLike(a)){goog.array.clear(a)}else{goog.object.clear(a)}};goog.structs.forEach=function(a,b,c){if(typeof a.forEach=="function"){a.forEach(b,c)}else if(goog.isArrayLike(a)||goog.isString(a)){goog.array.forEach(a,b,c)}else{var d=goog.structs.getKeys(a);var e=goog.structs.getValues(a);var f=e.length;for(var g=0;g<f;g++){b.call(c,e[g],d&&d[g],a)}}};goog.structs.filter=function(a,b,c){if(typeof a.filter=="function"){return a.filter(b,c)}if(goog.isArrayLike(a)||goog.isString(a)){return goog.array.filter(a,b,c)}var d;var e=goog.structs.getKeys(a);var f=goog.structs.getValues(a);var g=f.length;if(e){d={};for(var h=0;h<g;h++){if(b.call(c,f[h],e[h],a)){d[e[h]]=f[h]}}}else{d=[];for(var h=0;h<g;h++){if(b.call(c,f[h],undefined,a)){d.push(f[h])}}}return d};goog.structs.map=function(a,b,c){if(typeof a.map=="function"){return a.map(b,c)}if(goog.isArrayLike(a)||goog.isString(a)){return goog.array.map(a,b,c)}var d;var e=goog.structs.getKeys(a);var f=goog.structs.getValues(a);var g=f.length;if(e){d={};for(var h=0;h<g;h++){d[e[h]]=b.call(c,f[h],e[h],a)}}else{d=[];for(var h=0;h<g;h++){d[h]=b.call(c,f[h],undefined,a)}}return d};goog.structs.some=function(a,b,c){if(typeof a.some=="function"){return a.some(b,c)}if(goog.isArrayLike(a)||goog.isString(a)){return goog.array.some(a,b,c)}var d=goog.structs.getKeys(a);var e=goog.structs.getValues(a);var f=e.length;for(var g=0;g<f;g++){if(b.call(c,e[g],d&&d[g],a)){return true}}return false};goog.structs.every=function(a,b,c){if(typeof a.every=="function"){return a.every(b,c)}if(goog.isArrayLike(a)||goog.isString(a)){return goog.array.every(a,b,c)}var d=goog.structs.getKeys(a);var e=goog.structs.getValues(a);var f=e.length;for(var g=0;g<f;g++){if(!b.call(c,e[g],d&&d[g],a)){return false}}return true};goog.provide("goog.structs.Collection");goog.structs.Collection=function(){};goog.structs.Collection.prototype.add;goog.structs.Collection.prototype.remove;goog.structs.Collection.prototype.contains;goog.structs.Collection.prototype.getCount;goog.provide("goog.iter");goog.provide("goog.iter.Iterable");goog.provide("goog.iter.Iterator");goog.provide("goog.iter.StopIteration");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.math");goog.iter.Iterable;goog.iter.StopIteration="StopIteration"in goog.global?goog.global["StopIteration"]:{message:"StopIteration",stack:""};goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration};goog.iter.Iterator.prototype.__iterator__=function(a){return this};goog.iter.toIterator=function(a){if(a instanceof goog.iter.Iterator){return a}if(typeof a.__iterator__=="function"){return a.__iterator__(false)}if(goog.isArrayLike(a)){var b=0;var c=new goog.iter.Iterator;c.next=function(){while(true){if(b>=a.length){throw goog.iter.StopIteration}if(!(b in a)){b++;continue}return a[b++]}};return c}throw Error("Not implemented")};goog.iter.forEach=function(a,b,c){if(goog.isArrayLike(a)){try{goog.array.forEach(a,b,c)}catch(a){if(a!==goog.iter.StopIteration){throw a}}}else{a=goog.iter.toIterator(a);try{while(true){b.call(c,a.next(),undefined,a)}}catch(a){if(a!==goog.iter.StopIteration){throw a}}}};goog.iter.filter=function(a,b,c){var d=goog.iter.toIterator(a);var e=new goog.iter.Iterator;e.next=function(){while(true){var a=d.next();if(b.call(c,a,undefined,d)){return a}}};return e};goog.iter.filterFalse=function(a,b,c){return goog.iter.filter(a,goog.functions.not(b),c)};goog.iter.range=function(a,b,c){var d=0;var e=a;var f=c||1;if(arguments.length>1){d=a;e=b}if(f==0){throw Error("Range step argument must not be zero")}var g=new goog.iter.Iterator;g.next=function(){if(f>0&&d>=e||f<0&&d<=e){throw goog.iter.StopIteration}var a=d;d+=f;return a};return g};goog.iter.join=function(a,b){return goog.iter.toArray(a).join(b)};goog.iter.map=function(a,b,c){var d=goog.iter.toIterator(a);var e=new goog.iter.Iterator;e.next=function(){var a=d.next();return b.call(c,a,undefined,d)};return e};goog.iter.reduce=function(a,b,c,d){var e=c;goog.iter.forEach(a,function(a){e=b.call(d,e,a)});return e};goog.iter.some=function(a,b,c){a=goog.iter.toIterator(a);try{while(true){if(b.call(c,a.next(),undefined,a)){return true}}}catch(a){if(a!==goog.iter.StopIteration){throw a}}return false};goog.iter.every=function(a,b,c){a=goog.iter.toIterator(a);try{while(true){if(!b.call(c,a.next(),undefined,a)){return false}}}catch(a){if(a!==goog.iter.StopIteration){throw a}}return true};goog.iter.chain=function(a){return goog.iter.chainFromIterable(arguments)};goog.iter.chainFromIterable=function(a){var b=goog.iter.toIterator(a);var c=new goog.iter.Iterator;var d=null;c.next=function(){while(true){if(d==null){var a=b.next();d=goog.iter.toIterator(a)}try{return d.next()}catch(a){if(a!==goog.iter.StopIteration){throw a}d=null}}};return c};goog.iter.dropWhile=function(a,b,c){var d=goog.iter.toIterator(a);var e=new goog.iter.Iterator;var f=true;e.next=function(){while(true){var a=d.next();if(f&&b.call(c,a,undefined,d)){continue}else{f=false}return a}};return e};goog.iter.takeWhile=function(a,b,c){var d=goog.iter.toIterator(a);var e=new goog.iter.Iterator;e.next=function(){var a=d.next();if(b.call(c,a,undefined,d)){return a}throw goog.iter.StopIteration};return e};goog.iter.toArray=function(a){if(goog.isArrayLike(a)){return goog.array.toArray(a)}a=goog.iter.toIterator(a);var b=[];goog.iter.forEach(a,function(a){b.push(a)});return b};goog.iter.equals=function(a,b,c){var d={};var e=goog.iter.zipLongest(d,a,b);var f=c||goog.array.defaultCompareEquality;return goog.iter.every(e,function(a){return f(a[0],a[1])})};goog.iter.nextOrValue=function(a,b){try{return goog.iter.toIterator(a).next()}catch(a){if(a!=goog.iter.StopIteration){throw a}return b}};goog.iter.product=function(a){var b=goog.array.some(arguments,function(a){return!a.length});if(b||!arguments.length){return new goog.iter.Iterator}var c=new goog.iter.Iterator;var d=arguments;var e=goog.array.repeat(0,d.length);c.next=function(){if(e){var a=goog.array.map(e,function(a,b){return d[b][a]});for(var b=e.length-1;b>=0;b--){goog.asserts.assert(e);if(e[b]<d[b].length-1){e[b]++;break}if(b==0){e=null;break}e[b]=0}return a}throw goog.iter.StopIteration};return c};goog.iter.cycle=function(a){var b=goog.iter.toIterator(a);var c=[];var d=0;var e=new goog.iter.Iterator;var f=false;e.next=function(){var a=null;if(!f){try{a=b.next();c.push(a);return a}catch(a){if(a!=goog.iter.StopIteration||goog.array.isEmpty(c)){throw a}f=true}}a=c[d];d=(d+1)%c.length;return a};return e};goog.iter.count=function(a,b){var c=a||0;var d=goog.isDef(b)?b:1;var e=new goog.iter.Iterator;e.next=function(){var a=c;c+=d;return a};return e};goog.iter.repeat=function(a){var b=new goog.iter.Iterator;b.next=goog.functions.constant(a);return b};goog.iter.accumulate=function(a){var b=goog.iter.toIterator(a);var c=0;var d=new goog.iter.Iterator;d.next=function(){c+=b.next();return c};return d};goog.iter.zip=function(a){var b=arguments;var c=new goog.iter.Iterator;if(b.length>0){var d=goog.array.map(b,goog.iter.toIterator);c.next=function(){var a=goog.array.map(d,function(a){return a.next()});return a}}return c};goog.iter.zipLongest=function(a,b){var c=goog.array.slice(arguments,1);var d=new goog.iter.Iterator;if(c.length>0){var e=goog.array.map(c,goog.iter.toIterator);d.next=function(){var b=false;var c=goog.array.map(e,function(c){var d;try{d=c.next();b=true}catch(b){if(b!==goog.iter.StopIteration){throw b}d=a}return d});if(!b){throw goog.iter.StopIteration}return c}}return d};goog.iter.compress=function(a,b){var c=goog.iter.toIterator(b);return goog.iter.filter(a,function(){return!!c.next()})};goog.iter.GroupByIterator_=function(a,b){this.iterator=goog.iter.toIterator(a);this.keyFunc=b||goog.functions.identity;this.targetKey;this.currentKey;this.currentValue};goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator);goog.iter.GroupByIterator_.prototype.next=function(){while(this.currentKey==this.targetKey){this.currentValue=this.iterator.next();this.currentKey=this.keyFunc(this.currentValue)}this.targetKey=this.currentKey;return[this.currentKey,this.groupItems_(this.targetKey)]};goog.iter.GroupByIterator_.prototype.groupItems_=function(a){var b=[];while(this.currentKey==a){b.push(this.currentValue);try{this.currentValue=this.iterator.next()}catch(a){if(a!==goog.iter.StopIteration){throw a}break}this.currentKey=this.keyFunc(this.currentValue)}return b};goog.iter.groupBy=function(a,b){return new goog.iter.GroupByIterator_(a,b)};goog.iter.starMap=function(a,b,c){var d=goog.iter.toIterator(a);var e=new goog.iter.Iterator;e.next=function(){var a=goog.iter.toArray(d.next());return b.apply(c,goog.array.concat(a,undefined,d))};return e};goog.iter.tee=function(a,b){var c=goog.iter.toIterator(a);var d=goog.isNumber(b)?b:2;var e=goog.array.map(goog.array.range(d),function(){return[]});var f=function(){var a=c.next();goog.array.forEach(e,function(b){b.push(a)})};var g=function(a){var b=new goog.iter.Iterator;b.next=function(){if(goog.array.isEmpty(a)){f()}goog.asserts.assert(!goog.array.isEmpty(a));return a.shift()};return b};return goog.array.map(e,g)};goog.iter.enumerate=function(a,b){return goog.iter.zip(goog.iter.count(b),a)};goog.iter.limit=function(a,b){goog.asserts.assert(goog.math.isInt(b)&&b>=0);var c=goog.iter.toIterator(a);var d=new goog.iter.Iterator;var e=b;d.next=function(){if(e-- >0){return c.next()}throw goog.iter.StopIteration};return d};goog.iter.consume=function(a,b){goog.asserts.assert(goog.math.isInt(b)&&b>=0);var c=goog.iter.toIterator(a);while(b-- >0){goog.iter.nextOrValue(c,null)}return c};goog.iter.slice=function(a,b,c){goog.asserts.assert(goog.math.isInt(b)&&b>=0);var d=goog.iter.consume(a,b);if(goog.isNumber(c)){goog.asserts.assert(goog.math.isInt(c)&&c>=b);d=goog.iter.limit(d,c-b)}return d};goog.iter.hasDuplicates_=function(a){var b=[];goog.array.removeDuplicates(a,b);return a.length!=b.length};goog.iter.permutations=function(a,b){var c=goog.iter.toArray(a);var d=goog.isNumber(b)?b:c.length;var e=goog.array.repeat(c,d);var f=goog.iter.product.apply(undefined,e);return goog.iter.filter(f,function(a){return!goog.iter.hasDuplicates_(a)})};goog.iter.combinations=function(a,b){var c=goog.iter.toArray(a);var d=goog.iter.range(c.length);var e=goog.iter.permutations(d,b);var f=goog.iter.filter(e,function(a){return goog.array.isSorted(a)});var g=new goog.iter.Iterator;function h(a){return c[a]}g.next=function(){return goog.array.map(f.next(),h)};return g};goog.iter.combinationsWithReplacement=function(a,b){var c=goog.iter.toArray(a);var d=goog.array.range(c.length);var e=goog.array.repeat(d,b);var f=goog.iter.product.apply(undefined,e);var g=goog.iter.filter(f,function(a){return goog.array.isSorted(a)});var h=new goog.iter.Iterator;function i(a){return c[a]}h.next=function(){return goog.array.map(g.next(),i)};return h};goog.provide("goog.structs.Map");goog.require("goog.iter.Iterator");goog.require("goog.iter.StopIteration");goog.require("goog.object");goog.structs.Map=function(a,b){this.map_={};this.keys_=[];this.count_=0;this.version_=0;var c=arguments.length;if(c>1){if(c%2){throw Error("Uneven number of arguments")}for(var d=0;d<c;d+=2){this.set(arguments[d],arguments[d+1])}}else if(a){this.addAll(a)}};goog.structs.Map.prototype.getCount=function(){return this.count_};goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();var a=[];for(var b=0;b<this.keys_.length;b++){var c=this.keys_[b];a.push(this.map_[c])}return a};goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(a){return goog.structs.Map.hasKey_(this.map_,a)};goog.structs.Map.prototype.containsValue=function(a){for(var b=0;b<this.keys_.length;b++){var c=this.keys_[b];if(goog.structs.Map.hasKey_(this.map_,c)&&this.map_[c]==a){return true}}return false};goog.structs.Map.prototype.equals=function(a,b){if(this===a){return true}if(this.count_!=a.getCount()){return false}var c=b||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var d,e=0;d=this.keys_[e];e++){if(!c(this.get(d),a.get(d))){return false}}return true};goog.structs.Map.defaultEquals=function(a,b){return a===b};goog.structs.Map.prototype.isEmpty=function(){return this.count_==0};goog.structs.Map.prototype.clear=function(){this.map_={};this.keys_.length=0;this.count_=0;this.version_=0};goog.structs.Map.prototype.remove=function(a){if(goog.structs.Map.hasKey_(this.map_,a)){delete this.map_[a];this.count_--;this.version_++;if(this.keys_.length>2*this.count_){this.cleanupKeysArray_()}return true}return false};goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){var a=0;var b=0;while(a<this.keys_.length){var c=this.keys_[a];if(goog.structs.Map.hasKey_(this.map_,c)){this.keys_[b++]=c}a++}this.keys_.length=b}if(this.count_!=this.keys_.length){var d={};var a=0;var b=0;while(a<this.keys_.length){var c=this.keys_[a];if(!goog.structs.Map.hasKey_(d,c)){this.keys_[b++]=c;d[c]=1}a++}this.keys_.length=b}};goog.structs.Map.prototype.get=function(a,b){if(goog.structs.Map.hasKey_(this.map_,a)){return this.map_[a]}return b};goog.structs.Map.prototype.set=function(a,b){if(!goog.structs.Map.hasKey_(this.map_,a)){this.count_++;this.keys_.push(a);this.version_++}this.map_[a]=b};goog.structs.Map.prototype.addAll=function(a){var b,c;if(a instanceof goog.structs.Map){b=a.getKeys();c=a.getValues()}else{b=goog.object.getKeys(a);c=goog.object.getValues(a)}for(var d=0;d<b.length;d++){this.set(b[d],c[d])}};goog.structs.Map.prototype.forEach=function(a,b){var c=this.getKeys();for(var d=0;d<c.length;d++){var e=c[d];var f=this.get(e);a.call(b,f,e,this)}};goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){var a=new goog.structs.Map;for(var b=0;b<this.keys_.length;b++){var c=this.keys_[b];var d=this.map_[c];a.set(d,c)}return a};goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();var a={};for(var b=0;b<this.keys_.length;b++){var c=this.keys_[b];a[c]=this.map_[c]}return a};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(true)};goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(false)};goog.structs.Map.prototype.__iterator__=function(a){this.cleanupKeysArray_();var b=0;var c=this.version_;var d=this;var e=new goog.iter.Iterator;e.next=function(){if(c!=d.version_){throw Error("The map has changed since the iterator was created")}if(b>=d.keys_.length){throw goog.iter.StopIteration}var e=d.keys_[b++];return a?e:d.map_[e]};return e};goog.structs.Map.hasKey_=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};goog.provide("goog.structs.Set");goog.require("goog.structs");goog.require("goog.structs.Collection");goog.require("goog.structs.Map");goog.structs.Set=function(a){this.map_=new goog.structs.Map;if(a){this.addAll(a)}};goog.structs.Set.getKey_=function(a){var b=typeof a;if(b=="object"&&a||b=="function"){return"o"+goog.getUid(a)}else{return b.substr(0,1)+a}};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(a){this.map_.set(goog.structs.Set.getKey_(a),a)};goog.structs.Set.prototype.addAll=function(a){var b=goog.structs.getValues(a);var c=b.length;for(var d=0;d<c;d++){this.add(b[d])}};goog.structs.Set.prototype.removeAll=function(a){var b=goog.structs.getValues(a);var c=b.length;for(var d=0;d<c;d++){this.remove(b[d])}};goog.structs.Set.prototype.remove=function(a){return this.map_.remove(goog.structs.Set.getKey_(a))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};goog.structs.Set.prototype.contains=function(a){return this.map_.containsKey(goog.structs.Set.getKey_(a))};goog.structs.Set.prototype.containsAll=function(a){return goog.structs.every(a,this.contains,this)};goog.structs.Set.prototype.intersection=function(a){var b=new goog.structs.Set;var c=goog.structs.getValues(a);for(var d=0;d<c.length;d++){var e=c[d];if(this.contains(e)){b.add(e)}}return b};goog.structs.Set.prototype.difference=function(a){var b=this.clone();b.removeAll(a);return b};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};goog.structs.Set.prototype.equals=function(a){return this.getCount()==goog.structs.getCount(a)&&this.isSubsetOf(a)};goog.structs.Set.prototype.isSubsetOf=function(a){var b=goog.structs.getCount(a);if(this.getCount()>b){return false}if(!(a instanceof goog.structs.Set)&&b>5){a=new goog.structs.Set(a)}return goog.structs.every(this,function(b){return goog.structs.contains(a,b)})};goog.structs.Set.prototype.__iterator__=function(a){return this.map_.__iterator__(false)};goog.provide("goog.debug");goog.require("goog.array");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeUrl");goog.require("goog.html.uncheckedconversions");goog.require("goog.string.Const");goog.require("goog.structs.Set");goog.require("goog.userAgent");goog.define("goog.debug.LOGGING_ENABLED",goog.DEBUG);goog.debug.catchErrors=function(a,b,c){var d=c||goog.global;var e=d.onerror;var f=!!b;if(goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")){f=!f}d.onerror=function(b,c,d,g,h){if(e){e(b,c,d,g,h)}a({message:b,fileName:c,line:d,col:g,error:h});return f}};goog.debug.expose=function(a,b){if(typeof a=="undefined"){return"undefined"}if(a==null){return"NULL"}var c=[];for(var d in a){if(!b&&goog.isFunction(a[d])){continue}var e=d+" = ";try{e+=a[d]}catch(a){e+="*** "+a+" ***"}c.push(e)}return c.join("\n")};goog.debug.deepExpose=function(a,b){var c=[];var d=function(a,e,f){var g=e+"  ";var h=new goog.structs.Set(f);var i=function(a){return a.replace(/\n/g,"\n"+e)};try{if(!goog.isDef(a)){c.push("undefined")}else if(goog.isNull(a)){c.push("NULL")}else if(goog.isString(a)){c.push('"'+i(a)+'"')}else if(goog.isFunction(a)){c.push(i(String(a)))}else if(goog.isObject(a)){if(h.contains(a)){c.push("*** reference loop detected ***")}else{h.add(a);c.push("{");for(var j in a){if(!b&&goog.isFunction(a[j])){continue}c.push("\n");c.push(g);c.push(j+" = ");d(a[j],g,h)}c.push("\n"+e+"}")}}else{c.push(a)}}catch(a){c.push("*** "+a+" ***")}};d(a,"",new goog.structs.Set);return c.join("")};goog.debug.exposeArray=function(a){var b=[];for(var c=0;c<a.length;c++){if(goog.isArray(a[c])){b.push(goog.debug.exposeArray(a[c]))}else{b.push(a[c])}}return"[ "+b.join(", ")+" ]"};goog.debug.exposeException=function(a,b){var c=goog.debug.exposeExceptionAsHtml(a,b);return goog.html.SafeHtml.unwrap(c)};goog.debug.exposeExceptionAsHtml=function(a,b){try{var c=goog.debug.normalizeErrorObject(a);var d=goog.debug.createViewSourceUrl_(c.fileName);var e=goog.html.SafeHtml.concat(goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Message: "+c.message+"\nUrl: "),goog.html.SafeHtml.create("a",{href:d,target:"_new"},c.fileName),goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("\nLine: "+c.lineNumber+"\n\nBrowser stack:\n"+c.stack+"-> "+"[end]\n\nJS stack traversal:\n"+goog.debug.getStacktrace(b)+"-> "));return e}catch(a){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Exception trying to expose exception! You win, we lose. "+a)}};goog.debug.createViewSourceUrl_=function(a){if(!goog.isDefAndNotNull(a)){a=""}if(!/^https?:\/\//i.test(a)){return goog.html.SafeUrl.fromConstant(goog.string.Const.from("sanitizedviewsrc"))}var b=goog.html.SafeUrl.sanitize(a);return goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("view-source scheme plus HTTP/HTTPS URL"),"view-source:"+goog.html.SafeUrl.unwrap(b))};goog.debug.normalizeErrorObject=function(a){var b=goog.getObjectByName("window.location.href");if(goog.isString(a)){return{message:a,name:"Unknown error",lineNumber:"Not available",fileName:b,stack:"Not available"}}var c,d;var e=false;try{c=a.lineNumber||a.line||"Not available"}catch(a){c="Not available";e=true}try{d=a.fileName||a.filename||a.sourceURL||goog.global["$googDebugFname"]||b}catch(a){d="Not available";e=true}if(e||!a.lineNumber||!a.fileName||!a.stack||!a.message||!a.name){return{message:a.message||"Not available",name:a.name||"UnknownError",lineNumber:c,fileName:d,stack:a.stack||"Not available"}}return a};goog.debug.enhanceError=function(a,b){var c;if(typeof a=="string"){c=Error(a);if(Error.captureStackTrace){Error.captureStackTrace(c,goog.debug.enhanceError)}}else{c=a}if(!c.stack){c.stack=goog.debug.getStacktrace(goog.debug.enhanceError)}if(b){var d=0;while(c["message"+d]){++d}c["message"+d]=String(b)}return c};goog.debug.getStacktraceSimple=function(a){if(goog.STRICT_MODE_COMPATIBLE){var b=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(b){return b}}var c=[];var d=arguments.callee.caller;var e=0;while(d&&(!a||e<a)){c.push(goog.debug.getFunctionName(d));c.push("()\n");try{d=d.caller}catch(a){c.push("[exception trying to get caller]\n");break}e++;if(e>=goog.debug.MAX_STACK_DEPTH){c.push("[...long stack...]");break}}if(a&&e>=a){c.push("[...reached max depth limit...]")}else{c.push("[end]")}return c.join("")};goog.debug.MAX_STACK_DEPTH=50;goog.debug.getNativeStackTrace_=function(a){var b=new Error;if(Error.captureStackTrace){Error.captureStackTrace(b,a);return String(b.stack)}else{try{throw b}catch(a){b=a}var c=b.stack;if(c){return String(c)}}return null};goog.debug.getStacktrace=function(a){var b;if(goog.STRICT_MODE_COMPATIBLE){var c=a||goog.debug.getStacktrace;b=goog.debug.getNativeStackTrace_(c)}if(!b){b=goog.debug.getStacktraceHelper_(a||arguments.callee.caller,[])}return b};goog.debug.getStacktraceHelper_=function(a,b){var c=[];if(goog.array.contains(b,a)){c.push("[...circular reference...]")}else if(a&&b.length<goog.debug.MAX_STACK_DEPTH){c.push(goog.debug.getFunctionName(a)+"(");var d=a.arguments;for(var e=0;d&&e<d.length;e++){if(e>0){c.push(", ")}var f;var g=d[e];switch(typeof g){case"object":f=g?"object":"null";break;case"string":f=g;break;case"number":f=String(g);break;case"boolean":f=g?"true":"false";break;case"function":f=goog.debug.getFunctionName(g);f=f?f:"[fn]";break;case"undefined":default:f=typeof g;break}if(f.length>40){f=f.substr(0,40)+"..."}c.push(f)}b.push(a);c.push(")\n");try{c.push(goog.debug.getStacktraceHelper_(a.caller,b))}catch(a){c.push("[exception trying to get caller]\n")}}else if(a){c.push("[...long stack...]")}else{c.push("[end]")}return c.join("")};goog.debug.setFunctionResolver=function(a){goog.debug.fnNameResolver_=a};goog.debug.getFunctionName=function(a){if(goog.debug.fnNameCache_[a]){return goog.debug.fnNameCache_[a]}if(goog.debug.fnNameResolver_){var b=goog.debug.fnNameResolver_(a);if(b){goog.debug.fnNameCache_[a]=b;return b}}var c=String(a);if(!goog.debug.fnNameCache_[c]){var d=/function ([^\(]+)/.exec(c);if(d){var e=d[1];goog.debug.fnNameCache_[c]=e}else{goog.debug.fnNameCache_[c]="[Anonymous]"}}return goog.debug.fnNameCache_[c]};goog.debug.makeWhitespaceVisible=function(a){return a.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};goog.debug.runtimeType=function(a){if(a instanceof Function){return a.displayName||a.name||"unknown type name"}else if(a instanceof Object){return a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}else{return a===null?"null":typeof a}};goog.debug.fnNameCache_={};goog.debug.fnNameResolver_;goog.provide("goog.debug.LogRecord");goog.debug.LogRecord=function(a,b,c,d,e){this.reset(a,b,c,d,e)};goog.debug.LogRecord.prototype.time_;goog.debug.LogRecord.prototype.level_;goog.debug.LogRecord.prototype.msg_;goog.debug.LogRecord.prototype.loggerName_;goog.debug.LogRecord.prototype.sequenceNumber_=0;goog.debug.LogRecord.prototype.exception_=null;goog.define("goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS",true);goog.debug.LogRecord.nextSequenceNumber_=0;goog.debug.LogRecord.prototype.reset=function(a,b,c,d,e){if(goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS){this.sequenceNumber_=typeof e=="number"?e:goog.debug.LogRecord.nextSequenceNumber_++}this.time_=d||goog.now();this.level_=a;this.msg_=b;this.loggerName_=c;delete this.exception_};goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_};goog.debug.LogRecord.prototype.getException=function(){return this.exception_};goog.debug.LogRecord.prototype.setException=function(a){this.exception_=a};goog.debug.LogRecord.prototype.setLoggerName=function(a){this.loggerName_=a};goog.debug.LogRecord.prototype.getLevel=function(){return this.level_};goog.debug.LogRecord.prototype.setLevel=function(a){this.level_=a};goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_};goog.debug.LogRecord.prototype.setMessage=function(a){this.msg_=a};goog.debug.LogRecord.prototype.getMillis=function(){return this.time_};goog.debug.LogRecord.prototype.setMillis=function(a){this.time_=a};goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_};goog.provide("goog.debug.LogBuffer");goog.require("goog.asserts");goog.require("goog.debug.LogRecord");goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining "+"goog.debug.LogBuffer.CAPACITY.");this.clear()};goog.debug.LogBuffer.getInstance=function(){if(!goog.debug.LogBuffer.instance_){goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer}return goog.debug.LogBuffer.instance_};goog.define("goog.debug.LogBuffer.CAPACITY",0);goog.debug.LogBuffer.prototype.buffer_;goog.debug.LogBuffer.prototype.curIndex_;goog.debug.LogBuffer.prototype.isFull_;goog.debug.LogBuffer.prototype.addRecord=function(a,b,c){var d=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;this.curIndex_=d;if(this.isFull_){var e=this.buffer_[d];e.reset(a,b,c);return e}this.isFull_=d==goog.debug.LogBuffer.CAPACITY-1;return this.buffer_[d]=new goog.debug.LogRecord(a,b,c)};goog.debug.LogBuffer.isBufferingEnabled=function(){return goog.debug.LogBuffer.CAPACITY>0};goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=new Array(goog.debug.LogBuffer.CAPACITY);this.curIndex_=-1;this.isFull_=false};goog.debug.LogBuffer.prototype.forEachRecord=function(a){var b=this.buffer_;if(!b[0]){return}var c=this.curIndex_;var d=this.isFull_?c:-1;do{d=(d+1)%goog.debug.LogBuffer.CAPACITY;a(b[d])}while(d!=c)};goog.provide("goog.debug.LogManager");goog.provide("goog.debug.Loggable");goog.provide("goog.debug.Logger");goog.provide("goog.debug.Logger.Level");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.debug");goog.require("goog.debug.LogBuffer");goog.require("goog.debug.LogRecord");goog.debug.Loggable;goog.debug.Logger=function(a){this.name_=a;this.parent_=null;this.level_=null;this.children_=null;this.handlers_=null};goog.debug.Logger.ROOT_LOGGER_NAME="";goog.define("goog.debug.Logger.ENABLE_HIERARCHY",true);if(!goog.debug.Logger.ENABLE_HIERARCHY){goog.debug.Logger.rootHandlers_=[];goog.debug.Logger.rootLevel_}goog.debug.Logger.Level=function(a,b){this.name=a;this.value=b};goog.debug.Logger.Level.prototype.toString=function(){return this.name};goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",Infinity);goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200);goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1e3);goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900);goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800);goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700);goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500);goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400);goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300);goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0);goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL];goog.debug.Logger.Level.predefinedLevelsCache_=null;goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var a=0,b;b=goog.debug.Logger.Level.PREDEFINED_LEVELS[a];a++){goog.debug.Logger.Level.predefinedLevelsCache_[b.value]=b;goog.debug.Logger.Level.predefinedLevelsCache_[b.name]=b}};goog.debug.Logger.Level.getPredefinedLevel=function(a){if(!goog.debug.Logger.Level.predefinedLevelsCache_){goog.debug.Logger.Level.createPredefinedLevelsCache_()}return goog.debug.Logger.Level.predefinedLevelsCache_[a]||null};goog.debug.Logger.Level.getPredefinedLevelByValue=function(a){if(!goog.debug.Logger.Level.predefinedLevelsCache_){goog.debug.Logger.Level.createPredefinedLevelsCache_()}if(a in goog.debug.Logger.Level.predefinedLevelsCache_){return goog.debug.Logger.Level.predefinedLevelsCache_[a]}for(var b=0;b<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++b){var c=goog.debug.Logger.Level.PREDEFINED_LEVELS[b];if(c.value<=a){return c}}return null};goog.debug.Logger.getLogger=function(a){return goog.debug.LogManager.getLogger(a)};goog.debug.Logger.logToProfilers=function(a){if(goog.global["console"]){if(goog.global["console"]["timeStamp"]){goog.global["console"]["timeStamp"](a)}else if(goog.global["console"]["markTimeline"]){goog.global["console"]["markTimeline"](a)}}if(goog.global["msWriteProfilerMark"]){goog.global["msWriteProfilerMark"](a)}};goog.debug.Logger.prototype.getName=function(){return this.name_};goog.debug.Logger.prototype.addHandler=function(a){if(goog.debug.LOGGING_ENABLED){if(goog.debug.Logger.ENABLE_HIERARCHY){if(!this.handlers_){this.handlers_=[]}this.handlers_.push(a)}else{goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when "+"goog.debug.Logger.ENABLE_HIERARCHY is false.");goog.debug.Logger.rootHandlers_.push(a)}}};goog.debug.Logger.prototype.removeHandler=function(a){if(goog.debug.LOGGING_ENABLED){var b=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_
;return!!b&&goog.array.remove(b,a)}else{return false}};goog.debug.Logger.prototype.getParent=function(){return this.parent_};goog.debug.Logger.prototype.getChildren=function(){if(!this.children_){this.children_={}}return this.children_};goog.debug.Logger.prototype.setLevel=function(a){if(goog.debug.LOGGING_ENABLED){if(goog.debug.Logger.ENABLE_HIERARCHY){this.level_=a}else{goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when "+"goog.debug.Logger.ENABLE_HIERARCHY is false.");goog.debug.Logger.rootLevel_=a}}};goog.debug.Logger.prototype.getLevel=function(){return goog.debug.LOGGING_ENABLED?this.level_:goog.debug.Logger.Level.OFF};goog.debug.Logger.prototype.getEffectiveLevel=function(){if(!goog.debug.LOGGING_ENABLED){return goog.debug.Logger.Level.OFF}if(!goog.debug.Logger.ENABLE_HIERARCHY){return goog.debug.Logger.rootLevel_}if(this.level_){return this.level_}if(this.parent_){return this.parent_.getEffectiveLevel()}goog.asserts.fail("Root logger has no level set.");return null};goog.debug.Logger.prototype.isLoggable=function(a){return goog.debug.LOGGING_ENABLED&&a.value>=this.getEffectiveLevel().value};goog.debug.Logger.prototype.log=function(a,b,c){if(goog.debug.LOGGING_ENABLED&&this.isLoggable(a)){if(goog.isFunction(b)){b=b()}this.doLogRecord_(this.getLogRecord(a,b,c))}};goog.debug.Logger.prototype.getLogRecord=function(a,b,c){if(goog.debug.LogBuffer.isBufferingEnabled()){var d=goog.debug.LogBuffer.getInstance().addRecord(a,b,this.name_)}else{d=new goog.debug.LogRecord(a,String(b),this.name_)}if(c){d.setException(c)}return d};goog.debug.Logger.prototype.shout=function(a,b){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.SHOUT,a,b)}};goog.debug.Logger.prototype.severe=function(a,b){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.SEVERE,a,b)}};goog.debug.Logger.prototype.warning=function(a,b){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.WARNING,a,b)}};goog.debug.Logger.prototype.info=function(a,b){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.INFO,a,b)}};goog.debug.Logger.prototype.config=function(a,b){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.CONFIG,a,b)}};goog.debug.Logger.prototype.fine=function(a,b){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.FINE,a,b)}};goog.debug.Logger.prototype.finer=function(a,b){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.FINER,a,b)}};goog.debug.Logger.prototype.finest=function(a,b){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.FINEST,a,b)}};goog.debug.Logger.prototype.logRecord=function(a){if(goog.debug.LOGGING_ENABLED&&this.isLoggable(a.getLevel())){this.doLogRecord_(a)}};goog.debug.Logger.prototype.doLogRecord_=function(a){goog.debug.Logger.logToProfilers("log:"+a.getMessage());if(goog.debug.Logger.ENABLE_HIERARCHY){var b=this;while(b){b.callPublish_(a);b=b.getParent()}}else{for(var c=0,d;d=goog.debug.Logger.rootHandlers_[c++];){d(a)}}};goog.debug.Logger.prototype.callPublish_=function(a){if(this.handlers_){for(var b=0,c;c=this.handlers_[b];b++){c(a)}}};goog.debug.Logger.prototype.setParent_=function(a){this.parent_=a};goog.debug.Logger.prototype.addChild_=function(a,b){this.getChildren()[a]=b};goog.debug.LogManager={};goog.debug.LogManager.loggers_={};goog.debug.LogManager.rootLogger_=null;goog.debug.LogManager.initialize=function(){if(!goog.debug.LogManager.rootLogger_){goog.debug.LogManager.rootLogger_=new goog.debug.Logger(goog.debug.Logger.ROOT_LOGGER_NAME);goog.debug.LogManager.loggers_[goog.debug.Logger.ROOT_LOGGER_NAME]=goog.debug.LogManager.rootLogger_;goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG)}};goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_};goog.debug.LogManager.getRoot=function(){goog.debug.LogManager.initialize();return goog.debug.LogManager.rootLogger_};goog.debug.LogManager.getLogger=function(a){goog.debug.LogManager.initialize();var b=goog.debug.LogManager.loggers_[a];return b||goog.debug.LogManager.createLogger_(a)};goog.debug.LogManager.createFunctionForCatchErrors=function(a){return function(b){var c=a||goog.debug.LogManager.getRoot();c.severe("Error: "+b.message+" ("+b.fileName+" @ Line: "+b.line+")")}};goog.debug.LogManager.createLogger_=function(a){var b=new goog.debug.Logger(a);if(goog.debug.Logger.ENABLE_HIERARCHY){var c=a.lastIndexOf(".");var d=a.substr(0,c);var e=a.substr(c+1);var f=goog.debug.LogManager.getLogger(d);f.addChild_(e,b);b.setParent_(f)}goog.debug.LogManager.loggers_[a]=b;return b};goog.provide("goog.debug.RelativeTimeProvider");goog.debug.RelativeTimeProvider=function(){this.relativeTimeStart_=goog.now()};goog.debug.RelativeTimeProvider.defaultInstance_=new goog.debug.RelativeTimeProvider;goog.debug.RelativeTimeProvider.prototype.set=function(a){this.relativeTimeStart_=a};goog.debug.RelativeTimeProvider.prototype.reset=function(){this.set(goog.now())};goog.debug.RelativeTimeProvider.prototype.get=function(){return this.relativeTimeStart_};goog.debug.RelativeTimeProvider.getDefaultInstance=function(){return goog.debug.RelativeTimeProvider.defaultInstance_};goog.provide("goog.debug.Formatter");goog.provide("goog.debug.HtmlFormatter");goog.provide("goog.debug.TextFormatter");goog.require("goog.debug");goog.require("goog.debug.Logger");goog.require("goog.debug.RelativeTimeProvider");goog.require("goog.html.SafeHtml");goog.debug.Formatter=function(a){this.prefix_=a||"";this.startTimeProvider_=goog.debug.RelativeTimeProvider.getDefaultInstance()};goog.debug.Formatter.prototype.appendNewline=true;goog.debug.Formatter.prototype.showAbsoluteTime=true;goog.debug.Formatter.prototype.showRelativeTime=true;goog.debug.Formatter.prototype.showLoggerName=true;goog.debug.Formatter.prototype.showExceptionText=false;goog.debug.Formatter.prototype.showSeverityLevel=false;goog.debug.Formatter.prototype.formatRecord=goog.abstractMethod;goog.debug.Formatter.prototype.formatRecordAsHtml=goog.abstractMethod;goog.debug.Formatter.prototype.setStartTimeProvider=function(a){this.startTimeProvider_=a};goog.debug.Formatter.prototype.getStartTimeProvider=function(){return this.startTimeProvider_};goog.debug.Formatter.prototype.resetRelativeTimeStart=function(){this.startTimeProvider_.reset()};goog.debug.Formatter.getDateTimeStamp_=function(a){var b=new Date(a.getMillis());return goog.debug.Formatter.getTwoDigitString_(b.getFullYear()-2e3)+goog.debug.Formatter.getTwoDigitString_(b.getMonth()+1)+goog.debug.Formatter.getTwoDigitString_(b.getDate())+" "+goog.debug.Formatter.getTwoDigitString_(b.getHours())+":"+goog.debug.Formatter.getTwoDigitString_(b.getMinutes())+":"+goog.debug.Formatter.getTwoDigitString_(b.getSeconds())+"."+goog.debug.Formatter.getTwoDigitString_(Math.floor(b.getMilliseconds()/10))};goog.debug.Formatter.getTwoDigitString_=function(a){if(a<10){return"0"+a}return String(a)};goog.debug.Formatter.getRelativeTime_=function(a,b){var c=a.getMillis()-b;var d=c/1e3;var e=d.toFixed(3);var f=0;if(d<1){f=2}else{while(d<100){f++;d*=10}}while(f-- >0){e=" "+e}return e};goog.debug.HtmlFormatter=function(a){goog.debug.Formatter.call(this,a)};goog.inherits(goog.debug.HtmlFormatter,goog.debug.Formatter);goog.debug.HtmlFormatter.prototype.showExceptionText=true;goog.debug.HtmlFormatter.prototype.formatRecord=function(a){if(!a){return""}return this.formatRecordAsHtml(a).getTypedStringValue()};goog.debug.HtmlFormatter.prototype.formatRecordAsHtml=function(a){if(!a){return goog.html.SafeHtml.EMPTY}var b;switch(a.getLevel().value){case goog.debug.Logger.Level.SHOUT.value:b="dbg-sh";break;case goog.debug.Logger.Level.SEVERE.value:b="dbg-sev";break;case goog.debug.Logger.Level.WARNING.value:b="dbg-w";break;case goog.debug.Logger.Level.INFO.value:b="dbg-i";break;case goog.debug.Logger.Level.FINE.value:default:b="dbg-f";break}var c=[];c.push(this.prefix_," ");if(this.showAbsoluteTime){c.push("[",goog.debug.Formatter.getDateTimeStamp_(a),"] ")}if(this.showRelativeTime){c.push("[",goog.debug.Formatter.getRelativeTime_(a,this.startTimeProvider_.get()),"s] ")}if(this.showLoggerName){c.push("[",a.getLoggerName(),"] ")}if(this.showSeverityLevel){c.push("[",a.getLevel().name,"] ")}var d=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(c.join(""));var e=goog.html.SafeHtml.EMPTY;if(this.showExceptionText&&a.getException()){e=goog.html.SafeHtml.concat(goog.html.SafeHtml.create("br"),goog.debug.exposeExceptionAsHtml(a.getException()))}var f=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(a.getMessage());var g=goog.html.SafeHtml.create("span",{class:b},goog.html.SafeHtml.concat(f,e));var h;if(this.appendNewline){h=goog.html.SafeHtml.concat(d,g,goog.html.SafeHtml.create("br"))}else{h=goog.html.SafeHtml.concat(d,g)}return h};goog.debug.TextFormatter=function(a){goog.debug.Formatter.call(this,a)};goog.inherits(goog.debug.TextFormatter,goog.debug.Formatter);goog.debug.TextFormatter.prototype.formatRecord=function(a){var b=[];b.push(this.prefix_," ");if(this.showAbsoluteTime){b.push("[",goog.debug.Formatter.getDateTimeStamp_(a),"] ")}if(this.showRelativeTime){b.push("[",goog.debug.Formatter.getRelativeTime_(a,this.startTimeProvider_.get()),"s] ")}if(this.showLoggerName){b.push("[",a.getLoggerName(),"] ")}if(this.showSeverityLevel){b.push("[",a.getLevel().name,"] ")}b.push(a.getMessage());if(this.showExceptionText){var c=a.getException();if(c){var d=c instanceof Error?c.message:c.toString();b.push("\n",d)}}if(this.appendNewline){b.push("\n")}return b.join("")};goog.debug.TextFormatter.prototype.formatRecordAsHtml=function(a){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(goog.debug.TextFormatter.prototype.formatRecord(a))};goog.provide("goog.debug.Console");goog.require("goog.debug.LogManager");goog.require("goog.debug.Logger");goog.require("goog.debug.TextFormatter");goog.debug.Console=function(){this.publishHandler_=goog.bind(this.addLogRecord,this);this.formatter_=new goog.debug.TextFormatter;this.formatter_.showAbsoluteTime=false;this.formatter_.showExceptionText=false;this.formatter_.appendNewline=false;this.isCapturing_=false;this.logBuffer_="";this.filteredLoggers_={}};goog.debug.Console.prototype.getFormatter=function(){return this.formatter_};goog.debug.Console.prototype.setCapturing=function(a){if(a==this.isCapturing_){return}var b=goog.debug.LogManager.getRoot();if(a){b.addHandler(this.publishHandler_)}else{b.removeHandler(this.publishHandler_);this.logBuffer=""}this.isCapturing_=a};goog.debug.Console.prototype.addLogRecord=function(a){if(this.filteredLoggers_[a.getLoggerName()]){return}var b=this.formatter_.formatRecord(a);var c=goog.debug.Console.console_;if(c){switch(a.getLevel()){case goog.debug.Logger.Level.SHOUT:goog.debug.Console.logToConsole_(c,"info",b);break;case goog.debug.Logger.Level.SEVERE:goog.debug.Console.logToConsole_(c,"error",b);break;case goog.debug.Logger.Level.WARNING:goog.debug.Console.logToConsole_(c,"warn",b);break;default:goog.debug.Console.logToConsole_(c,"debug",b);break}}else{this.logBuffer_+=b}};goog.debug.Console.prototype.addFilter=function(a){this.filteredLoggers_[a]=true};goog.debug.Console.prototype.removeFilter=function(a){delete this.filteredLoggers_[a]};goog.debug.Console.instance=null;goog.debug.Console.console_=goog.global["console"];goog.debug.Console.setConsole=function(a){goog.debug.Console.console_=a};goog.debug.Console.autoInstall=function(){if(!goog.debug.Console.instance){goog.debug.Console.instance=new goog.debug.Console}if(goog.global.location&&goog.global.location.href.indexOf("Debug=true")!=-1){goog.debug.Console.instance.setCapturing(true)}};goog.debug.Console.show=function(){alert(goog.debug.Console.instance.logBuffer_)};goog.debug.Console.logToConsole_=function(a,b,c){if(a[b]){a[b](c)}else{a.log(c)}};goog.provide("goog.dom.ViewportSizeMonitor");goog.require("goog.dom");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.math.Size");goog.dom.ViewportSizeMonitor=function(a){goog.dom.ViewportSizeMonitor.base(this,"constructor");this.window_=a||window;this.listenerKey_=goog.events.listen(this.window_,goog.events.EventType.RESIZE,this.handleResize_,false,this);this.size_=goog.dom.getViewportSize(this.window_)};goog.inherits(goog.dom.ViewportSizeMonitor,goog.events.EventTarget);goog.dom.ViewportSizeMonitor.getInstanceForWindow=function(a){var b=a||window;var c=goog.getUid(b);return goog.dom.ViewportSizeMonitor.windowInstanceMap_[c]=goog.dom.ViewportSizeMonitor.windowInstanceMap_[c]||new goog.dom.ViewportSizeMonitor(b)};goog.dom.ViewportSizeMonitor.removeInstanceForWindow=function(a){var b=goog.getUid(a||window);goog.dispose(goog.dom.ViewportSizeMonitor.windowInstanceMap_[b]);delete goog.dom.ViewportSizeMonitor.windowInstanceMap_[b]};goog.dom.ViewportSizeMonitor.windowInstanceMap_={};goog.dom.ViewportSizeMonitor.prototype.getSize=function(){return this.size_?this.size_.clone():null};goog.dom.ViewportSizeMonitor.prototype.disposeInternal=function(){goog.dom.ViewportSizeMonitor.superClass_.disposeInternal.call(this);if(this.listenerKey_){goog.events.unlistenByKey(this.listenerKey_);this.listenerKey_=null}this.window_=null;this.size_=null};goog.dom.ViewportSizeMonitor.prototype.handleResize_=function(a){var b=goog.dom.getViewportSize(this.window_);if(!goog.math.Size.equals(b,this.size_)){this.size_=b;this.dispatchEvent(goog.events.EventType.RESIZE)}};goog.provide("goog.events.KeyCodes");goog.require("goog.userAgent");goog.forwardDeclare("goog.events.BrowserEvent");goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};goog.events.KeyCodes.isTextModifyingKeyEvent=function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||a.keyCode>=goog.events.KeyCodes.F1&&a.keyCode<=goog.events.KeyCodes.F12){return false}switch(a.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.VK_NONAME:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return false;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;default:return a.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||a.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};goog.events.KeyCodes.firesKeyPressEvent=function(a,b,c,d,e){if(!goog.userAgent.IE&&!goog.userAgent.EDGE&&!(goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525"))){return true}if(goog.userAgent.MAC&&e){return goog.events.KeyCodes.isCharacterKey(a)}if(e&&!d){return false}if(goog.isNumber(b)){b=goog.events.KeyCodes.normalizeKeyCode(b)}if(!c&&(b==goog.events.KeyCodes.CTRL||b==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&b==goog.events.KeyCodes.META)){return false}if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&d&&c){switch(a){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return false}}if(goog.userAgent.IE&&d&&b==a){return false}switch(a){case goog.events.KeyCodes.ENTER:return true;case goog.events.KeyCodes.ESC:return!(goog.userAgent.WEBKIT||goog.userAgent.EDGE)}return goog.events.KeyCodes.isCharacterKey(a)};goog.events.KeyCodes.isCharacterKey=function(a){if(a>=goog.events.KeyCodes.ZERO&&a<=goog.events.KeyCodes.NINE){return true}if(a>=goog.events.KeyCodes.NUM_ZERO&&a<=goog.events.KeyCodes.NUM_MULTIPLY){return true}if(a>=goog.events.KeyCodes.A&&a<=goog.events.KeyCodes.Z){return true}if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&a==0){return true}switch(a){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.AT_SIGN:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return true;default:return false}};goog.events.KeyCodes.normalizeKeyCode=function(a){if(goog.userAgent.GECKO){return goog.events.KeyCodes.normalizeGeckoKeyCode(a)}else if(goog.userAgent.MAC&&goog.userAgent.WEBKIT){return goog.events.KeyCodes.normalizeMacWebKitKeyCode(a)}else{return a}};goog.events.KeyCodes.normalizeGeckoKeyCode=function(a){switch(a){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return a}};goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(a){switch(a){case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:return goog.events.KeyCodes.META;default:return a}};goog.provide("goog.events.KeyEvent");goog.provide("goog.events.KeyHandler");goog.provide("goog.events.KeyHandler.EventType");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.events.KeyCodes");goog.require("goog.userAgent");goog.events.KeyHandler=function(a,b){goog.events.EventTarget.call(this);if(a){this.attach(a,b)}};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.prototype.altKey_=false;goog.events.KeyHandler.EventType={KEY:"key"};goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.EDGE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525");goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO;goog.events.KeyHandler.prototype.handleKeyDown_=function(a){if(goog.userAgent.WEBKIT||goog.userAgent.EDGE){if(this.lastKey_==goog.events.KeyCodes.CTRL&&!a.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!a.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!a.metaKey){this.resetState()}}if(this.lastKey_==-1){if(a.ctrlKey&&a.keyCode!=goog.events.KeyCodes.CTRL){this.lastKey_=goog.events.KeyCodes.CTRL}else if(a.altKey&&a.keyCode!=goog.events.KeyCodes.ALT){this.lastKey_=goog.events.KeyCodes.ALT}else if(a.metaKey&&a.keyCode!=goog.events.KeyCodes.META){this.lastKey_=goog.events.KeyCodes.META}}if(goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(a.keyCode,this.lastKey_,a.shiftKey,a.ctrlKey,a.altKey)){this.handleEvent(a)}else{this.keyCode_=goog.events.KeyCodes.normalizeKeyCode(a.keyCode);if(goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_){this.altKey_=a.altKey}}};goog.events.KeyHandler.prototype.resetState=function(){this.lastKey_=-1;this.keyCode_=-1};goog.events.KeyHandler.prototype.handleKeyup_=function(a){this.resetState();this.altKey_=a.altKey};goog.events.KeyHandler.prototype.handleEvent=function(a){var b=a.getBrowserEvent();var c,d;var e=b.altKey;if(goog.userAgent.IE&&a.type==goog.events.EventType.KEYPRESS){c=this.keyCode_;d=c!=goog.events.KeyCodes.ENTER&&c!=goog.events.KeyCodes.ESC?b.keyCode:0}else if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&a.type==goog.events.EventType.KEYPRESS){c=this.keyCode_;d=b.charCode>=0&&b.charCode<63232&&goog.events.KeyCodes.isCharacterKey(c)?b.charCode:0}else if(goog.userAgent.OPERA&&!goog.userAgent.WEBKIT){c=this.keyCode_;d=goog.events.KeyCodes.isCharacterKey(c)?b.keyCode:0}else{c=b.keyCode||this.keyCode_;d=b.charCode||0;if(goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_){e=this.altKey_}if(goog.userAgent.MAC&&d==goog.events.KeyCodes.QUESTION_MARK&&c==goog.events.KeyCodes.WIN_KEY){c=goog.events.KeyCodes.SLASH}}c=goog.events.KeyCodes.normalizeKeyCode(c);var f=c;var g=b.keyIdentifier;if(c){if(c>=63232&&c in goog.events.KeyHandler.safariKey_){f=goog.events.KeyHandler.safariKey_[c]}else{if(c==25&&a.shiftKey){f=9}}}else if(g&&g in goog.events.KeyHandler.keyIdentifier_){f=goog.events.KeyHandler.keyIdentifier_[g]}var h=f==this.lastKey_;this.lastKey_=f;var i=new goog.events.KeyEvent(f,d,h,b);i.altKey=e;this.dispatchEvent(i)};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};goog.events.KeyHandler.prototype.attach=function(a,b){if(this.keyUpKey_){this.detach()}this.element_=a;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,b);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,b,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,b,this)};goog.events.KeyHandler.prototype.detach=function(){if(this.keyPressKey_){goog.events.unlistenByKey(this.keyPressKey_);goog.events.unlistenByKey(this.keyDownKey_);goog.events.unlistenByKey(this.keyUpKey_);this.keyPressKey_=null;this.keyDownKey_=null;this.keyUpKey_=null}this.element_=null;this.lastKey_=-1;this.keyCode_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};goog.events.KeyEvent=function(a,b,c,d){goog.events.BrowserEvent.call(this,d);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=a;this.charCode=b;this.repeat=c};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.provide("goog.events.MouseWheelEvent");goog.provide("goog.events.MouseWheelHandler");goog.provide("goog.events.MouseWheelHandler.EventType");goog.require("goog.dom");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventTarget");goog.require("goog.math");goog.require("goog.style");goog.require("goog.userAgent");goog.events.MouseWheelHandler=function(a,b){goog.events.EventTarget.call(this);this.element_=a;var c=goog.dom.isElement(this.element_)?this.element_:this.element_?this.element_.body:null;this.isRtl_=!!c&&goog.style.isRightToLeft(c);var d=goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel";this.listenKey_=goog.events.listen(this.element_,d,this,b)};goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget);goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"};goog.events.MouseWheelHandler.prototype.maxDeltaX_;goog.events.MouseWheelHandler.prototype.maxDeltaY_;goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(a){this.maxDeltaX_=a};goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(a){this.maxDeltaY_=a};goog.events.MouseWheelHandler.prototype.handleEvent=function(a){var b=0;var c=0;var d=0;var e=a.getBrowserEvent();if(e.type=="mousewheel"){var f=1;if(goog.userAgent.IE||goog.userAgent.WEBKIT&&(goog.userAgent.WINDOWS||goog.userAgent.isVersionOrHigher("532.0"))){f=40}d=goog.events.MouseWheelHandler.smartScale_(-e.wheelDelta,f);if(goog.isDef(e.wheelDeltaX)){b=goog.events.MouseWheelHandler.smartScale_(-e.wheelDeltaX,f);c=goog.events.MouseWheelHandler.smartScale_(-e.wheelDeltaY,f)}else{c=d}}else{d=e.detail;if(d>100){d=3}else if(d<-100){d=-3}if(goog.isDef(e.axis)&&e.axis===e.HORIZONTAL_AXIS){b=d}else{c=d}}if(goog.isNumber(this.maxDeltaX_)){b=goog.math.clamp(b,-this.maxDeltaX_,this.maxDeltaX_)}if(goog.isNumber(this.maxDeltaY_)){c=goog.math.clamp(c,-this.maxDeltaY_,this.maxDeltaY_)}if(this.isRtl_){b=-b}var g=new goog.events.MouseWheelEvent(d,e,b,c);this.dispatchEvent(g)};goog.events.MouseWheelHandler.smartScale_=function(a,b){if(goog.userAgent.WEBKIT&&(goog.userAgent.MAC||goog.userAgent.LINUX)&&a%b!=0){return a}else{return a/b}};goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKey_);this.listenKey_=null};goog.events.MouseWheelEvent=function(a,b,c,d){goog.events.BrowserEvent.call(this,b);this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL;this.detail=a;this.deltaX=c;this.deltaY=d};goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent);goog.provide("goog.log");goog.provide("goog.log.Level");goog.provide("goog.log.LogRecord");goog.provide("goog.log.Logger");goog.require("goog.debug");goog.require("goog.debug.LogManager");goog.require("goog.debug.LogRecord");goog.require("goog.debug.Logger");goog.define("goog.log.ENABLED",goog.debug.LOGGING_ENABLED);goog.log.ROOT_LOGGER_NAME=goog.debug.Logger.ROOT_LOGGER_NAME;goog.log.Logger=goog.debug.Logger;goog.log.Level=goog.debug.Logger.Level;goog.log.LogRecord=goog.debug.LogRecord;goog.log.getLogger=function(a,b){if(goog.log.ENABLED){var c=goog.debug.LogManager.getLogger(a);if(b&&c){c.setLevel(b)}return c}else{return null}};goog.log.addHandler=function(a,b){if(goog.log.ENABLED&&a){a.addHandler(b)}};goog.log.removeHandler=function(a,b){if(goog.log.ENABLED&&a){return a.removeHandler(b)}else{return false}};goog.log.log=function(a,b,c,d){if(goog.log.ENABLED&&a){a.log(b,c,d)}};goog.log.error=function(a,b,c){if(goog.log.ENABLED&&a){a.severe(b,c)}};goog.log.warning=function(a,b,c){if(goog.log.ENABLED&&a){a.warning(b,c)}};goog.log.info=function(a,b,c){if(goog.log.ENABLED&&a){a.info(b,c)}};goog.log.fine=function(a,b,c){if(goog.log.ENABLED&&a){a.fine(b,c)}};goog.provide("ol.pointer.PointerEvent");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.object");ol.pointer.PointerEvent=function(a,b,c){goog.base(this,a);this.browserEvent=b;var d=goog.isDef(c)?c:{};this.buttons=this.getButtons_(d);this.pressure=this.getPressure_(d,this.buttons);this.bubbles=goog.object.get(d,"bubbles",false);this.cancelable=goog.object.get(d,"cancelable",false);this.view=goog.object.get(d,"view",null);this.detail=goog.object.get(d,"detail",null);this.screenX=goog.object.get(d,"screenX",0);this.screenY=goog.object.get(d,"screenY",0);this.clientX=goog.object.get(d,"clientX",0);this.clientY=goog.object.get(d,"clientY",0);this.ctrlKey=goog.object.get(d,"ctrlKey",false);this.altKey=goog.object.get(d,"altKey",false);this.shiftKey=goog.object.get(d,"shiftKey",false);this.metaKey=goog.object.get(d,"metaKey",false);this.button=goog.object.get(d,"button",0);this.relatedTarget=goog.object.get(d,"relatedTarget",null);this.pointerId=goog.object.get(d,"pointerId",0);this.width=goog.object.get(d,"width",0);this.height=goog.object.get(d,"height",0);this.tiltX=goog.object.get(d,"tiltX",0);this.tiltY=goog.object.get(d,"tiltY",0);this.pointerType=goog.object.get(d,"pointerType","");this.hwTimestamp=goog.object.get(d,"hwTimestamp",0);this.isPrimary=goog.object.get(d,"isPrimary",false);if(b.preventDefault){this.preventDefault=function(){b.preventDefault()}}};goog.inherits(ol.pointer.PointerEvent,goog.events.Event);ol.pointer.PointerEvent.prototype.getButtons_=function(a){var b;if(a.buttons||ol.pointer.PointerEvent.HAS_BUTTONS){b=a.buttons}else{switch(a.which){case 1:b=1;break;case 2:b=4;break;case 3:b=2;break;default:b=0}}return b};ol.pointer.PointerEvent.prototype.getPressure_=function(a,b){var c=0;if(a.pressure){c=a.pressure}else{c=b?.5:0}return c};ol.pointer.PointerEvent.HAS_BUTTONS=false;(function(){try{var a=new MouseEvent("click",{buttons:1});ol.pointer.PointerEvent.HAS_BUTTONS=a.buttons===1}catch(a){}})();goog.provide("ol.dom");goog.provide("ol.dom.BrowserFeature");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.userAgent");goog.require("goog.vec.Mat4");goog.require("ol");ol.dom.createCanvasContext2D=function(a,b){var c=goog.dom.createElement(goog.dom.TagName.CANVAS);if(goog.isDef(a)){c.width=a}if(goog.isDef(b)){c.height=b}return c.getContext("2d")};ol.dom.BrowserFeature={USE_MS_MATRIX_TRANSFORM:ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE,USE_MS_ALPHA_FILTER:ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE};ol.dom.canUseCssTransform=function(){var a;return function(){if(!goog.isDef(a)){goog.asserts.assert(!goog.isNull(document.body),"document.body should not be null");if(!goog.global.getComputedStyle){a=false}else{
var b=goog.dom.createElement(goog.dom.TagName.P),c,d={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};goog.dom.appendChild(document.body,b);for(var e in d){if(e in b.style){b.style[e]="translate(1px,1px)";c=goog.global.getComputedStyle(b).getPropertyValue(d[e])}}goog.dom.removeNode(b);a=c&&c!=="none"}}return a}}();ol.dom.canUseCssTransform3D=function(){var a;return function(){if(!goog.isDef(a)){goog.asserts.assert(!goog.isNull(document.body),"document.body should not be null");if(!goog.global.getComputedStyle){a=false}else{var b=goog.dom.createElement(goog.dom.TagName.P),c,d={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};goog.dom.appendChild(document.body,b);for(var e in d){if(e in b.style){b.style[e]="translate3d(1px,1px,1px)";c=goog.global.getComputedStyle(b).getPropertyValue(d[e])}}goog.dom.removeNode(b);a=c&&c!=="none"}}return a}}();ol.dom.setTransform=function(a,b){var c=a.style;c.WebkitTransform=b;c.MozTransform=b;c.OTransform=b;c.msTransform=b;c.transform=b;if(goog.userAgent.IE&&!ol.IS_LEGACY_IE){a.style.transformOrigin="0 0"}};ol.dom.setOpacity=function(a,b){if(ol.dom.BrowserFeature.USE_MS_ALPHA_FILTER){var c=a.currentStyle.filter;var d;var e;if(goog.userAgent.VERSION=="8.0"){d=/progid:DXImageTransform\.Microsoft\.Alpha\(.*?\)/i;e="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b*100+")"}else{d=/alpha\(.*?\)/i;e="alpha(opacity="+b*100+")"}var f=c.replace(d,e);if(f===c){f+=" "+e}a.style.filter=f;if(a.currentStyle.zIndex==="auto"){a.style.zIndex=0}}else{a.style.opacity=b}};ol.dom.setIEMatrix_=function(a,b){var c=a.currentStyle.filter;var d=c.replace(/progid:DXImageTransform.Microsoft.Matrix\(.*?\)/i,b);if(d===c){d=" "+b}a.style.filter=d;if(a.currentStyle.zIndex==="auto"){a.style.zIndex=0}};ol.dom.transformElement2D=function(a,b,c,d){var e;if(ol.dom.canUseCssTransform3D()){var f;if(goog.isDef(c)){var g=new Array(16);for(e=0;e<16;++e){g[e]=b[e].toFixed(c)}f=g.join(",")}else{f=b.join(",")}ol.dom.setTransform(a,"matrix3d("+f+")")}else if(ol.dom.canUseCssTransform()){var h=[goog.vec.Mat4.getElement(b,0,0),goog.vec.Mat4.getElement(b,1,0),goog.vec.Mat4.getElement(b,0,1),goog.vec.Mat4.getElement(b,1,1),goog.vec.Mat4.getElement(b,0,3),goog.vec.Mat4.getElement(b,1,3)];var i;if(goog.isDef(c)){var j=new Array(6);for(e=0;e<6;++e){j[e]=h[e].toFixed(c)}i=j.join(",")}else{i=h.join(",")}ol.dom.setTransform(a,"matrix("+i+")")}else if(ol.dom.BrowserFeature.USE_MS_MATRIX_TRANSFORM){var k=goog.vec.Mat4.getElement(b,0,0),l=goog.vec.Mat4.getElement(b,0,1),m=goog.vec.Mat4.getElement(b,1,0),n=goog.vec.Mat4.getElement(b,1,1),o=goog.vec.Mat4.getElement(b,0,3),p=goog.vec.Mat4.getElement(b,1,3);var q="progid:DXImageTransform.Microsoft.Matrix(";q+='sizingMethod="auto expand"';q+=",M11="+k.toFixed(c||20);q+=",M12="+l.toFixed(c||20);q+=",M21="+m.toFixed(c||20);q+=",M22="+n.toFixed(c||20);q+=")";ol.dom.setIEMatrix_(a,q);o/=k;p/=n;d.style.left=Math.round(o)+"px";d.style.top=Math.round(p)+"px"}else{a.style.left=Math.round(goog.vec.Mat4.getElement(b,0,3))+"px";a.style.top=Math.round(goog.vec.Mat4.getElement(b,1,3))+"px"}};ol.dom.outerWidth=function(a){var b=a.offsetWidth;var c=a.currentStyle||window.getComputedStyle(a);b+=parseInt(c.marginLeft,10)+parseInt(c.marginRight,10);return b};ol.dom.outerHeight=function(a){var b=a.offsetHeight;var c=a.currentStyle||window.getComputedStyle(a);b+=parseInt(c.marginTop,10)+parseInt(c.marginBottom,10);return b};goog.provide("ol.webgl");goog.provide("ol.webgl.WebGLContextEventType");ol.webgl.CONTEXT_IDS_=["experimental-webgl","webgl","webkit-3d","moz-webgl"];ol.webgl.WebGLContextEventType={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};ol.webgl.getContext=function(a,b){var c,d,e=ol.webgl.CONTEXT_IDS_.length;for(d=0;d<e;++d){try{c=a.getContext(ol.webgl.CONTEXT_IDS_[d],b);if(!goog.isNull(c)){return c}}catch(a){}}return null};goog.provide("ol.has");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("ol");goog.require("ol.dom");goog.require("ol.webgl");ol.has.DEVICE_PIXEL_RATIO=goog.global.devicePixelRatio||1;ol.has.CANVAS_LINE_DASH=false;ol.has.CANVAS=ol.ENABLE_CANVAS&&function(){if(!("HTMLCanvasElement"in goog.global)){return false}try{var a=ol.dom.createCanvasContext2D();if(goog.isNull(a)){return false}else{if(goog.isDef(a.setLineDash)){ol.has.CANVAS_LINE_DASH=true}return true}}catch(a){return false}}();ol.has.DEVICE_ORIENTATION="DeviceOrientationEvent"in goog.global;ol.has.DOM=ol.ENABLE_DOM;ol.has.GEOLOCATION="geolocation"in goog.global.navigator;ol.has.TOUCH=ol.ASSUME_TOUCH||"ontouchstart"in goog.global;ol.has.POINTER="PointerEvent"in goog.global;ol.has.MSPOINTER=!!goog.global.navigator.msPointerEnabled;ol.has.WEBGL;(function(){if(ol.ENABLE_WEBGL){var a=false;var b;var c=[];if("WebGLRenderingContext"in goog.global){try{var d=goog.dom.createElement(goog.dom.TagName.CANVAS);var e=ol.webgl.getContext(d,{failIfMajorPerformanceCaveat:true});if(!goog.isNull(e)){a=true;b=e.getParameter(e.MAX_TEXTURE_SIZE);c=e.getSupportedExtensions()}}catch(a){}}ol.has.WEBGL=a;ol.WEBGL_EXTENSIONS=c;ol.WEBGL_MAX_TEXTURE_SIZE=b}})();goog.provide("ol.pointer.EventSource");goog.require("goog.events.BrowserEvent");goog.require("goog.object");ol.pointer.EventSource=function(a,b){this.dispatcher=a;this.mapping_=b};ol.pointer.EventSource.prototype.getEvents=function(){return goog.object.getKeys(this.mapping_)};ol.pointer.EventSource.prototype.getMapping=function(){return this.mapping_};ol.pointer.EventSource.prototype.getHandlerForEvent=function(a){return this.mapping_[a]};goog.provide("ol.pointer.MouseSource");goog.require("goog.object");goog.require("ol.pointer.EventSource");ol.pointer.MouseSource=function(a){var b={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};goog.base(this,a,b);this.pointerMap=a.pointerMap;this.lastTouches=[]};goog.inherits(ol.pointer.MouseSource,ol.pointer.EventSource);ol.pointer.MouseSource.POINTER_ID=1;ol.pointer.MouseSource.POINTER_TYPE="mouse";ol.pointer.MouseSource.DEDUP_DIST=25;ol.pointer.MouseSource.prototype.isEventSimulatedFromTouch_=function(a){var b=this.lastTouches;var c=a.clientX,d=a.clientY;for(var e=0,f=b.length,g;e<f&&(g=b[e]);e++){var h=Math.abs(c-g[0]),i=Math.abs(d-g[1]);if(h<=ol.pointer.MouseSource.DEDUP_DIST&&i<=ol.pointer.MouseSource.DEDUP_DIST){return true}}return false};ol.pointer.MouseSource.prepareEvent=function(a,b){var c=b.cloneEvent(a,a.getBrowserEvent());var d=c.preventDefault;c.preventDefault=function(){a.preventDefault();d()};c.pointerId=ol.pointer.MouseSource.POINTER_ID;c.isPrimary=true;c.pointerType=ol.pointer.MouseSource.POINTER_TYPE;return c};ol.pointer.MouseSource.prototype.mousedown=function(a){if(!this.isEventSimulatedFromTouch_(a)){var b=goog.object.containsKey(this.pointerMap,ol.pointer.MouseSource.POINTER_ID.toString());if(b){this.cancel(a)}var c=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()]=a;this.dispatcher.down(c,a)}};ol.pointer.MouseSource.prototype.mousemove=function(a){if(!this.isEventSimulatedFromTouch_(a)){var b=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.dispatcher.move(b,a)}};ol.pointer.MouseSource.prototype.mouseup=function(a){if(!this.isEventSimulatedFromTouch_(a)){var b=this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()];if(b&&b.button===a.button){var c=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.dispatcher.up(c,a);this.cleanupMouse()}}};ol.pointer.MouseSource.prototype.mouseover=function(a){if(!this.isEventSimulatedFromTouch_(a)){var b=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.dispatcher.enterOver(b,a)}};ol.pointer.MouseSource.prototype.mouseout=function(a){if(!this.isEventSimulatedFromTouch_(a)){var b=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.dispatcher.leaveOut(b,a)}};ol.pointer.MouseSource.prototype.cancel=function(a){var b=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.dispatcher.cancel(b,a);this.cleanupMouse()};ol.pointer.MouseSource.prototype.cleanupMouse=function(){goog.object.remove(this.pointerMap,ol.pointer.MouseSource.POINTER_ID.toString())};goog.provide("ol.pointer.MsSource");goog.require("goog.object");goog.require("ol.pointer.EventSource");ol.pointer.MsSource=function(a){var b={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};goog.base(this,a,b);this.pointerMap=a.pointerMap;this.POINTER_TYPES=["","unavailable","touch","pen","mouse"]};goog.inherits(ol.pointer.MsSource,ol.pointer.EventSource);ol.pointer.MsSource.prototype.prepareEvent_=function(a){var b=a;if(goog.isNumber(a.getBrowserEvent().pointerType)){b=this.dispatcher.cloneEvent(a,a.getBrowserEvent());b.pointerType=this.POINTER_TYPES[a.getBrowserEvent().pointerType]}return b};ol.pointer.MsSource.prototype.cleanup=function(a){goog.object.remove(this.pointerMap,a)};ol.pointer.MsSource.prototype.msPointerDown=function(a){this.pointerMap[a.getBrowserEvent().pointerId]=a;var b=this.prepareEvent_(a);this.dispatcher.down(b,a)};ol.pointer.MsSource.prototype.msPointerMove=function(a){var b=this.prepareEvent_(a);this.dispatcher.move(b,a)};ol.pointer.MsSource.prototype.msPointerUp=function(a){var b=this.prepareEvent_(a);this.dispatcher.up(b,a);this.cleanup(a.getBrowserEvent().pointerId)};ol.pointer.MsSource.prototype.msPointerOut=function(a){var b=this.prepareEvent_(a);this.dispatcher.leaveOut(b,a)};ol.pointer.MsSource.prototype.msPointerOver=function(a){var b=this.prepareEvent_(a);this.dispatcher.enterOver(b,a)};ol.pointer.MsSource.prototype.msPointerCancel=function(a){var b=this.prepareEvent_(a);this.dispatcher.cancel(b,a);this.cleanup(a.getBrowserEvent().pointerId)};ol.pointer.MsSource.prototype.msLostPointerCapture=function(a){var b=this.dispatcher.makeEvent("lostpointercapture",a.getBrowserEvent(),a);this.dispatcher.dispatchEvent(b)};ol.pointer.MsSource.prototype.msGotPointerCapture=function(a){var b=this.dispatcher.makeEvent("gotpointercapture",a.getBrowserEvent(),a);this.dispatcher.dispatchEvent(b)};goog.provide("ol.pointer.NativeSource");goog.require("ol.pointer.EventSource");ol.pointer.NativeSource=function(a){var b={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};goog.base(this,a,b)};goog.inherits(ol.pointer.NativeSource,ol.pointer.EventSource);ol.pointer.NativeSource.prototype.pointerDown=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.pointerMove=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.pointerUp=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.pointerOut=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.pointerOver=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.pointerCancel=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.lostPointerCapture=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.gotPointerCapture=function(a){this.dispatcher.fireNativeEvent(a)};goog.provide("ol.pointer.TouchSource");goog.require("goog.array");goog.require("goog.object");goog.require("ol.pointer.EventSource");goog.require("ol.pointer.MouseSource");ol.pointer.TouchSource=function(a,b){var c={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};goog.base(this,a,c);this.pointerMap=a.pointerMap;this.mouseSource=b;this.firstTouchId_=undefined;this.clickCount_=0;this.resetId_=undefined};goog.inherits(ol.pointer.TouchSource,ol.pointer.EventSource);ol.pointer.TouchSource.DEDUP_TIMEOUT=2500;ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT=200;ol.pointer.TouchSource.POINTER_TYPE="touch";ol.pointer.TouchSource.prototype.isPrimaryTouch_=function(a){return this.firstTouchId_===a.identifier};ol.pointer.TouchSource.prototype.setPrimaryTouch_=function(a){var b=goog.object.getCount(this.pointerMap);if(b===0||b===1&&goog.object.containsKey(this.pointerMap,ol.pointer.MouseSource.POINTER_ID.toString())){this.firstTouchId_=a.identifier;this.cancelResetClickCount_()}};ol.pointer.TouchSource.prototype.removePrimaryPointer_=function(a){if(a.isPrimary){this.firstTouchId_=undefined;this.resetClickCount_()}};ol.pointer.TouchSource.prototype.resetClickCount_=function(){this.resetId_=goog.global.setTimeout(goog.bind(this.resetClickCountHandler_,this),ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT)};ol.pointer.TouchSource.prototype.resetClickCountHandler_=function(){this.clickCount_=0;this.resetId_=undefined};ol.pointer.TouchSource.prototype.cancelResetClickCount_=function(){if(goog.isDef(this.resetId_)){goog.global.clearTimeout(this.resetId_)}};ol.pointer.TouchSource.prototype.touchToPointer_=function(a,b){var c=this.dispatcher.cloneEvent(a,b);c.pointerId=b.identifier+2;c.bubbles=true;c.cancelable=true;c.detail=this.clickCount_;c.button=0;c.buttons=1;c.width=b.webkitRadiusX||b.radiusX||0;c.height=b.webkitRadiusY||b.radiusY||0;c.pressure=b.webkitForce||b.force||.5;c.isPrimary=this.isPrimaryTouch_(b);c.pointerType=ol.pointer.TouchSource.POINTER_TYPE;c.clientX=b.clientX;c.clientY=b.clientY;c.screenX=b.screenX;c.screenY=b.screenY;return c};ol.pointer.TouchSource.prototype.processTouches_=function(a,b){var c=Array.prototype.slice.call(a.getBrowserEvent().changedTouches);var d=c.length;function e(){a.preventDefault()}var f,g;for(f=0;f<d;++f){g=this.touchToPointer_(a,c[f]);g.preventDefault=e;b.call(this,a,g)}};ol.pointer.TouchSource.prototype.findTouch_=function(a,b){var c=a.length;var d;for(var e=0;e<c;e++){d=a[e];if(d.identifier===b){return true}}return false};ol.pointer.TouchSource.prototype.vacuumTouches_=function(a){var b=a.getBrowserEvent().touches;var c=goog.object.getKeys(this.pointerMap);var d=c.length;if(d>=b.length){var e=[];var f,g,h;for(f=0;f<d;++f){g=c[f];h=this.pointerMap[g];if(g!=ol.pointer.MouseSource.POINTER_ID&&!this.findTouch_(b,g-2)){e.push(h.out)}}for(f=0;f<e.length;++f){this.cancelOut_(a,e[f])}}};ol.pointer.TouchSource.prototype.touchstart=function(a){this.vacuumTouches_(a);this.setPrimaryTouch_(a.getBrowserEvent().changedTouches[0]);this.dedupSynthMouse_(a);this.clickCount_++;this.processTouches_(a,this.overDown_)};ol.pointer.TouchSource.prototype.overDown_=function(a,b){this.pointerMap[b.pointerId]={target:b.target,out:b,outTarget:b.target};this.dispatcher.over(b,a);this.dispatcher.enter(b,a);this.dispatcher.down(b,a)};ol.pointer.TouchSource.prototype.touchmove=function(a){a.preventDefault();this.processTouches_(a,this.moveOverOut_)};ol.pointer.TouchSource.prototype.moveOverOut_=function(a,b){var c=b;var d=this.pointerMap[c.pointerId];if(!d){return}var e=d.out;var f=d.outTarget;this.dispatcher.move(c,a);if(e&&f!==c.target){e.relatedTarget=c.target;c.relatedTarget=f;e.target=f;if(c.target){this.dispatcher.leaveOut(e,a);this.dispatcher.enterOver(c,a)}else{c.target=f;c.relatedTarget=null;this.cancelOut_(a,c)}}d.out=c;d.outTarget=c.target};ol.pointer.TouchSource.prototype.touchend=function(a){this.dedupSynthMouse_(a);this.processTouches_(a,this.upOut_)};ol.pointer.TouchSource.prototype.upOut_=function(a,b){this.dispatcher.up(b,a);this.dispatcher.out(b,a);this.dispatcher.leave(b,a);this.cleanUpPointer_(b)};ol.pointer.TouchSource.prototype.touchcancel=function(a){this.processTouches_(a,this.cancelOut_)};ol.pointer.TouchSource.prototype.cancelOut_=function(a,b){this.dispatcher.cancel(b,a);this.dispatcher.out(b,a);this.dispatcher.leave(b,a);this.cleanUpPointer_(b)};ol.pointer.TouchSource.prototype.cleanUpPointer_=function(a){goog.object.remove(this.pointerMap,a.pointerId);this.removePrimaryPointer_(a)};ol.pointer.TouchSource.prototype.dedupSynthMouse_=function(a){var b=this.mouseSource.lastTouches;var c=a.getBrowserEvent().changedTouches[0];if(this.isPrimaryTouch_(c)){var d=[c.clientX,c.clientY];b.push(d);goog.global.setTimeout(function(){goog.array.remove(b,d)},ol.pointer.TouchSource.DEDUP_TIMEOUT)}};goog.provide("ol.pointer.PointerEventHandler");goog.require("goog.array");goog.require("goog.dom");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventTarget");goog.require("ol.has");goog.require("ol.pointer.MouseSource");goog.require("ol.pointer.MsSource");goog.require("ol.pointer.NativeSource");goog.require("ol.pointer.PointerEvent");goog.require("ol.pointer.TouchSource");ol.pointer.PointerEventHandler=function(a){goog.base(this);this.element_=a;this.pointerMap={};this.eventMap_={};this.eventSourceList_=[];this.registerSources()};goog.inherits(ol.pointer.PointerEventHandler,goog.events.EventTarget);ol.pointer.PointerEventHandler.prototype.registerSources=function(){if(ol.has.POINTER){this.registerSource("native",new ol.pointer.NativeSource(this))}else if(ol.has.MSPOINTER){this.registerSource("ms",new ol.pointer.MsSource(this))}else{var a=new ol.pointer.MouseSource(this);this.registerSource("mouse",a);if(ol.has.TOUCH){this.registerSource("touch",new ol.pointer.TouchSource(this,a))}}this.register_()};ol.pointer.PointerEventHandler.prototype.registerSource=function(a,b){var c=b;var d=c.getEvents();if(d){goog.array.forEach(d,function(a){var b=c.getHandlerForEvent(a);if(b){this.eventMap_[a]=goog.bind(b,c)}},this);this.eventSourceList_.push(c)}};ol.pointer.PointerEventHandler.prototype.register_=function(){var a=this.eventSourceList_.length;var b;for(var c=0;c<a;c++){b=this.eventSourceList_[c];this.addEvents_(b.getEvents())}};ol.pointer.PointerEventHandler.prototype.unregister_=function(){var a=this.eventSourceList_.length;var b;for(var c=0;c<a;c++){b=this.eventSourceList_[c];this.removeEvents_(b.getEvents())}};ol.pointer.PointerEventHandler.prototype.eventHandler_=function(a){var b=a.type;var c=this.eventMap_[b];if(c){c(a)}};ol.pointer.PointerEventHandler.prototype.addEvents_=function(a){goog.array.forEach(a,function(a){goog.events.listen(this.element_,a,this.eventHandler_,false,this)},this)};ol.pointer.PointerEventHandler.prototype.removeEvents_=function(a){goog.array.forEach(a,function(a){goog.events.unlisten(this.element_,a,this.eventHandler_,false,this)},this)};ol.pointer.PointerEventHandler.prototype.cloneEvent=function(a,b){var c={},d;for(var e=0,f=ol.pointer.CLONE_PROPS.length;e<f;e++){d=ol.pointer.CLONE_PROPS[e][0];c[d]=a[d]||b[d]||ol.pointer.CLONE_PROPS[e][1]}return c};ol.pointer.PointerEventHandler.prototype.down=function(a,b){this.fireEvent(ol.pointer.EventType.POINTERDOWN,a,b)};ol.pointer.PointerEventHandler.prototype.move=function(a,b){this.fireEvent(ol.pointer.EventType.POINTERMOVE,a,b)};ol.pointer.PointerEventHandler.prototype.up=function(a,b){this.fireEvent(ol.pointer.EventType.POINTERUP,a,b)};ol.pointer.PointerEventHandler.prototype.enter=function(a,b){a.bubbles=false;this.fireEvent(ol.pointer.EventType.POINTERENTER,a,b)};ol.pointer.PointerEventHandler.prototype.leave=function(a,b){a.bubbles=false;this.fireEvent(ol.pointer.EventType.POINTERLEAVE,a,b)};ol.pointer.PointerEventHandler.prototype.over=function(a,b){a.bubbles=true;this.fireEvent(ol.pointer.EventType.POINTEROVER,a,b)};ol.pointer.PointerEventHandler.prototype.out=function(a,b){a.bubbles=true;this.fireEvent(ol.pointer.EventType.POINTEROUT,a,b)};ol.pointer.PointerEventHandler.prototype.cancel=function(a,b){this.fireEvent(ol.pointer.EventType.POINTERCANCEL,a,b)};ol.pointer.PointerEventHandler.prototype.leaveOut=function(a,b){this.out(a,b);if(!this.contains_(a.target,a.relatedTarget)){this.leave(a,b)}};ol.pointer.PointerEventHandler.prototype.enterOver=function(a,b){this.over(a,b);if(!this.contains_(a.target,a.relatedTarget)){this.enter(a,b)}};ol.pointer.PointerEventHandler.prototype.contains_=function(a,b){if(goog.isNull(b)){return false}return goog.dom.contains(a,b)};ol.pointer.PointerEventHandler.prototype.makeEvent=function(a,b,c){return new ol.pointer.PointerEvent(a,c,b)};ol.pointer.PointerEventHandler.prototype.fireEvent=function(a,b,c){var d=this.makeEvent(a,b,c);this.dispatchEvent(d)};ol.pointer.PointerEventHandler.prototype.fireNativeEvent=function(a){var b=this.makeEvent(a.type,a.getBrowserEvent(),a);this.dispatchEvent(b)};ol.pointer.PointerEventHandler.prototype.wrapMouseEvent=function(a,b){var c=this.makeEvent(a,ol.pointer.MouseSource.prepareEvent(b,this),b);return c};ol.pointer.PointerEventHandler.prototype.disposeInternal=function(){this.unregister_();goog.base(this,"disposeInternal")};ol.pointer.EventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};ol.pointer.CLONE_PROPS=[["bubbles",false],["cancelable",false],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",false],["altKey",false],["shiftKey",false],["metaKey",false],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",false],["type",""],["target",null],["currentTarget",null],["which",0]];goog.provide("ol.MapBrowserEvent");goog.provide("ol.MapBrowserEvent.EventType");goog.provide("ol.MapBrowserEventHandler");goog.provide("ol.MapBrowserPointerEvent");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.MapEvent");goog.require("ol.Pixel");goog.require("ol.pointer.PointerEvent");goog.require("ol.pointer.PointerEventHandler");ol.MapBrowserEvent=function(a,b,c,d,e){goog.base(this,a,b,e);this.browserEvent=c;this.originalEvent=c.getBrowserEvent();this.pixel=b.getEventPixel(this.originalEvent);this.coordinate=b.getCoordinateFromPixel(this.pixel);this.dragging=goog.isDef(d)?d:false};goog.inherits(ol.MapBrowserEvent,ol.MapEvent);ol.MapBrowserEvent.prototype.preventDefault=function(){goog.base(this,"preventDefault");this.browserEvent.preventDefault()};ol.MapBrowserEvent.prototype.stopPropagation=function(){goog.base(this,"stopPropagation");this.browserEvent.stopPropagation()};ol.MapBrowserPointerEvent=function(a,b,c,d,e){goog.base(this,a,b,c.browserEvent,d,e);this.pointerEvent=c};goog.inherits(ol.MapBrowserPointerEvent,ol.MapBrowserEvent);ol.MapBrowserEventHandler=function(a){goog.base(this);this.map_=a;this.clickTimeoutId_=0;this.dragging_=false;this.dragListenerKeys_=null;this.pointerdownListenerKey_=null;if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){this.ieDblclickListenerKey_=null}this.down_=null;var b=this.map_.getViewport();this.activePointers_=0;this.trackedTouches_={};this.pointerEventHandler_=new ol.pointer.PointerEventHandler(b);this.documentPointerEventHandler_=null;this.pointerdownListenerKey_=goog.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERDOWN,this.handlePointerDown_,false,this);this.relayedListenerKey_=goog.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERMOVE,this.relayEvent_,false,this);if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){this.ieDblclickListenerKey_=goog.events.listen(b,goog.events.EventType.DBLCLICK,this.emulateClickLegacyIE_,false,this)}};goog.inherits(ol.MapBrowserEventHandler,goog.events.EventTarget);ol.MapBrowserEventHandler.prototype.emulateClickLegacyIE_=function(a){var b=this.pointerEventHandler_.wrapMouseEvent(ol.MapBrowserEvent.EventType.POINTERUP,a);this.emulateClick_(b)};ol.MapBrowserEventHandler.prototype.emulateClick_=function(a){var b;b=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.CLICK,this.map_,a);this.dispatchEvent(b);if(this.clickTimeoutId_!==0){goog.global.clearTimeout(this.clickTimeoutId_);this.clickTimeoutId_=0;b=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.DBLCLICK,this.map_,a);this.dispatchEvent(b)}else{this.clickTimeoutId_=goog.global.setTimeout(goog.bind(function(){this.clickTimeoutId_=0;var b=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.SINGLECLICK,this.map_,a);this.dispatchEvent(b)},this),250)}};ol.MapBrowserEventHandler.prototype.updateActivePointers_=function(a){var b=a;if(b.type==ol.MapBrowserEvent.EventType.POINTERUP||b.type==ol.MapBrowserEvent.EventType.POINTERCANCEL){delete this.trackedTouches_[b.pointerId]}else if(b.type==ol.MapBrowserEvent.EventType.POINTERDOWN){this.trackedTouches_[b.pointerId]=true}this.activePointers_=goog.object.getCount(this.trackedTouches_)};ol.MapBrowserEventHandler.prototype.handlePointerUp_=function(a){this.updateActivePointers_(a);var b=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERUP,this.map_,a);this.dispatchEvent(b);if(!this.dragging_&&this.isMouseActionButton_(a)){goog.asserts.assert(!goog.isNull(this.down_),"this.down_ should not be null");this.emulateClick_(this.down_)}goog.asserts.assert(this.activePointers_>=0,"this.activePointers_ should be equal to or larger than 0");if(this.activePointers_===0){goog.array.forEach(this.dragListenerKeys_,goog.events.unlistenByKey);this.dragListenerKeys_=null;this.dragging_=false;this.down_=null;goog.dispose(this.documentPointerEventHandler_);this.documentPointerEventHandler_=null}};ol.MapBrowserEventHandler.prototype.isMouseActionButton_=function(a){if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){return a.button==1}else{return a.button===0}};ol.MapBrowserEventHandler.prototype.handlePointerDown_=function(a){this.updateActivePointers_(a);var b=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERDOWN,this.map_,a);this.dispatchEvent(b);this.down_=a;if(goog.isNull(this.dragListenerKeys_)){this.documentPointerEventHandler_=new ol.pointer.PointerEventHandler(document);this.dragListenerKeys_=[goog.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERMOVE,this.handlePointerMove_,false,this),goog.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERUP,this.handlePointerUp_,false,this),goog.events.listen(this.pointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERCANCEL,this.handlePointerUp_,false,this)]}};ol.MapBrowserEventHandler.prototype.handlePointerMove_=function(a){if(this.isMoving_(a)){this.dragging_=true;var b=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERDRAG,this.map_,a,this.dragging_);this.dispatchEvent(b)}a.preventDefault()};ol.MapBrowserEventHandler.prototype.relayEvent_=function(a){var b=!goog.isNull(this.down_)&&this.isMoving_(a);this.dispatchEvent(new ol.MapBrowserPointerEvent(a.type,this.map_,a,b))};ol.MapBrowserEventHandler.prototype.isMoving_=function(a){return a.clientX!=this.down_.clientX||a.clientY!=this.down_.clientY};ol.MapBrowserEventHandler.prototype.disposeInternal=function(){if(!goog.isNull(this.relayedListenerKey_)){goog.events.unlistenByKey(this.relayedListenerKey_);this.relayedListenerKey_=null}if(!goog.isNull(this.pointerdownListenerKey_)){goog.events.unlistenByKey(this.pointerdownListenerKey_);this.pointerdownListenerKey_=null}if(!goog.isNull(this.dragListenerKeys_)){goog.array.forEach(this.dragListenerKeys_,goog.events.unlistenByKey);this.dragListenerKeys_=null}if(!goog.isNull(this.documentPointerEventHandler_)){goog.dispose(this.documentPointerEventHandler_);this.documentPointerEventHandler_=null}if(!goog.isNull(this.pointerEventHandler_)){goog.dispose(this.pointerEventHandler_);this.pointerEventHandler_=null}if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE&&!goog.isNull(this.ieDblclickListenerKey_)){goog.events.unlistenByKey(this.ieDblclickListenerKey_);this.ieDblclickListenerKey_=null}goog.base(this,"disposeInternal")};ol.MapBrowserEvent.EventType={SINGLECLICK:"singleclick",CLICK:goog.events.EventType.CLICK,DBLCLICK:goog.events.EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};goog.provide("ol.layer.Base");goog.provide("ol.layer.LayerProperty");goog.provide("ol.layer.LayerState");goog.require("goog.math");goog.require("goog.object");goog.require("ol.Object");goog.require("ol.source.State");ol.layer.LayerProperty={BRIGHTNESS:"brightness",CONTRAST:"contrast",HUE:"hue",OPACITY:"opacity",SATURATION:"saturation",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"};ol.layer.LayerState;ol.layer.Base=function(a){goog.base(this);var b=goog.object.clone(a);b[ol.layer.LayerProperty.BRIGHTNESS]=goog.isDef(a.brightness)?a.brightness:0;b[ol.layer.LayerProperty.CONTRAST]=goog.isDef(a.contrast)?a.contrast:1;b[ol.layer.LayerProperty.HUE]=goog.isDef(a.hue)?a.hue:0;b[ol.layer.LayerProperty.OPACITY]=goog.isDef(a.opacity)?a.opacity:1;b[ol.layer.LayerProperty.SATURATION]=goog.isDef(a.saturation)?a.saturation:1;b[ol.layer.LayerProperty.VISIBLE]=goog.isDef(a.visible)?a.visible:true;b[ol.layer.LayerProperty.Z_INDEX]=goog.isDef(a.zIndex)?a.zIndex:0;b[ol.layer.LayerProperty.MAX_RESOLUTION]=goog.isDef(a.maxResolution)?a.maxResolution:Infinity;b[ol.layer.LayerProperty.MIN_RESOLUTION]=goog.isDef(a.minResolution)?a.minResolution:0;this.setProperties(b)};goog.inherits(ol.layer.Base,ol.Object);ol.layer.Base.prototype.getBrightness=function(){return this.get(ol.layer.LayerProperty.BRIGHTNESS)};ol.layer.Base.prototype.getContrast=function(){return this.get(ol.layer.LayerProperty.CONTRAST)};ol.layer.Base.prototype.getHue=function(){return this.get(ol.layer.LayerProperty.HUE)};ol.layer.Base.prototype.getLayerState=function(){var a=this.getBrightness();var b=this.getContrast();var c=this.getHue();var d=this.getOpacity();var e=this.getSaturation();var f=this.getSourceState();var g=this.getVisible();var h=this.getExtent();var i=this.getZIndex();var j=this.getMaxResolution();var k=this.getMinResolution();return{layer:this,brightness:goog.math.clamp(a,-1,1),contrast:Math.max(b,0),hue:c,opacity:goog.math.clamp(d,0,1),saturation:Math.max(e,0),sourceState:f,visible:g,managed:true,extent:h,zIndex:i,maxResolution:j,minResolution:Math.max(k,0)}};ol.layer.Base.prototype.getLayersArray=goog.abstractMethod;ol.layer.Base.prototype.getLayerStatesArray=goog.abstractMethod;ol.layer.Base.prototype.getExtent=function(){return this.get(ol.layer.LayerProperty.EXTENT)};ol.layer.Base.prototype.getMaxResolution=function(){return this.get(ol.layer.LayerProperty.MAX_RESOLUTION)};ol.layer.Base.prototype.getMinResolution=function(){return this.get(ol.layer.LayerProperty.MIN_RESOLUTION)};ol.layer.Base.prototype.getOpacity=function(){return this.get(ol.layer.LayerProperty.OPACITY)};ol.layer.Base.prototype.getSaturation=function(){return this.get(ol.layer.LayerProperty.SATURATION)};ol.layer.Base.prototype.getSourceState=goog.abstractMethod;ol.layer.Base.prototype.getVisible=function(){return this.get(ol.layer.LayerProperty.VISIBLE)};ol.layer.Base.prototype.getZIndex=function(){return this.get(ol.layer.LayerProperty.Z_INDEX)};ol.layer.Base.prototype.setBrightness=function(a){this.set(ol.layer.LayerProperty.BRIGHTNESS,a)};ol.layer.Base.prototype.setContrast=function(a){this.set(ol.layer.LayerProperty.CONTRAST,a)};ol.layer.Base.prototype.setHue=function(a){this.set(ol.layer.LayerProperty.HUE,a)};ol.layer.Base.prototype.setExtent=function(a){this.set(ol.layer.LayerProperty.EXTENT,a)};ol.layer.Base.prototype.setMaxResolution=function(a){this.set(ol.layer.LayerProperty.MAX_RESOLUTION,a)};ol.layer.Base.prototype.setMinResolution=function(a){
this.set(ol.layer.LayerProperty.MIN_RESOLUTION,a)};ol.layer.Base.prototype.setOpacity=function(a){this.set(ol.layer.LayerProperty.OPACITY,a)};ol.layer.Base.prototype.setSaturation=function(a){this.set(ol.layer.LayerProperty.SATURATION,a)};ol.layer.Base.prototype.setVisible=function(a){this.set(ol.layer.LayerProperty.VISIBLE,a)};ol.layer.Base.prototype.setZIndex=function(a){this.set(ol.layer.LayerProperty.Z_INDEX,a)};goog.provide("ol.render.VectorContext");ol.render.VectorContext=function(){};ol.render.VectorContext.prototype.drawAsync=goog.abstractMethod;ol.render.VectorContext.prototype.drawCircleGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawFeature=goog.abstractMethod;ol.render.VectorContext.prototype.drawGeometryCollectionGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawLineStringGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawMultiLineStringGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawMultiPointGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawMultiPolygonGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawPointGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawPolygonGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawText=goog.abstractMethod;ol.render.VectorContext.prototype.setFillStrokeStyle=goog.abstractMethod;ol.render.VectorContext.prototype.setImageStyle=goog.abstractMethod;ol.render.VectorContext.prototype.setTextStyle=goog.abstractMethod;goog.provide("ol.render.Event");goog.provide("ol.render.EventType");goog.require("goog.events.Event");goog.require("ol.render.VectorContext");ol.render.EventType={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"};ol.render.Event=function(a,b,c,d,e,f){goog.base(this,a,b);this.vectorContext=c;this.frameState=d;this.context=e;this.glContext=f};goog.inherits(ol.render.Event,goog.events.Event);goog.provide("ol.layer.Layer");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.Object");goog.require("ol.layer.Base");goog.require("ol.layer.LayerProperty");goog.require("ol.render.EventType");goog.require("ol.source.State");ol.layer.Layer=function(a){var b=goog.object.clone(a);delete b.source;goog.base(this,b);this.mapPrecomposeKey_=null;this.mapRenderKey_=null;this.sourceChangeKey_=null;if(goog.isDef(a.map)){this.setMap(a.map)}goog.events.listen(this,ol.Object.getChangeEventType(ol.layer.LayerProperty.SOURCE),this.handleSourcePropertyChange_,false,this);var c=goog.isDef(a.source)?a.source:null;this.setSource(c)};goog.inherits(ol.layer.Layer,ol.layer.Base);ol.layer.Layer.visibleAtResolution=function(a,b){return a.visible&&b>=a.minResolution&&b<a.maxResolution};ol.layer.Layer.prototype.getLayersArray=function(a){var b=goog.isDef(a)?a:[];b.push(this);return b};ol.layer.Layer.prototype.getLayerStatesArray=function(a){var b=goog.isDef(a)?a:[];b.push(this.getLayerState());return b};ol.layer.Layer.prototype.getSource=function(){var a=this.get(ol.layer.LayerProperty.SOURCE);return goog.isDef(a)?a:null};ol.layer.Layer.prototype.getSourceState=function(){var a=this.getSource();return goog.isNull(a)?ol.source.State.UNDEFINED:a.getState()};ol.layer.Layer.prototype.handleSourceChange_=function(){this.changed()};ol.layer.Layer.prototype.handleSourcePropertyChange_=function(){if(!goog.isNull(this.sourceChangeKey_)){goog.events.unlistenByKey(this.sourceChangeKey_);this.sourceChangeKey_=null}var a=this.getSource();if(!goog.isNull(a)){this.sourceChangeKey_=goog.events.listen(a,goog.events.EventType.CHANGE,this.handleSourceChange_,false,this)}this.changed()};ol.layer.Layer.prototype.setMap=function(a){goog.events.unlistenByKey(this.mapPrecomposeKey_);this.mapPrecomposeKey_=null;if(goog.isNull(a)){this.changed()}goog.events.unlistenByKey(this.mapRenderKey_);this.mapRenderKey_=null;if(!goog.isNull(a)){this.mapPrecomposeKey_=goog.events.listen(a,ol.render.EventType.PRECOMPOSE,function(a){var b=this.getLayerState();b.managed=false;b.zIndex=Infinity;a.frameState.layerStatesArray.push(b);a.frameState.layerStates[goog.getUid(this)]=b},false,this);this.mapRenderKey_=goog.events.listen(this,goog.events.EventType.CHANGE,a.render,false,a);this.changed()}};ol.layer.Layer.prototype.setSource=function(a){this.set(ol.layer.LayerProperty.SOURCE,a)};goog.provide("ol.ImageBase");goog.provide("ol.ImageState");goog.require("goog.asserts");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("ol.Attribution");goog.require("ol.Extent");ol.ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3};ol.ImageBase=function(a,b,c,d,e){goog.base(this);this.attributions_=e;this.extent=a;this.pixelRatio_=c;this.resolution=b;this.state=d};goog.inherits(ol.ImageBase,goog.events.EventTarget);ol.ImageBase.prototype.changed=function(){this.dispatchEvent(goog.events.EventType.CHANGE)};ol.ImageBase.prototype.getAttributions=function(){return this.attributions_};ol.ImageBase.prototype.getExtent=function(){return this.extent};ol.ImageBase.prototype.getImage=goog.abstractMethod;ol.ImageBase.prototype.getPixelRatio=function(){return this.pixelRatio_};ol.ImageBase.prototype.getResolution=function(){goog.asserts.assert(goog.isDef(this.resolution),"resolution not yet set");return this.resolution};ol.ImageBase.prototype.getState=function(){return this.state};ol.ImageBase.prototype.load=goog.abstractMethod;goog.provide("ol.vec.Mat4");goog.provide("ol.vec.Mat4.Number");goog.require("goog.vec.Mat4");ol.vec.Mat4.Number;ol.vec.Mat4.makeTransform2D=function(a,b,c,d,e,f,g,h){goog.vec.Mat4.makeIdentity(a);if(b!==0||c!==0){goog.vec.Mat4.translate(a,b,c,0)}if(d!=1||e!=1){goog.vec.Mat4.scale(a,d,e,1)}if(f!==0){goog.vec.Mat4.rotateZ(a,f)}if(g!==0||h!==0){goog.vec.Mat4.translate(a,g,h,0)}return a};ol.vec.Mat4.equals2D=function(a,b){return goog.vec.Mat4.getElement(a,0,0)==goog.vec.Mat4.getElement(b,0,0)&&goog.vec.Mat4.getElement(a,1,0)==goog.vec.Mat4.getElement(b,1,0)&&goog.vec.Mat4.getElement(a,0,1)==goog.vec.Mat4.getElement(b,0,1)&&goog.vec.Mat4.getElement(a,1,1)==goog.vec.Mat4.getElement(b,1,1)&&goog.vec.Mat4.getElement(a,0,3)==goog.vec.Mat4.getElement(b,0,3)&&goog.vec.Mat4.getElement(a,1,3)==goog.vec.Mat4.getElement(b,1,3)};ol.vec.Mat4.multVec2=function(a,b,c){var d=goog.vec.Mat4.getElement(a,0,0);var e=goog.vec.Mat4.getElement(a,1,0);var f=goog.vec.Mat4.getElement(a,0,1);var g=goog.vec.Mat4.getElement(a,1,1);var h=goog.vec.Mat4.getElement(a,0,3);var i=goog.vec.Mat4.getElement(a,1,3);var j=b[0],k=b[1];c[0]=d*j+f*k+h;c[1]=e*j+g*k+i;return c};goog.provide("ol.renderer.Layer");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("ol.ImageState");goog.require("ol.Observable");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.layer.Layer");goog.require("ol.source.Source");goog.require("ol.source.State");goog.require("ol.source.Tile");goog.require("ol.tilecoord");goog.require("ol.vec.Mat4");ol.renderer.Layer=function(a){goog.base(this);this.layer_=a};goog.inherits(ol.renderer.Layer,ol.Observable);ol.renderer.Layer.prototype.forEachFeatureAtCoordinate=goog.nullFunction;ol.renderer.Layer.prototype.forEachLayerAtPixel=function(a,b,c,d){var e=a.slice();ol.vec.Mat4.multVec2(b.pixelToCoordinateMatrix,e,e);var f=this.forEachFeatureAtCoordinate(e,b,goog.functions.TRUE,this);if(f){return c.call(d,this.layer_)}else{return undefined}};ol.renderer.Layer.prototype.hasFeatureAtCoordinate=goog.functions.FALSE;ol.renderer.Layer.prototype.createLoadedTileFinder=function(a,b){return function(c,d){return a.forEachLoadedTile(c,d,function(a){if(!b[c]){b[c]={}}b[c][a.tileCoord.toString()]=a})}};ol.renderer.Layer.prototype.getLayer=function(){return this.layer_};ol.renderer.Layer.prototype.handleImageChange_=function(a){var b=a.target;if(b.getState()===ol.ImageState.LOADED){this.renderIfReadyAndVisible()}};ol.renderer.Layer.prototype.loadImage=function(a){var b=a.getState();if(b!=ol.ImageState.LOADED&&b!=ol.ImageState.ERROR){goog.asserts.assert(b==ol.ImageState.IDLE||b==ol.ImageState.LOADING,'imageState is "idle" or "loading"');goog.events.listen(a,goog.events.EventType.CHANGE,this.handleImageChange_,false,this)}if(b==ol.ImageState.IDLE){a.load();b=a.getState();goog.asserts.assert(b==ol.ImageState.LOADING,'imageState is "loading"')}return b==ol.ImageState.LOADED};ol.renderer.Layer.prototype.renderIfReadyAndVisible=function(){var a=this.getLayer();if(a.getVisible()&&a.getSourceState()==ol.source.State.READY){this.changed()}};ol.renderer.Layer.prototype.scheduleExpireCache=function(a,b){if(b.canExpireCache()){a.postRenderFunctions.push(goog.partial(function(a,b,c){var d=goog.getUid(a).toString();a.expireCache(c.usedTiles[d])},b))}};ol.renderer.Layer.prototype.updateAttributions=function(a,b){if(goog.isDefAndNotNull(b)){var c,d,e;for(d=0,e=b.length;d<e;++d){c=b[d];a[goog.getUid(c).toString()]=c}}};ol.renderer.Layer.prototype.updateLogos=function(a,b){var c=b.getLogo();if(goog.isDef(c)){if(goog.isString(c)){a.logos[c]=""}else if(goog.isObject(c)){goog.asserts.assertString(c.href,"logo.href is a string");goog.asserts.assertString(c.src,"logo.src is a string");a.logos[c.src]=c.href}}};ol.renderer.Layer.prototype.updateUsedTiles=function(a,b,c,d){var e=goog.getUid(b).toString();var f=c.toString();if(e in a){if(f in a[e]){a[e][f].extend(d)}else{a[e][f]=d}}else{a[e]={};a[e][f]=d}};ol.renderer.Layer.prototype.snapCenterToPixel=function(a,b,c){return[b*(Math.round(a[0]/b)+c[0]%2/2),b*(Math.round(a[1]/b)+c[1]%2/2)]};ol.renderer.Layer.prototype.manageTilePyramid=function(a,b,c,d,e,f,g,h,i,j){var k=goog.getUid(b).toString();if(!(k in a.wantedTiles)){a.wantedTiles[k]={}}var l=a.wantedTiles[k];var m=a.tileQueue;var n=c.getMinZoom();var o,p,q,r,s,t;for(t=g;t>=n;--t){p=c.getTileRangeForExtentAndZ(f,t,p);q=c.getResolution(t);for(r=p.minX;r<=p.maxX;++r){for(s=p.minY;s<=p.maxY;++s){if(g-t<=h){o=b.getTile(t,r,s,d,e);if(o.getState()==ol.TileState.IDLE){l[ol.tilecoord.toString(o.tileCoord)]=true;if(!m.isKeyQueued(o.getKey())){m.enqueue([o,k,c.getTileCoordCenter(o.tileCoord),q])}}if(goog.isDef(i)){i.call(j,o)}}else{b.useTile(t,r,s)}}}}};goog.provide("ol.style.Image");goog.provide("ol.style.ImageState");ol.style.ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3};ol.style.ImageOptions;ol.style.Image=function(a){this.opacity_=a.opacity;this.rotateWithView_=a.rotateWithView;this.rotation_=a.rotation;this.scale_=a.scale;this.snapToPixel_=a.snapToPixel};ol.style.Image.prototype.getOpacity=function(){return this.opacity_};ol.style.Image.prototype.getRotateWithView=function(){return this.rotateWithView_};ol.style.Image.prototype.getRotation=function(){return this.rotation_};ol.style.Image.prototype.getScale=function(){return this.scale_};ol.style.Image.prototype.getSnapToPixel=function(){return this.snapToPixel_};ol.style.Image.prototype.getAnchor=goog.abstractMethod;ol.style.Image.prototype.getImage=goog.abstractMethod;ol.style.Image.prototype.getHitDetectionImage=goog.abstractMethod;ol.style.Image.prototype.getImageState=goog.abstractMethod;ol.style.Image.prototype.getImageSize=goog.abstractMethod;ol.style.Image.prototype.getHitDetectionImageSize=goog.abstractMethod;ol.style.Image.prototype.getOrigin=goog.abstractMethod;ol.style.Image.prototype.getSize=goog.abstractMethod;ol.style.Image.prototype.setOpacity=function(a){this.opacity_=a};ol.style.Image.prototype.setRotateWithView=function(a){this.rotateWithView_=a};ol.style.Image.prototype.setRotation=function(a){this.rotation_=a};ol.style.Image.prototype.setScale=function(a){this.scale_=a};ol.style.Image.prototype.setSnapToPixel=function(a){this.snapToPixel_=a};ol.style.Image.prototype.listenImageChange=goog.abstractMethod;ol.style.Image.prototype.load=goog.abstractMethod;ol.style.Image.prototype.unlistenImageChange=goog.abstractMethod;goog.provide("ol.style.Icon");goog.provide("ol.style.IconAnchorUnits");goog.provide("ol.style.IconImageCache");goog.provide("ol.style.IconOrigin");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("ol.dom");goog.require("ol.style.Image");goog.require("ol.style.ImageState");ol.style.IconAnchorUnits={FRACTION:"fraction",PIXELS:"pixels"};ol.style.IconOrigin={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};ol.style.Icon=function(a){var b=goog.isDef(a)?a:{};this.anchor_=goog.isDef(b.anchor)?b.anchor:[.5,.5];this.normalizedAnchor_=null;this.anchorOrigin_=goog.isDef(b.anchorOrigin)?b.anchorOrigin:ol.style.IconOrigin.TOP_LEFT;this.anchorXUnits_=goog.isDef(b.anchorXUnits)?b.anchorXUnits:ol.style.IconAnchorUnits.FRACTION;this.anchorYUnits_=goog.isDef(b.anchorYUnits)?b.anchorYUnits:ol.style.IconAnchorUnits.FRACTION;var c=goog.isDef(b.crossOrigin)?b.crossOrigin:null;var d=goog.isDef(b.img)?b.img:null;var e=goog.isDef(b.imgSize)?b.imgSize:null;var f=b.src;goog.asserts.assert(!(goog.isDef(f)&&!goog.isNull(d)),"image and src can not provided at the same time");goog.asserts.assert(!goog.isDef(f)||goog.isDef(f)&&goog.isNull(e),"imgSize should not be set when src is provided");goog.asserts.assert(goog.isNull(d)||!goog.isNull(d)&&!goog.isNull(e),"imgSize must be set when image is provided");if((!goog.isDef(f)||f.length===0)&&!goog.isNull(d)){f=d.src}goog.asserts.assert(goog.isDef(f)&&f.length>0,"must provide a defined and non-empty src or image");var g=goog.isDef(b.src)?ol.style.ImageState.IDLE:ol.style.ImageState.LOADED;this.iconImage_=ol.style.IconImage_.get(d,f,e,c,g);this.offset_=goog.isDef(b.offset)?b.offset:[0,0];this.offsetOrigin_=goog.isDef(b.offsetOrigin)?b.offsetOrigin:ol.style.IconOrigin.TOP_LEFT;this.origin_=null;this.size_=goog.isDef(b.size)?b.size:null;var h=goog.isDef(b.opacity)?b.opacity:1;var i=goog.isDef(b.rotateWithView)?b.rotateWithView:false;var j=goog.isDef(b.rotation)?b.rotation:0;var k=goog.isDef(b.scale)?b.scale:1;var l=goog.isDef(b.snapToPixel)?b.snapToPixel:true;goog.base(this,{opacity:h,rotation:j,scale:k,snapToPixel:l,rotateWithView:i})};goog.inherits(ol.style.Icon,ol.style.Image);ol.style.Icon.prototype.getAnchor=function(){if(!goog.isNull(this.normalizedAnchor_)){return this.normalizedAnchor_}var a=this.anchor_;var b=this.getSize();if(this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION||this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION){if(goog.isNull(b)){return null}a=this.anchor_.slice();if(this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION){a[0]*=b[0]}if(this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION){a[1]*=b[1]}}if(this.anchorOrigin_!=ol.style.IconOrigin.TOP_LEFT){if(goog.isNull(b)){return null}if(a===this.anchor_){a=this.anchor_.slice()}if(this.anchorOrigin_==ol.style.IconOrigin.TOP_RIGHT||this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){a[0]=-a[0]+b[0]}if(this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_LEFT||this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){a[1]=-a[1]+b[1]}}this.normalizedAnchor_=a;return this.normalizedAnchor_};ol.style.Icon.prototype.getImage=function(a){return this.iconImage_.getImage(a)};ol.style.Icon.prototype.getImageSize=function(){return this.iconImage_.getSize()};ol.style.Icon.prototype.getHitDetectionImageSize=function(){return this.getImageSize()};ol.style.Icon.prototype.getImageState=function(){return this.iconImage_.getImageState()};ol.style.Icon.prototype.getHitDetectionImage=function(a){return this.iconImage_.getHitDetectionImage(a)};ol.style.Icon.prototype.getOrigin=function(){if(!goog.isNull(this.origin_)){return this.origin_}var a=this.offset_;if(this.offsetOrigin_!=ol.style.IconOrigin.TOP_LEFT){var b=this.getSize();var c=this.iconImage_.getSize();if(goog.isNull(b)||goog.isNull(c)){return null}a=a.slice();if(this.offsetOrigin_==ol.style.IconOrigin.TOP_RIGHT||this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){a[0]=c[0]-b[0]-a[0]}if(this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_LEFT||this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){a[1]=c[1]-b[1]-a[1]}}this.origin_=a;return this.origin_};ol.style.Icon.prototype.getSrc=function(){return this.iconImage_.getSrc()};ol.style.Icon.prototype.getSize=function(){return goog.isNull(this.size_)?this.iconImage_.getSize():this.size_};ol.style.Icon.prototype.listenImageChange=function(a,b){return goog.events.listen(this.iconImage_,goog.events.EventType.CHANGE,a,false,b)};ol.style.Icon.prototype.load=function(){this.iconImage_.load()};ol.style.Icon.prototype.unlistenImageChange=function(a,b){goog.events.unlisten(this.iconImage_,goog.events.EventType.CHANGE,a,false,b)};ol.style.IconImage_=function(a,b,c,d,e){goog.base(this);this.hitDetectionImage_=null;this.image_=goog.isNull(a)?new Image:a;if(!goog.isNull(d)){this.image_.crossOrigin=d}this.imageListenerKeys_=null;this.imageState_=e;this.size_=c;this.src_=b;this.tainting_=false};goog.inherits(ol.style.IconImage_,goog.events.EventTarget);ol.style.IconImage_.get=function(a,b,c,d,e){var f=ol.style.IconImageCache.getInstance();var g=f.get(b,d);if(goog.isNull(g)){g=new ol.style.IconImage_(a,b,c,d,e);f.set(b,d,g)}return g};ol.style.IconImage_.prototype.determineTainting_=function(){var a=ol.dom.createCanvasContext2D(1,1);a.drawImage(this.image_,0,0);try{a.getImageData(0,0,1,1)}catch(a){this.tainting_=true}};ol.style.IconImage_.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(goog.events.EventType.CHANGE)};ol.style.IconImage_.prototype.handleImageError_=function(){this.imageState_=ol.style.ImageState.ERROR;this.unlistenImage_();this.dispatchChangeEvent_()};ol.style.IconImage_.prototype.handleImageLoad_=function(){this.imageState_=ol.style.ImageState.LOADED;this.size_=[this.image_.width,this.image_.height];this.unlistenImage_();this.determineTainting_();this.dispatchChangeEvent_()};ol.style.IconImage_.prototype.getImage=function(a){return this.image_};ol.style.IconImage_.prototype.getImageState=function(){return this.imageState_};ol.style.IconImage_.prototype.getHitDetectionImage=function(a){if(goog.isNull(this.hitDetectionImage_)){if(this.tainting_){var b=this.size_[0];var c=this.size_[1];var d=ol.dom.createCanvasContext2D(b,c);d.fillRect(0,0,b,c);this.hitDetectionImage_=d.canvas}else{this.hitDetectionImage_=this.image_}}return this.hitDetectionImage_};ol.style.IconImage_.prototype.getSize=function(){return this.size_};ol.style.IconImage_.prototype.getSrc=function(){return this.src_};ol.style.IconImage_.prototype.load=function(){if(this.imageState_==ol.style.ImageState.IDLE){goog.asserts.assert(goog.isDef(this.src_),"this.src_ must not be undefined");goog.asserts.assert(goog.isNull(this.imageListenerKeys_),"no listener keys existing");this.imageState_=ol.style.ImageState.LOADING;this.imageListenerKeys_=[goog.events.listenOnce(this.image_,goog.events.EventType.ERROR,this.handleImageError_,false,this),goog.events.listenOnce(this.image_,goog.events.EventType.LOAD,this.handleImageLoad_,false,this)];try{this.image_.src=this.src_}catch(a){this.handleImageError_()}}};ol.style.IconImage_.prototype.unlistenImage_=function(){goog.asserts.assert(!goog.isNull(this.imageListenerKeys_),"we must have listeners registered");goog.array.forEach(this.imageListenerKeys_,goog.events.unlistenByKey);this.imageListenerKeys_=null};ol.style.IconImageCache=function(){this.cache_={};this.cacheSize_=0;this.maxCacheSize_=32};goog.addSingletonGetter(ol.style.IconImageCache);ol.style.IconImageCache.getKey=function(a,b){goog.asserts.assert(goog.isDef(b),"argument crossOrigin must be defined");return b+":"+a};ol.style.IconImageCache.prototype.clear=function(){this.cache_={};this.cacheSize_=0};ol.style.IconImageCache.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var a=0;var b,c;for(b in this.cache_){c=this.cache_[b];if((a++&3)===0&&!goog.events.hasListener(c)){delete this.cache_[b];--this.cacheSize_}}}};ol.style.IconImageCache.prototype.get=function(a,b){var c=ol.style.IconImageCache.getKey(a,b);return c in this.cache_?this.cache_[c]:null};ol.style.IconImageCache.prototype.set=function(a,b,c){var d=ol.style.IconImageCache.getKey(a,b);this.cache_[d]=c;++this.cacheSize_};goog.provide("ol.RendererType");goog.provide("ol.renderer.Map");goog.require("goog.Disposable");goog.require("goog.asserts");goog.require("goog.dispose");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.extent");goog.require("ol.layer.Layer");goog.require("ol.renderer.Layer");goog.require("ol.style.IconImageCache");goog.require("ol.vec.Mat4");ol.RendererType={CANVAS:"canvas",DOM:"dom",WEBGL:"webgl"};ol.renderer.Map=function(a,b){goog.base(this);this.map_=b;this.layerRenderers_={};this.layerRendererListeners_={}};goog.inherits(ol.renderer.Map,goog.Disposable);ol.renderer.Map.prototype.calculateMatrices2D=function(a){var b=a.viewState;var c=a.coordinateToPixelMatrix;goog.asserts.assert(!goog.isNull(c),"frameState has non-null coordinateToPixelMatrix");ol.vec.Mat4.makeTransform2D(c,a.size[0]/2,a.size[1]/2,1/b.resolution,-1/b.resolution,-b.rotation,-b.center[0],-b.center[1]);var d=goog.vec.Mat4.invert(c,a.pixelToCoordinateMatrix);goog.asserts.assert(d,"matrix could be inverted")};ol.renderer.Map.prototype.createLayerRenderer=goog.abstractMethod;ol.renderer.Map.prototype.disposeInternal=function(){goog.object.forEach(this.layerRenderers_,goog.dispose);goog.base(this,"disposeInternal")};ol.renderer.Map.expireIconCache_=function(a,b){ol.style.IconImageCache.getInstance().expire()};ol.renderer.Map.prototype.forEachFeatureAtCoordinate=function(a,b,c,d,e,f){var g;var h=b.viewState;var i=h.resolution;var j={};function k(a){goog.asserts.assert(goog.isDef(a),"received a feature");var b=goog.getUid(a).toString();if(!(b in j)){j[b]=true;return c.call(d,a,null)}}var l=h.projection;var m=a;if(l.canWrapX()){var n=l.getExtent();var o=ol.extent.getWidth(n);var p=a[0];if(p<n[0]||p>n[2]){var q=Math.ceil((n[0]-p)/o);m=[p+o*q,a[1]]}}var r=b.layerStatesArray;var s=r.length;var t;for(t=s-1;t>=0;--t){var u=r[t];var v=u.layer;if(!u.managed||ol.layer.Layer.visibleAtResolution(u,i)&&e.call(f,v)){var w=this.getLayerRenderer(v);g=w.forEachFeatureAtCoordinate(v.getSource().getWrapX()?m:a,b,c,d);if(g){return g}}}return undefined};ol.renderer.Map.prototype.forEachLayerAtPixel=function(a,b,c,d,e,f){var g;var h=b.viewState;var i=h.resolution;var j=b.layerStatesArray;var k=j.length;var l;for(l=k-1;l>=0;--l){var m=j[l];var n=m.layer;if(ol.layer.Layer.visibleAtResolution(m,i)&&e.call(f,n)){var o=this.getLayerRenderer(n);g=o.forEachLayerAtPixel(a,b,c,d);if(g){return g}}}return undefined};ol.renderer.Map.prototype.hasFeatureAtCoordinate=function(a,b,c,d){var e=this.forEachFeatureAtCoordinate(a,b,goog.functions.TRUE,this,c,d);return goog.isDef(e)};ol.renderer.Map.prototype.getLayerRenderer=function(a){var b=goog.getUid(a).toString();if(b in this.layerRenderers_){return this.layerRenderers_[b]}else{var c=this.createLayerRenderer(a);this.layerRenderers_[b]=c;this.layerRendererListeners_[b]=goog.events.listen(c,goog.events.EventType.CHANGE,this.handleLayerRendererChange_,false,this);return c}};ol.renderer.Map.prototype.getLayerRendererByKey=function(a){goog.asserts.assert(a in this.layerRenderers_,"given layerKey (%s) exists in layerRenderers",a);return this.layerRenderers_[a]};ol.renderer.Map.prototype.getLayerRenderers=function(){return this.layerRenderers_};ol.renderer.Map.prototype.getMap=function(){return this.map_};ol.renderer.Map.prototype.getType=goog.abstractMethod;ol.renderer.Map.prototype.handleLayerRendererChange_=function(){this.map_.render()};ol.renderer.Map.prototype.removeLayerRendererByKey_=function(a){goog.asserts.assert(a in this.layerRenderers_,"given layerKey (%s) exists in layerRenderers",a);var b=this.layerRenderers_[a];delete this.layerRenderers_[a];goog.asserts.assert(a in this.layerRendererListeners_,"given layerKey (%s) exists in layerRendererListeners",a);goog.events.unlistenByKey(this.layerRendererListeners_[a]);delete this.layerRendererListeners_[a];return b};ol.renderer.Map.prototype.renderFrame=goog.nullFunction;ol.renderer.Map.prototype.removeUnusedLayerRenderers_=function(a,b){var c;for(c in this.layerRenderers_){if(goog.isNull(b)||!(c in b.layerStates)){goog.dispose(this.removeLayerRendererByKey_(c))}}};ol.renderer.Map.prototype.scheduleExpireIconCache=function(a){a.postRenderFunctions.push(ol.renderer.Map.expireIconCache_)};ol.renderer.Map.prototype.scheduleRemoveUnusedLayerRenderers=function(a){var b;for(b in this.layerRenderers_){if(!(b in a.layerStates)){a.postRenderFunctions.push(goog.bind(this.removeUnusedLayerRenderers_,this));return}}};ol.renderer.Map.sortByZIndex=function(a,b){return a.zIndex-b.zIndex};goog.provide("ol.structs.PriorityQueue");goog.require("goog.asserts");goog.require("goog.object");ol.structs.PriorityQueue=function(a,b){this.priorityFunction_=a;this.keyFunction_=b;this.elements_=[];this.priorities_=[];this.queuedElements_={}};ol.structs.PriorityQueue.DROP=Infinity;ol.structs.PriorityQueue.prototype.assertValid=function(){var a=this.elements_;var b=this.priorities_;var c=a.length;goog.asserts.assert(b.length==c);var d,e;for(d=0;d<(c>>1)-1;++d){e=b[d];goog.asserts.assert(e<=b[this.getLeftChildIndex_(d)],"priority smaller than or equal to priority of left child (%s <= %s)",e,b[this.getLeftChildIndex_(d)]);goog.asserts.assert(e<=b[this.getRightChildIndex_(d)],"priority smaller than or equal to priority of right child (%s <= %s)",e,b[this.getRightChildIndex_(d)])}};ol.structs.PriorityQueue.prototype.clear=function(){this.elements_.length=0;this.priorities_.length=0;goog.object.clear(this.queuedElements_)};ol.structs.PriorityQueue.prototype.dequeue=function(){var a=this.elements_;goog.asserts.assert(a.length>0,"must have elements in order to be able to dequeue");var b=this.priorities_;var c=a[0];if(a.length==1){a.length=0;b.length=0}else{a[0]=a.pop();b[0]=b.pop();this.siftUp_(0)}var d=this.keyFunction_(c);goog.asserts.assert(d in this.queuedElements_,"key %s is not listed as queued",d);delete this.queuedElements_[d];return c};ol.structs.PriorityQueue.prototype.enqueue=function(a){goog.asserts.assert(!(this.keyFunction_(a)in this.queuedElements_),"key %s is already listed as queued",this.keyFunction_(a));var b=this.priorityFunction_(a);if(b!=ol.structs.PriorityQueue.DROP){this.elements_.push(a);this.priorities_.push(b);this.queuedElements_[this.keyFunction_(a)]=true;this.siftDown_(0,this.elements_.length-1)}};ol.structs.PriorityQueue.prototype.getCount=function(){return this.elements_.length};ol.structs.PriorityQueue.prototype.getLeftChildIndex_=function(a){return a*2+1};ol.structs.PriorityQueue.prototype.getRightChildIndex_=function(a){return a*2+2};ol.structs.PriorityQueue.prototype.getParentIndex_=function(a){return a-1>>1};ol.structs.PriorityQueue.prototype.heapify_=function(){var a;for(a=(this.elements_.length>>1)-1;a>=0;a--){this.siftUp_(a)}};ol.structs.PriorityQueue.prototype.isEmpty=function(){return this.elements_.length===0};ol.structs.PriorityQueue.prototype.isKeyQueued=function(a){return a in this.queuedElements_};ol.structs.PriorityQueue.prototype.isQueued=function(a){return this.isKeyQueued(this.keyFunction_(a))};ol.structs.PriorityQueue.prototype.siftUp_=function(a){var b=this.elements_;var c=this.priorities_;var d=b.length;var e=b[a];var f=c[a];var g=a;while(a<d>>1){var h=this.getLeftChildIndex_(a);var i=this.getRightChildIndex_(a);var j=i<d&&c[i]<c[h]?i:h;b[a]=b[j];c[a]=c[j];a=j}b[a]=e;c[a]=f;this.siftDown_(g,a)};ol.structs.PriorityQueue.prototype.siftDown_=function(a,b){var c=this.elements_;var d=this.priorities_;var e=c[b];var f=d[b];while(b>a){var g=this.getParentIndex_(b);if(d[g]>f){c[b]=c[g];d[b]=d[g];b=g}else{break}}c[b]=e;d[b]=f};ol.structs.PriorityQueue.prototype.reprioritize=function(){var a=this.priorityFunction_;var b=this.elements_;var c=this.priorities_;var d=0;var e=b.length;var f,g,h;for(g=0;g<e;++g){f=b[g];h=a(f);if(h==ol.structs.PriorityQueue.DROP){delete this.queuedElements_[this.keyFunction_(f)]}else{c[d]=h;b[d++]=f}}b.length=d;c.length=d;this.heapify_()};goog.provide("ol.TilePriorityFunction");goog.provide("ol.TileQueue");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.Coordinate");goog.require("ol.TileState");goog.require("ol.structs.PriorityQueue");ol.TilePriorityFunction;ol.TileQueue=function(a,b){goog.base(this,function(b){return a.apply(null,b)},function(a){return a[0].getKey()});this.tileChangeCallback_=b;this.tilesLoading_=0};goog.inherits(ol.TileQueue,ol.structs.PriorityQueue);ol.TileQueue.prototype.getTilesLoading=function(){return this.tilesLoading_};ol.TileQueue.prototype.handleTileChange=function(a){var b=a.target;var c=b.getState();if(c===ol.TileState.LOADED||c===ol.TileState.ERROR||c===ol.TileState.EMPTY){goog.events.unlisten(b,goog.events.EventType.CHANGE,this.handleTileChange,false,this);--this.tilesLoading_;this.tileChangeCallback_()}};ol.TileQueue.prototype.loadMoreTiles=function(a,b){var c=0;var d;while(this.tilesLoading_<a&&c<b&&this.getCount()>0){d=this.dequeue()[0];if(d.getState()===ol.TileState.IDLE){goog.events.listen(d,goog.events.EventType.CHANGE,this.handleTileChange,false,this);d.load();++this.tilesLoading_;++c}}};goog.provide("ol.Kinetic");goog.require("ol.Coordinate");goog.require("ol.PreRenderFunction");goog.require("ol.animation");ol.Kinetic=function(a,b,c){this.decay_=a;this.minVelocity_=b;this.delay_=c;this.points_=[];this.angle_=0;this.initialVelocity_=0};ol.Kinetic.prototype.begin=function(){this.points_.length=0;this.angle_=0;this.initialVelocity_=0};ol.Kinetic.prototype.update=function(a,b){this.points_.push(a,b,goog.now())};ol.Kinetic.prototype.end=function(){if(this.points_.length<6){return false}var a=goog.now()-this.delay_;var b=this.points_.length-3;if(this.points_[b+2]<a){return false}var c=b-3;while(c>0&&this.points_[c+2]>a){c-=3}var d=this.points_[b+2]-this.points_[c+2];var e=this.points_[b]-this.points_[c];var f=this.points_[b+1]-this.points_[c+1];this.angle_=Math.atan2(f,e);this.initialVelocity_=Math.sqrt(e*e+f*f)/d;return this.initialVelocity_>this.minVelocity_};ol.Kinetic.prototype.pan=function(a){var b=this.decay_;var c=this.initialVelocity_;var d=this.minVelocity_-c;var e=this.getDuration_();var f=function(a){return c*(Math.exp(b*a*e)-1)/d};return ol.animation.pan({source:a,duration:e,easing:f})};ol.Kinetic.prototype.getDuration_=function(){return Math.log(this.minVelocity_/this.initialVelocity_)/this.decay_};ol.Kinetic.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_};ol.Kinetic.prototype.getAngle=function(){return this.angle_};goog.provide("ol.interaction.Interaction");goog.provide("ol.interaction.InteractionProperty");goog.require("ol.MapBrowserEvent");goog.require("ol.Object");goog.require("ol.animation");goog.require("ol.easing");ol.interaction.InteractionProperty={ACTIVE:"active"};ol.interaction.Interaction=function(a){goog.base(this);this.map_=null;this.setActive(true);this.handleEvent=a.handleEvent};goog.inherits(ol.interaction.Interaction,ol.Object);ol.interaction.Interaction.prototype.getActive=function(){return this.get(ol.interaction.InteractionProperty.ACTIVE)};ol.interaction.Interaction.prototype.getMap=function(){return this.map_};ol.interaction.Interaction.prototype.setActive=function(a){this.set(ol.interaction.InteractionProperty.ACTIVE,a)};ol.interaction.Interaction.prototype.setMap=function(a){this.map_=a};ol.interaction.Interaction.pan=function(a,b,c,d){var e=b.getCenter();if(goog.isDef(e)){if(goog.isDef(d)&&d>0){a.beforeRender(ol.animation.pan({source:e,duration:d,easing:ol.easing.linear}))}var f=b.constrainCenter([e[0]+c[0],e[1]+c[1]]);b.setCenter(f)}};ol.interaction.Interaction.rotate=function(a,b,c,d,e){c=b.constrainRotation(c,0);ol.interaction.Interaction.rotateWithoutConstraints(a,b,c,d,e)};ol.interaction.Interaction.rotateWithoutConstraints=function(a,b,c,d,e){if(goog.isDefAndNotNull(c)){var f=b.getRotation();var g=b.getCenter()
;if(goog.isDef(f)&&goog.isDef(g)&&goog.isDef(e)&&e>0){a.beforeRender(ol.animation.rotate({rotation:f,duration:e,easing:ol.easing.easeOut}));if(goog.isDef(d)){a.beforeRender(ol.animation.pan({source:g,duration:e,easing:ol.easing.easeOut}))}}b.rotate(c,d)}};ol.interaction.Interaction.zoom=function(a,b,c,d,e,f){c=b.constrainResolution(c,0,f);ol.interaction.Interaction.zoomWithoutConstraints(a,b,c,d,e)};ol.interaction.Interaction.zoomByDelta=function(a,b,c,d,e){var f=b.getResolution();var g=b.constrainResolution(f,c,0);ol.interaction.Interaction.zoomWithoutConstraints(a,b,g,d,e)};ol.interaction.Interaction.zoomWithoutConstraints=function(a,b,c,d,e){if(goog.isDefAndNotNull(c)){var f=b.getResolution();var g=b.getCenter();if(goog.isDef(f)&&goog.isDef(g)&&goog.isDef(e)&&e>0){a.beforeRender(ol.animation.zoom({resolution:f,duration:e,easing:ol.easing.easeOut}));if(goog.isDef(d)){a.beforeRender(ol.animation.pan({source:g,duration:e,easing:ol.easing.easeOut}))}}if(goog.isDefAndNotNull(d)){var h=b.calculateCenterZoom(c,d);b.setCenter(h)}b.setResolution(c)}};goog.provide("ol.interaction.DoubleClickZoom");goog.require("goog.asserts");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.interaction.Interaction");ol.interaction.DoubleClickZoom=function(a){var b=goog.isDef(a)?a:{};this.delta_=goog.isDef(b.delta)?b.delta:1;goog.base(this,{handleEvent:ol.interaction.DoubleClickZoom.handleEvent});this.duration_=goog.isDef(b.duration)?b.duration:250};goog.inherits(ol.interaction.DoubleClickZoom,ol.interaction.Interaction);ol.interaction.DoubleClickZoom.handleEvent=function(a){var b=false;var c=a.browserEvent;if(a.type==ol.MapBrowserEvent.EventType.DBLCLICK){var d=a.map;var e=a.coordinate;var f=c.shiftKey?-this.delta_:this.delta_;var g=d.getView();goog.asserts.assert(!goog.isNull(g),"view should not be null");ol.interaction.Interaction.zoomByDelta(d,g,f,e,this.duration_);a.preventDefault();b=true}return!b};goog.provide("ol.events.ConditionType");goog.provide("ol.events.condition");goog.require("goog.asserts");goog.require("goog.dom.TagName");goog.require("goog.functions");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserPointerEvent");ol.events.ConditionType;ol.events.condition.altKeyOnly=function(a){var b=a.browserEvent;return b.altKey&&!b.platformModifierKey&&!b.shiftKey};ol.events.condition.altShiftKeysOnly=function(a){var b=a.browserEvent;return b.altKey&&!b.platformModifierKey&&b.shiftKey};ol.events.condition.always=goog.functions.TRUE;ol.events.condition.click=function(a){return a.type==ol.MapBrowserEvent.EventType.CLICK};ol.events.condition.never=goog.functions.FALSE;ol.events.condition.pointerMove=function(a){return a.type=="pointermove"};ol.events.condition.singleClick=function(a){return a.type==ol.MapBrowserEvent.EventType.SINGLECLICK};ol.events.condition.doubleClick=function(a){return a.type==ol.MapBrowserEvent.EventType.DBLCLICK};ol.events.condition.noModifierKeys=function(a){var b=a.browserEvent;return!b.altKey&&!b.platformModifierKey&&!b.shiftKey};ol.events.condition.platformModifierKeyOnly=function(a){var b=a.browserEvent;return!b.altKey&&b.platformModifierKey&&!b.shiftKey};ol.events.condition.shiftKeyOnly=function(a){var b=a.browserEvent;return!b.altKey&&!b.platformModifierKey&&b.shiftKey};ol.events.condition.targetNotEditable=function(a){var b=a.browserEvent.target;goog.asserts.assertInstanceof(b,Element,"target should be an Element");var c=b.tagName;return c!==goog.dom.TagName.INPUT&&c!==goog.dom.TagName.SELECT&&c!==goog.dom.TagName.TEXTAREA};ol.events.condition.mouseOnly=function(a){goog.asserts.assertInstanceof(a,ol.MapBrowserPointerEvent,"mapBrowserEvent should be an instance of ol.MapBrowserPointerEvent");return a.pointerEvent.pointerId==1};goog.provide("ol.interaction.Pointer");goog.require("goog.functions");goog.require("goog.object");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserPointerEvent");goog.require("ol.Pixel");goog.require("ol.interaction.Interaction");ol.interaction.Pointer=function(a){var b=goog.isDef(a)?a:{};var c=goog.isDef(b.handleEvent)?b.handleEvent:ol.interaction.Pointer.handleEvent;goog.base(this,{handleEvent:c});this.handleDownEvent_=goog.isDef(b.handleDownEvent)?b.handleDownEvent:ol.interaction.Pointer.handleDownEvent;this.handleDragEvent_=goog.isDef(b.handleDragEvent)?b.handleDragEvent:ol.interaction.Pointer.handleDragEvent;this.handleMoveEvent_=goog.isDef(b.handleMoveEvent)?b.handleMoveEvent:ol.interaction.Pointer.handleMoveEvent;this.handleUpEvent_=goog.isDef(b.handleUpEvent)?b.handleUpEvent:ol.interaction.Pointer.handleUpEvent;this.handlingDownUpSequence=false;this.trackedPointers_={};this.targetPointers=[]};goog.inherits(ol.interaction.Pointer,ol.interaction.Interaction);ol.interaction.Pointer.centroid=function(a){var b=a.length;var c=0;var d=0;for(var e=0;e<b;e++){c+=a[e].clientX;d+=a[e].clientY}return[c/b,d/b]};ol.interaction.Pointer.prototype.isPointerDraggingEvent_=function(a){var b=a.type;return b===ol.MapBrowserEvent.EventType.POINTERDOWN||b===ol.MapBrowserEvent.EventType.POINTERDRAG||b===ol.MapBrowserEvent.EventType.POINTERUP};ol.interaction.Pointer.prototype.updateTrackedPointers_=function(a){if(this.isPointerDraggingEvent_(a)){var b=a.pointerEvent;if(a.type==ol.MapBrowserEvent.EventType.POINTERUP){delete this.trackedPointers_[b.pointerId]}else if(a.type==ol.MapBrowserEvent.EventType.POINTERDOWN){this.trackedPointers_[b.pointerId]=b}else if(b.pointerId in this.trackedPointers_){this.trackedPointers_[b.pointerId]=b}this.targetPointers=goog.object.getValues(this.trackedPointers_)}};ol.interaction.Pointer.handleDragEvent=goog.nullFunction;ol.interaction.Pointer.handleUpEvent=goog.functions.FALSE;ol.interaction.Pointer.handleDownEvent=goog.functions.FALSE;ol.interaction.Pointer.handleMoveEvent=goog.nullFunction;ol.interaction.Pointer.handleEvent=function(a){if(!(a instanceof ol.MapBrowserPointerEvent)){return true}var b=false;this.updateTrackedPointers_(a);if(this.handlingDownUpSequence){if(a.type==ol.MapBrowserEvent.EventType.POINTERDRAG){this.handleDragEvent_(a)}else if(a.type==ol.MapBrowserEvent.EventType.POINTERUP){this.handlingDownUpSequence=this.handleUpEvent_(a)}}if(a.type==ol.MapBrowserEvent.EventType.POINTERDOWN){var c=this.handleDownEvent_(a);this.handlingDownUpSequence=c;b=this.shouldStopEvent(c)}else if(a.type==ol.MapBrowserEvent.EventType.POINTERMOVE){this.handleMoveEvent_(a)}return!b};ol.interaction.Pointer.prototype.shouldStopEvent=goog.functions.identity;goog.provide("ol.interaction.DragPan");goog.require("goog.asserts");goog.require("ol.Kinetic");goog.require("ol.Pixel");goog.require("ol.PreRenderFunction");goog.require("ol.ViewHint");goog.require("ol.coordinate");goog.require("ol.events.condition");goog.require("ol.interaction.Pointer");ol.interaction.DragPan=function(a){goog.base(this,{handleDownEvent:ol.interaction.DragPan.handleDownEvent_,handleDragEvent:ol.interaction.DragPan.handleDragEvent_,handleUpEvent:ol.interaction.DragPan.handleUpEvent_});var b=goog.isDef(a)?a:{};this.kinetic_=b.kinetic;this.kineticPreRenderFn_=null;this.lastCentroid=null;this.condition_=goog.isDef(b.condition)?b.condition:ol.events.condition.noModifierKeys;this.noKinetic_=false};goog.inherits(ol.interaction.DragPan,ol.interaction.Pointer);ol.interaction.DragPan.handleDragEvent_=function(a){goog.asserts.assert(this.targetPointers.length>=1,"the length of this.targetPointers should be more than 1");var b=ol.interaction.Pointer.centroid(this.targetPointers);if(this.kinetic_){this.kinetic_.update(b[0],b[1])}if(!goog.isNull(this.lastCentroid)){var c=this.lastCentroid[0]-b[0];var d=b[1]-this.lastCentroid[1];var e=a.map;var f=e.getView();var g=f.getState();var h=[c,d];ol.coordinate.scale(h,g.resolution);ol.coordinate.rotate(h,g.rotation);ol.coordinate.add(h,g.center);h=f.constrainCenter(h);e.render();f.setCenter(h)}this.lastCentroid=b};ol.interaction.DragPan.handleUpEvent_=function(a){var b=a.map;var c=b.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var d=this.kinetic_.getDistance();var e=this.kinetic_.getAngle();var f=c.getCenter();goog.asserts.assert(goog.isDef(f),"center should be defined");this.kineticPreRenderFn_=this.kinetic_.pan(f);b.beforeRender(this.kineticPreRenderFn_);var g=b.getPixelFromCoordinate(f);var h=b.getCoordinateFromPixel([g[0]-d*Math.cos(e),g[1]-d*Math.sin(e)]);h=c.constrainCenter(h);c.setCenter(h)}c.setHint(ol.ViewHint.INTERACTING,-1);b.render();return false}else{this.lastCentroid=null;return true}};ol.interaction.DragPan.handleDownEvent_=function(a){if(this.targetPointers.length>0&&this.condition_(a)){var b=a.map;var c=b.getView();this.lastCentroid=null;if(!this.handlingDownUpSequence){c.setHint(ol.ViewHint.INTERACTING,1)}b.render();if(!goog.isNull(this.kineticPreRenderFn_)&&b.removePreRenderFunction(this.kineticPreRenderFn_)){c.setCenter(a.frameState.viewState.center);this.kineticPreRenderFn_=null}if(this.kinetic_){this.kinetic_.begin()}this.noKinetic_=this.targetPointers.length>1;return true}else{return false}};ol.interaction.DragPan.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.interaction.DragRotate");goog.require("ol.ViewHint");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.DragRotate=function(a){var b=goog.isDef(a)?a:{};goog.base(this,{handleDownEvent:ol.interaction.DragRotate.handleDownEvent_,handleDragEvent:ol.interaction.DragRotate.handleDragEvent_,handleUpEvent:ol.interaction.DragRotate.handleUpEvent_});this.condition_=goog.isDef(b.condition)?b.condition:ol.events.condition.altShiftKeysOnly;this.lastAngle_=undefined;this.duration_=goog.isDef(b.duration)?b.duration:250};goog.inherits(ol.interaction.DragRotate,ol.interaction.Pointer);ol.interaction.DragRotate.handleDragEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return}var b=a.map;var c=b.getSize();var d=a.pixel;var e=Math.atan2(c[1]/2-d[1],d[0]-c[0]/2);if(goog.isDef(this.lastAngle_)){var f=e-this.lastAngle_;var g=b.getView();var h=g.getRotation();b.render();ol.interaction.Interaction.rotateWithoutConstraints(b,g,h-f)}this.lastAngle_=e};ol.interaction.DragRotate.handleUpEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return true}var b=a.map;var c=b.getView();c.setHint(ol.ViewHint.INTERACTING,-1);var d=c.getRotation();ol.interaction.Interaction.rotate(b,c,d,undefined,this.duration_);return false};ol.interaction.DragRotate.handleDownEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return false}var b=a.browserEvent;if(b.isMouseActionButton()&&this.condition_(a)){var c=a.map;c.getView().setHint(ol.ViewHint.INTERACTING,1);c.render();this.lastAngle_=undefined;return true}else{return false}};ol.interaction.DragRotate.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.render.Box");goog.require("goog.Disposable");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("ol.geom.Polygon");goog.require("ol.render.EventType");ol.render.Box=function(a){this.map_=null;this.postComposeListenerKey_=null;this.startPixel_=null;this.endPixel_=null;this.geometry_=null;this.style_=a};goog.inherits(ol.render.Box,goog.Disposable);ol.render.Box.prototype.createGeometry_=function(){goog.asserts.assert(!goog.isNull(this.startPixel_),"this.startPixel_ should not be null");goog.asserts.assert(!goog.isNull(this.endPixel_),"this.endPixel_ should not be null");goog.asserts.assert(!goog.isNull(this.map_),"this.map_ should not be null");var a=this.startPixel_;var b=this.endPixel_;var c=[a,[a[0],b[1]],b,[b[0],a[1]]];var d=goog.array.map(c,this.map_.getCoordinateFromPixel,this.map_);d[4]=d[0].slice();return new ol.geom.Polygon([d])};ol.render.Box.prototype.disposeInternal=function(){this.setMap(null)};ol.render.Box.prototype.handleMapPostCompose_=function(a){var b=this.geometry_;goog.asserts.assert(goog.isDefAndNotNull(b),"geometry should be defined");var c=this.style_;goog.asserts.assert(!goog.isNull(c),"style should not be null");a.vectorContext.drawAsync(Infinity,function(a){a.setFillStrokeStyle(c.getFill(),c.getStroke());a.setTextStyle(c.getText());a.drawPolygonGeometry(b,null)})};ol.render.Box.prototype.getGeometry=function(){return this.geometry_};ol.render.Box.prototype.requestMapRenderFrame_=function(){if(!goog.isNull(this.map_)&&!goog.isNull(this.startPixel_)&&!goog.isNull(this.endPixel_)){this.map_.render()}};ol.render.Box.prototype.setMap=function(a){if(!goog.isNull(this.postComposeListenerKey_)){goog.events.unlistenByKey(this.postComposeListenerKey_);this.postComposeListenerKey_=null;this.map_.render();this.map_=null}this.map_=a;if(!goog.isNull(this.map_)){this.postComposeListenerKey_=goog.events.listen(a,ol.render.EventType.POSTCOMPOSE,this.handleMapPostCompose_,false,this);this.requestMapRenderFrame_()}};ol.render.Box.prototype.setPixels=function(a,b){this.startPixel_=a;this.endPixel_=b;this.geometry_=this.createGeometry_();this.requestMapRenderFrame_()};goog.provide("ol.DragBoxEvent");goog.provide("ol.interaction.DragBox");goog.require("goog.events.Event");goog.require("ol");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Pointer");goog.require("ol.render.Box");ol.DRAG_BOX_HYSTERESIS_PIXELS_SQUARED=ol.DRAG_BOX_HYSTERESIS_PIXELS*ol.DRAG_BOX_HYSTERESIS_PIXELS;ol.DragBoxEventType={BOXSTART:"boxstart",BOXEND:"boxend"};ol.DragBoxEvent=function(a,b){goog.base(this,a);this.coordinate=b};goog.inherits(ol.DragBoxEvent,goog.events.Event);ol.interaction.DragBox=function(a){goog.base(this,{handleDownEvent:ol.interaction.DragBox.handleDownEvent_,handleDragEvent:ol.interaction.DragBox.handleDragEvent_,handleUpEvent:ol.interaction.DragBox.handleUpEvent_});var b=goog.isDef(a)?a:{};var c=goog.isDef(b.style)?b.style:null;this.box_=new ol.render.Box(c);this.startPixel_=null;this.condition_=goog.isDef(b.condition)?b.condition:ol.events.condition.always};goog.inherits(ol.interaction.DragBox,ol.interaction.Pointer);ol.interaction.DragBox.handleDragEvent_=function(a){this.box_.setPixels(this.startPixel_,a.pixel)};ol.interaction.DragBox.prototype.getGeometry=function(){return this.box_.getGeometry()};ol.interaction.DragBox.prototype.onBoxEnd=goog.nullFunction;ol.interaction.DragBox.handleUpEvent_=function(a){this.box_.setMap(null);var b=a.pixel[0]-this.startPixel_[0];var c=a.pixel[1]-this.startPixel_[1];if(b*b+c*c>=ol.DRAG_BOX_HYSTERESIS_PIXELS_SQUARED){this.onBoxEnd(a);this.dispatchEvent(new ol.DragBoxEvent(ol.DragBoxEventType.BOXEND,a.coordinate))}return false};ol.interaction.DragBox.handleDownEvent_=function(a){var b=a.browserEvent;if(this.condition_(a)){this.startPixel_=a.pixel;this.box_.setMap(a.map);this.box_.setPixels(this.startPixel_,this.startPixel_);this.dispatchEvent(new ol.DragBoxEvent(ol.DragBoxEventType.BOXSTART,a.coordinate));return true}else{return false}};goog.provide("goog.crypt");goog.require("goog.array");goog.require("goog.asserts");goog.crypt.stringToByteArray=function(a){var b=[],c=0;for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);while(e>255){b[c++]=e&255;e>>=8}b[c++]=e}return b};goog.crypt.byteArrayToString=function(a){var b=8192;if(a.length<=b){return String.fromCharCode.apply(null,a)}var c="";for(var d=0;d<a.length;d+=b){var e=goog.array.slice(a,d,d+b);c+=String.fromCharCode.apply(null,e)}return c};goog.crypt.byteArrayToHex=function(a){return goog.array.map(a,function(a){var b=a.toString(16);return b.length>1?b:"0"+b}).join("")};goog.crypt.hexToByteArray=function(a){goog.asserts.assert(a.length%2==0,"Key string length must be multiple of 2");var b=[];for(var c=0;c<a.length;c+=2){b.push(parseInt(a.substring(c,c+2),16))}return b};goog.crypt.stringToUtf8ByteArray=function(a){var b=[],c=0;for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);if(e<128){b[c++]=e}else if(e<2048){b[c++]=e>>6|192;b[c++]=e&63|128}else{b[c++]=e>>12|224;b[c++]=e>>6&63|128;b[c++]=e&63|128}}return b};goog.crypt.utf8ByteArrayToString=function(a){var b=[],c=0,d=0;while(c<a.length){var e=a[c++];if(e<128){b[d++]=String.fromCharCode(e)}else if(e>191&&e<224){var f=a[c++];b[d++]=String.fromCharCode((e&31)<<6|f&63)}else{var f=a[c++];var g=a[c++];b[d++]=String.fromCharCode((e&15)<<12|(f&63)<<6|g&63)}}return b.join("")};goog.crypt.xorByteArray=function(a,b){goog.asserts.assert(a.length==b.length,"XOR array lengths must match");var c=[];for(var d=0;d<a.length;d++){c.push(a[d]^b[d])}return c};goog.provide("goog.crypt.Hash");goog.crypt.Hash=function(){this.blockSize=-1};goog.crypt.Hash.prototype.reset=goog.abstractMethod;goog.crypt.Hash.prototype.update=goog.abstractMethod;goog.crypt.Hash.prototype.digest=goog.abstractMethod;goog.provide("goog.crypt.Md5");goog.require("goog.crypt.Hash");goog.crypt.Md5=function(){goog.crypt.Md5.base(this,"constructor");this.blockSize=512/8;this.chain_=new Array(4);this.block_=new Array(this.blockSize);this.blockLength_=0;this.totalLength_=0;this.reset()};goog.inherits(goog.crypt.Md5,goog.crypt.Hash);goog.crypt.Md5.prototype.reset=function(){this.chain_[0]=1732584193;this.chain_[1]=4023233417;this.chain_[2]=2562383102;this.chain_[3]=271733878;this.blockLength_=0;this.totalLength_=0};goog.crypt.Md5.prototype.compress_=function(a,b){if(!b){b=0}var c=new Array(16);if(goog.isString(a)){for(var d=0;d<16;++d){c[d]=a.charCodeAt(b++)|a.charCodeAt(b++)<<8|a.charCodeAt(b++)<<16|a.charCodeAt(b++)<<24}}else{for(var d=0;d<16;++d){c[d]=a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24}}var e=this.chain_[0];var f=this.chain_[1];var g=this.chain_[2];var h=this.chain_[3];var i=0;i=e+(h^f&(g^h))+c[0]+3614090360&4294967295;e=f+(i<<7&4294967295|i>>>25);i=h+(g^e&(f^g))+c[1]+3905402710&4294967295;h=e+(i<<12&4294967295|i>>>20);i=g+(f^h&(e^f))+c[2]+606105819&4294967295;g=h+(i<<17&4294967295|i>>>15);i=f+(e^g&(h^e))+c[3]+3250441966&4294967295;f=g+(i<<22&4294967295|i>>>10);i=e+(h^f&(g^h))+c[4]+4118548399&4294967295;e=f+(i<<7&4294967295|i>>>25);i=h+(g^e&(f^g))+c[5]+1200080426&4294967295;h=e+(i<<12&4294967295|i>>>20);i=g+(f^h&(e^f))+c[6]+2821735955&4294967295;g=h+(i<<17&4294967295|i>>>15);i=f+(e^g&(h^e))+c[7]+4249261313&4294967295;f=g+(i<<22&4294967295|i>>>10);i=e+(h^f&(g^h))+c[8]+1770035416&4294967295;e=f+(i<<7&4294967295|i>>>25);i=h+(g^e&(f^g))+c[9]+2336552879&4294967295;h=e+(i<<12&4294967295|i>>>20);i=g+(f^h&(e^f))+c[10]+4294925233&4294967295;g=h+(i<<17&4294967295|i>>>15);i=f+(e^g&(h^e))+c[11]+2304563134&4294967295;f=g+(i<<22&4294967295|i>>>10);i=e+(h^f&(g^h))+c[12]+1804603682&4294967295;e=f+(i<<7&4294967295|i>>>25);i=h+(g^e&(f^g))+c[13]+4254626195&4294967295;h=e+(i<<12&4294967295|i>>>20);i=g+(f^h&(e^f))+c[14]+2792965006&4294967295;g=h+(i<<17&4294967295|i>>>15);i=f+(e^g&(h^e))+c[15]+1236535329&4294967295;f=g+(i<<22&4294967295|i>>>10);i=e+(g^h&(f^g))+c[1]+4129170786&4294967295;e=f+(i<<5&4294967295|i>>>27);i=h+(f^g&(e^f))+c[6]+3225465664&4294967295;h=e+(i<<9&4294967295|i>>>23);i=g+(e^f&(h^e))+c[11]+643717713&4294967295;g=h+(i<<14&4294967295|i>>>18);i=f+(h^e&(g^h))+c[0]+3921069994&4294967295;f=g+(i<<20&4294967295|i>>>12);i=e+(g^h&(f^g))+c[5]+3593408605&4294967295;e=f+(i<<5&4294967295|i>>>27);i=h+(f^g&(e^f))+c[10]+38016083&4294967295;h=e+(i<<9&4294967295|i>>>23);i=g+(e^f&(h^e))+c[15]+3634488961&4294967295;g=h+(i<<14&4294967295|i>>>18);i=f+(h^e&(g^h))+c[4]+3889429448&4294967295;f=g+(i<<20&4294967295|i>>>12);i=e+(g^h&(f^g))+c[9]+568446438&4294967295;e=f+(i<<5&4294967295|i>>>27);i=h+(f^g&(e^f))+c[14]+3275163606&4294967295;h=e+(i<<9&4294967295|i>>>23);i=g+(e^f&(h^e))+c[3]+4107603335&4294967295;g=h+(i<<14&4294967295|i>>>18);i=f+(h^e&(g^h))+c[8]+1163531501&4294967295;f=g+(i<<20&4294967295|i>>>12);i=e+(g^h&(f^g))+c[13]+2850285829&4294967295;e=f+(i<<5&4294967295|i>>>27);i=h+(f^g&(e^f))+c[2]+4243563512&4294967295;h=e+(i<<9&4294967295|i>>>23);i=g+(e^f&(h^e))+c[7]+1735328473&4294967295;g=h+(i<<14&4294967295|i>>>18);i=f+(h^e&(g^h))+c[12]+2368359562&4294967295;f=g+(i<<20&4294967295|i>>>12);i=e+(f^g^h)+c[5]+4294588738&4294967295;e=f+(i<<4&4294967295|i>>>28);i=h+(e^f^g)+c[8]+2272392833&4294967295;h=e+(i<<11&4294967295|i>>>21);i=g+(h^e^f)+c[11]+1839030562&4294967295;g=h+(i<<16&4294967295|i>>>16);i=f+(g^h^e)+c[14]+4259657740&4294967295;f=g+(i<<23&4294967295|i>>>9);i=e+(f^g^h)+c[1]+2763975236&4294967295;e=f+(i<<4&4294967295|i>>>28);i=h+(e^f^g)+c[4]+1272893353&4294967295;h=e+(i<<11&4294967295|i>>>21);i=g+(h^e^f)+c[7]+4139469664&4294967295;g=h+(i<<16&4294967295|i>>>16);i=f+(g^h^e)+c[10]+3200236656&4294967295;f=g+(i<<23&4294967295|i>>>9);i=e+(f^g^h)+c[13]+681279174&4294967295;e=f+(i<<4&4294967295|i>>>28);i=h+(e^f^g)+c[0]+3936430074&4294967295;h=e+(i<<11&4294967295|i>>>21);i=g+(h^e^f)+c[3]+3572445317&4294967295;g=h+(i<<16&4294967295|i>>>16);i=f+(g^h^e)+c[6]+76029189&4294967295;f=g+(i<<23&4294967295|i>>>9);i=e+(f^g^h)+c[9]+3654602809&4294967295;e=f+(i<<4&4294967295|i>>>28);i=h+(e^f^g)+c[12]+3873151461&4294967295;h=e+(i<<11&4294967295|i>>>21);i=g+(h^e^f)+c[15]+530742520&4294967295;g=h+(i<<16&4294967295|i>>>16);i=f+(g^h^e)+c[2]+3299628645&4294967295;f=g+(i<<23&4294967295|i>>>9);i=e+(g^(f|~h))+c[0]+4096336452&4294967295;e=f+(i<<6&4294967295|i>>>26);i=h+(f^(e|~g))+c[7]+1126891415&4294967295;h=e+(i<<10&4294967295|i>>>22);i=g+(e^(h|~f))+c[14]+2878612391&4294967295;g=h+(i<<15&4294967295|i>>>17);i=f+(h^(g|~e))+c[5]+4237533241&4294967295;f=g+(i<<21&4294967295|i>>>11);i=e+(g^(f|~h))+c[12]+1700485571&4294967295;e=f+(i<<6&4294967295|i>>>26);i=h+(f^(e|~g))+c[3]+2399980690&4294967295;h=e+(i<<10&4294967295|i>>>22);i=g+(e^(h|~f))+c[10]+4293915773&4294967295;g=h+(i<<15&4294967295|i>>>17);i=f+(h^(g|~e))+c[1]+2240044497&4294967295;f=g+(i<<21&4294967295|i>>>11);i=e+(g^(f|~h))+c[8]+1873313359&4294967295;e=f+(i<<6&4294967295|i>>>26);i=h+(f^(e|~g))+c[15]+4264355552&4294967295;h=e+(i<<10&4294967295|i>>>22);i=g+(e^(h|~f))+c[6]+2734768916&4294967295;g=h+(i<<15&4294967295|i>>>17);i=f+(h^(g|~e))+c[13]+1309151649&4294967295;f=g+(i<<21&4294967295|i>>>11);i=e+(g^(f|~h))+c[4]+4149444226&4294967295;e=f+(i<<6&4294967295|i>>>26);i=h+(f^(e|~g))+c[11]+3174756917&4294967295;h=e+(i<<10&4294967295|i>>>22);i=g+(e^(h|~f))+c[2]+718787259&4294967295;g=h+(i<<15&4294967295|i>>>17);i=f+(h^(g|~e))+c[9]+3951481745&4294967295;f=g+(i<<21&4294967295|i>>>11);this.chain_[0]=this.chain_[0]+e&4294967295;this.chain_[1]=this.chain_[1]+f&4294967295;this.chain_[2]=this.chain_[2]+g&4294967295;this.chain_[3]=this.chain_[3]+h&4294967295};goog.crypt.Md5.prototype.update=function(a,b){if(!goog.isDef(b)){b=a.length}var c=b-this.blockSize;var d=this.block_;var e=this.blockLength_;var f=0;while(f<b){if(e==0){while(f<=c){this.compress_(a,f);f+=this.blockSize}}if(goog.isString(a)){while(f<b){d[e++]=a.charCodeAt(f++);if(e==this.blockSize){this.compress_(d);e=0;break}}}else{while(f<b){d[e++]=a[f++];if(e==this.blockSize){this.compress_(d);e=0;break}}}}this.blockLength_=e;this.totalLength_+=b};goog.crypt.Md5.prototype.digest=function(){var a=new Array((this.blockLength_<56?this.blockSize:this.blockSize*2)-this.blockLength_);a[0]=128;for(var b=1;b<a.length-8;++b){a[b]=0}var c=this.totalLength_*8;for(var b=a.length-8;b<a.length;++b){a[b]=c&255;c/=256}this.update(a);var d=new Array(16);var e=0;for(var b=0;b<4;++b){for(var f=0;f<32;f+=8){d[e++]=this.chain_[b]>>>f&255}}return d};goog.provide("ol.structs.IHasChecksum");ol.structs.IHasChecksum=function(){};ol.structs.IHasChecksum.prototype.getChecksum=function(){};goog.provide("ol.style.Stroke");goog.require("goog.crypt");goog.require("goog.crypt.Md5");goog.require("ol.color");goog.require("ol.structs.IHasChecksum");ol.style.Stroke=function(a){var b=goog.isDef(a)?a:{};this.color_=goog.isDef(b.color)?b.color:null;this.lineCap_=b.lineCap;this.lineDash_=goog.isDef(b.lineDash)?b.lineDash:null;this.lineJoin_=b.lineJoin;this.miterLimit_=b.miterLimit;this.width_=b.width;this.checksum_=undefined};ol.style.Stroke.prototype.getColor=function(){return this.color_};ol.style.Stroke.prototype.getLineCap=function(){return this.lineCap_};ol.style.Stroke.prototype.getLineDash=function(){return this.lineDash_};ol.style.Stroke.prototype.getLineJoin=function(){return this.lineJoin_};ol.style.Stroke.prototype.getMiterLimit=function(){return this.miterLimit_};ol.style.Stroke.prototype.getWidth=function(){return this.width_};ol.style.Stroke.prototype.setColor=function(a){this.color_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setLineCap=function(a){this.lineCap_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setLineDash=function(a){this.lineDash_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setLineJoin=function(a){this.lineJoin_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setMiterLimit=function(a){this.miterLimit_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setWidth=function(a){this.width_=a;this.checksum_=undefined};ol.style.Stroke.prototype.getChecksum=function(){if(!goog.isDef(this.checksum_)){var a="s"+(!goog.isNull(this.color_)?ol.color.asString(this.color_):"-")+","+(goog.isDef(this.lineCap_)?this.lineCap_.toString():"-")+","+(!goog.isNull(this.lineDash_)?this.lineDash_.toString():"-")+","+(goog.isDef(this.lineJoin_)?this.lineJoin_:"-")+","+(goog.isDef(this.miterLimit_)?this.miterLimit_.toString():"-")+","+(goog.isDef(this.width_)?this.width_.toString():"-");var b=new goog.crypt.Md5;b.update(a);this.checksum_=goog.crypt.byteArrayToString(b.digest())}return this.checksum_};goog.provide("ol.render.canvas");ol.render.canvas.FillState;ol.render.canvas.StrokeState;ol.render.canvas.TextState;ol.render.canvas.defaultFont="10px sans-serif";ol.render.canvas.defaultFillStyle=[0,0,0,1];ol.render.canvas.defaultLineCap="round";ol.render.canvas.defaultLineDash=[];ol.render.canvas.defaultLineJoin="round";ol.render.canvas.defaultMiterLimit=10;ol.render.canvas.defaultStrokeStyle=[0,0,0,1];ol.render.canvas.defaultTextAlign="center";ol.render.canvas.defaultTextBaseline="middle";ol.render.canvas.defaultLineWidth=1;goog.provide("ol.style.Fill");goog.require("ol.color");goog.require("ol.structs.IHasChecksum");ol.style.Fill=function(a){var b=goog.isDef(a)?a:{};this.color_=goog.isDef(b.color)?b.color:null;this.checksum_=undefined};ol.style.Fill.prototype.getColor=function(){return this.color_};ol.style.Fill.prototype.setColor=function(a){this.color_=a;this.checksum_=undefined};ol.style.Fill.prototype.getChecksum=function(){if(!goog.isDef(this.checksum_)){this.checksum_="f"+(!goog.isNull(this.color_)?ol.color.asString(this.color_):"-")}return this.checksum_};goog.provide("ol.style.Circle");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("ol.color");goog.require("ol.has");goog.require("ol.render.canvas");goog.require("ol.structs.IHasChecksum");goog.require("ol.style.Fill");goog.require("ol.style.Image");goog.require("ol.style.ImageState");goog.require("ol.style.Stroke");ol.style.Circle=function(a){var b=goog.isDef(a)?a:{};this.checksums_=null;this.canvas_=null;this.hitDetectionCanvas_=null;this.fill_=goog.isDef(b.fill)?b.fill:null;this.stroke_=goog.isDef(b.stroke)?b.stroke:null;this.radius_=b.radius;this.origin_=[0,0];this.anchor_=null;this.size_=null;this.imageSize_=null;this.hitDetectionImageSize_=null;this.render_(b.atlasManager);var c=goog.isDef(b.snapToPixel)?b.snapToPixel:true;goog.base(this,{opacity:1,rotateWithView:false,rotation:0,scale:1,snapToPixel:c})};goog.inherits(ol.style.Circle,ol.style.Image);ol.style.Circle.prototype.getAnchor=function(){return this.anchor_};ol.style.Circle.prototype.getFill=function(){return this.fill_};ol.style.Circle.prototype.getHitDetectionImage=function(a){return this.hitDetectionCanvas_};ol.style.Circle.prototype.getImage=function(a){return this.canvas_};ol.style.Circle.prototype.getImageState=function(){return ol.style.ImageState.LOADED};ol.style.Circle.prototype.getImageSize=function(){return this.imageSize_};ol.style.Circle.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_};ol.style.Circle.prototype.getOrigin=function(){return this.origin_};ol.style.Circle.prototype.getRadius=function(){return this.radius_};ol.style.Circle.prototype.getSize=function(){return this.size_};ol.style.Circle.prototype.getStroke=function(){return this.stroke_};ol.style.Circle.prototype.listenImageChange=goog.nullFunction;ol.style.Circle.prototype.load=goog.nullFunction;ol.style.Circle.prototype.unlistenImageChange=goog.nullFunction;ol.style.Circle.RenderOptions;ol.style.Circle.prototype.render_=function(a){var b;var c=null;var d;var e=0;if(!goog.isNull(this.stroke_)){d=ol.color.asString(this.stroke_.getColor());e=this.stroke_.getWidth();if(!goog.isDef(e)){e=ol.render.canvas.defaultLineWidth}c=this.stroke_.getLineDash();if(!ol.has.CANVAS_LINE_DASH){c=null}}var f=2*(this.radius_+e)+1;var g={strokeStyle:d,strokeWidth:e,size:f,lineDash:c};if(!goog.isDef(a)){this.canvas_=goog.dom.createElement(goog.dom.TagName.CANVAS);this.canvas_.height=f;this.canvas_.width=f;f=this.canvas_.width;b=f;var h=this.canvas_.getContext("2d");this.draw_(g,h,0,0);this.createHitDetectionCanvas_(g)}else{f=Math.round(f);var i=goog.isNull(this.fill_);var j;if(i){j=goog.bind(this.drawHitDetectionCanvas_,this,g)}var k=this.getChecksum();var l=a.add(k,f,f,goog.bind(this.draw_,this,g),j);goog.asserts.assert(l!==null,"circle radius is too large");this.canvas_=l.image;this.origin_=[l.offsetX,l.offsetY];b=l.image.width;if(i){this.hitDetectionCanvas_=l.hitImage;this.hitDetectionImageSize_=[l.hitImage.width,l.hitImage.height]}else{this.hitDetectionCanvas_=this.canvas_;this.hitDetectionImageSize_=[b,b]}}this.anchor_=[f/2,f/2];this.size_=[f,f];this.imageSize_=[b,b]};ol.style.Circle.prototype.draw_=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();b.arc(a.size/2,a.size/2,this.radius_,0,2*Math.PI,true);if(!goog.isNull(this.fill_)){b.fillStyle=ol.color.asString(this.fill_.getColor());b.fill()}if(!goog.isNull(this.stroke_)){b.strokeStyle=a.strokeStyle;b.lineWidth=a.strokeWidth;if(!goog.isNull(a.lineDash)){b.setLineDash(a.lineDash)}b.stroke()}b.closePath()};ol.style.Circle.prototype.createHitDetectionCanvas_=function(a){this.hitDetectionImageSize_=[a.size,a.size];if(!goog.isNull(this.fill_)){this.hitDetectionCanvas_=this.canvas_;return}this.hitDetectionCanvas_=goog.dom.createElement(goog.dom.TagName.CANVAS);var b=this.hitDetectionCanvas_;b.height=a.size;b.width=a.size;var c=b.getContext("2d");this.drawHitDetectionCanvas_(a,c,0,0)};ol.style.Circle.prototype.drawHitDetectionCanvas_=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();b.arc(a.size/2,a.size/2,this.radius_,0,2*Math.PI,true);b.fillStyle=ol.render.canvas.defaultFillStyle;b.fill();if(!goog.isNull(this.stroke_)){b.strokeStyle=a.strokeStyle;b.lineWidth=a.strokeWidth;if(!goog.isNull(a.lineDash)){b.setLineDash(a.lineDash)}b.stroke()}b.closePath()};ol.style.Circle.prototype.getChecksum=function(){var a=!goog.isNull(this.stroke_)?this.stroke_.getChecksum():"-";var b=!goog.isNull(this.fill_)?this.fill_.getChecksum():"-";var c=goog.isNull(this.checksums_)||(a!=this.checksums_[1]||b!=this.checksums_[2]||this.radius_!=this.checksums_[3]);if(c){var d="c"+a+b+(goog.isDef(this.radius_)?this.radius_.toString():"-");this.checksums_=[d,a,b,this.radius_]}return this.checksums_[0]};goog.provide("ol.style.GeometryFunction");goog.provide("ol.style.Style");goog.provide("ol.style.StyleFunction");goog.provide("ol.style.defaultGeometryFunction");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryType");goog.require("ol.style.Circle");goog.require("ol.style.Fill");goog.require("ol.style.Image");goog.require("ol.style.Stroke");ol.style.Style=function(a){var b=goog.isDef(a)?a:{};this.geometry_=null;this.geometryFunction_=ol.style.defaultGeometryFunction;if(goog.isDef(b.geometry)){this.setGeometry(b.geometry)}this.fill_=goog.isDef(b.fill)?b.fill:null;this.image_=goog.isDef(b.image)?b.image:null;this.stroke_=goog.isDef(b.stroke)?b.stroke:null;this.text_=goog.isDef(b.text)?b.text:null;this.zIndex_=b.zIndex};ol.style.Style.prototype.getGeometry=function(){
return this.geometry_};ol.style.Style.prototype.getGeometryFunction=function(){return this.geometryFunction_};ol.style.Style.prototype.getFill=function(){return this.fill_};ol.style.Style.prototype.getImage=function(){return this.image_};ol.style.Style.prototype.getStroke=function(){return this.stroke_};ol.style.Style.prototype.getText=function(){return this.text_};ol.style.Style.prototype.getZIndex=function(){return this.zIndex_};ol.style.Style.prototype.setGeometry=function(a){if(goog.isFunction(a)){this.geometryFunction_=a}else if(goog.isString(a)){this.geometryFunction_=function(b){var c=b.get(a);if(goog.isDefAndNotNull(c)){goog.asserts.assertInstanceof(c,ol.geom.Geometry,"feature geometry must be an ol.geom.Geometry instance")}return c}}else if(goog.isNull(a)){this.geometryFunction_=ol.style.defaultGeometryFunction}else if(goog.isDef(a)){goog.asserts.assertInstanceof(a,ol.geom.Geometry,"geometry must be an ol.geom.Geometry instance");this.geometryFunction_=function(){return a}}this.geometry_=a};ol.style.Style.prototype.setZIndex=function(a){this.zIndex_=a};ol.style.StyleFunction;ol.style.createStyleFunction=function(a){var b;if(goog.isFunction(a)){b=a}else{var c;if(goog.isArray(a)){c=a}else{goog.asserts.assertInstanceof(a,ol.style.Style,"obj geometry must be an ol.style.Style instance");c=[a]}b=goog.functions.constant(c)}return b};ol.style.defaultStyle_=null;ol.style.defaultStyleFunction=function(a,b){if(goog.isNull(ol.style.defaultStyle_)){var c=new ol.style.Fill({color:"rgba(255,255,255,0.4)"});var d=new ol.style.Stroke({color:"#3399CC",width:1.25});ol.style.defaultStyle_=[new ol.style.Style({image:new ol.style.Circle({fill:c,stroke:d,radius:5}),fill:c,stroke:d})]}return ol.style.defaultStyle_};ol.style.createDefaultEditingStyles=function(){var a={};var b=[255,255,255,1];var c=[0,153,255,1];var d=3;a[ol.geom.GeometryType.POLYGON]=[new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,.5]})})];a[ol.geom.GeometryType.MULTI_POLYGON]=a[ol.geom.GeometryType.POLYGON];a[ol.geom.GeometryType.LINE_STRING]=[new ol.style.Style({stroke:new ol.style.Stroke({color:b,width:d+2})}),new ol.style.Style({stroke:new ol.style.Stroke({color:c,width:d})})];a[ol.geom.GeometryType.MULTI_LINE_STRING]=a[ol.geom.GeometryType.LINE_STRING];a[ol.geom.GeometryType.CIRCLE]=a[ol.geom.GeometryType.POLYGON].concat(a[ol.geom.GeometryType.LINE_STRING]);a[ol.geom.GeometryType.POINT]=[new ol.style.Style({image:new ol.style.Circle({radius:d*2,fill:new ol.style.Fill({color:c}),stroke:new ol.style.Stroke({color:b,width:d/2})}),zIndex:Infinity})];a[ol.geom.GeometryType.MULTI_POINT]=a[ol.geom.GeometryType.POINT];a[ol.geom.GeometryType.GEOMETRY_COLLECTION]=a[ol.geom.GeometryType.POLYGON].concat(a[ol.geom.GeometryType.LINE_STRING],a[ol.geom.GeometryType.POINT]);return a};ol.style.GeometryFunction;ol.style.defaultGeometryFunction=function(a){goog.asserts.assert(!goog.isNull(a),"feature must not be null");return a.getGeometry()};goog.provide("ol.interaction.DragZoom");goog.require("goog.asserts");goog.require("ol.animation");goog.require("ol.easing");goog.require("ol.events.condition");goog.require("ol.extent");goog.require("ol.interaction.DragBox");goog.require("ol.style.Stroke");goog.require("ol.style.Style");ol.interaction.DragZoom=function(a){var b=goog.isDef(a)?a:{};var c=goog.isDef(b.condition)?b.condition:ol.events.condition.shiftKeyOnly;this.duration_=goog.isDef(b.duration)?b.duration:200;var d=goog.isDef(b.style)?b.style:new ol.style.Style({stroke:new ol.style.Stroke({color:[0,0,255,1]})});goog.base(this,{condition:c,style:d})};goog.inherits(ol.interaction.DragZoom,ol.interaction.DragBox);ol.interaction.DragZoom.prototype.onBoxEnd=function(){var a=this.getMap();var b=a.getView();goog.asserts.assert(!goog.isNull(b),"view should not be null");var c=a.getSize();goog.asserts.assert(goog.isDef(c),"size should be defined");var d=this.getGeometry().getExtent();var e=b.constrainResolution(b.getResolutionForExtent(d,c));var f=b.getResolution();goog.asserts.assert(goog.isDef(f),"res should be defined");var g=b.getCenter();goog.asserts.assert(goog.isDef(g),"center should be defined");a.beforeRender(ol.animation.zoom({resolution:f,duration:this.duration_,easing:ol.easing.easeOut}));a.beforeRender(ol.animation.pan({source:g,duration:this.duration_,easing:ol.easing.easeOut}));b.setCenter(ol.extent.getCenter(d));b.setResolution(e)};goog.provide("ol.interaction.KeyboardPan");goog.require("goog.asserts");goog.require("goog.events.KeyCodes");goog.require("goog.events.KeyHandler.EventType");goog.require("goog.functions");goog.require("ol.coordinate");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");ol.interaction.KeyboardPan=function(a){goog.base(this,{handleEvent:ol.interaction.KeyboardPan.handleEvent});var b=goog.isDef(a)?a:{};this.condition_=goog.isDef(b.condition)?b.condition:goog.functions.and(ol.events.condition.noModifierKeys,ol.events.condition.targetNotEditable);this.duration_=goog.isDef(b.duration)?b.duration:100;this.pixelDelta_=goog.isDef(b.pixelDelta)?b.pixelDelta:128};goog.inherits(ol.interaction.KeyboardPan,ol.interaction.Interaction);ol.interaction.KeyboardPan.handleEvent=function(a){var b=false;if(a.type==goog.events.KeyHandler.EventType.KEY){var c=a.browserEvent;var d=c.keyCode;if(this.condition_(a)&&(d==goog.events.KeyCodes.DOWN||d==goog.events.KeyCodes.LEFT||d==goog.events.KeyCodes.RIGHT||d==goog.events.KeyCodes.UP)){var e=a.map;var f=e.getView();goog.asserts.assert(!goog.isNull(f),"view should not be null");var g=f.getResolution()*this.pixelDelta_;var h=0,i=0;if(d==goog.events.KeyCodes.DOWN){i=-g}else if(d==goog.events.KeyCodes.LEFT){h=-g}else if(d==goog.events.KeyCodes.RIGHT){h=g}else{i=g}var j=[h,i];ol.coordinate.rotate(j,f.getRotation());ol.interaction.Interaction.pan(e,f,j,this.duration_);a.preventDefault();b=true}}return!b};goog.provide("ol.interaction.KeyboardZoom");goog.require("goog.asserts");goog.require("goog.events.KeyHandler.EventType");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");ol.interaction.KeyboardZoom=function(a){goog.base(this,{handleEvent:ol.interaction.KeyboardZoom.handleEvent});var b=goog.isDef(a)?a:{};this.condition_=goog.isDef(b.condition)?b.condition:ol.events.condition.targetNotEditable;this.delta_=goog.isDef(b.delta)?b.delta:1;this.duration_=goog.isDef(b.duration)?b.duration:100};goog.inherits(ol.interaction.KeyboardZoom,ol.interaction.Interaction);ol.interaction.KeyboardZoom.handleEvent=function(a){var b=false;if(a.type==goog.events.KeyHandler.EventType.KEY){var c=a.browserEvent;var d=c.charCode;if(this.condition_(a)&&(d=="+".charCodeAt(0)||d=="-".charCodeAt(0))){var e=a.map;var f=d=="+".charCodeAt(0)?this.delta_:-this.delta_;e.render();var g=e.getView();goog.asserts.assert(!goog.isNull(g),"view should not be null");ol.interaction.Interaction.zoomByDelta(e,g,f,undefined,this.duration_);a.preventDefault();b=true}}return!b};goog.provide("ol.interaction.MouseWheelZoom");goog.require("goog.asserts");goog.require("goog.events.MouseWheelEvent");goog.require("goog.events.MouseWheelHandler.EventType");goog.require("goog.math");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.interaction.Interaction");ol.interaction.MouseWheelZoom=function(a){goog.base(this,{handleEvent:ol.interaction.MouseWheelZoom.handleEvent});var b=goog.isDef(a)?a:{};this.delta_=0;this.duration_=goog.isDef(b.duration)?b.duration:250;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined};goog.inherits(ol.interaction.MouseWheelZoom,ol.interaction.Interaction);ol.interaction.MouseWheelZoom.handleEvent=function(a){var b=false;if(a.type==goog.events.MouseWheelHandler.EventType.MOUSEWHEEL){var c=a.map;var d=a.browserEvent;goog.asserts.assertInstanceof(d,goog.events.MouseWheelEvent,"mouseWheelEvent should be of type MouseWheelEvent");this.lastAnchor_=a.coordinate;this.delta_+=d.deltaY;if(!goog.isDef(this.startTime_)){this.startTime_=goog.now()}var e=ol.MOUSEWHEELZOOM_TIMEOUT_DURATION;var f=Math.max(e-(goog.now()-this.startTime_),0);goog.global.clearTimeout(this.timeoutId_);this.timeoutId_=goog.global.setTimeout(goog.bind(this.doZoom_,this,c),f);a.preventDefault();b=true}return!b};ol.interaction.MouseWheelZoom.prototype.doZoom_=function(a){var b=ol.MOUSEWHEELZOOM_MAXDELTA;var c=goog.math.clamp(this.delta_,-b,b);var d=a.getView();goog.asserts.assert(!goog.isNull(d),"view should not be null");a.render();ol.interaction.Interaction.zoomByDelta(a,d,-c,this.lastAnchor_,this.duration_);this.delta_=0;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined};goog.provide("ol.interaction.PinchRotate");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.style");goog.require("ol.Coordinate");goog.require("ol.ViewHint");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.PinchRotate=function(a){goog.base(this,{handleDownEvent:ol.interaction.PinchRotate.handleDownEvent_,handleDragEvent:ol.interaction.PinchRotate.handleDragEvent_,handleUpEvent:ol.interaction.PinchRotate.handleUpEvent_});var b=goog.isDef(a)?a:{};this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;this.threshold_=goog.isDef(b.threshold)?b.threshold:.3;this.duration_=goog.isDef(b.duration)?b.duration:250};goog.inherits(ol.interaction.PinchRotate,ol.interaction.Pointer);ol.interaction.PinchRotate.handleDragEvent_=function(a){goog.asserts.assert(this.targetPointers.length>=2,"length of this.targetPointers should be greater than or equal to 2");var b=0;var c=this.targetPointers[0];var d=this.targetPointers[1];var e=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);if(goog.isDef(this.lastAngle_)){var f=e-this.lastAngle_;this.rotationDelta_+=f;if(!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_){this.rotating_=true}b=f}this.lastAngle_=e;var g=a.map;var h=goog.style.getClientPosition(g.getViewport());var i=ol.interaction.Pointer.centroid(this.targetPointers);i[0]-=h.x;i[1]-=h.y;this.anchor_=g.getCoordinateFromPixel(i);if(this.rotating_){var j=g.getView();var k=j.getRotation();g.render();ol.interaction.Interaction.rotateWithoutConstraints(g,j,k+b,this.anchor_)}};ol.interaction.PinchRotate.handleUpEvent_=function(a){if(this.targetPointers.length<2){var b=a.map;var c=b.getView();c.setHint(ol.ViewHint.INTERACTING,-1);if(this.rotating_){var d=c.getRotation();ol.interaction.Interaction.rotate(b,c,d,this.anchor_,this.duration_)}return false}else{return true}};ol.interaction.PinchRotate.handleDownEvent_=function(a){if(this.targetPointers.length>=2){var b=a.map;this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;if(!this.handlingDownUpSequence){b.getView().setHint(ol.ViewHint.INTERACTING,1)}b.render();return true}else{return false}};ol.interaction.PinchRotate.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.interaction.PinchZoom");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.style");goog.require("ol.Coordinate");goog.require("ol.ViewHint");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.PinchZoom=function(a){goog.base(this,{handleDownEvent:ol.interaction.PinchZoom.handleDownEvent_,handleDragEvent:ol.interaction.PinchZoom.handleDragEvent_,handleUpEvent:ol.interaction.PinchZoom.handleUpEvent_});var b=goog.isDef(a)?a:{};this.anchor_=null;this.duration_=goog.isDef(b.duration)?b.duration:400;this.lastDistance_=undefined;this.lastScaleDelta_=1};goog.inherits(ol.interaction.PinchZoom,ol.interaction.Pointer);ol.interaction.PinchZoom.handleDragEvent_=function(a){goog.asserts.assert(this.targetPointers.length>=2,"length of this.targetPointers should be 2 or more");var b=1;var c=this.targetPointers[0];var d=this.targetPointers[1];var e=c.clientX-d.clientX;var f=c.clientY-d.clientY;var g=Math.sqrt(e*e+f*f);if(goog.isDef(this.lastDistance_)){b=this.lastDistance_/g}this.lastDistance_=g;if(b!=1){this.lastScaleDelta_=b}var h=a.map;var i=h.getView();var j=i.getResolution();var k=goog.style.getClientPosition(h.getViewport());var l=ol.interaction.Pointer.centroid(this.targetPointers);l[0]-=k.x;l[1]-=k.y;this.anchor_=h.getCoordinateFromPixel(l);h.render();ol.interaction.Interaction.zoomWithoutConstraints(h,i,j*b,this.anchor_)};ol.interaction.PinchZoom.handleUpEvent_=function(a){if(this.targetPointers.length<2){var b=a.map;var c=b.getView();c.setHint(ol.ViewHint.INTERACTING,-1);var d=c.getResolution();var e=this.lastScaleDelta_-1;ol.interaction.Interaction.zoom(b,c,d,this.anchor_,this.duration_,e);return false}else{return true}};ol.interaction.PinchZoom.handleDownEvent_=function(a){if(this.targetPointers.length>=2){var b=a.map;this.anchor_=null;this.lastDistance_=undefined;this.lastScaleDelta_=1;if(!this.handlingDownUpSequence){b.getView().setHint(ol.ViewHint.INTERACTING,1)}b.render();return true}else{return false}};ol.interaction.PinchZoom.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.interaction");goog.require("ol.Collection");goog.require("ol.Kinetic");goog.require("ol.interaction.DoubleClickZoom");goog.require("ol.interaction.DragPan");goog.require("ol.interaction.DragRotate");goog.require("ol.interaction.DragZoom");goog.require("ol.interaction.KeyboardPan");goog.require("ol.interaction.KeyboardZoom");goog.require("ol.interaction.MouseWheelZoom");goog.require("ol.interaction.PinchRotate");goog.require("ol.interaction.PinchZoom");ol.interaction.defaults=function(a){var b=goog.isDef(a)?a:{};var c=new ol.Collection;var d=new ol.Kinetic(-.005,.05,100);var e=goog.isDef(b.altShiftDragRotate)?b.altShiftDragRotate:true;if(e){c.push(new ol.interaction.DragRotate)}var f=goog.isDef(b.doubleClickZoom)?b.doubleClickZoom:true;if(f){c.push(new ol.interaction.DoubleClickZoom({delta:b.zoomDelta,duration:b.zoomDuration}))}var g=goog.isDef(b.dragPan)?b.dragPan:true;if(g){c.push(new ol.interaction.DragPan({kinetic:d}))}var h=goog.isDef(b.pinchRotate)?b.pinchRotate:true;if(h){c.push(new ol.interaction.PinchRotate)}var i=goog.isDef(b.pinchZoom)?b.pinchZoom:true;if(i){c.push(new ol.interaction.PinchZoom({duration:b.zoomDuration}))}var j=goog.isDef(b.keyboard)?b.keyboard:true;if(j){c.push(new ol.interaction.KeyboardPan);c.push(new ol.interaction.KeyboardZoom({delta:b.zoomDelta,duration:b.zoomDuration}))}var k=goog.isDef(b.mouseWheelZoom)?b.mouseWheelZoom:true;if(k){c.push(new ol.interaction.MouseWheelZoom({duration:b.zoomDuration}))}var l=goog.isDef(b.shiftDragZoom)?b.shiftDragZoom:true;if(l){c.push(new ol.interaction.DragZoom)}return c};goog.provide("ol.layer.Group");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.math");goog.require("goog.object");goog.require("ol.Collection");goog.require("ol.CollectionEvent");goog.require("ol.CollectionEventType");goog.require("ol.Object");goog.require("ol.ObjectEventType");goog.require("ol.extent");goog.require("ol.layer.Base");goog.require("ol.source.State");ol.layer.GroupProperty={LAYERS:"layers"};ol.layer.Group=function(a){var b=goog.isDef(a)?a:{};var c=goog.object.clone(b);delete c.layers;var d=b.layers;goog.base(this,c);this.layersListenerKeys_=[];this.listenerKeys_={};goog.events.listen(this,ol.Object.getChangeEventType(ol.layer.GroupProperty.LAYERS),this.handleLayersChanged_,false,this);if(goog.isDefAndNotNull(d)){if(goog.isArray(d)){d=new ol.Collection(d.slice())}else{goog.asserts.assertInstanceof(d,ol.Collection,"layers should be an ol.Collection");d=d}}else{d=new ol.Collection}this.setLayers(d)};goog.inherits(ol.layer.Group,ol.layer.Base);ol.layer.Group.prototype.handleLayerChange_=function(){if(this.getVisible()){this.changed()}};ol.layer.Group.prototype.handleLayersChanged_=function(a){goog.array.forEach(this.layersListenerKeys_,goog.events.unlistenByKey);this.layersListenerKeys_.length=0;var b=this.getLayers();this.layersListenerKeys_.push(goog.events.listen(b,ol.CollectionEventType.ADD,this.handleLayersAdd_,false,this),goog.events.listen(b,ol.CollectionEventType.REMOVE,this.handleLayersRemove_,false,this));goog.object.forEach(this.listenerKeys_,function(a){goog.array.forEach(a,goog.events.unlistenByKey)});goog.object.clear(this.listenerKeys_);var c=b.getArray();var d,e,f;for(d=0,e=c.length;d<e;d++){f=c[d];this.listenerKeys_[goog.getUid(f).toString()]=[goog.events.listen(f,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,false,this),goog.events.listen(f,goog.events.EventType.CHANGE,this.handleLayerChange_,false,this)]}this.changed()};ol.layer.Group.prototype.handleLayersAdd_=function(a){var b=a.element;var c=goog.getUid(b).toString();goog.asserts.assert(!(c in this.listenerKeys_),"listeners already registered");this.listenerKeys_[c]=[goog.events.listen(b,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,false,this),goog.events.listen(b,goog.events.EventType.CHANGE,this.handleLayerChange_,false,this)];this.changed()};ol.layer.Group.prototype.handleLayersRemove_=function(a){var b=a.element;var c=goog.getUid(b).toString();goog.asserts.assert(c in this.listenerKeys_,"no listeners to unregister");goog.array.forEach(this.listenerKeys_[c],goog.events.unlistenByKey);delete this.listenerKeys_[c];this.changed()};ol.layer.Group.prototype.getLayers=function(){return this.get(ol.layer.GroupProperty.LAYERS)};ol.layer.Group.prototype.setLayers=function(a){this.set(ol.layer.GroupProperty.LAYERS,a)};ol.layer.Group.prototype.getLayersArray=function(a){var b=goog.isDef(a)?a:[];this.getLayers().forEach(function(a){a.getLayersArray(b)});return b};ol.layer.Group.prototype.getLayerStatesArray=function(a){var b=goog.isDef(a)?a:[];var c=b.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(b)});var d=this.getLayerState();var e,f,g;for(e=c,f=b.length;e<f;e++){g=b[e];g.brightness=goog.math.clamp(g.brightness+d.brightness,-1,1);g.contrast*=d.contrast;g.hue+=d.hue;g.opacity*=d.opacity;g.saturation*=d.saturation;g.visible=g.visible&&d.visible;g.maxResolution=Math.min(g.maxResolution,d.maxResolution);g.minResolution=Math.max(g.minResolution,d.minResolution);if(goog.isDef(d.extent)){if(goog.isDef(g.extent)){g.extent=ol.extent.getIntersection(g.extent,d.extent)}else{g.extent=d.extent}}}return b};ol.layer.Group.prototype.getSourceState=function(){return ol.source.State.READY};goog.provide("ol.proj.EPSG3857");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.math");goog.require("ol.proj");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");ol.proj.EPSG3857_=function(a){goog.base(this,{code:a,units:ol.proj.Units.METERS,extent:ol.proj.EPSG3857.EXTENT,global:true,worldExtent:ol.proj.EPSG3857.WORLD_EXTENT})};goog.inherits(ol.proj.EPSG3857_,ol.proj.Projection);ol.proj.EPSG3857_.prototype.getPointResolution=function(a,b){return a/ol.math.cosh(b[1]/ol.proj.EPSG3857.RADIUS)};ol.proj.EPSG3857.RADIUS=6378137;ol.proj.EPSG3857.HALF_SIZE=Math.PI*ol.proj.EPSG3857.RADIUS;ol.proj.EPSG3857.EXTENT=[-ol.proj.EPSG3857.HALF_SIZE,-ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE];ol.proj.EPSG3857.WORLD_EXTENT=[-180,-85,180,85];ol.proj.EPSG3857.CODES=["EPSG:3857","EPSG:102100","EPSG:102113","EPSG:900913","urn:ogc:def:crs:EPSG:6.18:3:3857","urn:ogc:def:crs:EPSG::3857","http://www.opengis.net/gml/srs/epsg.xml#3857"];ol.proj.EPSG3857.PROJECTIONS=goog.array.map(ol.proj.EPSG3857.CODES,function(a){return new ol.proj.EPSG3857_(a)});ol.proj.EPSG3857.fromEPSG4326=function(a,b,c){var d=a.length,e=c>1?c:2,f=b;if(!goog.isDef(f)){if(e>2){f=a.slice()}else{f=new Array(d)}}goog.asserts.assert(f.length%e===0,"modulus of output.length with dimension should be 0");for(var g=0;g<d;g+=e){f[g]=ol.proj.EPSG3857.RADIUS*Math.PI*a[g]/180;f[g+1]=ol.proj.EPSG3857.RADIUS*Math.log(Math.tan(Math.PI*(a[g+1]+90)/360))}return f};ol.proj.EPSG3857.toEPSG4326=function(a,b,c){var d=a.length,e=c>1?c:2,f=b;if(!goog.isDef(f)){if(e>2){f=a.slice()}else{f=new Array(d)}}goog.asserts.assert(f.length%e===0,"modulus of output.length with dimension should be 0");for(var g=0;g<d;g+=e){f[g]=180*a[g]/(ol.proj.EPSG3857.RADIUS*Math.PI);f[g+1]=360*Math.atan(Math.exp(a[g+1]/ol.proj.EPSG3857.RADIUS))/Math.PI-90}return f};goog.provide("ol.proj.EPSG4326");goog.require("ol.proj");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");ol.proj.EPSG4326_=function(a,b){goog.base(this,{code:a,units:ol.proj.Units.DEGREES,extent:ol.proj.EPSG4326.EXTENT,axisOrientation:b,global:true,worldExtent:ol.proj.EPSG4326.EXTENT})};goog.inherits(ol.proj.EPSG4326_,ol.proj.Projection);ol.proj.EPSG4326_.prototype.getPointResolution=function(a,b){return a};ol.proj.EPSG4326.EXTENT=[-180,-90,180,90];ol.proj.EPSG4326.PROJECTIONS=[new ol.proj.EPSG4326_("CRS:84"),new ol.proj.EPSG4326_("EPSG:4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:EPSG::4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:OGC:1.3:CRS84"),new ol.proj.EPSG4326_("urn:ogc:def:crs:OGC:2:84"),new ol.proj.EPSG4326_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ol.proj.EPSG4326_("urn:x-ogc:def:crs:EPSG:4326","neu")];goog.provide("ol.proj.common");goog.require("ol.proj");goog.require("ol.proj.EPSG3857");goog.require("ol.proj.EPSG4326");ol.proj.common.add=function(){ol.proj.addEquivalentProjections(ol.proj.EPSG3857.PROJECTIONS);ol.proj.addEquivalentProjections(ol.proj.EPSG4326.PROJECTIONS);ol.proj.addEquivalentTransforms(ol.proj.EPSG4326.PROJECTIONS,ol.proj.EPSG3857.PROJECTIONS,ol.proj.EPSG3857.fromEPSG4326,ol.proj.EPSG3857.toEPSG4326)};goog.provide("ol.layer.Image");goog.require("ol.layer.Layer");ol.layer.Image=function(a){var b=goog.isDef(a)?a:{};goog.base(this,b)};goog.inherits(ol.layer.Image,ol.layer.Layer);ol.layer.Image.prototype.getSource;goog.provide("ol.layer.Tile");goog.require("goog.object");goog.require("ol.layer.Layer");ol.layer.TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};ol.layer.Tile=function(a){var b=goog.isDef(a)?a:{};var c=goog.object.clone(b);delete c.preload;delete c.useInterimTilesOnError;goog.base(this,c);this.setPreload(goog.isDef(b.preload)?b.preload:0);this.setUseInterimTilesOnError(goog.isDef(b.useInterimTilesOnError)?b.useInterimTilesOnError:true)};goog.inherits(ol.layer.Tile,ol.layer.Layer);ol.layer.Tile.prototype.getPreload=function(){return this.get(ol.layer.TileProperty.PRELOAD)};ol.layer.Tile.prototype.getSource;ol.layer.Tile.prototype.setPreload=function(a){this.set(ol.layer.TileProperty.PRELOAD,a)};ol.layer.Tile.prototype.getUseInterimTilesOnError=function(){return this.get(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR)};ol.layer.Tile.prototype.setUseInterimTilesOnError=function(a){this.set(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR,a)};goog.provide("ol.layer.Vector");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.layer.Layer");goog.require("ol.style.Style");ol.layer.VectorProperty={RENDER_ORDER:"renderOrder"};ol.layer.Vector=function(a){var b=goog.isDef(a)?a:{};goog.asserts.assert(!goog.isDef(b.renderOrder)||goog.isNull(b.renderOrder)||goog.isFunction(b.renderOrder),"renderOrder must be a comparator function");var c=goog.object.clone(b);delete c.style;delete c.renderBuffer;delete c.updateWhileAnimating;delete c.updateWhileInteracting;goog.base(this,c);this.renderBuffer_=goog.isDef(b.renderBuffer)?b.renderBuffer:100;this.style_=null;this.styleFunction_=undefined;this.setStyle(b.style);this.updateWhileAnimating_=goog.isDef(b.updateWhileAnimating)?b.updateWhileAnimating:false;this.updateWhileInteracting_=goog.isDef(b.updateWhileInteracting)?b.updateWhileInteracting:false};goog.inherits(ol.layer.Vector,ol.layer.Layer);ol.layer.Vector.prototype.getRenderBuffer=function(){return this.renderBuffer_};ol.layer.Vector.prototype.getRenderOrder=function(){return this.get(ol.layer.VectorProperty.RENDER_ORDER)};ol.layer.Vector.prototype.getSource;ol.layer.Vector.prototype.getStyle=function(){return this.style_};ol.layer.Vector.prototype.getStyleFunction=function(){return this.styleFunction_};ol.layer.Vector.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_};ol.layer.Vector.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_};ol.layer.Vector.prototype.setRenderOrder=function(a){goog.asserts.assert(!goog.isDef(a)||goog.isNull(a)||goog.isFunction(a),"renderOrder must be a comparator function");this.set(ol.layer.VectorProperty.RENDER_ORDER,a)};ol.layer.Vector.prototype.setStyle=function(a){this.style_=goog.isDef(a)?a:ol.style.defaultStyleFunction;this.styleFunction_=goog.isNull(a)?undefined:ol.style.createStyleFunction(this.style_);this.changed()};goog.provide("ol.render.canvas.Immediate");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.color");goog.require("ol.extent");goog.require("ol.geom.flat.transform");goog.require("ol.has");goog.require("ol.render.VectorContext");goog.require("ol.render.canvas");goog.require("ol.vec.Mat4");ol.render.canvas.Immediate=function(a,b,c,d,e){this.callbacksByZIndex_={};this.context_=a;this.pixelRatio_=b;this.extent_=c;this.transform_=d;this.viewRotation_=e;this.contextFillState_=null;this.contextStrokeState_=null;this.contextTextState_=null;this.fillState_=null;this.strokeState_=null;this.image_=null;this.imageAnchorX_=0;this.imageAnchorY_=0;this.imageHeight_=0;this.imageOpacity_=0;this.imageOriginX_=0;this.imageOriginY_=0;this.imageRotateWithView_=false;this.imageRotation_=0;this.imageScale_=0;this.imageSnapToPixel_=false;this.imageWidth_=0;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotation_=0;this.textScale_=0;this.textFillState_=null;this.textStrokeState_=null;this.textState_=null;this.pixelCoordinates_=[];this.tmpLocalTransform_=goog.vec.Mat4.createNumber()};ol.render.canvas.Immediate.prototype.drawImages_=function(a,b,c,d){if(goog.isNull(this.image_)){return}goog.asserts.assert(b===0,"offset should be 0");goog.asserts.assert(c==a.length,"end should be equal to the length of flatCoordinates");var e=ol.geom.flat.transform.transform2D(a,b,c,2,this.transform_,this.pixelCoordinates_);var f=this.context_;var g=this.tmpLocalTransform_;var h=f.globalAlpha;if(this.imageOpacity_!=1){f.globalAlpha=h*this.imageOpacity_}var i=this.imageRotation_;if(this.imageRotateWithView_){i+=this.viewRotation_}var j,k;for(j=0,k=e.length;j<k;j+=2){var l=e[j]-this.imageAnchorX_;var m=e[j+1]-this.imageAnchorY_;if(this.imageSnapToPixel_){l=l+.5|0;m=m+.5|0}if(i!==0||this.imageScale_!=1){var n=l+this.imageAnchorX_;var o=m+this.imageAnchorY_;ol.vec.Mat4.makeTransform2D(g,n,o,this.imageScale_,this.imageScale_,i,-n,-o);f.setTransform(goog.vec.Mat4.getElement(g,0,0),goog.vec.Mat4.getElement(g,1,0),goog.vec.Mat4.getElement(g,0,1),goog.vec.Mat4.getElement(g,1,1),goog.vec.Mat4.getElement(g,0,3),goog.vec.Mat4.getElement(g,1,3))}f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,l,m,this.imageWidth_,this.imageHeight_)}if(i!==0||this.imageScale_!=1){f.setTransform(1,0,0,1,0,0)}if(this.imageOpacity_!=1){f.globalAlpha=h}};ol.render.canvas.Immediate.prototype.drawText_=function(a,b,c,d){if(goog.isNull(this.textState_)||this.text_===""){return}if(!goog.isNull(this.textFillState_)){this.setContextFillState_(this.textFillState_)}if(!goog.isNull(this.textStrokeState_)){this.setContextStrokeState_(this.textStrokeState_)}this.setContextTextState_(this.textState_);goog.asserts.assert(b===0,"offset should be 0");goog.asserts.assert(c==a.length,"end should be equal to the length of flatCoordinates");var e=ol.geom.flat.transform.transform2D(a,b,c,d,this.transform_,this.pixelCoordinates_);var f=this.context_;for(;b<c;b+=d){var g=e[b]+this.textOffsetX_;var h=e[b+1]+this.textOffsetY_;if(this.textRotation_!==0||this.textScale_!=1){var i=ol.vec.Mat4.makeTransform2D(this.tmpLocalTransform_,g,h,this.textScale_,this.textScale_,this.textRotation_,-g,-h);f.setTransform(goog.vec.Mat4.getElement(i,0,0),goog.vec.Mat4.getElement(i,1,0),goog.vec.Mat4.getElement(i,0,1),goog.vec.Mat4.getElement(i,1,1),goog.vec.Mat4.getElement(i,0,3),goog.vec.Mat4.getElement(i,1,3))}if(!goog.isNull(this.textStrokeState_)){f.strokeText(this.text_,g,h)}if(!goog.isNull(this.textFillState_)){f.fillText(this.text_,g,h)}}if(this.textRotation_!==0||this.textScale_!=1){f.setTransform(1,0,0,1,0,0)}};ol.render.canvas.Immediate.prototype.moveToLineTo_=function(a,b,c,d,e){var f=this.context_;var g=ol.geom.flat.transform.transform2D(a,b,c,d,this.transform_,this.pixelCoordinates_);f.moveTo(g[0],g[1]);var h;for(h=2;h<g.length;h+=2){f.lineTo(g[h],g[h+1])}if(e){f.lineTo(g[0],g[1])}return c};ol.render.canvas.Immediate.prototype.drawRings_=function(a,b,c,d){var e=this.context_;var f,g;for(f=0,g=c.length;f<g;++f){b=this.moveToLineTo_(a,b,c[f],d,true);e.closePath()}return b};ol.render.canvas.Immediate.prototype.drawAsync=function(a,b){var c=a.toString();var d=this.callbacksByZIndex_[c];if(goog.isDef(d)){d.push(b)}else{this.callbacksByZIndex_[c]=[b]}};ol.render.canvas.Immediate.prototype.drawCircleGeometry=function(a,b){if(!ol.extent.intersects(this.extent_,a.getExtent())){return}if(!goog.isNull(this.fillState_)||!goog.isNull(this.strokeState_)){if(!goog.isNull(this.fillState_)){this.setContextFillState_(this.fillState_)}if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_)}var c=ol.geom.transformSimpleGeometry2D(a,this.transform_,this.pixelCoordinates_);var d=c[2]-c[0];var e=c[3]-c[1];var f=Math.sqrt(d*d+e*e);var g=this.context_;g.beginPath();g.arc(c[0],c[1],f,0,2*Math.PI);if(!goog.isNull(this.fillState_)){g.fill()}if(!goog.isNull(this.strokeState_)){g.stroke()}}if(this.text_!==""){this.drawText_(a.getCenter(),0,2,2)}};ol.render.canvas.Immediate.prototype.drawFeature=function(a,b){var c=b.getGeometryFunction()(a);if(!goog.isDefAndNotNull(c)||!ol.extent.intersects(this.extent_,c.getExtent())){return}var d=b.getZIndex();if(!goog.isDef(d)){d=0}this.drawAsync(d,function(a){a.setFillStrokeStyle(b.getFill(),b.getStroke());a.setImageStyle(b.getImage());a.setTextStyle(b.getText());var d=ol.render.canvas.Immediate.GEOMETRY_RENDERERS_[c.getType()];goog.asserts.assert(goog.isDef(d),"renderGeometry should be defined");d.call(a,c,null)})};ol.render.canvas.Immediate.prototype.drawGeometryCollectionGeometry=function(a,b){var c=a.getGeometriesArray();var d,e;for(d=0,e=c.length;d<e;++d){var f=c[d];var g=ol.render.canvas.Immediate.GEOMETRY_RENDERERS_[f.getType()];goog.asserts.assert(goog.isDef(g),"geometryRenderer should be defined");g.call(this,f,b)}};ol.render.canvas.Immediate.prototype.drawPointGeometry=function(a,b){var c=a.getFlatCoordinates();var d=a.getStride();if(!goog.isNull(this.image_)){this.drawImages_(c,0,c.length,d)}if(this.text_!==""){this.drawText_(c,0,c.length,d)}};ol.render.canvas.Immediate.prototype.drawMultiPointGeometry=function(a,b){var c=a.getFlatCoordinates();var d=a.getStride();if(!goog.isNull(this.image_)){this.drawImages_(c,0,c.length,d)}if(this.text_!==""){this.drawText_(c,0,c.length,d)}};ol.render.canvas.Immediate.prototype.drawLineStringGeometry=function(a,b){if(!ol.extent.intersects(this.extent_,a.getExtent())){return}if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_);var c=this.context_;var d=a.getFlatCoordinates();c.beginPath();this.moveToLineTo_(d,0,d.length,a.getStride(),false);c.stroke()}if(this.text_!==""){var e=a.getFlatMidpoint();this.drawText_(e,0,2,2)}};ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry=function(a,b){var c=a.getExtent();if(!ol.extent.intersects(this.extent_,c)){return}if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_);var d=this.context_;var e=a.getFlatCoordinates();var f=0;var g=a.getEnds();var h=a.getStride();d.beginPath();var i,j;for(i=0,j=g.length;i<j;++i){f=this.moveToLineTo_(e,f,g[i],h,false)}d.stroke()}if(this.text_!==""){
var k=a.getFlatMidpoints();this.drawText_(k,0,k.length,2)}};ol.render.canvas.Immediate.prototype.drawPolygonGeometry=function(a,b){if(!ol.extent.intersects(this.extent_,a.getExtent())){return}if(!goog.isNull(this.strokeState_)||!goog.isNull(this.fillState_)){if(!goog.isNull(this.fillState_)){this.setContextFillState_(this.fillState_)}if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_)}var c=this.context_;c.beginPath();this.drawRings_(a.getOrientedFlatCoordinates(),0,a.getEnds(),a.getStride());if(!goog.isNull(this.fillState_)){c.fill()}if(!goog.isNull(this.strokeState_)){c.stroke()}}if(this.text_!==""){var d=a.getFlatInteriorPoint();this.drawText_(d,0,2,2)}};ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry=function(a,b){if(!ol.extent.intersects(this.extent_,a.getExtent())){return}if(!goog.isNull(this.strokeState_)||!goog.isNull(this.fillState_)){if(!goog.isNull(this.fillState_)){this.setContextFillState_(this.fillState_)}if(!goog.isNull(this.strokeState_)){this.setContextStrokeState_(this.strokeState_)}var c=this.context_;var d=a.getOrientedFlatCoordinates();var e=0;var f=a.getEndss();var g=a.getStride();var h,i;for(h=0,i=f.length;h<i;++h){var j=f[h];c.beginPath();e=this.drawRings_(d,e,j,g);if(!goog.isNull(this.fillState_)){c.fill()}if(!goog.isNull(this.strokeState_)){c.stroke()}}}if(this.text_!==""){var k=a.getFlatInteriorPoints();this.drawText_(k,0,k.length,2)}};ol.render.canvas.Immediate.prototype.drawText=goog.abstractMethod;ol.render.canvas.Immediate.prototype.flush=function(){var a=goog.array.map(goog.object.getKeys(this.callbacksByZIndex_),Number);goog.array.sort(a);var b,c,d,e,f;for(b=0,c=a.length;b<c;++b){d=this.callbacksByZIndex_[a[b].toString()];for(e=0,f=d.length;e<f;++e){d[e](this)}}};ol.render.canvas.Immediate.prototype.setContextFillState_=function(a){var b=this.context_;var c=this.contextFillState_;if(goog.isNull(c)){b.fillStyle=a.fillStyle;this.contextFillState_={fillStyle:a.fillStyle}}else{if(c.fillStyle!=a.fillStyle){c.fillStyle=b.fillStyle=a.fillStyle}}};ol.render.canvas.Immediate.prototype.setContextStrokeState_=function(a){var b=this.context_;var c=this.contextStrokeState_;if(goog.isNull(c)){b.lineCap=a.lineCap;if(ol.has.CANVAS_LINE_DASH){b.setLineDash(a.lineDash)}b.lineJoin=a.lineJoin;b.lineWidth=a.lineWidth;b.miterLimit=a.miterLimit;b.strokeStyle=a.strokeStyle;this.contextStrokeState_={lineCap:a.lineCap,lineDash:a.lineDash,lineJoin:a.lineJoin,lineWidth:a.lineWidth,miterLimit:a.miterLimit,strokeStyle:a.strokeStyle}}else{if(c.lineCap!=a.lineCap){c.lineCap=b.lineCap=a.lineCap}if(ol.has.CANVAS_LINE_DASH){if(!goog.array.equals(c.lineDash,a.lineDash)){b.setLineDash(c.lineDash=a.lineDash)}}if(c.lineJoin!=a.lineJoin){c.lineJoin=b.lineJoin=a.lineJoin}if(c.lineWidth!=a.lineWidth){c.lineWidth=b.lineWidth=a.lineWidth}if(c.miterLimit!=a.miterLimit){c.miterLimit=b.miterLimit=a.miterLimit}if(c.strokeStyle!=a.strokeStyle){c.strokeStyle=b.strokeStyle=a.strokeStyle}}};ol.render.canvas.Immediate.prototype.setContextTextState_=function(a){var b=this.context_;var c=this.contextTextState_;if(goog.isNull(c)){b.font=a.font;b.textAlign=a.textAlign;b.textBaseline=a.textBaseline;this.contextTextState_={font:a.font,textAlign:a.textAlign,textBaseline:a.textBaseline}}else{if(c.font!=a.font){c.font=b.font=a.font}if(c.textAlign!=a.textAlign){c.textAlign=b.textAlign=a.textAlign}if(c.textBaseline!=a.textBaseline){c.textBaseline=b.textBaseline=a.textBaseline}}};ol.render.canvas.Immediate.prototype.setFillStrokeStyle=function(a,b){if(goog.isNull(a)){this.fillState_=null}else{var c=a.getColor();this.fillState_={fillStyle:ol.color.asString(!goog.isNull(c)?c:ol.render.canvas.defaultFillStyle)}}if(goog.isNull(b)){this.strokeState_=null}else{var d=b.getColor();var e=b.getLineCap();var f=b.getLineDash();var g=b.getLineJoin();var h=b.getWidth();var i=b.getMiterLimit();this.strokeState_={lineCap:goog.isDef(e)?e:ol.render.canvas.defaultLineCap,lineDash:goog.isDefAndNotNull(f)?f:ol.render.canvas.defaultLineDash,lineJoin:goog.isDef(g)?g:ol.render.canvas.defaultLineJoin,lineWidth:this.pixelRatio_*(goog.isDef(h)?h:ol.render.canvas.defaultLineWidth),miterLimit:goog.isDef(i)?i:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.color.asString(!goog.isNull(d)?d:ol.render.canvas.defaultStrokeStyle)}}};ol.render.canvas.Immediate.prototype.setImageStyle=function(a){if(goog.isNull(a)){this.image_=null}else{var b=a.getAnchor();var c=a.getImage(1);var d=a.getOrigin();var e=a.getSize();goog.asserts.assert(!goog.isNull(b),"imageAnchor should not be null");goog.asserts.assert(!goog.isNull(c),"imageImage should not be null");goog.asserts.assert(!goog.isNull(d),"imageOrigin should not be null");goog.asserts.assert(!goog.isNull(e),"imageSize should not be null");this.imageAnchorX_=b[0];this.imageAnchorY_=b[1];this.imageHeight_=e[1];this.image_=c;this.imageOpacity_=a.getOpacity();this.imageOriginX_=d[0];this.imageOriginY_=d[1];this.imageRotateWithView_=a.getRotateWithView();this.imageRotation_=a.getRotation();this.imageScale_=a.getScale();this.imageSnapToPixel_=a.getSnapToPixel();this.imageWidth_=e[0]}};ol.render.canvas.Immediate.prototype.setTextStyle=function(a){if(goog.isNull(a)){this.text_=""}else{var b=a.getFill();if(goog.isNull(b)){this.textFillState_=null}else{var c=b.getColor();this.textFillState_={fillStyle:ol.color.asString(!goog.isNull(c)?c:ol.render.canvas.defaultFillStyle)}}var d=a.getStroke();if(goog.isNull(d)){this.textStrokeState_=null}else{var e=d.getColor();var f=d.getLineCap();var g=d.getLineDash();var h=d.getLineJoin();var i=d.getWidth();var j=d.getMiterLimit();this.textStrokeState_={lineCap:goog.isDef(f)?f:ol.render.canvas.defaultLineCap,lineDash:goog.isDefAndNotNull(g)?g:ol.render.canvas.defaultLineDash,lineJoin:goog.isDef(h)?h:ol.render.canvas.defaultLineJoin,lineWidth:goog.isDef(i)?i:ol.render.canvas.defaultLineWidth,miterLimit:goog.isDef(j)?j:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.color.asString(!goog.isNull(e)?e:ol.render.canvas.defaultStrokeStyle)}}var k=a.getFont();var l=a.getOffsetX();var m=a.getOffsetY();var n=a.getRotation();var o=a.getScale();var p=a.getText();var q=a.getTextAlign();var r=a.getTextBaseline();this.textState_={font:goog.isDef(k)?k:ol.render.canvas.defaultFont,textAlign:goog.isDef(q)?q:ol.render.canvas.defaultTextAlign,textBaseline:goog.isDef(r)?r:ol.render.canvas.defaultTextBaseline};this.text_=goog.isDef(p)?p:"";this.textOffsetX_=goog.isDef(l)?this.pixelRatio_*l:0;this.textOffsetY_=goog.isDef(m)?this.pixelRatio_*m:0;this.textRotation_=goog.isDef(n)?n:0;this.textScale_=this.pixelRatio_*(goog.isDef(o)?o:1)}};ol.render.canvas.Immediate.GEOMETRY_RENDERERS_={Point:ol.render.canvas.Immediate.prototype.drawPointGeometry,LineString:ol.render.canvas.Immediate.prototype.drawLineStringGeometry,Polygon:ol.render.canvas.Immediate.prototype.drawPolygonGeometry,MultiPoint:ol.render.canvas.Immediate.prototype.drawMultiPointGeometry,MultiLineString:ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry,MultiPolygon:ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry,GeometryCollection:ol.render.canvas.Immediate.prototype.drawGeometryCollectionGeometry,Circle:ol.render.canvas.Immediate.prototype.drawCircleGeometry};goog.provide("ol.renderer.canvas.Layer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.vec.Mat4");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Layer");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.renderer.Layer");goog.require("ol.vec.Mat4");ol.renderer.canvas.Layer=function(a){goog.base(this,a);this.transform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.canvas.Layer,ol.renderer.Layer);ol.renderer.canvas.Layer.prototype.composeFrame=function(a,b,c){this.dispatchPreComposeEvent(c,a);var d=this.getImage();if(!goog.isNull(d)){var e=b.extent;var f=goog.isDef(e);if(f){goog.asserts.assert(goog.isDef(e),"layerState extent is defined");var g=a.pixelRatio;var h=ol.extent.getTopLeft(e);var i=ol.extent.getTopRight(e);var j=ol.extent.getBottomRight(e);var k=ol.extent.getBottomLeft(e);ol.vec.Mat4.multVec2(a.coordinateToPixelMatrix,h,h);ol.vec.Mat4.multVec2(a.coordinateToPixelMatrix,i,i);ol.vec.Mat4.multVec2(a.coordinateToPixelMatrix,j,j);ol.vec.Mat4.multVec2(a.coordinateToPixelMatrix,k,k);c.save();c.beginPath();c.moveTo(h[0]*g,h[1]*g);c.lineTo(i[0]*g,i[1]*g);c.lineTo(j[0]*g,j[1]*g);c.lineTo(k[0]*g,k[1]*g);c.clip()}var l=this.getImageTransform();var m=c.globalAlpha;c.globalAlpha=b.opacity;if(a.viewState.rotation===0){var n=goog.vec.Mat4.getElement(l,0,3);var o=goog.vec.Mat4.getElement(l,1,3);var p=d.width*goog.vec.Mat4.getElement(l,0,0);var q=d.height*goog.vec.Mat4.getElement(l,1,1);c.drawImage(d,0,0,+d.width,+d.height,Math.round(n),Math.round(o),Math.round(p),Math.round(q))}else{c.setTransform(goog.vec.Mat4.getElement(l,0,0),goog.vec.Mat4.getElement(l,1,0),goog.vec.Mat4.getElement(l,0,1),goog.vec.Mat4.getElement(l,1,1),goog.vec.Mat4.getElement(l,0,3),goog.vec.Mat4.getElement(l,1,3));c.drawImage(d,0,0);c.setTransform(1,0,0,1,0,0)}c.globalAlpha=m;if(f){c.restore()}}this.dispatchPostComposeEvent(c,a)};ol.renderer.canvas.Layer.prototype.dispatchComposeEvent_=function(a,b,c,d){var e=this.getLayer();if(e.hasListener(a)){var f=goog.isDef(d)?d:this.getTransform(c,0);var g=new ol.render.canvas.Immediate(b,c.pixelRatio,c.extent,f,c.viewState.rotation);var h=new ol.render.Event(a,e,g,c,b,null);e.dispatchEvent(h);g.flush()}};ol.renderer.canvas.Layer.prototype.dispatchPostComposeEvent=function(a,b,c){this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,a,b,c)};ol.renderer.canvas.Layer.prototype.dispatchPreComposeEvent=function(a,b,c){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,a,b,c)};ol.renderer.canvas.Layer.prototype.dispatchRenderEvent=function(a,b,c){this.dispatchComposeEvent_(ol.render.EventType.RENDER,a,b,c)};ol.renderer.canvas.Layer.prototype.getImage=goog.abstractMethod;ol.renderer.canvas.Layer.prototype.getImageTransform=goog.abstractMethod;ol.renderer.canvas.Layer.prototype.getTransform=function(a,b){var c=a.viewState;var d=a.pixelRatio;return ol.vec.Mat4.makeTransform2D(this.transform_,d*a.size[0]/2,d*a.size[1]/2,d/c.resolution,-d/c.resolution,-c.rotation,-c.center[0]+b,-c.center[1])};ol.renderer.canvas.Layer.prototype.prepareFrame=goog.abstractMethod;ol.renderer.canvas.Layer.prototype.getPixelOnCanvas=function(a,b){var c=[0,0];ol.vec.Mat4.multVec2(b,a,c);return c};ol.renderer.canvas.Layer.testCanvasSize=function(){var a=null;var b=null;return function(c){if(goog.isNull(a)){a=ol.dom.createCanvasContext2D(1,1);b=a.createImageData(1,1);var d=b.data;d[0]=42;d[1]=84;d[2]=126;d[3]=255}var e=a.canvas;var f=c[0]<=e.width&&c[1]<=e.height;if(!f){e.width=c[0];e.height=c[1];var g=c[0]-1;var h=c[1]-1;a.putImageData(b,g,h);var i=a.getImageData(g,h,1,1);f=goog.array.equals(b.data,i.data)}return f}}();goog.provide("ol.render.IReplayGroup");goog.require("ol.render.VectorContext");ol.render.ReplayType={IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};ol.render.REPLAY_ORDER=[ol.render.ReplayType.POLYGON,ol.render.ReplayType.LINE_STRING,ol.render.ReplayType.IMAGE,ol.render.ReplayType.TEXT];ol.render.IReplayGroup=function(){};ol.render.IReplayGroup.prototype.getReplay=function(a,b){};ol.render.IReplayGroup.prototype.isEmpty=function(){};goog.provide("ol.render.canvas.ImageReplay");goog.provide("ol.render.canvas.LineStringReplay");goog.provide("ol.render.canvas.PolygonReplay");goog.provide("ol.render.canvas.Replay");goog.provide("ol.render.canvas.ReplayGroup");goog.provide("ol.render.canvas.TextReplay");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.array");goog.require("ol.color");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.extent.Relationship");goog.require("ol.geom.flat.simplify");goog.require("ol.geom.flat.transform");goog.require("ol.has");goog.require("ol.render.IReplayGroup");goog.require("ol.render.VectorContext");goog.require("ol.render.canvas");goog.require("ol.vec.Mat4");ol.render.canvas.Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,DRAW_IMAGE:4,DRAW_TEXT:5,END_GEOMETRY:6,FILL:7,MOVE_TO_LINE_TO:8,SET_FILL_STYLE:9,SET_STROKE_STYLE:10,SET_TEXT_STYLE:11,STROKE:12};ol.render.canvas.Replay=function(a,b,c){goog.base(this);this.tolerance=a;this.maxExtent=b;this.bufferedMaxExtent_=null;this.maxLineWidth=0;this.resolution=c;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_=null;this.instructions=[];this.coordinates=[];this.renderedTransform_=goog.vec.Mat4.createNumber();this.hitDetectionInstructions=[];this.pixelCoordinates_=[];this.tmpLocalTransform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.render.canvas.Replay,ol.render.VectorContext);ol.render.canvas.Replay.prototype.appendFlatCoordinates=function(a,b,c,d,e){var f=this.coordinates.length;var g=this.getBufferedMaxExtent();var h=[a[b],a[b+1]];var i=[NaN,NaN];var j=true;var k,l,m;for(k=b+d;k<c;k+=d){i[0]=a[k];i[1]=a[k+1];m=ol.extent.coordinateRelationship(g,i);if(m!==l){if(j){this.coordinates[f++]=h[0];this.coordinates[f++]=h[1]}this.coordinates[f++]=i[0];this.coordinates[f++]=i[1];j=false}else if(m===ol.extent.Relationship.INTERSECTING){this.coordinates[f++]=i[0];this.coordinates[f++]=i[1];j=false}else{j=true}h[0]=i[0];h[1]=i[1];l=m}if(k===b+d){this.coordinates[f++]=h[0];this.coordinates[f++]=h[1]}if(e){this.coordinates[f++]=a[b];this.coordinates[f++]=a[b+1]}return f};ol.render.canvas.Replay.prototype.beginGeometry=function(a,b){this.beginGeometryInstruction1_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,b,0];this.instructions.push(this.beginGeometryInstruction1_);this.beginGeometryInstruction2_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,b,0];this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)};ol.render.canvas.Replay.prototype.replay_=function(a,b,c,d,e,f,g,h){var i;if(ol.vec.Mat4.equals2D(c,this.renderedTransform_)){i=this.pixelCoordinates_}else{i=ol.geom.flat.transform.transform2D(this.coordinates,0,this.coordinates.length,2,c,this.pixelCoordinates_);goog.vec.Mat4.setFromArray(this.renderedTransform_,c);goog.asserts.assert(i===this.pixelCoordinates_,"pixelCoordinates should be the same as this.pixelCoordinates_")}var j=0;var k=f.length;var l=0;var m;var n=this.tmpLocalTransform_;while(j<k){var o=f[j];var p=o[0];var q,r,s,t,u,v;switch(p){case ol.render.canvas.Instruction.BEGIN_GEOMETRY:q=o[1];var w=goog.getUid(q).toString();if(goog.isDef(e[w])||!goog.isDefAndNotNull(q.getGeometry())){j=o[2]}else if(goog.isDef(h)&&!ol.extent.intersects(h,q.getGeometry().getExtent())){j=o[2]}else{++j}break;case ol.render.canvas.Instruction.BEGIN_PATH:a.beginPath();++j;break;case ol.render.canvas.Instruction.CIRCLE:goog.asserts.assert(goog.isNumber(o[1]),"second instruction should be a number");l=o[1];var x=i[l];var y=i[l+1];var z=i[l+2];var A=i[l+3];var B=z-x;var C=A-y;var D=Math.sqrt(B*B+C*C);a.arc(x,y,D,0,2*Math.PI,true);++j;break;case ol.render.canvas.Instruction.CLOSE_PATH:a.closePath();++j;break;case ol.render.canvas.Instruction.DRAW_IMAGE:goog.asserts.assert(goog.isNumber(o[1]),"second instruction should be a number");l=o[1];goog.asserts.assert(goog.isNumber(o[2]),"third instruction should be a number");m=o[2];var E=o[3];var F=o[4]*b;var G=o[5]*b;var H=o[6];var I=o[7];var J=o[8];var K=o[9];var L=o[10];var M=o[11];var N=o[12];var O=o[13];var P=o[14];if(L){M+=d}for(;l<m;l+=2){u=i[l]-F;v=i[l+1]-G;if(O){u=u+.5|0;v=v+.5|0}if(N!=1||M!==0){var Q=u+F;var R=v+G;ol.vec.Mat4.makeTransform2D(n,Q,R,N,N,M,-Q,-R);a.setTransform(goog.vec.Mat4.getElement(n,0,0),goog.vec.Mat4.getElement(n,1,0),goog.vec.Mat4.getElement(n,0,1),goog.vec.Mat4.getElement(n,1,1),goog.vec.Mat4.getElement(n,0,3),goog.vec.Mat4.getElement(n,1,3))}var S=a.globalAlpha;if(I!=1){a.globalAlpha=S*I}a.drawImage(E,J,K,P,H,u,v,P*b,H*b);if(I!=1){a.globalAlpha=S}if(N!=1||M!==0){a.setTransform(1,0,0,1,0,0)}}++j;break;case ol.render.canvas.Instruction.DRAW_TEXT:goog.asserts.assert(goog.isNumber(o[1]),"2nd instruction should be a number");l=o[1];goog.asserts.assert(goog.isNumber(o[2]),"3rd instruction should be a number");m=o[2];goog.asserts.assert(goog.isString(o[3]),"4th instruction should be a string");t=o[3];goog.asserts.assert(goog.isNumber(o[4]),"5th instruction should be a number");var T=o[4]*b;goog.asserts.assert(goog.isNumber(o[5]),"6th instruction should be a number");var U=o[5]*b;goog.asserts.assert(goog.isNumber(o[6]),"7th instruction should be a number");M=o[6];goog.asserts.assert(goog.isNumber(o[7]),"8th instruction should be a number");N=o[7]*b;goog.asserts.assert(goog.isBoolean(o[8]),"9th instruction should be a boolean");r=o[8];goog.asserts.assert(goog.isBoolean(o[9]),"10th instruction should be a boolean");s=o[9];for(;l<m;l+=2){u=i[l]+T;v=i[l+1]+U;if(N!=1||M!==0){ol.vec.Mat4.makeTransform2D(n,u,v,N,N,M,-u,-v);a.setTransform(goog.vec.Mat4.getElement(n,0,0),goog.vec.Mat4.getElement(n,1,0),goog.vec.Mat4.getElement(n,0,1),goog.vec.Mat4.getElement(n,1,1),goog.vec.Mat4.getElement(n,0,3),goog.vec.Mat4.getElement(n,1,3))}if(s){a.strokeText(t,u,v)}if(r){a.fillText(t,u,v)}if(N!=1||M!==0){a.setTransform(1,0,0,1,0,0)}}++j;break;case ol.render.canvas.Instruction.END_GEOMETRY:if(goog.isDef(g)){q=o[1];var V=g(q);if(V){return V}}++j;break;case ol.render.canvas.Instruction.FILL:a.fill();++j;break;case ol.render.canvas.Instruction.MOVE_TO_LINE_TO:goog.asserts.assert(goog.isNumber(o[1]),"2nd instruction should be a number");l=o[1];goog.asserts.assert(goog.isNumber(o[2]),"3rd instruction should be a number");m=o[2];a.moveTo(i[l],i[l+1]);for(l+=2;l<m;l+=2){a.lineTo(i[l],i[l+1])}++j;break;case ol.render.canvas.Instruction.SET_FILL_STYLE:goog.asserts.assert(goog.isString(o[1]),"2nd instruction should be a string");a.fillStyle=o[1];++j;break;case ol.render.canvas.Instruction.SET_STROKE_STYLE:goog.asserts.assert(goog.isString(o[1]),"2nd instruction should be a string");goog.asserts.assert(goog.isNumber(o[2]),"3rd instruction should be a number");goog.asserts.assert(goog.isString(o[3]),"4rd instruction should be a string");goog.asserts.assert(goog.isString(o[4]),"5th instruction should be a string");goog.asserts.assert(goog.isNumber(o[5]),"6th instruction should be a number");goog.asserts.assert(!goog.isNull(o[6]),"7th instruction should not be null");var W=goog.isDef(o[7])?o[7]:true;var X=o[2];a.strokeStyle=o[1];a.lineWidth=W?X*b:X;a.lineCap=o[3];a.lineJoin=o[4];a.miterLimit=o[5];if(ol.has.CANVAS_LINE_DASH){a.setLineDash(o[6])}++j;break;case ol.render.canvas.Instruction.SET_TEXT_STYLE:goog.asserts.assert(goog.isString(o[1]),"2nd instruction should be a string");goog.asserts.assert(goog.isString(o[2]),"3rd instruction should be a string");goog.asserts.assert(goog.isString(o[3]),"4th instruction should be a string");a.font=o[1];a.textAlign=o[2];a.textBaseline=o[3];++j;break;case ol.render.canvas.Instruction.STROKE:a.stroke();++j;break;default:goog.asserts.fail("Unknown canvas render instruction");++j;break}}goog.asserts.assert(j==f.length,"all instructions should be consumed");return undefined};ol.render.canvas.Replay.prototype.replay=function(a,b,c,d,e){var f=this.instructions;this.replay_(a,b,c,d,e,f,undefined)};ol.render.canvas.Replay.prototype.replayHitDetection=function(a,b,c,d,e,f){var g=this.hitDetectionInstructions;return this.replay_(a,1,b,c,d,g,e,f)};ol.render.canvas.Replay.prototype.reverseHitDetectionInstructions_=function(){var a=this.hitDetectionInstructions;a.reverse();var b;var c=a.length;var d;var e;var f=-1;for(b=0;b<c;++b){d=a[b];e=d[0];if(e==ol.render.canvas.Instruction.END_GEOMETRY){goog.asserts.assert(f==-1,"begin should be -1");f=b}else if(e==ol.render.canvas.Instruction.BEGIN_GEOMETRY){d[2]=b;goog.asserts.assert(f>=0,"begin should be larger than or equal to 0");ol.array.reverseSubArray(this.hitDetectionInstructions,f,b);f=-1}}};ol.render.canvas.Replay.prototype.endGeometry=function(a,b){goog.asserts.assert(!goog.isNull(this.beginGeometryInstruction1_),"this.beginGeometryInstruction1_ should not be null");this.beginGeometryInstruction1_[2]=this.instructions.length;this.beginGeometryInstruction1_=null;goog.asserts.assert(!goog.isNull(this.beginGeometryInstruction2_),"this.beginGeometryInstruction2_ should not be null");this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length;this.beginGeometryInstruction2_=null;var c=[ol.render.canvas.Instruction.END_GEOMETRY,b];this.instructions.push(c);this.hitDetectionInstructions.push(c)};ol.render.canvas.Replay.prototype.finish=goog.nullFunction;ol.render.canvas.Replay.prototype.getBufferedMaxExtent=function(){return this.maxExtent};ol.render.canvas.ImageReplay=function(a,b,c){goog.base(this,a,b,c);this.hitDetectionImage_=null;this.image_=null;this.anchorX_=undefined;this.anchorY_=undefined;this.height_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.snapToPixel_=undefined;this.width_=undefined};goog.inherits(ol.render.canvas.ImageReplay,ol.render.canvas.Replay);ol.render.canvas.ImageReplay.prototype.drawCoordinates_=function(a,b,c,d){return this.appendFlatCoordinates(a,b,c,d,false)};ol.render.canvas.ImageReplay.prototype.drawPointGeometry=function(a,b){if(goog.isNull(this.image_)){return}goog.asserts.assert(goog.isDef(this.anchorX_),"this.anchorX_ should be defined");goog.asserts.assert(goog.isDef(this.anchorY_),"this.anchorY_ should be defined");goog.asserts.assert(goog.isDef(this.height_),"this.height_ should be defined");goog.asserts.assert(goog.isDef(this.opacity_),"this.opacity_ should be defined");goog.asserts.assert(goog.isDef(this.originX_),"this.originX_ should be defined");goog.asserts.assert(goog.isDef(this.originY_),"this.originY_ should be defined");goog.asserts.assert(goog.isDef(this.rotateWithView_),"this.rotateWithView_ should be defined");goog.asserts.assert(goog.isDef(this.rotation_),"this.rotation_ should be defined");goog.asserts.assert(goog.isDef(this.scale_),"this.scale_ should be defined");goog.asserts.assert(goog.isDef(this.width_),"this.width_ should be defined");this.beginGeometry(a,b);var c=a.getFlatCoordinates();var d=a.getStride();var e=this.coordinates.length;var f=this.drawCoordinates_(c,0,c.length,d);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,e,f,this.image_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,e,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(a,b)};ol.render.canvas.ImageReplay.prototype.drawMultiPointGeometry=function(a,b){if(goog.isNull(this.image_)){return}goog.asserts.assert(goog.isDef(this.anchorX_),"this.anchorX_ should be defined");goog.asserts.assert(goog.isDef(this.anchorY_),"this.anchorY_ should be defined");goog.asserts.assert(goog.isDef(this.height_),"this.height_ should be defined");goog.asserts.assert(goog.isDef(this.opacity_),"this.opacity_ should be defined");goog.asserts.assert(goog.isDef(this.originX_),"this.originX_ should be defined");goog.asserts.assert(goog.isDef(this.originY_),"this.originY_ should be defined");goog.asserts.assert(goog.isDef(this.rotateWithView_),"this.rotateWithView_ should be defined");goog.asserts.assert(goog.isDef(this.rotation_),"this.rotation_ should be defined");goog.asserts.assert(goog.isDef(this.scale_),"this.scale_ should be defined");goog.asserts.assert(goog.isDef(this.width_),"this.width_ should be defined");this.beginGeometry(a,b);var c=a.getFlatCoordinates();var d=a.getStride();var e=this.coordinates.length;var f=this.drawCoordinates_(c,0,c.length,d);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,e,f,this.image_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,e,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(a,b)};ol.render.canvas.ImageReplay.prototype.finish=function(){this.reverseHitDetectionInstructions_();this.anchorX_=undefined;this.anchorY_=undefined;this.hitDetectionImage_=null;this.image_=null;this.height_=undefined;this.scale_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.snapToPixel_=undefined;this.width_=undefined};ol.render.canvas.ImageReplay.prototype.setImageStyle=function(a){goog.asserts.assert(!goog.isNull(a),"imageStyle should not be null");var b=a.getAnchor();goog.asserts.assert(!goog.isNull(b),"anchor should not be null");var c=a.getSize();goog.asserts.assert(!goog.isNull(c),"size should not be null");var d=a.getHitDetectionImage(1);goog.asserts.assert(!goog.isNull(d),"hitDetectionImage should not be null");var e=a.getImage(1);goog.asserts.assert(!goog.isNull(e),"image should not be null");var f=a.getOrigin();goog.asserts.assert(!goog.isNull(f),"origin should not be null");this.anchorX_=b[0];this.anchorY_=b[1];this.hitDetectionImage_=d;this.image_=e;this.height_=c[1];this.opacity_=a.getOpacity();this.originX_=f[0];this.originY_=f[1];this.rotateWithView_=a.getRotateWithView();this.rotation_=a.getRotation();this.scale_=a.getScale();this.snapToPixel_=a.getSnapToPixel();this.width_=c[0]};ol.render.canvas.LineStringReplay=function(a,b,c){goog.base(this,a,b,c);this.state_={currentStrokeStyle:undefined,currentLineCap:undefined,currentLineDash:null,currentLineJoin:undefined,currentLineWidth:undefined,currentMiterLimit:undefined,lastStroke:0,strokeStyle:undefined,lineCap:undefined,lineDash:null,lineJoin:undefined,lineWidth:undefined,miterLimit:undefined}};goog.inherits(ol.render.canvas.LineStringReplay,ol.render.canvas.Replay);ol.render.canvas.LineStringReplay.prototype.drawFlatCoordinates_=function(a,b,c,d){var e=this.coordinates.length;var f=this.appendFlatCoordinates(a,b,c,d,false);var g=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,e,f];this.instructions.push(g);this.hitDetectionInstructions.push(g);return c};ol.render.canvas.LineStringReplay.prototype.getBufferedMaxExtent=function(){if(goog.isNull(this.bufferedMaxExtent_)){this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent);if(this.maxLineWidth>0){var a=this.resolution*(this.maxLineWidth+1)/2;ol.extent.buffer(this.bufferedMaxExtent_,a,this.bufferedMaxExtent_)}}return this.bufferedMaxExtent_};ol.render.canvas.LineStringReplay.prototype.setStrokeStyle_=function(){var a=this.state_;var b=a.strokeStyle;var c=a.lineCap;var d=a.lineDash;var e=a.lineJoin;var f=a.lineWidth;var g=a.miterLimit;goog.asserts.assert(goog.isDef(b),"strokeStyle should be defined");goog.asserts.assert(goog.isDef(c),"lineCap should be defined");goog.asserts.assert(!goog.isNull(d),"lineDash should not be null");goog.asserts.assert(goog.isDef(e),"lineJoin should be defined");goog.asserts.assert(goog.isDef(f),"lineWidth should be defined");goog.asserts.assert(goog.isDef(g),"miterLimit should be defined");if(a.currentStrokeStyle!=b||a.currentLineCap!=c||!goog.array.equals(a.currentLineDash,d)||a.currentLineJoin!=e||a.currentLineWidth!=f||a.currentMiterLimit!=g){if(a.lastStroke!=this.coordinates.length){this.instructions.push([ol.render.canvas.Instruction.STROKE]);a.lastStroke=this.coordinates.length}this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,b,f,c,e,g,d],[ol.render.canvas.Instruction.BEGIN_PATH]);a.currentStrokeStyle=b;a.currentLineCap=c;a.currentLineDash=d;a.currentLineJoin=e;a.currentLineWidth=f;a.currentMiterLimit=g}};ol.render.canvas.LineStringReplay.prototype.drawLineStringGeometry=function(a,b){var c=this.state_;goog.asserts.assert(!goog.isNull(c),"state should not be null");var d=c.strokeStyle;var e=c.lineWidth;if(!goog.isDef(d)||!goog.isDef(e)){return}this.setStrokeStyle_();this.beginGeometry(a,b);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash],[ol.render.canvas.Instruction.BEGIN_PATH]);var f=a.getFlatCoordinates();var g=a.getStride();this.drawFlatCoordinates_(f,0,f.length,g);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]);this.endGeometry(a,b)};ol.render.canvas.LineStringReplay.prototype.drawMultiLineStringGeometry=function(a,b){var c=this.state_;goog.asserts.assert(!goog.isNull(c),"state should not be null");var d=c.strokeStyle;var e=c.lineWidth;if(!goog.isDef(d)||!goog.isDef(e)){return}this.setStrokeStyle_();this.beginGeometry(a,b);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash],[ol.render.canvas.Instruction.BEGIN_PATH]);var f=a.getEnds();var g=a.getFlatCoordinates();var h=a.getStride();var i=0;var j,k;for(j=0,k=f.length;j<k;++j){i=this.drawFlatCoordinates_(g,i,f[j],h)}this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]);this.endGeometry(a,b)};ol.render.canvas.LineStringReplay.prototype.finish=function(){var a=this.state_;goog.asserts.assert(!goog.isNull(a),"state should not be null");if(a.lastStroke!=this.coordinates.length){this.instructions.push([ol.render.canvas.Instruction.STROKE])}this.reverseHitDetectionInstructions_();this.state_=null};ol.render.canvas.LineStringReplay.prototype.setFillStrokeStyle=function(a,b){goog.asserts.assert(!goog.isNull(this.state_),"this.state_ should not be null");goog.asserts.assert(goog.isNull(a),"fillStyle should be null");goog.asserts.assert(!goog.isNull(b),"strokeStyle should not be null");var c=b.getColor();this.state_.strokeStyle=ol.color.asString(!goog.isNull(c)?c:ol.render.canvas.defaultStrokeStyle);var d=b.getLineCap();this.state_.lineCap=goog.isDef(d)?d:ol.render.canvas.defaultLineCap;var e=b.getLineDash();this.state_.lineDash=!goog.isNull(e)?e:ol.render.canvas.defaultLineDash;var f=b.getLineJoin();this.state_.lineJoin=goog.isDef(f)?f:ol.render.canvas.defaultLineJoin;var g=b.getWidth();this.state_.lineWidth=goog.isDef(g)?g:ol.render.canvas.defaultLineWidth;var h=b.getMiterLimit();this.state_.miterLimit=goog.isDef(h)?h:ol.render.canvas.defaultMiterLimit;if(this.state_.lineWidth>this.maxLineWidth){this.maxLineWidth=this.state_.lineWidth;this.bufferedMaxExtent_=null}};ol.render.canvas.PolygonReplay=function(a,b,c){goog.base(this,a,b,c);this.state_={currentFillStyle:undefined,currentStrokeStyle:undefined,currentLineCap:undefined,currentLineDash:null,currentLineJoin:undefined,currentLineWidth:undefined,currentMiterLimit:undefined,fillStyle:undefined,strokeStyle:undefined,lineCap:undefined,lineDash:null,lineJoin:undefined,lineWidth:undefined,miterLimit:undefined}};goog.inherits(ol.render.canvas.PolygonReplay,ol.render.canvas.Replay);ol.render.canvas.PolygonReplay.prototype.drawFlatCoordinatess_=function(a,b,c,d){var e=this.state_;var f=[ol.render.canvas.Instruction.BEGIN_PATH];this.instructions.push(f);this.hitDetectionInstructions.push(f);var g,h;for(g=0,h=c.length;g<h;++g){var i=c[g];var j=this.coordinates.length;var k=this.appendFlatCoordinates(a,b,i,d,true);var l=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,j,k];var m=[ol.render.canvas.Instruction.CLOSE_PATH];this.instructions.push(l,m);this.hitDetectionInstructions.push(l,m);b=i}var n=[ol.render.canvas.Instruction.FILL];this.hitDetectionInstructions.push(n);if(goog.isDef(e.fillStyle)){this.instructions.push(n)}if(goog.isDef(e.strokeStyle)){goog.asserts.assert(goog.isDef(e.lineWidth),"state.lineWidth should be defined");var o=[ol.render.canvas.Instruction.STROKE];this.instructions.push(o)
;this.hitDetectionInstructions.push(o)}return b};ol.render.canvas.PolygonReplay.prototype.drawCircleGeometry=function(a,b){var c=this.state_;goog.asserts.assert(!goog.isNull(c),"state should not be null");var d=c.fillStyle;var e=c.strokeStyle;if(!goog.isDef(d)&&!goog.isDef(e)){return}if(goog.isDef(e)){goog.asserts.assert(goog.isDef(c.lineWidth),"state.lineWidth should be defined")}this.setFillStrokeStyles_();this.beginGeometry(a,b);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(goog.isDef(c.strokeStyle)){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash])}var f=a.getFlatCoordinates();var g=a.getStride();var h=this.coordinates.length;this.appendFlatCoordinates(f,0,f.length,g,false);var i=[ol.render.canvas.Instruction.BEGIN_PATH];var j=[ol.render.canvas.Instruction.CIRCLE,h];this.instructions.push(i,j);this.hitDetectionInstructions.push(i,j);var k=[ol.render.canvas.Instruction.FILL];this.hitDetectionInstructions.push(k);if(goog.isDef(c.fillStyle)){this.instructions.push(k)}if(goog.isDef(c.strokeStyle)){goog.asserts.assert(goog.isDef(c.lineWidth),"state.lineWidth should be defined");var l=[ol.render.canvas.Instruction.STROKE];this.instructions.push(l);this.hitDetectionInstructions.push(l)}this.endGeometry(a,b)};ol.render.canvas.PolygonReplay.prototype.drawPolygonGeometry=function(a,b){var c=this.state_;goog.asserts.assert(!goog.isNull(c),"state should not be null");var d=c.fillStyle;var e=c.strokeStyle;if(!goog.isDef(d)&&!goog.isDef(e)){return}if(goog.isDef(e)){goog.asserts.assert(goog.isDef(c.lineWidth),"state.lineWidth should be defined")}this.setFillStrokeStyles_();this.beginGeometry(a,b);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(goog.isDef(c.strokeStyle)){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash])}var f=a.getEnds();var g=a.getOrientedFlatCoordinates();var h=a.getStride();this.drawFlatCoordinatess_(g,0,f,h);this.endGeometry(a,b)};ol.render.canvas.PolygonReplay.prototype.drawMultiPolygonGeometry=function(a,b){var c=this.state_;goog.asserts.assert(!goog.isNull(c),"state should not be null");var d=c.fillStyle;var e=c.strokeStyle;if(!goog.isDef(d)&&!goog.isDef(e)){return}if(goog.isDef(e)){goog.asserts.assert(goog.isDef(c.lineWidth),"state.lineWidth should be defined")}this.setFillStrokeStyles_();this.beginGeometry(a,b);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(goog.isDef(c.strokeStyle)){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash])}var f=a.getEndss();var g=a.getOrientedFlatCoordinates();var h=a.getStride();var i=0;var j,k;for(j=0,k=f.length;j<k;++j){i=this.drawFlatCoordinatess_(g,i,f[j],h)}this.endGeometry(a,b)};ol.render.canvas.PolygonReplay.prototype.finish=function(){goog.asserts.assert(!goog.isNull(this.state_),"this.state_ should not be null");this.reverseHitDetectionInstructions_();this.state_=null;var a=this.tolerance;if(a!==0){var b=this.coordinates;var c,d;for(c=0,d=b.length;c<d;++c){b[c]=ol.geom.flat.simplify.snap(b[c],a)}}};ol.render.canvas.PolygonReplay.prototype.getBufferedMaxExtent=function(){if(goog.isNull(this.bufferedMaxExtent_)){this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent);if(this.maxLineWidth>0){var a=this.resolution*(this.maxLineWidth+1)/2;ol.extent.buffer(this.bufferedMaxExtent_,a,this.bufferedMaxExtent_)}}return this.bufferedMaxExtent_};ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyle=function(a,b){goog.asserts.assert(!goog.isNull(this.state_),"this.state_ should not be null");goog.asserts.assert(!goog.isNull(a)||!goog.isNull(b),"fillStyle or strokeStyle should not be null");var c=this.state_;if(!goog.isNull(a)){var d=a.getColor();c.fillStyle=ol.color.asString(!goog.isNull(d)?d:ol.render.canvas.defaultFillStyle)}else{c.fillStyle=undefined}if(!goog.isNull(b)){var e=b.getColor();c.strokeStyle=ol.color.asString(!goog.isNull(e)?e:ol.render.canvas.defaultStrokeStyle);var f=b.getLineCap();c.lineCap=goog.isDef(f)?f:ol.render.canvas.defaultLineCap;var g=b.getLineDash();c.lineDash=!goog.isNull(g)?g.slice():ol.render.canvas.defaultLineDash;var h=b.getLineJoin();c.lineJoin=goog.isDef(h)?h:ol.render.canvas.defaultLineJoin;var i=b.getWidth();c.lineWidth=goog.isDef(i)?i:ol.render.canvas.defaultLineWidth;var j=b.getMiterLimit();c.miterLimit=goog.isDef(j)?j:ol.render.canvas.defaultMiterLimit;if(c.lineWidth>this.maxLineWidth){this.maxLineWidth=c.lineWidth;this.bufferedMaxExtent_=null}}else{c.strokeStyle=undefined;c.lineCap=undefined;c.lineDash=null;c.lineJoin=undefined;c.lineWidth=undefined;c.miterLimit=undefined}};ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyles_=function(){var a=this.state_;var b=a.fillStyle;var c=a.strokeStyle;var d=a.lineCap;var e=a.lineDash;var f=a.lineJoin;var g=a.lineWidth;var h=a.miterLimit;if(goog.isDef(b)&&a.currentFillStyle!=b){this.instructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,b]);a.currentFillStyle=a.fillStyle}if(goog.isDef(c)){goog.asserts.assert(goog.isDef(d),"lineCap should be defined");goog.asserts.assert(!goog.isNull(e),"lineDash should not be null");goog.asserts.assert(goog.isDef(f),"lineJoin should be defined");goog.asserts.assert(goog.isDef(g),"lineWidth should be defined");goog.asserts.assert(goog.isDef(h),"miterLimit should be defined");if(a.currentStrokeStyle!=c||a.currentLineCap!=d||a.currentLineDash!=e||a.currentLineJoin!=f||a.currentLineWidth!=g||a.currentMiterLimit!=h){this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c,g,d,f,h,e]);a.currentStrokeStyle=c;a.currentLineCap=d;a.currentLineDash=e;a.currentLineJoin=f;a.currentLineWidth=g;a.currentMiterLimit=h}}};ol.render.canvas.TextReplay=function(a,b,c){goog.base(this,a,b,c);this.replayFillState_=null;this.replayStrokeState_=null;this.replayTextState_=null;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotation_=0;this.textScale_=0;this.textFillState_=null;this.textStrokeState_=null;this.textState_=null};goog.inherits(ol.render.canvas.TextReplay,ol.render.canvas.Replay);ol.render.canvas.TextReplay.prototype.drawText=function(a,b,c,d,e,f){if(this.text_===""||goog.isNull(this.textState_)||goog.isNull(this.textFillState_)&&goog.isNull(this.textStrokeState_)){return}if(!goog.isNull(this.textFillState_)){this.setReplayFillState_(this.textFillState_)}if(!goog.isNull(this.textStrokeState_)){this.setReplayStrokeState_(this.textStrokeState_)}this.setReplayTextState_(this.textState_);this.beginGeometry(e,f);var g=this.coordinates.length;var h=this.appendFlatCoordinates(a,b,c,d,false);var i=!goog.isNull(this.textFillState_);var j=!goog.isNull(this.textStrokeState_);var k=[ol.render.canvas.Instruction.DRAW_TEXT,g,h,this.text_,this.textOffsetX_,this.textOffsetY_,this.textRotation_,this.textScale_,i,j];this.instructions.push(k);this.hitDetectionInstructions.push(k);this.endGeometry(e,f)};ol.render.canvas.TextReplay.prototype.setReplayFillState_=function(a){var b=this.replayFillState_;if(!goog.isNull(b)&&b.fillStyle==a.fillStyle){return}var c=[ol.render.canvas.Instruction.SET_FILL_STYLE,a.fillStyle];this.instructions.push(c);this.hitDetectionInstructions.push(c);if(goog.isNull(b)){this.replayFillState_={fillStyle:a.fillStyle}}else{b.fillStyle=a.fillStyle}};ol.render.canvas.TextReplay.prototype.setReplayStrokeState_=function(a){var b=this.replayStrokeState_;if(!goog.isNull(b)&&b.lineCap==a.lineCap&&b.lineDash==a.lineDash&&b.lineJoin==a.lineJoin&&b.lineWidth==a.lineWidth&&b.miterLimit==a.miterLimit&&b.strokeStyle==a.strokeStyle){return}var c=[ol.render.canvas.Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,a.lineDash,false];this.instructions.push(c);this.hitDetectionInstructions.push(c);if(goog.isNull(b)){this.replayStrokeState_={lineCap:a.lineCap,lineDash:a.lineDash,lineJoin:a.lineJoin,lineWidth:a.lineWidth,miterLimit:a.miterLimit,strokeStyle:a.strokeStyle}}else{b.lineCap=a.lineCap;b.lineDash=a.lineDash;b.lineJoin=a.lineJoin;b.lineWidth=a.lineWidth;b.miterLimit=a.miterLimit;b.strokeStyle=a.strokeStyle}};ol.render.canvas.TextReplay.prototype.setReplayTextState_=function(a){var b=this.replayTextState_;if(!goog.isNull(b)&&b.font==a.font&&b.textAlign==a.textAlign&&b.textBaseline==a.textBaseline){return}var c=[ol.render.canvas.Instruction.SET_TEXT_STYLE,a.font,a.textAlign,a.textBaseline];this.instructions.push(c);this.hitDetectionInstructions.push(c);if(goog.isNull(b)){this.replayTextState_={font:a.font,textAlign:a.textAlign,textBaseline:a.textBaseline}}else{b.font=a.font;b.textAlign=a.textAlign;b.textBaseline=a.textBaseline}};ol.render.canvas.TextReplay.prototype.setTextStyle=function(a){if(goog.isNull(a)){this.text_=""}else{var b=a.getFill();if(goog.isNull(b)){this.textFillState_=null}else{var c=b.getColor();var d=ol.color.asString(!goog.isNull(c)?c:ol.render.canvas.defaultFillStyle);if(goog.isNull(this.textFillState_)){this.textFillState_={fillStyle:d}}else{var e=this.textFillState_;e.fillStyle=d}}var f=a.getStroke();if(goog.isNull(f)){this.textStrokeState_=null}else{var g=f.getColor();var h=f.getLineCap();var i=f.getLineDash();var j=f.getLineJoin();var k=f.getWidth();var l=f.getMiterLimit();var m=goog.isDef(h)?h:ol.render.canvas.defaultLineCap;var n=goog.isDefAndNotNull(i)?i.slice():ol.render.canvas.defaultLineDash;var o=goog.isDef(j)?j:ol.render.canvas.defaultLineJoin;var p=goog.isDef(k)?k:ol.render.canvas.defaultLineWidth;var q=goog.isDef(l)?l:ol.render.canvas.defaultMiterLimit;var r=ol.color.asString(!goog.isNull(g)?g:ol.render.canvas.defaultStrokeStyle);if(goog.isNull(this.textStrokeState_)){this.textStrokeState_={lineCap:m,lineDash:n,lineJoin:o,lineWidth:p,miterLimit:q,strokeStyle:r}}else{var s=this.textStrokeState_;s.lineCap=m;s.lineDash=n;s.lineJoin=o;s.lineWidth=p;s.miterLimit=q;s.strokeStyle=r}}var t=a.getFont();var u=a.getOffsetX();var v=a.getOffsetY();var w=a.getRotation();var x=a.getScale();var y=a.getText();var z=a.getTextAlign();var A=a.getTextBaseline();var B=goog.isDef(t)?t:ol.render.canvas.defaultFont;var C=goog.isDef(z)?z:ol.render.canvas.defaultTextAlign;var D=goog.isDef(A)?A:ol.render.canvas.defaultTextBaseline;if(goog.isNull(this.textState_)){this.textState_={font:B,textAlign:C,textBaseline:D}}else{var E=this.textState_;E.font=B;E.textAlign=C;E.textBaseline=D}this.text_=goog.isDef(y)?y:"";this.textOffsetX_=goog.isDef(u)?u:0;this.textOffsetY_=goog.isDef(v)?v:0;this.textRotation_=goog.isDef(w)?w:0;this.textScale_=goog.isDef(x)?x:1}};ol.render.canvas.ReplayGroup=function(a,b,c,d){this.tolerance_=a;this.maxExtent_=b;this.resolution_=c;this.renderBuffer_=d;this.replaysByZIndex_={};this.hitDetectionContext_=ol.dom.createCanvasContext2D(1,1);this.hitDetectionTransform_=goog.vec.Mat4.createNumber()};ol.render.canvas.ReplayGroup.prototype.finish=function(){var a;for(a in this.replaysByZIndex_){var b=this.replaysByZIndex_[a];var c;for(c in b){b[c].finish()}}};ol.render.canvas.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(a,b,c,d,e){var f=this.hitDetectionTransform_;ol.vec.Mat4.makeTransform2D(f,.5,.5,1/b,-1/b,-c,-a[0],-a[1]);var g=this.hitDetectionContext_;g.clearRect(0,0,1,1);var h;if(goog.isDef(this.renderBuffer_)){h=ol.extent.createEmpty();ol.extent.extendCoordinate(h,a);ol.extent.buffer(h,b*this.renderBuffer_,h)}return this.replayHitDetection_(g,f,c,d,function(a){var b=g.getImageData(0,0,1,1).data;if(b[3]>0){var c=e(a);if(c){return c}g.clearRect(0,0,1,1)}},h)};ol.render.canvas.ReplayGroup.prototype.getReplay=function(a,b){var c=goog.isDef(a)?a.toString():"0";var d=this.replaysByZIndex_[c];if(!goog.isDef(d)){d={};this.replaysByZIndex_[c]=d}var e=d[b];if(!goog.isDef(e)){var f=ol.render.canvas.BATCH_CONSTRUCTORS_[b];goog.asserts.assert(goog.isDef(f),b+" constructor missing from ol.render.canvas.BATCH_CONSTRUCTORS_");e=new f(this.tolerance_,this.maxExtent_,this.resolution_);d[b]=e}return e};ol.render.canvas.ReplayGroup.prototype.isEmpty=function(){return goog.object.isEmpty(this.replaysByZIndex_)};ol.render.canvas.ReplayGroup.prototype.replay=function(a,b,c,d,e){var f=goog.array.map(goog.object.getKeys(this.replaysByZIndex_),Number);goog.array.sort(f);var g=this.maxExtent_;var h=g[0];var i=g[1];var j=g[2];var k=g[3];var l=[h,i,h,k,j,k,j,i];ol.geom.flat.transform.transform2D(l,0,8,2,c,l);a.save();a.beginPath();a.moveTo(l[0],l[1]);a.lineTo(l[2],l[3]);a.lineTo(l[4],l[5]);a.lineTo(l[6],l[7]);a.closePath();a.clip();var m,n,o,p,q,r,s;for(m=0,n=f.length;m<n;++m){q=this.replaysByZIndex_[f[m].toString()];for(o=0,p=ol.render.REPLAY_ORDER.length;o<p;++o){r=q[ol.render.REPLAY_ORDER[o]];if(goog.isDef(r)){r.replay(a,b,c,d,e)}}}a.restore()};ol.render.canvas.ReplayGroup.prototype.replayHitDetection_=function(a,b,c,d,e,f){var g=goog.array.map(goog.object.getKeys(this.replaysByZIndex_),Number);goog.array.sort(g,function(a,b){return b-a});var h,i,j,k,l,m;for(h=0,i=g.length;h<i;++h){k=this.replaysByZIndex_[g[h].toString()];for(j=ol.render.REPLAY_ORDER.length-1;j>=0;--j){l=k[ol.render.REPLAY_ORDER[j]];if(goog.isDef(l)){m=l.replayHitDetection(a,b,c,d,e,f);if(m){return m}}}}return undefined};ol.render.canvas.BATCH_CONSTRUCTORS_={Image:ol.render.canvas.ImageReplay,LineString:ol.render.canvas.LineStringReplay,Polygon:ol.render.canvas.PolygonReplay,Text:ol.render.canvas.TextReplay};goog.provide("ol.geom.Circle");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.deflate");goog.require("ol.proj");ol.geom.Circle=function(a,b,c){goog.base(this);var d=goog.isDef(b)?b:0;this.setCenterAndRadius(a,d,c)};goog.inherits(ol.geom.Circle,ol.geom.SimpleGeometry);ol.geom.Circle.prototype.clone=function(){var a=new ol.geom.Circle(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return a};ol.geom.Circle.prototype.closestPointXY=function(a,b,c,d){var e=this.flatCoordinates;var f=a-e[0];var g=b-e[1];var h=f*f+g*g;if(h<d){var i;if(h===0){for(i=0;i<this.stride;++i){c[i]=e[i]}}else{var j=this.getRadius()/Math.sqrt(h);c[0]=e[0]+j*f;c[1]=e[1]+j*g;for(i=2;i<this.stride;++i){c[i]=e[i]}}c.length=this.stride;return h}else{return d}};ol.geom.Circle.prototype.containsXY=function(a,b){var c=this.flatCoordinates;var d=a-c[0];var e=b-c[1];return d*d+e*e<=this.getRadiusSquared_()};ol.geom.Circle.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)};ol.geom.Circle.prototype.computeExtent=function(a){var b=this.flatCoordinates;var c=b[this.stride]-b[0];return ol.extent.createOrUpdate(b[0]-c,b[1]-c,b[0]+c,b[1]+c,a)};ol.geom.Circle.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())};ol.geom.Circle.prototype.getRadiusSquared_=function(){var a=this.flatCoordinates[this.stride]-this.flatCoordinates[0];var b=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return a*a+b*b};ol.geom.Circle.prototype.getType=function(){return ol.geom.GeometryType.CIRCLE};ol.geom.Circle.prototype.intersectsExtent=function(a){var b=this.getExtent();if(ol.extent.intersects(a,b)){var c=this.getCenter();if(a[0]<=c[0]&&a[2]>=c[0]){return true}if(a[1]<=c[1]&&a[3]>=c[1]){return true}return ol.extent.forEachCorner(a,this.containsCoordinate,this)}return false};ol.geom.Circle.prototype.setCenter=function(a){var b=this.stride;goog.asserts.assert(a.length==b,"center array length should match stride");var c=this.flatCoordinates[b]-this.flatCoordinates[0];var d=a.slice();d[b]=d[0]+c;var e;for(e=1;e<b;++e){d[b+e]=a[e]}this.setFlatCoordinates(this.layout,d)};ol.geom.Circle.prototype.setCenterAndRadius=function(a,b,c){if(goog.isNull(a)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(c,a,0);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}var d=this.flatCoordinates;var e=ol.geom.flat.deflate.coordinate(d,0,a,this.stride);d[e++]=d[0]+b;var f,g;for(f=1,g=this.stride;f<g;++f){d[e++]=d[f]}d.length=e;this.changed()}};ol.geom.Circle.prototype.setFlatCoordinates=function(a,b){this.setFlatCoordinatesInternal(a,b);this.changed()};ol.geom.Circle.prototype.setRadius=function(a){goog.asserts.assert(!goog.isNull(this.flatCoordinates),"this.flatCoordinates cannot be null");this.flatCoordinates[this.stride]=this.flatCoordinates[0]+a;this.changed()};ol.geom.Circle.prototype.transform;goog.provide("ol.geom.GeometryCollection");goog.require("goog.array");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.extent");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryType");ol.geom.GeometryCollection=function(a){goog.base(this);this.geometries_=goog.isDef(a)?a:null;this.listenGeometriesChange_()};goog.inherits(ol.geom.GeometryCollection,ol.geom.Geometry);ol.geom.GeometryCollection.cloneGeometries_=function(a){var b=[];var c,d;for(c=0,d=a.length;c<d;++c){b.push(a[c].clone())}return b};ol.geom.GeometryCollection.prototype.unlistenGeometriesChange_=function(){var a,b;if(goog.isNull(this.geometries_)){return}for(a=0,b=this.geometries_.length;a<b;++a){goog.events.unlisten(this.geometries_[a],goog.events.EventType.CHANGE,this.changed,false,this)}};ol.geom.GeometryCollection.prototype.listenGeometriesChange_=function(){var a,b;if(goog.isNull(this.geometries_)){return}for(a=0,b=this.geometries_.length;a<b;++a){goog.events.listen(this.geometries_[a],goog.events.EventType.CHANGE,this.changed,false,this)}};ol.geom.GeometryCollection.prototype.clone=function(){var a=new ol.geom.GeometryCollection(null);a.setGeometries(this.geometries_);return a};ol.geom.GeometryCollection.prototype.closestPointXY=function(a,b,c,d){if(d<ol.extent.closestSquaredDistanceXY(this.getExtent(),a,b)){return d}var e=this.geometries_;var f,g;for(f=0,g=e.length;f<g;++f){d=e[f].closestPointXY(a,b,c,d)}return d};ol.geom.GeometryCollection.prototype.containsXY=function(a,b){var c=this.geometries_;var d,e;for(d=0,e=c.length;d<e;++d){if(c[d].containsXY(a,b)){return true}}return false};ol.geom.GeometryCollection.prototype.computeExtent=function(a){ol.extent.createOrUpdateEmpty(a);var b=this.geometries_;for(var c=0,d=b.length;c<d;++c){ol.extent.extend(a,b[c].getExtent())}return a};ol.geom.GeometryCollection.prototype.getGeometries=function(){return ol.geom.GeometryCollection.cloneGeometries_(this.geometries_)};ol.geom.GeometryCollection.prototype.getGeometriesArray=function(){return this.geometries_};ol.geom.GeometryCollection.prototype.getSimplifiedGeometry=function(a){if(this.simplifiedGeometryRevision!=this.getRevision()){goog.object.clear(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(a<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&a<this.simplifiedGeometryMaxMinSquaredTolerance){return this}var b=a.toString();if(this.simplifiedGeometryCache.hasOwnProperty(b)){return this.simplifiedGeometryCache[b]}else{var c=[];var d=this.geometries_;var e=false;var f,g;for(f=0,g=d.length;f<g;++f){var h=d[f];var i=h.getSimplifiedGeometry(a);c.push(i);if(i!==h){e=true}}if(e){var j=new ol.geom.GeometryCollection(null);j.setGeometriesArray(c);this.simplifiedGeometryCache[b]=j;return j}else{this.simplifiedGeometryMaxMinSquaredTolerance=a;return this}}};ol.geom.GeometryCollection.prototype.getType=function(){return ol.geom.GeometryType.GEOMETRY_COLLECTION};ol.geom.GeometryCollection.prototype.intersectsExtent=function(a){var b=this.geometries_;var c,d;for(c=0,d=b.length;c<d;++c){if(b[c].intersectsExtent(a)){return true}}return false};ol.geom.GeometryCollection.prototype.isEmpty=function(){return goog.array.isEmpty(this.geometries_)};ol.geom.GeometryCollection.prototype.setGeometries=function(a){this.setGeometriesArray(ol.geom.GeometryCollection.cloneGeometries_(a))};ol.geom.GeometryCollection.prototype.setGeometriesArray=function(a){this.unlistenGeometriesChange_();this.geometries_=a;this.listenGeometriesChange_();this.changed()};ol.geom.GeometryCollection.prototype.applyTransform=function(a){var b=this.geometries_;var c,d;for(c=0,d=b.length;c<d;++c){b[c].applyTransform(a)}this.changed()};ol.geom.GeometryCollection.prototype.translate=function(a,b){var c=this.geometries_;var d,e;for(d=0,e=c.length;d<e;++d){c[d].translate(a,b)}this.changed()};ol.geom.GeometryCollection.prototype.disposeInternal=function(){this.unlistenGeometriesChange_();goog.base(this,"disposeInternal")};goog.provide("ol.geom.flat.interpolate");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");ol.geom.flat.interpolate.lineString=function(a,b,c,d,e,f){goog.asserts.assert(0<=e&&e<=1,"fraction should be in between 0 and 1");var g=NaN;var h=NaN;var i=(c-b)/d;if(i===0){goog.asserts.fail("n cannot be 0")}else if(i==1){g=a[b];h=a[b+1]}else if(i==2){g=(1-e)*a[b]+e*a[b+d];h=(1-e)*a[b+1]+e*a[b+d+1]}else{var j=a[b];var k=a[b+1];var l=0;var m=[0];var n;for(n=b+d;n<c;n+=d){var o=a[n];var p=a[n+1];l+=Math.sqrt((o-j)*(o-j)+(p-k)*(p-k));m.push(l);j=o;k=p}var q=e*l;var r=goog.array.binarySearch(m,q);if(r<0){var s=(q-m[-r-2])/(m[-r-1]-m[-r-2]);var t=b+(-r-2)*d;g=goog.math.lerp(a[t],a[t+d],s);h=goog.math.lerp(a[t+1],a[t+d+1],s)}else{g=a[b+r*d];h=a[b+r*d+1]}}if(goog.isDefAndNotNull(f)){f[0]=g;f[1]=h;return f}else{return[g,h]}};ol.geom.flat.lineStringCoordinateAtM=function(a,b,c,d,e,f){if(c==b){return null}var g;if(e<a[b+d-1]){if(f){g=a.slice(b,b+d);g[d-1]=e;return g}else{return null}}else if(a[c-1]<e){if(f){g=a.slice(c-d,c);g[d-1]=e;return g}else{return null}}if(e==a[b+d-1]){return a.slice(b,b+d)}var h=b/d;var i=c/d;while(h<i){var j=h+i>>1;if(e<a[(j+1)*d-1]){i=j}else{h=j+1}}var k=a[h*d-1];if(e==k){return a.slice((h-1)*d,(h-1)*d+d)}var l=a[(h+1)*d-1];goog.asserts.assert(k<e,"m0 should be less than m");goog.asserts.assert(e<=l,"m should be less than or equal to m1");var m=(e-k)/(l-k);g=[];var n;for(n=0;n<d-1;++n){g.push(goog.math.lerp(a[(h-1)*d+n],a[h*d+n],m))}g.push(e);goog.asserts.assert(g.length==d,"length of coordinate array should match stride");return g};ol.geom.flat.lineStringsCoordinateAtM=function(a,b,c,d,e,f,g){if(g){return ol.geom.flat.lineStringCoordinateAtM(a,b,c[c.length-1],d,e,f)}var h;if(e<a[d-1]){if(f){h=a.slice(0,d);h[d-1]=e;return h}else{return null}}if(a[a.length-1]<e){if(f){h=a.slice(a.length-d);h[d-1]=e;return h}else{return null}}var i,j;for(i=0,j=c.length;i<j;++i){var k=c[i];if(b==k){continue}if(e<a[b+d-1]){return null}else if(e<=a[k-1]){return ol.geom.flat.lineStringCoordinateAtM(a,b,k,d,e,false)}b=k}goog.asserts.fail("ol.geom.flat.lineStringsCoordinateAtM should have returned");return null};goog.provide("ol.geom.flat.length");ol.geom.flat.length.lineString=function(a,b,c,d){var e=a[b];var f=a[b+1];var g=0;var h;for(h=b+d;h<c;h+=d){var i=a[h];var j=a[h+1];g+=Math.sqrt((i-e)*(i-e)+(j-f)*(j-f));e=i;f=j}return g};ol.geom.flat.length.linearRing=function(a,b,c,d){var e=ol.geom.flat.length.lineString(a,b,c,d);var f=a[c-d]-a[b];var g=a[c-d+1]-a[b+1];e+=Math.sqrt(f*f+g*g);return e};goog.provide("ol.geom.LineString");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interpolate");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.length");goog.require("ol.geom.flat.segments");goog.require("ol.geom.flat.simplify");ol.geom.LineString=function(a,b){goog.base(this);this.flatMidpoint_=null;this.flatMidpointRevision_=-1;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(a,b)};goog.inherits(ol.geom.LineString,ol.geom.SimpleGeometry);ol.geom.LineString.prototype.appendCoordinate=function(a){goog.asserts.assert(a.length==this.stride,"length of coordinate array should match stride");if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=a.slice()}else{goog.array.extend(this.flatCoordinates,a)}this.changed()};ol.geom.LineString.prototype.clone=function(){var a=new ol.geom.LineString(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return a};ol.geom.LineString.prototype.closestPointXY=function(a,b,c,d){if(d<ol.extent.closestSquaredDistanceXY(this.getExtent(),a,b)){return d}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,false,a,b,c,d)};ol.geom.LineString.prototype.forEachSegment=function(a,b){return ol.geom.flat.segments.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b)};ol.geom.LineString.prototype.getCoordinateAtM=function(a,b){if(this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM){return null}var c=goog.isDef(b)?b:false;return ol.geom.flat.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,c)};ol.geom.LineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LineString.prototype.getLength=function(){return ol.geom.flat.length.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LineString.prototype.getFlatMidpoint=function(){if(this.flatMidpointRevision_!=this.getRevision()){this.flatMidpoint_=ol.geom.flat.interpolate.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,.5,this.flatMidpoint_);this.flatMidpointRevision_=this.getRevision()}return this.flatMidpoint_};ol.geom.LineString.prototype.getSimplifiedGeometryInternal=function(a){var b=[];b.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b,0);var c=new ol.geom.LineString(null);c.setFlatCoordinates(ol.geom.GeometryLayout.XY,b);return c};ol.geom.LineString.prototype.getType=function(){return ol.geom.GeometryType.LINE_STRING};ol.geom.LineString.prototype.intersectsExtent=function(a){return ol.geom.flat.intersectsextent.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a)};ol.geom.LineString.prototype.setCoordinates=function(a,b){if(goog.isNull(a)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(b,a,1);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,a,this.stride);this.changed()}};ol.geom.LineString.prototype.setFlatCoordinates=function(a,b){this.setFlatCoordinatesInternal(a,b);this.changed()};goog.provide("ol.geom.MultiLineString");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interpolate");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.simplify");ol.geom.MultiLineString=function(a,b){goog.base(this);this.ends_=[];this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(a,b)};goog.inherits(ol.geom.MultiLineString,ol.geom.SimpleGeometry);ol.geom.MultiLineString.prototype.appendLineString=function(a){goog.asserts.assert(a.getLayout()==this.layout,"layout of lineString should match the layout");if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=a.getFlatCoordinates().slice()}else{goog.array.extend(this.flatCoordinates,a.getFlatCoordinates().slice())}this.ends_.push(this.flatCoordinates.length);this.changed()};ol.geom.MultiLineString.prototype.clone=function(){var a=new ol.geom.MultiLineString(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return a};ol.geom.MultiLineString.prototype.closestPointXY=function(a,b,c,d){if(d<ol.extent.closestSquaredDistanceXY(this.getExtent(),a,b)){return d}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,false,a,b,c,d)};ol.geom.MultiLineString.prototype.getCoordinateAtM=function(a,b,c){if(this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM||this.flatCoordinates.length===0){return null}var d=goog.isDef(b)?b:false;var e=goog.isDef(c)?c:false;return ol.geom.flat.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,a,d,e)};ol.geom.MultiLineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)};ol.geom.MultiLineString.prototype.getEnds=function(){return this.ends_};ol.geom.MultiLineString.prototype.getLineString=function(a){goog.asserts.assert(0<=a&&a<this.ends_.length,"index should be in between 0 and length of the this.ends_ array");if(a<0||this.ends_.length<=a){return null}var b=new ol.geom.LineString(null);b.setFlatCoordinates(this.layout,this.flatCoordinates.slice(a===0?0:this.ends_[a-1],this.ends_[a]));return b};ol.geom.MultiLineString.prototype.getLineStrings=function(){var a=this.flatCoordinates;var b=this.ends_;var c=this.layout;var d=[];var e=0;var f,g;for(f=0,g=b.length;f<g;++f){var h=b[f];var i=new ol.geom.LineString(null);i.setFlatCoordinates(c,a.slice(e,h));d.push(i);e=h}return d};ol.geom.MultiLineString.prototype.getFlatMidpoints=function(){var a=[];var b=this.flatCoordinates;var c=0;var d=this.ends_;var e=this.stride;var f,g;for(f=0,g=d.length;f<g;++f){var h=d[f];var i=ol.geom.flat.interpolate.lineString(b,c,h,e,.5);goog.array.extend(a,i);c=h}return a};ol.geom.MultiLineString.prototype.getSimplifiedGeometryInternal=function(a){var b=[];var c=[];b.length=ol.geom.flat.simplify.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,a,b,0,c);var d=new ol.geom.MultiLineString(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XY,b,c);return d};ol.geom.MultiLineString.prototype.getType=function(){return ol.geom.GeometryType.MULTI_LINE_STRING};ol.geom.MultiLineString.prototype.intersectsExtent=function(a){return ol.geom.flat.intersectsextent.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,a)};ol.geom.MultiLineString.prototype.setCoordinates=function(a,b){if(goog.isNull(a)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_)}else{this.setLayout(b,a,2);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}var c=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,a,this.stride,this.ends_);this.flatCoordinates.length=c.length===0?0:c[c.length-1];this.changed()}};ol.geom.MultiLineString.prototype.setFlatCoordinates=function(a,b,c){if(goog.isNull(b)){goog.asserts.assert(!goog.isNull(c)&&c.length===0,"ends cannot be null and ends.length should be 0")}else if(c.length===0){goog.asserts.assert(b.length===0,"flatCoordinates should be an empty array")}else{goog.asserts.assert(b.length==c[c.length-1],"length of flatCoordinates array should match the last value of ends")}this.setFlatCoordinatesInternal(a,b);this.ends_=c;this.changed()};ol.geom.MultiLineString.prototype.setLineStrings=function(a){var b=ol.geom.GeometryLayout.XY;var c=[];var d=[];var e,f;for(e=0,f=a.length;e<f;++e){var g=a[e];if(e===0){b=g.getLayout()}else{
goog.asserts.assert(g.getLayout()==b,"layout of lineString should match layout")}goog.array.extend(c,g.getFlatCoordinates());d.push(c.length)}this.setFlatCoordinates(b,c,d)};goog.provide("ol.geom.MultiPoint");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.Point");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.math");ol.geom.MultiPoint=function(a,b){goog.base(this);this.setCoordinates(a,b)};goog.inherits(ol.geom.MultiPoint,ol.geom.SimpleGeometry);ol.geom.MultiPoint.prototype.appendPoint=function(a){goog.asserts.assert(a.getLayout()==this.layout,"the layout of point should match layout");if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=a.getFlatCoordinates().slice()}else{goog.array.extend(this.flatCoordinates,a.getFlatCoordinates())}this.changed()};ol.geom.MultiPoint.prototype.clone=function(){var a=new ol.geom.MultiPoint(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return a};ol.geom.MultiPoint.prototype.closestPointXY=function(a,b,c,d){if(d<ol.extent.closestSquaredDistanceXY(this.getExtent(),a,b)){return d}var e=this.flatCoordinates;var f=this.stride;var g,h,i;for(g=0,h=e.length;g<h;g+=f){var j=ol.math.squaredDistance(a,b,e[g],e[g+1]);if(j<d){d=j;for(i=0;i<f;++i){c[i]=e[g+i]}c.length=f}}return d};ol.geom.MultiPoint.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.MultiPoint.prototype.getPoint=function(a){var b=goog.isNull(this.flatCoordinates)?0:this.flatCoordinates.length/this.stride;goog.asserts.assert(0<=a&&a<b,"index should be in between 0 and n");if(a<0||b<=a){return null}var c=new ol.geom.Point(null);c.setFlatCoordinates(this.layout,this.flatCoordinates.slice(a*this.stride,(a+1)*this.stride));return c};ol.geom.MultiPoint.prototype.getPoints=function(){var a=this.flatCoordinates;var b=this.layout;var c=this.stride;var d=[];var e,f;for(e=0,f=a.length;e<f;e+=c){var g=new ol.geom.Point(null);g.setFlatCoordinates(b,a.slice(e,e+c));d.push(g)}return d};ol.geom.MultiPoint.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POINT};ol.geom.MultiPoint.prototype.intersectsExtent=function(a){var b=this.flatCoordinates;var c=this.stride;var d,e,f,g;for(d=0,e=b.length;d<e;d+=c){f=b[d];g=b[d+1];if(ol.extent.containsXY(a,f,g)){return true}}return false};ol.geom.MultiPoint.prototype.setCoordinates=function(a,b){if(goog.isNull(a)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(b,a,1);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,a,this.stride);this.changed()}};ol.geom.MultiPoint.prototype.setFlatCoordinates=function(a,b){this.setFlatCoordinatesInternal(a,b);this.changed()};goog.provide("ol.geom.flat.center");goog.require("ol.extent");ol.geom.flat.center.linearRingss=function(a,b,c,d){var e=[];var f,g;var h=ol.extent.createEmpty();for(f=0,g=c.length;f<g;++f){var i=c[f];h=ol.extent.createOrUpdateFromFlatCoordinates(a,b,i[0],d);e.push((h[0]+h[2])/2,(h[1]+h[3])/2);b=i[i.length-1]}return e};goog.provide("ol.geom.MultiPolygon");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.area");goog.require("ol.geom.flat.center");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.contains");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interiorpoint");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.orient");goog.require("ol.geom.flat.simplify");ol.geom.MultiPolygon=function(a,b){goog.base(this);this.endss_=[];this.flatInteriorPointsRevision_=-1;this.flatInteriorPoints_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(a,b)};goog.inherits(ol.geom.MultiPolygon,ol.geom.SimpleGeometry);ol.geom.MultiPolygon.prototype.appendPolygon=function(a){goog.asserts.assert(a.getLayout()==this.layout,"layout of polygon should match layout");var b;if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=a.getFlatCoordinates().slice();b=a.getEnds().slice();this.endss_.push()}else{var c=this.flatCoordinates.length;goog.array.extend(this.flatCoordinates,a.getFlatCoordinates());b=a.getEnds().slice();var d,e;for(d=0,e=b.length;d<e;++d){b[d]+=c}}this.endss_.push(b);this.changed()};ol.geom.MultiPolygon.prototype.clone=function(){var a=new ol.geom.MultiPolygon(null);var b=goog.object.unsafeClone(this.endss_);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),b);return a};ol.geom.MultiPolygon.prototype.closestPointXY=function(a,b,c,d){if(d<ol.extent.closestSquaredDistanceXY(this.getExtent(),a,b)){return d}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,true,a,b,c,d)};ol.geom.MultiPolygon.prototype.containsXY=function(a,b){return ol.geom.flat.contains.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a,b)};ol.geom.MultiPolygon.prototype.getArea=function(){return ol.geom.flat.area.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)};ol.geom.MultiPolygon.prototype.getCoordinates=function(a){var b;if(goog.isDef(a)){b=this.getOrientedFlatCoordinates().slice();ol.geom.flat.orient.orientLinearRingss(b,0,this.endss_,this.stride,a)}else{b=this.flatCoordinates}return ol.geom.flat.inflate.coordinatesss(b,0,this.endss_,this.stride)};ol.geom.MultiPolygon.prototype.getEndss=function(){return this.endss_};ol.geom.MultiPolygon.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var a=ol.geom.flat.center.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ol.geom.flat.interiorpoint.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a);this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_};ol.geom.MultiPolygon.prototype.getInteriorPoints=function(){var a=new ol.geom.MultiPoint(null);a.setFlatCoordinates(ol.geom.GeometryLayout.XY,this.getFlatInteriorPoints().slice());return a};ol.geom.MultiPolygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var a=this.flatCoordinates;if(ol.geom.flat.orient.linearRingssAreOriented(a,0,this.endss_,this.stride)){this.orientedFlatCoordinates_=a}else{this.orientedFlatCoordinates_=a.slice();this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};ol.geom.MultiPolygon.prototype.getSimplifiedGeometryInternal=function(a){var b=[];var c=[];b.length=ol.geom.flat.simplify.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(a),b,0,c);var d=new ol.geom.MultiPolygon(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XY,b,c);return d};ol.geom.MultiPolygon.prototype.getPolygon=function(a){goog.asserts.assert(0<=a&&a<this.endss_.length,"index should be in between 0 and the length of this.endss_");if(a<0||this.endss_.length<=a){return null}var b;if(a===0){b=0}else{var c=this.endss_[a-1];b=c[c.length-1]}var d=this.endss_[a].slice();var e=d[d.length-1];if(b!==0){var f,g;for(f=0,g=d.length;f<g;++f){d[f]-=b}}var h=new ol.geom.Polygon(null);h.setFlatCoordinates(this.layout,this.flatCoordinates.slice(b,e),d);return h};ol.geom.MultiPolygon.prototype.getPolygons=function(){var a=this.layout;var b=this.flatCoordinates;var c=this.endss_;var d=[];var e=0;var f,g,h,i;for(f=0,g=c.length;f<g;++f){var j=c[f].slice();var k=j[j.length-1];if(e!==0){for(h=0,i=j.length;h<i;++h){j[h]-=e}}var l=new ol.geom.Polygon(null);l.setFlatCoordinates(a,b.slice(e,k),j);d.push(l);e=k}return d};ol.geom.MultiPolygon.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POLYGON};ol.geom.MultiPolygon.prototype.intersectsExtent=function(a){return ol.geom.flat.intersectsextent.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a)};ol.geom.MultiPolygon.prototype.setCoordinates=function(a,b){if(goog.isNull(a)){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.endss_)}else{this.setLayout(b,a,3);if(goog.isNull(this.flatCoordinates)){this.flatCoordinates=[]}var c=ol.geom.flat.deflate.coordinatesss(this.flatCoordinates,0,a,this.stride,this.endss_);if(c.length===0){this.flatCoordinates.length=0}else{var d=c[c.length-1];this.flatCoordinates.length=d.length===0?0:d[d.length-1]}this.changed()}};ol.geom.MultiPolygon.prototype.setFlatCoordinates=function(a,b,c){goog.asserts.assert(!goog.isNull(c),"endss cannot be null");if(goog.isNull(b)||b.length===0){goog.asserts.assert(c.length===0,"the length of endss should be 0")}else{goog.asserts.assert(c.length>0,"endss cannot be an empty array");var d=c[c.length-1];goog.asserts.assert(b.length==d[d.length-1],"the length of flatCoordinates should be the last value of ends")}this.setFlatCoordinatesInternal(a,b);this.endss_=c;this.changed()};ol.geom.MultiPolygon.prototype.setPolygons=function(a){var b=ol.geom.GeometryLayout.XY;var c=[];var d=[];var e,f,g;for(e=0,f=a.length;e<f;++e){var h=a[e];if(e===0){b=h.getLayout()}else{goog.asserts.assert(h.getLayout()==b,"layout of polygon should be layout")}var i=c.length;g=h.getEnds();var j,k;for(j=0,k=g.length;j<k;++j){g[j]+=i}goog.array.extend(c,h.getFlatCoordinates());d.push(g)}this.setFlatCoordinates(b,c,d)};goog.provide("ol.renderer.vector");goog.require("goog.asserts");goog.require("ol.geom.Circle");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.render.IReplayGroup");goog.require("ol.style.ImageState");goog.require("ol.style.Style");ol.renderer.vector.defaultOrder=function(a,b){return goog.getUid(a)-goog.getUid(b)};ol.renderer.vector.getSquaredTolerance=function(a,b){var c=ol.renderer.vector.getTolerance(a,b);return c*c};ol.renderer.vector.getTolerance=function(a,b){return ol.SIMPLIFY_TOLERANCE*a/b};ol.renderer.vector.renderCircleGeometry_=function(a,b,c,d){goog.asserts.assertInstanceof(b,ol.geom.Circle,"geometry should be an ol.geom.Circle");var e=c.getFill();var f=c.getStroke();if(!goog.isNull(e)||!goog.isNull(f)){var g=a.getReplay(c.getZIndex(),ol.render.ReplayType.POLYGON);g.setFillStrokeStyle(e,f);g.drawCircleGeometry(b,d)}var h=c.getText();if(!goog.isNull(h)){var i=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);i.setTextStyle(h);i.drawText(b.getCenter(),0,2,2,b,d)}};ol.renderer.vector.renderFeature=function(a,b,c,d,e,f){var g=false;var h,i;h=c.getImage();if(!goog.isNull(h)){i=h.getImageState();if(i==ol.style.ImageState.LOADED||i==ol.style.ImageState.ERROR){h.unlistenImageChange(e,f)}else{if(i==ol.style.ImageState.IDLE){h.load()}i=h.getImageState();goog.asserts.assert(i==ol.style.ImageState.LOADING,"imageState should be LOADING");h.listenImageChange(e,f);g=true}}ol.renderer.vector.renderFeature_(a,b,c,d);return g};ol.renderer.vector.renderFeature_=function(a,b,c,d){var e=c.getGeometryFunction()(b);if(!goog.isDefAndNotNull(e)){return}var f=e.getSimplifiedGeometry(d);var g=ol.renderer.vector.GEOMETRY_RENDERERS_[f.getType()];goog.asserts.assert(goog.isDef(g),"geometryRenderer should be defined");g(a,f,c,b)};ol.renderer.vector.renderGeometryCollectionGeometry_=function(a,b,c,d){goog.asserts.assertInstanceof(b,ol.geom.GeometryCollection,"geometry should be an ol.geom.GeometryCollection");var e=b.getGeometriesArray();var f,g;for(f=0,g=e.length;f<g;++f){var h=ol.renderer.vector.GEOMETRY_RENDERERS_[e[f].getType()];goog.asserts.assert(goog.isDef(h),"geometryRenderer should be defined");h(a,e[f],c,d)}};ol.renderer.vector.renderLineStringGeometry_=function(a,b,c,d){goog.asserts.assertInstanceof(b,ol.geom.LineString,"geometry should be an ol.geom.LineString");var e=c.getStroke();if(!goog.isNull(e)){var f=a.getReplay(c.getZIndex(),ol.render.ReplayType.LINE_STRING);f.setFillStrokeStyle(null,e);f.drawLineStringGeometry(b,d)}var g=c.getText();if(!goog.isNull(g)){var h=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);h.setTextStyle(g);h.drawText(b.getFlatMidpoint(),0,2,2,b,d)}};ol.renderer.vector.renderMultiLineStringGeometry_=function(a,b,c,d){goog.asserts.assertInstanceof(b,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");var e=c.getStroke();if(!goog.isNull(e)){var f=a.getReplay(c.getZIndex(),ol.render.ReplayType.LINE_STRING);f.setFillStrokeStyle(null,e);f.drawMultiLineStringGeometry(b,d)}var g=c.getText();if(!goog.isNull(g)){var h=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);h.setTextStyle(g);var i=b.getFlatMidpoints();h.drawText(i,0,i.length,2,b,d)}};ol.renderer.vector.renderMultiPolygonGeometry_=function(a,b,c,d){goog.asserts.assertInstanceof(b,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");var e=c.getFill();var f=c.getStroke();if(!goog.isNull(f)||!goog.isNull(e)){var g=a.getReplay(c.getZIndex(),ol.render.ReplayType.POLYGON);g.setFillStrokeStyle(e,f);g.drawMultiPolygonGeometry(b,d)}var h=c.getText();if(!goog.isNull(h)){var i=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);i.setTextStyle(h);var j=b.getFlatInteriorPoints();i.drawText(j,0,j.length,2,b,d)}};ol.renderer.vector.renderPointGeometry_=function(a,b,c,d){goog.asserts.assertInstanceof(b,ol.geom.Point,"geometry should be an ol.geom.Point");var e=c.getImage();if(!goog.isNull(e)){if(e.getImageState()!=ol.style.ImageState.LOADED){return}var f=a.getReplay(c.getZIndex(),ol.render.ReplayType.IMAGE);f.setImageStyle(e);f.drawPointGeometry(b,d)}var g=c.getText();if(!goog.isNull(g)){var h=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);h.setTextStyle(g);h.drawText(b.getCoordinates(),0,2,2,b,d)}};ol.renderer.vector.renderMultiPointGeometry_=function(a,b,c,d){goog.asserts.assertInstanceof(b,ol.geom.MultiPoint,"geometry should be an ol.goem.MultiPoint");var e=c.getImage();if(!goog.isNull(e)){if(e.getImageState()!=ol.style.ImageState.LOADED){return}var f=a.getReplay(c.getZIndex(),ol.render.ReplayType.IMAGE);f.setImageStyle(e);f.drawMultiPointGeometry(b,d)}var g=c.getText();if(!goog.isNull(g)){var h=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);h.setTextStyle(g);var i=b.getFlatCoordinates();h.drawText(i,0,i.length,b.getStride(),b,d)}};ol.renderer.vector.renderPolygonGeometry_=function(a,b,c,d){goog.asserts.assertInstanceof(b,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");var e=c.getFill();var f=c.getStroke();if(!goog.isNull(e)||!goog.isNull(f)){var g=a.getReplay(c.getZIndex(),ol.render.ReplayType.POLYGON);g.setFillStrokeStyle(e,f);g.drawPolygonGeometry(b,d)}var h=c.getText();if(!goog.isNull(h)){var i=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);i.setTextStyle(h);i.drawText(b.getFlatInteriorPoint(),0,2,2,b,d)}};ol.renderer.vector.GEOMETRY_RENDERERS_={Point:ol.renderer.vector.renderPointGeometry_,LineString:ol.renderer.vector.renderLineStringGeometry_,Polygon:ol.renderer.vector.renderPolygonGeometry_,MultiPoint:ol.renderer.vector.renderMultiPointGeometry_,MultiLineString:ol.renderer.vector.renderMultiLineStringGeometry_,MultiPolygon:ol.renderer.vector.renderMultiPolygonGeometry_,GeometryCollection:ol.renderer.vector.renderGeometryCollectionGeometry_,Circle:ol.renderer.vector.renderCircleGeometry_};goog.provide("ol.ImageCanvas");goog.require("goog.asserts");goog.require("ol.ImageBase");goog.require("ol.ImageState");ol.ImageCanvas=function(a,b,c,d,e,f){this.loader_=goog.isDef(f)?f:null;var g=goog.isDef(f)?ol.ImageState.IDLE:ol.ImageState.LOADED;goog.base(this,a,b,c,g,d);this.canvas_=e;this.error_=null};goog.inherits(ol.ImageCanvas,ol.ImageBase);ol.ImageCanvas.prototype.getError=function(){return this.error_};ol.ImageCanvas.prototype.handleLoad_=function(a){if(a){this.error_=a;this.state=ol.ImageState.ERROR}else{this.state=ol.ImageState.LOADED}this.changed()};ol.ImageCanvas.prototype.load=function(){if(this.state==ol.ImageState.IDLE){goog.asserts.assert(!goog.isNull(this.loader_));this.state=ol.ImageState.LOADING;this.changed();this.loader_(goog.bind(this.handleLoad_,this))}};ol.ImageCanvas.prototype.getImage=function(a){return this.canvas_};ol.ImageCanvasLoader;goog.provide("ol.source.Image");goog.provide("ol.source.ImageEvent");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events.Event");goog.require("ol.Attribution");goog.require("ol.Extent");goog.require("ol.ImageState");goog.require("ol.array");goog.require("ol.source.Source");ol.source.ImageOptions;ol.source.Image=function(a){goog.base(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state});this.resolutions_=goog.isDef(a.resolutions)?a.resolutions:null;goog.asserts.assert(goog.isNull(this.resolutions_)||goog.array.isSorted(this.resolutions_,function(a,b){return b-a},true),"resolutions must be null or sorted in descending order")};goog.inherits(ol.source.Image,ol.source.Source);ol.source.Image.prototype.getResolutions=function(){return this.resolutions_};ol.source.Image.prototype.findNearestResolution=function(a){if(!goog.isNull(this.resolutions_)){var b=ol.array.linearFindNearest(this.resolutions_,a,0);a=this.resolutions_[b]}return a};ol.source.Image.prototype.getImage=goog.abstractMethod;ol.source.Image.prototype.handleImageChange=function(a){var b=a.target;switch(b.getState()){case ol.ImageState.LOADING:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADSTART,b));break;case ol.ImageState.LOADED:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADEND,b));break;case ol.ImageState.ERROR:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADERROR,b));break}};ol.source.Image.defaultImageLoadFunction=function(a,b){a.getImage().src=b};ol.source.ImageEvent=function(a,b){goog.base(this,a);this.image=b};goog.inherits(ol.source.ImageEvent,goog.events.Event);ol.source.ImageEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};goog.provide("ol.source.ImageCanvas");goog.require("ol.CanvasFunctionType");goog.require("ol.ImageCanvas");goog.require("ol.extent");goog.require("ol.source.Image");ol.source.ImageCanvas=function(a){goog.base(this,{attributions:a.attributions,logo:a.logo,projection:a.projection,resolutions:a.resolutions,state:goog.isDef(a.state)?a.state:undefined});this.canvasFunction_=a.canvasFunction;this.canvas_=null;this.renderedRevision_=0;this.ratio_=goog.isDef(a.ratio)?a.ratio:1.5};goog.inherits(ol.source.ImageCanvas,ol.source.Image);ol.source.ImageCanvas.prototype.getImage=function(a,b,c,d){b=this.findNearestResolution(b);var e=this.canvas_;if(!goog.isNull(e)&&this.renderedRevision_==this.getRevision()&&e.getResolution()==b&&e.getPixelRatio()==c&&ol.extent.containsExtent(e.getExtent(),a)){return e}a=a.slice();ol.extent.scaleFromCenter(a,this.ratio_);var f=ol.extent.getWidth(a)/b;var g=ol.extent.getHeight(a)/b;var h=[f*c,g*c];var i=this.canvasFunction_(a,b,c,h,d);if(!goog.isNull(i)){e=new ol.ImageCanvas(a,b,c,this.getAttributions(),i)}this.canvas_=e;this.renderedRevision_=this.getRevision();return e};goog.provide("ol.Feature");goog.provide("ol.FeatureStyleFunction");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("ol.Object");goog.require("ol.geom.Geometry");goog.require("ol.style.Style");ol.Feature=function(a){goog.base(this);this.id_=undefined;this.geometryName_="geometry";this.style_=null;this.styleFunction_=undefined;this.geometryChangeKey_=null;goog.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,false,this);if(goog.isDef(a)){if(a instanceof ol.geom.Geometry||goog.isNull(a)){var b=a;this.setGeometry(b)}else{goog.asserts.assert(goog.isObject(a),"opt_geometryOrProperties should be an Object");var c=a;this.setProperties(c)}}};goog.inherits(ol.Feature,ol.Object);ol.Feature.prototype.clone=function(){var a=new ol.Feature(this.getProperties());a.setGeometryName(this.getGeometryName());var b=this.getGeometry();if(goog.isDefAndNotNull(b)){a.setGeometry(b.clone())}var c=this.getStyle();if(!goog.isNull(c)){a.setStyle(c)}return a};ol.Feature.prototype.getGeometry=function(){return this.get(this.geometryName_)};ol.Feature.prototype.getId=function(){return this.id_};ol.Feature.prototype.getGeometryName=function(){return this.geometryName_};ol.Feature.prototype.getStyle=function(){return this.style_};ol.Feature.prototype.getStyleFunction=function(){return this.styleFunction_};ol.Feature.prototype.handleGeometryChange_=function(){this.changed()};ol.Feature.prototype.handleGeometryChanged_=function(){if(!goog.isNull(this.geometryChangeKey_)){goog.events.unlistenByKey(this.geometryChangeKey_);this.geometryChangeKey_=null}var a=this.getGeometry();if(goog.isDefAndNotNull(a)){this.geometryChangeKey_=goog.events.listen(a,goog.events.EventType.CHANGE,this.handleGeometryChange_,false,this)}this.changed()};ol.Feature.prototype.setGeometry=function(a){this.set(this.geometryName_,a)};ol.Feature.prototype.setStyle=function(a){this.style_=a;this.styleFunction_=goog.isNull(a)?undefined:ol.Feature.createStyleFunction(a);this.changed()};ol.Feature.prototype.setId=function(a){this.id_=a;this.changed()};ol.Feature.prototype.setGeometryName=function(a){goog.events.unlisten(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,false,this);this.geometryName_=a;goog.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,false,this);this.handleGeometryChanged_()};ol.FeatureStyleFunction;ol.Feature.createStyleFunction=function(a){var b;if(goog.isFunction(a)){b=a}else{var c;if(goog.isArray(a)){c=a}else{goog.asserts.assertInstanceof(a,ol.style.Style,"obj should be an ol.style.Style");c=[a]}b=goog.functions.constant(c)}return b};goog.provide("goog.net.EventType");goog.net.EventType={COMPLETE:"complete",SUCCESS:"success",ERROR:"error",ABORT:"abort",READY:"ready",READY_STATE_CHANGE:"readystatechange",TIMEOUT:"timeout",INCREMENTAL_DATA:"incrementaldata",PROGRESS:"progress"};goog.provide("goog.Thenable");goog.Thenable=function(){};goog.Thenable.prototype.then=function(a,b,c){};goog.Thenable.IMPLEMENTED_BY_PROP="$goog_Thenable";goog.Thenable.addImplementation=function(a){goog.exportProperty(a.prototype,"then",a.prototype.then);if(COMPILED){a.prototype[goog.Thenable.IMPLEMENTED_BY_PROP]=true}else{a.prototype.$goog_Thenable=true}};goog.Thenable.isImplementedBy=function(a){if(!a){return false}try{if(COMPILED){return!!a[goog.Thenable.IMPLEMENTED_BY_PROP]}return!!a.$goog_Thenable}catch(a){return false}};goog.provide("goog.async.FreeList");goog.async.FreeList=goog.defineClass(null,{constructor:function(a,b,c){this.limit_=c;this.create_=a;this.reset_=b;this.occupants_=0;this.head_=null},get:function(){var a;if(this.occupants_>0){this.occupants_--;a=this.head_;this.head_=a.next;a.next=null}else{a=this.create_()}return a},put:function(a){this.reset_(a);if(this.occupants_<this.limit_){this.occupants_++;a.next=this.head_;this.head_=a}},occupants:function(){return this.occupants_}});goog.provide("goog.async.WorkItem");goog.provide("goog.async.WorkQueue");goog.require("goog.asserts");goog.require("goog.async.FreeList");goog.async.WorkQueue=function(){this.workHead_=null;this.workTail_=null};goog.define("goog.async.WorkQueue.DEFAULT_MAX_UNUSED",100);goog.async.WorkQueue.freelist_=new goog.async.FreeList(function(){return new goog.async.WorkItem},function(a){a.reset()},goog.async.WorkQueue.DEFAULT_MAX_UNUSED);goog.async.WorkQueue.prototype.add=function(a,b){var c=this.getUnusedItem_();c.set(a,b);if(this.workTail_){this.workTail_.next=c;this.workTail_=c}else{goog.asserts.assert(!this.workHead_);this.workHead_=c;this.workTail_=c}};goog.async.WorkQueue.prototype.remove=function(){var a=null;if(this.workHead_){a=this.workHead_;this.workHead_=this.workHead_.next;if(!this.workHead_){this.workTail_=null}a.next=null}return a};goog.async.WorkQueue.prototype.returnUnused=function(a){goog.async.WorkQueue.freelist_.put(a)};goog.async.WorkQueue.prototype.getUnusedItem_=function(){return goog.async.WorkQueue.freelist_.get()};goog.async.WorkItem=function(){this.fn=null;this.scope=null;this.next=null};goog.async.WorkItem.prototype.set=function(a,b){this.fn=a;this.scope=b;this.next=null};goog.async.WorkItem.prototype.reset=function(){this.fn=null;this.scope=null;this.next=null};goog.provide("goog.testing.watchers");goog.testing.watchers.resetWatchers_=[];goog.testing.watchers.signalClockReset=function(){var a=goog.testing.watchers.resetWatchers_;for(var b=0;b<a.length;b++){goog.testing.watchers.resetWatchers_[b]()}};goog.testing.watchers.watchClockReset=function(a){goog.testing.watchers.resetWatchers_.push(a)};goog.provide("goog.async.run");goog.require("goog.async.WorkQueue");goog.require("goog.async.nextTick");goog.require("goog.async.throwException");goog.require("goog.testing.watchers");goog.async.run=function(a,b){if(!goog.async.run.schedule_){goog.async.run.initializeRunner_()}if(!goog.async.run.workQueueScheduled_){goog.async.run.schedule_();goog.async.run.workQueueScheduled_=true}goog.async.run.workQueue_.add(a,b)};goog.async.run.initializeRunner_=function(){if(goog.global.Promise&&goog.global.Promise.resolve){var a=goog.global.Promise.resolve(undefined);goog.async.run.schedule_=function(){a.then(goog.async.run.processWorkQueue)}}else{goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}}};goog.async.run.forceNextTick=function(a){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue);if(a){a(goog.async.run.processWorkQueue)}}};goog.async.run.schedule_;goog.async.run.workQueueScheduled_=false;goog.async.run.workQueue_=new goog.async.WorkQueue;if(goog.DEBUG){goog.async.run.resetQueue_=function(){goog.async.run.workQueueScheduled_=false;goog.async.run.workQueue_=new goog.async.WorkQueue};goog.testing.watchers.watchClockReset(goog.async.run.resetQueue_)}goog.async.run.processWorkQueue=function(){var a=null;while(a=goog.async.run.workQueue_.remove()){try{a.fn.call(a.scope)}catch(a){goog.async.throwException(a)}goog.async.run.workQueue_.returnUnused(a)}goog.async.run.workQueueScheduled_=false};goog.provide("goog.promise.Resolver");goog.promise.Resolver=function(){};goog.promise.Resolver.prototype.promise;goog.promise.Resolver.prototype.resolve;goog.promise.Resolver.prototype.reject;goog.provide("goog.Promise");goog.require("goog.Thenable");goog.require("goog.asserts");goog.require("goog.async.FreeList");goog.require("goog.async.run");goog.require("goog.async.throwException");goog.require("goog.debug.Error");goog.require("goog.promise.Resolver");goog.Promise=function(a,b){this.state_=goog.Promise.State_.PENDING;this.result_=undefined;this.parent_=null;this.callbackEntries_=null;this.callbackEntriesTail_=null;this.executing_=false;if(goog.Promise.UNHANDLED_REJECTION_DELAY>0){this.unhandledRejectionId_=0}else if(goog.Promise.UNHANDLED_REJECTION_DELAY==0){this.hadUnhandledRejection_=false}if(goog.Promise.LONG_STACK_TRACES){this.stack_=[];this.addStackTrace_(new Error("created"));this.currentStep_=0}if(a!=goog.nullFunction){try{var c=this;a.call(b,function(a){c.resolve_(goog.Promise.State_.FULFILLED,a)},function(a){if(goog.DEBUG&&!(a instanceof goog.Promise.CancellationError)){try{if(a instanceof Error){throw a}else{throw new Error("Promise rejected.")}}catch(a){}}c.resolve_(goog.Promise.State_.REJECTED,a)})}catch(a){this.resolve_(goog.Promise.State_.REJECTED,a)}}};goog.define("goog.Promise.LONG_STACK_TRACES",false);goog.define("goog.Promise.UNHANDLED_REJECTION_DELAY",0);goog.Promise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3};goog.Promise.CallbackEntry_=function(){this.child=null;this.onFulfilled=null;this.onRejected=null;this.context=null;this.next=null;this.always=false};goog.Promise.CallbackEntry_.prototype.reset=function(){this.child=null;this.onFulfilled=null;this.onRejected=null;this.context=null;this.always=false};goog.define("goog.Promise.DEFAULT_MAX_UNUSED",100);goog.Promise.freelist_=new goog.async.FreeList(function(){return new goog.Promise.CallbackEntry_},function(a){a.reset()},goog.Promise.DEFAULT_MAX_UNUSED);goog.Promise.getCallbackEntry_=function(a,b,c){var d=goog.Promise.freelist_.get();d.onFulfilled=a;d.onRejected=b;d.context=c;return d};goog.Promise.returnEntry_=function(a){goog.Promise.freelist_.put(a)};goog.Promise.resolve=function(a){if(a instanceof goog.Promise){return a}var b=new goog.Promise(goog.nullFunction);b.resolve_(goog.Promise.State_.FULFILLED,a);return b};goog.Promise.reject=function(a){return new goog.Promise(function(b,c){c(a)})};goog.Promise.resolveThen_=function(a,b,c){var d=goog.Promise.maybeThen_(a,b,c,null);if(!d){goog.async.run(goog.partial(b,a))}};goog.Promise.race=function(a){return new goog.Promise(function(b,c){if(!a.length){b(undefined)}for(var d=0,e;d<a.length;d++){e=a[d];goog.Promise.resolveThen_(e,b,c)}})};goog.Promise.all=function(a){return new goog.Promise(function(b,c){var d=a.length;var e=[];if(!d){b(e);return}var f=function(a,c){d--;e[a]=c;if(d==0){b(e)}};var g=function(a){c(a)};for(var h=0,i;h<a.length;h++){i=a[h];goog.Promise.resolveThen_(i,goog.partial(f,h),g)}})};goog.Promise.allSettled=function(a){return new goog.Promise(function(b,c){var d=a.length;var e=[];if(!d){b(e);return}var f=function(a,c,f){d--;e[a]=c?{fulfilled:true,value:f}:{fulfilled:false,reason:f};if(d==0){b(e)}};for(var g=0,h;g<a.length;g++){h=a[g];goog.Promise.resolveThen_(h,goog.partial(f,g,true),goog.partial(f,g,false))}})};goog.Promise.firstFulfilled=function(a){return new goog.Promise(function(b,c){var d=a.length;var e=[];if(!d){b(undefined);return}var f=function(a){b(a)};var g=function(a,b){d--;e[a]=b;if(d==0){c(e)}};for(var h=0,i;h<a.length;h++){i=a[h];goog.Promise.resolveThen_(i,f,goog.partial(g,h))}})};goog.Promise.withResolver=function(){var a,b;var c=new goog.Promise(function(c,d){a=c;b=d});return new goog.Promise.Resolver_(c,a,b)};goog.Promise.prototype.then=function(a,b,c){if(a!=null){goog.asserts.assertFunction(a,"opt_onFulfilled should be a function.")}if(b!=null){goog.asserts.assertFunction(b,"opt_onRejected should be a function. Did you pass opt_context "+"as the second argument instead of the third?")}if(goog.Promise.LONG_STACK_TRACES){this.addStackTrace_(new Error("then"))}return this.addChildPromise_(goog.isFunction(a)?a:null,goog.isFunction(b)?b:null,c)};goog.Thenable.addImplementation(goog.Promise);goog.Promise.prototype.thenVoid=function(a,b,c){if(a!=null){goog.asserts.assertFunction(a,"opt_onFulfilled should be a function.")}if(b!=null){goog.asserts.assertFunction(b,"opt_onRejected should be a function. Did you pass opt_context "+"as the second argument instead of the third?")}if(goog.Promise.LONG_STACK_TRACES){this.addStackTrace_(new Error("then"))}this.addCallbackEntry_(goog.Promise.getCallbackEntry_(a||goog.nullFunction,b||null,c))};goog.Promise.prototype.thenAlways=function(a,b){if(goog.Promise.LONG_STACK_TRACES){this.addStackTrace_(new Error("thenAlways"))}var c=goog.Promise.getCallbackEntry_(a,a,b);c.always=true;this.addCallbackEntry_(c);return this};goog.Promise.prototype.thenCatch=function(a,b){
if(goog.Promise.LONG_STACK_TRACES){this.addStackTrace_(new Error("thenCatch"))}return this.addChildPromise_(null,a,b)};goog.Promise.prototype.cancel=function(a){if(this.state_==goog.Promise.State_.PENDING){goog.async.run(function(){var b=new goog.Promise.CancellationError(a);this.cancelInternal_(b)},this)}};goog.Promise.prototype.cancelInternal_=function(a){if(this.state_==goog.Promise.State_.PENDING){if(this.parent_){this.parent_.cancelChild_(this,a);this.parent_=null}else{this.resolve_(goog.Promise.State_.REJECTED,a)}}};goog.Promise.prototype.cancelChild_=function(a,b){if(!this.callbackEntries_){return}var c=0;var d=null;var e=null;for(var f=this.callbackEntries_;f;f=f.next){if(!f.always){c++;if(f.child==a){d=f}if(d&&c>1){break}}if(!d){e=f}}if(d){if(this.state_==goog.Promise.State_.PENDING&&c==1){this.cancelInternal_(b)}else{if(e){this.removeEntryAfter_(e)}else{this.popEntry_()}this.executeCallback_(d,goog.Promise.State_.REJECTED,b)}}};goog.Promise.prototype.addCallbackEntry_=function(a){if(!this.hasEntry_()&&(this.state_==goog.Promise.State_.FULFILLED||this.state_==goog.Promise.State_.REJECTED)){this.scheduleCallbacks_()}this.queueEntry_(a)};goog.Promise.prototype.addChildPromise_=function(a,b,c){var d=goog.Promise.getCallbackEntry_(null,null,null);d.child=new goog.Promise(function(e,f){d.onFulfilled=a?function(b){try{var d=a.call(c,b);e(d)}catch(a){f(a)}}:e;d.onRejected=b?function(a){try{var d=b.call(c,a);if(!goog.isDef(d)&&a instanceof goog.Promise.CancellationError){f(a)}else{e(d)}}catch(a){f(a)}}:f});d.child.parent_=this;this.addCallbackEntry_(d);return d.child};goog.Promise.prototype.unblockAndFulfill_=function(a){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED);this.state_=goog.Promise.State_.PENDING;this.resolve_(goog.Promise.State_.FULFILLED,a)};goog.Promise.prototype.unblockAndReject_=function(a){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED);this.state_=goog.Promise.State_.PENDING;this.resolve_(goog.Promise.State_.REJECTED,a)};goog.Promise.prototype.resolve_=function(a,b){if(this.state_!=goog.Promise.State_.PENDING){return}if(this==b){a=goog.Promise.State_.REJECTED;b=new TypeError("Promise cannot resolve to itself")}this.state_=goog.Promise.State_.BLOCKED;var c=goog.Promise.maybeThen_(b,this.unblockAndFulfill_,this.unblockAndReject_,this);if(c){return}this.result_=b;this.state_=a;this.parent_=null;this.scheduleCallbacks_();if(a==goog.Promise.State_.REJECTED&&!(b instanceof goog.Promise.CancellationError)){goog.Promise.addUnhandledRejection_(this,b)}};goog.Promise.maybeThen_=function(a,b,c,d){if(a instanceof goog.Promise){a.thenVoid(b,c,d);return true}else if(goog.Thenable.isImplementedBy(a)){a=a;a.then(b,c,d);return true}else if(goog.isObject(a)){try{var e=a["then"];if(goog.isFunction(e)){goog.Promise.tryThen_(a,e,b,c,d);return true}}catch(a){c.call(d,a);return true}}return false};goog.Promise.tryThen_=function(a,b,c,d,e){var f=false;var g=function(a){if(!f){f=true;c.call(e,a)}};var h=function(a){if(!f){f=true;d.call(e,a)}};try{b.call(a,g,h)}catch(a){h(a)}};goog.Promise.prototype.scheduleCallbacks_=function(){if(!this.executing_){this.executing_=true;goog.async.run(this.executeCallbacks_,this)}};goog.Promise.prototype.hasEntry_=function(){return!!this.callbackEntries_};goog.Promise.prototype.queueEntry_=function(a){goog.asserts.assert(a.onFulfilled!=null);if(this.callbackEntriesTail_){this.callbackEntriesTail_.next=a;this.callbackEntriesTail_=a}else{this.callbackEntries_=a;this.callbackEntriesTail_=a}};goog.Promise.prototype.popEntry_=function(){var a=null;if(this.callbackEntries_){a=this.callbackEntries_;this.callbackEntries_=a.next;a.next=null}if(!this.callbackEntries_){this.callbackEntriesTail_=null}if(a!=null){goog.asserts.assert(a.onFulfilled!=null)}return a};goog.Promise.prototype.removeEntryAfter_=function(a){goog.asserts.assert(this.callbackEntries_);goog.asserts.assert(a!=null);if(a.next==this.callbackEntriesTail_){this.callbackEntriesTail_=a}a.next=a.next.next};goog.Promise.prototype.executeCallbacks_=function(){var a=null;while(a=this.popEntry_()){if(goog.Promise.LONG_STACK_TRACES){this.currentStep_++}this.executeCallback_(a,this.state_,this.result_)}this.executing_=false};goog.Promise.prototype.executeCallback_=function(a,b,c){if(b==goog.Promise.State_.REJECTED&&a.onRejected&&!a.always){this.removeUnhandledRejection_()}if(a.child){a.child.parent_=null;goog.Promise.invokeCallback_(a,b,c)}else{try{a.always?a.onFulfilled.call(a.context):goog.Promise.invokeCallback_(a,b,c)}catch(a){goog.Promise.handleRejection_.call(null,a)}}goog.Promise.returnEntry_(a)};goog.Promise.invokeCallback_=function(a,b,c){if(b==goog.Promise.State_.FULFILLED){a.onFulfilled.call(a.context,c)}else if(a.onRejected){a.onRejected.call(a.context,c)}};goog.Promise.prototype.addStackTrace_=function(a){if(goog.Promise.LONG_STACK_TRACES&&goog.isString(a.stack)){var b=a.stack.split("\n",4)[3];var c=a.message;c+=Array(11-c.length).join(" ");this.stack_.push(c+b)}};goog.Promise.prototype.appendLongStack_=function(a){if(goog.Promise.LONG_STACK_TRACES&&a&&goog.isString(a.stack)&&this.stack_.length){var b=["Promise trace:"];for(var c=this;c;c=c.parent_){for(var d=this.currentStep_;d>=0;d--){b.push(c.stack_[d])}b.push("Value: "+"["+(c.state_==goog.Promise.State_.REJECTED?"REJECTED":"FULFILLED")+"] "+"<"+String(c.result_)+">")}a.stack+="\n\n"+b.join("\n")}};goog.Promise.prototype.removeUnhandledRejection_=function(){if(goog.Promise.UNHANDLED_REJECTION_DELAY>0){for(var a=this;a&&a.unhandledRejectionId_;a=a.parent_){goog.global.clearTimeout(a.unhandledRejectionId_);a.unhandledRejectionId_=0}}else if(goog.Promise.UNHANDLED_REJECTION_DELAY==0){for(var a=this;a&&a.hadUnhandledRejection_;a=a.parent_){a.hadUnhandledRejection_=false}}};goog.Promise.addUnhandledRejection_=function(a,b){if(goog.Promise.UNHANDLED_REJECTION_DELAY>0){a.unhandledRejectionId_=goog.global.setTimeout(function(){a.appendLongStack_(b);goog.Promise.handleRejection_.call(null,b)},goog.Promise.UNHANDLED_REJECTION_DELAY)}else if(goog.Promise.UNHANDLED_REJECTION_DELAY==0){a.hadUnhandledRejection_=true;goog.async.run(function(){if(a.hadUnhandledRejection_){a.appendLongStack_(b);goog.Promise.handleRejection_.call(null,b)}})}};goog.Promise.handleRejection_=goog.async.throwException;goog.Promise.setUnhandledRejectionHandler=function(a){goog.Promise.handleRejection_=a};goog.Promise.CancellationError=function(a){goog.Promise.CancellationError.base(this,"constructor",a)};goog.inherits(goog.Promise.CancellationError,goog.debug.Error);goog.Promise.CancellationError.prototype.name="cancel";goog.Promise.Resolver_=function(a,b,c){this.promise=a;this.resolve=b;this.reject=c};goog.provide("goog.Timer");goog.require("goog.Promise");goog.require("goog.events.EventTarget");goog.Timer=function(a,b){goog.events.EventTarget.call(this);this.interval_=a||1;this.timerObject_=b||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.INVALID_TIMEOUT_ID_=-1;goog.Timer.prototype.enabled=false;goog.Timer.defaultTimerObject=goog.global;goog.Timer.intervalScale=.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};goog.Timer.prototype.setInterval=function(a){this.interval_=a;if(this.timer_&&this.enabled){this.stop();this.start()}else if(this.timer_){this.stop()}};goog.Timer.prototype.tick_=function(){if(this.enabled){var a=goog.now()-this.last_;if(a>0&&a<this.interval_*goog.Timer.intervalScale){this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-a);return}if(this.timer_){this.timerObject_.clearTimeout(this.timer_);this.timer_=null}this.dispatchTick();if(this.enabled){this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_);this.last_=goog.now()}}};goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};goog.Timer.prototype.start=function(){this.enabled=true;if(!this.timer_){this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_);this.last_=goog.now()}};goog.Timer.prototype.stop=function(){this.enabled=false;if(this.timer_){this.timerObject_.clearTimeout(this.timer_);this.timer_=null}};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};goog.Timer.TICK="tick";goog.Timer.callOnce=function(a,b,c){if(goog.isFunction(a)){if(c){a=goog.bind(a,c)}}else if(a&&typeof a.handleEvent=="function"){a=goog.bind(a.handleEvent,a)}else{throw Error("Invalid listener argument")}if(b>goog.Timer.MAX_TIMEOUT_){return goog.Timer.INVALID_TIMEOUT_ID_}else{return goog.Timer.defaultTimerObject.setTimeout(a,b||0)}};goog.Timer.clear=function(a){goog.Timer.defaultTimerObject.clearTimeout(a)};goog.Timer.promise=function(a,b){var c=null;return new goog.Promise(function(d,e){c=goog.Timer.callOnce(function(){d(b)},a);if(c==goog.Timer.INVALID_TIMEOUT_ID_){e(new Error("Failed to schedule timer."))}}).thenCatch(function(a){goog.Timer.clear(c);throw a})};goog.provide("goog.json");goog.provide("goog.json.Replacer");goog.provide("goog.json.Reviver");goog.provide("goog.json.Serializer");goog.define("goog.json.USE_NATIVE_JSON",false);goog.json.isValid=function(a){if(/^\s*$/.test(a)){return false}var b=/\\["\\\/bfnrtu]/g;var c=/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var d=/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g;var e=/^[\],:{}\s\u2028\u2029]*$/;return e.test(a.replace(b,"@").replace(c,"]").replace(d,""))};goog.json.parse=goog.json.USE_NATIVE_JSON?goog.global["JSON"]["parse"]:function(s){var o=String(s);if(goog.json.isValid(o)){try{return eval("("+o+")")}catch(a){}}throw Error("Invalid JSON string: "+o)};goog.json.unsafeParse=goog.json.USE_NATIVE_JSON?goog.global["JSON"]["parse"]:function(s){return eval("("+s+")")};goog.json.Replacer;goog.json.Reviver;goog.json.serialize=goog.json.USE_NATIVE_JSON?goog.global["JSON"]["stringify"]:function(a,b){return new goog.json.Serializer(b).serialize(a)};goog.json.Serializer=function(a){this.replacer_=a};goog.json.Serializer.prototype.serialize=function(a){var b=[];this.serializeInternal(a,b);return b.join("")};goog.json.Serializer.prototype.serializeInternal=function(a,b){if(a==null){b.push("null");return}if(typeof a=="object"){if(goog.isArray(a)){this.serializeArray(a,b);return}else if(a instanceof String||a instanceof Number||a instanceof Boolean){a=a.valueOf()}else{this.serializeObject_(a,b);return}}switch(typeof a){case"string":this.serializeString_(a,b);break;case"number":this.serializeNumber_(a,b);break;case"boolean":b.push(a);break;case"function":b.push("null");break;default:throw Error("Unknown type: "+typeof a)}};goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"};goog.json.Serializer.charsToReplace_=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;goog.json.Serializer.prototype.serializeString_=function(a,b){b.push('"',a.replace(goog.json.Serializer.charsToReplace_,function(a){var b=goog.json.Serializer.charToJsonCharCache_[a];if(!b){b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1);goog.json.Serializer.charToJsonCharCache_[a]=b}return b}),'"')};goog.json.Serializer.prototype.serializeNumber_=function(a,b){b.push(isFinite(a)&&!isNaN(a)?a:"null")};goog.json.Serializer.prototype.serializeArray=function(a,b){var c=a.length;b.push("[");var d="";for(var e=0;e<c;e++){b.push(d);var f=a[e];this.serializeInternal(this.replacer_?this.replacer_.call(a,String(e),f):f,b);d=","}b.push("]")};goog.json.Serializer.prototype.serializeObject_=function(a,b){b.push("{");var c="";for(var d in a){if(Object.prototype.hasOwnProperty.call(a,d)){var e=a[d];if(typeof e!="function"){b.push(c);this.serializeString_(d,b);b.push(":");this.serializeInternal(this.replacer_?this.replacer_.call(a,d,e):e,b);c=","}}}b.push("}")};goog.provide("goog.net.ErrorCode");goog.net.ErrorCode={NO_ERROR:0,ACCESS_DENIED:1,FILE_NOT_FOUND:2,FF_SILENT_ERROR:3,CUSTOM_ERROR:4,EXCEPTION:5,HTTP_ERROR:6,ABORT:7,TIMEOUT:8,OFFLINE:9};goog.net.ErrorCode.getDebugMessage=function(a){switch(a){case goog.net.ErrorCode.NO_ERROR:return"No Error";case goog.net.ErrorCode.ACCESS_DENIED:return"Access denied to content document";case goog.net.ErrorCode.FILE_NOT_FOUND:return"File not found";case goog.net.ErrorCode.FF_SILENT_ERROR:return"Firefox silently errored";case goog.net.ErrorCode.CUSTOM_ERROR:return"Application custom error";case goog.net.ErrorCode.EXCEPTION:return"An exception occurred";case goog.net.ErrorCode.HTTP_ERROR:return"Http response at 400 or 500 level";case goog.net.ErrorCode.ABORT:return"Request was aborted";case goog.net.ErrorCode.TIMEOUT:return"Request timed out";case goog.net.ErrorCode.OFFLINE:return"The resource is not available offline";default:return"Unrecognized error code"}};goog.provide("goog.net.HttpStatus");goog.net.HttpStatus={CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUEST_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,NETWORK_AUTHENTICATION_REQUIRED:511,QUIRK_IE_NO_CONTENT:1223};goog.net.HttpStatus.isSuccess=function(a){switch(a){case goog.net.HttpStatus.OK:case goog.net.HttpStatus.CREATED:case goog.net.HttpStatus.ACCEPTED:case goog.net.HttpStatus.NO_CONTENT:case goog.net.HttpStatus.PARTIAL_CONTENT:case goog.net.HttpStatus.NOT_MODIFIED:case goog.net.HttpStatus.QUIRK_IE_NO_CONTENT:return true;default:return false}};goog.provide("goog.net.XhrLike");goog.net.XhrLike=function(){};goog.net.XhrLike.OrNative;goog.net.XhrLike.prototype.onreadystatechange;goog.net.XhrLike.prototype.responseText;goog.net.XhrLike.prototype.responseXML;goog.net.XhrLike.prototype.readyState;goog.net.XhrLike.prototype.status;goog.net.XhrLike.prototype.statusText;goog.net.XhrLike.prototype.open=function(a,b,c,d,e){};goog.net.XhrLike.prototype.send=function(a){};goog.net.XhrLike.prototype.abort=function(){};goog.net.XhrLike.prototype.setRequestHeader=function(a,b){};goog.net.XhrLike.prototype.getResponseHeader=function(a){};goog.net.XhrLike.prototype.getAllResponseHeaders=function(){};goog.provide("goog.net.XmlHttpFactory");goog.require("goog.net.XhrLike");goog.net.XmlHttpFactory=function(){};goog.net.XmlHttpFactory.prototype.cachedOptions_=null;goog.net.XmlHttpFactory.prototype.createInstance=goog.abstractMethod;goog.net.XmlHttpFactory.prototype.getOptions=function(){return this.cachedOptions_||(this.cachedOptions_=this.internalGetOptions())};goog.net.XmlHttpFactory.prototype.internalGetOptions=goog.abstractMethod;goog.provide("goog.net.WrapperXmlHttpFactory");goog.require("goog.net.XhrLike");goog.require("goog.net.XmlHttpFactory");goog.net.WrapperXmlHttpFactory=function(a,b){goog.net.XmlHttpFactory.call(this);this.xhrFactory_=a;this.optionsFactory_=b};goog.inherits(goog.net.WrapperXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.WrapperXmlHttpFactory.prototype.createInstance=function(){return this.xhrFactory_()};goog.net.WrapperXmlHttpFactory.prototype.getOptions=function(){return this.optionsFactory_()};goog.provide("goog.net.DefaultXmlHttpFactory");goog.provide("goog.net.XmlHttp");goog.provide("goog.net.XmlHttp.OptionType");goog.provide("goog.net.XmlHttp.ReadyState");goog.provide("goog.net.XmlHttpDefines");goog.require("goog.asserts");goog.require("goog.net.WrapperXmlHttpFactory");goog.require("goog.net.XmlHttpFactory");goog.net.XmlHttp=function(){return goog.net.XmlHttp.factory_.createInstance()};goog.define("goog.net.XmlHttp.ASSUME_NATIVE_XHR",false);goog.net.XmlHttpDefines={};goog.define("goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR",false);goog.net.XmlHttp.getOptions=function(){return goog.net.XmlHttp.factory_.getOptions()};goog.net.XmlHttp.OptionType={USE_NULL_FUNCTION:0,LOCAL_REQUEST_ERROR:1};goog.net.XmlHttp.ReadyState={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETE:4};goog.net.XmlHttp.factory_;goog.net.XmlHttp.setFactory=function(a,b){goog.net.XmlHttp.setGlobalFactory(new goog.net.WrapperXmlHttpFactory(goog.asserts.assert(a),goog.asserts.assert(b)))};goog.net.XmlHttp.setGlobalFactory=function(a){goog.net.XmlHttp.factory_=a};goog.net.DefaultXmlHttpFactory=function(){goog.net.XmlHttpFactory.call(this)};goog.inherits(goog.net.DefaultXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.DefaultXmlHttpFactory.prototype.createInstance=function(){var a=this.getProgId_();if(a){return new ActiveXObject(a)}else{return new XMLHttpRequest}};goog.net.DefaultXmlHttpFactory.prototype.internalGetOptions=function(){var a=this.getProgId_();var b={};if(a){b[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]=true;b[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]=true}return b};goog.net.DefaultXmlHttpFactory.prototype.ieProgId_;goog.net.DefaultXmlHttpFactory.prototype.getProgId_=function(){if(goog.net.XmlHttp.ASSUME_NATIVE_XHR||goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR){return""}if(!this.ieProgId_&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var b=0;b<a.length;b++){var c=a[b];try{new ActiveXObject(c);this.ieProgId_=c;return c}catch(a){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled,"+" or MSXML might not be installed")}return this.ieProgId_};goog.net.XmlHttp.setGlobalFactory(new goog.net.DefaultXmlHttpFactory);goog.provide("goog.uri.utils");goog.provide("goog.uri.utils.ComponentIndex");goog.provide("goog.uri.utils.QueryArray");goog.provide("goog.uri.utils.QueryValue");goog.provide("goog.uri.utils.StandardQueryParam");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.userAgent");goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63};goog.uri.utils.buildFromEncodedParts=function(a,b,c,d,e,f,g){var h="";if(a){h+=a+":"}if(c){h+="//";if(b){h+=b+"@"}h+=c;if(d){h+=":"+d}}if(e){h+=e}if(f){h+="?"+f}if(g){h+="#"+g}return h};goog.uri.utils.splitRe_=new RegExp("^"+"(?:"+"([^:/?#.]+)"+":)?"+"(?://"+"(?:([^/?#]*)@)?"+"([^/#?]*?)"+"(?::([0-9]+))?"+"(?=[/#?]|$)"+")?"+"([^?#]+)?"+"(?:\\?([^#]*))?"+"(?:#(.*))?"+"$");goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.split=function(a){goog.uri.utils.phishingProtection_();return a.match(goog.uri.utils.splitRe_)};goog.uri.utils.needsPhishingProtection_=goog.userAgent.WEBKIT;goog.uri.utils.phishingProtection_=function(){if(goog.uri.utils.needsPhishingProtection_){goog.uri.utils.needsPhishingProtection_=false;var a=goog.global["location"];if(a){var b=a["href"];if(b){var c=goog.uri.utils.getDomain(b);if(c&&c!=a["hostname"]){goog.uri.utils.needsPhishingProtection_=true;throw Error()}}}}};goog.uri.utils.decodeIfPossible_=function(a,b){if(!a){return a}return b?decodeURI(a):decodeURIComponent(a)};goog.uri.utils.getComponentByIndex_=function(a,b){return goog.uri.utils.split(b)[a]||null};goog.uri.utils.getScheme=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,a)};goog.uri.utils.getEffectiveScheme=function(a){var b=goog.uri.utils.getScheme(a);if(!b&&goog.global.self&&goog.global.self.location){var c=goog.global.self.location.protocol;b=c.substr(0,c.length-1)}return b?b.toLowerCase():""};goog.uri.utils.getUserInfoEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,a)};goog.uri.utils.getUserInfo=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(a))};goog.uri.utils.getDomainEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,a)};goog.uri.utils.getDomain=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(a),true)};goog.uri.utils.getPort=function(a){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,a))||null};goog.uri.utils.getPathEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,a)};goog.uri.utils.getPath=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(a),true)};goog.uri.utils.getQueryData=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,a)};goog.uri.utils.getFragmentEncoded=function(a){var b=a.indexOf("#");return b<0?null:a.substr(b+1)};goog.uri.utils.setFragmentEncoded=function(a,b){return goog.uri.utils.removeFragment(a)+(b?"#"+b:"")};goog.uri.utils.getFragment=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(a))};goog.uri.utils.getHost=function(a){var b=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(b[goog.uri.utils.ComponentIndex.SCHEME],b[goog.uri.utils.ComponentIndex.USER_INFO],b[goog.uri.utils.ComponentIndex.DOMAIN],b[goog.uri.utils.ComponentIndex.PORT])};goog.uri.utils.getPathAndAfter=function(a){var b=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,b[goog.uri.utils.ComponentIndex.PATH],b[goog.uri.utils.ComponentIndex.QUERY_DATA],b[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.removeFragment=function(a){var b=a.indexOf("#");return b<0?a:a.substr(0,b)};goog.uri.utils.haveSameDomain=function(a,b){var c=goog.uri.utils.split(a);var d=goog.uri.utils.split(b);return c[goog.uri.utils.ComponentIndex.DOMAIN]==d[goog.uri.utils.ComponentIndex.DOMAIN]&&c[goog.uri.utils.ComponentIndex.SCHEME]==d[goog.uri.utils.ComponentIndex.SCHEME]&&c[goog.uri.utils.ComponentIndex.PORT]==d[goog.uri.utils.ComponentIndex.PORT]};goog.uri.utils.assertNoFragmentsOrQueries_=function(a){if(goog.DEBUG&&(a.indexOf("#")>=0||a.indexOf("?")>=0)){throw Error("goog.uri.utils: Fragment or query identifiers are not "+"supported: ["+a+"]")}};goog.uri.utils.QueryValue;goog.uri.utils.QueryArray;goog.uri.utils.parseQueryData=function(a,b){if(!a){return}var c=a.split("&");for(var d=0;d<c.length;d++){var e=c[d].indexOf("=");var f=null;var g=null;if(e>=0){f=c[d].substring(0,e);g=c[d].substring(e+1)}else{f=c[d]}b(f,g?goog.string.urlDecode(g):"")}};goog.uri.utils.appendQueryData_=function(a){if(a[1]){var b=a[0];var c=b.indexOf("#");if(c>=0){a.push(b.substr(c));a[0]=b=b.substr(0,c)}var d=b.indexOf("?");if(d<0){a[1]="?"}else if(d==b.length-1){a[1]=undefined}}return a.join("")};goog.uri.utils.appendKeyValuePairs_=function(a,b,c){if(goog.isArray(b)){goog.asserts.assertArray(b);for(var d=0;d<b.length;d++){goog.uri.utils.appendKeyValuePairs_(a,String(b[d]),c)}}else if(b!=null){c.push("&",a,b===""?"":"=",goog.string.urlEncode(b))}};goog.uri.utils.buildQueryDataBuffer_=function(a,b,c){goog.asserts.assert(Math.max(b.length-(c||0),0)%2==0,"goog.uri.utils: Key/value lists must be even in length.");for(var d=c||0;d<b.length;d+=2){goog.uri.utils.appendKeyValuePairs_(b[d],b[d+1],a)}return a};goog.uri.utils.buildQueryData=function(a,b){var c=goog.uri.utils.buildQueryDataBuffer_([],a,b);c[0]="";return c.join("")};goog.uri.utils.buildQueryDataBufferFromMap_=function(a,b){for(var c in b){goog.uri.utils.appendKeyValuePairs_(c,b[c],a)}return a};goog.uri.utils.buildQueryDataFromMap=function(a){var b=goog.uri.utils.buildQueryDataBufferFromMap_([],a);b[0]="";return b.join("")};goog.uri.utils.appendParams=function(a,b){return goog.uri.utils.appendQueryData_(arguments.length==2?goog.uri.utils.buildQueryDataBuffer_([a],arguments[1],0):goog.uri.utils.buildQueryDataBuffer_([a],arguments,1))};goog.uri.utils.appendParamsFromMap=function(a,b){return goog.uri.utils.appendQueryData_(goog.uri.utils.buildQueryDataBufferFromMap_([a],b))};goog.uri.utils.appendParam=function(a,b,c){var d=[a,"&",b];if(goog.isDefAndNotNull(c)){d.push("=",goog.string.urlEncode(c))}return goog.uri.utils.appendQueryData_(d)};goog.uri.utils.findParam_=function(a,b,c,d){var e=b;var f=c.length;while((e=a.indexOf(c,e))>=0&&e<d){var g=a.charCodeAt(e-1);if(g==goog.uri.utils.CharCode_.AMPERSAND||g==goog.uri.utils.CharCode_.QUESTION){var h=a.charCodeAt(e+f);if(!h||h==goog.uri.utils.CharCode_.EQUAL||h==goog.uri.utils.CharCode_.AMPERSAND||h==goog.uri.utils.CharCode_.HASH){return e}}e+=f+1}return-1};goog.uri.utils.hashOrEndRe_=/#|$/;goog.uri.utils.hasParam=function(a,b){return goog.uri.utils.findParam_(a,0,b,a.search(goog.uri.utils.hashOrEndRe_))>=0};goog.uri.utils.getParamValue=function(a,b){var c=a.search(goog.uri.utils.hashOrEndRe_);var d=goog.uri.utils.findParam_(a,0,b,c);if(d<0){return null}else{var e=a.indexOf("&",d);if(e<0||e>c){e=c}d+=b.length+1;return goog.string.urlDecode(a.substr(d,e-d))}};goog.uri.utils.getParamValues=function(a,b){var c=a.search(goog.uri.utils.hashOrEndRe_);var d=0;var e;var f=[];while((e=goog.uri.utils.findParam_(a,d,b,c))>=0){d=a.indexOf("&",e);if(d<0||d>c){d=c}e+=b.length+1;f.push(goog.string.urlDecode(a.substr(e,d-e)))}return f};goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/;goog.uri.utils.removeParam=function(a,b){var c=a.search(goog.uri.utils.hashOrEndRe_);var d=0;var e;var f=[];while((e=goog.uri.utils.findParam_(a,d,b,c))>=0){f.push(a.substring(d,e));d=Math.min(a.indexOf("&",e)+1||c,c)}f.push(a.substr(d));return f.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")};goog.uri.utils.setParam=function(a,b,c){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(a,b),b,c)};goog.uri.utils.appendPath=function(a,b){goog.uri.utils.assertNoFragmentsOrQueries_(a);if(goog.string.endsWith(a,"/")){a=a.substr(0,a.length-1)}if(goog.string.startsWith(b,"/")){b=b.substr(1)}return goog.string.buildString(a,"/",b)};goog.uri.utils.setPath=function(a,b){if(!goog.string.startsWith(b,"/")){b="/"+b}var c=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(c[goog.uri.utils.ComponentIndex.SCHEME],c[goog.uri.utils.ComponentIndex.USER_INFO],c[goog.uri.utils.ComponentIndex.DOMAIN],c[goog.uri.utils.ComponentIndex.PORT],b,c[goog.uri.utils.ComponentIndex.QUERY_DATA],c[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.StandardQueryParam={RANDOM:"zx"};goog.uri.utils.makeUnique=function(a){return goog.uri.utils.setParam(a,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};goog.provide("goog.net.XhrIo");goog.provide("goog.net.XhrIo.ResponseType");goog.require("goog.Timer");goog.require("goog.array");goog.require("goog.debug.entryPointRegistry");goog.require("goog.events.EventTarget");goog.require("goog.json");goog.require("goog.log");goog.require("goog.net.ErrorCode");goog.require("goog.net.EventType");goog.require("goog.net.HttpStatus");goog.require("goog.net.XmlHttp");goog.require("goog.object");goog.require("goog.string");goog.require("goog.structs");goog.require("goog.structs.Map");goog.require("goog.uri.utils");goog.require("goog.userAgent");goog.forwardDeclare("goog.Uri");goog.net.XhrIo=function(a){goog.net.XhrIo.base(this,"constructor");this.headers=new goog.structs.Map;this.xmlHttpFactory_=a||null;this.active_=false;this.xhr_=null;this.xhrOptions_=null;this.lastUri_="";this.lastMethod_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastError_="";this.errorDispatched_=false;this.inSend_=false;this.inOpen_=false;this.inAbort_=false;this.timeoutInterval_=0;this.timeoutId_=null;this.responseType_=goog.net.XhrIo.ResponseType.DEFAULT;this.withCredentials_=false;this.useXhr2Timeout_=false};goog.inherits(goog.net.XhrIo,goog.events.EventTarget);goog.net.XhrIo.ResponseType={DEFAULT:"",TEXT:"text",DOCUMENT:"document",BLOB:"blob",ARRAY_BUFFER:"arraybuffer"};goog.net.XhrIo.prototype.logger_=goog.log.getLogger("goog.net.XhrIo");goog.net.XhrIo.CONTENT_TYPE_HEADER="Content-Type";goog.net.XhrIo.HTTP_SCHEME_PATTERN=/^https?$/i;goog.net.XhrIo.METHODS_WITH_FORM_DATA=["POST","PUT"];goog.net.XhrIo.FORM_CONTENT_TYPE="application/x-www-form-urlencoded;charset=utf-8";goog.net.XhrIo.XHR2_TIMEOUT_="timeout";goog.net.XhrIo.XHR2_ON_TIMEOUT_="ontimeout";goog.net.XhrIo.sendInstances_=[];goog.net.XhrIo.send=function(a,b,c,d,e,f,g){var h=new goog.net.XhrIo;goog.net.XhrIo.sendInstances_.push(h);if(b){h.listen(goog.net.EventType.COMPLETE,b)}h.listenOnce(goog.net.EventType.READY,h.cleanupSend_);if(f){h.setTimeoutInterval(f)}if(g){h.setWithCredentials(g)}h.send(a,c,d,e);return h};goog.net.XhrIo.cleanup=function(){var a=goog.net.XhrIo.sendInstances_;while(a.length){a.pop().dispose()}};goog.net.XhrIo.protectEntryPoints=function(a){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=a.protectEntryPoint(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)};goog.net.XhrIo.prototype.cleanupSend_=function(){this.dispose();goog.array.remove(goog.net.XhrIo.sendInstances_,this)};goog.net.XhrIo.prototype.getTimeoutInterval=function(){return this.timeoutInterval_};goog.net.XhrIo.prototype.setTimeoutInterval=function(a){this.timeoutInterval_=Math.max(0,a)};goog.net.XhrIo.prototype.setResponseType=function(a){this.responseType_=a};goog.net.XhrIo.prototype.getResponseType=function(){return this.responseType_};goog.net.XhrIo.prototype.setWithCredentials=function(a){this.withCredentials_=a};goog.net.XhrIo.prototype.getWithCredentials=function(){return this.withCredentials_};goog.net.XhrIo.prototype.send=function(a,b,c,d){if(this.xhr_){throw Error("[goog.net.XhrIo] Object is active with another request="+this.lastUri_+"; newUri="+a)}var e=b?b.toUpperCase():"GET";this.lastUri_=a;this.lastError_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastMethod_=e;this.errorDispatched_=false;this.active_=true;this.xhr_=this.createXhr();this.xhrOptions_=this.xmlHttpFactory_?this.xmlHttpFactory_.getOptions():goog.net.XmlHttp.getOptions();this.xhr_.onreadystatechange=goog.bind(this.onReadyStateChange_,this);try{goog.log.fine(this.logger_,this.formatMsg_("Opening Xhr"));this.inOpen_=true;this.xhr_.open(e,String(a),true);this.inOpen_=false}catch(a){goog.log.fine(this.logger_,this.formatMsg_("Error opening Xhr: "+a.message));this.error_(goog.net.ErrorCode.EXCEPTION,a);return}var f=c||"";var g=this.headers.clone();if(d){goog.structs.forEach(d,function(a,b){g.set(b,a)})}var h=goog.array.find(g.getKeys(),goog.net.XhrIo.isContentTypeHeader_);var i=goog.global["FormData"]&&f instanceof goog.global["FormData"];if(goog.array.contains(goog.net.XhrIo.METHODS_WITH_FORM_DATA,e)&&!h&&!i){g.set(goog.net.XhrIo.CONTENT_TYPE_HEADER,goog.net.XhrIo.FORM_CONTENT_TYPE)}g.forEach(function(a,b){this.xhr_.setRequestHeader(b,a)},this);if(this.responseType_){this.xhr_.responseType=this.responseType_}if(goog.object.containsKey(this.xhr_,"withCredentials")){this.xhr_.withCredentials=this.withCredentials_}try{this.cleanUpTimeoutTimer_();if(this.timeoutInterval_>0){this.useXhr2Timeout_=goog.net.XhrIo.shouldUseXhr2Timeout_(this.xhr_);goog.log.fine(this.logger_,this.formatMsg_("Will abort after "+this.timeoutInterval_+"ms if incomplete, xhr2 "+this.useXhr2Timeout_));if(this.useXhr2Timeout_){this.xhr_[goog.net.XhrIo.XHR2_TIMEOUT_]=this.timeoutInterval_;this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=goog.bind(this.timeout_,this)}else{this.timeoutId_=goog.Timer.callOnce(this.timeout_,this.timeoutInterval_,this)}}goog.log.fine(this.logger_,this.formatMsg_("Sending request"));this.inSend_=true;this.xhr_.send(f);this.inSend_=false}catch(a){goog.log.fine(this.logger_,this.formatMsg_("Send error: "+a.message));this.error_(goog.net.ErrorCode.EXCEPTION,a)}};goog.net.XhrIo.shouldUseXhr2Timeout_=function(a){
return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(9)&&goog.isNumber(a[goog.net.XhrIo.XHR2_TIMEOUT_])&&goog.isDef(a[goog.net.XhrIo.XHR2_ON_TIMEOUT_])};goog.net.XhrIo.isContentTypeHeader_=function(a){return goog.string.caseInsensitiveEquals(goog.net.XhrIo.CONTENT_TYPE_HEADER,a)};goog.net.XhrIo.prototype.createXhr=function(){return this.xmlHttpFactory_?this.xmlHttpFactory_.createInstance():goog.net.XmlHttp()};goog.net.XhrIo.prototype.timeout_=function(){if(typeof goog=="undefined"){}else if(this.xhr_){this.lastError_="Timed out after "+this.timeoutInterval_+"ms, aborting";this.lastErrorCode_=goog.net.ErrorCode.TIMEOUT;goog.log.fine(this.logger_,this.formatMsg_(this.lastError_));this.dispatchEvent(goog.net.EventType.TIMEOUT);this.abort(goog.net.ErrorCode.TIMEOUT)}};goog.net.XhrIo.prototype.error_=function(a,b){this.active_=false;if(this.xhr_){this.inAbort_=true;this.xhr_.abort();this.inAbort_=false}this.lastError_=b;this.lastErrorCode_=a;this.dispatchErrors_();this.cleanUpXhr_()};goog.net.XhrIo.prototype.dispatchErrors_=function(){if(!this.errorDispatched_){this.errorDispatched_=true;this.dispatchEvent(goog.net.EventType.COMPLETE);this.dispatchEvent(goog.net.EventType.ERROR)}};goog.net.XhrIo.prototype.abort=function(a){if(this.xhr_&&this.active_){goog.log.fine(this.logger_,this.formatMsg_("Aborting"));this.active_=false;this.inAbort_=true;this.xhr_.abort();this.inAbort_=false;this.lastErrorCode_=a||goog.net.ErrorCode.ABORT;this.dispatchEvent(goog.net.EventType.COMPLETE);this.dispatchEvent(goog.net.EventType.ABORT);this.cleanUpXhr_()}};goog.net.XhrIo.prototype.disposeInternal=function(){if(this.xhr_){if(this.active_){this.active_=false;this.inAbort_=true;this.xhr_.abort();this.inAbort_=false}this.cleanUpXhr_(true)}goog.net.XhrIo.base(this,"disposeInternal")};goog.net.XhrIo.prototype.onReadyStateChange_=function(){if(this.isDisposed()){return}if(!this.inOpen_&&!this.inSend_&&!this.inAbort_){this.onReadyStateChangeEntryPoint_()}else{this.onReadyStateChangeHelper_()}};goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=function(){this.onReadyStateChangeHelper_()};goog.net.XhrIo.prototype.onReadyStateChangeHelper_=function(){if(!this.active_){return}if(typeof goog=="undefined"){}else if(this.xhrOptions_[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE&&this.getStatus()==2){goog.log.fine(this.logger_,this.formatMsg_("Local request error detected and ignored"))}else{if(this.inSend_&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE){goog.Timer.callOnce(this.onReadyStateChange_,0,this);return}this.dispatchEvent(goog.net.EventType.READY_STATE_CHANGE);if(this.isComplete()){goog.log.fine(this.logger_,this.formatMsg_("Request complete"));this.active_=false;try{if(this.isSuccess()){this.dispatchEvent(goog.net.EventType.COMPLETE);this.dispatchEvent(goog.net.EventType.SUCCESS)}else{this.lastErrorCode_=goog.net.ErrorCode.HTTP_ERROR;this.lastError_=this.getStatusText()+" ["+this.getStatus()+"]";this.dispatchErrors_()}}finally{this.cleanUpXhr_()}}}};goog.net.XhrIo.prototype.cleanUpXhr_=function(a){if(this.xhr_){this.cleanUpTimeoutTimer_();var b=this.xhr_;var c=this.xhrOptions_[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]?goog.nullFunction:null;this.xhr_=null;this.xhrOptions_=null;if(!a){this.dispatchEvent(goog.net.EventType.READY)}try{b.onreadystatechange=c}catch(a){goog.log.error(this.logger_,"Problem encountered resetting onreadystatechange: "+a.message)}}};goog.net.XhrIo.prototype.cleanUpTimeoutTimer_=function(){if(this.xhr_&&this.useXhr2Timeout_){this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=null}if(goog.isNumber(this.timeoutId_)){goog.Timer.clear(this.timeoutId_);this.timeoutId_=null}};goog.net.XhrIo.prototype.isActive=function(){return!!this.xhr_};goog.net.XhrIo.prototype.isComplete=function(){return this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE};goog.net.XhrIo.prototype.isSuccess=function(){var a=this.getStatus();return goog.net.HttpStatus.isSuccess(a)||a===0&&!this.isLastUriEffectiveSchemeHttp_()};goog.net.XhrIo.prototype.isLastUriEffectiveSchemeHttp_=function(){var a=goog.uri.utils.getEffectiveScheme(String(this.lastUri_));return goog.net.XhrIo.HTTP_SCHEME_PATTERN.test(a)};goog.net.XhrIo.prototype.getReadyState=function(){return this.xhr_?this.xhr_.readyState:goog.net.XmlHttp.ReadyState.UNINITIALIZED};goog.net.XhrIo.prototype.getStatus=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.status:-1}catch(a){return-1}};goog.net.XhrIo.prototype.getStatusText=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.statusText:""}catch(a){goog.log.fine(this.logger_,"Can not get status: "+a.message);return""}};goog.net.XhrIo.prototype.getLastUri=function(){return String(this.lastUri_)};goog.net.XhrIo.prototype.getResponseText=function(){try{return this.xhr_?this.xhr_.responseText:""}catch(a){goog.log.fine(this.logger_,"Can not get responseText: "+a.message);return""}};goog.net.XhrIo.prototype.getResponseBody=function(){try{if(this.xhr_&&"responseBody"in this.xhr_){return this.xhr_["responseBody"]}}catch(a){goog.log.fine(this.logger_,"Can not get responseBody: "+a.message)}return null};goog.net.XhrIo.prototype.getResponseXml=function(){try{return this.xhr_?this.xhr_.responseXML:null}catch(a){goog.log.fine(this.logger_,"Can not get responseXML: "+a.message);return null}};goog.net.XhrIo.prototype.getResponseJson=function(a){if(!this.xhr_){return undefined}var b=this.xhr_.responseText;if(a&&b.indexOf(a)==0){b=b.substring(a.length)}return goog.json.parse(b)};goog.net.XhrIo.prototype.getResponse=function(){try{if(!this.xhr_){return null}if("response"in this.xhr_){return this.xhr_.response}switch(this.responseType_){case goog.net.XhrIo.ResponseType.DEFAULT:case goog.net.XhrIo.ResponseType.TEXT:return this.xhr_.responseText;case goog.net.XhrIo.ResponseType.ARRAY_BUFFER:if("mozResponseArrayBuffer"in this.xhr_){return this.xhr_.mozResponseArrayBuffer}}goog.log.error(this.logger_,"Response type "+this.responseType_+" is not "+"supported on this browser");return null}catch(a){goog.log.fine(this.logger_,"Can not get response: "+a.message);return null}};goog.net.XhrIo.prototype.getResponseHeader=function(a){return this.xhr_&&this.isComplete()?this.xhr_.getResponseHeader(a):undefined};goog.net.XhrIo.prototype.getAllResponseHeaders=function(){return this.xhr_&&this.isComplete()?this.xhr_.getAllResponseHeaders():""};goog.net.XhrIo.prototype.getResponseHeaders=function(){var a={};var b=this.getAllResponseHeaders().split("\r\n");for(var c=0;c<b.length;c++){if(goog.string.isEmptyOrWhitespace(b[c])){continue}var d=goog.string.splitLimit(b[c],": ",2);if(a[d[0]]){a[d[0]]+=", "+d[1]}else{a[d[0]]=d[1]}}return a};goog.net.XhrIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_};goog.net.XhrIo.prototype.getLastError=function(){return goog.isString(this.lastError_)?this.lastError_:String(this.lastError_)};goog.net.XhrIo.prototype.formatMsg_=function(a){return a+" ["+this.lastMethod_+" "+this.lastUri_+" "+this.getStatus()+"]"};goog.debug.entryPointRegistry.register(function(a){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=a(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)});goog.provide("ol.format.FormatType");ol.format.FormatType={JSON:"json",TEXT:"text",XML:"xml"};goog.provide("goog.dom.xml");goog.require("goog.dom");goog.require("goog.dom.NodeType");goog.dom.xml.MAX_XML_SIZE_KB=2*1024;goog.dom.xml.MAX_ELEMENT_DEPTH=256;goog.dom.xml.createDocument=function(a,b){if(b&&!a){throw Error("Can't create document with namespace and no root tag")}if(document.implementation&&document.implementation.createDocument){return document.implementation.createDocument(b||"",a||"",null)}else if(typeof ActiveXObject!="undefined"){var c=goog.dom.xml.createMsXmlDocument_();if(c){if(a){c.appendChild(c.createNode(goog.dom.NodeType.ELEMENT,a,b||""))}return c}}throw Error("Your browser does not support creating new documents")};goog.dom.xml.loadXml=function(a){if(typeof DOMParser!="undefined"){return(new DOMParser).parseFromString(a,"application/xml")}else if(typeof ActiveXObject!="undefined"){var b=goog.dom.xml.createMsXmlDocument_();b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents")};goog.dom.xml.serialize=function(a){if(typeof XMLSerializer!="undefined"){return(new XMLSerializer).serializeToString(a)}var b=a.xml;if(b){return b}throw Error("Your browser does not support serializing XML documents")};goog.dom.xml.selectSingleNode=function(a,b){if(typeof a.selectSingleNode!="undefined"){var c=goog.dom.getOwnerDocument(a);if(typeof c.setProperty!="undefined"){c.setProperty("SelectionLanguage","XPath")}return a.selectSingleNode(b)}else if(document.implementation.hasFeature("XPath","3.0")){var c=goog.dom.getOwnerDocument(a);var d=c.createNSResolver(c.documentElement);var e=c.evaluate(b,a,d,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return e.singleNodeValue}return null};goog.dom.xml.selectNodes=function(a,b){if(typeof a.selectNodes!="undefined"){var c=goog.dom.getOwnerDocument(a);if(typeof c.setProperty!="undefined"){c.setProperty("SelectionLanguage","XPath")}return a.selectNodes(b)}else if(document.implementation.hasFeature("XPath","3.0")){var c=goog.dom.getOwnerDocument(a);var d=c.createNSResolver(c.documentElement);var e=c.evaluate(b,a,d,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var f=[];var g=e.snapshotLength;for(var h=0;h<g;h++){f.push(e.snapshotItem(h))}return f}else{return[]}};goog.dom.xml.setAttributes=function(a,b){for(var c in b){if(b.hasOwnProperty(c)){a.setAttribute(c,b[c])}}};goog.dom.xml.createMsXmlDocument_=function(){var a=new ActiveXObject("MSXML2.DOMDocument");if(a){a.resolveExternals=false;a.validateOnParse=false;try{a.setProperty("ProhibitDTD",true);a.setProperty("MaxXMLSize",goog.dom.xml.MAX_XML_SIZE_KB);a.setProperty("MaxElementDepth",goog.dom.xml.MAX_ELEMENT_DEPTH)}catch(a){}}return a};goog.provide("ol.xml");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.dom.xml");goog.require("goog.object");goog.require("goog.userAgent");ol.xml.NodeStackItem;ol.xml.Parser;ol.xml.Serializer;ol.xml.DOCUMENT=goog.dom.xml.createDocument();ol.xml.createElementNS_=function(a,b){return ol.xml.DOCUMENT.createElementNS(a,b)};ol.xml.createElementNSActiveX_=function(a,b){if(goog.isNull(a)){a=""}return ol.xml.DOCUMENT.createNode(1,b,a)};ol.xml.createElementNS=document.implementation&&document.implementation.createDocument?ol.xml.createElementNS_:ol.xml.createElementNSActiveX_;ol.xml.getAllTextContent=function(a,b){return ol.xml.getAllTextContent_(a,b,[]).join("")};ol.xml.getAllTextContent_=function(a,b,c){if(a.nodeType==goog.dom.NodeType.CDATA_SECTION||a.nodeType==goog.dom.NodeType.TEXT){if(b){c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{c.push(a.nodeValue)}}else{var d;for(d=a.firstChild;!goog.isNull(d);d=d.nextSibling){ol.xml.getAllTextContent_(d,b,c)}}return c};ol.xml.getLocalName_=function(a){return a.localName};ol.xml.getLocalNameIE_=function(a){var b=a.localName;if(goog.isDef(b)){return b}var c=a.baseName;goog.asserts.assert(goog.isDefAndNotNull(c),"Failed to get localName/baseName of node %s",a);return c};ol.xml.getLocalName=goog.userAgent.IE?ol.xml.getLocalNameIE_:ol.xml.getLocalName_;ol.xml.isDocument_=function(a){return a instanceof Document};ol.xml.isDocumentIE_=function(a){return goog.isObject(a)&&a.nodeType==goog.dom.NodeType.DOCUMENT};ol.xml.isDocument=goog.userAgent.IE?ol.xml.isDocumentIE_:ol.xml.isDocument_;ol.xml.isNode_=function(a){return a instanceof Node};ol.xml.isNodeIE_=function(a){return goog.isObject(a)&&goog.isDef(a.nodeType)};ol.xml.isNode=goog.userAgent.IE?ol.xml.isNodeIE_:ol.xml.isNode_;ol.xml.getAttributeNS_=function(a,b,c){return a.getAttributeNS(b,c)||""};ol.xml.getAttributeNSActiveX_=function(a,b,c){var d="";var e=ol.xml.getAttributeNodeNS(a,b,c);if(goog.isDef(e)){d=e.nodeValue}return d};ol.xml.getAttributeNS=document.implementation&&document.implementation.createDocument?ol.xml.getAttributeNS_:ol.xml.getAttributeNSActiveX_;ol.xml.getAttributeNodeNS_=function(a,b,c){return a.getAttributeNodeNS(b,c)};ol.xml.getAttributeNodeNSActiveX_=function(a,b,c){var d=null;var e=a.attributes;var f,g;for(var h=0,i=e.length;h<i;++h){f=e[h];if(f.namespaceURI==b){g=f.prefix?f.prefix+":"+c:c;if(g==f.nodeName){d=f;break}}}return d};ol.xml.getAttributeNodeNS=document.implementation&&document.implementation.createDocument?ol.xml.getAttributeNodeNS_:ol.xml.getAttributeNodeNSActiveX_;ol.xml.setAttributeNS_=function(a,b,c,d){a.setAttributeNS(b,c,d)};ol.xml.setAttributeNSActiveX_=function(a,b,c,d){if(!goog.isNull(b)){var e=a.ownerDocument.createNode(2,c,b);e.nodeValue=d;a.setAttributeNode(e)}else{a.setAttribute(c,d)}};ol.xml.setAttributeNS=document.implementation&&document.implementation.createDocument?ol.xml.setAttributeNS_:ol.xml.setAttributeNSActiveX_;ol.xml.parse=function(a){return(new DOMParser).parseFromString(a,"application/xml")};ol.xml.makeArrayExtender=function(a,b){return function(c,d){var e=a.call(b,c,d);if(goog.isDef(e)){goog.asserts.assert(goog.isArray(e),"valueReader function is expected to return an array of values");var f=d[d.length-1];goog.asserts.assert(goog.isArray(f),"objectStack is supposed to be an array of arrays");goog.array.extend(f,e)}}};ol.xml.makeArrayPusher=function(a,b){return function(c,d){var e=a.call(goog.isDef(b)?b:this,c,d);if(goog.isDef(e)){var f=d[d.length-1];goog.asserts.assert(goog.isArray(f),"objectStack is supposed to be an array of arrays");f.push(e)}}};ol.xml.makeReplacer=function(a,b){return function(c,d){var e=a.call(goog.isDef(b)?b:this,c,d);if(goog.isDef(e)){d[d.length-1]=e}}};ol.xml.makeObjectPropertyPusher=function(a,b,c){goog.asserts.assert(goog.isDef(a),"undefined valueReader, expected function(this: T, Node, Array.<*>)");return function(d,e){var f=a.call(goog.isDef(c)?c:this,d,e);if(goog.isDef(f)){var g=e[e.length-1];var h=goog.isDef(b)?b:d.localName;goog.asserts.assert(goog.isObject(g),"entity from stack was not an object");var i=goog.object.setIfUndefined(g,h,[]);i.push(f)}}};ol.xml.makeObjectPropertySetter=function(a,b,c){goog.asserts.assert(goog.isDef(a),"undefined valueReader, expected function(this: T, Node, Array.<*>)");return function(d,e){var f=a.call(goog.isDef(c)?c:this,d,e);if(goog.isDef(f)){var g=e[e.length-1];var h=goog.isDef(b)?b:d.localName;goog.asserts.assert(goog.isObject(g),"entity from stack was not an object");g[h]=f}}};ol.xml.makeChildAppender=function(a,b){return function(c,d,e){a.call(goog.isDef(b)?b:this,c,d,e);var f=e[e.length-1];goog.asserts.assert(goog.isObject(f),"entity from stack was not an object");var g=f.node;goog.asserts.assert(ol.xml.isNode(g)||ol.xml.isDocument(g),"expected parentNode %s to be a Node or a Document",g);g.appendChild(c)}};ol.xml.makeArraySerializer=function(a,b){var c,d;return function(b,e,f){if(!goog.isDef(c)){c={};var g={};g[b.localName]=a;c[b.namespaceURI]=g;d=ol.xml.makeSimpleNodeFactory(b.localName)}ol.xml.serialize(c,d,e,f)}};ol.xml.makeSimpleNodeFactory=function(a,b){var c=a;return function(a,d,e){var f=d[d.length-1];var g=f.node;goog.asserts.assert(ol.xml.isNode(g)||ol.xml.isDocument(g),"expected node %s to be a Node or a Document",g);var h=c;if(!goog.isDef(h)){h=e}var i=b;if(!goog.isDef(b)){i=g.namespaceURI}goog.asserts.assert(goog.isDef(h),"nodeName was undefined");return ol.xml.createElementNS(i,h)}};ol.xml.OBJECT_PROPERTY_NODE_FACTORY=ol.xml.makeSimpleNodeFactory();ol.xml.makeSequence=function(a,b){var c=b.length;var d=new Array(c);for(var e=0;e<c;++e){d[e]=a[b[e]]}return d};ol.xml.makeStructureNS=function(a,b,c){var d=goog.isDef(c)?c:{};var e,f;for(e=0,f=a.length;e<f;++e){d[a[e]]=b}return d};ol.xml.parseNode=function(a,b,c,d){var e;for(e=b.firstElementChild;!goog.isNull(e);e=e.nextElementSibling){var f=a[e.namespaceURI];if(goog.isDef(f)){var g=f[e.localName];if(goog.isDef(g)){g.call(d,e,c)}}}};ol.xml.pushParseAndPop=function(a,b,c,d,e){d.push(a);ol.xml.parseNode(b,c,d,e);return d.pop()};ol.xml.serialize=function(a,b,c,d,e,f){var g=(goog.isDef(e)?e:c).length;var h,i;for(var j=0;j<g;++j){h=c[j];if(goog.isDef(h)){i=b.call(f,h,d,goog.isDef(e)?e[j]:undefined);if(goog.isDef(i)){a[i.namespaceURI][i.localName].call(f,i,h,d)}}}};ol.xml.pushSerializeAndPop=function(a,b,c,d,e,f,g){e.push(a);ol.xml.serialize(b,c,d,e,f,g);return e.pop()};goog.provide("ol.FeatureLoader");goog.provide("ol.FeatureUrlFunction");goog.provide("ol.featureloader");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.net.EventType");goog.require("goog.net.XhrIo");goog.require("goog.net.XhrIo.ResponseType");goog.require("ol.format.FormatType");goog.require("ol.xml");ol.FeatureLoader;ol.FeatureUrlFunction;ol.featureloader.loadFeaturesXhr=function(a,b,c){return function(d,e,f){var g=new goog.net.XhrIo;g.setResponseType(goog.net.XhrIo.ResponseType.TEXT);goog.events.listen(g,goog.net.EventType.COMPLETE,function(a){var d=a.target;goog.asserts.assertInstanceof(d,goog.net.XhrIo,"event.target/xhrIo is an instance of goog.net.XhrIo");if(d.isSuccess()){var e=b.getType();var g;if(e==ol.format.FormatType.JSON){g=d.getResponseText()}else if(e==ol.format.FormatType.TEXT){g=d.getResponseText()}else if(e==ol.format.FormatType.XML){if(!goog.userAgent.IE){g=d.getResponseXml()}if(!goog.isDefAndNotNull(g)){g=ol.xml.parse(d.getResponseText())}}else{goog.asserts.fail("unexpected format type")}if(goog.isDefAndNotNull(g)){var h=b.readFeatures(g,{featureProjection:f});c.call(this,h)}else{goog.asserts.fail("undefined or null source")}}else{}goog.dispose(d)},false,this);if(goog.isFunction(a)){g.send(a(d,e,f))}else{g.send(a)}}};ol.featureloader.xhr=function(a,b){return ol.featureloader.loadFeaturesXhr(a,b,function(a){this.addFeatures(a)})};goog.provide("ol.LoadingStrategy");goog.provide("ol.loadingstrategy");goog.require("ol.TileCoord");ol.LoadingStrategy;ol.loadingstrategy.all=function(a,b){return[[-Infinity,-Infinity,Infinity,Infinity]]};ol.loadingstrategy.bbox=function(a,b){return[a]};ol.loadingstrategy.tile=function(a){return function(b,c){var d=a.getZForResolution(c);var e=a.getTileRangeForExtentAndZ(b,d);var f=[];var g=[d,0,0];for(g[1]=e.minX;g[1]<=e.maxX;++g[1]){for(g[2]=e.minY;g[2]<=e.maxY;++g[2]){f.push(a.getTileCoordExtent(g))}}return f}};goog.provide("ol.ext.rbush");ol.ext.rbush;(function(){var a={};var b={exports:a};var c;(function(){"use strict";function a(b,c){if(!(this instanceof a))return new a(b,c);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));if(c){this._initFormat(c)}this.clear()}a.prototype={all:function(){return this._all(this.data,[])},search:function(a){var b=this.data,c=[],d=this.toBBox;if(!o(a,b.bbox))return c;var e=[],f,g,h,i;while(b){for(f=0,g=b.children.length;f<g;f++){h=b.children[f];i=b.leaf?d(h):h.bbox;if(o(a,i)){if(b.leaf)c.push(h);else if(n(a,i))this._all(h,c);else e.push(h)}}b=e.pop()}return c},load:function(a){if(!(a&&a.length))return this;if(a.length<this._minEntries){for(var b=0,c=a.length;b<c;b++){this.insert(a[b])}return this}var d=this._build(a.slice(),0,a.length-1,0);if(!this.data.children.length){this.data=d}else if(this.data.height===d.height){this._splitRoot(this.data,d)}else{if(this.data.height<d.height){var e=this.data;this.data=d;d=e}this._insert(d,this.data.height-d.height-1,true)}return this},insert:function(a){if(a)this._insert(a,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,bbox:f(),leaf:true};return this},remove:function(a){if(!a)return this;var b=this.data,c=this.toBBox(a),d=[],e=[],f,g,h,i;while(b||d.length){if(!b){b=d.pop();g=d[d.length-1];f=e.pop();i=true}if(b.leaf){h=b.children.indexOf(a);if(h!==-1){b.children.splice(h,1);d.push(b);this._condense(d);return this}}if(!i&&!b.leaf&&n(b.bbox,c)){d.push(b);e.push(f);f=0;g=b;b=b.children[0]}else if(g){f++;b=g.children[f];i=false}else b=null}return this},toBBox:function(a){return a},compareMinX:function(a,b){return a[0]-b[0]},compareMinY:function(a,b){return a[1]-b[1]},toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,b){var c=[];while(a){if(a.leaf)b.push.apply(b,a.children);else c.push.apply(c,a.children);a=c.pop()}return b},_build:function(a,b,c,e){var f=c-b+1,g=this._maxEntries,h;if(f<=g){h={children:a.slice(b,c+1),height:1,bbox:null,leaf:true};d(h,this.toBBox);return h}if(!e){e=Math.ceil(Math.log(f)/Math.log(g));g=Math.ceil(f/Math.pow(g,e-1))}h={children:[],height:e,bbox:null};var i=Math.ceil(f/g),j=i*Math.ceil(Math.sqrt(g)),k,l,m,n;p(a,b,c,j,this.compareMinX);for(k=b;k<=c;k+=j){m=Math.min(k+j-1,c);p(a,k,m,i,this.compareMinY);for(l=k;l<=m;l+=i){n=Math.min(l+i-1,m);h.children.push(this._build(a,l,n,e-1))}}d(h,this.toBBox);return h},_chooseSubtree:function(a,b,c,d){var e,f,g,h,i,k,m,n;while(true){d.push(b);if(b.leaf||d.length-1===c)break;m=n=Infinity;for(e=0,f=b.children.length;e<f;e++){g=b.children[e];i=j(g.bbox);k=l(a,g.bbox)-i;if(k<n){n=k;m=i<m?i:m;h=g}else if(k===n){if(i<m){m=i;h=g}}}b=h}return b},_insert:function(a,b,c){var d=this.toBBox,e=c?a.bbox:d(a),f=[];var h=this._chooseSubtree(e,this.data,b,f);h.children.push(a);g(h.bbox,e);while(b>=0){if(f[b].children.length>this._maxEntries){this._split(f,b);b--}else break}this._adjustParentBBoxes(e,f,b)},_split:function(a,b){var c=a[b],e=c.children.length,f=this._minEntries;this._chooseSplitAxis(c,f,e);var g={children:c.children.splice(this._chooseSplitIndex(c,f,e)),height:c.height};if(c.leaf)g.leaf=true;d(c,this.toBBox);d(g,this.toBBox);if(b)a[b-1].children.push(g);else this._splitRoot(c,g)},_splitRoot:function(a,b){this.data={children:[a,b],height:a.height+1};d(this.data,this.toBBox)},_chooseSplitIndex:function(a,b,c){var d,f,g,h,i,k,l,n;k=l=Infinity;for(d=b;d<=c-b;d++){f=e(a,0,d,this.toBBox);g=e(a,d,c,this.toBBox);h=m(f,g);i=j(f)+j(g);if(h<k){k=h;n=d;l=i<l?i:l}else if(h===k){if(i<l){l=i;n=d}}}return n},_chooseSplitAxis:function(a,b,c){var d=a.leaf?this.compareMinX:h,e=a.leaf?this.compareMinY:i,f=this._allDistMargin(a,b,c,d),g=this._allDistMargin(a,b,c,e);if(f<g)a.children.sort(d)},_allDistMargin:function(a,b,c,d){a.children.sort(d);var f=this.toBBox,h=e(a,0,b,f),i=e(a,c-b,c,f),j=k(h)+k(i),l,m;for(l=b;l<c-b;l++){m=a.children[l];g(h,a.leaf?f(m):m.bbox);j+=k(h)}for(l=c-b-1;l>=b;l--){m=a.children[l];g(i,a.leaf?f(m):m.bbox);j+=k(i)}return j},_adjustParentBBoxes:function(a,b,c){for(var d=c;d>=0;d--){g(b[d].bbox,a)}},_condense:function(a){for(var b=a.length-1,c;b>=0;b--){if(a[b].children.length===0){if(b>0){c=a[b-1].children;c.splice(c.indexOf(a[b]),1)}else this.clear()}else d(a[b],this.toBBox)}},_initFormat:function(a){var b=["return a"," - b",";"];this.compareMinX=new Function("a","b",b.join(a[0]));this.compareMinY=new Function("a","b",b.join(a[1]));this.toBBox=new Function("a","return [a"+a.join(", a")+"];")}};function d(a,b){a.bbox=e(a,0,a.children.length,b)}function e(a,b,c,d){var e=f();for(var h=b,i;h<c;h++){i=a.children[h];g(e,a.leaf?d(i):i.bbox)}return e}function f(){return[Infinity,Infinity,-Infinity,-Infinity]}function g(a,b){a[0]=Math.min(a[0],b[0]);a[1]=Math.min(a[1],b[1]);a[2]=Math.max(a[2],b[2]);a[3]=Math.max(a[3],b[3]);return a}function h(a,b){return a.bbox[0]-b.bbox[0]}function i(a,b){return a.bbox[1]-b.bbox[1]}function j(a){return(a[2]-a[0])*(a[3]-a[1])}function k(a){return a[2]-a[0]+(a[3]-a[1])}function l(a,b){return(Math.max(b[2],a[2])-Math.min(b[0],a[0]))*(Math.max(b[3],a[3])-Math.min(b[1],a[1]))}function m(a,b){var c=Math.max(a[0],b[0]),d=Math.max(a[1],b[1]),e=Math.min(a[2],b[2]),f=Math.min(a[3],b[3]);return Math.max(0,e-c)*Math.max(0,f-d)}function n(a,b){return a[0]<=b[0]&&a[1]<=b[1]&&b[2]<=a[2]&&b[3]<=a[3]}function o(a,b){return b[0]<=a[2]&&b[1]<=a[3]&&b[2]>=a[0]&&b[3]>=a[1]}function p(a,b,c,d,e){var f=[b,c],g;while(f.length){c=f.pop();b=f.pop();if(c-b<=d)continue;g=b+Math.ceil((c-b)/d/2)*d;q(a,b,c,g,e);f.push(b,g,g,c)}}function q(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;while(c>b){if(c-b>600){f=c-b+1;g=d-b+1;h=Math.log(f);i=.5*Math.exp(2*h/3);j=.5*Math.sqrt(h*i*(f-i)/f)*(g-f/2<0?-1:1);k=Math.max(b,Math.floor(d-g*i/f+j));l=Math.min(c,Math.floor(d+(f-g)*i/f+j));q(a,k,l,d,e)}m=a[d];g=b;n=c;r(a,b,d);if(e(a[c],m)>0)r(a,b,c);while(g<n){r(a,g,n);g++;n--;while(e(a[g],m)<0)g++;while(e(a[n],m)>0)n--}if(e(a[b],m)===0)r(a,b,n);else{n++;r(a,n,c)}if(n<=d)b=n+1;if(d<=n)c=n-1}}function r(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}if(typeof c==="function"&&c.amd)c("rbush",function(){return a});else if(typeof b!=="undefined")b.exports=a;else if(typeof self!=="undefined")self.rbush=a;else window.rbush=a})();ol.ext.rbush=b.exports})();goog.provide("ol.structs.RBush");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.ext.rbush");goog.require("ol.extent");ol.structs.RBush=function(a){this.rbush_=ol.ext.rbush(a);this.items_={};if(goog.DEBUG){this.readers_=0}};ol.structs.RBush.prototype.insert=function(a,b){if(goog.DEBUG&&this.readers_){throw new Error("Can not insert value while reading")}var c=[a[0],a[1],a[2],a[3],b];this.rbush_.insert(c);goog.asserts.assert(!goog.object.containsKey(this.items_,goog.getUid(b)),"uid (%s) of value (%s) already exists",goog.getUid(b),b);this.items_[goog.getUid(b)]=c};ol.structs.RBush.prototype.load=function(a,b){if(goog.DEBUG&&this.readers_){throw new Error("Can not insert values while reading")}goog.asserts.assert(a.length===b.length,"extens and values must have same length (%s === %s)",a.length,b.length);var c=new Array(b.length);for(var d=0,e=b.length;d<e;d++){var f=a[d];var g=b[d];var h=[f[0],f[1],f[2],f[3],g];c[d]=h;goog.asserts.assert(!goog.object.containsKey(this.items_,goog.getUid(g)),"uid (%s) of value (%s) already exists",goog.getUid(g),g);this.items_[goog.getUid(g)]=h}this.rbush_.load(c)};ol.structs.RBush.prototype.remove=function(a){if(goog.DEBUG&&this.readers_){throw new Error("Can not remove value while reading")}var b=goog.getUid(a);goog.asserts.assert(goog.object.containsKey(this.items_,b),"uid (%s) of value (%s) does not exist",b,a);var c=this.items_[b];goog.object.remove(this.items_,b);return this.rbush_.remove(c)!==null};ol.structs.RBush.prototype.update=function(a,b){var c=goog.getUid(b);goog.asserts.assert(goog.object.containsKey(this.items_,c),"uid (%s) of value (%s) does not exist",c,b);var d=this.items_[c];if(!ol.extent.equals(d.slice(0,4),a)){if(goog.DEBUG&&this.readers_){throw new Error("Can not update extent while reading")}this.remove(b);this.insert(a,b)}};ol.structs.RBush.prototype.getAll=function(){var a=this.rbush_.all();return goog.array.map(a,function(a){return a[4]})};ol.structs.RBush.prototype.getInExtent=function(a){var b=this.rbush_.search(a);return goog.array.map(b,function(a){return a[4]})};ol.structs.RBush.prototype.forEach=function(a,b){if(goog.DEBUG){++this.readers_;try{return this.forEach_(this.getAll(),a,b)}finally{--this.readers_}}else{return this.forEach_(this.getAll(),a,b)}};ol.structs.RBush.prototype.forEachInExtent=function(a,b,c){if(goog.DEBUG){++this.readers_;try{return this.forEach_(this.getInExtent(a),b,c)}finally{--this.readers_}}else{return this.forEach_(this.getInExtent(a),b,c)}};ol.structs.RBush.prototype.forEach_=function(a,b,c){var d;for(var e=0,f=a.length;e<f;e++){d=b.call(c,a[e]);if(d){return d}}return d};ol.structs.RBush.prototype.isEmpty=function(){return goog.object.isEmpty(this.items_)};ol.structs.RBush.prototype.clear=function(){this.rbush_.clear();this.items_={}};ol.structs.RBush.prototype.getExtent=function(a){return this.rbush_.data.bbox};goog.provide("ol.source.Vector");goog.provide("ol.source.VectorEvent");goog.provide("ol.source.VectorEventType");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.Collection");goog.require("ol.CollectionEventType");goog.require("ol.Extent");goog.require("ol.Feature");goog.require("ol.FeatureLoader");goog.require("ol.LoadingStrategy");goog.require("ol.ObjectEventType");goog.require("ol.extent");goog.require("ol.featureloader");goog.require("ol.loadingstrategy");goog.require("ol.proj");goog.require("ol.source.Source");goog.require("ol.source.State");goog.require("ol.structs.RBush");ol.source.VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};ol.source.Vector=function(a){var b=goog.isDef(a)?a:{};goog.base(this,{attributions:b.attributions,logo:b.logo,projection:undefined,state:ol.source.State.READY,wrapX:goog.isDef(b.wrapX)?b.wrapX:true});this.loader_=goog.nullFunction;if(goog.isDef(b.loader)){this.loader_=b.loader}else if(goog.isDef(b.url)){goog.asserts.assert(goog.isDef(b.format),"format must be set when url is set");this.loader_=ol.featureloader.xhr(b.url,b.format)}this.strategy_=goog.isDef(b.strategy)?b.strategy:ol.loadingstrategy.all;var c=goog.isDef(b.useSpatialIndex)?b.useSpatialIndex:true;this.featuresRtree_=c?new ol.structs.RBush:null;this.loadedExtentsRtree_=new ol.structs.RBush;this.nullGeometryFeatures_={};this.idIndex_={};this.undefIdIndex_={};this.featureChangeKeys_={};this.featuresCollection_=null;var d,e;if(b.features instanceof ol.Collection){d=b.features;e=d.getArray()}else if(goog.isArray(b.features)){e=b.features}if(!c&&!goog.isDef(d)){d=new ol.Collection(e)}if(goog.isDef(e)){this.addFeaturesInternal(e)}if(goog.isDef(d)){this.bindFeaturesCollection_(d)}};goog.inherits(ol.source.Vector,ol.source.Source);ol.source.Vector.prototype.addFeature=function(a){this.addFeatureInternal(a);this.changed()};ol.source.Vector.prototype.addFeatureInternal=function(a){var b=goog.getUid(a).toString();if(!this.addToIndex_(b,a)){return}this.setupChangeEvents_(b,a);var c=a.getGeometry();if(goog.isDefAndNotNull(c)){var d=c.getExtent();if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.insert(d,a)}}else{this.nullGeometryFeatures_[b]=a}this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.ADDFEATURE,a))};ol.source.Vector.prototype.setupChangeEvents_=function(a,b){goog.asserts.assert(!(a in this.featureChangeKeys_),"key (%s) not yet registered in featureChangeKey",a);this.featureChangeKeys_[a]=[goog.events.listen(b,goog.events.EventType.CHANGE,this.handleFeatureChange_,false,this),goog.events.listen(b,ol.ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,false,this)]};ol.source.Vector.prototype.addToIndex_=function(a,b){var c=true;var d=b.getId();if(goog.isDef(d)){if(!(d.toString()in this.idIndex_)){this.idIndex_[d.toString()]=b}else{c=false}}else{goog.asserts.assert(!(a in this.undefIdIndex_),"Feature already added to the source");this.undefIdIndex_[a]=b}return c};ol.source.Vector.prototype.addFeatures=function(a){this.addFeaturesInternal(a);this.changed()};ol.source.Vector.prototype.addFeaturesInternal=function(a){var b,c,d,e;var f=[];var g=[];var h=[];for(c=0,d=a.length;c<d;c++){e=a[c];b=goog.getUid(e).toString();if(this.addToIndex_(b,e)){g.push(e)}}for(c=0,d=g.length;c<d;c++){e=g[c];b=goog.getUid(e).toString();this.setupChangeEvents_(b,e);var i=e.getGeometry();if(goog.isDefAndNotNull(i)){var j=i.getExtent();f.push(j);h.push(e)}else{this.nullGeometryFeatures_[b]=e}}if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.load(f,h)}for(c=0,d=g.length;c<d;c++){this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.ADDFEATURE,g[c]))}};ol.source.Vector.prototype.bindFeaturesCollection_=function(a){goog.asserts.assert(goog.isNull(this.featuresCollection_),"bindFeaturesCollection can only be called once");var b=false;goog.events.listen(this,ol.source.VectorEventType.ADDFEATURE,function(c){if(!b){b=true;a.push(c.feature);b=false}});goog.events.listen(this,ol.source.VectorEventType.REMOVEFEATURE,function(c){if(!b){b=true;a.remove(c.feature);b=false}});goog.events.listen(a,ol.CollectionEventType.ADD,function(a){if(!b){var c=a.element;goog.asserts.assertInstanceof(c,ol.Feature);b=true;this.addFeature(c);b=false}},false,this);goog.events.listen(a,ol.CollectionEventType.REMOVE,function(a){if(!b){
var c=a.element;goog.asserts.assertInstanceof(c,ol.Feature);b=true;this.removeFeature(c);b=false}},false,this);this.featuresCollection_=a};ol.source.Vector.prototype.clear=function(a){if(a){for(var b in this.featureChangeKeys_){var c=this.featureChangeKeys_[b];goog.array.forEach(c,goog.events.unlistenByKey)}if(goog.isNull(this.featuresCollection_)){this.featureChangeKeys_={};this.idIndex_={};this.undefIdIndex_={}}}else{var d=this.removeFeatureInternal;if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.forEach(d,this);goog.object.forEach(this.nullGeometryFeatures_,d,this)}}if(!goog.isNull(this.featuresCollection_)){this.featuresCollection_.clear()}goog.asserts.assert(goog.object.isEmpty(this.featureChangeKeys_),"featureChangeKeys is an empty object now");goog.asserts.assert(goog.object.isEmpty(this.idIndex_),"idIndex is an empty object now");goog.asserts.assert(goog.object.isEmpty(this.undefIdIndex_),"undefIdIndex is an empty object now");if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.clear()}this.loadedExtentsRtree_.clear();this.nullGeometryFeatures_={};var e=new ol.source.VectorEvent(ol.source.VectorEventType.CLEAR);this.dispatchEvent(e);this.changed()};ol.source.Vector.prototype.forEachFeature=function(a,b){if(!goog.isNull(this.featuresRtree_)){return this.featuresRtree_.forEach(a,b)}else if(!goog.isNull(this.featuresCollection_)){return this.featuresCollection_.forEach(a,b)}};ol.source.Vector.prototype.forEachFeatureAtCoordinateDirect=function(a,b,c){var d=[a[0],a[1],a[0],a[1]];return this.forEachFeatureInExtent(d,function(d){var e=d.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(e),"feature geometry is defined and not null");if(e.containsCoordinate(a)){return b.call(c,d)}else{return undefined}})};ol.source.Vector.prototype.forEachFeatureInExtent=function(a,b,c){if(!goog.isNull(this.featuresRtree_)){return this.featuresRtree_.forEachInExtent(a,b,c)}else if(!goog.isNull(this.featuresCollection_)){return this.featuresCollection_.forEach(b,c)}};ol.source.Vector.prototype.forEachFeatureInExtentAtResolution=function(a,b,c,d){return this.forEachFeatureInExtent(a,c,d)};ol.source.Vector.prototype.forEachFeatureIntersectingExtent=function(a,b,c){return this.forEachFeatureInExtent(a,function(d){var e=d.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(e),"feature geometry is defined and not null");if(e.intersectsExtent(a)){var f=b.call(c,d);if(f){return f}}})};ol.source.Vector.prototype.getFeaturesCollection=function(){return this.featuresCollection_};ol.source.Vector.prototype.getFeatures=function(){var a;if(!goog.isNull(this.featuresCollection_)){a=this.featuresCollection_.getArray()}else if(!goog.isNull(this.featuresRtree_)){a=this.featuresRtree_.getAll();if(!goog.object.isEmpty(this.nullGeometryFeatures_)){goog.array.extend(a,goog.object.getValues(this.nullGeometryFeatures_))}}goog.asserts.assert(goog.isDef(a),"Neither featuresRtree_ nor featuresCollection_ are available");return a};ol.source.Vector.prototype.getFeaturesAtCoordinate=function(a){var b=[];this.forEachFeatureAtCoordinateDirect(a,function(a){b.push(a)});return b};ol.source.Vector.prototype.getFeaturesInExtent=function(a){goog.asserts.assert(!goog.isNull(this.featuresRtree_),"getFeaturesInExtent does not work when useSpatialIndex is set to false");return this.featuresRtree_.getInExtent(a)};ol.source.Vector.prototype.getClosestFeatureToCoordinate=function(a){var b=a[0];var c=a[1];var d=null;var e=[NaN,NaN];var f=Infinity;var g=[-Infinity,-Infinity,Infinity,Infinity];goog.asserts.assert(!goog.isNull(this.featuresRtree_),"getClosestFeatureToCoordinate does not work with useSpatialIndex set "+"to false");this.featuresRtree_.forEachInExtent(g,function(a){var h=a.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(h),"feature geometry is defined and not null");var i=f;f=h.closestPointXY(b,c,e,f);if(f<i){d=a;var j=Math.sqrt(f);g[0]=b-j;g[1]=c-j;g[2]=b+j;g[3]=c+j}});return d};ol.source.Vector.prototype.getExtent=function(){goog.asserts.assert(!goog.isNull(this.featuresRtree_),"getExtent does not work when useSpatialIndex is set to false");return this.featuresRtree_.getExtent()};ol.source.Vector.prototype.getFeatureById=function(a){var b=this.idIndex_[a.toString()];return goog.isDef(b)?b:null};ol.source.Vector.prototype.handleFeatureChange_=function(a){var b=a.target;var c=goog.getUid(b).toString();var d=b.getGeometry();if(!goog.isDefAndNotNull(d)){if(!(c in this.nullGeometryFeatures_)){if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.remove(b)}this.nullGeometryFeatures_[c]=b}}else{var e=d.getExtent();if(c in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[c];if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.insert(e,b)}}else{if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.update(e,b)}}}var f=b.getId();var g;if(goog.isDef(f)){var h=f.toString();if(c in this.undefIdIndex_){delete this.undefIdIndex_[c];this.idIndex_[h]=b}else{if(this.idIndex_[h]!==b){g=this.removeFromIdIndex_(b);goog.asserts.assert(g,"Expected feature to be removed from index");this.idIndex_[h]=b}}}else{if(!(c in this.undefIdIndex_)){g=this.removeFromIdIndex_(b);goog.asserts.assert(g,"Expected feature to be removed from index");this.undefIdIndex_[c]=b}else{goog.asserts.assert(this.undefIdIndex_[c]===b,"feature keyed under %s in undefIdKeys",c)}}this.changed();this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.CHANGEFEATURE,b))};ol.source.Vector.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&goog.object.isEmpty(this.nullGeometryFeatures_)};ol.source.Vector.prototype.loadFeatures=function(a,b,c){var d=this.loadedExtentsRtree_;var e=this.strategy_(a,b);var f,g;for(f=0,g=e.length;f<g;++f){var h=e[f];var i=d.forEachInExtent(h,function(a){return ol.extent.containsExtent(a.extent,h)});if(!i){this.loader_.call(this,h,b,c);d.insert(h,{extent:h.slice()})}}};ol.source.Vector.prototype.removeFeature=function(a){var b=goog.getUid(a).toString();if(b in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[b]}else{if(!goog.isNull(this.featuresRtree_)){this.featuresRtree_.remove(a)}}this.removeFeatureInternal(a);this.changed()};ol.source.Vector.prototype.removeFeatureInternal=function(a){var b=goog.getUid(a).toString();goog.asserts.assert(b in this.featureChangeKeys_,"featureKey exists in featureChangeKeys");goog.array.forEach(this.featureChangeKeys_[b],goog.events.unlistenByKey);delete this.featureChangeKeys_[b];var c=a.getId();if(goog.isDef(c)){delete this.idIndex_[c.toString()]}else{delete this.undefIdIndex_[b]}this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.REMOVEFEATURE,a))};ol.source.Vector.prototype.removeFromIdIndex_=function(a){var b=false;for(var c in this.idIndex_){if(this.idIndex_[c]===a){delete this.idIndex_[c];b=true;break}}return b};ol.source.VectorEvent=function(a,b){goog.base(this,a);this.feature=b};goog.inherits(ol.source.VectorEvent,goog.events.Event);goog.provide("ol.source.ImageVector");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.vec.Mat4");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.render.canvas.ReplayGroup");goog.require("ol.renderer.vector");goog.require("ol.source.ImageCanvas");goog.require("ol.source.Vector");goog.require("ol.style.Style");goog.require("ol.vec.Mat4");ol.source.ImageVector=function(a){this.source_=a.source;this.transform_=goog.vec.Mat4.createNumber();this.canvasContext_=ol.dom.createCanvasContext2D();this.canvasSize_=[0,0];this.replayGroup_=null;goog.base(this,{attributions:a.attributions,canvasFunction:goog.bind(this.canvasFunctionInternal_,this),logo:a.logo,projection:a.projection,ratio:a.ratio,resolutions:a.resolutions,state:this.source_.getState()});this.style_=null;this.styleFunction_=undefined;this.setStyle(a.style);goog.events.listen(this.source_,goog.events.EventType.CHANGE,this.handleSourceChange_,undefined,this)};goog.inherits(ol.source.ImageVector,ol.source.ImageCanvas);ol.source.ImageVector.prototype.canvasFunctionInternal_=function(a,b,c,d,e){var f=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(b,c),a,b);this.source_.loadFeatures(a,b,e);var g=false;this.source_.forEachFeatureInExtentAtResolution(a,b,function(a){g=g||this.renderFeature_(a,b,c,f)},this);f.finish();if(g){return null}if(this.canvasSize_[0]!=d[0]||this.canvasSize_[1]!=d[1]){this.canvasContext_.canvas.width=d[0];this.canvasContext_.canvas.height=d[1];this.canvasSize_[0]=d[0];this.canvasSize_[1]=d[1]}else{this.canvasContext_.clearRect(0,0,d[0],d[1])}var h=this.getTransform_(ol.extent.getCenter(a),b,c,d);f.replay(this.canvasContext_,c,h,0,{});this.replayGroup_=f;return this.canvasContext_.canvas};ol.source.ImageVector.prototype.forEachFeatureAtCoordinate=function(a,b,c,d,e){if(goog.isNull(this.replayGroup_)){return undefined}else{var f={};return this.replayGroup_.forEachFeatureAtCoordinate(a,b,0,d,function(a){goog.asserts.assert(goog.isDef(a),"passed a feature");var b=goog.getUid(a).toString();if(!(b in f)){f[b]=true;return e(a)}})}};ol.source.ImageVector.prototype.getSource=function(){return this.source_};ol.source.ImageVector.prototype.getStyle=function(){return this.style_};ol.source.ImageVector.prototype.getStyleFunction=function(){return this.styleFunction_};ol.source.ImageVector.prototype.getTransform_=function(a,b,c,d){return ol.vec.Mat4.makeTransform2D(this.transform_,d[0]/2,d[1]/2,c/b,-c/b,0,-a[0],-a[1])};ol.source.ImageVector.prototype.handleImageChange_=function(a){this.changed()};ol.source.ImageVector.prototype.handleSourceChange_=function(){this.setState(this.source_.getState())};ol.source.ImageVector.prototype.renderFeature_=function(a,b,c,d){var e;if(goog.isDef(a.getStyleFunction())){e=a.getStyleFunction().call(a,b)}else if(goog.isDef(this.styleFunction_)){e=this.styleFunction_(a,b)}if(!goog.isDefAndNotNull(e)){return false}var f,g,h=false;for(f=0,g=e.length;f<g;++f){h=ol.renderer.vector.renderFeature(d,a,e[f],ol.renderer.vector.getSquaredTolerance(b,c),this.handleImageChange_,this)||h}return h};ol.source.ImageVector.prototype.setStyle=function(a){this.style_=goog.isDef(a)?a:ol.style.defaultStyleFunction;this.styleFunction_=goog.isNull(a)?undefined:ol.style.createStyleFunction(this.style_);this.changed()};goog.provide("ol.renderer.canvas.ImageLayer");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.vec.Mat4");goog.require("ol.ImageBase");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.proj");goog.require("ol.renderer.canvas.Layer");goog.require("ol.source.ImageVector");goog.require("ol.vec.Mat4");ol.renderer.canvas.ImageLayer=function(a){goog.base(this,a);this.image_=null;this.imageTransform_=goog.vec.Mat4.createNumber();this.imageTransformInv_=null;this.hitCanvasContext_=null};goog.inherits(ol.renderer.canvas.ImageLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.ImageLayer.prototype.forEachFeatureAtCoordinate=function(a,b,c,d){var e=this.getLayer();var f=e.getSource();var g=b.viewState.resolution;var h=b.viewState.rotation;var i=b.skippedFeatureUids;return f.forEachFeatureAtCoordinate(a,g,h,i,function(a){return c.call(d,a,e)})};ol.renderer.canvas.ImageLayer.prototype.forEachLayerAtPixel=function(a,b,c,d){if(goog.isNull(this.getImage())){return undefined}if(this.getLayer().getSource()instanceof ol.source.ImageVector){var e=a.slice();ol.vec.Mat4.multVec2(b.pixelToCoordinateMatrix,e,e);var f=this.forEachFeatureAtCoordinate(e,b,goog.functions.TRUE,this);if(f){return c.call(d,this.getLayer())}else{return undefined}}else{if(goog.isNull(this.imageTransformInv_)){this.imageTransformInv_=goog.vec.Mat4.createNumber();goog.vec.Mat4.invert(this.imageTransform_,this.imageTransformInv_)}var g=this.getPixelOnCanvas(a,this.imageTransformInv_);if(goog.isNull(this.hitCanvasContext_)){this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.getImage(),g[0],g[1],1,1,0,0,1,1);var h=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(h[3]>0){return c.call(d,this.getLayer())}else{return undefined}}};ol.renderer.canvas.ImageLayer.prototype.getImage=function(){return goog.isNull(this.image_)?null:this.image_.getImage()};ol.renderer.canvas.ImageLayer.prototype.getImageTransform=function(){return this.imageTransform_};ol.renderer.canvas.ImageLayer.prototype.prepareFrame=function(a,b){var c=a.pixelRatio;var d=a.viewState;var e=d.center;var f=d.resolution;var g=d.rotation;var h;var i=this.getLayer();goog.asserts.assertInstanceof(i,ol.layer.Image,"layer is an instance of ol.layer.Image");var j=i.getSource();var k=a.viewHints;var l=a.extent;if(goog.isDef(b.extent)){l=ol.extent.getIntersection(l,b.extent)}if(!k[ol.ViewHint.ANIMATING]&&!k[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(l)){var m=d.projection;var n=j.getProjection();if(!goog.isNull(n)){goog.asserts.assert(ol.proj.equivalent(m,n),"projection and sourceProjection are equivalent");m=n}h=j.getImage(l,f,c,m);if(!goog.isNull(h)){var o=this.loadImage(h);if(o){this.image_=h}}}if(!goog.isNull(this.image_)){h=this.image_;var p=h.getExtent();var q=h.getResolution();var r=h.getPixelRatio();var s=c*q/(f*r);ol.vec.Mat4.makeTransform2D(this.imageTransform_,c*a.size[0]/2,c*a.size[1]/2,s,s,g,r*(p[0]-e[0])/q,r*(e[1]-p[3])/q);this.imageTransformInv_=null;this.updateAttributions(a.attributions,h.getAttributions());this.updateLogos(a,j)}return true};goog.provide("ol.renderer.canvas.TileLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.Size");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Tile");goog.require("ol.renderer.canvas.Layer");goog.require("ol.size");goog.require("ol.tilecoord");goog.require("ol.vec.Mat4");ol.renderer.canvas.TileLayer=function(a){goog.base(this,a);this.canvas_=null;this.canvasSize_=null;this.canvasTooBig_=false;this.context_=null;this.imageTransform_=goog.vec.Mat4.createNumber();this.imageTransformInv_=null;this.renderedCanvasZ_=NaN;this.renderedTileWidth_=NaN;this.renderedTileHeight_=NaN;this.renderedCanvasTileRange_=null;this.renderedTiles_=null;this.tmpSize_=[0,0]};goog.inherits(ol.renderer.canvas.TileLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.TileLayer.prototype.getImage=function(){return this.canvas_};ol.renderer.canvas.TileLayer.prototype.getImageTransform=function(){return this.imageTransform_};ol.renderer.canvas.TileLayer.prototype.prepareFrame=function(a,b){var c=a.pixelRatio;var d=a.viewState;var e=d.projection;var f=this.getLayer();goog.asserts.assertInstanceof(f,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var g=f.getSource();var h=g.getTileGridForProjection(e);var i=g.getGutter();var j=h.getZForResolution(d.resolution);var k=g.getTilePixelSize(j,a.pixelRatio,e);var l=k[0]/ol.size.toSize(h.getTileSize(j),this.tmpSize_)[0];var m=h.getResolution(j);var n=m/l;var o=d.center;var p;if(m==d.resolution){o=this.snapCenterToPixel(o,m,a.size);p=ol.extent.getForViewAndSize(o,m,d.rotation,a.size)}else{p=a.extent}if(goog.isDef(b.extent)){p=ol.extent.getIntersection(p,b.extent)}if(ol.extent.isEmpty(p)){return false}var q=h.getTileRangeForExtentAndResolution(p,m);var r=k[0]*q.getWidth();var s=k[1]*q.getHeight();var t,u;if(goog.isNull(this.canvas_)){goog.asserts.assert(goog.isNull(this.canvasSize_),"canvasSize is null (because canvas is null)");goog.asserts.assert(goog.isNull(this.context_),"context is null (because canvas is null)");goog.asserts.assert(goog.isNull(this.renderedCanvasTileRange_),"renderedCanvasTileRange is null (because canvas is null)");u=ol.dom.createCanvasContext2D(r,s);this.canvas_=u.canvas;this.canvasSize_=[r,s];this.context_=u;this.canvasTooBig_=!ol.renderer.canvas.Layer.testCanvasSize(this.canvasSize_)}else{goog.asserts.assert(!goog.isNull(this.canvasSize_),"non-null canvasSize (because canvas is not null)");goog.asserts.assert(!goog.isNull(this.context_),"non-null context (because canvas is not null)");t=this.canvas_;u=this.context_;if(this.canvasSize_[0]<r||this.canvasSize_[1]<s||this.renderedTileWidth_!==k[0]||this.renderedTileHeight_!==k[1]||this.canvasTooBig_&&(this.canvasSize_[0]>r||this.canvasSize_[1]>s)){t.width=r;t.height=s;this.canvasSize_=[r,s];this.canvasTooBig_=!ol.renderer.canvas.Layer.testCanvasSize(this.canvasSize_);this.renderedCanvasTileRange_=null}else{r=this.canvasSize_[0];s=this.canvasSize_[1];if(j!=this.renderedCanvasZ_||!this.renderedCanvasTileRange_.containsTileRange(q)){this.renderedCanvasTileRange_=null}}}var v,w,x,y;if(goog.isNull(this.renderedCanvasTileRange_)){w=r/k[0];var z=s/k[1];x=q.minX-Math.floor((w-q.getWidth())/2);y=q.minY-Math.floor((z-q.getHeight())/2);this.renderedCanvasZ_=j;this.renderedTileWidth_=k[0];this.renderedTileHeight_=k[1];this.renderedCanvasTileRange_=new ol.TileRange(x,x+w-1,y,y+z-1);this.renderedTiles_=new Array(w*z);v=this.renderedCanvasTileRange_}else{v=this.renderedCanvasTileRange_;w=v.getWidth()}goog.asserts.assert(v.containsTileRange(q),"tileRange is contained in canvasTileRange");var A={};A[j]={};var B=[];var C=this.createLoadedTileFinder(g,A);var D=f.getUseInterimTilesOnError();var E=ol.extent.createEmpty();var F=new ol.TileRange(0,0,0,0);var G,H,I,J,K,L;for(K=q.minX;K<=q.maxX;++K){for(L=q.minY;L<=q.maxY;++L){I=g.getTile(j,K,L,c,e);J=I.getState();if(J==ol.TileState.LOADED||J==ol.TileState.EMPTY||J==ol.TileState.ERROR&&!D){A[j][ol.tilecoord.toString(I.tileCoord)]=I;continue}H=h.forEachTileCoordParentTileRange(I.tileCoord,C,null,F,E);if(!H){B.push(I);G=h.getTileCoordChildTileRange(I.tileCoord,F,E);if(!goog.isNull(G)){C(j+1,G)}}}}var M,N;for(M=0,N=B.length;M<N;++M){I=B[M];K=k[0]*(I.tileCoord[1]-v.minX);L=k[1]*(v.maxY-I.tileCoord[2]);u.clearRect(K,L,k[0],k[1])}var O=goog.array.map(goog.object.getKeys(A),Number);goog.array.sort(O);var P=g.getOpaque();var Q=ol.extent.getTopLeft(h.getTileCoordExtent([j,v.minX,v.maxY],E));var R,S,T,U,V,W;var X,Y,Z,$,_,aa;var ba,ca;for(M=0,N=O.length;M<N;++M){R=O[M];k=g.getTilePixelSize(R,c,e);W=A[R];if(R==j){for(U in W){I=W[U];S=(I.tileCoord[2]-v.minY)*w+(I.tileCoord[1]-v.minX);if(this.renderedTiles_[S]!=I){K=k[0]*(I.tileCoord[1]-v.minX);L=k[1]*(v.maxY-I.tileCoord[2]);J=I.getState();if(J==ol.TileState.EMPTY||J==ol.TileState.ERROR&&!D||!P){u.clearRect(K,L,k[0],k[1])}if(J==ol.TileState.LOADED){u.drawImage(I.getImage(),i,i,k[0],k[1],K,L,k[0],k[1])}this.renderedTiles_[S]=I}}}else{T=h.getResolution(R)/m;for(U in W){I=W[U];V=h.getTileCoordExtent(I.tileCoord,E);K=(V[0]-Q[0])/n;L=(Q[1]-V[3])/n;ca=T*k[0];ba=T*k[1];J=I.getState();if(J==ol.TileState.EMPTY||!P){u.clearRect(K,L,ca,ba)}if(J==ol.TileState.LOADED){u.drawImage(I.getImage(),i,i,k[0],k[1],K,L,ca,ba)}$=h.getTileRangeForExtentAndZ(V,j,F);x=Math.max($.minX,v.minX);_=Math.min($.maxX,v.maxX);y=Math.max($.minY,v.minY);aa=Math.min($.maxY,v.maxY);for(X=x;X<=_;++X){for(Y=y;Y<=aa;++Y){S=(Y-v.minY)*w+(X-v.minX);this.renderedTiles_[S]=undefined}}}}}this.updateUsedTiles(a.usedTiles,g,j,q);this.manageTilePyramid(a,g,h,c,e,p,j,f.getPreload());this.scheduleExpireCache(a,g);this.updateLogos(a,g);ol.vec.Mat4.makeTransform2D(this.imageTransform_,c*a.size[0]/2,c*a.size[1]/2,c*n/d.resolution,c*n/d.resolution,d.rotation,(Q[0]-o[0])/n,(o[1]-Q[1])/n);this.imageTransformInv_=null;return true};ol.renderer.canvas.TileLayer.prototype.forEachLayerAtPixel=function(a,b,c,d){if(goog.isNull(this.context_)){return undefined}if(goog.isNull(this.imageTransformInv_)){this.imageTransformInv_=goog.vec.Mat4.createNumber();goog.vec.Mat4.invert(this.imageTransform_,this.imageTransformInv_)}var e=this.getPixelOnCanvas(a,this.imageTransformInv_);var f=this.context_.getImageData(e[0],e[1],1,1).data;if(f[3]>0){return c.call(d,this.getLayer())}else{return undefined}};goog.provide("ol.renderer.canvas.VectorLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Vector");goog.require("ol.render.EventType");goog.require("ol.render.canvas.ReplayGroup");goog.require("ol.renderer.canvas.Layer");goog.require("ol.renderer.vector");goog.require("ol.source.Vector");ol.renderer.canvas.VectorLayer=function(a){goog.base(this,a);this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.context_=ol.dom.createCanvasContext2D()};goog.inherits(ol.renderer.canvas.VectorLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.VectorLayer.prototype.composeFrame=function(a,b,c){var d=a.extent;var e=a.pixelRatio;var f=b.managed?a.skippedFeatureUids:{};var g=a.viewState;var h=g.projection;var i=g.rotation;var j=h.getExtent();var k=this.getLayer().getSource();goog.asserts.assertInstanceof(k,ol.source.Vector);var l=this.getTransform(a,0);this.dispatchPreComposeEvent(c,a,l);var m=this.replayGroup_;if(!goog.isNull(m)&&!m.isEmpty()){var n=this.getLayer();var o;if(n.hasListener(ol.render.EventType.RENDER)){this.context_.canvas.width=c.canvas.width;this.context_.canvas.height=c.canvas.height;o=this.context_}else{o=c}var p=o.globalAlpha;o.globalAlpha=b.opacity;m.replay(o,e,l,i,f);if(k.getWrapX()&&h.canWrapX()&&!ol.extent.containsExtent(j,d)){var q=d[0];var r=ol.extent.getWidth(j);var s=0;var t;while(q<j[0]){--s;t=r*s;l=this.getTransform(a,t);m.replay(o,e,l,i,f);q+=r}s=0;q=d[2];while(q>j[2]){++s;t=r*s;l=this.getTransform(a,t);m.replay(o,e,l,i,f);q-=r}l=this.getTransform(a,0)}if(o!=c){this.dispatchRenderEvent(o,a,l);c.drawImage(o.canvas,0,0)}o.globalAlpha=p}this.dispatchPostComposeEvent(c,a,l)};ol.renderer.canvas.VectorLayer.prototype.forEachFeatureAtCoordinate=function(a,b,c,d){if(goog.isNull(this.replayGroup_)){return undefined}else{var e=b.viewState.resolution;var f=b.viewState.rotation;var g=this.getLayer();var h=b.layerStates[goog.getUid(g)];var i={};return this.replayGroup_.forEachFeatureAtCoordinate(a,e,f,h.managed?b.skippedFeatureUids:{},function(a){goog.asserts.assert(goog.isDef(a),"received a feature");var b=goog.getUid(a).toString();if(!(b in i)){i[b]=true;return c.call(d,a,g)}})}};ol.renderer.canvas.VectorLayer.prototype.handleStyleImageChange_=function(a){this.renderIfReadyAndVisible()};ol.renderer.canvas.VectorLayer.prototype.prepareFrame=function(a,b){var c=this.getLayer();goog.asserts.assertInstanceof(c,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var d=c.getSource();this.updateAttributions(a.attributions,d.getAttributions());this.updateLogos(a,d);var e=a.viewHints[ol.ViewHint.ANIMATING];var f=a.viewHints[ol.ViewHint.INTERACTING];var g=c.getUpdateWhileAnimating();var h=c.getUpdateWhileInteracting();if(!this.dirty_&&(!g&&e)||!h&&f){return true}var i=a.extent;var j=a.viewState;var k=j.projection;var l=j.resolution;var m=a.pixelRatio;var n=c.getRevision();var o=c.getRenderBuffer();var p=c.getRenderOrder();if(!goog.isDef(p)){p=ol.renderer.vector.defaultOrder}var q=ol.extent.buffer(i,o*l);var r=j.projection.getExtent();if(d.getWrapX()&&j.projection.canWrapX()&&!ol.extent.containsExtent(r,a.extent)){var s=ol.extent.getWidth(r);var t=Math.max(ol.extent.getWidth(q)/2,s);q[0]=r[0]-t;q[2]=r[2]+t}if(!this.dirty_&&this.renderedResolution_==l&&this.renderedRevision_==n&&this.renderedRenderOrder_==p&&ol.extent.containsExtent(this.renderedExtent_,q)){return true}goog.dispose(this.replayGroup_);this.replayGroup_=null;this.dirty_=false;var u=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(l,m),q,l,c.getRenderBuffer());d.loadFeatures(q,l,k);var v=function(a){var b;if(goog.isDef(a.getStyleFunction())){b=a.getStyleFunction().call(a,l)}else if(goog.isDef(c.getStyleFunction())){b=c.getStyleFunction()(a,l)}if(goog.isDefAndNotNull(b)){var d=this.renderFeature(a,l,m,b,u);this.dirty_=this.dirty_||d}};if(!goog.isNull(p)){var w=[];d.forEachFeatureInExtentAtResolution(q,l,function(a){w.push(a)},this);goog.array.sort(w,p);goog.array.forEach(w,v,this)}else{d.forEachFeatureInExtentAtResolution(q,l,v,this)}u.finish();this.renderedResolution_=l;this.renderedRevision_=n;this.renderedRenderOrder_=p;this.renderedExtent_=q;this.replayGroup_=u;return true};ol.renderer.canvas.VectorLayer.prototype.renderFeature=function(a,b,c,d,e){if(!goog.isDefAndNotNull(d)){return false}var f,g,h=false;for(f=0,g=d.length;f<g;++f){h=ol.renderer.vector.renderFeature(e,a,d[f],ol.renderer.vector.getSquaredTolerance(b,c),this.handleStyleImageChange_,this)||h}return h};goog.provide("ol.renderer.canvas.Map");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.RendererType");goog.require("ol.css");goog.require("ol.dom");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.renderer.Map");goog.require("ol.renderer.canvas.ImageLayer");goog.require("ol.renderer.canvas.Layer");goog.require("ol.renderer.canvas.TileLayer");goog.require("ol.renderer.canvas.VectorLayer");goog.require("ol.source.State");goog.require("ol.vec.Mat4");ol.renderer.canvas.Map=function(a,b){goog.base(this,a,b);this.context_=ol.dom.createCanvasContext2D();this.canvas_=this.context_.canvas;this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(a,this.canvas_,0);this.renderedVisible_=true;this.transform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.canvas.Map,ol.renderer.Map);ol.renderer.canvas.Map.prototype.createLayerRenderer=function(a){if(ol.ENABLE_IMAGE&&a instanceof ol.layer.Image){return new ol.renderer.canvas.ImageLayer(a)}else if(ol.ENABLE_TILE&&a instanceof ol.layer.Tile){return new ol.renderer.canvas.TileLayer(a)}else if(ol.ENABLE_VECTOR&&a instanceof ol.layer.Vector){return new ol.renderer.canvas.VectorLayer(a)}else{goog.asserts.fail("unexpected layer configuration");return null}};ol.renderer.canvas.Map.prototype.dispatchComposeEvent_=function(a,b){var c=this.getMap();var d=this.context_;if(c.hasListener(a)){var e=b.extent;var f=b.pixelRatio;var g=b.viewState;var h=g.rotation;var i=this.getTransform(b);var j=new ol.render.canvas.Immediate(d,f,e,i,h);var k=new ol.render.Event(a,c,j,b,d,null);c.dispatchEvent(k);j.flush()}};ol.renderer.canvas.Map.prototype.getTransform=function(a){var b=a.pixelRatio;var c=a.viewState;var d=c.resolution;return ol.vec.Mat4.makeTransform2D(this.transform_,this.canvas_.width/2,this.canvas_.height/2,b/d,-b/d,-c.rotation,-c.center[0],-c.center[1])};ol.renderer.canvas.Map.prototype.getType=function(){return ol.RendererType.CANVAS};ol.renderer.canvas.Map.prototype.renderFrame=function(a){if(goog.isNull(a)){if(this.renderedVisible_){goog.style.setElementShown(this.canvas_,false);this.renderedVisible_=false}return}var b=this.context_;var c=a.size[0]*a.pixelRatio;var d=a.size[1]*a.pixelRatio;if(this.canvas_.width!=c||this.canvas_.height!=d){this.canvas_.width=c;this.canvas_.height=d}else{b.clearRect(0,0,this.canvas_.width,this.canvas_.height)}this.calculateMatrices2D(a);this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,a);var e=a.layerStatesArray;goog.array.stableSort(e,ol.renderer.Map.sortByZIndex);var f=a.viewState.resolution;var g,h,i,j,k;for(g=0,h=e.length;g<h;++g){k=e[g];i=k.layer;j=this.getLayerRenderer(i);goog.asserts.assertInstanceof(j,ol.renderer.canvas.Layer,"layerRenderer is an instance of ol.renderer.canvas.Layer");if(!ol.layer.Layer.visibleAtResolution(k,f)||k.sourceState!=ol.source.State.READY){continue}if(j.prepareFrame(a,k)){j.composeFrame(a,k,b)}}this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,a);if(!this.renderedVisible_){goog.style.setElementShown(this.canvas_,true);this.renderedVisible_=true}this.scheduleRemoveUnusedLayerRenderers(a);this.scheduleExpireIconCache(a)};goog.provide("ol.renderer.dom.Layer");goog.require("ol.layer.Layer");goog.require("ol.renderer.Layer");ol.renderer.dom.Layer=function(a,b){goog.base(this,a);this.target=b};goog.inherits(ol.renderer.dom.Layer,ol.renderer.Layer);ol.renderer.dom.Layer.prototype.clearFrame=goog.nullFunction;ol.renderer.dom.Layer.prototype.composeFrame=goog.nullFunction;ol.renderer.dom.Layer.prototype.getTarget=function(){return this.target};ol.renderer.dom.Layer.prototype.prepareFrame=goog.abstractMethod;goog.provide("ol.renderer.dom.ImageLayer");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.vec.Mat4");goog.require("ol.ImageBase");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.proj");goog.require("ol.renderer.dom.Layer");goog.require("ol.vec.Mat4");ol.renderer.dom.ImageLayer=function(a){var b=goog.dom.createElement(goog.dom.TagName.DIV);b.style.position="absolute";goog.base(this,a,b);this.image_=null;this.transform_=goog.vec.Mat4.createNumberIdentity()};goog.inherits(ol.renderer.dom.ImageLayer,ol.renderer.dom.Layer);ol.renderer.dom.ImageLayer.prototype.forEachFeatureAtCoordinate=function(a,b,c,d){var e=this.getLayer();var f=e.getSource();var g=b.viewState.resolution;var h=b.viewState.rotation;var i=b.skippedFeatureUids;return f.forEachFeatureAtCoordinate(a,g,h,i,function(a){return c.call(d,a,e)})};ol.renderer.dom.ImageLayer.prototype.clearFrame=function(){goog.dom.removeChildren(this.target);this.image_=null};ol.renderer.dom.ImageLayer.prototype.prepareFrame=function(a,b){var c=a.viewState;var d=c.center;var e=c.resolution;var f=c.rotation;var g=this.image_;var h=this.getLayer();goog.asserts.assertInstanceof(h,ol.layer.Image,"layer is an instance of ol.layer.Image");var i=h.getSource();var j=a.viewHints;var k=a.extent;if(goog.isDef(b.extent)){k=ol.extent.getIntersection(k,b.extent)}if(!j[ol.ViewHint.ANIMATING]&&!j[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(k)){var l=c.projection;var m=i.getProjection();if(!goog.isNull(m)){goog.asserts.assert(ol.proj.equivalent(l,m),"projection and sourceProjection are equivalent");l=m}var n=i.getImage(k,e,a.pixelRatio,l);if(!goog.isNull(n)){var o=this.loadImage(n);if(o){g=n}}}if(!goog.isNull(g)){var p=g.getExtent();var q=g.getResolution();var r=goog.vec.Mat4.createNumber();ol.vec.Mat4.makeTransform2D(r,a.size[0]/2,a.size[1]/2,q/e,q/e,f,(p[0]-d[0])/q,(d[1]-p[3])/q);if(g!=this.image_){var s=g.getImage(this);s.style.maxWidth="none";s.style.position="absolute";goog.dom.removeChildren(this.target);goog.dom.appendChild(this.target,s);this.image_=g}this.setTransform_(r);this.updateAttributions(a.attributions,g.getAttributions());this.updateLogos(a,i)}return true};ol.renderer.dom.ImageLayer.prototype.setTransform_=function(a){if(!ol.vec.Mat4.equals2D(a,this.transform_)){ol.dom.transformElement2D(this.target,a,6);goog.vec.Mat4.setFromArray(this.transform_,a)}};goog.provide("ol.renderer.dom.TileLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.object");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.TileCoord");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.dom.BrowserFeature");goog.require("ol.extent");goog.require("ol.layer.Tile");goog.require("ol.renderer.dom.Layer");goog.require("ol.size");goog.require("ol.tilecoord");goog.require("ol.tilegrid.TileGrid");goog.require("ol.vec.Mat4");ol.renderer.dom.TileLayer=function(a){var b=goog.dom.createElement(goog.dom.TagName.DIV);b.style.position="absolute";if(ol.dom.BrowserFeature.USE_MS_MATRIX_TRANSFORM){b.style.width="100%";b.style.height="100%"}goog.base(this,a,b);this.renderedVisible_=true;this.renderedOpacity_=1;this.renderedRevision_=0;this.tileLayerZs_={}}
;goog.inherits(ol.renderer.dom.TileLayer,ol.renderer.dom.Layer);ol.renderer.dom.TileLayer.prototype.clearFrame=function(){goog.dom.removeChildren(this.target);this.renderedRevision_=0};ol.renderer.dom.TileLayer.prototype.prepareFrame=function(a,b){if(!b.visible){if(this.renderedVisible_){goog.style.setElementShown(this.target,false);this.renderedVisible_=false}return true}var c=a.pixelRatio;var d=a.viewState;var e=d.projection;var f=this.getLayer();goog.asserts.assertInstanceof(f,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var g=f.getSource();var h=g.getTileGridForProjection(e);var i=g.getGutter();var j=h.getZForResolution(d.resolution);var k=h.getResolution(j);var l=d.center;var m;if(k==d.resolution){l=this.snapCenterToPixel(l,k,a.size);m=ol.extent.getForViewAndSize(l,k,d.rotation,a.size)}else{m=a.extent}if(goog.isDef(b.extent)){m=ol.extent.getIntersection(m,b.extent)}var n=h.getTileRangeForExtentAndResolution(m,k);var o={};o[j]={};var p=this.createLoadedTileFinder(g,o);var q=f.getUseInterimTilesOnError();var r=ol.extent.createEmpty();var s=new ol.TileRange(0,0,0,0);var t,u,v,w,x,y;for(x=n.minX;x<=n.maxX;++x){for(y=n.minY;y<=n.maxY;++y){v=g.getTile(j,x,y,c,e);w=v.getState();if(w==ol.TileState.LOADED){o[j][ol.tilecoord.toString(v.tileCoord)]=v;continue}else if(w==ol.TileState.EMPTY||w==ol.TileState.ERROR&&!q){continue}u=h.forEachTileCoordParentTileRange(v.tileCoord,p,null,s,r);if(!u){t=h.getTileCoordChildTileRange(v.tileCoord,s,r);if(!goog.isNull(t)){p(j+1,t)}}}}var z,A;if(this.renderedRevision_!=g.getRevision()){for(A in this.tileLayerZs_){z=this.tileLayerZs_[+A];goog.dom.removeNode(z.target)}this.tileLayerZs_={};this.renderedRevision_=g.getRevision()}var B=goog.array.map(goog.object.getKeys(o),Number);goog.array.sort(B);var C={};var D,E,F,G,H;for(D=0,E=B.length;D<E;++D){A=B[D];if(A in this.tileLayerZs_){z=this.tileLayerZs_[A]}else{G=h.getTileCoordForCoordAndZ(l,A);z=new ol.renderer.dom.TileLayerZ_(h,G);C[A]=true;this.tileLayerZs_[A]=z}H=o[A];for(F in H){z.addTile(H[F],i)}z.finalizeAddTiles()}var I=goog.array.map(goog.object.getKeys(this.tileLayerZs_),Number);goog.array.sort(I);var J,K,L,M,N;var O=goog.vec.Mat4.createNumber();for(J=0,K=I.length;J<K;++J){A=I[J];z=this.tileLayerZs_[A];if(!(A in o)){goog.dom.removeNode(z.target);delete this.tileLayerZs_[A];continue}N=z.getResolution();M=z.getOrigin();ol.vec.Mat4.makeTransform2D(O,a.size[0]/2,a.size[1]/2,N/d.resolution,N/d.resolution,d.rotation,(M[0]-l[0])/N,(l[1]-M[1])/N);z.setTransform(O);if(A in C){for(L=A-1;L>=0;--L){if(L in this.tileLayerZs_){goog.dom.insertSiblingAfter(z.target,this.tileLayerZs_[L].target);break}}if(L<0){goog.dom.insertChildAt(this.target,z.target,0)}}else{if(!a.viewHints[ol.ViewHint.ANIMATING]&&!a.viewHints[ol.ViewHint.INTERACTING]){z.removeTilesOutsideExtent(m,s)}}}if(b.opacity!=this.renderedOpacity_){ol.dom.setOpacity(this.target,b.opacity);this.renderedOpacity_=b.opacity}if(b.visible&&!this.renderedVisible_){goog.style.setElementShown(this.target,true);this.renderedVisible_=true}this.updateUsedTiles(a.usedTiles,g,j,n);this.manageTilePyramid(a,g,h,c,e,m,j,f.getPreload());this.scheduleExpireCache(a,g);this.updateLogos(a,g);return true};ol.renderer.dom.TileLayerZ_=function(a,b){this.target=goog.dom.createElement(goog.dom.TagName.DIV);this.target.style.position="absolute";this.target.style.width="100%";this.target.style.height="100%";if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){this.translateTarget_=goog.dom.createElement(goog.dom.TagName.DIV);this.translateTarget_.style.position="absolute";this.translateTarget_.style.width="100%";this.translateTarget_.style.height="100%";goog.dom.appendChild(this.target,this.translateTarget_)}this.tileGrid_=a;this.tileCoordOrigin_=b;this.origin_=ol.extent.getTopLeft(a.getTileCoordExtent(b));this.resolution_=a.getResolution(b[0]);this.tiles_={};this.documentFragment_=null;this.transform_=goog.vec.Mat4.createNumberIdentity();this.tmpSize_=[0,0]};ol.renderer.dom.TileLayerZ_.prototype.addTile=function(a,b){var c=a.tileCoord;var d=c[0];var e=c[1];var f=c[2];goog.asserts.assert(d==this.tileCoordOrigin_[0],"tileCoordZ matches z of tileCoordOrigin");var g=ol.tilecoord.toString(c);if(g in this.tiles_){return}var h=ol.size.toSize(this.tileGrid_.getTileSize(d),this.tmpSize_);var i=a.getImage(this);var j=i.style;j.maxWidth="none";var k;var l;if(b>0){k=goog.dom.createElement(goog.dom.TagName.DIV);l=k.style;l.overflow="hidden";l.width=h[0]+"px";l.height=h[1]+"px";j.position="absolute";j.left=-b+"px";j.top=-b+"px";j.width=h[0]+2*b+"px";j.height=h[1]+2*b+"px";goog.dom.appendChild(k,i)}else{j.width=h[0]+"px";j.height=h[1]+"px";k=i;l=j}l.position="absolute";l.left=(e-this.tileCoordOrigin_[1])*h[0]+"px";l.top=(this.tileCoordOrigin_[2]-f)*h[1]+"px";if(goog.isNull(this.documentFragment_)){this.documentFragment_=document.createDocumentFragment()}goog.dom.appendChild(this.documentFragment_,k);this.tiles_[g]=a};ol.renderer.dom.TileLayerZ_.prototype.finalizeAddTiles=function(){if(!goog.isNull(this.documentFragment_)){if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){goog.dom.appendChild(this.translateTarget_,this.documentFragment_)}else{goog.dom.appendChild(this.target,this.documentFragment_)}this.documentFragment_=null}};ol.renderer.dom.TileLayerZ_.prototype.getOrigin=function(){return this.origin_};ol.renderer.dom.TileLayerZ_.prototype.getResolution=function(){return this.resolution_};ol.renderer.dom.TileLayerZ_.prototype.removeTilesOutsideExtent=function(a,b){var c=this.tileGrid_.getTileRangeForExtentAndZ(a,this.tileCoordOrigin_[0],b);var d=[];var e,f;for(f in this.tiles_){e=this.tiles_[f];if(!c.contains(e.tileCoord)){d.push(e)}}var g,h;for(g=0,h=d.length;g<h;++g){e=d[g];f=ol.tilecoord.toString(e.tileCoord);goog.dom.removeNode(e.getImage(this));delete this.tiles_[f]}};ol.renderer.dom.TileLayerZ_.prototype.setTransform=function(a){if(!ol.vec.Mat4.equals2D(a,this.transform_)){if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){ol.dom.transformElement2D(this.target,a,6,this.translateTarget_)}else{ol.dom.transformElement2D(this.target,a,6)}goog.vec.Mat4.setFromArray(this.transform_,a)}};goog.provide("ol.renderer.dom.VectorLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.vec.Mat4");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.render.canvas.ReplayGroup");goog.require("ol.renderer.dom.Layer");goog.require("ol.renderer.vector");goog.require("ol.vec.Mat4");ol.renderer.dom.VectorLayer=function(a){this.context_=ol.dom.createCanvasContext2D();var b=this.context_.canvas;b.style.maxWidth="none";b.style.position="absolute";goog.base(this,a,b);this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.transform_=goog.vec.Mat4.createNumber();this.elementTransform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.dom.VectorLayer,ol.renderer.dom.Layer);ol.renderer.dom.VectorLayer.prototype.composeFrame=function(a,b){var c=this.getLayer();goog.asserts.assertInstanceof(c,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var d=a.viewState;var e=d.center;var f=d.rotation;var g=d.resolution;var h=a.pixelRatio;var i=a.size[0];var j=a.size[1];var k=i*h;var l=j*h;var m=ol.vec.Mat4.makeTransform2D(this.transform_,h*i/2,h*j/2,h/g,-h/g,-f,-e[0],-e[1]);var n=this.context_;n.canvas.width=k;n.canvas.height=l;var o=ol.vec.Mat4.makeTransform2D(this.elementTransform_,0,0,1/h,1/h,0,-(k-i)/2*h,-(l-j)/2*h);ol.dom.transformElement2D(n.canvas,o,6);this.dispatchEvent_(ol.render.EventType.PRECOMPOSE,a,m);var p=this.replayGroup_;if(!goog.isNull(p)&&!p.isEmpty()){n.globalAlpha=b.opacity;p.replay(n,h,m,f,b.managed?a.skippedFeatureUids:{});this.dispatchEvent_(ol.render.EventType.RENDER,a,m)}this.dispatchEvent_(ol.render.EventType.POSTCOMPOSE,a,m)};ol.renderer.dom.VectorLayer.prototype.dispatchEvent_=function(a,b,c){var d=this.context_;var e=this.getLayer();if(e.hasListener(a)){var f=new ol.render.canvas.Immediate(d,b.pixelRatio,b.extent,c,b.viewState.rotation);var g=new ol.render.Event(a,e,f,b,d,null);e.dispatchEvent(g);f.flush()}};ol.renderer.dom.VectorLayer.prototype.forEachFeatureAtCoordinate=function(a,b,c,d){if(goog.isNull(this.replayGroup_)){return undefined}else{var e=b.viewState.resolution;var f=b.viewState.rotation;var g=this.getLayer();var h=b.layerStates[goog.getUid(g)];var i={};return this.replayGroup_.forEachFeatureAtCoordinate(a,e,f,h.managed?b.skippedFeatureUids:{},function(a){goog.asserts.assert(goog.isDef(a),"received a feature");var b=goog.getUid(a).toString();if(!(b in i)){i[b]=true;return c.call(d,a,g)}})}};ol.renderer.dom.VectorLayer.prototype.handleStyleImageChange_=function(a){this.renderIfReadyAndVisible()};ol.renderer.dom.VectorLayer.prototype.prepareFrame=function(a,b){var c=this.getLayer();goog.asserts.assertInstanceof(c,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var d=c.getSource();this.updateAttributions(a.attributions,d.getAttributions());this.updateLogos(a,d);var e=a.viewHints[ol.ViewHint.ANIMATING];var f=a.viewHints[ol.ViewHint.INTERACTING];var g=c.getUpdateWhileAnimating();var h=c.getUpdateWhileInteracting();if(!this.dirty_&&(!g&&e)||!h&&f){return true}var i=a.extent;var j=a.viewState;var k=j.projection;var l=j.resolution;var m=a.pixelRatio;var n=c.getRevision();var o=c.getRenderBuffer();var p=c.getRenderOrder();if(!goog.isDef(p)){p=ol.renderer.vector.defaultOrder}var q=ol.extent.buffer(i,o*l);if(!this.dirty_&&this.renderedResolution_==l&&this.renderedRevision_==n&&this.renderedRenderOrder_==p&&ol.extent.containsExtent(this.renderedExtent_,q)){return true}goog.dispose(this.replayGroup_);this.replayGroup_=null;this.dirty_=false;var r=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(l,m),q,l,c.getRenderBuffer());d.loadFeatures(q,l,k);var s=function(a){var b;if(goog.isDef(a.getStyleFunction())){b=a.getStyleFunction().call(a,l)}else if(goog.isDef(c.getStyleFunction())){b=c.getStyleFunction()(a,l)}if(goog.isDefAndNotNull(b)){var d=this.renderFeature(a,l,m,b,r);this.dirty_=this.dirty_||d}};if(!goog.isNull(p)){var t=[];d.forEachFeatureInExtentAtResolution(q,l,function(a){t.push(a)},this);goog.array.sort(t,p);goog.array.forEach(t,s,this)}else{d.forEachFeatureInExtentAtResolution(q,l,s,this)}r.finish();this.renderedResolution_=l;this.renderedRevision_=n;this.renderedRenderOrder_=p;this.renderedExtent_=q;this.replayGroup_=r;return true};ol.renderer.dom.VectorLayer.prototype.renderFeature=function(a,b,c,d,e){if(!goog.isDefAndNotNull(d)){return false}var f,g,h=false;for(f=0,g=d.length;f<g;++f){h=ol.renderer.vector.renderFeature(e,a,d[f],ol.renderer.vector.getSquaredTolerance(b,c),this.handleStyleImageChange_,this)||h}return h};goog.provide("ol.renderer.dom.Map");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.RendererType");goog.require("ol.css");goog.require("ol.dom");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.renderer.Map");goog.require("ol.renderer.dom.ImageLayer");goog.require("ol.renderer.dom.Layer");goog.require("ol.renderer.dom.TileLayer");goog.require("ol.renderer.dom.VectorLayer");goog.require("ol.source.State");goog.require("ol.vec.Mat4");ol.renderer.dom.Map=function(a,b){goog.base(this,a,b);this.context_=null;if(!(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE)){this.context_=ol.dom.createCanvasContext2D();var c=this.context_.canvas;c.style.position="absolute";c.style.width="100%";c.style.height="100%";c.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(a,c,0)}this.transform_=goog.vec.Mat4.createNumber();this.layersPane_=goog.dom.createElement(goog.dom.TagName.DIV);this.layersPane_.className=ol.css.CLASS_UNSELECTABLE;var d=this.layersPane_.style;d.position="absolute";d.width="100%";d.height="100%";if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){this.layersPane_.ondragstart=goog.functions.FALSE;this.layersPane_.onselectstart=goog.functions.FALSE}goog.events.listen(this.layersPane_,goog.events.EventType.TOUCHSTART,goog.events.Event.preventDefault);goog.dom.insertChildAt(a,this.layersPane_,0);this.renderedVisible_=true};goog.inherits(ol.renderer.dom.Map,ol.renderer.Map);ol.renderer.dom.Map.prototype.disposeInternal=function(){goog.dom.removeNode(this.layersPane_);goog.base(this,"disposeInternal")};ol.renderer.dom.Map.prototype.createLayerRenderer=function(a){var b;if(ol.ENABLE_IMAGE&&a instanceof ol.layer.Image){b=new ol.renderer.dom.ImageLayer(a)}else if(ol.ENABLE_TILE&&a instanceof ol.layer.Tile){b=new ol.renderer.dom.TileLayer(a)}else if(!(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE)&&ol.ENABLE_VECTOR&&a instanceof ol.layer.Vector){b=new ol.renderer.dom.VectorLayer(a)}else{goog.asserts.fail("unexpected layer configuration");return null}return b};ol.renderer.dom.Map.prototype.dispatchComposeEvent_=function(a,b){var c=this.getMap();if(!(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE)&&c.hasListener(a)){var d=b.extent;var e=b.pixelRatio;var f=b.viewState;var g=f.rotation;var h=this.context_;var i=h.canvas;ol.vec.Mat4.makeTransform2D(this.transform_,i.width/2,i.height/2,e/f.resolution,-e/f.resolution,-f.rotation,-f.center[0],-f.center[1]);var j=new ol.render.canvas.Immediate(h,e,d,this.transform_,g);var k=new ol.render.Event(a,c,j,b,h,null);c.dispatchEvent(k);j.flush()}};ol.renderer.dom.Map.prototype.getType=function(){return ol.RendererType.DOM};ol.renderer.dom.Map.prototype.renderFrame=function(a){if(goog.isNull(a)){if(this.renderedVisible_){goog.style.setElementShown(this.layersPane_,false);this.renderedVisible_=false}return}var b;if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){b=function(a){goog.dom.appendChild(this.layersPane_,a)}}else{b=function(a,b){goog.dom.insertChildAt(this.layersPane_,a,b)}}var c=this.getMap();if(!(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE)&&(c.hasListener(ol.render.EventType.PRECOMPOSE)||c.hasListener(ol.render.EventType.POSTCOMPOSE))){var d=this.context_.canvas;var e=a.pixelRatio;d.width=a.size[0]*e;d.height=a.size[1]*e}this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,a);var f=a.layerStatesArray;goog.array.stableSort(f,ol.renderer.Map.sortByZIndex);var g=a.viewState.resolution;var h,i,j,k,l;for(h=0,i=f.length;h<i;++h){l=f[h];j=l.layer;k=this.getLayerRenderer(j);goog.asserts.assertInstanceof(k,ol.renderer.dom.Layer,"renderer is an instance of ol.renderer.dom.Layer");b.call(this,k.getTarget(),h);if(ol.layer.Layer.visibleAtResolution(l,g)&&l.sourceState==ol.source.State.READY){if(k.prepareFrame(a,l)){k.composeFrame(a,l)}}else{k.clearFrame()}}var m=a.layerStates;var n;for(n in this.getLayerRenderers()){if(!(n in m)){k=this.getLayerRendererByKey(n);goog.asserts.assertInstanceof(k,ol.renderer.dom.Layer,"renderer is an instance of ol.renderer.dom.Layer");goog.dom.removeNode(k.getTarget())}}if(!this.renderedVisible_){goog.style.setElementShown(this.layersPane_,true);this.renderedVisible_=true}this.calculateMatrices2D(a);this.scheduleRemoveUnusedLayerRenderers(a);this.scheduleExpireIconCache(a);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,a)};goog.provide("goog.webgl");goog.webgl.DEPTH_BUFFER_BIT=256;goog.webgl.STENCIL_BUFFER_BIT=1024;goog.webgl.COLOR_BUFFER_BIT=16384;goog.webgl.POINTS=0;goog.webgl.LINES=1;goog.webgl.LINE_LOOP=2;goog.webgl.LINE_STRIP=3;goog.webgl.TRIANGLES=4;goog.webgl.TRIANGLE_STRIP=5;goog.webgl.TRIANGLE_FAN=6;goog.webgl.ZERO=0;goog.webgl.ONE=1;goog.webgl.SRC_COLOR=768;goog.webgl.ONE_MINUS_SRC_COLOR=769;goog.webgl.SRC_ALPHA=770;goog.webgl.ONE_MINUS_SRC_ALPHA=771;goog.webgl.DST_ALPHA=772;goog.webgl.ONE_MINUS_DST_ALPHA=773;goog.webgl.DST_COLOR=774;goog.webgl.ONE_MINUS_DST_COLOR=775;goog.webgl.SRC_ALPHA_SATURATE=776;goog.webgl.FUNC_ADD=32774;goog.webgl.BLEND_EQUATION=32777;goog.webgl.BLEND_EQUATION_RGB=32777;goog.webgl.BLEND_EQUATION_ALPHA=34877;goog.webgl.FUNC_SUBTRACT=32778;goog.webgl.FUNC_REVERSE_SUBTRACT=32779;goog.webgl.BLEND_DST_RGB=32968;goog.webgl.BLEND_SRC_RGB=32969;goog.webgl.BLEND_DST_ALPHA=32970;goog.webgl.BLEND_SRC_ALPHA=32971;goog.webgl.CONSTANT_COLOR=32769;goog.webgl.ONE_MINUS_CONSTANT_COLOR=32770;goog.webgl.CONSTANT_ALPHA=32771;goog.webgl.ONE_MINUS_CONSTANT_ALPHA=32772;goog.webgl.BLEND_COLOR=32773;goog.webgl.ARRAY_BUFFER=34962;goog.webgl.ELEMENT_ARRAY_BUFFER=34963;goog.webgl.ARRAY_BUFFER_BINDING=34964;goog.webgl.ELEMENT_ARRAY_BUFFER_BINDING=34965;goog.webgl.STREAM_DRAW=35040;goog.webgl.STATIC_DRAW=35044;goog.webgl.DYNAMIC_DRAW=35048;goog.webgl.BUFFER_SIZE=34660;goog.webgl.BUFFER_USAGE=34661;goog.webgl.CURRENT_VERTEX_ATTRIB=34342;goog.webgl.FRONT=1028;goog.webgl.BACK=1029;goog.webgl.FRONT_AND_BACK=1032;goog.webgl.CULL_FACE=2884;goog.webgl.BLEND=3042;goog.webgl.DITHER=3024;goog.webgl.STENCIL_TEST=2960;goog.webgl.DEPTH_TEST=2929;goog.webgl.SCISSOR_TEST=3089;goog.webgl.POLYGON_OFFSET_FILL=32823;goog.webgl.SAMPLE_ALPHA_TO_COVERAGE=32926;goog.webgl.SAMPLE_COVERAGE=32928;goog.webgl.NO_ERROR=0;goog.webgl.INVALID_ENUM=1280;goog.webgl.INVALID_VALUE=1281;goog.webgl.INVALID_OPERATION=1282;goog.webgl.OUT_OF_MEMORY=1285;goog.webgl.CW=2304;goog.webgl.CCW=2305;goog.webgl.LINE_WIDTH=2849;goog.webgl.ALIASED_POINT_SIZE_RANGE=33901;goog.webgl.ALIASED_LINE_WIDTH_RANGE=33902;goog.webgl.CULL_FACE_MODE=2885;goog.webgl.FRONT_FACE=2886;goog.webgl.DEPTH_RANGE=2928;goog.webgl.DEPTH_WRITEMASK=2930;goog.webgl.DEPTH_CLEAR_VALUE=2931;goog.webgl.DEPTH_FUNC=2932;goog.webgl.STENCIL_CLEAR_VALUE=2961;goog.webgl.STENCIL_FUNC=2962;goog.webgl.STENCIL_FAIL=2964;goog.webgl.STENCIL_PASS_DEPTH_FAIL=2965;goog.webgl.STENCIL_PASS_DEPTH_PASS=2966;goog.webgl.STENCIL_REF=2967;goog.webgl.STENCIL_VALUE_MASK=2963;goog.webgl.STENCIL_WRITEMASK=2968;goog.webgl.STENCIL_BACK_FUNC=34816;goog.webgl.STENCIL_BACK_FAIL=34817;goog.webgl.STENCIL_BACK_PASS_DEPTH_FAIL=34818;goog.webgl.STENCIL_BACK_PASS_DEPTH_PASS=34819;goog.webgl.STENCIL_BACK_REF=36003;goog.webgl.STENCIL_BACK_VALUE_MASK=36004;goog.webgl.STENCIL_BACK_WRITEMASK=36005;goog.webgl.VIEWPORT=2978;goog.webgl.SCISSOR_BOX=3088;goog.webgl.COLOR_CLEAR_VALUE=3106;goog.webgl.COLOR_WRITEMASK=3107;goog.webgl.UNPACK_ALIGNMENT=3317;goog.webgl.PACK_ALIGNMENT=3333;goog.webgl.MAX_TEXTURE_SIZE=3379;goog.webgl.MAX_VIEWPORT_DIMS=3386;goog.webgl.SUBPIXEL_BITS=3408;goog.webgl.RED_BITS=3410;goog.webgl.GREEN_BITS=3411;goog.webgl.BLUE_BITS=3412;goog.webgl.ALPHA_BITS=3413;goog.webgl.DEPTH_BITS=3414;goog.webgl.STENCIL_BITS=3415;goog.webgl.POLYGON_OFFSET_UNITS=10752;goog.webgl.POLYGON_OFFSET_FACTOR=32824;goog.webgl.TEXTURE_BINDING_2D=32873;goog.webgl.SAMPLE_BUFFERS=32936;goog.webgl.SAMPLES=32937;goog.webgl.SAMPLE_COVERAGE_VALUE=32938;goog.webgl.SAMPLE_COVERAGE_INVERT=32939;goog.webgl.COMPRESSED_TEXTURE_FORMATS=34467;goog.webgl.DONT_CARE=4352;goog.webgl.FASTEST=4353;goog.webgl.NICEST=4354;goog.webgl.GENERATE_MIPMAP_HINT=33170;goog.webgl.BYTE=5120;goog.webgl.UNSIGNED_BYTE=5121;goog.webgl.SHORT=5122;goog.webgl.UNSIGNED_SHORT=5123;goog.webgl.INT=5124;goog.webgl.UNSIGNED_INT=5125;goog.webgl.FLOAT=5126;goog.webgl.DEPTH_COMPONENT=6402;goog.webgl.ALPHA=6406;goog.webgl.RGB=6407;goog.webgl.RGBA=6408;goog.webgl.LUMINANCE=6409;goog.webgl.LUMINANCE_ALPHA=6410;goog.webgl.UNSIGNED_SHORT_4_4_4_4=32819;goog.webgl.UNSIGNED_SHORT_5_5_5_1=32820;goog.webgl.UNSIGNED_SHORT_5_6_5=33635;goog.webgl.FRAGMENT_SHADER=35632;goog.webgl.VERTEX_SHADER=35633;goog.webgl.MAX_VERTEX_ATTRIBS=34921;goog.webgl.MAX_VERTEX_UNIFORM_VECTORS=36347;goog.webgl.MAX_VARYING_VECTORS=36348;goog.webgl.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661;goog.webgl.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660;goog.webgl.MAX_TEXTURE_IMAGE_UNITS=34930;goog.webgl.MAX_FRAGMENT_UNIFORM_VECTORS=36349;goog.webgl.SHADER_TYPE=35663;goog.webgl.DELETE_STATUS=35712;goog.webgl.LINK_STATUS=35714;goog.webgl.VALIDATE_STATUS=35715;goog.webgl.ATTACHED_SHADERS=35717;goog.webgl.ACTIVE_UNIFORMS=35718;goog.webgl.ACTIVE_ATTRIBUTES=35721;goog.webgl.SHADING_LANGUAGE_VERSION=35724;goog.webgl.CURRENT_PROGRAM=35725;goog.webgl.NEVER=512;goog.webgl.LESS=513;goog.webgl.EQUAL=514;goog.webgl.LEQUAL=515;goog.webgl.GREATER=516;goog.webgl.NOTEQUAL=517;goog.webgl.GEQUAL=518;goog.webgl.ALWAYS=519;goog.webgl.KEEP=7680;goog.webgl.REPLACE=7681;goog.webgl.INCR=7682;goog.webgl.DECR=7683;goog.webgl.INVERT=5386;goog.webgl.INCR_WRAP=34055;goog.webgl.DECR_WRAP=34056;goog.webgl.VENDOR=7936;goog.webgl.RENDERER=7937;goog.webgl.VERSION=7938;goog.webgl.NEAREST=9728;goog.webgl.LINEAR=9729;goog.webgl.NEAREST_MIPMAP_NEAREST=9984;goog.webgl.LINEAR_MIPMAP_NEAREST=9985;goog.webgl.NEAREST_MIPMAP_LINEAR=9986;goog.webgl.LINEAR_MIPMAP_LINEAR=9987;goog.webgl.TEXTURE_MAG_FILTER=10240;goog.webgl.TEXTURE_MIN_FILTER=10241;goog.webgl.TEXTURE_WRAP_S=10242;goog.webgl.TEXTURE_WRAP_T=10243;goog.webgl.TEXTURE_2D=3553;goog.webgl.TEXTURE=5890;goog.webgl.TEXTURE_CUBE_MAP=34067;goog.webgl.TEXTURE_BINDING_CUBE_MAP=34068;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_X=34069;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_X=34070;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_Y=34071;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_Z=34073;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074;goog.webgl.MAX_CUBE_MAP_TEXTURE_SIZE=34076;goog.webgl.TEXTURE0=33984;goog.webgl.TEXTURE1=33985;goog.webgl.TEXTURE2=33986;goog.webgl.TEXTURE3=33987;goog.webgl.TEXTURE4=33988;goog.webgl.TEXTURE5=33989;goog.webgl.TEXTURE6=33990;goog.webgl.TEXTURE7=33991;goog.webgl.TEXTURE8=33992;goog.webgl.TEXTURE9=33993;goog.webgl.TEXTURE10=33994;goog.webgl.TEXTURE11=33995;goog.webgl.TEXTURE12=33996;goog.webgl.TEXTURE13=33997;goog.webgl.TEXTURE14=33998;goog.webgl.TEXTURE15=33999;goog.webgl.TEXTURE16=34e3;goog.webgl.TEXTURE17=34001;goog.webgl.TEXTURE18=34002;goog.webgl.TEXTURE19=34003;goog.webgl.TEXTURE20=34004;goog.webgl.TEXTURE21=34005;goog.webgl.TEXTURE22=34006;goog.webgl.TEXTURE23=34007;goog.webgl.TEXTURE24=34008;goog.webgl.TEXTURE25=34009;goog.webgl.TEXTURE26=34010;goog.webgl.TEXTURE27=34011;goog.webgl.TEXTURE28=34012;goog.webgl.TEXTURE29=34013;goog.webgl.TEXTURE30=34014;goog.webgl.TEXTURE31=34015;goog.webgl.ACTIVE_TEXTURE=34016;goog.webgl.REPEAT=10497;goog.webgl.CLAMP_TO_EDGE=33071;goog.webgl.MIRRORED_REPEAT=33648;goog.webgl.FLOAT_VEC2=35664;goog.webgl.FLOAT_VEC3=35665;goog.webgl.FLOAT_VEC4=35666;goog.webgl.INT_VEC2=35667;goog.webgl.INT_VEC3=35668;goog.webgl.INT_VEC4=35669;goog.webgl.BOOL=35670;goog.webgl.BOOL_VEC2=35671;goog.webgl.BOOL_VEC3=35672;goog.webgl.BOOL_VEC4=35673;goog.webgl.FLOAT_MAT2=35674;goog.webgl.FLOAT_MAT3=35675;goog.webgl.FLOAT_MAT4=35676;goog.webgl.SAMPLER_2D=35678;goog.webgl.SAMPLER_CUBE=35680;goog.webgl.VERTEX_ATTRIB_ARRAY_ENABLED=34338;goog.webgl.VERTEX_ATTRIB_ARRAY_SIZE=34339;goog.webgl.VERTEX_ATTRIB_ARRAY_STRIDE=34340;goog.webgl.VERTEX_ATTRIB_ARRAY_TYPE=34341;goog.webgl.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922;goog.webgl.VERTEX_ATTRIB_ARRAY_POINTER=34373;goog.webgl.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975;goog.webgl.COMPILE_STATUS=35713;goog.webgl.LOW_FLOAT=36336;goog.webgl.MEDIUM_FLOAT=36337;goog.webgl.HIGH_FLOAT=36338;goog.webgl.LOW_INT=36339;goog.webgl.MEDIUM_INT=36340;goog.webgl.HIGH_INT=36341;goog.webgl.FRAMEBUFFER=36160;goog.webgl.RENDERBUFFER=36161;goog.webgl.RGBA4=32854;goog.webgl.RGB5_A1=32855;goog.webgl.RGB565=36194;goog.webgl.DEPTH_COMPONENT16=33189;goog.webgl.STENCIL_INDEX=6401;goog.webgl.STENCIL_INDEX8=36168;goog.webgl.DEPTH_STENCIL=34041;goog.webgl.RENDERBUFFER_WIDTH=36162;goog.webgl.RENDERBUFFER_HEIGHT=36163;goog.webgl.RENDERBUFFER_INTERNAL_FORMAT=36164;goog.webgl.RENDERBUFFER_RED_SIZE=36176;goog.webgl.RENDERBUFFER_GREEN_SIZE=36177;goog.webgl.RENDERBUFFER_BLUE_SIZE=36178;goog.webgl.RENDERBUFFER_ALPHA_SIZE=36179;goog.webgl.RENDERBUFFER_DEPTH_SIZE=36180;goog.webgl.RENDERBUFFER_STENCIL_SIZE=36181;goog.webgl.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048;goog.webgl.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049;goog.webgl.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050;goog.webgl.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051;goog.webgl.COLOR_ATTACHMENT0=36064;goog.webgl.DEPTH_ATTACHMENT=36096;goog.webgl.STENCIL_ATTACHMENT=36128;goog.webgl.DEPTH_STENCIL_ATTACHMENT=33306;goog.webgl.NONE=0;goog.webgl.FRAMEBUFFER_COMPLETE=36053;goog.webgl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054;goog.webgl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055;goog.webgl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057;goog.webgl.FRAMEBUFFER_UNSUPPORTED=36061;goog.webgl.FRAMEBUFFER_BINDING=36006;goog.webgl.RENDERBUFFER_BINDING=36007;goog.webgl.MAX_RENDERBUFFER_SIZE=34024;goog.webgl.INVALID_FRAMEBUFFER_OPERATION=1286;goog.webgl.UNPACK_FLIP_Y_WEBGL=37440;goog.webgl.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441;goog.webgl.CONTEXT_LOST_WEBGL=37442;goog.webgl.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443;goog.webgl.BROWSER_DEFAULT_WEBGL=37444;goog.webgl.HALF_FLOAT_OES=36193;goog.webgl.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723;goog.webgl.VERTEX_ARRAY_BINDING_OES=34229;goog.webgl.UNMASKED_VENDOR_WEBGL=37445;goog.webgl.UNMASKED_RENDERER_WEBGL=37446;goog.webgl.COMPRESSED_RGB_S3TC_DXT1_EXT=33776;goog.webgl.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777;goog.webgl.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778;goog.webgl.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779;goog.webgl.TEXTURE_MAX_ANISOTROPY_EXT=34046;goog.webgl.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047;goog.provide("ol.webgl.Fragment");goog.provide("ol.webgl.Shader");goog.provide("ol.webgl.Vertex");goog.provide("ol.webgl.shader");goog.require("goog.functions");goog.require("goog.webgl");goog.require("ol.webgl");ol.webgl.Shader=function(a){this.source_=a};ol.webgl.Shader.prototype.getType=goog.abstractMethod;ol.webgl.Shader.prototype.getSource=function(){return this.source_};ol.webgl.Shader.prototype.isAnimated=goog.functions.FALSE;ol.webgl.shader.Fragment=function(a){goog.base(this,a)};goog.inherits(ol.webgl.shader.Fragment,ol.webgl.Shader);ol.webgl.shader.Fragment.prototype.getType=function(){return goog.webgl.FRAGMENT_SHADER};ol.webgl.shader.Vertex=function(a){goog.base(this,a)};goog.inherits(ol.webgl.shader.Vertex,ol.webgl.Shader);ol.webgl.shader.Vertex.prototype.getType=function(){return goog.webgl.VERTEX_SHADER};goog.provide("ol.render.webgl.imagereplay.shader.Color");goog.provide("ol.render.webgl.imagereplay.shader.Color.Locations");goog.provide("ol.render.webgl.imagereplay.shader.ColorFragment");goog.provide("ol.render.webgl.imagereplay.shader.ColorVertex");goog.require("ol.webgl.shader");ol.render.webgl.imagereplay.shader.ColorFragment=function(){goog.base(this,ol.render.webgl.imagereplay.shader.ColorFragment.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.ColorFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.ColorFragment);ol.render.webgl.imagereplay.shader.ColorFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\n// @see https://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/filters/skia/SkiaImageFilterBuilder.cpp\nuniform mat4 u_colorMatrix;\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n  gl_FragColor.rgb = (u_colorMatrix * vec4(texColor.rgb, 1.)).rgb;\n}\n";ol.render.webgl.imagereplay.shader.ColorFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;varying float b;uniform mat4 k;uniform float l;uniform sampler2D m;void main(void){vec4 texColor=texture2D(m,a);float alpha=texColor.a*b*l;if(alpha==0.0){discard;}gl_FragColor.a=alpha;gl_FragColor.rgb=(k*vec4(texColor.rgb,1.)).rgb;}";ol.render.webgl.imagereplay.shader.ColorFragment.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.ColorFragment.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.ColorFragment.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.ColorVertex=function(){goog.base(this,ol.render.webgl.imagereplay.shader.ColorVertex.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.ColorVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.ColorVertex);ol.render.webgl.imagereplay.shader.ColorVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0., 0.);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n";ol.render.webgl.imagereplay.shader.ColorVertex.OPTIMIZED_SOURCE="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}";ol.render.webgl.imagereplay.shader.ColorVertex.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.ColorVertex.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.ColorVertex.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.Color.Locations=function(a,b){this.u_colorMatrix=a.getUniformLocation(b,goog.DEBUG?"u_colorMatrix":"k");this.u_image=a.getUniformLocation(b,goog.DEBUG?"u_image":"m");this.u_offsetRotateMatrix=a.getUniformLocation(b,goog.DEBUG?"u_offsetRotateMatrix":"j");this.u_offsetScaleMatrix=a.getUniformLocation(b,goog.DEBUG?"u_offsetScaleMatrix":"i");this.u_opacity=a.getUniformLocation(b,goog.DEBUG?"u_opacity":"l");this.u_projectionMatrix=a.getUniformLocation(b,goog.DEBUG?"u_projectionMatrix":"h");this.a_offsets=a.getAttribLocation(b,goog.DEBUG?"a_offsets":"e");this.a_opacity=a.getAttribLocation(b,goog.DEBUG?"a_opacity":"f");this.a_position=a.getAttribLocation(b,goog.DEBUG?"a_position":"c");this.a_rotateWithView=a.getAttribLocation(b,goog.DEBUG?"a_rotateWithView":"g");this.a_texCoord=a.getAttribLocation(b,goog.DEBUG?"a_texCoord":"d")};goog.provide("ol.render.webgl.imagereplay.shader.Default");goog.provide("ol.render.webgl.imagereplay.shader.Default.Locations");goog.provide("ol.render.webgl.imagereplay.shader.DefaultFragment");goog.provide("ol.render.webgl.imagereplay.shader.DefaultVertex");goog.require("ol.webgl.shader");ol.render.webgl.imagereplay.shader.DefaultFragment=function(){goog.base(this,ol.render.webgl.imagereplay.shader.DefaultFragment.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.DefaultFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.DefaultFragment);ol.render.webgl.imagereplay.shader.DefaultFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n";ol.render.webgl.imagereplay.shader.DefaultFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"
;ol.render.webgl.imagereplay.shader.DefaultFragment.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.DefaultFragment.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.DefaultFragment.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.DefaultVertex=function(){goog.base(this,ol.render.webgl.imagereplay.shader.DefaultVertex.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.DefaultVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.DefaultVertex);ol.render.webgl.imagereplay.shader.DefaultVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0., 0.);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n";ol.render.webgl.imagereplay.shader.DefaultVertex.OPTIMIZED_SOURCE="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}";ol.render.webgl.imagereplay.shader.DefaultVertex.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.DefaultVertex.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.DefaultVertex.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.Default.Locations=function(a,b){this.u_image=a.getUniformLocation(b,goog.DEBUG?"u_image":"l");this.u_offsetRotateMatrix=a.getUniformLocation(b,goog.DEBUG?"u_offsetRotateMatrix":"j");this.u_offsetScaleMatrix=a.getUniformLocation(b,goog.DEBUG?"u_offsetScaleMatrix":"i");this.u_opacity=a.getUniformLocation(b,goog.DEBUG?"u_opacity":"k");this.u_projectionMatrix=a.getUniformLocation(b,goog.DEBUG?"u_projectionMatrix":"h");this.a_offsets=a.getAttribLocation(b,goog.DEBUG?"a_offsets":"e");this.a_opacity=a.getAttribLocation(b,goog.DEBUG?"a_opacity":"f");this.a_position=a.getAttribLocation(b,goog.DEBUG?"a_position":"c");this.a_rotateWithView=a.getAttribLocation(b,goog.DEBUG?"a_rotateWithView":"g");this.a_texCoord=a.getAttribLocation(b,goog.DEBUG?"a_texCoord":"d")};goog.provide("ol.webgl.Buffer");goog.require("goog.webgl");goog.require("ol");ol.webgl.BufferUsage={STATIC_DRAW:goog.webgl.STATIC_DRAW,STREAM_DRAW:goog.webgl.STREAM_DRAW,DYNAMIC_DRAW:goog.webgl.DYNAMIC_DRAW};ol.webgl.Buffer=function(a,b){this.arr_=goog.isDef(a)?a:[];this.usage_=goog.isDef(b)?b:ol.webgl.BufferUsage.STATIC_DRAW};ol.webgl.Buffer.prototype.getArray=function(){return this.arr_};ol.webgl.Buffer.prototype.getUsage=function(){return this.usage_};goog.provide("ol.webgl.Context");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.log");goog.require("goog.object");goog.require("ol");goog.require("ol.webgl.Buffer");goog.require("ol.webgl.WebGLContextEventType");ol.webgl.BufferCacheEntry;ol.webgl.Context=function(a,b){this.canvas_=a;this.gl_=b;this.bufferCache_={};this.shaderCache_={};this.programCache_={};this.currentProgram_=null;this.hitDetectionFramebuffer_=null;this.hitDetectionTexture_=null;this.hitDetectionRenderbuffer_=null;this.hasOESElementIndexUint=goog.array.contains(ol.WEBGL_EXTENSIONS,"OES_element_index_uint");if(this.hasOESElementIndexUint){var c=b.getExtension("OES_element_index_uint");goog.asserts.assert(!goog.isNull(c),'Failed to get extension "OES_element_index_uint"')}goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.LOST,this.handleWebGLContextLost,false,this);goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.RESTORED,this.handleWebGLContextRestored,false,this)};ol.webgl.Context.prototype.bindBuffer=function(a,b){var c=this.getGL();var d=b.getArray();var e=goog.getUid(b);if(e in this.bufferCache_){var f=this.bufferCache_[e];c.bindBuffer(a,f.buffer)}else{var g=c.createBuffer();c.bindBuffer(a,g);goog.asserts.assert(a==goog.webgl.ARRAY_BUFFER||a==goog.webgl.ELEMENT_ARRAY_BUFFER,"target is supposed to be an ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER");var h;if(a==goog.webgl.ARRAY_BUFFER){h=new Float32Array(d)}else if(a==goog.webgl.ELEMENT_ARRAY_BUFFER){h=this.hasOESElementIndexUint?new Uint32Array(d):new Uint16Array(d)}else{goog.asserts.fail()}c.bufferData(a,h,b.getUsage());this.bufferCache_[e]={buf:b,buffer:g}}};ol.webgl.Context.prototype.deleteBuffer=function(a){var b=this.getGL();var c=goog.getUid(a);goog.asserts.assert(c in this.bufferCache_,"attempted to delete uncached buffer");var d=this.bufferCache_[c];if(!b.isContextLost()){b.deleteBuffer(d.buffer)}delete this.bufferCache_[c]};ol.webgl.Context.prototype.disposeInternal=function(){var a=this.getGL();if(!a.isContextLost()){goog.object.forEach(this.bufferCache_,function(b){a.deleteBuffer(b.buffer)});goog.object.forEach(this.programCache_,function(b){a.deleteProgram(b)});goog.object.forEach(this.shaderCache_,function(b){a.deleteShader(b)});a.deleteFramebuffer(this.hitDetectionFramebuffer_);a.deleteRenderbuffer(this.hitDetectionRenderbuffer_);a.deleteTexture(this.hitDetectionTexture_)}};ol.webgl.Context.prototype.getCanvas=function(){return this.canvas_};ol.webgl.Context.prototype.getGL=function(){return this.gl_};ol.webgl.Context.prototype.getHitDetectionFramebuffer=function(){if(goog.isNull(this.hitDetectionFramebuffer_)){this.initHitDetectionFramebuffer_()}return this.hitDetectionFramebuffer_};ol.webgl.Context.prototype.getShader=function(a){var b=goog.getUid(a);if(b in this.shaderCache_){return this.shaderCache_[b]}else{var c=this.getGL();var d=c.createShader(a.getType());c.shaderSource(d,a.getSource());c.compileShader(d);if(goog.DEBUG){if(!c.getShaderParameter(d,goog.webgl.COMPILE_STATUS)&&!c.isContextLost()){goog.log.error(this.logger_,c.getShaderInfoLog(d))}}goog.asserts.assert(c.getShaderParameter(d,goog.webgl.COMPILE_STATUS)||c.isContextLost(),"illegal state, shader not compiled or context lost");this.shaderCache_[b]=d;return d}};ol.webgl.Context.prototype.getProgram=function(a,b){var c=goog.getUid(a)+"/"+goog.getUid(b);if(c in this.programCache_){return this.programCache_[c]}else{var d=this.getGL();var e=d.createProgram();d.attachShader(e,this.getShader(a));d.attachShader(e,this.getShader(b));d.linkProgram(e);if(goog.DEBUG){if(!d.getProgramParameter(e,goog.webgl.LINK_STATUS)&&!d.isContextLost()){goog.log.error(this.logger_,d.getProgramInfoLog(e))}}goog.asserts.assert(d.getProgramParameter(e,goog.webgl.LINK_STATUS)||d.isContextLost(),"illegal state, shader not linked or context lost");this.programCache_[c]=e;return e}};ol.webgl.Context.prototype.handleWebGLContextLost=function(){goog.object.clear(this.bufferCache_);goog.object.clear(this.shaderCache_);goog.object.clear(this.programCache_);this.currentProgram_=null;this.hitDetectionFramebuffer_=null;this.hitDetectionTexture_=null;this.hitDetectionRenderbuffer_=null};ol.webgl.Context.prototype.handleWebGLContextRestored=function(){};ol.webgl.Context.prototype.initHitDetectionFramebuffer_=function(){var a=this.gl_;var b=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,b);var c=ol.webgl.Context.createEmptyTexture(a,1,1);var d=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,d);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,1,1);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,c,0);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,d);a.bindTexture(a.TEXTURE_2D,null);a.bindRenderbuffer(a.RENDERBUFFER,null);a.bindFramebuffer(a.FRAMEBUFFER,null);this.hitDetectionFramebuffer_=b;this.hitDetectionTexture_=c;this.hitDetectionRenderbuffer_=d};ol.webgl.Context.prototype.useProgram=function(a){if(a==this.currentProgram_){return false}else{var b=this.getGL();b.useProgram(a);this.currentProgram_=a;return true}};ol.webgl.Context.prototype.logger_=goog.log.getLogger("ol.webgl.Context");ol.webgl.Context.createTexture_=function(a,b,c){var d=a.createTexture();a.bindTexture(a.TEXTURE_2D,d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);if(goog.isDef(b)){a.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_S,b)}if(goog.isDef(c)){a.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_T,c)}return d};ol.webgl.Context.createEmptyTexture=function(a,b,c,d,e){var f=ol.webgl.Context.createTexture_(a,d,e);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,a.UNSIGNED_BYTE,null);return f};ol.webgl.Context.createTexture=function(a,b,c,d){var e=ol.webgl.Context.createTexture_(a,c,d);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);return e};goog.provide("ol.render.webgl.ImageReplay");goog.provide("ol.render.webgl.ReplayGroup");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.color.Matrix");goog.require("ol.extent");goog.require("ol.render.IReplayGroup");goog.require("ol.render.VectorContext");goog.require("ol.render.webgl.imagereplay.shader.Color");goog.require("ol.render.webgl.imagereplay.shader.Color.Locations");goog.require("ol.render.webgl.imagereplay.shader.ColorFragment");goog.require("ol.render.webgl.imagereplay.shader.ColorVertex");goog.require("ol.render.webgl.imagereplay.shader.Default");goog.require("ol.render.webgl.imagereplay.shader.Default.Locations");goog.require("ol.render.webgl.imagereplay.shader.DefaultFragment");goog.require("ol.render.webgl.imagereplay.shader.DefaultVertex");goog.require("ol.vec.Mat4");goog.require("ol.webgl.Buffer");goog.require("ol.webgl.Context");ol.render.webgl.ImageReplay=function(a,b){goog.base(this);this.anchorX_=undefined;this.anchorY_=undefined;this.colorMatrix_=new ol.color.Matrix;this.origin_=ol.extent.getCenter(b);this.groupIndices_=[];this.hitDetectionGroupIndices_=[];this.height_=undefined;this.images_=[];this.hitDetectionImages_=[];this.imageHeight_=undefined;this.imageWidth_=undefined;this.indices_=[];this.indicesBuffer_=null;this.colorLocations_=null;this.defaultLocations_=null;this.opacity_=undefined;this.offsetRotateMatrix_=goog.vec.Mat4.createNumberIdentity();this.offsetScaleMatrix_=goog.vec.Mat4.createNumberIdentity();this.originX_=undefined;this.originY_=undefined;this.projectionMatrix_=goog.vec.Mat4.createNumberIdentity();this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.textures_=[];this.hitDetectionTextures_=[];this.vertices_=[];this.verticesBuffer_=null;this.startIndices_=[];this.startIndicesFeature_=[];this.width_=undefined};goog.inherits(ol.render.webgl.ImageReplay,ol.render.VectorContext);ol.render.webgl.ImageReplay.prototype.getDeleteResourcesFunction=function(a){goog.asserts.assert(!goog.isNull(this.verticesBuffer_),"verticesBuffer must not be null");goog.asserts.assert(!goog.isNull(this.indicesBuffer_),"indicesBuffer must not be null");var b=this.verticesBuffer_;var c=this.indicesBuffer_;var d=this.textures_;var e=this.hitDetectionTextures_;var f=a.getGL();return function(){if(!f.isContextLost()){var g,h;for(g=0,h=d.length;g<h;++g){f.deleteTexture(d[g])}for(g=0,h=e.length;g<h;++g){f.deleteTexture(e[g])}}a.deleteBuffer(b);a.deleteBuffer(c)}};ol.render.webgl.ImageReplay.prototype.drawAsync=goog.abstractMethod;ol.render.webgl.ImageReplay.prototype.drawCoordinates_=function(a,b,c,d){goog.asserts.assert(goog.isDef(this.anchorX_),"anchorX is defined");goog.asserts.assert(goog.isDef(this.anchorY_),"anchorY is defined");goog.asserts.assert(goog.isDef(this.height_),"height is defined");goog.asserts.assert(goog.isDef(this.imageHeight_),"imageHeight is defined");goog.asserts.assert(goog.isDef(this.imageWidth_),"imageWidth is defined");goog.asserts.assert(goog.isDef(this.opacity_),"opacity is defined");goog.asserts.assert(goog.isDef(this.originX_),"originX is defined");goog.asserts.assert(goog.isDef(this.originY_),"originY is defined");goog.asserts.assert(goog.isDef(this.rotateWithView_),"rotateWithView is defined");goog.asserts.assert(goog.isDef(this.rotation_),"rotation is defined");goog.asserts.assert(goog.isDef(this.scale_),"scale is defined");goog.asserts.assert(goog.isDef(this.width_),"width is defined");var e=this.anchorX_;var f=this.anchorY_;var g=this.height_;var h=this.imageHeight_;var i=this.imageWidth_;var j=this.opacity_;var k=this.originX_;var l=this.originY_;var m=this.rotateWithView_?1:0;var n=this.rotation_;var o=this.scale_;var p=this.width_;var q=Math.cos(n);var r=Math.sin(n);var s=this.indices_.length;var t=this.vertices_.length;var u,v,w,x,y,z;for(u=b;u<c;u+=d){y=a[u]-this.origin_[0];z=a[u+1]-this.origin_[1];v=t/8;w=-o*e;x=-o*(g-f);this.vertices_[t++]=y;this.vertices_[t++]=z;this.vertices_[t++]=w*q-x*r;this.vertices_[t++]=w*r+x*q;this.vertices_[t++]=k/i;this.vertices_[t++]=(l+g)/h;this.vertices_[t++]=j;this.vertices_[t++]=m;w=o*(p-e);x=-o*(g-f);this.vertices_[t++]=y;this.vertices_[t++]=z;this.vertices_[t++]=w*q-x*r;this.vertices_[t++]=w*r+x*q;this.vertices_[t++]=(k+p)/i;this.vertices_[t++]=(l+g)/h;this.vertices_[t++]=j;this.vertices_[t++]=m;w=o*(p-e);x=o*f;this.vertices_[t++]=y;this.vertices_[t++]=z;this.vertices_[t++]=w*q-x*r;this.vertices_[t++]=w*r+x*q;this.vertices_[t++]=(k+p)/i;this.vertices_[t++]=l/h;this.vertices_[t++]=j;this.vertices_[t++]=m;w=-o*e;x=o*f;this.vertices_[t++]=y;this.vertices_[t++]=z;this.vertices_[t++]=w*q-x*r;this.vertices_[t++]=w*r+x*q;this.vertices_[t++]=k/i;this.vertices_[t++]=l/h;this.vertices_[t++]=j;this.vertices_[t++]=m;this.indices_[s++]=v;this.indices_[s++]=v+1;this.indices_[s++]=v+2;this.indices_[s++]=v;this.indices_[s++]=v+2;this.indices_[s++]=v+3}return t};ol.render.webgl.ImageReplay.prototype.drawMultiPointGeometry=function(a,b){this.startIndices_.push(this.indices_.length);this.startIndicesFeature_.push(b);var c=a.getFlatCoordinates();var d=a.getStride();this.drawCoordinates_(c,0,c.length,d)};ol.render.webgl.ImageReplay.prototype.drawPointGeometry=function(a,b){this.startIndices_.push(this.indices_.length);this.startIndicesFeature_.push(b);var c=a.getFlatCoordinates();var d=a.getStride();this.drawCoordinates_(c,0,c.length,d)};ol.render.webgl.ImageReplay.prototype.finish=function(a){var b=a.getGL();this.groupIndices_.push(this.indices_.length);goog.asserts.assert(this.images_.length===this.groupIndices_.length,"number of images and groupIndices match");this.hitDetectionGroupIndices_.push(this.indices_.length);goog.asserts.assert(this.hitDetectionImages_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionImages and hitDetectionGroupIndices match");this.verticesBuffer_=new ol.webgl.Buffer(this.vertices_);a.bindBuffer(goog.webgl.ARRAY_BUFFER,this.verticesBuffer_);var c=this.indices_;var d=a.hasOESElementIndexUint?32:16;goog.asserts.assert(c[c.length-1]<Math.pow(2,d),'Too large element index detected [%s] (OES_element_index_uint "%s")',c[c.length-1],a.hasOESElementIndexUint);this.indicesBuffer_=new ol.webgl.Buffer(c);a.bindBuffer(goog.webgl.ELEMENT_ARRAY_BUFFER,this.indicesBuffer_);var e={};this.createTextures_(this.textures_,this.images_,e,b);goog.asserts.assert(this.textures_.length===this.groupIndices_.length,"number of textures and groupIndices match");this.createTextures_(this.hitDetectionTextures_,this.hitDetectionImages_,e,b);goog.asserts.assert(this.hitDetectionTextures_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionTextures and hitDetectionGroupIndices match");this.anchorX_=undefined;this.anchorY_=undefined;this.height_=undefined;this.images_=null;this.hitDetectionImages_=null;this.imageHeight_=undefined;this.imageWidth_=undefined;this.indices_=null;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.vertices_=null;this.width_=undefined};ol.render.webgl.ImageReplay.prototype.createTextures_=function(a,b,c,d){goog.asserts.assert(a.length===0,"upon creation, textures is empty");var e,f,g,h;var i=b.length;for(h=0;h<i;++h){f=b[h];g=goog.getUid(f).toString();if(goog.object.containsKey(c,g)){e=c[g]}else{e=ol.webgl.Context.createTexture(d,f,goog.webgl.CLAMP_TO_EDGE,goog.webgl.CLAMP_TO_EDGE);c[g]=e}a[h]=e}};ol.render.webgl.ImageReplay.prototype.replay=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=a.getGL();goog.asserts.assert(!goog.isNull(this.verticesBuffer_),"verticesBuffer must not be null");a.bindBuffer(goog.webgl.ARRAY_BUFFER,this.verticesBuffer_);goog.asserts.assert(!goog.isNull(this.indicesBuffer_),"indecesBuffer must not be null");a.bindBuffer(goog.webgl.ELEMENT_ARRAY_BUFFER,this.indicesBuffer_);var q=h||i!=1||j||k!=1;var r,s;if(q){r=ol.render.webgl.imagereplay.shader.ColorFragment.getInstance();s=ol.render.webgl.imagereplay.shader.ColorVertex.getInstance()}else{r=ol.render.webgl.imagereplay.shader.DefaultFragment.getInstance();s=ol.render.webgl.imagereplay.shader.DefaultVertex.getInstance()}var t=a.getProgram(r,s);var u;if(q){if(goog.isNull(this.colorLocations_)){u=new ol.render.webgl.imagereplay.shader.Color.Locations(p,t);this.colorLocations_=u}else{u=this.colorLocations_}}else{if(goog.isNull(this.defaultLocations_)){u=new ol.render.webgl.imagereplay.shader.Default.Locations(p,t);this.defaultLocations_=u}else{u=this.defaultLocations_}}a.useProgram(t);p.enableVertexAttribArray(u.a_position);p.vertexAttribPointer(u.a_position,2,goog.webgl.FLOAT,false,32,0);p.enableVertexAttribArray(u.a_offsets);p.vertexAttribPointer(u.a_offsets,2,goog.webgl.FLOAT,false,32,8);p.enableVertexAttribArray(u.a_texCoord);p.vertexAttribPointer(u.a_texCoord,2,goog.webgl.FLOAT,false,32,16);p.enableVertexAttribArray(u.a_opacity);p.vertexAttribPointer(u.a_opacity,1,goog.webgl.FLOAT,false,32,24);p.enableVertexAttribArray(u.a_rotateWithView);p.vertexAttribPointer(u.a_rotateWithView,1,goog.webgl.FLOAT,false,32,28);var v=this.projectionMatrix_;ol.vec.Mat4.makeTransform2D(v,0,0,2/(c*e[0]),2/(c*e[1]),-d,-(b[0]-this.origin_[0]),-(b[1]-this.origin_[1]));var w=this.offsetScaleMatrix_;goog.vec.Mat4.makeScale(w,2/e[0],2/e[1],1);var x=this.offsetRotateMatrix_;goog.vec.Mat4.makeIdentity(x);if(d!==0){goog.vec.Mat4.rotateZ(x,-d)}p.uniformMatrix4fv(u.u_projectionMatrix,false,v);p.uniformMatrix4fv(u.u_offsetScaleMatrix,false,w);p.uniformMatrix4fv(u.u_offsetRotateMatrix,false,x);p.uniform1f(u.u_opacity,g);if(q){p.uniformMatrix4fv(u.u_colorMatrix,false,this.colorMatrix_.getMatrix(h,i,j,k))}var y;if(!goog.isDef(m)){this.drawReplay_(p,a,l,this.textures_,this.groupIndices_)}else{y=this.drawHitDetectionReplay_(p,a,l,m,n,o)}p.disableVertexAttribArray(u.a_position);p.disableVertexAttribArray(u.a_offsets);p.disableVertexAttribArray(u.a_texCoord);p.disableVertexAttribArray(u.a_opacity);p.disableVertexAttribArray(u.a_rotateWithView);return y};ol.render.webgl.ImageReplay.prototype.drawReplay_=function(a,b,c,d,e){goog.asserts.assert(d.length===e.length,"number of textures and groupIndeces match");var f=b.hasOESElementIndexUint?goog.webgl.UNSIGNED_INT:goog.webgl.UNSIGNED_SHORT;var g=b.hasOESElementIndexUint?4:2;if(!goog.object.isEmpty(c)){this.drawReplaySkipping_(a,c,d,e,f,g)}else{var h,i,j;for(h=0,i=d.length,j=0;h<i;++h){a.bindTexture(goog.webgl.TEXTURE_2D,d[h]);var k=e[h];this.drawElements_(a,j,k,f,g);j=k}}};ol.render.webgl.ImageReplay.prototype.drawReplaySkipping_=function(a,b,c,d,e,f){var g=0;var h,i;for(h=0,i=c.length;h<i;++h){a.bindTexture(goog.webgl.TEXTURE_2D,c[h]);var j=h>0?d[h-1]:0;var k=d[h];var l=j;var m=j;while(g<this.startIndices_.length&&this.startIndices_[g]<=k){var n=this.startIndicesFeature_[g];var o=goog.getUid(n).toString();if(goog.isDef(b[o])){if(l!==m){this.drawElements_(a,l,m,e,f)}l=g===this.startIndices_.length-1?k:this.startIndices_[g+1];m=l}else{m=g===this.startIndices_.length-1?k:this.startIndices_[g+1]}g++}if(l!==m){this.drawElements_(a,l,m,e,f)}}};ol.render.webgl.ImageReplay.prototype.drawElements_=function(a,b,c,d,e){var f=c-b;var g=b*e;a.drawElements(goog.webgl.TRIANGLES,f,d,g)};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplay_=function(a,b,c,d,e,f){if(!e){return this.drawHitDetectionReplayAll_(a,b,c,d)}else{return this.drawHitDetectionReplayOneByOne_(a,b,c,d,f)}};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplayAll_=function(a,b,c,d){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);this.drawReplay_(a,b,c,this.hitDetectionTextures_,this.hitDetectionGroupIndices_);var e=d(null);if(e){return e}else{return undefined}};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplayOneByOne_=function(a,b,c,d,e){goog.asserts.assert(this.hitDetectionTextures_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionTextures and hitDetectionGroupIndices match");var f=b.hasOESElementIndexUint?goog.webgl.UNSIGNED_INT:goog.webgl.UNSIGNED_SHORT;var g=b.hasOESElementIndexUint?4:2;var h,i,j,k,l,m;var n=this.startIndices_.length-1;for(h=this.hitDetectionTextures_.length-1;h>=0;--h){a.bindTexture(goog.webgl.TEXTURE_2D,this.hitDetectionTextures_[h]);i=h>0?this.hitDetectionGroupIndices_[h-1]:0;k=this.hitDetectionGroupIndices_[h];while(n>=0&&this.startIndices_[n]>=i){j=this.startIndices_[n];l=this.startIndicesFeature_[n];m=goog.getUid(l).toString();if(!goog.isDef(c[m])&&goog.isDefAndNotNull(l.getGeometry())&&(!goog.isDef(e)||ol.extent.intersects(e,l.getGeometry().getExtent()))){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);this.drawElements_(a,j,k,f,g);var o=d(l);if(o){return o}}k=j;n--}}return undefined};ol.render.webgl.ImageReplay.prototype.setFillStrokeStyle=goog.abstractMethod;ol.render.webgl.ImageReplay.prototype.setImageStyle=function(a){var b=a.getAnchor();var c=a.getImage(1);var d=a.getImageSize();var e=a.getHitDetectionImage(1);var f=a.getHitDetectionImageSize();var g=a.getOpacity();var h=a.getOrigin();var i=a.getRotateWithView();var j=a.getRotation();var k=a.getSize();var l=a.getScale();goog.asserts.assert(!goog.isNull(b),"imageStyle anchor is not null");goog.asserts.assert(!goog.isNull(c),"imageStyle image is not null");goog.asserts.assert(!goog.isNull(d),"imageStyle imageSize is not null");goog.asserts.assert(!goog.isNull(e),"imageStyle hitDetectionImage is not null");goog.asserts.assert(!goog.isNull(f),"imageStyle hitDetectionImageSize is not null");goog.asserts.assert(goog.isDef(g),"imageStyle opacity is defined");goog.asserts.assert(!goog.isNull(h),"imageStyle origin is not null");goog.asserts.assert(goog.isDef(i),"imageStyle rotateWithView is defined");goog.asserts.assert(goog.isDef(j),"imageStyle rotation is defined");goog.asserts.assert(!goog.isNull(k),"imageStyle size is not null");goog.asserts.assert(goog.isDef(l),"imageStyle scale is defined");var m;if(this.images_.length===0){this.images_.push(c)}else{m=this.images_[this.images_.length-1];if(goog.getUid(m)!=goog.getUid(c)){this.groupIndices_.push(this.indices_.length);goog.asserts.assert(this.groupIndices_.length===this.images_.length,"number of groupIndices and images match");this.images_.push(c)}}if(this.hitDetectionImages_.length===0){this.hitDetectionImages_.push(e)}else{m=this.hitDetectionImages_[this.hitDetectionImages_.length-1];if(goog.getUid(m)!=goog.getUid(e)){this.hitDetectionGroupIndices_.push(this.indices_.length);goog.asserts.assert(this.hitDetectionGroupIndices_.length===this.hitDetectionImages_.length,"number of hitDetectionGroupIndices and hitDetectionImages match");this.hitDetectionImages_.push(e)}}this.anchorX_=b[0];this.anchorY_=b[1];this.height_=k[1];this.imageHeight_=d[1];this.imageWidth_=d[0];this.opacity_=g;this.originX_=h[0];this.originY_=h[1];this.rotation_=j;this.rotateWithView_=i;this.scale_=l;this.width_=k[0]};ol.render.webgl.ReplayGroup=function(a,b,c){this.maxExtent_=b;this.tolerance_=a;this.renderBuffer_=c;this.replays_={}};ol.render.webgl.ReplayGroup.prototype.getDeleteResourcesFunction=function(a){var b=[];var c;for(c in this.replays_){b.push(this.replays_[c].getDeleteResourcesFunction(a))}return goog.functions.sequence.apply(null,b)};ol.render.webgl.ReplayGroup.prototype.finish=function(a){var b;for(b in this.replays_){this.replays_[b].finish(a)}};ol.render.webgl.ReplayGroup.prototype.getReplay=function(a,b){var c=this.replays_[b];if(!goog.isDef(c)){var d=ol.render.webgl.BATCH_CONSTRUCTORS_[b];goog.asserts.assert(goog.isDef(d),b+" constructor missing from ol.render.webgl.BATCH_CONSTRUCTORS_");c=new d(this.tolerance_,this.maxExtent_);this.replays_[b]=c}return c};ol.render.webgl.ReplayGroup.prototype.isEmpty=function(){return goog.object.isEmpty(this.replays_)};ol.render.webgl.ReplayGroup.prototype.replay=function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p;for(m=0,n=ol.render.REPLAY_ORDER.length;m<n;++m){o=this.replays_[ol.render.REPLAY_ORDER[m]];if(goog.isDef(o)){o.replay(a,b,c,d,e,f,g,h,i,j,k,l,undefined,false)}}};ol.render.webgl.ReplayGroup.prototype.replayHitDetection_=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q,r;for(p=ol.render.REPLAY_ORDER.length-1;p>=0;--p){q=this.replays_[ol.render.REPLAY_ORDER[p]];if(goog.isDef(q)){r=q.replay(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o);if(r){return r}}}return undefined};ol.render.webgl.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=b.getGL();o.bindFramebuffer(o.FRAMEBUFFER,b.getHitDetectionFramebuffer());var p;if(goog.isDef(this.renderBuffer_)){p=ol.extent.buffer(ol.extent.createOrUpdateFromCoordinate(a),d*this.renderBuffer_)}return this.replayHitDetection_(b,a,d,e,ol.render.webgl.HIT_DETECTION_SIZE_,g,h,i,j,k,l,m,function(a){var b=new Uint8Array(4);o.readPixels(0,0,1,1,o.RGBA,o.UNSIGNED_BYTE,b);if(b[3]>0){var c=n(a);if(c){return c}}},true,p)};ol.render.webgl.ReplayGroup.prototype.hasFeatureAtCoordinate=function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=b.getGL();n.bindFramebuffer(n.FRAMEBUFFER,b.getHitDetectionFramebuffer());var o=this.replayHitDetection_(b,a,d,e,ol.render.webgl.HIT_DETECTION_SIZE_,g,h,i,j,k,l,m,function(a){var b=new Uint8Array(4);n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,b);return b[3]>0},false);return goog.isDef(o)};ol.render.webgl.BATCH_CONSTRUCTORS_={Image:ol.render.webgl.ImageReplay};ol.render.webgl.HIT_DETECTION_SIZE_=[1,1];goog.provide("ol.render.webgl.Immediate");goog.require("goog.array");goog.require("goog.object");goog.require("ol.extent");goog.require("ol.render.VectorContext");goog.require("ol.render.webgl.ImageReplay");goog.require("ol.render.webgl.ReplayGroup");ol.render.webgl.Immediate=function(a,b,c,d,e,f,g){goog.base(this);this.context_=a;this.center_=b;this.extent_=f;this.pixelRatio_=g;this.size_=e;this.rotation_=d;this.resolution_=c;this.imageStyle_=null;this.callbacksByZIndex_={}};goog.inherits(ol.render.webgl.Immediate,ol.render.VectorContext);ol.render.webgl.Immediate.prototype.flush=function(){var a=goog.array.map(goog.object.getKeys(this.callbacksByZIndex_),Number);goog.array.sort(a);var b,c,d,e,f;for(b=0,c=a.length;b<c;++b){d=this.callbacksByZIndex_[a[b].toString()];for(e=0,f=d.length;e<f;++e){d[e](this)}}};ol.render.webgl.Immediate.prototype.drawAsync=function(a,b){var c=a.toString();var d=this.callbacksByZIndex_[c];if(goog.isDef(d)){d.push(b)}else{this.callbacksByZIndex_[c]=[b]}};ol.render.webgl.Immediate.prototype.drawCircleGeometry=function(a,b){};ol.render.webgl.Immediate.prototype.drawFeature=function(a,b){var c=b.getGeometryFunction()(a);if(!goog.isDefAndNotNull(c)||!ol.extent.intersects(this.extent_,c.getExtent())){return}var d=b.getZIndex();if(!goog.isDef(d)){d=0}this.drawAsync(d,function(a){a.setFillStrokeStyle(b.getFill(),b.getStroke());a.setImageStyle(b.getImage());a.setTextStyle(b.getText());var d=c.getType();var e=ol.render.webgl.Immediate.GEOMETRY_RENDERERS_[d];if(e){e.call(a,c,null)}})};ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry=function(a,b){var c=a.getGeometriesArray();var d=ol.render.webgl.Immediate.GEOMETRY_RENDERERS_;var e,f;for(e=0,f=c.length;e<f;++e){var g=c[e];var h=d[g.getType()];if(h){h.call(this,g,b)}}};ol.render.webgl.Immediate.prototype.drawPointGeometry=function(a,b){var c=this.context_;var d=new ol.render.webgl.ReplayGroup(1,this.extent_);var e=d.getReplay(0,ol.render.ReplayType.IMAGE);e.setImageStyle(this.imageStyle_);e.drawPointGeometry(a,b);e.finish(c);var f=1;var g=0;var h=1;var i=0;var j=1;var k={};var l;var m=false;e.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,f,g,h,i,j,k,l,m);e.getDeleteResourcesFunction(c)()};ol.render.webgl.Immediate.prototype.drawLineStringGeometry=function(a,b){};ol.render.webgl.Immediate.prototype.drawMultiLineStringGeometry=function(a,b){};ol.render.webgl.Immediate.prototype.drawMultiPointGeometry=function(a,b){var c=this.context_;var d=new ol.render.webgl.ReplayGroup(1,this.extent_);var e=d.getReplay(0,ol.render.ReplayType.IMAGE);e.setImageStyle(this.imageStyle_);e.drawMultiPointGeometry(a,b);e.finish(c);var f=1;var g=0;var h=1;var i=0;var j=1;var k={};var l;var m=false;e.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,f,g,h,i,j,k,l,m);e.getDeleteResourcesFunction(c)()};ol.render.webgl.Immediate.prototype.drawMultiPolygonGeometry=function(a,b){};ol.render.webgl.Immediate.prototype.drawPolygonGeometry=function(a,b){};ol.render.webgl.Immediate.prototype.drawText=function(a,b,c,d,e,f){};ol.render.webgl.Immediate.prototype.setFillStrokeStyle=function(a,b){};ol.render.webgl.Immediate.prototype.setImageStyle=function(a){this.imageStyle_=a};ol.render.webgl.Immediate.prototype.setTextStyle=function(a){};ol.render.webgl.Immediate.GEOMETRY_RENDERERS_={Point:ol.render.webgl.Immediate.prototype.drawPointGeometry,MultiPoint:ol.render.webgl.Immediate.prototype.drawMultiPointGeometry,GeometryCollection:ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry};goog.provide("ol.renderer.webgl.map.shader.Color");goog.provide("ol.renderer.webgl.map.shader.Color.Locations");goog.provide("ol.renderer.webgl.map.shader.ColorFragment");goog.provide("ol.renderer.webgl.map.shader.ColorVertex");goog.require("ol.webgl.shader");ol.renderer.webgl.map.shader.ColorFragment=function(){goog.base(this,ol.renderer.webgl.map.shader.ColorFragment.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.ColorFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.map.shader.ColorFragment);ol.renderer.webgl.map.shader.ColorFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\n// @see https://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/filters/skia/SkiaImageFilterBuilder.cpp\nuniform mat4 u_colorMatrix;\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = (u_colorMatrix * vec4(texColor.rgb, 1.)).rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n";ol.renderer.webgl.map.shader.ColorFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform mat4 f;uniform float g;uniform sampler2D h;void main(void){vec4 texColor=texture2D(h,a);gl_FragColor.rgb=(f*vec4(texColor.rgb,1.)).rgb;gl_FragColor.a=texColor.a*g;}";ol.renderer.webgl.map.shader.ColorFragment.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.ColorFragment.DEBUG_SOURCE:ol.renderer.webgl.map.shader.ColorFragment.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.ColorVertex=function(){goog.base(this,ol.renderer.webgl.map.shader.ColorVertex.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.ColorVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.map.shader.ColorVertex)
;ol.renderer.webgl.map.shader.ColorVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n";ol.renderer.webgl.map.shader.ColorVertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}";ol.renderer.webgl.map.shader.ColorVertex.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.ColorVertex.DEBUG_SOURCE:ol.renderer.webgl.map.shader.ColorVertex.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.Color.Locations=function(a,b){this.u_colorMatrix=a.getUniformLocation(b,goog.DEBUG?"u_colorMatrix":"f");this.u_opacity=a.getUniformLocation(b,goog.DEBUG?"u_opacity":"g");this.u_projectionMatrix=a.getUniformLocation(b,goog.DEBUG?"u_projectionMatrix":"e");this.u_texCoordMatrix=a.getUniformLocation(b,goog.DEBUG?"u_texCoordMatrix":"d");this.u_texture=a.getUniformLocation(b,goog.DEBUG?"u_texture":"h");this.a_position=a.getAttribLocation(b,goog.DEBUG?"a_position":"b");this.a_texCoord=a.getAttribLocation(b,goog.DEBUG?"a_texCoord":"c")};goog.provide("ol.renderer.webgl.map.shader.Default");goog.provide("ol.renderer.webgl.map.shader.Default.Locations");goog.provide("ol.renderer.webgl.map.shader.DefaultFragment");goog.provide("ol.renderer.webgl.map.shader.DefaultVertex");goog.require("ol.webgl.shader");ol.renderer.webgl.map.shader.DefaultFragment=function(){goog.base(this,ol.renderer.webgl.map.shader.DefaultFragment.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.DefaultFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.map.shader.DefaultFragment);ol.renderer.webgl.map.shader.DefaultFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n";ol.renderer.webgl.map.shader.DefaultFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}";ol.renderer.webgl.map.shader.DefaultFragment.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.DefaultFragment.DEBUG_SOURCE:ol.renderer.webgl.map.shader.DefaultFragment.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.DefaultVertex=function(){goog.base(this,ol.renderer.webgl.map.shader.DefaultVertex.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.DefaultVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.map.shader.DefaultVertex);ol.renderer.webgl.map.shader.DefaultVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n";ol.renderer.webgl.map.shader.DefaultVertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}";ol.renderer.webgl.map.shader.DefaultVertex.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.DefaultVertex.DEBUG_SOURCE:ol.renderer.webgl.map.shader.DefaultVertex.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.Default.Locations=function(a,b){this.u_opacity=a.getUniformLocation(b,goog.DEBUG?"u_opacity":"f");this.u_projectionMatrix=a.getUniformLocation(b,goog.DEBUG?"u_projectionMatrix":"e");this.u_texCoordMatrix=a.getUniformLocation(b,goog.DEBUG?"u_texCoordMatrix":"d");this.u_texture=a.getUniformLocation(b,goog.DEBUG?"u_texture":"g");this.a_position=a.getAttribLocation(b,goog.DEBUG?"a_position":"b");this.a_texCoord=a.getAttribLocation(b,goog.DEBUG?"a_texCoord":"c")};goog.provide("ol.renderer.webgl.Layer");goog.require("goog.vec.Mat4");goog.require("goog.webgl");goog.require("ol.color.Matrix");goog.require("ol.layer.Layer");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.webgl.Immediate");goog.require("ol.renderer.Layer");goog.require("ol.renderer.webgl.map.shader.Color");goog.require("ol.renderer.webgl.map.shader.Color.Locations");goog.require("ol.renderer.webgl.map.shader.ColorFragment");goog.require("ol.renderer.webgl.map.shader.ColorVertex");goog.require("ol.renderer.webgl.map.shader.Default");goog.require("ol.renderer.webgl.map.shader.Default.Locations");goog.require("ol.renderer.webgl.map.shader.DefaultFragment");goog.require("ol.renderer.webgl.map.shader.DefaultVertex");goog.require("ol.webgl.Buffer");goog.require("ol.webgl.Context");ol.renderer.webgl.Layer=function(a,b){goog.base(this,b);this.mapRenderer=a;this.arrayBuffer_=new ol.webgl.Buffer([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.texture=null;this.framebuffer=null;this.framebufferDimension=undefined;this.texCoordMatrix=goog.vec.Mat4.createNumber();this.projectionMatrix=goog.vec.Mat4.createNumberIdentity();this.colorMatrix_=new ol.color.Matrix;this.colorLocations_=null;this.defaultLocations_=null};goog.inherits(ol.renderer.webgl.Layer,ol.renderer.Layer);ol.renderer.webgl.Layer.prototype.bindFramebuffer=function(a,b){var c=this.mapRenderer.getGL();if(!goog.isDef(this.framebufferDimension)||this.framebufferDimension!=b){a.postRenderFunctions.push(goog.partial(function(a,b,c){if(!a.isContextLost()){a.deleteFramebuffer(b);a.deleteTexture(c)}},c,this.framebuffer,this.texture));var d=ol.webgl.Context.createEmptyTexture(c,b,b);var e=c.createFramebuffer();c.bindFramebuffer(goog.webgl.FRAMEBUFFER,e);c.framebufferTexture2D(goog.webgl.FRAMEBUFFER,goog.webgl.COLOR_ATTACHMENT0,goog.webgl.TEXTURE_2D,d,0);this.texture=d;this.framebuffer=e;this.framebufferDimension=b}else{c.bindFramebuffer(goog.webgl.FRAMEBUFFER,this.framebuffer)}};ol.renderer.webgl.Layer.prototype.composeFrame=function(a,b,c){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,c,a);c.bindBuffer(goog.webgl.ARRAY_BUFFER,this.arrayBuffer_);var d=c.getGL();var e=b.brightness||b.contrast!=1||b.hue||b.saturation!=1;var f,g;if(e){f=ol.renderer.webgl.map.shader.ColorFragment.getInstance();g=ol.renderer.webgl.map.shader.ColorVertex.getInstance()}else{f=ol.renderer.webgl.map.shader.DefaultFragment.getInstance();g=ol.renderer.webgl.map.shader.DefaultVertex.getInstance()}var h=c.getProgram(f,g);var i;if(e){if(goog.isNull(this.colorLocations_)){i=new ol.renderer.webgl.map.shader.Color.Locations(d,h);this.colorLocations_=i}else{i=this.colorLocations_}}else{if(goog.isNull(this.defaultLocations_)){i=new ol.renderer.webgl.map.shader.Default.Locations(d,h);this.defaultLocations_=i}else{i=this.defaultLocations_}}if(c.useProgram(h)){d.enableVertexAttribArray(i.a_position);d.vertexAttribPointer(i.a_position,2,goog.webgl.FLOAT,false,16,0);d.enableVertexAttribArray(i.a_texCoord);d.vertexAttribPointer(i.a_texCoord,2,goog.webgl.FLOAT,false,16,8);d.uniform1i(i.u_texture,0)}d.uniformMatrix4fv(i.u_texCoordMatrix,false,this.getTexCoordMatrix());d.uniformMatrix4fv(i.u_projectionMatrix,false,this.getProjectionMatrix());if(e){d.uniformMatrix4fv(i.u_colorMatrix,false,this.colorMatrix_.getMatrix(b.brightness,b.contrast,b.hue,b.saturation))}d.uniform1f(i.u_opacity,b.opacity);d.bindTexture(goog.webgl.TEXTURE_2D,this.getTexture());d.drawArrays(goog.webgl.TRIANGLE_STRIP,0,4);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,c,a)};ol.renderer.webgl.Layer.prototype.dispatchComposeEvent_=function(a,b,c){var d=this.getLayer();if(d.hasListener(a)){var e=c.viewState;var f=e.resolution;var g=c.pixelRatio;var h=c.extent;var i=e.center;var j=e.rotation;var k=c.size;var l=new ol.render.webgl.Immediate(b,i,f,j,k,h,g);var m=new ol.render.Event(a,d,l,c,null,b);d.dispatchEvent(m)}};ol.renderer.webgl.Layer.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix};ol.renderer.webgl.Layer.prototype.getTexture=function(){return this.texture};ol.renderer.webgl.Layer.prototype.getProjectionMatrix=function(){return this.projectionMatrix};ol.renderer.webgl.Layer.prototype.handleWebGLContextLost=function(){this.texture=null;this.framebuffer=null;this.framebufferDimension=undefined};ol.renderer.webgl.Layer.prototype.prepareFrame=goog.abstractMethod;goog.provide("ol.renderer.webgl.ImageLayer");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.vec.Mat4");goog.require("goog.webgl");goog.require("ol.Coordinate");goog.require("ol.Extent");goog.require("ol.ImageBase");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.proj");goog.require("ol.renderer.webgl.Layer");goog.require("ol.source.ImageVector");goog.require("ol.vec.Mat4");goog.require("ol.webgl.Context");ol.renderer.webgl.ImageLayer=function(a,b){goog.base(this,a,b);this.image_=null;this.hitCanvasContext_=null;this.hitTransformationMatrix_=null};goog.inherits(ol.renderer.webgl.ImageLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.ImageLayer.prototype.createTexture_=function(a){var b=a.getImage();var c=this.mapRenderer.getGL();return ol.webgl.Context.createTexture(c,b,goog.webgl.CLAMP_TO_EDGE,goog.webgl.CLAMP_TO_EDGE)};ol.renderer.webgl.ImageLayer.prototype.forEachFeatureAtCoordinate=function(a,b,c,d){var e=this.getLayer();var f=e.getSource();var g=b.viewState.resolution;var h=b.viewState.rotation;var i=b.skippedFeatureUids;return f.forEachFeatureAtCoordinate(a,g,h,i,function(a){return c.call(d,a,e)})};ol.renderer.webgl.ImageLayer.prototype.prepareFrame=function(a,b,c){var d=this.mapRenderer.getGL();var e=a.pixelRatio;var f=a.viewState;var g=f.center;var h=f.resolution;var i=f.rotation;var j=this.image_;var k=this.texture;var l=this.getLayer();goog.asserts.assertInstanceof(l,ol.layer.Image,"layer is an instance of ol.layer.Image");var m=l.getSource();var n=a.viewHints;var o=a.extent;if(goog.isDef(b.extent)){o=ol.extent.getIntersection(o,b.extent)}if(!n[ol.ViewHint.ANIMATING]&&!n[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(o)){var p=f.projection;var q=m.getProjection();if(!goog.isNull(q)){goog.asserts.assert(ol.proj.equivalent(p,q),"projection and sourceProjection are equivalent");p=q}var r=m.getImage(o,h,e,p);if(!goog.isNull(r)){var s=this.loadImage(r);if(s){j=r;k=this.createTexture_(r);if(!goog.isNull(this.texture)){a.postRenderFunctions.push(goog.partial(function(a,b){if(!a.isContextLost()){a.deleteTexture(b)}},d,this.texture))}}}}if(!goog.isNull(j)){goog.asserts.assert(!goog.isNull(k),"texture is not null");var t=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(t.width,t.height,e,g,h,i,j.getExtent());this.hitTransformationMatrix_=null;var u=this.texCoordMatrix;goog.vec.Mat4.makeIdentity(u);goog.vec.Mat4.scale(u,1,-1,1);goog.vec.Mat4.translate(u,0,-1,0);this.image_=j;this.texture=k;this.updateAttributions(a.attributions,j.getAttributions());this.updateLogos(a,m)}return true};ol.renderer.webgl.ImageLayer.prototype.updateProjectionMatrix_=function(a,b,c,d,e,f,g){var h=a*e;var i=b*e;var j=this.projectionMatrix;goog.vec.Mat4.makeIdentity(j);goog.vec.Mat4.scale(j,c*2/h,c*2/i,1);goog.vec.Mat4.rotateZ(j,-f);goog.vec.Mat4.translate(j,g[0]-d[0],g[1]-d[1],0);goog.vec.Mat4.scale(j,(g[2]-g[0])/2,(g[3]-g[1])/2,1);goog.vec.Mat4.translate(j,1,1,0)};ol.renderer.webgl.ImageLayer.prototype.hasFeatureAtCoordinate=function(a,b){var c=this.forEachFeatureAtCoordinate(a,b,goog.functions.TRUE,this);return goog.isDef(c)};ol.renderer.webgl.ImageLayer.prototype.forEachLayerAtPixel=function(a,b,c,d){if(goog.isNull(this.image_)||goog.isNull(this.image_.getImage())){return undefined}if(this.getLayer().getSource()instanceof ol.source.ImageVector){var e=a.slice();ol.vec.Mat4.multVec2(b.pixelToCoordinateMatrix,e,e);var f=this.forEachFeatureAtCoordinate(e,b,goog.functions.TRUE,this);if(f){return c.call(d,this.getLayer())}else{return undefined}}else{var g=[this.image_.getImage().width,this.image_.getImage().height];if(goog.isNull(this.hitTransformationMatrix_)){this.hitTransformationMatrix_=this.getHitTransformationMatrix_(b.size,g)}var h=[0,0];ol.vec.Mat4.multVec2(this.hitTransformationMatrix_,a,h);if(h[0]<0||h[0]>g[0]||h[1]<0||h[1]>g[1]){return undefined}if(goog.isNull(this.hitCanvasContext_)){this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.image_.getImage(),h[0],h[1],1,1,0,0,1,1);var i=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(i[3]>0){return c.call(d,this.getLayer())}else{return undefined}}};ol.renderer.webgl.ImageLayer.prototype.getHitTransformationMatrix_=function(a,b){var c=goog.vec.Mat4.createNumber();goog.vec.Mat4.makeIdentity(c);goog.vec.Mat4.translate(c,-1,-1,0);goog.vec.Mat4.scale(c,2/a[0],2/a[1],1);goog.vec.Mat4.translate(c,0,a[1],0);goog.vec.Mat4.scale(c,1,-1,1);var d=goog.vec.Mat4.createNumber();goog.vec.Mat4.invert(this.projectionMatrix,d);var e=goog.vec.Mat4.createNumber();goog.vec.Mat4.makeIdentity(e);goog.vec.Mat4.translate(e,0,b[1],0);goog.vec.Mat4.scale(e,1,-1,1);goog.vec.Mat4.scale(e,b[0]/2,b[1]/2,1);goog.vec.Mat4.translate(e,1,1,0);var f=goog.vec.Mat4.createNumber();goog.vec.Mat4.multMat(e,d,f);goog.vec.Mat4.multMat(f,c,f);return f};goog.provide("ol.renderer.webgl.tilelayer.shader");goog.provide("ol.renderer.webgl.tilelayer.shader.Locations");goog.provide("ol.renderer.webgl.tilelayer.shader.Fragment");goog.provide("ol.renderer.webgl.tilelayer.shader.Vertex");goog.require("ol.webgl.shader");ol.renderer.webgl.tilelayer.shader.Fragment=function(){goog.base(this,ol.renderer.webgl.tilelayer.shader.Fragment.SOURCE)};goog.inherits(ol.renderer.webgl.tilelayer.shader.Fragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.tilelayer.shader.Fragment);ol.renderer.webgl.tilelayer.shader.Fragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n";ol.renderer.webgl.tilelayer.shader.Fragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}";ol.renderer.webgl.tilelayer.shader.Fragment.SOURCE=goog.DEBUG?ol.renderer.webgl.tilelayer.shader.Fragment.DEBUG_SOURCE:ol.renderer.webgl.tilelayer.shader.Fragment.OPTIMIZED_SOURCE;ol.renderer.webgl.tilelayer.shader.Vertex=function(){goog.base(this,ol.renderer.webgl.tilelayer.shader.Vertex.SOURCE)};goog.inherits(ol.renderer.webgl.tilelayer.shader.Vertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.tilelayer.shader.Vertex);ol.renderer.webgl.tilelayer.shader.Vertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n";ol.renderer.webgl.tilelayer.shader.Vertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}";ol.renderer.webgl.tilelayer.shader.Vertex.SOURCE=goog.DEBUG?ol.renderer.webgl.tilelayer.shader.Vertex.DEBUG_SOURCE:ol.renderer.webgl.tilelayer.shader.Vertex.OPTIMIZED_SOURCE;ol.renderer.webgl.tilelayer.shader.Locations=function(a,b){this.u_texture=a.getUniformLocation(b,goog.DEBUG?"u_texture":"e");this.u_tileOffset=a.getUniformLocation(b,goog.DEBUG?"u_tileOffset":"d");this.a_position=a.getAttribLocation(b,goog.DEBUG?"a_position":"b");this.a_texCoord=a.getAttribLocation(b,goog.DEBUG?"a_texCoord":"c")};goog.provide("ol.renderer.webgl.TileLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("goog.vec.Vec4");goog.require("goog.webgl");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.extent");goog.require("ol.layer.Tile");goog.require("ol.math");goog.require("ol.renderer.webgl.Layer");goog.require("ol.renderer.webgl.tilelayer.shader.Fragment");goog.require("ol.renderer.webgl.tilelayer.shader.Locations");goog.require("ol.renderer.webgl.tilelayer.shader.Vertex");goog.require("ol.size");goog.require("ol.tilecoord");goog.require("ol.vec.Mat4");goog.require("ol.webgl.Buffer");ol.renderer.webgl.TileLayer=function(a,b){goog.base(this,a,b);this.fragmentShader_=ol.renderer.webgl.tilelayer.shader.Fragment.getInstance();this.vertexShader_=ol.renderer.webgl.tilelayer.shader.Vertex.getInstance();this.locations_=null;this.renderArrayBuffer_=new ol.webgl.Buffer([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.renderedTileRange_=null;this.renderedFramebufferExtent_=null;this.renderedRevision_=-1;this.tmpSize_=[0,0]};goog.inherits(ol.renderer.webgl.TileLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.TileLayer.prototype.disposeInternal=function(){var a=this.mapRenderer.getContext();a.deleteBuffer(this.renderArrayBuffer_);goog.base(this,"disposeInternal")};ol.renderer.webgl.TileLayer.prototype.createLoadedTileFinder=function(a,b){var c=this.mapRenderer;return function(d,e){return a.forEachLoadedTile(d,e,function(a){var e=c.isTileTextureLoaded(a);if(e){if(!b[d]){b[d]={}}b[d][a.tileCoord.toString()]=a}return e})}};ol.renderer.webgl.TileLayer.prototype.handleWebGLContextLost=function(){goog.base(this,"handleWebGLContextLost");this.locations_=null};ol.renderer.webgl.TileLayer.prototype.prepareFrame=function(a,b,c){var d=this.mapRenderer;var e=c.getGL();var f=a.viewState;var g=f.projection;var h=this.getLayer();goog.asserts.assertInstanceof(h,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var i=h.getSource();var j=i.getTileGridForProjection(g);var k=j.getZForResolution(f.resolution);var l=j.getResolution(k);var m=i.getTilePixelSize(k,a.pixelRatio,g);var n=m[0]/ol.size.toSize(j.getTileSize(k),this.tmpSize_)[0];var o=l/n;var p=i.getGutter();var q=f.center;var r;if(l==f.resolution){q=this.snapCenterToPixel(q,l,a.size);r=ol.extent.getForViewAndSize(q,l,f.rotation,a.size)}else{r=a.extent}var s=j.getTileRangeForExtentAndResolution(r,l);var t;if(!goog.isNull(this.renderedTileRange_)&&this.renderedTileRange_.equals(s)&&this.renderedRevision_==i.getRevision()){t=this.renderedFramebufferExtent_}else{var u=s.getSize();var v=Math.max(u[0]*m[0],u[1]*m[1]);var w=ol.math.roundUpToPowerOfTwo(v);var x=o*w;var y=j.getOrigin(k);var z=y[0]+s.minX*m[0]*o;var A=y[1]+s.minY*m[1]*o;t=[z,A,z+x,A+x];this.bindFramebuffer(a,w);e.viewport(0,0,w,w);e.clearColor(0,0,0,0);e.clear(goog.webgl.COLOR_BUFFER_BIT);e.disable(goog.webgl.BLEND);var B=c.getProgram(this.fragmentShader_,this.vertexShader_);c.useProgram(B);if(goog.isNull(this.locations_)){this.locations_=new ol.renderer.webgl.tilelayer.shader.Locations(e,B)}c.bindBuffer(goog.webgl.ARRAY_BUFFER,this.renderArrayBuffer_);e.enableVertexAttribArray(this.locations_.a_position);e.vertexAttribPointer(this.locations_.a_position,2,goog.webgl.FLOAT,false,16,0);e.enableVertexAttribArray(this.locations_.a_texCoord);e.vertexAttribPointer(this.locations_.a_texCoord,2,goog.webgl.FLOAT,false,16,8);e.uniform1i(this.locations_.u_texture,0);var C={};C[k]={};var D=this.createLoadedTileFinder(i,C);var E=h.getUseInterimTilesOnError();var F=true;var G=ol.extent.createEmpty();var H=new ol.TileRange(0,0,0,0);var I,J,K,L,M,N,O;for(M=s.minX;M<=s.maxX;++M){for(N=s.minY;N<=s.maxY;++N){K=i.getTile(k,M,N,n,g);if(goog.isDef(b.extent)){O=j.getTileCoordExtent(K.tileCoord,G);if(!ol.extent.intersects(O,b.extent)){continue}}L=K.getState();if(L==ol.TileState.LOADED){if(d.isTileTextureLoaded(K)){C[k][ol.tilecoord.toString(K.tileCoord)]=K;continue}}else if(L==ol.TileState.EMPTY||L==ol.TileState.ERROR&&!E){continue}F=false;J=j.forEachTileCoordParentTileRange(K.tileCoord,D,null,H,G);if(!J){I=j.getTileCoordChildTileRange(K.tileCoord,H,G);if(!goog.isNull(I)){D(k+1,I)}}}}var P=goog.array.map(goog.object.getKeys(C),Number);goog.array.sort(P);var Q=goog.vec.Vec4.createFloat32();var R,S,T,U,V,W,X,Y;for(R=0,S=P.length;R<S;++R){W=C[P[R]];for(V in W){K=W[V];O=j.getTileCoordExtent(K.tileCoord,G);T=2*(O[2]-O[0])/x;U=2*(O[3]-O[1])/x;X=2*(O[0]-t[0])/x-1;Y=2*(O[1]-t[1])/x-1;goog.vec.Vec4.setFromValues(Q,T,U,X,Y);e.uniform4fv(this.locations_.u_tileOffset,Q);d.bindTileTexture(K,m,p*n,goog.webgl.LINEAR,goog.webgl.LINEAR);e.drawArrays(goog.webgl.TRIANGLE_STRIP,0,4)}}if(F){this.renderedTileRange_=s;this.renderedFramebufferExtent_=t;this.renderedRevision_=i.getRevision()}else{this.renderedTileRange_=null;this.renderedFramebufferExtent_=null;this.renderedRevision_=-1;a.animate=true}}this.updateUsedTiles(a.usedTiles,i,k,s);var Z=d.getTileTextureQueue();this.manageTilePyramid(a,i,j,n,g,r,k,h.getPreload(),function(a){if(a.getState()==ol.TileState.LOADED&&!d.isTileTextureLoaded(a)&&!Z.isKeyQueued(a.getKey())){Z.enqueue([a,j.getTileCoordCenter(a.tileCoord),j.getResolution(a.tileCoord[0]),m,p*n])}},this);this.scheduleExpireCache(a,i);this.updateLogos(a,i);var $=this.texCoordMatrix;goog.vec.Mat4.makeIdentity($);goog.vec.Mat4.translate($,(q[0]-t[0])/(t[2]-t[0]),(q[1]-t[1])/(t[3]-t[1]),0);if(f.rotation!==0){goog.vec.Mat4.rotateZ($,f.rotation)}goog.vec.Mat4.scale($,a.size[0]*f.resolution/(t[2]-t[0]),a.size[1]*f.resolution/(t[3]-t[1]),1);goog.vec.Mat4.translate($,-.5,-.5,0);return true};ol.renderer.webgl.TileLayer.prototype.forEachLayerAtPixel=function(a,b,c,d){if(goog.isNull(this.framebuffer)){return undefined}var e=[a[0]/b.size[0],(b.size[1]-a[1])/b.size[1]];var f=[0,0];ol.vec.Mat4.multVec2(this.texCoordMatrix,e,f);var g=[f[0]*this.framebufferDimension,f[1]*this.framebufferDimension];var h=this.mapRenderer.getContext().getGL();h.bindFramebuffer(h.FRAMEBUFFER,this.framebuffer);var i=new Uint8Array(4);h.readPixels(g[0],g[1],1,1,h.RGBA,h.UNSIGNED_BYTE,i);if(i[3]>0){return c.call(d,this.getLayer())}else{return undefined}};goog.provide("ol.renderer.webgl.VectorLayer");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("ol.ViewHint");goog.require("ol.extent");goog.require("ol.layer.Vector");goog.require("ol.render.webgl.ReplayGroup");goog.require("ol.renderer.vector");goog.require("ol.renderer.webgl.Layer");goog.require("ol.vec.Mat4");ol.renderer.webgl.VectorLayer=function(a,b){goog.base(this,a,b);this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.layerState_=null};goog.inherits(ol.renderer.webgl.VectorLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.VectorLayer.prototype.composeFrame=function(a,b,c){this.layerState_=b;var d=a.viewState;var e=this.replayGroup_;if(!goog.isNull(e)&&!e.isEmpty()){e.replay(c,d.center,d.resolution,d.rotation,a.size,a.pixelRatio,b.opacity,b.brightness,b.contrast,b.hue,b.saturation,b.managed?a.skippedFeatureUids:{})}};ol.renderer.webgl.VectorLayer.prototype.disposeInternal=function(){var a=this.replayGroup_;if(!goog.isNull(a)){var b=this.mapRenderer.getContext();a.getDeleteResourcesFunction(b)();this.replayGroup_=null}goog.base(this,"disposeInternal")};ol.renderer.webgl.VectorLayer.prototype.forEachFeatureAtCoordinate=function(a,b,c,d){if(goog.isNull(this.replayGroup_)||goog.isNull(this.layerState_)){return undefined}else{var e=this.mapRenderer.getContext();var f=b.viewState;var g=this.getLayer();var h=this.layerState_;var i={};return this.replayGroup_.forEachFeatureAtCoordinate(a,e,f.center,f.resolution,f.rotation,b.size,b.pixelRatio,h.opacity,h.brightness,h.contrast,h.hue,h.saturation,h.managed?b.skippedFeatureUids:{},function(a){goog.asserts.assert(goog.isDef(a),"received a feature");var b=goog.getUid(a).toString();if(!(b in i)){i[b]=true;return c.call(d,a,g)}})}};ol.renderer.webgl.VectorLayer.prototype.hasFeatureAtCoordinate=function(a,b){if(goog.isNull(this.replayGroup_)||goog.isNull(this.layerState_)){return false}else{var c=this.mapRenderer.getContext();var d=b.viewState;var e=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(a,c,d.center,d.resolution,d.rotation,b.size,b.pixelRatio,e.opacity,e.brightness,e.contrast,e.hue,e.saturation,b.skippedFeatureUids)}};ol.renderer.webgl.VectorLayer.prototype.forEachLayerAtPixel=function(a,b,c,d){var e=a.slice();ol.vec.Mat4.multVec2(b.pixelToCoordinateMatrix,e,e);var f=this.hasFeatureAtCoordinate(e,b);if(f){return c.call(d,this.getLayer())}else{return undefined}};ol.renderer.webgl.VectorLayer.prototype.handleStyleImageChange_=function(a){this.renderIfReadyAndVisible()};ol.renderer.webgl.VectorLayer.prototype.prepareFrame=function(a,b,c){var d=this.getLayer();goog.asserts.assertInstanceof(d,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var e=d.getSource();this.updateAttributions(a.attributions,e.getAttributions());this.updateLogos(a,e);var f=a.viewHints[ol.ViewHint.ANIMATING];var g=a.viewHints[ol.ViewHint.INTERACTING];var h=d.getUpdateWhileAnimating();var i=d.getUpdateWhileInteracting();if(!this.dirty_&&(!h&&f)||!i&&g){return true}var j=a.extent;var k=a.viewState;var l=k.projection;var m=k.resolution;var n=a.pixelRatio;var o=d.getRevision();var p=d.getRenderBuffer();var q=d.getRenderOrder();if(!goog.isDef(q)){q=ol.renderer.vector.defaultOrder}var r=ol.extent.buffer(j,p*m);if(!this.dirty_&&this.renderedResolution_==m&&this.renderedRevision_==o&&this.renderedRenderOrder_==q&&ol.extent.containsExtent(this.renderedExtent_,r)){return true}if(!goog.isNull(this.replayGroup_)){a.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(c))}this.dirty_=false;var s=new ol.render.webgl.ReplayGroup(ol.renderer.vector.getTolerance(m,n),r,d.getRenderBuffer());e.loadFeatures(r,m,l);var t=function(a){var b;if(goog.isDef(a.getStyleFunction())){b=a.getStyleFunction().call(a,m)}else if(goog.isDef(d.getStyleFunction())){b=d.getStyleFunction()(a,m)}if(goog.isDefAndNotNull(b)){var c=this.renderFeature(a,m,n,b,s);this.dirty_=this.dirty_||c}};if(!goog.isNull(q)){var u=[];e.forEachFeatureInExtentAtResolution(r,m,function(a){u.push(a)},this);goog.array.sort(u,q);goog.array.forEach(u,t,this)}else{e.forEachFeatureInExtentAtResolution(r,m,t,this)}s.finish(c);this.renderedResolution_=m;this.renderedRevision_=o;this.renderedRenderOrder_=q;this.renderedExtent_=r;this.replayGroup_=s;return true};ol.renderer.webgl.VectorLayer.prototype.renderFeature=function(a,b,c,d,e){if(!goog.isDefAndNotNull(d)){return false}var f,g,h=false;for(f=0,g=d.length;f<g;++f){h=ol.renderer.vector.renderFeature(e,a,d[f],ol.renderer.vector.getSquaredTolerance(b,c),this.handleStyleImageChange_,this)||h}return h};goog.provide("ol.renderer.webgl.Map");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.log");goog.require("goog.log.Logger");goog.require("goog.object");goog.require("goog.style");goog.require("goog.webgl");goog.require("ol");goog.require("ol.RendererType");goog.require("ol.css");goog.require("ol.dom");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.webgl.Immediate");goog.require("ol.renderer.Map");goog.require("ol.renderer.webgl.ImageLayer");goog.require("ol.renderer.webgl.Layer");goog.require("ol.renderer.webgl.TileLayer");goog.require("ol.renderer.webgl.VectorLayer");goog.require("ol.source.State");goog.require("ol.structs.LRUCache");goog.require("ol.structs.PriorityQueue");goog.require("ol.webgl");goog.require("ol.webgl.Context");goog.require("ol.webgl.WebGLContextEventType");ol.renderer.webgl.TextureCacheEntry;ol.renderer.webgl.Map=function(a,b){goog.base(this,a,b);this.canvas_=goog.dom.createElement(goog.dom.TagName.CANVAS);this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(a,this.canvas_,0);this.clipTileCanvasWidth_=0;this.clipTileCanvasHeight_=0;this.clipTileContext_=ol.dom.createCanvasContext2D();this.renderedVisible_=true;this.gl_=ol.webgl.getContext(this.canvas_,{antialias:true,depth:false,failIfMajorPerformanceCaveat:true,preserveDrawingBuffer:false,stencil:true});goog.asserts.assert(!goog.isNull(this.gl_),"got a WebGLRenderingContext");this.context_=new ol.webgl.Context(this.canvas_,this.gl_);goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.LOST,this.handleWebGLContextLost,false,this);goog.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.RESTORED,this.handleWebGLContextRestored,false,this);this.textureCache_=new ol.structs.LRUCache;this.focus_=null;this.tileTextureQueue_=new ol.structs.PriorityQueue(goog.bind(function(a){var b=a[1];var c=a[2];var d=b[0]-this.focus_[0];var e=b[1]-this.focus_[1];return 65536*Math.log(c)+Math.sqrt(d*d+e*e)/c},this),function(a){return a[0].getKey()});this.loadNextTileTexture_=goog.bind(function(a,b){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var c=this.tileTextureQueue_.dequeue();var d=c[0];var e=c[3];var f=c[4];this.bindTileTexture(d,e,f,goog.webgl.LINEAR,goog.webgl.LINEAR)}},this);this.textureCacheFrameMarkerCount_=0;this.initializeGL_()};goog.inherits(ol.renderer.webgl.Map,ol.renderer.Map);ol.renderer.webgl.Map.prototype.bindTileTexture=function(a,b,c,d,e){var f=this.getGL();var g=a.getKey();if(this.textureCache_.containsKey(g)){var h=this.textureCache_.get(g);goog.asserts.assert(!goog.isNull(h),"a texture cache entry exists for key %s",g);f.bindTexture(goog.webgl.TEXTURE_2D,h.texture);if(h.magFilter!=d){f.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,d);h.magFilter=d}if(h.minFilter!=e){f.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,e);h.minFilter=e}}else{var i=f.createTexture();f.bindTexture(goog.webgl.TEXTURE_2D,i);if(c>0){var j=this.clipTileContext_.canvas;var k=this.clipTileContext_;if(this.clipTileCanvasWidth_!==b[0]||this.clipTileCanvasHeight_!==b[1]){j.width=b[0];j.height=b[1];this.clipTileCanvasWidth_=b[0];this.clipTileCanvasHeight_=b[1]}else{k.clearRect(0,0,b[0],b[1])}k.drawImage(a.getImage(),c,c,b[0],b[1],0,0,b[0],b[1]);f.texImage2D(goog.webgl.TEXTURE_2D,0,goog.webgl.RGBA,goog.webgl.RGBA,goog.webgl.UNSIGNED_BYTE,j)}else{f.texImage2D(goog.webgl.TEXTURE_2D,0,goog.webgl.RGBA,goog.webgl.RGBA,goog.webgl.UNSIGNED_BYTE,a.getImage())}f.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,d);f.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MIN_FILTER,e);f.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_S,goog.webgl.CLAMP_TO_EDGE);f.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_T,goog.webgl.CLAMP_TO_EDGE);this.textureCache_.set(g,{texture:i,magFilter:d,minFilter:e})}};ol.renderer.webgl.Map.prototype.createLayerRenderer=function(a){if(ol.ENABLE_IMAGE&&a instanceof ol.layer.Image){return new ol.renderer.webgl.ImageLayer(this,a)}else if(ol.ENABLE_TILE&&a instanceof ol.layer.Tile){return new ol.renderer.webgl.TileLayer(this,a)}else if(ol.ENABLE_VECTOR&&a instanceof ol.layer.Vector){return new ol.renderer.webgl.VectorLayer(this,a)}else{goog.asserts.fail("unexpected layer configuration");return null}};ol.renderer.webgl.Map.prototype.dispatchComposeEvent_=function(a,b){var c=this.getMap();if(c.hasListener(a)){var d=this.context_;var e=b.extent;var f=b.size;var g=b.viewState;var h=b.pixelRatio;var i=g.resolution;var j=g.center;var k=g.rotation;var l=new ol.render.webgl.Immediate(d,j,i,k,f,e,h);var m=new ol.render.Event(a,c,l,b,null,d);c.dispatchEvent(m);l.flush()}};ol.renderer.webgl.Map.prototype.disposeInternal=function(){var a=this.getGL();if(!a.isContextLost()){this.textureCache_.forEach(function(b){if(!goog.isNull(b)){a.deleteTexture(b.texture)}})}goog.dispose(this.context_);goog.base(this,"disposeInternal")}
;ol.renderer.webgl.Map.prototype.expireCache_=function(a,b){var c=this.getGL();var d;while(this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK){d=this.textureCache_.peekLast();if(goog.isNull(d)){if(+this.textureCache_.peekLastKey()==b.index){break}else{--this.textureCacheFrameMarkerCount_}}else{c.deleteTexture(d.texture)}this.textureCache_.pop()}};ol.renderer.webgl.Map.prototype.getContext=function(){return this.context_};ol.renderer.webgl.Map.prototype.getGL=function(){return this.gl_};ol.renderer.webgl.Map.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_};ol.renderer.webgl.Map.prototype.getType=function(){return ol.RendererType.WEBGL};ol.renderer.webgl.Map.prototype.handleWebGLContextLost=function(a){a.preventDefault();this.textureCache_.clear();this.textureCacheFrameMarkerCount_=0;goog.object.forEach(this.getLayerRenderers(),function(a,b,c){goog.asserts.assertInstanceof(a,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer");a.handleWebGLContextLost()})};ol.renderer.webgl.Map.prototype.handleWebGLContextRestored=function(){this.initializeGL_();this.getMap().render()};ol.renderer.webgl.Map.prototype.initializeGL_=function(){var a=this.gl_;a.activeTexture(goog.webgl.TEXTURE0);a.blendFuncSeparate(goog.webgl.SRC_ALPHA,goog.webgl.ONE_MINUS_SRC_ALPHA,goog.webgl.ONE,goog.webgl.ONE_MINUS_SRC_ALPHA);a.disable(goog.webgl.CULL_FACE);a.disable(goog.webgl.DEPTH_TEST);a.disable(goog.webgl.SCISSOR_TEST);a.disable(goog.webgl.STENCIL_TEST)};ol.renderer.webgl.Map.prototype.isTileTextureLoaded=function(a){return this.textureCache_.containsKey(a.getKey())};ol.renderer.webgl.Map.prototype.logger_=goog.log.getLogger("ol.renderer.webgl.Map");ol.renderer.webgl.Map.prototype.renderFrame=function(a){var b=this.getContext();var c=this.getGL();if(c.isContextLost()){return false}if(goog.isNull(a)){if(this.renderedVisible_){goog.style.setElementShown(this.canvas_,false);this.renderedVisible_=false}return false}this.focus_=a.focus;this.textureCache_.set((-a.index).toString(),null);++this.textureCacheFrameMarkerCount_;this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,a);var d=[];var e=a.layerStatesArray;goog.array.stableSort(e,ol.renderer.Map.sortByZIndex);var f=a.viewState.resolution;var g,h,i,j;for(g=0,h=e.length;g<h;++g){j=e[g];if(ol.layer.Layer.visibleAtResolution(j,f)&&j.sourceState==ol.source.State.READY){i=this.getLayerRenderer(j.layer);goog.asserts.assertInstanceof(i,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer");if(i.prepareFrame(a,j,b)){d.push(j)}}}var k=a.size[0]*a.pixelRatio;var l=a.size[1]*a.pixelRatio;if(this.canvas_.width!=k||this.canvas_.height!=l){this.canvas_.width=k;this.canvas_.height=l}c.bindFramebuffer(goog.webgl.FRAMEBUFFER,null);c.clearColor(0,0,0,0);c.clear(goog.webgl.COLOR_BUFFER_BIT);c.enable(goog.webgl.BLEND);c.viewport(0,0,this.canvas_.width,this.canvas_.height);for(g=0,h=d.length;g<h;++g){j=d[g];i=this.getLayerRenderer(j.layer);goog.asserts.assertInstanceof(i,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer");i.composeFrame(a,j,b)}if(!this.renderedVisible_){goog.style.setElementShown(this.canvas_,true);this.renderedVisible_=true}this.calculateMatrices2D(a);if(this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK){a.postRenderFunctions.push(goog.bind(this.expireCache_,this))}if(!this.tileTextureQueue_.isEmpty()){a.postRenderFunctions.push(this.loadNextTileTexture_);a.animate=true}this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,a);this.scheduleRemoveUnusedLayerRenderers(a);this.scheduleExpireIconCache(a)};ol.renderer.webgl.Map.prototype.forEachFeatureAtCoordinate=function(a,b,c,d,e,f){var g;if(this.getGL().isContextLost()){return false}var h=b.viewState;var i=b.layerStatesArray;var j=i.length;var k;for(k=j-1;k>=0;--k){var l=i[k];var m=l.layer;if(ol.layer.Layer.visibleAtResolution(l,h.resolution)&&e.call(f,m)){var n=this.getLayerRenderer(m);g=n.forEachFeatureAtCoordinate(a,b,c,d);if(g){return g}}}return undefined};ol.renderer.webgl.Map.prototype.hasFeatureAtCoordinate=function(a,b,c,d){var e=false;if(this.getGL().isContextLost()){return false}var f=b.viewState;var g=b.layerStatesArray;var h=g.length;var i;for(i=h-1;i>=0;--i){var j=g[i];var k=j.layer;if(ol.layer.Layer.visibleAtResolution(j,f.resolution)&&c.call(d,k)){var l=this.getLayerRenderer(k);e=l.hasFeatureAtCoordinate(a,b);if(e){return true}}}return e};ol.renderer.webgl.Map.prototype.forEachLayerAtPixel=function(a,b,c,d,e,f){if(this.getGL().isContextLost()){return false}var g=b.viewState;var h;var i=b.layerStatesArray;var j=i.length;var k;for(k=j-1;k>=0;--k){var l=i[k];var m=l.layer;if(ol.layer.Layer.visibleAtResolution(l,g.resolution)&&e.call(d,m)){var n=this.getLayerRenderer(m);h=n.forEachLayerAtPixel(a,b,c,d);if(h){return h}}}return undefined};goog.provide("ol.Map");goog.provide("ol.MapProperty");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.async.AnimationDelay");goog.require("goog.async.nextTick");goog.require("goog.debug.Console");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.ViewportSizeMonitor");goog.require("goog.dom.classlist");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.events.KeyHandler");goog.require("goog.events.KeyHandler.EventType");goog.require("goog.events.MouseWheelHandler");goog.require("goog.events.MouseWheelHandler.EventType");goog.require("goog.functions");goog.require("goog.log");goog.require("goog.log.Level");goog.require("goog.object");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol.Collection");goog.require("ol.CollectionEventType");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserEventHandler");goog.require("ol.MapEvent");goog.require("ol.MapEventType");goog.require("ol.Object");goog.require("ol.ObjectEvent");goog.require("ol.ObjectEventType");goog.require("ol.Pixel");goog.require("ol.PostRenderFunction");goog.require("ol.PreRenderFunction");goog.require("ol.RendererType");goog.require("ol.Size");goog.require("ol.TileQueue");goog.require("ol.View");goog.require("ol.ViewHint");goog.require("ol.control");goog.require("ol.extent");goog.require("ol.has");goog.require("ol.interaction");goog.require("ol.layer.Base");goog.require("ol.layer.Group");goog.require("ol.proj");goog.require("ol.proj.common");goog.require("ol.renderer.Map");goog.require("ol.renderer.canvas.Map");goog.require("ol.renderer.dom.Map");goog.require("ol.renderer.webgl.Map");goog.require("ol.size");goog.require("ol.structs.PriorityQueue");goog.require("ol.tilecoord");goog.require("ol.vec.Mat4");ol.OL3_URL="http://openlayers.org/";ol.OL3_LOGO_URL="data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBI"+"WXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAA"+"AhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszW"+"WMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvY"+"asvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvX"+"H1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1Vk"+"bMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW"+"2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLP"+"VcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqT"+"acrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaar"+"ldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+Hi"+"zeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDn"+"BAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSF"+"hYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJ"+"REFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxC"+"Brb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe"+"0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8"+"a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7a"+"hgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCn"+"B3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDg"+"q82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC";ol.DEFAULT_RENDERER_TYPES=[ol.RendererType.CANVAS,ol.RendererType.WEBGL,ol.RendererType.DOM];ol.MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};ol.Map=function(a){goog.base(this);var b=ol.Map.createOptionsInternal(a);this.loadTilesWhileAnimating_=goog.isDef(a.loadTilesWhileAnimating)?a.loadTilesWhileAnimating:false;this.loadTilesWhileInteracting_=goog.isDef(a.loadTilesWhileInteracting)?a.loadTilesWhileInteracting:false;this.pixelRatio_=goog.isDef(a.pixelRatio)?a.pixelRatio:ol.has.DEVICE_PIXEL_RATIO;this.logos_=b.logos;this.animationDelay_=new goog.async.AnimationDelay(this.renderFrame_,undefined,this);this.registerDisposable(this.animationDelay_);this.coordinateToPixelMatrix_=goog.vec.Mat4.createNumber();this.pixelToCoordinateMatrix_=goog.vec.Mat4.createNumber();this.frameIndex_=0;this.frameState_=null;this.previousExtent_=ol.extent.createEmpty();this.viewPropertyListenerKey_=null;this.layerGroupPropertyListenerKeys_=null;this.viewport_=goog.dom.createDom(goog.dom.TagName.DIV,"ol-viewport");this.viewport_.style.position="relative";this.viewport_.style.overflow="hidden";this.viewport_.style.width="100%";this.viewport_.style.height="100%";this.viewport_.style.msTouchAction="none";if(ol.has.TOUCH){goog.dom.classlist.add(this.viewport_,"ol-touch")}this.overlayContainer_=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overlaycontainer");goog.dom.appendChild(this.viewport_,this.overlayContainer_);this.overlayContainerStopEvent_=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overlaycontainer-stopevent");goog.events.listen(this.overlayContainerStopEvent_,[goog.events.EventType.CLICK,goog.events.EventType.DBLCLICK,goog.events.EventType.MOUSEDOWN,goog.events.EventType.TOUCHSTART,goog.events.EventType.MSPOINTERDOWN,ol.MapBrowserEvent.EventType.POINTERDOWN,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel"],goog.events.Event.stopPropagation);goog.dom.appendChild(this.viewport_,this.overlayContainerStopEvent_);var c=new ol.MapBrowserEventHandler(this);goog.events.listen(c,goog.object.getValues(ol.MapBrowserEvent.EventType),this.handleMapBrowserEvent,false,this);this.registerDisposable(c);this.keyboardEventTarget_=b.keyboardEventTarget;this.keyHandler_=new goog.events.KeyHandler;goog.events.listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleBrowserEvent,false,this);this.registerDisposable(this.keyHandler_);var d=new goog.events.MouseWheelHandler(this.viewport_);goog.events.listen(d,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleBrowserEvent,false,this);this.registerDisposable(d);this.controls_=b.controls;this.interactions_=b.interactions;this.overlays_=b.overlays;this.renderer_=new b.rendererConstructor(this.viewport_,this);this.registerDisposable(this.renderer_);this.viewportSizeMonitor_=new goog.dom.ViewportSizeMonitor;this.registerDisposable(this.viewportSizeMonitor_);this.viewportResizeListenerKey_=null;this.focus_=null;this.preRenderFunctions_=[];this.postRenderFunctions_=[];this.tileQueue_=new ol.TileQueue(goog.bind(this.getTilePriority,this),goog.bind(this.handleTileChange_,this));this.skippedFeatureUids_={};goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.LAYERGROUP),this.handleLayerGroupChanged_,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.VIEW),this.handleViewChanged_,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.SIZE),this.handleSizeChanged_,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.TARGET),this.handleTargetChanged_,false,this);this.setProperties(b.values);this.controls_.forEach(function(a){a.setMap(this)},this);goog.events.listen(this.controls_,ol.CollectionEventType.ADD,function(a){a.element.setMap(this)},false,this);goog.events.listen(this.controls_,ol.CollectionEventType.REMOVE,function(a){a.element.setMap(null)},false,this);this.interactions_.forEach(function(a){a.setMap(this)},this);goog.events.listen(this.interactions_,ol.CollectionEventType.ADD,function(a){a.element.setMap(this)},false,this);goog.events.listen(this.interactions_,ol.CollectionEventType.REMOVE,function(a){a.element.setMap(null)},false,this);this.overlays_.forEach(function(a){a.setMap(this)},this);goog.events.listen(this.overlays_,ol.CollectionEventType.ADD,function(a){a.element.setMap(this)},false,this);goog.events.listen(this.overlays_,ol.CollectionEventType.REMOVE,function(a){a.element.setMap(null)},false,this)};goog.inherits(ol.Map,ol.Object);ol.Map.prototype.addControl=function(a){var b=this.getControls();goog.asserts.assert(goog.isDef(b),"controls should be defined");b.push(a)};ol.Map.prototype.addInteraction=function(a){var b=this.getInteractions();goog.asserts.assert(goog.isDef(b),"interactions should be defined");b.push(a)};ol.Map.prototype.addLayer=function(a){var b=this.getLayerGroup().getLayers();b.push(a)};ol.Map.prototype.addOverlay=function(a){var b=this.getOverlays();goog.asserts.assert(goog.isDef(b),"overlays should be defined");b.push(a)};ol.Map.prototype.beforeRender=function(a){this.render();Array.prototype.push.apply(this.preRenderFunctions_,arguments)};ol.Map.prototype.removePreRenderFunction=function(a){return goog.array.remove(this.preRenderFunctions_,a)};ol.Map.prototype.disposeInternal=function(){goog.dom.removeNode(this.viewport_);goog.base(this,"disposeInternal")};ol.Map.prototype.forEachFeatureAtPixel=function(a,b,c,d,e){if(goog.isNull(this.frameState_)){return}var f=this.getCoordinateFromPixel(a);var g=goog.isDef(c)?c:null;var h=goog.isDef(d)?d:goog.functions.TRUE;var i=goog.isDef(e)?e:null;return this.renderer_.forEachFeatureAtCoordinate(f,this.frameState_,b,g,h,i)};ol.Map.prototype.forEachLayerAtPixel=function(a,b,c,d,e){if(goog.isNull(this.frameState_)){return}var f=goog.isDef(c)?c:null;var g=goog.isDef(d)?d:goog.functions.TRUE;var h=goog.isDef(e)?e:null;return this.renderer_.forEachLayerAtPixel(a,this.frameState_,b,f,g,h)};ol.Map.prototype.hasFeatureAtPixel=function(a,b,c){if(goog.isNull(this.frameState_)){return false}var d=this.getCoordinateFromPixel(a);var e=goog.isDef(b)?b:goog.functions.TRUE;var f=goog.isDef(c)?c:null;return this.renderer_.hasFeatureAtCoordinate(d,this.frameState_,e,f)};ol.Map.prototype.getEventCoordinate=function(a){return this.getCoordinateFromPixel(this.getEventPixel(a))};ol.Map.prototype.getEventPixel=function(a){var b=goog.style.getRelativePosition(a,this.viewport_);return[b.x,b.y]};ol.Map.prototype.getTarget=function(){return this.get(ol.MapProperty.TARGET)};ol.Map.prototype.getTargetElement=function(){var a=this.getTarget();return goog.isDef(a)?goog.dom.getElement(a):null};ol.Map.prototype.getCoordinateFromPixel=function(a){var b=this.frameState_;if(goog.isNull(b)){return null}else{var c=a.slice();return ol.vec.Mat4.multVec2(b.pixelToCoordinateMatrix,c,c)}};ol.Map.prototype.getControls=function(){return this.controls_};ol.Map.prototype.getOverlays=function(){return this.overlays_};ol.Map.prototype.getInteractions=function(){return this.interactions_};ol.Map.prototype.getLayerGroup=function(){return this.get(ol.MapProperty.LAYERGROUP)};ol.Map.prototype.getLayers=function(){var a=this.getLayerGroup().getLayers();return a};ol.Map.prototype.getPixelFromCoordinate=function(a){var b=this.frameState_;if(goog.isNull(b)){return null}else{var c=a.slice(0,2);return ol.vec.Mat4.multVec2(b.coordinateToPixelMatrix,c,c)}};ol.Map.prototype.getRenderer=function(){return this.renderer_};ol.Map.prototype.getSize=function(){return this.get(ol.MapProperty.SIZE)};ol.Map.prototype.getView=function(){return this.get(ol.MapProperty.VIEW)};ol.Map.prototype.getViewport=function(){return this.viewport_};ol.Map.prototype.getOverlayContainer=function(){return this.overlayContainer_};ol.Map.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_};ol.Map.prototype.getTilePriority=function(a,b,c,d){var e=this.frameState_;if(goog.isNull(e)||!(b in e.wantedTiles)){return ol.structs.PriorityQueue.DROP}var f=ol.tilecoord.toString(a.tileCoord);if(!e.wantedTiles[b][f]){return ol.structs.PriorityQueue.DROP}var g=c[0]-e.focus[0];var h=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(g*g+h*h)/d};ol.Map.prototype.handleBrowserEvent=function(a,b){var c=b||a.type;var d=new ol.MapBrowserEvent(c,this,a);this.handleMapBrowserEvent(d)};ol.Map.prototype.handleMapBrowserEvent=function(a){if(goog.isNull(this.frameState_)){return}this.focus_=a.coordinate;a.frameState=this.frameState_;var b=this.getInteractions();goog.asserts.assert(goog.isDef(b),"interactions should be defined");var c=b.getArray();var d;if(this.dispatchEvent(a)!==false){for(d=c.length-1;d>=0;d--){var e=c[d];if(!e.getActive()){continue}var f=e.handleEvent(a);if(!f){break}}}};ol.Map.prototype.handlePostRender=function(){var a=this.frameState_;var b=this.tileQueue_;if(!b.isEmpty()){var c=16;var d=c;var e=0;if(!goog.isNull(a)){var f=a.viewHints;if(f[ol.ViewHint.ANIMATING]){c=this.loadTilesWhileAnimating_?8:0;d=2}if(f[ol.ViewHint.INTERACTING]){c=this.loadTilesWhileInteracting_?8:0;d=2}e=goog.object.getCount(a.wantedTiles)}c*=e;d*=e;if(b.getTilesLoading()<c){b.reprioritize();b.loadMoreTiles(c,d)}}var g=this.postRenderFunctions_;var h,i;for(h=0,i=g.length;h<i;++h){g[h](this,a)}g.length=0};ol.Map.prototype.handleSizeChanged_=function(){this.render()};ol.Map.prototype.handleTargetChanged_=function(){var a=this.getTargetElement();this.keyHandler_.detach();if(goog.isNull(a)){goog.dom.removeNode(this.viewport_);if(!goog.isNull(this.viewportResizeListenerKey_)){goog.events.unlistenByKey(this.viewportResizeListenerKey_);this.viewportResizeListenerKey_=null}}else{goog.dom.appendChild(a,this.viewport_);var b=goog.isNull(this.keyboardEventTarget_)?a:this.keyboardEventTarget_;this.keyHandler_.attach(b);if(goog.isNull(this.viewportResizeListenerKey_)){this.viewportResizeListenerKey_=goog.events.listen(this.viewportSizeMonitor_,goog.events.EventType.RESIZE,this.updateSize,false,this)}}this.updateSize()};ol.Map.prototype.handleTileChange_=function(){this.render()};ol.Map.prototype.handleViewPropertyChanged_=function(){this.render()};ol.Map.prototype.handleViewChanged_=function(){if(!goog.isNull(this.viewPropertyListenerKey_)){goog.events.unlistenByKey(this.viewPropertyListenerKey_);this.viewPropertyListenerKey_=null}var a=this.getView();if(!goog.isNull(a)){this.viewPropertyListenerKey_=goog.events.listen(a,ol.ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,false,this)}this.render()};ol.Map.prototype.handleLayerGroupMemberChanged_=function(a){goog.asserts.assertInstanceof(a,goog.events.Event,"event should be an Event");this.render()};ol.Map.prototype.handleLayerGroupPropertyChanged_=function(a){goog.asserts.assertInstanceof(a,ol.ObjectEvent,"event should be an ol.ObjectEvent");this.render()};ol.Map.prototype.handleLayerGroupChanged_=function(){if(!goog.isNull(this.layerGroupPropertyListenerKeys_)){var a=this.layerGroupPropertyListenerKeys_.length;for(var b=0;b<a;++b){goog.events.unlistenByKey(this.layerGroupPropertyListenerKeys_[b])}this.layerGroupPropertyListenerKeys_=null}var c=this.getLayerGroup();if(goog.isDefAndNotNull(c)){this.layerGroupPropertyListenerKeys_=[goog.events.listen(c,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerGroupPropertyChanged_,false,this),goog.events.listen(c,goog.events.EventType.CHANGE,this.handleLayerGroupMemberChanged_,false,this)]}this.render()};ol.Map.prototype.isDef=function(){if(!goog.dom.contains(document,this.viewport_)){return false}if(!goog.style.isElementShown(this.viewport_)){return false}var a=this.getSize();if(!goog.isDefAndNotNull(a)||a[0]<=0||a[1]<=0){return false}var b=this.getView();if(goog.isNull(b)||!b.isDef()){return false}return true};ol.Map.prototype.isRendered=function(){return!goog.isNull(this.frameState_)};ol.Map.prototype.renderSync=function(){this.animationDelay_.fire()};ol.Map.prototype.render=function(){if(!this.animationDelay_.isActive()){this.animationDelay_.start()}};ol.Map.prototype.removeControl=function(a){var b=this.getControls();goog.asserts.assert(goog.isDef(b),"controls should be defined");if(goog.isDef(b.remove(a))){return a}return undefined};ol.Map.prototype.removeInteraction=function(a){var b;var c=this.getInteractions();goog.asserts.assert(goog.isDef(c),"interactions should be defined");if(goog.isDef(c.remove(a))){b=a}return b};ol.Map.prototype.removeLayer=function(a){var b=this.getLayerGroup().getLayers();return b.remove(a)};ol.Map.prototype.removeOverlay=function(a){var b=this.getOverlays();goog.asserts.assert(goog.isDef(b),"overlays should be defined");if(goog.isDef(b.remove(a))){return a}return undefined};ol.Map.prototype.renderFrame_=function(a){var b,c,d;var e=this.getSize();var f=this.getView();var g=null;if(goog.isDef(e)&&ol.size.hasArea(e)&&!goog.isNull(f)&&f.isDef()){var h=f.getHints();var i=this.getLayerGroup().getLayerStatesArray();var j={};for(b=0,c=i.length;b<c;++b){j[goog.getUid(i[b].layer)]=i[b]}d=f.getState();g={animate:false,attributions:{},coordinateToPixelMatrix:this.coordinateToPixelMatrix_,extent:null,focus:goog.isNull(this.focus_)?d.center:this.focus_,index:this.frameIndex_++,layerStates:j,layerStatesArray:i,logos:goog.object.clone(this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateMatrix:this.pixelToCoordinateMatrix_,postRenderFunctions:[],size:e,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:a,usedTiles:{},viewState:d,viewHints:h,wantedTiles:{}}}if(!goog.isNull(g)){var k=this.preRenderFunctions_;var l=0,m;for(b=0,c=k.length;b<c;++b){m=k[b];if(m(this,g)){k[l++]=m}}k.length=l;g.extent=ol.extent.getForViewAndSize(d.center,d.resolution,d.rotation,g.size)}this.frameState_=g;this.renderer_.renderFrame(g);if(!goog.isNull(g)){if(g.animate){this.render()}Array.prototype.push.apply(this.postRenderFunctions_,g.postRenderFunctions);var n=this.preRenderFunctions_.length===0&&!g.viewHints[ol.ViewHint.ANIMATING]&&!g.viewHints[ol.ViewHint.INTERACTING]&&!ol.extent.equals(g.extent,this.previousExtent_);if(n){this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVEEND,this,g));ol.extent.clone(g.extent,this.previousExtent_)}}this.dispatchEvent(new ol.MapEvent(ol.MapEventType.POSTRENDER,this,g));goog.async.nextTick(this.handlePostRender,this)};ol.Map.prototype.setLayerGroup=function(a){this.set(ol.MapProperty.LAYERGROUP,a)};ol.Map.prototype.setSize=function(a){this.set(ol.MapProperty.SIZE,a)};ol.Map.prototype.setTarget=function(a){this.set(ol.MapProperty.TARGET,a)};ol.Map.prototype.setView=function(a){this.set(ol.MapProperty.VIEW,a)};ol.Map.prototype.skipFeature=function(a){var b=goog.getUid(a).toString();this.skippedFeatureUids_[b]=true;this.render()};ol.Map.prototype.updateSize=function(){var a=this.getTargetElement();if(goog.isNull(a)){this.setSize(undefined)}else{var b=goog.style.getContentBoxSize(a);this.setSize([b.width,b.height])}};ol.Map.prototype.unskipFeature=function(a){var b=goog.getUid(a).toString();delete this.skippedFeatureUids_[b];this.render()};ol.MapOptionsInternal;ol.Map.createOptionsInternal=function(a){var b=null;if(goog.isDef(a.keyboardEventTarget)){b=goog.isString(a.keyboardEventTarget)?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget}var c={};var d={};if(!goog.isDef(a.logo)||goog.isBoolean(a.logo)&&a.logo){d[ol.OL3_LOGO_URL]=ol.OL3_URL}else{var e=a.logo;if(goog.isString(e)){d[e]=""}else if(goog.isObject(e)){goog.asserts.assertString(e.href,"logo.href should be a string");goog.asserts.assertString(e.src,"logo.src should be a string");d[e.src]=e.href}}var f=a.layers instanceof ol.layer.Group?a.layers:new ol.layer.Group({layers:a.layers});c[ol.MapProperty.LAYERGROUP]=f;c[ol.MapProperty.TARGET]=a.target;c[ol.MapProperty.VIEW]=goog.isDef(a.view)?a.view:new ol.View;var g=ol.renderer.Map;var h;if(goog.isDef(a.renderer)){if(goog.isArray(a.renderer)){h=a.renderer}else if(goog.isString(a.renderer)){h=[a.renderer]}else{goog.asserts.fail("Incorrect format for renderer option")}}else{h=ol.DEFAULT_RENDERER_TYPES}var i,j;for(i=0,j=h.length;i<j;++i){var k=h[i];if(ol.ENABLE_CANVAS&&k==ol.RendererType.CANVAS){if(ol.has.CANVAS){g=ol.renderer.canvas.Map;break}}else if(ol.ENABLE_DOM&&k==ol.RendererType.DOM){if(ol.has.DOM){g=ol.renderer.dom.Map;break}}else if(ol.ENABLE_WEBGL&&k==ol.RendererType.WEBGL){if(ol.has.WEBGL){g=ol.renderer.webgl.Map;break}}}var l;if(goog.isDef(a.controls)){if(goog.isArray(a.controls)){l=new ol.Collection(a.controls.slice())}else{goog.asserts.assertInstanceof(a.controls,ol.Collection,"options.controls should be an ol.Collection");l=a.controls}}else{l=ol.control.defaults()}var m;if(goog.isDef(a.interactions)){if(goog.isArray(a.interactions)){m=new ol.Collection(a.interactions.slice())}else{goog.asserts.assertInstanceof(a.interactions,ol.Collection,"options.interactions should be an ol.Collection");m=a.interactions}}else{m=ol.interaction.defaults()}var n;if(goog.isDef(a.overlays)){if(goog.isArray(a.overlays)){n=new ol.Collection(a.overlays.slice())}else{goog.asserts.assertInstanceof(a.overlays,ol.Collection,"options.overlays should be an ol.Collection");n=a.overlays}}else{n=new ol.Collection}return{controls:l,interactions:m,keyboardEventTarget:b,logos:d,overlays:n,rendererConstructor:g,values:c}};ol.proj.common.add();if(goog.DEBUG){(function(){goog.debug.Console.autoInstall();var a=goog.log.getLogger("ol");a.setLevel(goog.log.Level.FINEST)})()}goog.provide("ol.Overlay");goog.provide("ol.OverlayPositioning");goog.provide("ol.OverlayProperty");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.style");goog.require("ol.Coordinate");goog.require("ol.Map");goog.require("ol.MapEventType");goog.require("ol.Object");goog.require("ol.animation");goog.require("ol.dom");goog.require("ol.extent");ol.OverlayProperty={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};ol.OverlayPositioning={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};ol.Overlay=function(a){goog.base(this);this.insertFirst_=goog.isDef(a.insertFirst)?a.insertFirst:true;this.stopEvent_=goog.isDef(a.stopEvent)?a.stopEvent:true;this.element_=goog.dom.createDom(goog.dom.TagName.DIV,{class:"ol-overlay-container"});this.element_.style.position="absolute";this.autoPan=goog.isDef(a.autoPan)?a.autoPan:false;this.autoPanAnimation_=goog.isDef(a.autoPanAnimation)?a.autoPanAnimation:{};this.autoPanMargin_=goog.isDef(a.autoPanMargin)?a.autoPanMargin:20;this.rendered_={bottom_:"",left_:"",right_:"",top_:"",visible:true};this.mapPostrenderListenerKey_=null;goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.ELEMENT),this.handleElementChanged,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.MAP),this.handleMapChanged,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.OFFSET),this.handleOffsetChanged,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.POSITION),this.handlePositionChanged,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.POSITIONING),this.handlePositioningChanged,false,this);if(goog.isDef(a.element)){this.setElement(a.element)}this.setOffset(goog.isDef(a.offset)?a.offset:[0,0]);this.setPositioning(goog.isDef(a.positioning)?a.positioning:ol.OverlayPositioning.TOP_LEFT);if(goog.isDef(a.position)){this.setPosition(a.position)}};goog.inherits(ol.Overlay,ol.Object);ol.Overlay.prototype.getElement=function(){return this.get(ol.OverlayProperty.ELEMENT)};ol.Overlay.prototype.getMap=function(){return this.get(ol.OverlayProperty.MAP)};ol.Overlay.prototype.getOffset=function(){return this.get(ol.OverlayProperty.OFFSET)};ol.Overlay.prototype.getPosition=function(){return this.get(ol.OverlayProperty.POSITION)};ol.Overlay.prototype.getPositioning=function(){return this.get(ol.OverlayProperty.POSITIONING)};ol.Overlay.prototype.handleElementChanged=function(){goog.dom.removeChildren(this.element_);var a=this.getElement();if(goog.isDefAndNotNull(a)){goog.dom.append(this.element_,a)}};ol.Overlay.prototype.handleMapChanged=function(){if(!goog.isNull(this.mapPostrenderListenerKey_)){goog.dom.removeNode(this.element_);goog.events.unlistenByKey(this.mapPostrenderListenerKey_);this.mapPostrenderListenerKey_=null}var a=this.getMap();if(goog.isDefAndNotNull(a)){this.mapPostrenderListenerKey_=goog.events.listen(a,ol.MapEventType.POSTRENDER,this.render,false,this);this.updatePixelPosition();var b=this.stopEvent_?a.getOverlayContainerStopEvent():a.getOverlayContainer();if(this.insertFirst_){goog.dom.insertChildAt(b,this.element_,0)}else{goog.dom.append(b,this.element_)}}};ol.Overlay.prototype.render=function(){this.updatePixelPosition()};ol.Overlay.prototype.handleOffsetChanged=function(){this.updatePixelPosition()};ol.Overlay.prototype.handlePositionChanged=function(){this.updatePixelPosition();if(goog.isDef(this.get(ol.OverlayProperty.POSITION))&&this.autoPan){this.panIntoView_()}};ol.Overlay.prototype.handlePositioningChanged=function(){this.updatePixelPosition()};ol.Overlay.prototype.setElement=function(a){this.set(ol.OverlayProperty.ELEMENT,a)};ol.Overlay.prototype.setMap=function(a){this.set(ol.OverlayProperty.MAP,a)};ol.Overlay.prototype.setOffset=function(a){this.set(ol.OverlayProperty.OFFSET,a)};ol.Overlay.prototype.setPosition=function(a){this.set(ol.OverlayProperty.POSITION,a)};ol.Overlay.prototype.panIntoView_=function(){goog.asserts.assert(this.autoPan,"this.autoPan should be true");var a=this.getMap();if(!goog.isDef(a)||goog.isNull(a.getTargetElement())){return}var b=this.getRect_(a.getTargetElement(),a.getSize());var c=this.getElement();goog.asserts.assert(goog.isDefAndNotNull(c),"element should be defined");var d=this.getRect_(c,[ol.dom.outerWidth(c),ol.dom.outerHeight(c)]);var e=this.autoPanMargin_;if(!ol.extent.containsExtent(b,d)){var f=d[0]-b[0];var g=b[2]-d[2];var h=d[1]-b[1];var i=b[3]-d[3];var j=[0,0];if(f<0){j[0]=f-e}else if(g<0){j[0]=Math.abs(g)+e}if(h<0){j[1]=h-e}else if(i<0){j[1]=Math.abs(i)+e}if(j[0]!==0||j[1]!==0){var k=a.getView().getCenter();goog.asserts.assert(goog.isDef(k),"center should be defined");var l=a.getPixelFromCoordinate(k);var m=[l[0]+j[0],l[1]+j[1]];if(!goog.isNull(this.autoPanAnimation_)){this.autoPanAnimation_.source=k;a.beforeRender(ol.animation.pan(this.autoPanAnimation_))}a.getView().setCenter(a.getCoordinateFromPixel(m))}}};ol.Overlay.prototype.getRect_=function(a,b){goog.asserts.assert(goog.isDefAndNotNull(a),"element should be defined");goog.asserts.assert(goog.isDef(b),"size should be defined");var c=goog.style.getPageOffset(a);return[c.x,c.y,c.x+b[0],c.y+b[1]]};ol.Overlay.prototype.setPositioning=function(a){this.set(ol.OverlayProperty.POSITIONING,a)};ol.Overlay.prototype.setVisible=function(a){if(this.rendered_.visible!==a){goog.style.setElementShown(this.element_,a);this.rendered_.visible=a}};ol.Overlay.prototype.updatePixelPosition=function(){var a=this.getMap();var b=this.getPosition();if(!goog.isDef(a)||!a.isRendered()||!goog.isDef(b)){this.setVisible(false);return}var c=a.getPixelFromCoordinate(b);var d=a.getSize();this.updateRenderedPosition(c,d)};ol.Overlay.prototype.updateRenderedPosition=function(a,b){goog.asserts.assert(!goog.isNull(a),"pixel should not be null");goog.asserts.assert(goog.isDef(b),"mapSize should be defined");var c=this.element_.style;var d=this.getOffset()
;goog.asserts.assert(goog.isArray(d),"offset should be an array");var e=this.getPositioning();goog.asserts.assert(goog.isDef(e),"positioning should be defined");var f=d[0];var g=d[1];if(e==ol.OverlayPositioning.BOTTOM_RIGHT||e==ol.OverlayPositioning.CENTER_RIGHT||e==ol.OverlayPositioning.TOP_RIGHT){if(this.rendered_.left_!==""){this.rendered_.left_=c.left=""}var h=Math.round(b[0]-a[0]-f)+"px";if(this.rendered_.right_!=h){this.rendered_.right_=c.right=h}}else{if(this.rendered_.right_!==""){this.rendered_.right_=c.right=""}if(e==ol.OverlayPositioning.BOTTOM_CENTER||e==ol.OverlayPositioning.CENTER_CENTER||e==ol.OverlayPositioning.TOP_CENTER){f-=goog.style.getSize(this.element_).width/2}var i=Math.round(a[0]+f)+"px";if(this.rendered_.left_!=i){this.rendered_.left_=c.left=i}}if(e==ol.OverlayPositioning.BOTTOM_LEFT||e==ol.OverlayPositioning.BOTTOM_CENTER||e==ol.OverlayPositioning.BOTTOM_RIGHT){if(this.rendered_.top_!==""){this.rendered_.top_=c.top=""}var j=Math.round(b[1]-a[1]-g)+"px";if(this.rendered_.bottom_!=j){this.rendered_.bottom_=c.bottom=j}}else{if(this.rendered_.bottom_!==""){this.rendered_.bottom_=c.bottom=""}if(e==ol.OverlayPositioning.CENTER_LEFT||e==ol.OverlayPositioning.CENTER_CENTER||e==ol.OverlayPositioning.CENTER_RIGHT){g-=goog.style.getSize(this.element_).height/2}var k=Math.round(a[1]+g)+"px";if(this.rendered_.top_!=k){this.rendered_.top_=c.top=k}}this.setVisible(true)};goog.provide("ol.control.OverviewMap");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.math.Size");goog.require("goog.style");goog.require("ol.Collection");goog.require("ol.Map");goog.require("ol.MapEventType");goog.require("ol.Object");goog.require("ol.ObjectEventType");goog.require("ol.Overlay");goog.require("ol.OverlayPositioning");goog.require("ol.View");goog.require("ol.ViewProperty");goog.require("ol.control.Control");goog.require("ol.coordinate");goog.require("ol.css");goog.require("ol.extent");ol.control.OverviewMap=function(a){var b=goog.isDef(a)?a:{};this.collapsed_=goog.isDef(b.collapsed)?b.collapsed:true;this.collapsible_=goog.isDef(b.collapsible)?b.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var c=goog.isDef(b.className)?b.className:"ol-overviewmap";var d=goog.isDef(b.tipLabel)?b.tipLabel:"Overview map";var e=goog.isDef(b.collapseLabel)?b.collapseLabel:"«";this.collapseLabel_=goog.isString(e)?goog.dom.createDom(goog.dom.TagName.SPAN,{},e):e;var f=goog.isDef(b.label)?b.label:"»";this.label_=goog.isString(f)?goog.dom.createDom(goog.dom.TagName.SPAN,{},f):f;var g=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;var h=goog.dom.createDom(goog.dom.TagName.BUTTON,{type:"button",title:d},g);goog.events.listen(h,goog.events.EventType.CLICK,this.handleClick_,false,this);var i=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overviewmap-map");this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:i});var j=this.ovmap_;if(goog.isDef(b.layers)){b.layers.forEach(function(a){j.addLayer(a)},this)}var k=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overviewmap-box");this.boxOverlay_=new ol.Overlay({position:[0,0],positioning:ol.OverlayPositioning.BOTTOM_LEFT,element:k});this.ovmap_.addOverlay(this.boxOverlay_);var l=c+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible");var m=goog.dom.createDom(goog.dom.TagName.DIV,l,i,h);var n=goog.isDef(b.render)?b.render:ol.control.OverviewMap.render;goog.base(this,{element:m,render:n,target:b.target})};goog.inherits(ol.control.OverviewMap,ol.control.Control);ol.control.OverviewMap.prototype.setMap=function(a){var b=this.getMap();if(a===b){return}if(b){var c=b.getView();if(c){this.unbindView_(c)}}goog.base(this,"setMap",a);if(a){this.listenerKeys.push(goog.events.listen(a,ol.ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,false,this));if(this.ovmap_.getLayers().getLength()===0){this.ovmap_.setLayerGroup(a.getLayerGroup())}var d=a.getView();if(d){this.bindView_(d);if(d.isDef()){this.ovmap_.updateSize();this.resetExtent_()}}}};ol.control.OverviewMap.prototype.handleMapPropertyChange_=function(a){if(a.key===ol.MapProperty.VIEW){var b=a.oldValue;if(b){this.unbindView_(b)}var c=this.getMap().getView();this.bindView_(c)}};ol.control.OverviewMap.prototype.bindView_=function(a){goog.events.listen(a,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,false,this)};ol.control.OverviewMap.prototype.unbindView_=function(a){goog.events.unlisten(a,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,false,this)};ol.control.OverviewMap.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())};ol.control.OverviewMap.render=function(a){this.validateExtent_();this.updateBox_()};ol.control.OverviewMap.prototype.validateExtent_=function(){var a=this.getMap();var b=this.ovmap_;if(!a.isRendered()||!b.isRendered()){return}var c=a.getSize();goog.asserts.assertArray(c,"mapSize should be an array");var d=a.getView();goog.asserts.assert(goog.isDef(d),"view should be defined");var e=d.calculateExtent(c);var f=b.getSize();goog.asserts.assertArray(f,"ovmapSize should be an array");var g=b.getView();goog.asserts.assert(goog.isDef(g),"ovview should be defined");var h=g.calculateExtent(f);var i=b.getPixelFromCoordinate(ol.extent.getTopLeft(e));var j=b.getPixelFromCoordinate(ol.extent.getBottomRight(e));var k=new goog.math.Size(Math.abs(i[0]-j[0]),Math.abs(i[1]-j[1]));var l=f[0];var m=f[1];if(k.width<l*ol.OVERVIEWMAP_MIN_RATIO||k.height<m*ol.OVERVIEWMAP_MIN_RATIO||k.width>l*ol.OVERVIEWMAP_MAX_RATIO||k.height>m*ol.OVERVIEWMAP_MAX_RATIO){this.resetExtent_()}else if(!ol.extent.containsExtent(h,e)){this.recenter_()}};ol.control.OverviewMap.prototype.resetExtent_=function(){if(ol.OVERVIEWMAP_MAX_RATIO===0||ol.OVERVIEWMAP_MIN_RATIO===0){return}var a=this.getMap();var b=this.ovmap_;var c=a.getSize();goog.asserts.assertArray(c,"mapSize should be an array");var d=a.getView();goog.asserts.assert(goog.isDef(d),"view should be defined");var e=d.calculateExtent(c);var f=b.getSize();goog.asserts.assertArray(f,"ovmapSize should be an array");var g=b.getView();goog.asserts.assert(goog.isDef(g),"ovview should be defined");var h=Math.log(ol.OVERVIEWMAP_MAX_RATIO/ol.OVERVIEWMAP_MIN_RATIO)/Math.LN2;var i=1/(Math.pow(2,h/2)*ol.OVERVIEWMAP_MIN_RATIO);ol.extent.scaleFromCenter(e,i);g.fit(e,f)};ol.control.OverviewMap.prototype.recenter_=function(){var a=this.getMap();var b=this.ovmap_;var c=a.getView();goog.asserts.assert(goog.isDef(c),"view should be defined");var d=b.getView();goog.asserts.assert(goog.isDef(d),"ovview should be defined");d.setCenter(c.getCenter())};ol.control.OverviewMap.prototype.updateBox_=function(){var a=this.getMap();var b=this.ovmap_;if(!a.isRendered()||!b.isRendered()){return}var c=a.getSize();goog.asserts.assertArray(c,"mapSize should be an array");var d=a.getView();goog.asserts.assert(goog.isDef(d),"view should be defined");var e=b.getView();goog.asserts.assert(goog.isDef(e),"ovview should be defined");var f=b.getSize();goog.asserts.assertArray(f,"ovmapSize should be an array");var g=d.getRotation();goog.asserts.assert(goog.isDef(g),"rotation should be defined");var h=this.boxOverlay_;var i=this.boxOverlay_.getElement();var j=d.calculateExtent(c);var k=e.getResolution();var l=ol.extent.getBottomLeft(j);var m=ol.extent.getTopRight(j);var n=this.calculateCoordinateRotate_(g,l);h.setPosition(n);if(goog.isDefAndNotNull(i)){var o=Math.abs((l[0]-m[0])/k);var p=Math.abs((m[1]-l[1])/k);goog.style.setBorderBoxSize(i,new goog.math.Size(o,p))}};ol.control.OverviewMap.prototype.calculateCoordinateRotate_=function(a,b){var c;var d=this.getMap();var e=d.getView();goog.asserts.assert(goog.isDef(e),"view should be defined");var f=e.getCenter();if(goog.isDef(f)){c=[b[0]-f[0],b[1]-f[1]];ol.coordinate.rotate(c,a);ol.coordinate.add(c,f)}return c};ol.control.OverviewMap.prototype.handleClick_=function(a){a.preventDefault();this.handleToggle_()};ol.control.OverviewMap.prototype.handleToggle_=function(){goog.dom.classlist.toggle(this.element,"ol-collapsed");if(this.collapsed_){goog.dom.replaceNode(this.collapseLabel_,this.label_)}else{goog.dom.replaceNode(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_;var a=this.ovmap_;if(!this.collapsed_&&!a.isRendered()){a.updateSize();this.resetExtent_();goog.events.listenOnce(a,ol.MapEventType.POSTRENDER,function(a){this.updateBox_()},false,this)}};ol.control.OverviewMap.prototype.getCollapsible=function(){return this.collapsible_};ol.control.OverviewMap.prototype.setCollapsible=function(a){if(this.collapsible_===a){return}this.collapsible_=a;goog.dom.classlist.toggle(this.element,"ol-uncollapsible");if(!a&&this.collapsed_){this.handleToggle_()}};ol.control.OverviewMap.prototype.setCollapsed=function(a){if(!this.collapsible_||this.collapsed_===a){return}this.handleToggle_()};ol.control.OverviewMap.prototype.getCollapsed=function(){return this.collapsed_};goog.provide("ol.control.ScaleLine");goog.provide("ol.control.ScaleLineProperty");goog.provide("ol.control.ScaleLineUnits");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.math");goog.require("goog.style");goog.require("ol.Object");goog.require("ol.TransformFunction");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Units");goog.require("ol.sphere.NORMAL");ol.control.ScaleLineProperty={UNITS:"units"};ol.control.ScaleLineUnits={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};ol.control.ScaleLine=function(a){var b=goog.isDef(a)?a:{};var c=goog.isDef(b.className)?b.className:"ol-scale-line";this.innerElement_=goog.dom.createDom(goog.dom.TagName.DIV,c+"-inner");this.element_=goog.dom.createDom(goog.dom.TagName.DIV,c+" "+ol.css.CLASS_UNSELECTABLE,this.innerElement_);this.viewState_=null;this.minWidth_=goog.isDef(b.minWidth)?b.minWidth:64;this.renderedVisible_=false;this.renderedWidth_=undefined;this.renderedHTML_="";this.toEPSG4326_=null;var d=goog.isDef(b.render)?b.render:ol.control.ScaleLine.render;goog.base(this,{element:this.element_,render:d,target:b.target});goog.events.listen(this,ol.Object.getChangeEventType(ol.control.ScaleLineProperty.UNITS),this.handleUnitsChanged_,false,this);this.setUnits(b.units||ol.control.ScaleLineUnits.METRIC)};goog.inherits(ol.control.ScaleLine,ol.control.Control);ol.control.ScaleLine.LEADING_DIGITS=[1,2,5];ol.control.ScaleLine.prototype.getUnits=function(){return this.get(ol.control.ScaleLineProperty.UNITS)};ol.control.ScaleLine.render=function(a){var b=a.frameState;if(goog.isNull(b)){this.viewState_=null}else{this.viewState_=b.viewState}this.updateElement_()};ol.control.ScaleLine.prototype.handleUnitsChanged_=function(){this.updateElement_()};ol.control.ScaleLine.prototype.setUnits=function(a){this.set(ol.control.ScaleLineProperty.UNITS,a)};ol.control.ScaleLine.prototype.updateElement_=function(){var a=this.viewState_;if(goog.isNull(a)){if(this.renderedVisible_){goog.style.setElementShown(this.element_,false);this.renderedVisible_=false}return}var b=a.center;var c=a.projection;var d=c.getPointResolution(a.resolution,b);var e=c.getUnits();var f;var g=this.getUnits();if(e==ol.proj.Units.DEGREES&&(g==ol.control.ScaleLineUnits.METRIC||g==ol.control.ScaleLineUnits.IMPERIAL||g==ol.control.ScaleLineUnits.US||g==ol.control.ScaleLineUnits.NAUTICAL)){this.toEPSG4326_=null;f=Math.cos(goog.math.toRadians(b[1]));d*=Math.PI*f*ol.sphere.NORMAL.radius/180;e=ol.proj.Units.METERS}else if(e!=ol.proj.Units.DEGREES&&g==ol.control.ScaleLineUnits.DEGREES){if(goog.isNull(this.toEPSG4326_)){this.toEPSG4326_=ol.proj.getTransformFromProjections(c,ol.proj.get("EPSG:4326"))}f=Math.cos(goog.math.toRadians(this.toEPSG4326_(b)[1]));var h=ol.sphere.NORMAL.radius;goog.asserts.assert(goog.isDef(ol.proj.METERS_PER_UNIT[e]),"Meters per unit should be defined for the projection unit");h/=ol.proj.METERS_PER_UNIT[e];d*=180/(Math.PI*f*h);e=ol.proj.Units.DEGREES}else{this.toEPSG4326_=null}goog.asserts.assert((g==ol.control.ScaleLineUnits.METRIC||g==ol.control.ScaleLineUnits.IMPERIAL||g==ol.control.ScaleLineUnits.US||g==ol.control.ScaleLineUnits.NAUTICAL)&&e==ol.proj.Units.METERS||g==ol.control.ScaleLineUnits.DEGREES&&e==ol.proj.Units.DEGREES,"Scale line units and projection units should match");var i=this.minWidth_*d;var j="";if(g==ol.control.ScaleLineUnits.DEGREES){if(i<1/60){j="″";d*=3600}else if(i<1){j="′";d*=60}else{j="°"}}else if(g==ol.control.ScaleLineUnits.IMPERIAL){if(i<.9144){j="in";d/=.0254}else if(i<1609.344){j="ft";d/=.3048}else{j="mi";d/=1609.344}}else if(g==ol.control.ScaleLineUnits.NAUTICAL){d/=1852;j="nm"}else if(g==ol.control.ScaleLineUnits.METRIC){if(i<1){j="mm";d*=1e3}else if(i<1e3){j="m"}else{j="km";d/=1e3}}else if(g==ol.control.ScaleLineUnits.US){if(i<.9144){j="in";d*=39.37}else if(i<1609.344){j="ft";d/=.30480061}else{j="mi";d/=1609.3472}}else{goog.asserts.fail("Scale line element cannot be updated")}var k=3*Math.floor(Math.log(this.minWidth_*d)/Math.log(10));var l,m;while(true){l=ol.control.ScaleLine.LEADING_DIGITS[k%3]*Math.pow(10,Math.floor(k/3));m=Math.round(l/d);if(isNaN(m)){goog.style.setElementShown(this.element_,false);this.renderedVisible_=false;return}else if(m>=this.minWidth_){break}++k}var n=l+" "+j;if(this.renderedHTML_!=n){this.innerElement_.innerHTML=n;this.renderedHTML_=n}if(this.renderedWidth_!=m){this.innerElement_.style.width=m+"px";this.renderedWidth_=m}if(!this.renderedVisible_){goog.style.setElementShown(this.element_,true);this.renderedVisible_=true}};goog.provide("goog.events.EventHandler");goog.require("goog.Disposable");goog.require("goog.events");goog.require("goog.object");goog.forwardDeclare("goog.events.EventWrapper");goog.events.EventHandler=function(a){goog.Disposable.call(this);this.handler_=a;this.keys_={}};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(a,b,c,d){return this.listen_(a,b,c,d)};goog.events.EventHandler.prototype.listenWithScope=function(a,b,c,d,e){return this.listen_(a,b,c,d,e)};goog.events.EventHandler.prototype.listen_=function(a,b,c,d,e){if(!goog.isArray(b)){if(b){goog.events.EventHandler.typeArray_[0]=b.toString()}b=goog.events.EventHandler.typeArray_}for(var f=0;f<b.length;f++){var g=goog.events.listen(a,b[f],c||this.handleEvent,d||false,e||this.handler_||this);if(!g){return this}var h=g.key;this.keys_[h]=g}return this};goog.events.EventHandler.prototype.listenOnce=function(a,b,c,d){return this.listenOnce_(a,b,c,d)};goog.events.EventHandler.prototype.listenOnceWithScope=function(a,b,c,d,e){return this.listenOnce_(a,b,c,d,e)};goog.events.EventHandler.prototype.listenOnce_=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++){this.listenOnce_(a,b[f],c,d,e)}}else{var g=goog.events.listenOnce(a,b,c||this.handleEvent,d,e||this.handler_||this);if(!g){return this}var h=g.key;this.keys_[h]=g}return this};goog.events.EventHandler.prototype.listenWithWrapper=function(a,b,c,d){return this.listenWithWrapper_(a,b,c,d)};goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(a,b,c,d,e){return this.listenWithWrapper_(a,b,c,d,e)};goog.events.EventHandler.prototype.listenWithWrapper_=function(a,b,c,d,e){b.listen(a,c,d,e||this.handler_||this,this);return this};goog.events.EventHandler.prototype.getListenerCount=function(){var a=0;for(var b in this.keys_){if(Object.prototype.hasOwnProperty.call(this.keys_,b)){a++}}return a};goog.events.EventHandler.prototype.unlisten=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++){this.unlisten(a,b[f],c,d,e)}}else{var g=goog.events.getListener(a,b,c||this.handleEvent,d,e||this.handler_||this);if(g){goog.events.unlistenByKey(g);delete this.keys_[g.key]}}return this};goog.events.EventHandler.prototype.unlistenWithWrapper=function(a,b,c,d,e){b.unlisten(a,c,d,e||this.handler_||this,this);return this};goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,function(a,b){if(this.keys_.hasOwnProperty(b)){goog.events.unlistenByKey(a)}},this);this.keys_={}};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};goog.events.EventHandler.prototype.handleEvent=function(a){throw Error("EventHandler.handleEvent not implemented")};goog.provide("goog.style.bidi");goog.require("goog.dom");goog.require("goog.style");goog.require("goog.userAgent");goog.style.bidi.getScrollLeft=function(a){var b=goog.style.isRightToLeft(a);if(b&&goog.userAgent.GECKO){return-a.scrollLeft}else if(b&&!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8"))){var c=goog.style.getComputedOverflowX(a);if(c=="visible"){return a.scrollLeft}else{return a.scrollWidth-a.clientWidth-a.scrollLeft}}return a.scrollLeft};goog.style.bidi.getOffsetStart=function(a){a=a;var b=a.offsetLeft;var c=a.offsetParent;if(!c&&goog.style.getComputedPosition(a)=="fixed"){c=goog.dom.getOwnerDocument(a).documentElement}if(!c){return b}if(goog.userAgent.GECKO){var d=goog.style.getBorderBox(c);b+=d.left}else if(goog.userAgent.isDocumentModeOrHigher(8)&&!goog.userAgent.isDocumentModeOrHigher(9)){var d=goog.style.getBorderBox(c);b-=d.left}if(goog.style.isRightToLeft(c)){var e=b+a.offsetWidth;return c.clientWidth-e}return b};goog.style.bidi.setScrollOffset=function(a,b){b=Math.max(b,0);if(!goog.style.isRightToLeft(a)){a.scrollLeft=b}else if(goog.userAgent.GECKO){a.scrollLeft=-b}else if(!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8"))){a.scrollLeft=a.scrollWidth-b-a.clientWidth}else{a.scrollLeft=b}};goog.style.bidi.setPosition=function(a,b,c,d){if(!goog.isNull(c)){a.style.top=c+"px"}if(d){a.style.right=b+"px";a.style.left=""}else{a.style.left=b+"px";a.style.right=""}};goog.provide("goog.fx.DragEvent");goog.provide("goog.fx.Dragger");goog.provide("goog.fx.Dragger.EventType");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventHandler");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.math.Coordinate");goog.require("goog.math.Rect");goog.require("goog.style");goog.require("goog.style.bidi");goog.require("goog.userAgent");goog.fx.Dragger=function(a,b,c){goog.fx.Dragger.base(this,"constructor");this.target=a;this.handle=b||a;this.limits=c||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(a);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);this.rightToLeft_;this.clientX=0;this.clientY=0;this.screenX=0;this.screenY=0;this.startX=0;this.startY=0;this.deltaX=0;this.deltaY=0;this.pageScroll;this.enabled_=true;this.dragging_=false;this.preventMouseDown_=true;this.hysteresisDistanceSquared_=0;this.scrollTarget_;this.ieDragStartCancellingOn_=false;this.useRightPositioningForRtl_=false;goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,false,this)};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);goog.tagUnsealableClass(goog.fx.Dragger);goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.3");goog.fx.Dragger.cloneNode=function(a){var b=a.cloneNode(true),c=a.getElementsByTagName(goog.dom.TagName.TEXTAREA),d=b.getElementsByTagName(goog.dom.TagName.TEXTAREA);for(var e=0;e<c.length;e++){d[e].value=c[e].value}switch(a.tagName){case goog.dom.TagName.TR:return goog.dom.createDom(goog.dom.TagName.TABLE,null,goog.dom.createDom(goog.dom.TagName.TBODY,null,b));case goog.dom.TagName.TD:case goog.dom.TagName.TH:return goog.dom.createDom(goog.dom.TagName.TABLE,null,goog.dom.createDom(goog.dom.TagName.TBODY,null,goog.dom.createDom(goog.dom.TagName.TR,null,b)));case goog.dom.TagName.TEXTAREA:b.value=a.value;default:return b}};goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(a){this.useRightPositioningForRtl_=a};goog.fx.Dragger.prototype.getHandler=function(){var a=this;return a.eventHandler_};goog.fx.Dragger.prototype.setLimits=function(a){this.limits=a||new goog.math.Rect(NaN,NaN,NaN,NaN)};goog.fx.Dragger.prototype.setHysteresis=function(a){this.hysteresisDistanceSquared_=Math.pow(a,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(a){this.scrollTarget_=a};goog.fx.Dragger.prototype.setCancelIeDragStart=function(a){this.ieDragStartCancellingOn_=a};goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};goog.fx.Dragger.prototype.setEnabled=function(a){this.enabled_=a};goog.fx.Dragger.prototype.setPreventMouseDown=function(a){this.preventMouseDown_=a};goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,false,this);this.cleanUpAfterDragging_();this.target=null;this.handle=null};goog.fx.Dragger.prototype.isRightToLeft_=function(){if(!goog.isDef(this.rightToLeft_)){this.rightToLeft_=goog.style.isRightToLeft(this.target)}return this.rightToLeft_};goog.fx.Dragger.prototype.startDrag=function(a){var b=a.type==goog.events.EventType.MOUSEDOWN;if(this.enabled_&&!this.dragging_&&(!b||a.isMouseActionButton())){if(this.hysteresisDistanceSquared_==0){if(this.fireDragStart_(a)){this.dragging_=true;if(this.preventMouseDown_){a.preventDefault()}}else{return}}else if(this.preventMouseDown_){a.preventDefault()}this.setupDragHandlers();this.clientX=this.startX=a.clientX;this.clientY=this.startY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.computeInitialPosition();this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll()}else{this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)}};goog.fx.Dragger.prototype.setupDragHandlers=function(){var a=this.document_;var b=a.documentElement;var c=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(a,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,c);this.eventHandler_.listen(a,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,c);if(goog.fx.Dragger.HAS_SET_CAPTURE_){b.setCapture(false);this.eventHandler_.listen(b,goog.events.EventType.LOSECAPTURE,this.endDrag)}else{this.eventHandler_.listen(goog.dom.getWindow(a),goog.events.EventType.BLUR,this.endDrag)}if(goog.userAgent.IE&&this.ieDragStartCancellingOn_){this.eventHandler_.listen(a,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault)}if(this.scrollTarget_){this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,c)}};goog.fx.Dragger.prototype.fireDragStart_=function(a){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,a.clientX,a.clientY,a))};goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll();if(goog.fx.Dragger.HAS_SET_CAPTURE_){this.document_.releaseCapture()}};goog.fx.Dragger.prototype.endDrag=function(a,b){this.cleanUpAfterDragging_();if(this.dragging_){this.dragging_=false;var c=this.limitX(this.deltaX);var d=this.limitY(this.deltaY);var e=b||a.type==goog.events.EventType.TOUCHCANCEL;this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,a.clientX,a.clientY,a,c,d,e))}else{this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)}};goog.fx.Dragger.prototype.endDragCancel=function(a){this.endDrag(a,true)};goog.fx.Dragger.prototype.handleMove_=function(a){if(this.enabled_){var b=this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1;var c=b*(a.clientX-this.clientX);var d=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.dragging_){var e=this.startX-this.clientX;var f=this.startY-this.clientY;var g=e*e+f*f;if(g>this.hysteresisDistanceSquared_){if(this.fireDragStart_(a)){this.dragging_=true}else{if(!this.isDisposed()){this.endDrag(a)}return}}}var h=this.calculatePosition_(c,d);var i=h.x;var j=h.y;if(this.dragging_){var k=this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,a.clientX,a.clientY,a,i,j));if(k){this.doDrag(a,i,j,false);a.preventDefault()}}}};goog.fx.Dragger.prototype.calculatePosition_=function(a,b){var c=goog.dom.getDomHelper(this.document_).getDocumentScroll();a+=c.x-this.pageScroll.x;b+=c.y-this.pageScroll.y;this.pageScroll=c;this.deltaX+=a;this.deltaY+=b;var d=this.limitX(this.deltaX);var e=this.limitY(this.deltaY);return new goog.math.Coordinate(d,e)};goog.fx.Dragger.prototype.onScroll_=function(a){var b=this.calculatePosition_(0,0);a.clientX=this.clientX;a.clientY=this.clientY;this.doDrag(a,b.x,b.y,true)};goog.fx.Dragger.prototype.doDrag=function(a,b,c,d){this.defaultAction(b,c);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,a.clientX,a.clientY,a,b,c))};goog.fx.Dragger.prototype.limitX=function(a){var b=this.limits;var c=!isNaN(b.left)?b.left:null;var d=!isNaN(b.width)?b.width:0;var e=c!=null?c+d:Infinity;var f=c!=null?c:-Infinity;return Math.min(e,Math.max(f,a))};goog.fx.Dragger.prototype.limitY=function(a){var b=this.limits;var c=!isNaN(b.top)?b.top:null;var d=!isNaN(b.height)?b.height:0;var e=c!=null?c+d:Infinity;var f=c!=null?c:-Infinity;return Math.min(e,Math.max(f,a))};goog.fx.Dragger.prototype.computeInitialPosition=function(){this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft;this.deltaY=this.target.offsetTop};goog.fx.Dragger.prototype.defaultAction=function(a,b){if(this.useRightPositioningForRtl_&&this.isRightToLeft_()){this.target.style.right=a+"px"}else{this.target.style.left=a+"px"}this.target.style.top=b+"px"};goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_};goog.fx.DragEvent=function(a,b,c,d,e,f,g,h){goog.events.Event.call(this,a);this.clientX=c;this.clientY=d;this.browserEvent=e;this.left=goog.isDef(f)?f:b.deltaX;this.top=goog.isDef(g)?g:b.deltaY;this.dragger=b;this.dragCanceled=!!h};goog.inherits(goog.fx.DragEvent,goog.events.Event);goog.provide("ol.control.ZoomSlider");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.fx.DragEvent");goog.require("goog.fx.Dragger");goog.require("goog.fx.Dragger.EventType");goog.require("goog.math");goog.require("goog.math.Rect");goog.require("goog.style");goog.require("ol.Size");goog.require("ol.ViewHint");goog.require("ol.animation");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.easing");ol.control.ZoomSlider=function(a){var b=goog.isDef(a)?a:{};this.currentResolution_=undefined;this.direction_=ol.control.ZoomSlider.direction.VERTICAL;this.thumbSize_=null;this.sliderInitialized_=false;this.duration_=goog.isDef(b.duration)?b.duration:200;var c=goog.isDef(b.className)?b.className:"ol-zoomslider";var d=goog.dom.createDom(goog.dom.TagName.DIV,[c+"-thumb",ol.css.CLASS_UNSELECTABLE]);var e=goog.dom.createDom(goog.dom.TagName.DIV,[c,ol.css.CLASS_UNSELECTABLE,ol.css.CLASS_CONTROL],d);this.dragger_=new goog.fx.Dragger(d);this.registerDisposable(this.dragger_);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.handleDraggerStart_,false,this);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.DRAG,this.handleDraggerDrag_,false,this);goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.END,this.handleDraggerEnd_,false,this);goog.events.listen(e,goog.events.EventType.CLICK,this.handleContainerClick_,false,this);goog.events.listen(d,goog.events.EventType.CLICK,goog.events.Event.stopPropagation);var f=goog.isDef(b.render)?b.render:ol.control.ZoomSlider.render;goog.base(this,{element:e,render:f})};goog.inherits(ol.control.ZoomSlider,ol.control.Control);ol.control.ZoomSlider.direction={VERTICAL:0,HORIZONTAL:1};ol.control.ZoomSlider.prototype.setMap=function(a){goog.base(this,"setMap",a);if(!goog.isNull(a)){a.render()}};ol.control.ZoomSlider.prototype.initSlider_=function(){var a=this.element;var b=goog.style.getSize(a);var c=goog.dom.getFirstElementChild(a);var d=goog.style.getMarginBox(c);var e=goog.style.getBorderBoxSize(c);var f=e.width+d.right+d.left;var g=e.height+d.top+d.bottom;this.thumbSize_=[f,g];var h=b.width-f;var i=b.height-g;var j;if(b.width>b.height){this.direction_=ol.control.ZoomSlider.direction.HORIZONTAL;j=new goog.math.Rect(0,0,h,0)}else{this.direction_=ol.control.ZoomSlider.direction.VERTICAL;j=new goog.math.Rect(0,0,0,i)}this.dragger_.setLimits(j);this.sliderInitialized_=true};ol.control.ZoomSlider.render=function(a){if(goog.isNull(a.frameState)){return}goog.asserts.assert(goog.isDefAndNotNull(a.frameState.viewState),"viewState should be defined");if(!this.sliderInitialized_){this.initSlider_()}var b=a.frameState.viewState.resolution;if(b!==this.currentResolution_){this.currentResolution_=b;this.setThumbPosition_(b)}};ol.control.ZoomSlider.prototype.handleContainerClick_=function(a){var b=this.getMap();var c=b.getView();var d=c.getResolution();goog.asserts.assert(goog.isDef(d),"currentResolution should be defined");b.beforeRender(ol.animation.zoom({resolution:d,duration:this.duration_,easing:ol.easing.easeOut}));var e=this.getRelativePosition_(a.offsetX-this.thumbSize_[0]/2,a.offsetY-this.thumbSize_[1]/2);var f=this.getResolutionForPosition_(e);c.setResolution(c.constrainResolution(f))};ol.control.ZoomSlider.prototype.handleDraggerStart_=function(a){this.getMap().getView().setHint(ol.ViewHint.INTERACTING,1)};ol.control.ZoomSlider.prototype.handleDraggerDrag_=function(a){var b=this.getRelativePosition_(a.left,a.top);this.currentResolution_=this.getResolutionForPosition_(b);this.getMap().getView().setResolution(this.currentResolution_)};ol.control.ZoomSlider.prototype.handleDraggerEnd_=function(a){var b=this.getMap();var c=b.getView();c.setHint(ol.ViewHint.INTERACTING,-1);goog.asserts.assert(goog.isDef(this.currentResolution_),"this.currentResolution_ should be defined");b.beforeRender(ol.animation.zoom({resolution:this.currentResolution_,duration:this.duration_,easing:ol.easing.easeOut}));var d=c.constrainResolution(this.currentResolution_);c.setResolution(d)};ol.control.ZoomSlider.prototype.setThumbPosition_=function(a){var b=this.getPositionForResolution_(a);var c=this.dragger_;var d=goog.dom.getFirstElementChild(this.element);if(this.direction_==ol.control.ZoomSlider.direction.HORIZONTAL){var e=c.limits.left+c.limits.width*b;goog.style.setPosition(d,e)}else{var f=c.limits.top+c.limits.height*b;goog.style.setPosition(d,c.limits.left,f)}};ol.control.ZoomSlider.prototype.getRelativePosition_=function(a,b){var c=this.dragger_.limits;var d;if(this.direction_===ol.control.ZoomSlider.direction.HORIZONTAL){d=(a-c.left)/c.width}else{d=(b-c.top)/c.height}return goog.math.clamp(d,0,1)};ol.control.ZoomSlider.prototype.getResolutionForPosition_=function(a){var b=this.getMap().getView().getResolutionForValueFunction();return b(1-a)};ol.control.ZoomSlider.prototype.getPositionForResolution_=function(a){var b=this.getMap().getView().getValueForResolutionFunction();return 1-b(a)};goog.provide("ol.control.ZoomToExtent");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.control.Control");goog.require("ol.css")
;ol.control.ZoomToExtent=function(a){var b=goog.isDef(a)?a:{};this.extent_=goog.isDef(b.extent)?b.extent:null;var c=goog.isDef(b.className)?b.className:"ol-zoom-extent";var d=goog.isDef(b.label)?b.label:"E";var e=goog.isDef(b.tipLabel)?b.tipLabel:"Fit to extent";var f=goog.dom.createDom(goog.dom.TagName.BUTTON,{type:"button",title:e},d);goog.events.listen(f,goog.events.EventType.CLICK,this.handleClick_,false,this);var g=c+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL;var h=goog.dom.createDom(goog.dom.TagName.DIV,g,f);goog.base(this,{element:h,target:b.target})};goog.inherits(ol.control.ZoomToExtent,ol.control.Control);ol.control.ZoomToExtent.prototype.handleClick_=function(a){a.preventDefault();this.handleZoomToExtent_()};ol.control.ZoomToExtent.prototype.handleZoomToExtent_=function(){var a=this.getMap();var b=a.getView();var c=goog.isNull(this.extent_)?b.getProjection().getExtent():this.extent_;var d=a.getSize();goog.asserts.assert(goog.isDef(d),"size should be defined");b.fit(c,d)};goog.provide("ol.DeviceOrientation");goog.provide("ol.DeviceOrientationProperty");goog.require("goog.events");goog.require("goog.math");goog.require("ol.Object");goog.require("ol.has");ol.DeviceOrientationProperty={ALPHA:"alpha",BETA:"beta",GAMMA:"gamma",HEADING:"heading",TRACKING:"tracking"};ol.DeviceOrientation=function(a){goog.base(this);var b=goog.isDef(a)?a:{};this.listenerKey_=null;goog.events.listen(this,ol.Object.getChangeEventType(ol.DeviceOrientationProperty.TRACKING),this.handleTrackingChanged_,false,this);this.setTracking(goog.isDef(b.tracking)?b.tracking:false)};goog.inherits(ol.DeviceOrientation,ol.Object);ol.DeviceOrientation.prototype.disposeInternal=function(){this.setTracking(false);goog.base(this,"disposeInternal")};ol.DeviceOrientation.prototype.orientationChange_=function(a){var b=a.getBrowserEvent();if(goog.isDefAndNotNull(b.alpha)){var c=goog.math.toRadians(b.alpha);this.set(ol.DeviceOrientationProperty.ALPHA,c);if(goog.isBoolean(b.absolute)&&b.absolute){this.set(ol.DeviceOrientationProperty.HEADING,c)}else if(goog.isDefAndNotNull(b.webkitCompassHeading)&&goog.isDefAndNotNull(b.webkitCompassAccuracy)&&b.webkitCompassAccuracy!=-1){var d=goog.math.toRadians(b.webkitCompassHeading);this.set(ol.DeviceOrientationProperty.HEADING,d)}}if(goog.isDefAndNotNull(b.beta)){this.set(ol.DeviceOrientationProperty.BETA,goog.math.toRadians(b.beta))}if(goog.isDefAndNotNull(b.gamma)){this.set(ol.DeviceOrientationProperty.GAMMA,goog.math.toRadians(b.gamma))}this.changed()};ol.DeviceOrientation.prototype.getAlpha=function(){return this.get(ol.DeviceOrientationProperty.ALPHA)};ol.DeviceOrientation.prototype.getBeta=function(){return this.get(ol.DeviceOrientationProperty.BETA)};ol.DeviceOrientation.prototype.getGamma=function(){return this.get(ol.DeviceOrientationProperty.GAMMA)};ol.DeviceOrientation.prototype.getHeading=function(){return this.get(ol.DeviceOrientationProperty.HEADING)};ol.DeviceOrientation.prototype.getTracking=function(){return this.get(ol.DeviceOrientationProperty.TRACKING)};ol.DeviceOrientation.prototype.handleTrackingChanged_=function(){if(ol.has.DEVICE_ORIENTATION){var a=this.getTracking();if(a&&goog.isNull(this.listenerKey_)){this.listenerKey_=goog.events.listen(goog.global,"deviceorientation",this.orientationChange_,false,this)}else if(!a&&!goog.isNull(this.listenerKey_)){goog.events.unlistenByKey(this.listenerKey_);this.listenerKey_=null}}};ol.DeviceOrientation.prototype.setTracking=function(a){this.set(ol.DeviceOrientationProperty.TRACKING,a)};goog.provide("ol.format.Feature");goog.require("ol.geom.Geometry");goog.require("ol.proj");ol.format.Feature=function(){this.defaultDataProjection=null};ol.format.Feature.prototype.getExtensions=goog.abstractMethod;ol.format.Feature.prototype.getReadOptions=function(a,b){var c;if(goog.isDef(b)){c={dataProjection:goog.isDef(b.dataProjection)?b.dataProjection:this.readProjection(a),featureProjection:b.featureProjection}}return this.adaptOptions(c)};ol.format.Feature.prototype.adaptOptions=function(a){var b;if(goog.isDef(a)){b={featureProjection:a.featureProjection,dataProjection:goog.isDefAndNotNull(a.dataProjection)?a.dataProjection:this.defaultDataProjection,rightHanded:a.rightHanded}}return b};ol.format.Feature.prototype.getType=goog.abstractMethod;ol.format.Feature.prototype.readFeature=goog.abstractMethod;ol.format.Feature.prototype.readFeatures=goog.abstractMethod;ol.format.Feature.prototype.readGeometry=goog.abstractMethod;ol.format.Feature.prototype.readProjection=goog.abstractMethod;ol.format.Feature.prototype.writeFeature=goog.abstractMethod;ol.format.Feature.prototype.writeFeatures=goog.abstractMethod;ol.format.Feature.prototype.writeGeometry=goog.abstractMethod;ol.format.Feature.transformWithOptions=function(a,b,c){var d=goog.isDef(c)?ol.proj.get(c.featureProjection):null;var e=goog.isDef(c)?ol.proj.get(c.dataProjection):null;if(!goog.isNull(d)&&!goog.isNull(e)&&!ol.proj.equivalent(d,e)){if(a instanceof ol.geom.Geometry){return(b?a.clone():a).transform(b?d:e,b?e:d)}else{return ol.proj.transformExtent(b?a.slice():a,b?d:e,b?e:d)}}else{return a}};goog.provide("ol.format.JSONFeature");goog.require("goog.asserts");goog.require("goog.json");goog.require("ol.format.Feature");goog.require("ol.format.FormatType");ol.format.JSONFeature=function(){goog.base(this)};goog.inherits(ol.format.JSONFeature,ol.format.Feature);ol.format.JSONFeature.prototype.getObject_=function(a){if(goog.isObject(a)){return a}else if(goog.isString(a)){var b=goog.json.parse(a);return goog.isDef(b)?b:null}else{goog.asserts.fail();return null}};ol.format.JSONFeature.prototype.getType=function(){return ol.format.FormatType.JSON};ol.format.JSONFeature.prototype.readFeature=function(a,b){return this.readFeatureFromObject(this.getObject_(a),this.getReadOptions(a,b))};ol.format.JSONFeature.prototype.readFeatures=function(a,b){return this.readFeaturesFromObject(this.getObject_(a),this.getReadOptions(a,b))};ol.format.JSONFeature.prototype.readFeatureFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.readFeaturesFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.readGeometry=function(a,b){return this.readGeometryFromObject(this.getObject_(a),this.getReadOptions(a,b))};ol.format.JSONFeature.prototype.readGeometryFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.readProjection=function(a){return this.readProjectionFromObject(this.getObject_(a))};ol.format.JSONFeature.prototype.readProjectionFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.writeFeature=function(a,b){return goog.json.serialize(this.writeFeatureObject(a,b))};ol.format.JSONFeature.prototype.writeFeatureObject=goog.abstractMethod;ol.format.JSONFeature.prototype.writeFeatures=function(a,b){return goog.json.serialize(this.writeFeaturesObject(a,b))};ol.format.JSONFeature.prototype.writeFeaturesObject=goog.abstractMethod;ol.format.JSONFeature.prototype.writeGeometry=function(a,b){return goog.json.serialize(this.writeGeometryObject(a,b))};ol.format.JSONFeature.prototype.writeGeometryObject=goog.abstractMethod;goog.provide("ol.format.EsriJSON");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.extent");goog.require("ol.format.Feature");goog.require("ol.format.JSONFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.geom.flat.orient");goog.require("ol.proj");ol.format.EsriJSON=function(a){var b=goog.isDef(a)?a:{};goog.base(this);this.geometryName_=b.geometryName};goog.inherits(ol.format.EsriJSON,ol.format.JSONFeature);ol.format.EsriJSON.readGeometry_=function(a,b){if(goog.isNull(a)){return null}var c;if(goog.isNumber(a.x)&&goog.isNumber(a.y)){c=ol.geom.GeometryType.POINT}else if(goog.isDefAndNotNull(a.points)){c=ol.geom.GeometryType.MULTI_POINT}else if(goog.isDefAndNotNull(a.paths)){if(a.paths.length===1){c=ol.geom.GeometryType.LINE_STRING}else{c=ol.geom.GeometryType.MULTI_LINE_STRING}}else if(goog.isDefAndNotNull(a.rings)){var d=ol.format.EsriJSON.getGeometryLayout_(a);var e=ol.format.EsriJSON.convertRings_(a.rings,d);a=goog.object.clone(a);if(e.length===1){c=ol.geom.GeometryType.POLYGON;a.rings=e[0]}else{c=ol.geom.GeometryType.MULTI_POLYGON;a.rings=e}}goog.asserts.assert(goog.isDef(c),"geometry type should be defined");var f=ol.format.EsriJSON.GEOMETRY_READERS_[c];goog.asserts.assert(goog.isDef(f),"geometryReader should be defined");return ol.format.Feature.transformWithOptions(f(a),false,b)};ol.format.EsriJSON.convertRings_=function(a,b){var c=[];var d=[];var e,f;for(e=0,f=a.length;e<f;++e){var g=goog.array.flatten(a[e]);var h=ol.geom.flat.orient.linearRingIsClockwise(g,0,g.length,b.length);if(h){c.push([a[e]])}else{d.push(a[e])}}while(d.length){var i=d.shift();var j=false;for(e=c.length-1;e>=0;e--){var k=c[e][0];if(ol.extent.containsExtent(new ol.geom.LinearRing(k).getExtent(),new ol.geom.LinearRing(i).getExtent())){c[e].push(i);j=true;break}}if(!j){c.push([i.reverse()])}}return c};ol.format.EsriJSON.readPointGeometry_=function(a){goog.asserts.assert(goog.isNumber(a.x),"object.x should be number");goog.asserts.assert(goog.isNumber(a.y),"object.y should be number");var b;if(goog.isDefAndNotNull(a.m)&&goog.isDefAndNotNull(a.z)){b=new ol.geom.Point([a.x,a.y,a.z,a.m],ol.geom.GeometryLayout.XYZM)}else if(goog.isDefAndNotNull(a.z)){b=new ol.geom.Point([a.x,a.y,a.z],ol.geom.GeometryLayout.XYZ)}else if(goog.isDefAndNotNull(a.m)){b=new ol.geom.Point([a.x,a.y,a.m],ol.geom.GeometryLayout.XYM)}else{b=new ol.geom.Point([a.x,a.y])}return b};ol.format.EsriJSON.readLineStringGeometry_=function(a){goog.asserts.assert(goog.isArray(a.paths),"object.paths should be an array");goog.asserts.assert(a.paths.length===1,"object.paths array length should be 1");var b=ol.format.EsriJSON.getGeometryLayout_(a);return new ol.geom.LineString(a.paths[0],b)};ol.format.EsriJSON.readMultiLineStringGeometry_=function(a){goog.asserts.assert(goog.isArray(a.paths),"object.paths should be an array");goog.asserts.assert(a.paths.length>1,"object.paths array length should be more than 1");var b=ol.format.EsriJSON.getGeometryLayout_(a);return new ol.geom.MultiLineString(a.paths,b)};ol.format.EsriJSON.getGeometryLayout_=function(a){var b=ol.geom.GeometryLayout.XY;if(a.hasZ===true&&a.hasM===true){b=ol.geom.GeometryLayout.XYZM}else if(a.hasZ===true){b=ol.geom.GeometryLayout.XYZ}else if(a.hasM===true){b=ol.geom.GeometryLayout.XYM}return b};ol.format.EsriJSON.readMultiPointGeometry_=function(a){goog.asserts.assert(goog.isDefAndNotNull(a.points),"object.points should be defined");var b=ol.format.EsriJSON.getGeometryLayout_(a);return new ol.geom.MultiPoint(a.points,b)};ol.format.EsriJSON.readMultiPolygonGeometry_=function(a){goog.asserts.assert(goog.isDefAndNotNull(a.rings));goog.asserts.assert(a.rings.length>1,"object.rings should have length larger than 1");var b=ol.format.EsriJSON.getGeometryLayout_(a);return new ol.geom.MultiPolygon(a.rings,b)};ol.format.EsriJSON.readPolygonGeometry_=function(a){goog.asserts.assert(goog.isDefAndNotNull(a.rings));var b=ol.format.EsriJSON.getGeometryLayout_(a);return new ol.geom.Polygon(a.rings,b)};ol.format.EsriJSON.writePointGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.Point,"geometry should be an ol.geom.Point");var c=a.getCoordinates();var d=a.getLayout();if(d===ol.geom.GeometryLayout.XYZ){return{x:c[0],y:c[1],z:c[2]}}else if(d===ol.geom.GeometryLayout.XYM){return{x:c[0],y:c[1],m:c[2]}}else if(d===ol.geom.GeometryLayout.XYZM){return{x:c[0],y:c[1],z:c[2],m:c[3]}}else if(d===ol.geom.GeometryLayout.XY){return{x:c[0],y:c[1]}}else{goog.asserts.fail("Unknown geometry layout")}};ol.format.EsriJSON.getHasZM_=function(a){var b=a.getLayout();return{hasZ:b===ol.geom.GeometryLayout.XYZ||b===ol.geom.GeometryLayout.XYZM,hasM:b===ol.geom.GeometryLayout.XYM||b===ol.geom.GeometryLayout.XYZM}};ol.format.EsriJSON.writeLineStringGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.LineString,"geometry should be an ol.geom.LineString");var c=ol.format.EsriJSON.getHasZM_(a);return{hasZ:c.hasZ,hasM:c.hasM,paths:[a.getCoordinates()]}};ol.format.EsriJSON.writePolygonGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");var c=ol.format.EsriJSON.getHasZM_(a);return{hasZ:c.hasZ,hasM:c.hasM,rings:a.getCoordinates(false)}};ol.format.EsriJSON.writeMultiLineStringGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");var c=ol.format.EsriJSON.getHasZM_(a);return{hasZ:c.hasZ,hasM:c.hasM,paths:a.getCoordinates()}};ol.format.EsriJSON.writeMultiPointGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.MultiPoint,"geometry should be an ol.geom.MultiPoint");var c=ol.format.EsriJSON.getHasZM_(a);return{hasZ:c.hasZ,hasM:c.hasM,points:a.getCoordinates()}};ol.format.EsriJSON.writeMultiPolygonGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");var c=ol.format.EsriJSON.getHasZM_(a);var d=a.getCoordinates(false);var e=[];for(var f=0;f<d.length;f++){for(var g=d[f].length-1;g>=0;g--){e.push(d[f][g])}}return{hasZ:c.hasZ,hasM:c.hasM,rings:e}};ol.format.EsriJSON.GEOMETRY_READERS_={};ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.POINT]=ol.format.EsriJSON.readPointGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.LINE_STRING]=ol.format.EsriJSON.readLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.POLYGON]=ol.format.EsriJSON.readPolygonGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_POINT]=ol.format.EsriJSON.readMultiPointGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_LINE_STRING]=ol.format.EsriJSON.readMultiLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_POLYGON]=ol.format.EsriJSON.readMultiPolygonGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_={};ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.POINT]=ol.format.EsriJSON.writePointGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.LINE_STRING]=ol.format.EsriJSON.writeLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.POLYGON]=ol.format.EsriJSON.writePolygonGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_POINT]=ol.format.EsriJSON.writeMultiPointGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_LINE_STRING]=ol.format.EsriJSON.writeMultiLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_POLYGON]=ol.format.EsriJSON.writeMultiPolygonGeometry_;ol.format.EsriJSON.prototype.readFeature;ol.format.EsriJSON.prototype.readFeatures;ol.format.EsriJSON.prototype.readFeatureFromObject=function(a,b){var c=a;goog.asserts.assert(goog.isDefAndNotNull(c.geometry)||goog.isDefAndNotNull(c.compressedGeometry)||goog.isDefAndNotNull(c.attributes),"geometry, compressedGeometry or attributes should be defined");var d=ol.format.EsriJSON.readGeometry_(c.geometry,b);var e=new ol.Feature;if(goog.isDef(this.geometryName_)){e.setGeometryName(this.geometryName_)}e.setGeometry(d);if(goog.isDef(b)&&goog.isDef(b.idField)&&goog.isDef(c.attributes[b.idField])){goog.asserts.assert(goog.isNumber(c.attributes[b.idField]),"objectIdFieldName value should be a number");e.setId(c.attributes[b.idField])}if(goog.isDef(c.attributes)){e.setProperties(c.attributes)}return e};ol.format.EsriJSON.prototype.readFeaturesFromObject=function(a,b){var c=a;var d=goog.isDef(b)?b:{};if(goog.isDefAndNotNull(c.features)){var e=a;var f=[];var g=e.features;var h,i;d.idField=a.objectIdFieldName;for(h=0,i=g.length;h<i;++h){f.push(this.readFeatureFromObject(g[h],d))}return f}else{return[this.readFeatureFromObject(a,d)]}};ol.format.EsriJSON.prototype.readGeometry;ol.format.EsriJSON.prototype.readGeometryFromObject=function(a,b){return ol.format.EsriJSON.readGeometry_(a,b)};ol.format.EsriJSON.prototype.readProjection;ol.format.EsriJSON.prototype.readProjectionFromObject=function(a){var b=a;if(goog.isDefAndNotNull(b.spatialReference)&&goog.isDefAndNotNull(b.spatialReference.wkid)){var c=b.spatialReference.wkid;return ol.proj.get("EPSG:"+c)}else{return null}};ol.format.EsriJSON.writeGeometry_=function(a,b){var c=ol.format.EsriJSON.GEOMETRY_WRITERS_[a.getType()];goog.asserts.assert(goog.isDef(c),"geometryWriter should be defined");return c(ol.format.Feature.transformWithOptions(a,true,b),b)};ol.format.EsriJSON.prototype.writeGeometry;ol.format.EsriJSON.prototype.writeGeometryObject=function(a,b){return ol.format.EsriJSON.writeGeometry_(a,this.adaptOptions(b))};ol.format.EsriJSON.prototype.writeFeature;ol.format.EsriJSON.prototype.writeFeatureObject=function(a,b){b=this.adaptOptions(b);var c={};var d=a.getGeometry();if(goog.isDefAndNotNull(d)){c["geometry"]=ol.format.EsriJSON.writeGeometry_(d,b)}var e=a.getProperties();goog.object.remove(e,a.getGeometryName());if(!goog.object.isEmpty(e)){c["attributes"]=e}else{c["attributes"]={}}if(goog.isDef(b)&&goog.isDef(b.featureProjection)){c["spatialReference"]={wkid:ol.proj.get(b.featureProjection).getCode().split(":").pop()}}return c};ol.format.EsriJSON.prototype.writeFeatures;ol.format.EsriJSON.prototype.writeFeaturesObject=function(a,b){b=this.adaptOptions(b);var c=[];var d,e;for(d=0,e=a.length;d<e;++d){c.push(this.writeFeatureObject(a[d],b))}return{features:c}};goog.provide("ol.format.GeoJSON");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.JSONFeature");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");ol.format.GeoJSON=function(a){var b=goog.isDef(a)?a:{};goog.base(this);this.defaultDataProjection=ol.proj.get(goog.isDefAndNotNull(b.defaultDataProjection)?b.defaultDataProjection:"EPSG:4326");this.geometryName_=b.geometryName};goog.inherits(ol.format.GeoJSON,ol.format.JSONFeature);ol.format.GeoJSON.EXTENSIONS_=[".geojson"];ol.format.GeoJSON.readGeometry_=function(a,b){if(goog.isNull(a)){return null}var c=ol.format.GeoJSON.GEOMETRY_READERS_[a.type];goog.asserts.assert(goog.isDef(c),"geometryReader should be defined");return ol.format.Feature.transformWithOptions(c(a),false,b)};ol.format.GeoJSON.readGeometryCollectionGeometry_=function(a,b){goog.asserts.assert(a.type=="GeometryCollection","object.type should be GeometryCollection");var c=goog.array.map(a.geometries,function(a){return ol.format.GeoJSON.readGeometry_(a,b)});return new ol.geom.GeometryCollection(c)};ol.format.GeoJSON.readPointGeometry_=function(a){goog.asserts.assert(a.type=="Point","object.type should be Point");return new ol.geom.Point(a.coordinates)};ol.format.GeoJSON.readLineStringGeometry_=function(a){goog.asserts.assert(a.type=="LineString","object.type should be LineString");return new ol.geom.LineString(a.coordinates)};ol.format.GeoJSON.readMultiLineStringGeometry_=function(a){goog.asserts.assert(a.type=="MultiLineString","object.type should be MultiLineString");return new ol.geom.MultiLineString(a.coordinates)};ol.format.GeoJSON.readMultiPointGeometry_=function(a){goog.asserts.assert(a.type=="MultiPoint","object.type should be MultiPoint");return new ol.geom.MultiPoint(a.coordinates)};ol.format.GeoJSON.readMultiPolygonGeometry_=function(a){goog.asserts.assert(a.type=="MultiPolygon","object.type should be MultiPolygon");return new ol.geom.MultiPolygon(a.coordinates)};ol.format.GeoJSON.readPolygonGeometry_=function(a){goog.asserts.assert(a.type=="Polygon","object.type should be Polygon");return new ol.geom.Polygon(a.coordinates)};ol.format.GeoJSON.writeGeometry_=function(a,b){var c=ol.format.GeoJSON.GEOMETRY_WRITERS_[a.getType()];goog.asserts.assert(goog.isDef(c),"geometryWriter should be defined");return c(ol.format.Feature.transformWithOptions(a,true,b),b)};ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_=function(a){return{type:"GeometryCollection",geometries:[]}};ol.format.GeoJSON.writeGeometryCollectionGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.GeometryCollection,"geometry should be an ol.geom.GeometryCollection");var c=goog.array.map(a.getGeometriesArray(),function(a){return ol.format.GeoJSON.writeGeometry_(a,b)});return{type:"GeometryCollection",geometries:c}};ol.format.GeoJSON.writeLineStringGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.LineString,"geometry should be an ol.geom.LineString");return{type:"LineString",coordinates:a.getCoordinates()}};ol.format.GeoJSON.writeMultiLineStringGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");return{type:"MultiLineString",coordinates:a.getCoordinates()}};ol.format.GeoJSON.writeMultiPointGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.MultiPoint,"geometry should be an ol.geom.MultiPoint");return{type:"MultiPoint",coordinates:a.getCoordinates()}};ol.format.GeoJSON.writeMultiPolygonGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");var c;if(goog.isDef(b)){c=b.rightHanded}return{type:"MultiPolygon",coordinates:a.getCoordinates(c)}};ol.format.GeoJSON.writePointGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.Point,"geometry should be an ol.geom.Point");return{type:"Point",coordinates:a.getCoordinates()}};ol.format.GeoJSON.writePolygonGeometry_=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");var c;if(goog.isDef(b)){c=b.rightHanded}return{type:"Polygon",coordinates:a.getCoordinates(c)}};ol.format.GeoJSON.GEOMETRY_READERS_={Point:ol.format.GeoJSON.readPointGeometry_,LineString:ol.format.GeoJSON.readLineStringGeometry_,Polygon:ol.format.GeoJSON.readPolygonGeometry_,MultiPoint:ol.format.GeoJSON.readMultiPointGeometry_,MultiLineString:ol.format.GeoJSON.readMultiLineStringGeometry_,MultiPolygon:ol.format.GeoJSON.readMultiPolygonGeometry_,GeometryCollection:ol.format.GeoJSON.readGeometryCollectionGeometry_};ol.format.GeoJSON.GEOMETRY_WRITERS_={Point:ol.format.GeoJSON.writePointGeometry_,LineString:ol.format.GeoJSON.writeLineStringGeometry_,Polygon:ol.format.GeoJSON.writePolygonGeometry_,MultiPoint:ol.format.GeoJSON.writeMultiPointGeometry_,MultiLineString:ol.format.GeoJSON.writeMultiLineStringGeometry_,MultiPolygon:ol.format.GeoJSON.writeMultiPolygonGeometry_,GeometryCollection:ol.format.GeoJSON.writeGeometryCollectionGeometry_,Circle:ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_};ol.format.GeoJSON.prototype.getExtensions=function(){return ol.format.GeoJSON.EXTENSIONS_};ol.format.GeoJSON.prototype.readFeature;ol.format.GeoJSON.prototype.readFeatures;ol.format.GeoJSON.prototype.readFeatureFromObject=function(a,b){var c=a;goog.asserts.assert(c.type=="Feature","geoJSONFeature.type should be Feature");var d=ol.format.GeoJSON.readGeometry_(c.geometry,b);var e=new ol.Feature;if(goog.isDef(this.geometryName_)){e.setGeometryName(this.geometryName_)}e.setGeometry(d);if(goog.isDef(c.id)){e.setId(c.id)}if(goog.isDef(c.properties)){e.setProperties(c.properties)}return e};ol.format.GeoJSON.prototype.readFeaturesFromObject=function(a,b){var c=a;if(c.type=="Feature"){return[this.readFeatureFromObject(a,b)]}else if(c.type=="FeatureCollection"){var d=a;var e=[];var f=d.features;var g,h;for(g=0,h=f.length;g<h;++g){e.push(this.readFeatureFromObject(f[g],b))}return e}else{goog.asserts.fail("Unknown geoJSONObject.type: "+c.type);return[]}};ol.format.GeoJSON.prototype.readGeometry;ol.format.GeoJSON.prototype.readGeometryFromObject=function(a,b){return ol.format.GeoJSON.readGeometry_(a,b)};ol.format.GeoJSON.prototype.readProjection;ol.format.GeoJSON.prototype.readProjectionFromObject=function(a){var b=a;var c=b.crs;if(goog.isDefAndNotNull(c)){if(c.type=="name"){return ol.proj.get(c.properties.name)}else if(c.type=="EPSG"){return ol.proj.get("EPSG:"+c.properties.code)}else{goog.asserts.fail("Unknown crs.type: "+c.type);return null}}else{return this.defaultDataProjection}};ol.format.GeoJSON.prototype.writeFeature;ol.format.GeoJSON.prototype.writeFeatureObject=function(a,b){b=this.adaptOptions(b);var c={type:"Feature"};var d=a.getId();if(goog.isDefAndNotNull(d)){c["id"]=d}var e=a.getGeometry();if(goog.isDefAndNotNull(e)){c["geometry"]=ol.format.GeoJSON.writeGeometry_(e,b)}else{c["geometry"]=null}var f=a.getProperties();goog.object.remove(f,a.getGeometryName());if(!goog.object.isEmpty(f)){c["properties"]=f}else{c["properties"]=null}return c};ol.format.GeoJSON.prototype.writeFeatures;ol.format.GeoJSON.prototype.writeFeaturesObject=function(a,b){b=this.adaptOptions(b);var c=[];var d,e;for(d=0,e=a.length;d<e;++d){c.push(this.writeFeatureObject(a[d],b))}return{type:"FeatureCollection",features:c}};ol.format.GeoJSON.prototype.writeGeometry;ol.format.GeoJSON.prototype.writeGeometryObject=function(a,b){return ol.format.GeoJSON.writeGeometry_(a,this.adaptOptions(b))};goog.provide("ol.format.XMLFeature");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.dom.xml");goog.require("ol.format.Feature");goog.require("ol.format.FormatType");goog.require("ol.proj");goog.require("ol.xml");ol.format.XMLFeature=function(){goog.base(this)};goog.inherits(ol.format.XMLFeature,ol.format.Feature);ol.format.XMLFeature.prototype.getType=function(){return ol.format.FormatType.XML};ol.format.XMLFeature.prototype.readFeature=function(a,b){if(ol.xml.isDocument(a)){return this.readFeatureFromDocument(a,b)}else if(ol.xml.isNode(a)){return this.readFeatureFromNode(a,b)}else if(goog.isString(a)){var c=ol.xml.parse(a);return this.readFeatureFromDocument(c,b)}else{goog.asserts.fail("Unknown source type");return null}};ol.format.XMLFeature.prototype.readFeatureFromDocument=function(a,b){var c=this.readFeaturesFromDocument(a,b);if(c.length>0){return c[0]}else{return null}};ol.format.XMLFeature.prototype.readFeatureFromNode=goog.abstractMethod;ol.format.XMLFeature.prototype.readFeatures=function(a,b){if(ol.xml.isDocument(a)){return this.readFeaturesFromDocument(a,b)}else if(ol.xml.isNode(a)){return this.readFeaturesFromNode(a,b)}else if(goog.isString(a)){var c=ol.xml.parse(a);return this.readFeaturesFromDocument(c,b)}else{goog.asserts.fail("Unknown source type");return[]}};ol.format.XMLFeature.prototype.readFeaturesFromDocument=function(a,b){var c=[];var d;for(d=a.firstChild;!goog.isNull(d);d=d.nextSibling){if(d.nodeType==goog.dom.NodeType.ELEMENT){goog.array.extend(c,this.readFeaturesFromNode(d,b))}}return c};ol.format.XMLFeature.prototype.readFeaturesFromNode=goog.abstractMethod;ol.format.XMLFeature.prototype.readGeometry=function(a,b){if(ol.xml.isDocument(a)){return this.readGeometryFromDocument(a,b)}else if(ol.xml.isNode(a)){return this.readGeometryFromNode(a,b)}else if(goog.isString(a)){var c=ol.xml.parse(a);return this.readGeometryFromDocument(c,b)}else{goog.asserts.fail("Unknown source type");return null}};ol.format.XMLFeature.prototype.readGeometryFromDocument=goog.abstractMethod;ol.format.XMLFeature.prototype.readGeometryFromNode=goog.abstractMethod;ol.format.XMLFeature.prototype.readProjection=function(a){if(ol.xml.isDocument(a)){return this.readProjectionFromDocument(a)}else if(ol.xml.isNode(a)){return this.readProjectionFromNode(a)}else if(goog.isString(a)){var b=ol.xml.parse(a);return this.readProjectionFromDocument(b)}else{goog.asserts.fail("Unknown source type");return null}};ol.format.XMLFeature.prototype.readProjectionFromDocument=function(a){return this.defaultDataProjection};ol.format.XMLFeature.prototype.readProjectionFromNode=function(a){return this.defaultDataProjection};ol.format.XMLFeature.prototype.writeFeature=function(a,b){var c=this.writeFeatureNode(a,b);goog.asserts.assert(c.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize(c)};ol.format.XMLFeature.prototype.writeFeatureNode=goog.abstractMethod;ol.format.XMLFeature.prototype.writeFeatures=function(a,b){var c=this.writeFeaturesNode(a,b);goog.asserts.assert(c.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize(c)};ol.format.XMLFeature.prototype.writeFeaturesNode=goog.abstractMethod;ol.format.XMLFeature.prototype.writeGeometry=function(a,b){var c=this.writeGeometryNode(a,b);goog.asserts.assert(c.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize(c)};ol.format.XMLFeature.prototype.writeGeometryNode=goog.abstractMethod;goog.provide("ol.format.GMLBase");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("goog.string");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");goog.require("ol.xml");ol.format.GMLBase=function(a){var b=goog.isDef(a)?a:{};this.featureType=b.featureType;this.featureNS=b.featureNS;this.srsName=b.srsName;this.schemaLocation="";this.FEATURE_COLLECTION_PARSERS={};this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]={featureMember:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal),featureMembers:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal)};goog.base(this)};goog.inherits(ol.format.GMLBase,ol.format.XMLFeature);ol.format.GMLBase.GMLNS="http://www.opengis.net/gml";ol.format.GMLBase.prototype.readFeaturesInternal=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var c=ol.xml.getLocalName(a);var d;if(c=="FeatureCollection"){if(a.namespaceURI==="http://www.opengis.net/wfs"){d=ol.xml.pushParseAndPop([],this.FEATURE_COLLECTION_PARSERS,a,b,this)}else{d=ol.xml.pushParseAndPop(null,this.FEATURE_COLLECTION_PARSERS,a,b,this)}}else if(c=="featureMembers"||c=="featureMember"){var e=b[0];goog.asserts.assert(goog.isObject(e),"context should be an Object");var f=e["featureType"];var g=e["featureNS"];var h,i,j="p",k="p0";if(!goog.isDef(f)&&goog.isDefAndNotNull(a.childNodes)){f=[],g={};for(h=0,i=a.childNodes.length;h<i;++h){var l=a.childNodes[h];if(l.nodeType===1){var m=l.nodeName.split(":").pop();if(goog.array.indexOf(f,m)===-1){var n;if(!goog.object.contains(g,l.namespaceURI)){n=j+goog.object.getCount(g);g[n]=l.namespaceURI}else{n=goog.object.findKey(g,function(a){return a===l.namespaceURI})}f.push(n+":"+m)}}}e["featureType"]=f;e["featureNS"]=g}if(goog.isString(g)){var o=g;g={};g[k]=o}var p={};var q=goog.isArray(f)?f:[f];for(var r in g){var s={};for(h=0,i=q.length;h<i;++h){var t=q[h].indexOf(":")===-1?k:q[h].split(":")[0];if(t===r){s[q[h].split(":").pop()]=c=="featureMembers"?ol.xml.makeArrayPusher(this.readFeatureElement,this):ol.xml.makeReplacer(this.readFeatureElement,this)}}p[g[r]]=s}d=ol.xml.pushParseAndPop([],p,a,b)}if(!goog.isDef(d)){d=[]}return d};ol.format.GMLBase.prototype.readGeometryElement=function(a,b){var c=b[0];goog.asserts.assert(goog.isObject(c),"context should be an Object");c["srsName"]=a.firstElementChild.getAttribute("srsName");var d=ol.xml.pushParseAndPop(null,this.GEOMETRY_PARSERS_,a,b,this);if(goog.isDefAndNotNull(d)){return ol.format.Feature.transformWithOptions(d,false,c)}else{
return undefined}};ol.format.GMLBase.prototype.readFeatureElement=function(a,b){var c;var d=a.getAttribute("fid")||ol.xml.getAttributeNS(a,ol.format.GMLBase.GMLNS,"id");var e={},f;for(c=a.firstElementChild;!goog.isNull(c);c=c.nextElementSibling){var g=ol.xml.getLocalName(c);if(c.childNodes.length===0||c.childNodes.length===1&&(c.firstChild.nodeType===3||c.firstChild.nodeType===4)){var h=ol.xml.getAllTextContent(c,false);if(goog.string.isEmpty(h)){h=undefined}e[g]=h}else{if(g!=="boundedBy"){f=g}e[g]=this.readGeometryElement(c,b)}}var i=new ol.Feature(e);if(goog.isDef(f)){i.setGeometryName(f)}if(d){i.setId(d)}return i};ol.format.GMLBase.prototype.readPoint=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Point","localName should be Point");var c=this.readFlatCoordinatesFromNode_(a,b);if(goog.isDefAndNotNull(c)){var d=new ol.geom.Point(null);goog.asserts.assert(c.length==3,"flatCoordinates should have a length of 3");d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,c);return d}};ol.format.GMLBase.prototype.readMultiPoint=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="MultiPoint","localName should be MultiPoint");var c=ol.xml.pushParseAndPop([],this.MULTIPOINT_PARSERS_,a,b,this);if(goog.isDef(c)){return new ol.geom.MultiPoint(c)}else{return undefined}};ol.format.GMLBase.prototype.readMultiLineString=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="MultiLineString","localName should be MultiLineString");var c=ol.xml.pushParseAndPop([],this.MULTILINESTRING_PARSERS_,a,b,this);if(goog.isDef(c)){var d=new ol.geom.MultiLineString(null);d.setLineStrings(c);return d}else{return undefined}};ol.format.GMLBase.prototype.readMultiPolygon=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="MultiPolygon","localName should be MultiPolygon");var c=ol.xml.pushParseAndPop([],this.MULTIPOLYGON_PARSERS_,a,b,this);if(goog.isDef(c)){var d=new ol.geom.MultiPolygon(null);d.setPolygons(c);return d}else{return undefined}};ol.format.GMLBase.prototype.pointMemberParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="pointMember"||a.localName=="pointMembers","localName should be pointMember or pointMembers");ol.xml.parseNode(this.POINTMEMBER_PARSERS_,a,b,this)};ol.format.GMLBase.prototype.lineStringMemberParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="lineStringMember"||a.localName=="lineStringMembers","localName should be LineStringMember or LineStringMembers");ol.xml.parseNode(this.LINESTRINGMEMBER_PARSERS_,a,b,this)};ol.format.GMLBase.prototype.polygonMemberParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="polygonMember"||a.localName=="polygonMembers","localName should be polygonMember or polygonMembers");ol.xml.parseNode(this.POLYGONMEMBER_PARSERS_,a,b,this)};ol.format.GMLBase.prototype.readLineString=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="LineString","localName should be LineString");var c=this.readFlatCoordinatesFromNode_(a,b);if(goog.isDefAndNotNull(c)){var d=new ol.geom.LineString(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,c);return d}else{return undefined}};ol.format.GMLBase.prototype.readFlatLinearRing_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="LinearRing","localName should be LinearRing");var c=ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,a,b,this);if(goog.isDefAndNotNull(c)){return c}else{return undefined}};ol.format.GMLBase.prototype.readLinearRing=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="LinearRing","localName should be LinearRing");var c=this.readFlatCoordinatesFromNode_(a,b);if(goog.isDef(c)){var d=new ol.geom.LinearRing(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,c);return d}else{return undefined}};ol.format.GMLBase.prototype.readPolygon=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Polygon","localName should be Polygon");var c=ol.xml.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,a,b,this);if(goog.isDef(c)&&!goog.isNull(c[0])){var d=new ol.geom.Polygon(null);var e=c[0];var f=[e.length];var g,h;for(g=1,h=c.length;g<h;++g){goog.array.extend(e,c[g]);f.push(e.length)}d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,e,f);return d}else{return undefined}};ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,a,b,this)};ol.format.GMLBase.prototype.MULTIPOINT_PARSERS_=Object({"http://www.opengis.net/gml":{pointMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_),pointMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_)}});ol.format.GMLBase.prototype.MULTILINESTRING_PARSERS_=Object({"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_),lineStringMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_)}});ol.format.GMLBase.prototype.MULTIPOLYGON_PARSERS_=Object({"http://www.opengis.net/gml":{polygonMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_),polygonMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_)}});ol.format.GMLBase.prototype.POINTMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{Point:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_)}});ol.format.GMLBase.prototype.LINESTRINGMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{LineString:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString)}});ol.format.GMLBase.prototype.POLYGONMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{Polygon:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon)}});ol.format.GMLBase.prototype.RING_PARSERS=Object({"http://www.opengis.net/gml":{LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFlatLinearRing_)}});ol.format.GMLBase.prototype.readGeometryFromNode=function(a,b){var c=this.readGeometryElement(a,[this.getReadOptions(a,goog.isDef(b)?b:{})]);return goog.isDef(c)?c:null};ol.format.GMLBase.prototype.readFeatures;ol.format.GMLBase.prototype.readFeaturesFromNode=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};if(goog.isDef(b)){goog.object.extend(c,this.getReadOptions(a,b))}return this.readFeaturesInternal(a,[c])};ol.format.GMLBase.prototype.readProjectionFromNode=function(a){return ol.proj.get(goog.isDef(this.srsName_)?this.srsName_:a.firstElementChild.getAttribute("srsName"))};goog.provide("ol.format.XSD");goog.require("goog.asserts");goog.require("goog.string");goog.require("ol.xml");ol.format.XSD.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema";ol.format.XSD.readBoolean=function(a){var b=ol.xml.getAllTextContent(a,false);return ol.format.XSD.readBooleanString(b)};ol.format.XSD.readBooleanString=function(a){var b=/^\s*(true|1)|(false|0)\s*$/.exec(a);if(b){return goog.isDef(b[1])||false}else{return undefined}};ol.format.XSD.readDateTime=function(a){var b=ol.xml.getAllTextContent(a,false);var c=/^\s*(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?))\s*$/;var d=c.exec(b);if(d){var e=parseInt(d[1],10);var f=parseInt(d[2],10)-1;var g=parseInt(d[3],10);var h=parseInt(d[4],10);var i=parseInt(d[5],10);var j=parseInt(d[6],10);var k=Date.UTC(e,f,g,h,i,j)/1e3;if(d[7]!="Z"){var l=d[8]=="-"?-1:1;k+=l*60*parseInt(d[9],10);if(goog.isDef(d[10])){k+=l*60*60*parseInt(d[10],10)}}return k}else{return undefined}};ol.format.XSD.readDecimal=function(a){var b=ol.xml.getAllTextContent(a,false);return ol.format.XSD.readDecimalString(b)};ol.format.XSD.readDecimalString=function(a){var b=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a);if(b){return parseFloat(b[1])}else{return undefined}};ol.format.XSD.readNonNegativeInteger=function(a){var b=ol.xml.getAllTextContent(a,false);return ol.format.XSD.readNonNegativeIntegerString(b)};ol.format.XSD.readNonNegativeIntegerString=function(a){var b=/^\s*(\d+)\s*$/.exec(a);if(b){return parseInt(b[1],10)}else{return undefined}};ol.format.XSD.readString=function(a){var b=ol.xml.getAllTextContent(a,false);return goog.string.trim(b)};ol.format.XSD.writeBooleanTextNode=function(a,b){ol.format.XSD.writeStringTextNode(a,b?"1":"0")};ol.format.XSD.writeDateTimeTextNode=function(a,b){var c=new Date(b*1e3);var d=c.getUTCFullYear()+"-"+goog.string.padNumber(c.getUTCMonth()+1,2)+"-"+goog.string.padNumber(c.getUTCDate(),2)+"T"+goog.string.padNumber(c.getUTCHours(),2)+":"+goog.string.padNumber(c.getUTCMinutes(),2)+":"+goog.string.padNumber(c.getUTCSeconds(),2)+"Z";a.appendChild(ol.xml.DOCUMENT.createTextNode(d))};ol.format.XSD.writeDecimalTextNode=function(a,b){var c=b.toPrecision();a.appendChild(ol.xml.DOCUMENT.createTextNode(c))};ol.format.XSD.writeNonNegativeIntegerTextNode=function(a,b){goog.asserts.assert(b>=0,"value should be more than 0");goog.asserts.assert(b==(b|0),"value should be an integer value");var c=b.toString();a.appendChild(ol.xml.DOCUMENT.createTextNode(c))};ol.format.XSD.writeStringTextNode=function(a,b){a.appendChild(ol.xml.DOCUMENT.createTextNode(b))};goog.provide("ol.format.GML2");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.extent");goog.require("ol.format.GMLBase");goog.require("ol.format.XSD");goog.require("ol.proj");goog.require("ol.xml");ol.format.GML2=function(a){var b=goog.isDef(a)?a:{};goog.base(this,b);this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]["featureMember"]=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);this.schemaLocation=goog.isDef(b.schemaLocation)?b.schemaLocation:ol.format.GML2.schemaLocation_};goog.inherits(ol.format.GML2,ol.format.GMLBase);ol.format.GML2.schemaLocation_=ol.format.GMLBase.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd";ol.format.GML2.prototype.readFlatCoordinates_=function(a,b){var c=ol.xml.getAllTextContent(a,false).replace(/^\s*|\s*$/g,"");var d=b[0];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];var f=a.parentNode.getAttribute("srsDimension");var g="enu";if(!goog.isNull(e)){var h=ol.proj.get(e);g=h.getAxisOrientation()}var i=c.split(/[\s,]+/);var j=2;if(!goog.isNull(a.getAttribute("srsDimension"))){j=ol.format.XSD.readNonNegativeIntegerString(a.getAttribute("srsDimension"))}else if(!goog.isNull(a.getAttribute("dimension"))){j=ol.format.XSD.readNonNegativeIntegerString(a.getAttribute("dimension"))}else if(!goog.isNull(f)){j=ol.format.XSD.readNonNegativeIntegerString(f)}var k,l,m;var n=[];for(var o=0,p=i.length;o<p;o+=j){k=parseFloat(i[o]);l=parseFloat(i[o+1]);m=j===3?parseFloat(i[o+2]):0;if(g.substr(0,2)==="en"){n.push(k,l,m)}else{n.push(l,k,m)}}return n};ol.format.GML2.prototype.readBox_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Box","localName should be Box");var c=ol.xml.pushParseAndPop([null],this.BOX_PARSERS_,a,b,this);return ol.extent.createOrUpdate(c[1][0],c[1][1],c[1][3],c[1][4])};ol.format.GML2.prototype.innerBoundaryIsParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="innerBoundaryIs","localName should be innerBoundaryIs");var c=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,a,b,this);if(goog.isDef(c)){var d=b[b.length-1];goog.asserts.assert(goog.isArray(d),"flatLinearRings should be an array");goog.asserts.assert(d.length>0,"flatLinearRings should have an array length larger than 0");d.push(c)}};ol.format.GML2.prototype.outerBoundaryIsParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="outerBoundaryIs","localName should be outerBoundaryIs");var c=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,a,b,this);if(goog.isDef(c)){var d=b[b.length-1];goog.asserts.assert(goog.isArray(d),"flatLinearRings should be an array");goog.asserts.assert(d.length>0,"flatLinearRings should have an array length larger than 0");d[0]=c}};ol.format.GML2.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_=Object({"http://www.opengis.net/gml":{coordinates:ol.xml.makeReplacer(ol.format.GML2.prototype.readFlatCoordinates_)}});ol.format.GML2.prototype.FLAT_LINEAR_RINGS_PARSERS_=Object({"http://www.opengis.net/gml":{innerBoundaryIs:ol.format.GML2.prototype.innerBoundaryIsParser_,outerBoundaryIs:ol.format.GML2.prototype.outerBoundaryIsParser_}});ol.format.GML2.prototype.BOX_PARSERS_=Object({"http://www.opengis.net/gml":{coordinates:ol.xml.makeArrayPusher(ol.format.GML2.prototype.readFlatCoordinates_)}});ol.format.GML2.prototype.GEOMETRY_PARSERS_=Object({"http://www.opengis.net/gml":{Point:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),MultiPoint:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),LineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),MultiLineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),Polygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),MultiPolygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),Box:ol.xml.makeReplacer(ol.format.GML2.prototype.readBox_)}});goog.provide("ol.format.GML");goog.provide("ol.format.GML3");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.extent");goog.require("ol.format.Feature");goog.require("ol.format.GMLBase");goog.require("ol.format.XSD");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");goog.require("ol.xml");ol.format.GML3=function(a){var b=goog.isDef(a)?a:{};goog.base(this,b);this.surface_=goog.isDef(b.surface)?b.surface:false;this.curve_=goog.isDef(b.curve)?b.curve:false;this.multiCurve_=goog.isDef(b.multiCurve)?b.multiCurve:true;this.multiSurface_=goog.isDef(b.multiSurface)?b.multiSurface:true;this.schemaLocation=goog.isDef(b.schemaLocation)?b.schemaLocation:ol.format.GML3.schemaLocation_};goog.inherits(ol.format.GML3,ol.format.GMLBase);ol.format.GML3.schemaLocation_=ol.format.GMLBase.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/"+"1.0.0/gmlsf.xsd";ol.format.GML3.prototype.readMultiCurve_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="MultiCurve","localName should be MultiCurve");var c=ol.xml.pushParseAndPop([],this.MULTICURVE_PARSERS_,a,b,this);if(goog.isDef(c)){var d=new ol.geom.MultiLineString(null);d.setLineStrings(c);return d}else{return undefined}};ol.format.GML3.prototype.readMultiSurface_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="MultiSurface","localName should be MultiSurface");var c=ol.xml.pushParseAndPop([],this.MULTISURFACE_PARSERS_,a,b,this);if(goog.isDef(c)){var d=new ol.geom.MultiPolygon(null);d.setPolygons(c);return d}else{return undefined}};ol.format.GML3.prototype.curveMemberParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="curveMember"||a.localName=="curveMembers","localName should be curveMember or curveMembers");ol.xml.parseNode(this.CURVEMEMBER_PARSERS_,a,b,this)};ol.format.GML3.prototype.surfaceMemberParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="surfaceMember"||a.localName=="surfaceMembers","localName should be surfaceMember or surfaceMembers");ol.xml.parseNode(this.SURFACEMEMBER_PARSERS_,a,b,this)};ol.format.GML3.prototype.readPatch_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="patches","localName should be patches");return ol.xml.pushParseAndPop([null],this.PATCHES_PARSERS_,a,b,this)};ol.format.GML3.prototype.readSegment_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="segments","localName should be segments");return ol.xml.pushParseAndPop([null],this.SEGMENTS_PARSERS_,a,b,this)};ol.format.GML3.prototype.readPolygonPatch_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"npde.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="PolygonPatch","localName should be PolygonPatch");return ol.xml.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,a,b,this)};ol.format.GML3.prototype.readLineStringSegment_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="LineStringSegment","localName should be LineStringSegment");return ol.xml.pushParseAndPop([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS_,a,b,this)};ol.format.GML3.prototype.interiorParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="interior","localName should be interior");var c=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,a,b,this);if(goog.isDef(c)){var d=b[b.length-1];goog.asserts.assert(goog.isArray(d),"flatLinearRings should be an array");goog.asserts.assert(d.length>0,"flatLinearRings should have an array length of 1 or more");d.push(c)}};ol.format.GML3.prototype.exteriorParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="exterior","localName should be exterior");var c=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,a,b,this);if(goog.isDef(c)){var d=b[b.length-1];goog.asserts.assert(goog.isArray(d),"flatLinearRings should be an array");goog.asserts.assert(d.length>0,"flatLinearRings should have an array length of 1 or more");d[0]=c}};ol.format.GML3.prototype.readSurface_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Surface","localName should be Surface");var c=ol.xml.pushParseAndPop([null],this.SURFACE_PARSERS_,a,b,this);if(goog.isDef(c)&&!goog.isNull(c[0])){var d=new ol.geom.Polygon(null);var e=c[0];var f=[e.length];var g,h;for(g=1,h=c.length;g<h;++g){goog.array.extend(e,c[g]);f.push(e.length)}d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,e,f);return d}else{return undefined}};ol.format.GML3.prototype.readCurve_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Curve","localName should be Curve");var c=ol.xml.pushParseAndPop([null],this.CURVE_PARSERS_,a,b,this);if(goog.isDef(c)){var d=new ol.geom.LineString(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,c);return d}else{return undefined}};ol.format.GML3.prototype.readEnvelope_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Envelope","localName should be Envelope");var c=ol.xml.pushParseAndPop([null],this.ENVELOPE_PARSERS_,a,b,this);return ol.extent.createOrUpdate(c[1][0],c[1][1],c[2][0],c[2][1])};ol.format.GML3.prototype.readFlatPos_=function(a,b){var c=ol.xml.getAllTextContent(a,false);var d=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;var e=[];var f;while(f=d.exec(c)){e.push(parseFloat(f[1]));c=c.substr(f[0].length)}if(c!==""){return undefined}var g=b[0];goog.asserts.assert(goog.isObject(g),"context should be an Object");var h=g["srsName"];var i="enu";if(!goog.isNull(h)){var j=ol.proj.get(h);i=j.getAxisOrientation()}if(i==="neu"){var k,l;for(k=0,l=e.length;k<l;k+=3){var m=e[k];var n=e[k+1];e[k]=n;e[k+1]=m}}var o=e.length;if(o==2){e.push(0)}if(o===0){return undefined}return e};ol.format.GML3.prototype.readFlatPosList_=function(a,b){var c=ol.xml.getAllTextContent(a,false).replace(/^\s*|\s*$/g,"");var d=b[0];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];var f=a.parentNode.getAttribute("srsDimension");var g="enu";if(!goog.isNull(e)){var h=ol.proj.get(e);g=h.getAxisOrientation()}var i=c.split(/\s+/);var j=2;if(!goog.isNull(a.getAttribute("srsDimension"))){j=ol.format.XSD.readNonNegativeIntegerString(a.getAttribute("srsDimension"))}else if(!goog.isNull(a.getAttribute("dimension"))){j=ol.format.XSD.readNonNegativeIntegerString(a.getAttribute("dimension"))}else if(!goog.isNull(f)){j=ol.format.XSD.readNonNegativeIntegerString(f)}var k,l,m;var n=[];for(var o=0,p=i.length;o<p;o+=j){k=parseFloat(i[o]);l=parseFloat(i[o+1]);m=j===3?parseFloat(i[o+2]):0;if(g.substr(0,2)==="en"){n.push(k,l,m)}else{n.push(l,k,m)}}return n};ol.format.GML3.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_=Object({"http://www.opengis.net/gml":{pos:ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPos_),posList:ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPosList_)}});ol.format.GML3.prototype.FLAT_LINEAR_RINGS_PARSERS_=Object({"http://www.opengis.net/gml":{interior:ol.format.GML3.prototype.interiorParser_,exterior:ol.format.GML3.prototype.exteriorParser_}});ol.format.GML3.prototype.GEOMETRY_PARSERS_=Object({"http://www.opengis.net/gml":{Point:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),MultiPoint:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),LineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),MultiLineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),Polygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),MultiPolygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),Surface:ol.xml.makeReplacer(ol.format.GML3.prototype.readSurface_),MultiSurface:ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiSurface_),Curve:ol.xml.makeReplacer(ol.format.GML3.prototype.readCurve_),MultiCurve:ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiCurve_),Envelope:ol.xml.makeReplacer(ol.format.GML3.prototype.readEnvelope_)}});ol.format.GML3.prototype.MULTICURVE_PARSERS_=Object({"http://www.opengis.net/gml":{curveMember:ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_),curveMembers:ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_)}});ol.format.GML3.prototype.MULTISURFACE_PARSERS_=Object({"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_),surfaceMembers:ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_)}});ol.format.GML3.prototype.CURVEMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{LineString:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString),Curve:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readCurve_)}});ol.format.GML3.prototype.SURFACEMEMBER_PARSERS_=Object({"http://www.opengis.net/gml":{Polygon:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon),Surface:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readSurface_)}});ol.format.GML3.prototype.SURFACE_PARSERS_=Object({"http://www.opengis.net/gml":{patches:ol.xml.makeReplacer(ol.format.GML3.prototype.readPatch_)}});ol.format.GML3.prototype.CURVE_PARSERS_=Object({"http://www.opengis.net/gml":{segments:ol.xml.makeReplacer(ol.format.GML3.prototype.readSegment_)}});ol.format.GML3.prototype.ENVELOPE_PARSERS_=Object({"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_),upperCorner:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_)}});ol.format.GML3.prototype.PATCHES_PARSERS_=Object({"http://www.opengis.net/gml":{PolygonPatch:ol.xml.makeReplacer(ol.format.GML3.prototype.readPolygonPatch_)}});ol.format.GML3.prototype.SEGMENTS_PARSERS_=Object({"http://www.opengis.net/gml":{LineStringSegment:ol.xml.makeReplacer(ol.format.GML3.prototype.readLineStringSegment_)}});ol.format.GML3.prototype.writePos_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];var f="enu";if(goog.isDefAndNotNull(e)){f=ol.proj.get(e).getAxisOrientation()}var g=b.getCoordinates();var h;if(f.substr(0,2)==="en"){h=g[0]+" "+g[1]}else{h=g[1]+" "+g[0]}ol.format.XSD.writeStringTextNode(a,h)};ol.format.GML3.prototype.getCoords_=function(a,b){var c="enu";if(goog.isDefAndNotNull(b)){c=ol.proj.get(b).getAxisOrientation()}return c.substr(0,2)==="en"?a[0]+" "+a[1]:a[1]+" "+a[0]};ol.format.GML3.prototype.writePosList_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];var f=b.getCoordinates();var g=f.length;var h=new Array(g);var i;for(var j=0;j<g;++j){i=f[j];h[j]=this.getCoords_(i,e)}ol.format.XSD.writeStringTextNode(a,h.join(" "))};ol.format.GML3.prototype.writePoint_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];if(goog.isDefAndNotNull(e)){a.setAttribute("srsName",e)}var f=ol.xml.createElementNS(a.namespaceURI,"pos");a.appendChild(f);this.writePos_(f,b,c)};ol.format.GML3.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),upperCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};ol.format.GML3.prototype.writeEnvelope=function(a,b,c){goog.asserts.assert(b.length==4,"extent should have 4 items");var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];if(goog.isDef(e)){a.setAttribute("srsName",e)}var f=["lowerCorner","upperCorner"];var g=[b[0]+" "+b[1],b[2]+" "+b[3]];ol.xml.pushSerializeAndPop({node:a},ol.format.GML3.ENVELOPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,g,c,f,this)};ol.format.GML3.prototype.writeLinearRing_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];if(goog.isDefAndNotNull(e)){a.setAttribute("srsName",e)}var f=ol.xml.createElementNS(a.namespaceURI,"posList");a.appendChild(f);this.writePosList_(f,b,c)};ol.format.GML3.prototype.RING_NODE_FACTORY_=function(a,b,c){var d=b[b.length-1];var e=d.node;goog.asserts.assert(goog.isObject(d),"context should be an Object");var f=d["exteriorWritten"];if(!goog.isDef(f)){d["exteriorWritten"]=true}return ol.xml.createElementNS(e.namespaceURI,goog.isDef(f)?"interior":"exterior")};ol.format.GML3.prototype.writeSurfaceOrPolygon_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];if(a.nodeName!=="PolygonPatch"&&goog.isDefAndNotNull(e)){a.setAttribute("srsName",e)}if(a.nodeName==="Polygon"||a.nodeName==="PolygonPatch"){var f=b.getLinearRings();ol.xml.pushSerializeAndPop({node:a,srsName:e},ol.format.GML3.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,f,c,undefined,this)}else if(a.nodeName==="Surface"){var g=ol.xml.createElementNS(a.namespaceURI,"patches");a.appendChild(g);this.writeSurfacePatches_(g,b,c)}};ol.format.GML3.prototype.writeCurveOrLineString_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];if(a.nodeName!=="LineStringSegment"&&goog.isDefAndNotNull(e)){a.setAttribute("srsName",e)}if(a.nodeName==="LineString"||a.nodeName==="LineStringSegment"){var f=ol.xml.createElementNS(a.namespaceURI,"posList");a.appendChild(f);this.writePosList_(f,b,c)}else if(a.nodeName==="Curve"){var g=ol.xml.createElementNS(a.namespaceURI,"segments");a.appendChild(g);this.writeCurveSegments_(g,b,c)}};ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];var f=d["surface"];if(goog.isDefAndNotNull(e)){a.setAttribute("srsName",e)}var g=b.getPolygons();ol.xml.pushSerializeAndPop({node:a,srsName:e,surface:f},ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,g,c,undefined,this)};ol.format.GML3.prototype.writeMultiPoint_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];if(goog.isDefAndNotNull(e)){a.setAttribute("srsName",e)}var f=b.getPoints();ol.xml.pushSerializeAndPop({node:a,srsName:e},ol.format.GML3.POINTMEMBER_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("pointMember"),f,c,undefined,this)};ol.format.GML3.prototype.writeMultiCurveOrLineString_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["srsName"];var f=d["curve"];if(goog.isDefAndNotNull(e)){a.setAttribute("srsName",e)}var g=b.getLineStrings();ol.xml.pushSerializeAndPop({node:a,srsName:e,curve:f},ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,g,c,undefined,this)};ol.format.GML3.prototype.writeRing_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,"LinearRing");a.appendChild(d);this.writeLinearRing_(d,b,c)};ol.format.GML3.prototype.writeSurfaceOrPolygonMember_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=this.GEOMETRY_NODE_FACTORY_(b,c);if(goog.isDef(e)){a.appendChild(e);this.writeSurfaceOrPolygon_(e,b,c)}};ol.format.GML3.prototype.writePointMember_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,"Point");a.appendChild(d);this.writePoint_(d,b,c)};ol.format.GML3.prototype.writeLineStringOrCurveMember_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=this.GEOMETRY_NODE_FACTORY_(b,c);if(goog.isDef(e)){a.appendChild(e);this.writeCurveOrLineString_(e,b,c)}};ol.format.GML3.prototype.writeSurfacePatches_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,"PolygonPatch");a.appendChild(d);this.writeSurfaceOrPolygon_(d,b,c)};ol.format.GML3.prototype.writeCurveSegments_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,"LineStringSegment");a.appendChild(d);this.writeCurveOrLineString_(d,b,c)};ol.format.GML3.prototype.writeGeometryElement=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=goog.object.clone(d);e.node=a;var f;if(goog.isArray(b)){if(goog.isDef(d.dataProjection)){f=ol.proj.transformExtent(b,d.featureProjection,d.dataProjection)}else{f=b}}else{goog.asserts.assertInstanceof(b,ol.geom.Geometry,"geometry should be an ol.geom.Geometry");f=ol.format.Feature.transformWithOptions(b,true,d)}ol.xml.pushSerializeAndPop(e,ol.format.GML3.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[f],c,undefined,this)}
;ol.format.GML3.prototype.writeFeatureElement=function(a,b,c){var d=b.getId();if(goog.isDef(d)){a.setAttribute("fid",d)}var e=c[c.length-1];goog.asserts.assert(goog.isObject(e),"context should be an Object");var f=e["featureNS"];var g=b.getGeometryName();if(!goog.isDef(e.serializers)){e.serializers={};e.serializers[f]={}}var h=b.getProperties();var i=[],j=[];for(var k in h){var l=h[k];if(!goog.isNull(l)){i.push(k);j.push(l);if(k==g){if(!(k in e.serializers[f])){e.serializers[f][k]=ol.xml.makeChildAppender(this.writeGeometryElement,this)}}else{if(!(k in e.serializers[f])){e.serializers[f][k]=ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}}}}var m=goog.object.clone(e);m.node=a;ol.xml.pushSerializeAndPop(m,e.serializers,ol.xml.makeSimpleNodeFactory(undefined,f),j,c,i)};ol.format.GML3.prototype.writeFeatureMembers_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["featureType"];var f=d["featureNS"];var g={};g[f]={};g[f][e]=ol.xml.makeChildAppender(this.writeFeatureElement,this);var h=goog.object.clone(d);h.node=a;ol.xml.pushSerializeAndPop(h,g,ol.xml.makeSimpleNodeFactory(e,f),b,c)};ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_),polygonMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_)}};ol.format.GML3.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writePointMember_)}};ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_),curveMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_)}};ol.format.GML3.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_),interior:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_)}};ol.format.GML3.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),MultiCurve:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),Point:ol.xml.makeChildAppender(ol.format.GML3.prototype.writePoint_),MultiPoint:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiPoint_),LineString:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),MultiLineString:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),LinearRing:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLinearRing_),Polygon:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),MultiPolygon:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),Surface:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),MultiSurface:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),Envelope:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeEnvelope)}};ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};ol.format.GML3.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(a,b,c){var d=b[b.length-1].node;goog.asserts.assert(ol.xml.isNode(d),"parentNode should be a node");return ol.xml.createElementNS("http://www.opengis.net/gml",ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_[d.nodeName])};ol.format.GML3.prototype.GEOMETRY_NODE_FACTORY_=function(a,b,c){var d=b[b.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["multiSurface"];var f=d["surface"];var g=d["curve"];var h=d["multiCurve"];var i=b[b.length-1].node;goog.asserts.assert(ol.xml.isNode(i),"parentNode should be a node");var j;if(!goog.isArray(a)){goog.asserts.assertInstanceof(a,ol.geom.Geometry,"value should be an ol.geom.Geometry");j=a.getType();if(j==="MultiPolygon"&&e===true){j="MultiSurface"}else if(j==="Polygon"&&f===true){j="Surface"}else if(j==="LineString"&&g===true){j="Curve"}else if(j==="MultiLineString"&&h===true){j="MultiCurve"}}else{j="Envelope"}return ol.xml.createElementNS("http://www.opengis.net/gml",j)};ol.format.GML3.prototype.writeGeometryNode=function(a,b){b=this.adaptOptions(b);var c=ol.xml.createElementNS("http://www.opengis.net/gml","geom");var d={node:c,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};if(goog.isDef(b)){goog.object.extend(d,b)}this.writeGeometryElement(c,a,[d]);return c};ol.format.GML3.prototype.writeFeatures;ol.format.GML3.prototype.writeFeaturesNode=function(a,b){b=this.adaptOptions(b);var c=ol.xml.createElementNS("http://www.opengis.net/gml","featureMembers");ol.xml.setAttributeNS(c,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var d={srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};if(goog.isDef(b)){goog.object.extend(d,b)}this.writeFeatureMembers_(c,a,[d]);return c};ol.format.GML=ol.format.GML3;ol.format.GML.prototype.writeFeatures;ol.format.GML.prototype.writeFeaturesNode;goog.provide("ol.format.GPX");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.format.XSD");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.Point");goog.require("ol.proj");goog.require("ol.xml");ol.format.GPX=function(a){var b=goog.isDef(a)?a:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.readExtensions_=b.readExtensions};goog.inherits(ol.format.GPX,ol.format.XMLFeature);ol.format.GPX.NAMESPACE_URIS_=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];ol.format.GPX.appendCoordinate_=function(a,b,c){goog.asserts.assert(b.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");a.push(parseFloat(b.getAttribute("lon")),parseFloat(b.getAttribute("lat")));if(goog.object.containsKey(c,"ele")){a.push(c["ele"]);goog.object.remove(c,"ele")}else{a.push(0)}if(goog.object.containsKey(c,"time")){a.push(c["time"]);goog.object.remove(c,"time")}else{a.push(0)}return a};ol.format.GPX.parseLink_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="link","localName should be link");var c=b[b.length-1];var d=a.getAttribute("href");if(!goog.isNull(d)){c["link"]=d}ol.xml.parseNode(ol.format.GPX.LINK_PARSERS_,a,b)};ol.format.GPX.parseExtensions_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="extensions","localName should be extensions");var c=b[b.length-1];c["extensionsNode_"]=a};ol.format.GPX.parseRtePt_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="rtept","localName should be rtept");var c=ol.xml.pushParseAndPop({},ol.format.GPX.RTEPT_PARSERS_,a,b);if(goog.isDef(c)){var d=b[b.length-1];var e=d["flatCoordinates"];ol.format.GPX.appendCoordinate_(e,a,c)}};ol.format.GPX.parseTrkPt_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="trkpt","localName should be trkpt");var c=ol.xml.pushParseAndPop({},ol.format.GPX.TRKPT_PARSERS_,a,b);if(goog.isDef(c)){var d=b[b.length-1];var e=d["flatCoordinates"];ol.format.GPX.appendCoordinate_(e,a,c)}};ol.format.GPX.parseTrkSeg_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="trkseg","localName should be trkseg");var c=b[b.length-1];ol.xml.parseNode(ol.format.GPX.TRKSEG_PARSERS_,a,b);var d=c["flatCoordinates"];var e=c["ends"];e.push(d.length)};ol.format.GPX.readRte_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="rte","localName should be rte");var c=b[0];var d=ol.xml.pushParseAndPop({flatCoordinates:[]},ol.format.GPX.RTE_PARSERS_,a,b);if(!goog.isDef(d)){return undefined}var e=d["flatCoordinates"];goog.object.remove(d,"flatCoordinates");var f=new ol.geom.LineString(null);f.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,e);ol.format.Feature.transformWithOptions(f,false,c);var g=new ol.Feature(f);g.setProperties(d);return g};ol.format.GPX.readTrk_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="trk","localName should be trk");var c=b[0];var d=ol.xml.pushParseAndPop({flatCoordinates:[],ends:[]},ol.format.GPX.TRK_PARSERS_,a,b);if(!goog.isDef(d)){return undefined}var e=d["flatCoordinates"];goog.object.remove(d,"flatCoordinates");var f=d["ends"];goog.object.remove(d,"ends");var g=new ol.geom.MultiLineString(null);g.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,e,f);ol.format.Feature.transformWithOptions(g,false,c);var h=new ol.Feature(g);h.setProperties(d);return h};ol.format.GPX.readWpt_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="wpt","localName should be wpt");var c=b[0];var d=ol.xml.pushParseAndPop({},ol.format.GPX.WPT_PARSERS_,a,b);if(!goog.isDef(d)){return undefined}var e=ol.format.GPX.appendCoordinate_([],a,d);var f=new ol.geom.Point(e,ol.geom.GeometryLayout.XYZM);ol.format.Feature.transformWithOptions(f,false,c);var g=new ol.Feature(f);g.setProperties(d);return g};ol.format.GPX.FEATURE_READER_={rte:ol.format.GPX.readRte_,trk:ol.format.GPX.readTrk_,wpt:ol.format.GPX.readWpt_};ol.format.GPX.GPX_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{rte:ol.xml.makeArrayPusher(ol.format.GPX.readRte_),trk:ol.xml.makeArrayPusher(ol.format.GPX.readTrk_),wpt:ol.xml.makeArrayPusher(ol.format.GPX.readWpt_)});ol.format.GPX.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{text:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString,"linkText"),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString,"linkType")});ol.format.GPX.RTE_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,number:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),extensions:ol.format.GPX.parseExtensions_,type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),rtept:ol.format.GPX.parseRtePt_});ol.format.GPX.RTEPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime)});ol.format.GPX.TRK_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,number:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),extensions:ol.format.GPX.parseExtensions_,trkseg:ol.format.GPX.parseTrkSeg_});ol.format.GPX.TRKSEG_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{trkpt:ol.format.GPX.parseTrkPt_});ol.format.GPX.TRKPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime)});ol.format.GPX.WPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime),magvar:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),geoidheight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,sym:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),fix:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),sat:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),hdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),vdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),pdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),ageofdgpsdata:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),dgpsid:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),extensions:ol.format.GPX.parseExtensions_});ol.format.GPX.prototype.handleReadExtensions_=function(a){if(goog.isNull(a)){a=[]}for(var b=0,c=a.length;b<c;++b){var d=a[b];if(goog.isDef(this.readExtensions_)){var e=d.get("extensionsNode_")||null;this.readExtensions_(d,e)}d.set("extensionsNode_",undefined)}};ol.format.GPX.prototype.readFeature;ol.format.GPX.prototype.readFeatureFromNode=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!goog.array.contains(ol.format.GPX.NAMESPACE_URIS_,a.namespaceURI)){return null}var c=ol.format.GPX.FEATURE_READER_[a.localName];if(!goog.isDef(c)){return null}var d=c(a,[this.getReadOptions(a,b)]);if(!goog.isDef(d)){return null}this.handleReadExtensions_([d]);return d};ol.format.GPX.prototype.readFeatures;ol.format.GPX.prototype.readFeaturesFromNode=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!goog.array.contains(ol.format.GPX.NAMESPACE_URIS_,a.namespaceURI)){return[]}if(a.localName=="gpx"){var c=ol.xml.pushParseAndPop([],ol.format.GPX.GPX_PARSERS_,a,[this.getReadOptions(a,b)]);if(goog.isDef(c)){this.handleReadExtensions_(c);return c}else{return[]}}return[]};ol.format.GPX.prototype.readProjection;ol.format.GPX.writeLink_=function(a,b,c){a.setAttribute("href",b);var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["properties"];var f=[e["linkText"],e["linkType"]];ol.xml.pushSerializeAndPop({node:a},ol.format.GPX.LINK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,f,c,ol.format.GPX.LINK_SEQUENCE_)};ol.format.GPX.writeWptType_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d.node;goog.asserts.assert(ol.xml.isNode(e),"parentNode should be an XML node");var f=e.namespaceURI;var g=d["properties"];ol.xml.setAttributeNS(a,null,"lat",b[1]);ol.xml.setAttributeNS(a,null,"lon",b[0]);var h=d["geometryLayout"];switch(h){case ol.geom.GeometryLayout.XYZM:if(b[3]!==0){g["time"]=b[3]}case ol.geom.GeometryLayout.XYZ:if(b[2]!==0){g["ele"]=b[2]}break;case ol.geom.GeometryLayout.XYM:if(b[2]!==0){g["time"]=b[2]}}var i=ol.format.GPX.WPT_TYPE_SEQUENCE_[f];var j=ol.xml.makeSequence(g,i);ol.xml.pushSerializeAndPop({node:a,properties:g},ol.format.GPX.WPT_TYPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,j,c,i)};ol.format.GPX.writeRte_=function(a,b,c){var d=c[0];var e=b.getProperties();var f={node:a,properties:e};var g=b.getGeometry();if(goog.isDef(g)){goog.asserts.assertInstanceof(g,ol.geom.LineString,"geometry should be an ol.geom.LineString");g=ol.format.Feature.transformWithOptions(g,true,d);f["geometryLayout"]=g.getLayout();e["rtept"]=g.getCoordinates()}var h=c[c.length-1].node;var i=ol.format.GPX.RTE_SEQUENCE_[h.namespaceURI];var j=ol.xml.makeSequence(e,i);ol.xml.pushSerializeAndPop(f,ol.format.GPX.RTE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,j,c,i)};ol.format.GPX.writeTrk_=function(a,b,c){var d=c[0];var e=b.getProperties();var f={node:a,properties:e};var g=b.getGeometry();if(goog.isDef(g)){goog.asserts.assertInstanceof(g,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");g=ol.format.Feature.transformWithOptions(g,true,d);e["trkseg"]=g.getLineStrings()}var h=c[c.length-1].node;var i=ol.format.GPX.TRK_SEQUENCE_[h.namespaceURI];var j=ol.xml.makeSequence(e,i);ol.xml.pushSerializeAndPop(f,ol.format.GPX.TRK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,j,c,i)};ol.format.GPX.writeTrkSeg_=function(a,b,c){var d={node:a,geometryLayout:b.getLayout(),properties:{}};ol.xml.pushSerializeAndPop(d,ol.format.GPX.TRKSEG_SERIALIZERS_,ol.format.GPX.TRKSEG_NODE_FACTORY_,b.getCoordinates(),c)};ol.format.GPX.writeWpt_=function(a,b,c){var d=c[0];var e=c[c.length-1];goog.asserts.assert(goog.isObject(e),"context should be an Object");e["properties"]=b.getProperties();var f=b.getGeometry();if(goog.isDef(f)){goog.asserts.assertInstanceof(f,ol.geom.Point,"geometry should be an ol.geom.Point");f=ol.format.Feature.transformWithOptions(f,true,d);e["geometryLayout"]=f.getLayout();ol.format.GPX.writeWptType_(a,f.getCoordinates(),c)}};ol.format.GPX.LINK_SEQUENCE_=["text","type"];ol.format.GPX.LINK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{text:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)});ol.format.GPX.RTE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["name","cmt","desc","src","link","number","type","rtept"]);ol.format.GPX.RTE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),number:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),rtept:ol.xml.makeArraySerializer(ol.xml.makeChildAppender(ol.format.GPX.writeWptType_))});ol.format.GPX.TRK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["name","cmt","desc","src","link","number","type","trkseg"]);ol.format.GPX.TRK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),number:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),trkseg:ol.xml.makeArraySerializer(ol.xml.makeChildAppender(ol.format.GPX.writeTrkSeg_))});ol.format.GPX.TRKSEG_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("trkpt");ol.format.GPX.TRKSEG_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{trkpt:ol.xml.makeChildAppender(ol.format.GPX.writeWptType_)});ol.format.GPX.WPT_TYPE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]);ol.format.GPX.WPT_TYPE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),time:ol.xml.makeChildAppender(ol.format.XSD.writeDateTimeTextNode),magvar:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),geoidheight:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),sym:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),fix:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),sat:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),hdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),vdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),pdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),ageofdgpsdata:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),dgpsid:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode)});ol.format.GPX.GEOMETRY_TYPE_TO_NODENAME_={Point:"wpt",LineString:"rte",MultiLineString:"trk"};ol.format.GPX.GPX_NODE_FACTORY_=function(a,b,c){goog.asserts.assertInstanceof(a,ol.Feature,"value should be an ol.Feature");var d=a.getGeometry();if(goog.isDef(d)){var e=b[b.length-1].node;goog.asserts.assert(ol.xml.isNode(e),"parentNode should be an XML node");return ol.xml.createElementNS(e.namespaceURI,ol.format.GPX.GEOMETRY_TYPE_TO_NODENAME_[d.getType()])}};ol.format.GPX.GPX_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{rte:ol.xml.makeChildAppender(ol.format.GPX.writeRte_),trk:ol.xml.makeChildAppender(ol.format.GPX.writeTrk_),wpt:ol.xml.makeChildAppender(ol.format.GPX.writeWpt_)});ol.format.GPX.prototype.writeFeatures;ol.format.GPX.prototype.writeFeaturesNode=function(a,b){b=this.adaptOptions(b);var c=ol.xml.createElementNS("http://www.topografix.com/GPX/1/1","gpx");ol.xml.pushSerializeAndPop({node:c},ol.format.GPX.GPX_SERIALIZERS_,ol.format.GPX.GPX_NODE_FACTORY_,a,[b]);return c};goog.provide("goog.string.newlines");goog.provide("goog.string.newlines.Line");goog.require("goog.array");goog.string.newlines.splitLines=function(a,b){var c=goog.string.newlines.getLines(a);return goog.array.map(c,function(a){return b?a.getFullLine():a.getContent()})};goog.string.newlines.Line=function(a,b,c,d){this.string=a;this.startLineIndex=b;this.endContentIndex=c;this.endLineIndex=d};goog.string.newlines.Line.prototype.getContent=function(){return this.string.substring(this.startLineIndex,this.endContentIndex)};goog.string.newlines.Line.prototype.getFullLine=function(){return this.string.substring(this.startLineIndex,this.endLineIndex)};goog.string.newlines.Line.prototype.getNewline=function(){return this.string.substring(this.endContentIndex,this.endLineIndex)};goog.string.newlines.getLines=function(a){var b=RegExp("\r\n|\r|\n","g");var c=0;var d;var e=[];while(d=b.exec(a)){var f=new goog.string.newlines.Line(a,c,d.index,d.index+d[0].length);e.push(f);c=b.lastIndex}if(c<a.length){var f=new goog.string.newlines.Line(a,c,a.length,a.length);e.push(f)}return e};goog.provide("ol.format.TextFeature");goog.require("goog.asserts");goog.require("ol.format.Feature");goog.require("ol.format.FormatType");ol.format.TextFeature=function(){goog.base(this)};goog.inherits(ol.format.TextFeature,ol.format.Feature);ol.format.TextFeature.prototype.getText_=function(a){if(goog.isString(a)){return a}else{goog.asserts.fail();return""}};ol.format.TextFeature.prototype.getType=function(){return ol.format.FormatType.TEXT};ol.format.TextFeature.prototype.readFeature=function(a,b){return this.readFeatureFromText(this.getText_(a),this.adaptOptions(b))};ol.format.TextFeature.prototype.readFeatureFromText=goog.abstractMethod;ol.format.TextFeature.prototype.readFeatures=function(a,b){return this.readFeaturesFromText(this.getText_(a),this.adaptOptions(b))};ol.format.TextFeature.prototype.readFeaturesFromText=goog.abstractMethod;ol.format.TextFeature.prototype.readGeometry=function(a,b){return this.readGeometryFromText(this.getText_(a),this.adaptOptions(b))};ol.format.TextFeature.prototype.readGeometryFromText=goog.abstractMethod;ol.format.TextFeature.prototype.readProjection=function(a){return this.readProjectionFromText(this.getText_(a))};ol.format.TextFeature.prototype.readProjectionFromText=function(a){return this.defaultDataProjection};ol.format.TextFeature.prototype.writeFeature=function(a,b){return this.writeFeatureText(a,this.adaptOptions(b))};ol.format.TextFeature.prototype.writeFeatureText=goog.abstractMethod;ol.format.TextFeature.prototype.writeFeatures=function(a,b){return this.writeFeaturesText(a,this.adaptOptions(b))};ol.format.TextFeature.prototype.writeFeaturesText=goog.abstractMethod;ol.format.TextFeature.prototype.writeGeometry=function(a,b){return this.writeGeometryText(a,this.adaptOptions(b))};ol.format.TextFeature.prototype.writeGeometryText=goog.abstractMethod;goog.provide("ol.format.IGC");goog.provide("ol.format.IGCZ");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.string.newlines");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.TextFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.proj");ol.format.IGCZ={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"};ol.format.IGC=function(a){var b=goog.isDef(a)?a:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.altitudeMode_=goog.isDef(b.altitudeMode)?b.altitudeMode:ol.format.IGCZ.NONE};goog.inherits(ol.format.IGC,ol.format.TextFeature);ol.format.IGC.EXTENSIONS_=[".igc"];ol.format.IGC.B_RECORD_RE_=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/;ol.format.IGC.H_RECORD_RE_=/^H.([A-Z]{3}).*?:(.*)/;ol.format.IGC.HFDTE_RECORD_RE_=/^HFDTE(\d{2})(\d{2})(\d{2})/;ol.format.IGC.prototype.getExtensions=function(){return ol.format.IGC.EXTENSIONS_};ol.format.IGC.prototype.readFeature;ol.format.IGC.prototype.readFeatureFromText=function(a,b){var c=this.altitudeMode_;var d=goog.string.newlines.splitLines(a);var e={};var f=[];var g=2e3;var h=0;var i=1;var j,k;for(j=0,k=d.length;j<k;++j){var l=d[j];var m;if(l.charAt(0)=="B"){m=ol.format.IGC.B_RECORD_RE_.exec(l);if(m){var n=parseInt(m[1],10);var o=parseInt(m[2],10);var p=parseInt(m[3],10);var q=parseInt(m[4],10)+parseInt(m[5],10)/6e4;if(m[6]=="S"){q=-q}var r=parseInt(m[7],10)+parseInt(m[8],10)/6e4;if(m[9]=="W"){r=-r}f.push(r,q);if(c!=ol.format.IGCZ.NONE){var s;if(c==ol.format.IGCZ.GPS){s=parseInt(m[11],10)}else if(c==ol.format.IGCZ.BAROMETRIC){s=parseInt(m[12],10)}else{goog.asserts.fail();s=0}f.push(s)}var t=Date.UTC(g,h,i,n,o,p);f.push(t/1e3)}}else if(l.charAt(0)=="H"){m=ol.format.IGC.HFDTE_RECORD_RE_.exec(l);if(m){i=parseInt(m[1],10);h=parseInt(m[2],10)-1;g=2e3+parseInt(m[3],10)}else{m=ol.format.IGC.H_RECORD_RE_.exec(l);if(m){e[m[1]]=goog.string.trim(m[2]);m=ol.format.IGC.HFDTE_RECORD_RE_.exec(l)}}}}if(f.length===0){return null}var u=new ol.geom.LineString(null);var v=c==ol.format.IGCZ.NONE?ol.geom.GeometryLayout.XYM:ol.geom.GeometryLayout.XYZM;u.setFlatCoordinates(v,f);var w=new ol.Feature(ol.format.Feature.transformWithOptions(u,false,b));w.setProperties(e);return w};ol.format.IGC.prototype.readFeatures;ol.format.IGC.prototype.readFeaturesFromText=function(a,b){var c=this.readFeatureFromText(a,b);if(!goog.isNull(c)){return[c]}else{return[]}};ol.format.IGC.prototype.readProjection;goog.provide("goog.Uri");goog.provide("goog.Uri.QueryData");goog.require("goog.array");goog.require("goog.string");goog.require("goog.structs");goog.require("goog.structs.Map");goog.require("goog.uri.utils");goog.require("goog.uri.utils.ComponentIndex");goog.require("goog.uri.utils.StandardQueryParam");goog.Uri=function(a,b){this.scheme_="";this.userInfo_="";this.domain_="";this.port_=null;this.path_="";this.fragment_="";this.isReadOnly_=false;this.ignoreCase_=false;this.queryData_;var c;if(a instanceof goog.Uri){this.ignoreCase_=goog.isDef(b)?b:a.getIgnoreCase();this.setScheme(a.getScheme());this.setUserInfo(a.getUserInfo());this.setDomain(a.getDomain());this.setPort(a.getPort());this.setPath(a.getPath());this.setQueryData(a.getQueryData().clone());this.setFragment(a.getFragment())}else if(a&&(c=goog.uri.utils.split(String(a)))){this.ignoreCase_=!!b;this.setScheme(c[goog.uri.utils.ComponentIndex.SCHEME]||"",true);this.setUserInfo(c[goog.uri.utils.ComponentIndex.USER_INFO]||"",true);this.setDomain(c[goog.uri.utils.ComponentIndex.DOMAIN]||"",true);this.setPort(c[goog.uri.utils.ComponentIndex.PORT]);this.setPath(c[goog.uri.utils.ComponentIndex.PATH]||"",true);this.setQueryData(c[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",true);this.setFragment(c[goog.uri.utils.ComponentIndex.FRAGMENT]||"",true)}else{this.ignoreCase_=!!b;this.queryData_=new goog.Uri.QueryData(null,null,this.ignoreCase_)}};goog.Uri.preserveParameterTypesCompatibilityFlag=false;goog.Uri.RANDOM_PARAM=goog.uri.utils.StandardQueryParam.RANDOM;goog.Uri.prototype.toString=function(){var a=[];var b=this.getScheme();if(b){a.push(goog.Uri.encodeSpecialChars_(b,goog.Uri.reDisallowedInSchemeOrUserInfo_,true),":")}var c=this.getDomain();if(c){a.push("//");var d=this.getUserInfo();if(d){a.push(goog.Uri.encodeSpecialChars_(d,goog.Uri.reDisallowedInSchemeOrUserInfo_,true),"@")}a.push(goog.Uri.removeDoubleEncoding_(goog.string.urlEncode(c)));var e=this.getPort();if(e!=null){a.push(":",String(e))}}var f=this.getPath();if(f){if(this.hasDomain()&&f.charAt(0)!="/"){a.push("/")}a.push(goog.Uri.encodeSpecialChars_(f,f.charAt(0)=="/"?goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_,true))}var g=this.getEncodedQuery();if(g){a.push("?",g)}var h=this.getFragment();if(h){a.push("#",goog.Uri.encodeSpecialChars_(h,goog.Uri.reDisallowedInFragment_))}return a.join("")};goog.Uri.prototype.resolve=function(a){var b=this.clone();var c=a.hasScheme();if(c){b.setScheme(a.getScheme())}else{c=a.hasUserInfo()}if(c){b.setUserInfo(a.getUserInfo())}else{c=a.hasDomain()}if(c){b.setDomain(a.getDomain())}else{c=a.hasPort()}var d=a.getPath();if(c){b.setPort(a.getPort())}else{c=a.hasPath();if(c){if(d.charAt(0)!="/"){if(this.hasDomain()&&!this.hasPath()){d="/"+d}else{var e=b.getPath().lastIndexOf("/");if(e!=-1){d=b.getPath().substr(0,e+1)+d}}}d=goog.Uri.removeDotSegments(d)}}if(c){b.setPath(d)}else{c=a.hasQuery()}if(c){b.setQueryData(a.getDecodedQuery())}else{c=a.hasFragment()}if(c){b.setFragment(a.getFragment())}return b};goog.Uri.prototype.clone=function(){return new goog.Uri(this)};goog.Uri.prototype.getScheme=function(){return this.scheme_};goog.Uri.prototype.setScheme=function(a,b){this.enforceReadOnly();this.scheme_=b?goog.Uri.decodeOrEmpty_(a,true):a;if(this.scheme_){this.scheme_=this.scheme_.replace(/:$/,"")}return this};goog.Uri.prototype.hasScheme=function(){return!!this.scheme_};goog.Uri.prototype.getUserInfo=function(){return this.userInfo_};goog.Uri.prototype.setUserInfo=function(a,b){this.enforceReadOnly();this.userInfo_=b?goog.Uri.decodeOrEmpty_(a):a;return this};goog.Uri.prototype.hasUserInfo=function(){return!!this.userInfo_};goog.Uri.prototype.getDomain=function(){return this.domain_};goog.Uri.prototype.setDomain=function(a,b){this.enforceReadOnly();this.domain_=b?goog.Uri.decodeOrEmpty_(a,true):a;return this};goog.Uri.prototype.hasDomain=function(){return!!this.domain_};goog.Uri.prototype.getPort=function(){return this.port_};goog.Uri.prototype.setPort=function(a){this.enforceReadOnly();if(a){a=Number(a);if(isNaN(a)||a<0){throw Error("Bad port number "+a)}this.port_=a}else{this.port_=null}return this};goog.Uri.prototype.hasPort=function(){return this.port_!=null};goog.Uri.prototype.getPath=function(){return this.path_};goog.Uri.prototype.setPath=function(a,b){
this.enforceReadOnly();this.path_=b?goog.Uri.decodeOrEmpty_(a,true):a;return this};goog.Uri.prototype.hasPath=function(){return!!this.path_};goog.Uri.prototype.hasQuery=function(){return this.queryData_.toString()!==""};goog.Uri.prototype.setQueryData=function(a,b){this.enforceReadOnly();if(a instanceof goog.Uri.QueryData){this.queryData_=a;this.queryData_.setIgnoreCase(this.ignoreCase_)}else{if(!b){a=goog.Uri.encodeSpecialChars_(a,goog.Uri.reDisallowedInQuery_)}this.queryData_=new goog.Uri.QueryData(a,null,this.ignoreCase_)}return this};goog.Uri.prototype.setQuery=function(a,b){return this.setQueryData(a,b)};goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()};goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()};goog.Uri.prototype.getQueryData=function(){return this.queryData_};goog.Uri.prototype.getQuery=function(){return this.getEncodedQuery()};goog.Uri.prototype.setParameterValue=function(a,b){this.enforceReadOnly();this.queryData_.set(a,b);return this};goog.Uri.prototype.setParameterValues=function(a,b){this.enforceReadOnly();if(!goog.isArray(b)){b=[String(b)]}this.queryData_.setValues(a,b);return this};goog.Uri.prototype.getParameterValues=function(a){return this.queryData_.getValues(a)};goog.Uri.prototype.getParameterValue=function(a){return this.queryData_.get(a)};goog.Uri.prototype.getFragment=function(){return this.fragment_};goog.Uri.prototype.setFragment=function(a,b){this.enforceReadOnly();this.fragment_=b?goog.Uri.decodeOrEmpty_(a):a;return this};goog.Uri.prototype.hasFragment=function(){return!!this.fragment_};goog.Uri.prototype.hasSameDomainAs=function(a){return(!this.hasDomain()&&!a.hasDomain()||this.getDomain()==a.getDomain())&&(!this.hasPort()&&!a.hasPort()||this.getPort()==a.getPort())};goog.Uri.prototype.makeUnique=function(){this.enforceReadOnly();this.setParameterValue(goog.Uri.RANDOM_PARAM,goog.string.getRandomString());return this};goog.Uri.prototype.removeParameter=function(a){this.enforceReadOnly();this.queryData_.remove(a);return this};goog.Uri.prototype.setReadOnly=function(a){this.isReadOnly_=a;return this};goog.Uri.prototype.isReadOnly=function(){return this.isReadOnly_};goog.Uri.prototype.enforceReadOnly=function(){if(this.isReadOnly_){throw Error("Tried to modify a read-only Uri")}};goog.Uri.prototype.setIgnoreCase=function(a){this.ignoreCase_=a;if(this.queryData_){this.queryData_.setIgnoreCase(a)}return this};goog.Uri.prototype.getIgnoreCase=function(){return this.ignoreCase_};goog.Uri.parse=function(a,b){return a instanceof goog.Uri?a.clone():new goog.Uri(a,b)};goog.Uri.create=function(a,b,c,d,e,f,g,h){var i=new goog.Uri(null,h);a&&i.setScheme(a);b&&i.setUserInfo(b);c&&i.setDomain(c);d&&i.setPort(d);e&&i.setPath(e);f&&i.setQueryData(f);g&&i.setFragment(g);return i};goog.Uri.resolve=function(a,b){if(!(a instanceof goog.Uri)){a=goog.Uri.parse(a)}if(!(b instanceof goog.Uri)){b=goog.Uri.parse(b)}return a.resolve(b)};goog.Uri.removeDotSegments=function(a){if(a==".."||a=="."){return""}else if(!goog.string.contains(a,"./")&&!goog.string.contains(a,"/.")){return a}else{var b=goog.string.startsWith(a,"/");var c=a.split("/");var d=[];for(var e=0;e<c.length;){var f=c[e++];if(f=="."){if(b&&e==c.length){d.push("")}}else if(f==".."){if(d.length>1||d.length==1&&d[0]!=""){d.pop()}if(b&&e==c.length){d.push("")}}else{d.push(f);b=true}}return d.join("/")}};goog.Uri.decodeOrEmpty_=function(a,b){if(!a){return""}return b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a)};goog.Uri.encodeSpecialChars_=function(a,b,c){if(goog.isString(a)){var d=encodeURI(a).replace(b,goog.Uri.encodeChar_);if(c){d=goog.Uri.removeDoubleEncoding_(d)}return d}return null};goog.Uri.encodeChar_=function(a){var b=a.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)};goog.Uri.removeDoubleEncoding_=function(a){return a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")};goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g;goog.Uri.reDisallowedInRelativePath_=/[\#\?:]/g;goog.Uri.reDisallowedInAbsolutePath_=/[\#\?]/g;goog.Uri.reDisallowedInQuery_=/[\#\?@]/g;goog.Uri.reDisallowedInFragment_=/#/g;goog.Uri.haveSameDomain=function(a,b){var c=goog.uri.utils.split(a);var d=goog.uri.utils.split(b);return c[goog.uri.utils.ComponentIndex.DOMAIN]==d[goog.uri.utils.ComponentIndex.DOMAIN]&&c[goog.uri.utils.ComponentIndex.PORT]==d[goog.uri.utils.ComponentIndex.PORT]};goog.Uri.QueryData=function(a,b,c){this.keyMap_=null;this.count_=null;this.encodedQuery_=a||null;this.ignoreCase_=!!c};goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_){this.keyMap_=new goog.structs.Map;this.count_=0;if(this.encodedQuery_){var a=this;goog.uri.utils.parseQueryData(this.encodedQuery_,function(b,c){a.add(goog.string.urlDecode(b),c)})}}};goog.Uri.QueryData.createFromMap=function(a,b,c){var d=goog.structs.getKeys(a);if(typeof d=="undefined"){throw Error("Keys are undefined")}var e=new goog.Uri.QueryData(null,null,c);var f=goog.structs.getValues(a);for(var g=0;g<d.length;g++){var h=d[g];var i=f[g];if(!goog.isArray(i)){e.add(h,i)}else{e.setValues(h,i)}}return e};goog.Uri.QueryData.createFromKeysValues=function(a,b,c,d){if(a.length!=b.length){throw Error("Mismatched lengths for keys/values")}var e=new goog.Uri.QueryData(null,null,d);for(var f=0;f<a.length;f++){e.add(a[f],b[f])}return e};goog.Uri.QueryData.prototype.getCount=function(){this.ensureKeyMapInitialized_();return this.count_};goog.Uri.QueryData.prototype.add=function(a,b){this.ensureKeyMapInitialized_();this.invalidateCache_();a=this.getKeyName_(a);var c=this.keyMap_.get(a);if(!c){this.keyMap_.set(a,c=[])}c.push(b);this.count_++;return this};goog.Uri.QueryData.prototype.remove=function(a){this.ensureKeyMapInitialized_();a=this.getKeyName_(a);if(this.keyMap_.containsKey(a)){this.invalidateCache_();this.count_-=this.keyMap_.get(a).length;return this.keyMap_.remove(a)}return false};goog.Uri.QueryData.prototype.clear=function(){this.invalidateCache_();this.keyMap_=null;this.count_=0};goog.Uri.QueryData.prototype.isEmpty=function(){this.ensureKeyMapInitialized_();return this.count_==0};goog.Uri.QueryData.prototype.containsKey=function(a){this.ensureKeyMapInitialized_();a=this.getKeyName_(a);return this.keyMap_.containsKey(a)};goog.Uri.QueryData.prototype.containsValue=function(a){var b=this.getValues();return goog.array.contains(b,a)};goog.Uri.QueryData.prototype.getKeys=function(){this.ensureKeyMapInitialized_();var a=this.keyMap_.getValues();var b=this.keyMap_.getKeys();var c=[];for(var d=0;d<b.length;d++){var e=a[d];for(var f=0;f<e.length;f++){c.push(b[d])}}return c};goog.Uri.QueryData.prototype.getValues=function(a){this.ensureKeyMapInitialized_();var b=[];if(goog.isString(a)){if(this.containsKey(a)){b=goog.array.concat(b,this.keyMap_.get(this.getKeyName_(a)))}}else{var c=this.keyMap_.getValues();for(var d=0;d<c.length;d++){b=goog.array.concat(b,c[d])}}return b};goog.Uri.QueryData.prototype.set=function(a,b){this.ensureKeyMapInitialized_();this.invalidateCache_();a=this.getKeyName_(a);if(this.containsKey(a)){this.count_-=this.keyMap_.get(a).length}this.keyMap_.set(a,[b]);this.count_++;return this};goog.Uri.QueryData.prototype.get=function(a,b){var c=a?this.getValues(a):[];if(goog.Uri.preserveParameterTypesCompatibilityFlag){return c.length>0?c[0]:b}else{return c.length>0?String(c[0]):b}};goog.Uri.QueryData.prototype.setValues=function(a,b){this.remove(a);if(b.length>0){this.invalidateCache_();this.keyMap_.set(this.getKeyName_(a),goog.array.clone(b));this.count_+=b.length}};goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_){return this.encodedQuery_}if(!this.keyMap_){return""}var a=[];var b=this.keyMap_.getKeys();for(var c=0;c<b.length;c++){var d=b[c];var e=goog.string.urlEncode(d);var f=this.getValues(d);for(var g=0;g<f.length;g++){var h=e;if(f[g]!==""){h+="="+goog.string.urlEncode(f[g])}a.push(h)}}return this.encodedQuery_=a.join("&")};goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())};goog.Uri.QueryData.prototype.invalidateCache_=function(){this.encodedQuery_=null};goog.Uri.QueryData.prototype.filterKeys=function(a){this.ensureKeyMapInitialized_();this.keyMap_.forEach(function(b,c){if(!goog.array.contains(a,c)){this.remove(c)}},this);return this};goog.Uri.QueryData.prototype.clone=function(){var a=new goog.Uri.QueryData;a.encodedQuery_=this.encodedQuery_;if(this.keyMap_){a.keyMap_=this.keyMap_.clone();a.count_=this.count_}return a};goog.Uri.QueryData.prototype.getKeyName_=function(a){var b=String(a);if(this.ignoreCase_){b=b.toLowerCase()}return b};goog.Uri.QueryData.prototype.setIgnoreCase=function(a){var b=a&&!this.ignoreCase_;if(b){this.ensureKeyMapInitialized_();this.invalidateCache_();this.keyMap_.forEach(function(a,b){var c=b.toLowerCase();if(b!=c){this.remove(b);this.setValues(c,a)}},this)}this.ignoreCase_=a};goog.Uri.QueryData.prototype.extend=function(a){for(var b=0;b<arguments.length;b++){var c=arguments[b];goog.structs.forEach(c,function(a,b){this.add(b,a)},this)}};goog.provide("ol.style.Text");ol.style.Text=function(a){var b=goog.isDef(a)?a:{};this.font_=b.font;this.rotation_=b.rotation;this.scale_=b.scale;this.text_=b.text;this.textAlign_=b.textAlign;this.textBaseline_=b.textBaseline;this.fill_=goog.isDef(b.fill)?b.fill:null;this.stroke_=goog.isDef(b.stroke)?b.stroke:null;this.offsetX_=goog.isDef(b.offsetX)?b.offsetX:0;this.offsetY_=goog.isDef(b.offsetY)?b.offsetY:0};ol.style.Text.prototype.getFont=function(){return this.font_};ol.style.Text.prototype.getOffsetX=function(){return this.offsetX_};ol.style.Text.prototype.getOffsetY=function(){return this.offsetY_};ol.style.Text.prototype.getFill=function(){return this.fill_};ol.style.Text.prototype.getRotation=function(){return this.rotation_};ol.style.Text.prototype.getScale=function(){return this.scale_};ol.style.Text.prototype.getStroke=function(){return this.stroke_};ol.style.Text.prototype.getText=function(){return this.text_};ol.style.Text.prototype.getTextAlign=function(){return this.textAlign_};ol.style.Text.prototype.getTextBaseline=function(){return this.textBaseline_};ol.style.Text.prototype.setFont=function(a){this.font_=a};ol.style.Text.prototype.setOffsetX=function(a){this.offsetX_=a};ol.style.Text.prototype.setOffsetY=function(a){this.offsetY_=a};ol.style.Text.prototype.setFill=function(a){this.fill_=a};ol.style.Text.prototype.setRotation=function(a){this.rotation_=a};ol.style.Text.prototype.setScale=function(a){this.scale_=a};ol.style.Text.prototype.setStroke=function(a){this.stroke_=a};ol.style.Text.prototype.setText=function(a){this.text_=a};ol.style.Text.prototype.setTextAlign=function(a){this.textAlign_=a};ol.style.Text.prototype.setTextBaseline=function(a){this.textBaseline_=a};goog.provide("ol.format.KML");goog.require("goog.Uri");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.math");goog.require("goog.object");goog.require("goog.string");goog.require("ol.Feature");goog.require("ol.FeatureStyleFunction");goog.require("ol.color");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.format.XSD");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");goog.require("ol.style.Fill");goog.require("ol.style.Icon");goog.require("ol.style.IconAnchorUnits");goog.require("ol.style.IconOrigin");goog.require("ol.style.Image");goog.require("ol.style.Stroke");goog.require("ol.style.Style");goog.require("ol.style.Text");goog.require("ol.xml");ol.format.KMLVec2_;ol.format.KMLGxTrackObject_;ol.format.KML=function(a){var b=goog.isDef(a)?a:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.defaultStyle_=goog.isDef(b.defaultStyle)?b.defaultStyle:ol.format.KML.DEFAULT_STYLE_ARRAY_;this.extractStyles_=goog.isDef(b.extractStyles)?b.extractStyles:true;this.sharedStyles_={}};goog.inherits(ol.format.KML,ol.format.XMLFeature);ol.format.KML.EXTENSIONS_=[".kml"];ol.format.KML.GX_NAMESPACE_URIS_=["http://www.google.com/kml/ext/2.2"];ol.format.KML.NAMESPACE_URIS_=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"];ol.format.KML.SCHEMA_LOCATION_="http://www.opengis.net/kml/2.2 "+"https://developers.google.com/kml/schema/kml22gx.xsd";ol.format.KML.DEFAULT_COLOR_=[255,255,255,1];ol.format.KML.DEFAULT_FILL_STYLE_=new ol.style.Fill({color:ol.format.KML.DEFAULT_COLOR_});ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_=[20,2];ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_=ol.style.IconAnchorUnits.PIXELS;ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_=ol.style.IconAnchorUnits.PIXELS;ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_=[64,64];ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";ol.format.KML.DEFAULT_IMAGE_STYLE_=new ol.style.Icon({anchor:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_,anchorOrigin:ol.style.IconOrigin.BOTTOM_LEFT,anchorXUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,anchorYUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_,crossOrigin:"anonymous",rotation:0,scale:.5,size:ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_,src:ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_});ol.format.KML.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:ol.format.KML.DEFAULT_COLOR_,width:1});ol.format.KML.DEFAULT_TEXT_STYLE_=new ol.style.Text({font:"normal 16px Helvetica",fill:ol.format.KML.DEFAULT_FILL_STYLE_,stroke:ol.format.KML.DEFAULT_STROKE_STYLE_,scale:1});ol.format.KML.DEFAULT_STYLE_=new ol.style.Style({fill:ol.format.KML.DEFAULT_FILL_STYLE_,image:ol.format.KML.DEFAULT_IMAGE_STYLE_,text:ol.format.KML.DEFAULT_TEXT_STYLE_,stroke:ol.format.KML.DEFAULT_STROKE_STYLE_,zIndex:0});ol.format.KML.DEFAULT_STYLE_ARRAY_=[ol.format.KML.DEFAULT_STYLE_];ol.format.KML.ICON_ANCHOR_UNITS_MAP_={fraction:ol.style.IconAnchorUnits.FRACTION,pixels:ol.style.IconAnchorUnits.PIXELS};ol.format.KML.createFeatureStyleFunction_=function(a,b,c,d){return function(e){if(goog.isDef(a)){return a}if(goog.isDef(b)){return ol.format.KML.findStyle_(b,c,d)}return c}};ol.format.KML.findStyle_=function(a,b,c){if(goog.isArray(a)){return a}else if(goog.isString(a)){if(!(a in c)&&"#"+a in c){a="#"+a}return ol.format.KML.findStyle_(c[a],b,c)}else{return b}};ol.format.KML.readColor_=function(a){var b=ol.xml.getAllTextContent(a,false);var c=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(b);if(c){var d=c[1];return[parseInt(d.substr(6,2),16),parseInt(d.substr(4,2),16),parseInt(d.substr(2,2),16),parseInt(d.substr(0,2),16)/255]}else{return undefined}};ol.format.KML.readFlatCoordinates_=function(a){var b=ol.xml.getAllTextContent(a,false);var c=[];var d=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;var e;while(e=d.exec(b)){var f=parseFloat(e[1]);var g=parseFloat(e[2]);var h=e[3]?parseFloat(e[3]):0;c.push(f,g,h);b=b.substr(e[0].length)}if(b!==""){return undefined}return c};ol.format.KML.readStyleUrl_=function(a){var b=goog.string.trim(ol.xml.getAllTextContent(a,false));if(goog.isDefAndNotNull(a.baseURI)){return goog.Uri.resolve(a.baseURI,b).toString()}else{return b}};ol.format.KML.readURI_=function(a){var b=ol.xml.getAllTextContent(a,false);if(goog.isDefAndNotNull(a.baseURI)){return goog.Uri.resolve(a.baseURI,goog.string.trim(b)).toString()}else{return goog.string.trim(b)}};ol.format.KML.readVec2_=function(a){var b=a.getAttribute("xunits");var c=a.getAttribute("yunits");return{x:parseFloat(a.getAttribute("x")),xunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[b],y:parseFloat(a.getAttribute("y")),yunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[c]}};ol.format.KML.readScale_=function(a){var b=ol.format.XSD.readDecimal(a);if(goog.isDef(b)){return Math.sqrt(b)}else{return undefined}};ol.format.KML.readStyleMapValue_=function(a,b){return ol.xml.pushParseAndPop(undefined,ol.format.KML.STYLE_MAP_PARSERS_,a,b)};ol.format.KML.IconStyleParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be an ELEMENT");goog.asserts.assert(a.localName=="IconStyle","localName should be IconStyle");var c=ol.xml.pushParseAndPop({},ol.format.KML.ICON_STYLE_PARSERS_,a,b);if(!goog.isDef(c)){return}var d=b[b.length-1];goog.asserts.assert(goog.isObject(d),"styleObject should be an Object");var e=goog.object.get(c,"Icon",{});var f;var g=e["href"];if(goog.isDef(g)){f=g}else{f=ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_}var h,i,j;var k=c["hotSpot"];if(goog.isDef(k)){h=[k.x,k.y];i=k.xunits;j=k.yunits}else if(f===ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_){h=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_;i=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_;j=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_}else if(/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(f)){h=[.5,0];i=ol.style.IconAnchorUnits.FRACTION;j=ol.style.IconAnchorUnits.FRACTION}var l;var m=e["x"];var n=e["y"];if(goog.isDef(m)&&goog.isDef(n)){l=[m,n]}var o;var p=e["w"];var q=e["h"];if(goog.isDef(p)&&goog.isDef(q)){o=[p,q]}var r;var s=c["heading"];if(goog.isDef(s)){r=goog.math.toRadians(s)}var t=c["scale"];if(f==ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_){o=ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_}var u=new ol.style.Icon({anchor:h,anchorOrigin:ol.style.IconOrigin.BOTTOM_LEFT,anchorXUnits:i,anchorYUnits:j,crossOrigin:"anonymous",offset:l,offsetOrigin:ol.style.IconOrigin.BOTTOM_LEFT,rotation:r,scale:t,size:o,src:f});d["imageStyle"]=u};ol.format.KML.LabelStyleParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="LabelStyle","localName should be LabelStyle");var c=ol.xml.pushParseAndPop({},ol.format.KML.LABEL_STYLE_PARSERS_,a,b);if(!goog.isDef(c)){return}var d=b[b.length-1];goog.asserts.assert(goog.isObject(d),"styleObject should be an Object");var e=new ol.style.Text({fill:new ol.style.Fill({color:goog.object.get(c,"color",ol.format.KML.DEFAULT_COLOR_)}),scale:c["scale"]});d["textStyle"]=e};ol.format.KML.LineStyleParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="LineStyle","localName should be LineStyle");var c=ol.xml.pushParseAndPop({},ol.format.KML.LINE_STYLE_PARSERS_,a,b);if(!goog.isDef(c)){return}var d=b[b.length-1];goog.asserts.assert(goog.isObject(d),"styleObject should be an Object");var e=new ol.style.Stroke({color:goog.object.get(c,"color",ol.format.KML.DEFAULT_COLOR_),width:goog.object.get(c,"width",1)});d["strokeStyle"]=e};ol.format.KML.PolyStyleParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="PolyStyle","localName should be PolyStyle");var c=ol.xml.pushParseAndPop({},ol.format.KML.POLY_STYLE_PARSERS_,a,b);if(!goog.isDef(c)){return}var d=b[b.length-1];goog.asserts.assert(goog.isObject(d),"styleObject should be an Object");var e=new ol.style.Fill({color:goog.object.get(c,"color",ol.format.KML.DEFAULT_COLOR_)});d["fillStyle"]=e;var f=c["fill"];if(goog.isDef(f)){d["fill"]=f}var g=c["outline"];if(goog.isDef(g)){d["outline"]=g}};ol.format.KML.readFlatLinearRing_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="LinearRing","localName should be LinearRing");return ol.xml.pushParseAndPop(null,ol.format.KML.FLAT_LINEAR_RING_PARSERS_,a,b)};ol.format.KML.gxCoordParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(goog.array.contains(ol.format.KML.GX_NAMESPACE_URIS_,a.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert(a.localName=="coord","localName should be coord");var c=b[b.length-1];goog.asserts.assert(goog.isObject(c),"gxTrackObject should be an Object");var d=c.flatCoordinates;var e=ol.xml.getAllTextContent(a,false);var f=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i;var g=f.exec(e);if(g){var h=parseFloat(g[1]);var i=parseFloat(g[2]);var j=parseFloat(g[3]);d.push(h,i,j,0)}else{d.push(0,0,0,0)}};ol.format.KML.readGxMultiTrack_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(goog.array.contains(ol.format.KML.GX_NAMESPACE_URIS_,a.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert(a.localName=="MultiTrack","localName should be MultiTrack");var c=ol.xml.pushParseAndPop([],ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_,a,b);if(!goog.isDef(c)){return undefined}var d=new ol.geom.MultiLineString(null);d.setLineStrings(c);return d};ol.format.KML.readGxTrack_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(goog.array.contains(ol.format.KML.GX_NAMESPACE_URIS_,a.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert(a.localName=="Track","localName should be Track");var c=ol.xml.pushParseAndPop({flatCoordinates:[],whens:[]},ol.format.KML.GX_TRACK_PARSERS_,a,b);if(!goog.isDef(c)){return undefined}var d=c.flatCoordinates;var e=c.whens;goog.asserts.assert(d.length/4==e.length,"the length of the flatCoordinates array divided by 4 should be the "+"length of the whens array");var f,g;for(f=0,g=Math.min(d.length,e.length);f<g;++f){d[4*f+3]=e[f]}var h=new ol.geom.LineString(null);h.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,d);return h};ol.format.KML.readIcon_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Icon","localName should be Icon");var c=ol.xml.pushParseAndPop({},ol.format.KML.ICON_PARSERS_,a,b);if(goog.isDef(c)){return c}else{return null}};ol.format.KML.readFlatCoordinatesFromNode_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop(null,ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_,a,b)};ol.format.KML.readLineString_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="LineString","localName should be LineString");var c=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,a,b);var d=ol.format.KML.readFlatCoordinatesFromNode_(a,b);if(goog.isDef(d)){var e=new ol.geom.LineString(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,d);e.setProperties(c);return e}else{return undefined}};ol.format.KML.readLinearRing_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="LinearRing","localName should be LinearRing");var c=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,a,b);var d=ol.format.KML.readFlatCoordinatesFromNode_(a,b);if(goog.isDef(d)){var e=new ol.geom.Polygon(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,d,[d.length]);e.setProperties(c);return e}else{return undefined}};ol.format.KML.readMultiGeometry_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="MultiGeometry","localName should be MultiGeometry");var c=ol.xml.pushParseAndPop([],ol.format.KML.MULTI_GEOMETRY_PARSERS_,a,b);if(!goog.isDef(c)){return null}if(c.length===0){return new ol.geom.GeometryCollection(c)}var d=true;var e=c[0].getType();var f,g,h;for(g=1,h=c.length;g<h;++g){f=c[g];if(f.getType()!=e){d=false;break}}if(d){var i;var j;if(e==ol.geom.GeometryType.POINT){var k=c[0];goog.asserts.assertInstanceof(k,ol.geom.Point,"point should be an ol.geom.Point");i=k.getLayout();j=k.getFlatCoordinates();for(g=1,h=c.length;g<h;++g){f=c[g];goog.asserts.assertInstanceof(f,ol.geom.Point,"geometry should be an ol.geom.Point");goog.asserts.assert(f.getLayout()==i,"geometry layout should be consistent");goog.array.extend(j,f.getFlatCoordinates())}var l=new ol.geom.MultiPoint(null);l.setFlatCoordinates(i,j);ol.format.KML.setCommonGeometryProperties_(l,c);return l}else if(e==ol.geom.GeometryType.LINE_STRING){var m=new ol.geom.MultiLineString(null);m.setLineStrings(c);ol.format.KML.setCommonGeometryProperties_(m,c);return m}else if(e==ol.geom.GeometryType.POLYGON){var n=new ol.geom.MultiPolygon(null);n.setPolygons(c);ol.format.KML.setCommonGeometryProperties_(n,c);return n}else if(e==ol.geom.GeometryType.GEOMETRY_COLLECTION){return new ol.geom.GeometryCollection(c)}else{goog.asserts.fail("Unexpected type: "+e);return null}}else{return new ol.geom.GeometryCollection(c)}};ol.format.KML.readPoint_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Point","localName should be Point");var c=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,a,b);var d=ol.format.KML.readFlatCoordinatesFromNode_(a,b);if(goog.isDefAndNotNull(d)){var e=new ol.geom.Point(null);goog.asserts.assert(d.length==3,"flatCoordinates should have a length of 3");e.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,d);e.setProperties(c);return e}else{return undefined}};ol.format.KML.readPolygon_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Polygon","localName should be Polygon");var c=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,a,b);var d=ol.xml.pushParseAndPop([null],ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_,a,b);if(goog.isDefAndNotNull(d)&&!goog.isNull(d[0])){var e=new ol.geom.Polygon(null);var f=d[0];var g=[f.length];var h,i;for(h=1,i=d.length;h<i;++h){goog.array.extend(f,d[h]);g.push(f.length)}e.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,f,g);e.setProperties(c);return e}else{return undefined}};ol.format.KML.readStyle_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Style","localName should be Style");var c=ol.xml.pushParseAndPop({},ol.format.KML.STYLE_PARSERS_,a,b);if(!goog.isDef(c)){return null}var d=goog.object.get(c,"fillStyle",ol.format.KML.DEFAULT_FILL_STYLE_);var e=c["fill"];if(goog.isDef(e)&&!e){d=null}var f=goog.object.get(c,"imageStyle",ol.format.KML.DEFAULT_IMAGE_STYLE_);var g=goog.object.get(c,"textStyle",ol.format.KML.DEFAULT_TEXT_STYLE_);var h=goog.object.get(c,"strokeStyle",ol.format.KML.DEFAULT_STROKE_STYLE_);var i=c["outline"];if(goog.isDef(i)&&!i){h=null}return[new ol.style.Style({fill:d,image:f,stroke:h,text:g,zIndex:undefined})]};ol.format.KML.setCommonGeometryProperties_=function(a,b){var c=b.length;var d=new Array(b.length);var e=new Array(b.length);var f,g,h,i;h=i=false;for(g=0;g<c;++g){f=b[g];d[g]=f.get("extrude");e[g]=f.get("altitudeMode");h=h||goog.isDef(d[g]);i=i||goog.isDef(e[g])}if(h){a.set("extrude",d)}if(i){a.set("altitudeMode",e)}};ol.format.KML.DataParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Data","localName should be Data");var c=a.getAttribute("name");if(!goog.isNull(c)){var d=ol.xml.pushParseAndPop(undefined,ol.format.KML.DATA_PARSERS_,a,b);if(goog.isDef(d)){var e=b[b.length-1];goog.asserts.assert(goog.isObject(e),"featureObject should be an Object");e[c]=d}}};ol.format.KML.ExtendedDataParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="ExtendedData","localName should be ExtendedData");ol.xml.parseNode(ol.format.KML.EXTENDED_DATA_PARSERS_,a,b)};ol.format.KML.PairDataParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Pair","localName should be Pair");var c=ol.xml.pushParseAndPop({},ol.format.KML.PAIR_PARSERS_,a,b);if(!goog.isDef(c)){return}var d=c["key"];if(goog.isDef(d)&&d=="normal"){var e=c["styleUrl"];if(goog.isDef(e)){b[b.length-1]=e}var f=c["Style"];if(goog.isDef(f)){b[b.length-1]=f}}};ol.format.KML.PlacemarkStyleMapParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="StyleMap","localName should be StyleMap");var c=ol.format.KML.readStyleMapValue_(a,b);if(!goog.isDef(c)){return}var d=b[b.length-1];goog.asserts.assert(goog.isObject(d),"placemarkObject should be an Object");if(goog.isArray(c)){d["Style"]=c}else if(goog.isString(c)){d["styleUrl"]=c}else{goog.asserts.fail("styleMapValue has an unknown type")}};ol.format.KML.SchemaDataParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="SchemaData","localName should be SchemaData");ol.xml.parseNode(ol.format.KML.SCHEMA_DATA_PARSERS_,a,b)};ol.format.KML.SimpleDataParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="SimpleData","localName should be SimpleData");var c=a.getAttribute("name");if(!goog.isNull(c)){var d=ol.format.XSD.readString(a);var e=b[b.length-1];e[c]=d}};ol.format.KML.innerBoundaryIsParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="innerBoundaryIs","localName should be innerBoundaryIs");var c=ol.xml.pushParseAndPop(undefined,ol.format.KML.INNER_BOUNDARY_IS_PARSERS_,a,b);if(goog.isDef(c)){var d=b[b.length-1];goog.asserts.assert(goog.isArray(d),"flatLinearRings should be an array");goog.asserts.assert(d.length>0,"flatLinearRings array should not be empty");d.push(c)}};ol.format.KML.outerBoundaryIsParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="outerBoundaryIs","localName should be outerBoundaryIs");var c=ol.xml.pushParseAndPop(undefined,ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_,a,b);if(goog.isDef(c)){var d=b[b.length-1];goog.asserts.assert(goog.isArray(d),"flatLinearRings should be an array");goog.asserts.assert(d.length>0,"flatLinearRings array should not be empty");d[0]=c}};ol.format.KML.LinkParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Link","localName should be Link");ol.xml.parseNode(ol.format.KML.LINK_PARSERS_,a,b)};ol.format.KML.whenParser_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="when","localName should be when");var c=b[b.length-1];goog.asserts.assert(goog.isObject(c),"gxTrackObject should be an Object");var d=c.whens;var e=ol.xml.getAllTextContent(a,false);var f=/^\s*(\d{4})($|-(\d{2})($|-(\d{2})($|T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?)))))\s*$/;var g=f.exec(e);if(g){var h=parseInt(g[1],10);var i=goog.isDef(g[3])?parseInt(g[3],10)-1:0;var j=goog.isDef(g[5])?parseInt(g[5],10):1;var k=goog.isDef(g[7])?parseInt(g[7],10):0;var l=goog.isDef(g[8])?parseInt(g[8],10):0;var m=goog.isDef(g[9])?parseInt(g[9],10):0;var n=Date.UTC(h,i,j,k,l,m);if(goog.isDef(g[10])&&g[10]!="Z"){var o=g[11]=="-"?-1:1;n+=o*60*parseInt(g[12],10);if(goog.isDef(g[13])){n+=o*60*60*parseInt(g[13],10)}}d.push(n)}else{d.push(0)}}
;ol.format.KML.DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{value:ol.xml.makeReplacer(ol.format.XSD.readString)});ol.format.KML.EXTENDED_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Data:ol.format.KML.DataParser_,SchemaData:ol.format.KML.SchemaDataParser_});ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{extrude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),altitudeMode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.KML.FLAT_LINEAR_RING_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)});ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{innerBoundaryIs:ol.format.KML.innerBoundaryIsParser_,outerBoundaryIs:ol.format.KML.outerBoundaryIsParser_});ol.format.KML.GX_TRACK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{when:ol.format.KML.whenParser_},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{coord:ol.format.KML.gxCoordParser_}));ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)});ol.format.KML.ICON_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{x:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),y:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),w:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),h:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)}));ol.format.KML.ICON_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Icon:ol.xml.makeObjectPropertySetter(ol.format.KML.readIcon_),heading:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),hotSpot:ol.xml.makeObjectPropertySetter(ol.format.KML.readVec2_),scale:ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)});ol.format.KML.INNER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)});ol.format.KML.LABEL_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),scale:ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)});ol.format.KML.LINE_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),width:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.KML.MULTI_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LineString:ol.xml.makeArrayPusher(ol.format.KML.readLineString_),LinearRing:ol.xml.makeArrayPusher(ol.format.KML.readLinearRing_),MultiGeometry:ol.xml.makeArrayPusher(ol.format.KML.readMultiGeometry_),Point:ol.xml.makeArrayPusher(ol.format.KML.readPoint_),Polygon:ol.xml.makeArrayPusher(ol.format.KML.readPolygon_)});ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{Track:ol.xml.makeArrayPusher(ol.format.KML.readGxTrack_)});ol.format.KML.NETWORK_LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.format.KML.ExtendedDataParser_,Link:ol.format.KML.LinkParser_,address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),description:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),open:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),phoneNumber:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),visibility:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)});ol.format.KML.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)});ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)});ol.format.KML.PAIR_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Style:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),key:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),styleUrl:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyleUrl_)});ol.format.KML.PLACEMARK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.format.KML.ExtendedDataParser_,MultiGeometry:ol.xml.makeObjectPropertySetter(ol.format.KML.readMultiGeometry_,"geometry"),LineString:ol.xml.makeObjectPropertySetter(ol.format.KML.readLineString_,"geometry"),LinearRing:ol.xml.makeObjectPropertySetter(ol.format.KML.readLinearRing_,"geometry"),Point:ol.xml.makeObjectPropertySetter(ol.format.KML.readPoint_,"geometry"),Polygon:ol.xml.makeObjectPropertySetter(ol.format.KML.readPolygon_,"geometry"),Style:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),StyleMap:ol.format.KML.PlacemarkStyleMapParser_,address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),description:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),open:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),phoneNumber:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),styleUrl:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_),visibility:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{MultiTrack:ol.xml.makeObjectPropertySetter(ol.format.KML.readGxMultiTrack_,"geometry"),Track:ol.xml.makeObjectPropertySetter(ol.format.KML.readGxTrack_,"geometry")}));ol.format.KML.POLY_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),fill:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),outline:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)});ol.format.KML.SCHEMA_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{SimpleData:ol.format.KML.SimpleDataParser_});ol.format.KML.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{IconStyle:ol.format.KML.IconStyleParser_,LabelStyle:ol.format.KML.LabelStyleParser_,LineStyle:ol.format.KML.LineStyleParser_,PolyStyle:ol.format.KML.PolyStyleParser_});ol.format.KML.STYLE_MAP_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Pair:ol.format.KML.PairDataParser_});ol.format.KML.prototype.getExtensions=function(){return ol.format.KML.EXTENSIONS_};ol.format.KML.prototype.readDocumentOrFolder_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var c=ol.xml.getLocalName(a);goog.asserts.assert(c=="Document"||c=="Folder","localName should be Document or Folder");var d=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Document:ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),Folder:ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:ol.xml.makeArrayPusher(this.readPlacemark_,this),Style:goog.bind(this.readSharedStyle_,this),StyleMap:goog.bind(this.readSharedStyleMap_,this)});var e=ol.xml.pushParseAndPop([],d,a,b,this);if(goog.isDef(e)){return e}else{return undefined}};ol.format.KML.prototype.readPlacemark_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Placemark","localName should be Placemark");var c=ol.xml.pushParseAndPop({geometry:null},ol.format.KML.PLACEMARK_PARSERS_,a,b);if(!goog.isDef(c)){return undefined}var d=new ol.Feature;var e=a.getAttribute("id");if(!goog.isNull(e)){d.setId(e)}var f=b[0];var g=c["geometry"];if(goog.isDefAndNotNull(g)){ol.format.Feature.transformWithOptions(g,false,f)}d.setGeometry(g);goog.object.remove(c,"geometry");if(this.extractStyles_){var h=c["Style"];var i=c["styleUrl"];var j=ol.format.KML.createFeatureStyleFunction_(h,i,this.defaultStyle_,this.sharedStyles_);d.setStyle(j)}goog.object.remove(c,"Style");d.setProperties(c);return d};ol.format.KML.prototype.readSharedStyle_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Style","localName should be Style");var c=a.getAttribute("id");if(!goog.isNull(c)){var d=ol.format.KML.readStyle_(a,b);if(goog.isDef(d)){var e;if(goog.isDefAndNotNull(a.baseURI)){e=goog.Uri.resolve(a.baseURI,"#"+c).toString()}else{e="#"+c}this.sharedStyles_[e]=d}}};ol.format.KML.prototype.readSharedStyleMap_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="StyleMap","localName should be StyleMap");var c=a.getAttribute("id");if(goog.isNull(c)){return}var d=ol.format.KML.readStyleMapValue_(a,b);if(!goog.isDef(d)){return}var e;if(goog.isDefAndNotNull(a.baseURI)){e=goog.Uri.resolve(a.baseURI,"#"+c).toString()}else{e="#"+c}this.sharedStyles_[e]=d};ol.format.KML.prototype.readFeature;ol.format.KML.prototype.readFeatureFromNode=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!goog.array.contains(ol.format.KML.NAMESPACE_URIS_,a.namespaceURI)){return null}goog.asserts.assert(a.localName=="Placemark","localName should be Placemark");var c=this.readPlacemark_(a,[this.getReadOptions(a,b)]);if(goog.isDef(c)){return c}else{return null}};ol.format.KML.prototype.readFeatures;ol.format.KML.prototype.readFeaturesFromNode=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!goog.array.contains(ol.format.KML.NAMESPACE_URIS_,a.namespaceURI)){return[]}var c;var d=ol.xml.getLocalName(a);if(d=="Document"||d=="Folder"){c=this.readDocumentOrFolder_(a,[this.getReadOptions(a,b)]);if(goog.isDef(c)){return c}else{return[]}}else if(d=="Placemark"){var e=this.readPlacemark_(a,[this.getReadOptions(a,b)]);if(goog.isDef(e)){return[e]}else{return[]}}else if(d=="kml"){c=[];var f;for(f=a.firstElementChild;!goog.isNull(f);f=f.nextElementSibling){var g=this.readFeaturesFromNode(f,b);if(goog.isDef(g)){goog.array.extend(c,g)}}return c}else{return[]}};ol.format.KML.prototype.readName=function(a){if(ol.xml.isDocument(a)){return this.readNameFromDocument(a)}else if(ol.xml.isNode(a)){return this.readNameFromNode(a)}else if(goog.isString(a)){var b=ol.xml.parse(a);return this.readNameFromDocument(b)}else{goog.asserts.fail("Unknown type for source");return undefined}};ol.format.KML.prototype.readNameFromDocument=function(a){var b;for(b=a.firstChild;!goog.isNull(b);b=b.nextSibling){if(b.nodeType==goog.dom.NodeType.ELEMENT){var c=this.readNameFromNode(b);if(goog.isDef(c)){return c}}}return undefined};ol.format.KML.prototype.readNameFromNode=function(a){var b;for(b=a.firstElementChild;!goog.isNull(b);b=b.nextElementSibling){if(goog.array.contains(ol.format.KML.NAMESPACE_URIS_,b.namespaceURI)&&b.localName=="name"){return ol.format.XSD.readString(b)}}for(b=a.firstElementChild;!goog.isNull(b);b=b.nextElementSibling){var c=ol.xml.getLocalName(b);if(goog.array.contains(ol.format.KML.NAMESPACE_URIS_,b.namespaceURI)&&(c=="Document"||c=="Folder"||c=="Placemark"||c=="kml")){var d=this.readNameFromNode(b);if(goog.isDef(d)){return d}}}return undefined};ol.format.KML.prototype.readNetworkLinks=function(a){var b=[];if(ol.xml.isDocument(a)){goog.array.extend(b,this.readNetworkLinksFromDocument(a))}else if(ol.xml.isNode(a)){goog.array.extend(b,this.readNetworkLinksFromNode(a))}else if(goog.isString(a)){var c=ol.xml.parse(a);goog.array.extend(b,this.readNetworkLinksFromDocument(c))}else{goog.asserts.fail("unknown type for source")}return b};ol.format.KML.prototype.readNetworkLinksFromDocument=function(a){var b,c=[];for(b=a.firstChild;!goog.isNull(b);b=b.nextSibling){if(b.nodeType==goog.dom.NodeType.ELEMENT){goog.array.extend(c,this.readNetworkLinksFromNode(b))}}return c};ol.format.KML.prototype.readNetworkLinksFromNode=function(a){var b,c=[];for(b=a.firstElementChild;!goog.isNull(b);b=b.nextElementSibling){if(goog.array.contains(ol.format.KML.NAMESPACE_URIS_,b.namespaceURI)&&b.localName=="NetworkLink"){var d=ol.xml.pushParseAndPop({},ol.format.KML.NETWORK_LINK_PARSERS_,b,[]);c.push(d)}}for(b=a.firstElementChild;!goog.isNull(b);b=b.nextElementSibling){var e=ol.xml.getLocalName(b);if(goog.array.contains(ol.format.KML.NAMESPACE_URIS_,b.namespaceURI)&&(e=="Document"||e=="Folder"||e=="kml")){goog.array.extend(c,this.readNetworkLinksFromNode(b))}}return c};ol.format.KML.prototype.readProjection;ol.format.KML.writeColorTextNode_=function(a,b){var c=ol.color.asArray(b);var d=c.length==4?c[3]:1;var e=[d*255,c[2],c[1],c[0]];var f;for(f=0;f<4;++f){var g=parseInt(e[f],10).toString(16);e[f]=g.length==1?"0"+g:g}ol.format.XSD.writeStringTextNode(a,e.join(""))};ol.format.KML.writeCoordinatesTextNode_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["layout"];var f=d["stride"];var g;if(e==ol.geom.GeometryLayout.XY||e==ol.geom.GeometryLayout.XYM){g=2}else if(e==ol.geom.GeometryLayout.XYZ||e==ol.geom.GeometryLayout.XYZM){g=3}else{goog.asserts.fail("Unknown geometry layout")}var h,i;var j=b.length;var k="";if(j>0){k+=b[0];for(h=1;h<g;++h){k+=","+b[h]}for(i=f;i<j;i+=f){k+=" "+b[i];for(h=1;h<g;++h){k+=","+b[i+h]}}}ol.format.XSD.writeStringTextNode(a,k)};ol.format.KML.writeDocument_=function(a,b,c){var d={node:a};ol.xml.pushSerializeAndPop(d,ol.format.KML.DOCUMENT_SERIALIZERS_,ol.format.KML.DOCUMENT_NODE_FACTORY_,b,c)};ol.format.KML.writeIcon_=function(a,b,c){var d={node:a};var e=c[c.length-1].node;var f=ol.format.KML.ICON_SEQUENCE_[e.namespaceURI];var g=ol.xml.makeSequence(b,f);ol.xml.pushSerializeAndPop(d,ol.format.KML.ICON_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,g,c,f);f=ol.format.KML.ICON_SEQUENCE_[ol.format.KML.GX_NAMESPACE_URIS_[0]];g=ol.xml.makeSequence(b,f);ol.xml.pushSerializeAndPop(d,ol.format.KML.ICON_SERIALIZERS_,ol.format.KML.GX_NODE_FACTORY_,g,c,f)};ol.format.KML.writeIconStyle_=function(a,b,c){var d={node:a};var e={};var f=b.getSrc();var g=b.getSize();var h=b.getImageSize();var i={href:f};if(!goog.isNull(g)){i["w"]=g[0];i["h"]=g[1];var j=b.getAnchor();var k=b.getOrigin();if(!goog.isNull(k)&&!goog.isNull(h)&&k[0]!==0&&k[1]!==g[1]){i["x"]=k[0];i["y"]=h[1]-(k[1]+g[1])}if(!goog.isNull(j)&&j[0]!==0&&j[1]!==g[1]){var l={x:j[0],xunits:ol.style.IconAnchorUnits.PIXELS,y:g[1]-j[1],yunits:ol.style.IconAnchorUnits.PIXELS};e["hotSpot"]=l}}e["Icon"]=i;var m=b.getScale();if(m!==1){e["scale"]=m}var n=b.getRotation();if(n!==0){e["heading"]=n}var o=c[c.length-1].node;var p=ol.format.KML.ICON_STYLE_SEQUENCE_[o.namespaceURI];var q=ol.xml.makeSequence(e,p);ol.xml.pushSerializeAndPop(d,ol.format.KML.ICON_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,q,c,p)};ol.format.KML.writeLabelStyle_=function(a,b,c){var d={node:a};var e={};var f=b.getFill();if(!goog.isNull(f)){e["color"]=f.getColor()}var g=b.getScale();if(goog.isDef(g)&&g!==1){e["scale"]=g}var h=c[c.length-1].node;var i=ol.format.KML.LABEL_STYLE_SEQUENCE_[h.namespaceURI];var j=ol.xml.makeSequence(e,i);ol.xml.pushSerializeAndPop(d,ol.format.KML.LABEL_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,j,c,i)};ol.format.KML.writeLineStyle_=function(a,b,c){var d={node:a};var e={color:b.getColor(),width:b.getWidth()};var f=c[c.length-1].node;var g=ol.format.KML.LINE_STYLE_SEQUENCE_[f.namespaceURI];var h=ol.xml.makeSequence(e,g);ol.xml.pushSerializeAndPop(d,ol.format.KML.LINE_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,h,c,g)};ol.format.KML.writeMultiGeometry_=function(a,b,c){goog.asserts.assert(b instanceof ol.geom.MultiPoint||b instanceof ol.geom.MultiLineString||b instanceof ol.geom.MultiPolygon,"geometry should be one of: ol.geom.MultiPoint, "+"ol.geom.MultiLineString or ol.geom.MultiPolygon");var d={node:a};var e=b.getType();var f;var g;if(e==ol.geom.GeometryType.MULTI_POINT){f=b.getPoints();g=ol.format.KML.POINT_NODE_FACTORY_}else if(e==ol.geom.GeometryType.MULTI_LINE_STRING){f=b.getLineStrings();g=ol.format.KML.LINE_STRING_NODE_FACTORY_}else if(e==ol.geom.GeometryType.MULTI_POLYGON){f=b.getPolygons();g=ol.format.KML.POLYGON_NODE_FACTORY_}else{goog.asserts.fail("Unknown geometry type: "+e)}ol.xml.pushSerializeAndPop(d,ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_,g,f,c)};ol.format.KML.writeBoundaryIs_=function(a,b,c){var d={node:a};ol.xml.pushSerializeAndPop(d,ol.format.KML.BOUNDARY_IS_SERIALIZERS_,ol.format.KML.LINEAR_RING_NODE_FACTORY_,[b],c)};ol.format.KML.writePlacemark_=function(a,b,c){var d={node:a};if(goog.isDefAndNotNull(b.getId())){a.setAttribute("id",b.getId())}var e=b.getProperties();var f=b.getStyleFunction();if(goog.isDef(f)){var g=f.call(b,0);if(!goog.isNull(g)&&g.length>0){e["Style"]=g[0];var h=g[0].getText();if(!goog.isNull(h)){e["name"]=h.getText()}}}var i=c[c.length-1].node;var j=ol.format.KML.PLACEMARK_SEQUENCE_[i.namespaceURI];var k=ol.xml.makeSequence(e,j);ol.xml.pushSerializeAndPop(d,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,k,c,j);var l=c[0];var m=b.getGeometry();if(goog.isDefAndNotNull(m)){m=ol.format.Feature.transformWithOptions(m,true,l)}ol.xml.pushSerializeAndPop(d,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.format.KML.GEOMETRY_NODE_FACTORY_,[m],c)};ol.format.KML.writePrimitiveGeometry_=function(a,b,c){goog.asserts.assert(b instanceof ol.geom.Point||b instanceof ol.geom.LineString||b instanceof ol.geom.LinearRing,"geometry should be one of ol.geom.Point, ol.geom.LineString "+"or ol.geom.LinearRing");var d=b.getFlatCoordinates();var e={node:a};e["layout"]=b.getLayout();e["stride"]=b.getStride();ol.xml.pushSerializeAndPop(e,ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_,ol.format.KML.COORDINATES_NODE_FACTORY_,[d],c)};ol.format.KML.writePolygon_=function(a,b,c){goog.asserts.assertInstanceof(b,ol.geom.Polygon,"polygon should be an ol.geom.Polygon");var d=b.getLinearRings();goog.asserts.assert(d.length>0,"linearRings should not be empty");var e=d.shift();var f={node:a};ol.xml.pushSerializeAndPop(f,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_,d,c);ol.xml.pushSerializeAndPop(f,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_,[e],c)};ol.format.KML.writePolyStyle_=function(a,b,c){var d={node:a};ol.xml.pushSerializeAndPop(d,ol.format.KML.POLY_STYLE_SERIALIZERS_,ol.format.KML.COLOR_NODE_FACTORY_,[b.getColor()],c)};ol.format.KML.writeScaleTextNode_=function(a,b){ol.format.XSD.writeDecimalTextNode(a,b*b)};ol.format.KML.writeStyle_=function(a,b,c){var d={node:a};var e={};var f=b.getFill();var g=b.getStroke();var h=b.getImage();var i=b.getText();if(!goog.isNull(h)){e["IconStyle"]=h}if(!goog.isNull(i)){e["LabelStyle"]=i}if(!goog.isNull(g)){e["LineStyle"]=g}if(!goog.isNull(f)){e["PolyStyle"]=f}var j=c[c.length-1].node;var k=ol.format.KML.STYLE_SEQUENCE_[j.namespaceURI];var l=ol.xml.makeSequence(e,k);ol.xml.pushSerializeAndPop(d,ol.format.KML.STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,l,c,k)};ol.format.KML.writeVec2_=function(a,b){a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("xunits",b.xunits);a.setAttribute("yunits",b.yunits)};ol.format.KML.KML_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["Document","Placemark"]);ol.format.KML.KML_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Document:ol.xml.makeChildAppender(ol.format.KML.writeDocument_),Placemark:ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)});ol.format.KML.DOCUMENT_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Placemark:ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)});ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry"};ol.format.KML.ICON_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["href"],ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,["x","y","w","h"]));ol.format.KML.ICON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{x:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),y:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),w:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),h:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)}));ol.format.KML.ICON_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["scale","heading","Icon","hotSpot"]);ol.format.KML.ICON_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Icon:ol.xml.makeChildAppender(ol.format.KML.writeIcon_),heading:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),hotSpot:ol.xml.makeChildAppender(ol.format.KML.writeVec2_),scale:ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)});ol.format.KML.LABEL_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["color","scale"]);ol.format.KML.LABEL_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),scale:ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)});ol.format.KML.LINE_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["color","width"]);ol.format.KML.LINE_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),width:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)});ol.format.KML.BOUNDARY_IS_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_)});ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LineString:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Point:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Polygon:ol.xml.makeChildAppender(ol.format.KML.writePolygon_)});ol.format.KML.PLACEMARK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]);ol.format.KML.PLACEMARK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{MultiGeometry:ol.xml.makeChildAppender(ol.format.KML.writeMultiGeometry_),LineString:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),LinearRing:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Point:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Polygon:ol.xml.makeChildAppender(ol.format.KML.writePolygon_),Style:ol.xml.makeChildAppender(ol.format.KML.writeStyle_),address:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),description:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),open:ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode),phoneNumber:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),styleUrl:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),visibility:ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode)});ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeChildAppender(ol.format.KML.writeCoordinatesTextNode_)});ol.format.KML.POLYGON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{outerBoundaryIs:ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_),innerBoundaryIs:ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_)});ol.format.KML.POLY_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_)});ol.format.KML.STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["IconStyle","LabelStyle","LineStyle","PolyStyle"]);ol.format.KML.STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{IconStyle:ol.xml.makeChildAppender(ol.format.KML.writeIconStyle_),LabelStyle:ol.xml.makeChildAppender(ol.format.KML.writeLabelStyle_),LineStyle:ol.xml.makeChildAppender(ol.format.KML.writeLineStyle_),PolyStyle:ol.xml.makeChildAppender(ol.format.KML.writePolyStyle_)});ol.format.KML.GX_NODE_FACTORY_=function(a,b,c){return ol.xml.createElementNS(ol.format.KML.GX_NAMESPACE_URIS_[0],"gx:"+c)};ol.format.KML.DOCUMENT_NODE_FACTORY_=function(a,b,c){goog.asserts.assertInstanceof(a,ol.Feature,"value should be an ol.Feature");var d=b[b.length-1].node;goog.asserts.assert(ol.xml.isNode(d),"parentNode should be an XML node");return ol.xml.createElementNS(d.namespaceURI,"Placemark")};ol.format.KML.GEOMETRY_NODE_FACTORY_=function(a,b,c){if(goog.isDefAndNotNull(a)){goog.asserts.assertInstanceof(a,ol.geom.Geometry,"value should be an ol.geom.Geometry");var d=b[b.length-1].node;goog.asserts.assert(ol.xml.isNode(d),"parentNode should be an XML node");return ol.xml.createElementNS(d.namespaceURI,ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_[a.getType()])}};ol.format.KML.COLOR_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("color");ol.format.KML.COORDINATES_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("coordinates");ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("innerBoundaryIs");ol.format.KML.POINT_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Point");ol.format.KML.LINE_STRING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("LineString");ol.format.KML.LINEAR_RING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("LinearRing");ol.format.KML.POLYGON_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Polygon");ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("outerBoundaryIs");ol.format.KML.prototype.writeFeatures;ol.format.KML.prototype.writeFeaturesNode=function(a,b){b=this.adaptOptions(b);var c=ol.xml.createElementNS(ol.format.KML.NAMESPACE_URIS_[4],"kml");var d="http://www.w3.org/2000/xmlns/";var e="http://www.w3.org/2001/XMLSchema-instance";ol.xml.setAttributeNS(c,d,"xmlns:gx",ol.format.KML.GX_NAMESPACE_URIS_[0]);ol.xml.setAttributeNS(c,d,"xmlns:xsi",e);ol.xml.setAttributeNS(c,e,"xsi:schemaLocation",ol.format.KML.SCHEMA_LOCATION_);var f={node:c};var g={};if(a.length>1){g["Document"]=a}else if(a.length==1){g["Placemark"]=a[0]}var h=ol.format.KML.KML_SEQUENCE_[c.namespaceURI];var i=ol.xml.makeSequence(g,h);ol.xml.pushSerializeAndPop(f,ol.format.KML.KML_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,i,[b],h);return c};goog.provide("ol.format.OSMXML");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");goog.require("ol.xml");ol.format.OSMXML=function(){goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326")};goog.inherits(ol.format.OSMXML,ol.format.XMLFeature);ol.format.OSMXML.EXTENSIONS_=[".osm"];ol.format.OSMXML.prototype.getExtensions=function(){return ol.format.OSMXML.EXTENSIONS_};ol.format.OSMXML.readNode_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="node","localName should be node");var c=b[0];var d=b[b.length-1];var e=a.getAttribute("id");var f=[parseFloat(a.getAttribute("lon")),parseFloat(a.getAttribute("lat"))];d.nodes[e]=f;var g=ol.xml.pushParseAndPop({tags:{}},ol.format.OSMXML.NODE_PARSERS_,a,b);if(!goog.object.isEmpty(g.tags)){var h=new ol.geom.Point(f);ol.format.Feature.transformWithOptions(h,false,c);var i=new ol.Feature(h);i.setId(e);i.setProperties(g.tags);d.features.push(i)}};ol.format.OSMXML.readWay_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="way","localName should be way");var c=b[0];var d=a.getAttribute("id");var e=ol.xml.pushParseAndPop({ndrefs:[],tags:{}},ol.format.OSMXML.WAY_PARSERS_,a,b);var f=b[b.length-1];var g=[];for(var h=0,i=e.ndrefs.length;h<i;h++){var j=f.nodes[e.ndrefs[h]];goog.array.extend(g,j)}var k;if(e.ndrefs[0]==e.ndrefs[e.ndrefs.length-1]){k=new ol.geom.Polygon(null);k.setFlatCoordinates(ol.geom.GeometryLayout.XY,g,[g.length])}else{k=new ol.geom.LineString(null);k.setFlatCoordinates(ol.geom.GeometryLayout.XY,g)}ol.format.Feature.transformWithOptions(k,false,c);var l=new ol.Feature(k);l.setId(d);l.setProperties(e.tags);f.features.push(l)};ol.format.OSMXML.readNd_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="nd","localName should be nd");var c=b[b.length-1];c.ndrefs.push(a.getAttribute("ref"))};ol.format.OSMXML.readTag_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="tag","localName should be tag");var c=b[b.length-1];c.tags[a.getAttribute("k")]=a.getAttribute("v")};ol.format.OSMXML.NAMESPACE_URIS_=[null];ol.format.OSMXML.WAY_PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{nd:ol.format.OSMXML.readNd_,tag:ol.format.OSMXML.readTag_});ol.format.OSMXML.PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{node:ol.format.OSMXML.readNode_,way:ol.format.OSMXML.readWay_});ol.format.OSMXML.NODE_PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{tag:ol.format.OSMXML.readTag_});ol.format.OSMXML.prototype.readFeatures;ol.format.OSMXML.prototype.readFeaturesFromNode=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var c=this.getReadOptions(a,b);if(a.localName=="osm"){var d=ol.xml.pushParseAndPop({nodes:{},features:[]},ol.format.OSMXML.PARSERS_,a,[c]);if(goog.isDef(d.features)){return d.features}}return[]};ol.format.OSMXML.prototype.readProjection;goog.provide("ol.format.XLink");ol.format.XLink.NAMESPACE_URI="http://www.w3.org/1999/xlink";ol.format.XLink.readHref=function(a){return a.getAttributeNS(ol.format.XLink.NAMESPACE_URI,"href")};goog.provide("ol.format.XML");goog.require("goog.asserts");goog.require("ol.xml");ol.format.XML=function(){};ol.format.XML.prototype.read=function(a){if(ol.xml.isDocument(a)){return this.readFromDocument(a)}else if(ol.xml.isNode(a)){return this.readFromNode(a)}else if(goog.isString(a)){var b=ol.xml.parse(a);return this.readFromDocument(b)}else{goog.asserts.fail();return null}};ol.format.XML.prototype.readFromDocument=goog.abstractMethod;ol.format.XML.prototype.readFromNode=goog.abstractMethod;goog.provide("ol.format.OWS");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.format.XLink");goog.require("ol.format.XML");goog.require("ol.format.XSD");goog.require("ol.xml");ol.format.OWS=function(){goog.base(this)};goog.inherits(ol.format.OWS,ol.format.XML);ol.format.OWS.prototype.readFromDocument=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var b=a.firstChild;!goog.isNull(b);b=b.nextSibling){if(b.nodeType==goog.dom.NodeType.ELEMENT){return this.readFromNode(b)}}return null};ol.format.OWS.prototype.readFromNode=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var b=ol.xml.pushParseAndPop({},ol.format.OWS.PARSERS_,a,[]);return goog.isDef(b)?b:null};ol.format.OWS.readAddress_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Address","localName should be Address");return ol.xml.pushParseAndPop({},ol.format.OWS.ADDRESS_PARSERS_,a,b)};ol.format.OWS.readAllowedValues_=function(a,b){
goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="AllowedValues","localName should be AllowedValues");return ol.xml.pushParseAndPop({},ol.format.OWS.ALLOWED_VALUES_PARSERS_,a,b)};ol.format.OWS.readConstraint_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Constraint","localName should be Constraint");var c=a.getAttribute("name");if(!goog.isDef(c)){return undefined}return ol.xml.pushParseAndPop({name:c},ol.format.OWS.CONSTRAINT_PARSERS_,a,b)};ol.format.OWS.readContactInfo_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="ContactInfo","localName should be ContactInfo");return ol.xml.pushParseAndPop({},ol.format.OWS.CONTACT_INFO_PARSERS_,a,b)};ol.format.OWS.readDcp_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="DCP","localName should be DCP");return ol.xml.pushParseAndPop({},ol.format.OWS.DCP_PARSERS_,a,b)};ol.format.OWS.readGet_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Get","localName should be Get");var c=ol.format.XLink.readHref(a);if(!goog.isDef(c)){return undefined}return ol.xml.pushParseAndPop({href:c},ol.format.OWS.REQUEST_METHOD_PARSERS_,a,b)};ol.format.OWS.readHttp_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="HTTP","localName should be HTTP");return ol.xml.pushParseAndPop({},ol.format.OWS.HTTP_PARSERS_,a,b)};ol.format.OWS.readOperation_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Operation","localName should be Operation");var c=a.getAttribute("name");var d=ol.xml.pushParseAndPop({},ol.format.OWS.OPERATION_PARSERS_,a,b);if(!goog.isDef(d)){return undefined}var e=b[b.length-1];goog.asserts.assert(goog.isObject(e),"object should be an Object");e[c]=d};ol.format.OWS.readOperationsMetadata_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="OperationsMetadata","localName should be OperationsMetadata");return ol.xml.pushParseAndPop({},ol.format.OWS.OPERATIONS_METADATA_PARSERS_,a,b)};ol.format.OWS.readPhone_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Phone","localName should be Phone");return ol.xml.pushParseAndPop({},ol.format.OWS.PHONE_PARSERS_,a,b)};ol.format.OWS.readServiceIdentification_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="ServiceIdentification","localName should be ServiceIdentification");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_,a,b)};ol.format.OWS.readServiceContact_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="ServiceContact","localName should be ServiceContact");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_CONTACT_PARSERS_,a,b)};ol.format.OWS.readServiceProvider_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="ServiceProvider","localName should be ServiceProvider");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_PROVIDER_PARSERS_,a,b)};ol.format.OWS.readValue_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Value","localName should be Value");return ol.format.XSD.readString(a)};ol.format.OWS.NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"];ol.format.OWS.PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{ServiceIdentification:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceIdentification_),ServiceProvider:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceProvider_),OperationsMetadata:ol.xml.makeObjectPropertySetter(ol.format.OWS.readOperationsMetadata_)});ol.format.OWS.ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{DeliveryPoint:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),City:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),AdministrativeArea:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PostalCode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Country:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ElectronicMailAddress:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.ALLOWED_VALUES_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Value:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readValue_)});ol.format.OWS.CONSTRAINT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{AllowedValues:ol.xml.makeObjectPropertySetter(ol.format.OWS.readAllowedValues_)});ol.format.OWS.CONTACT_INFO_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Phone:ol.xml.makeObjectPropertySetter(ol.format.OWS.readPhone_),Address:ol.xml.makeObjectPropertySetter(ol.format.OWS.readAddress_)});ol.format.OWS.DCP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{HTTP:ol.xml.makeObjectPropertySetter(ol.format.OWS.readHttp_)});ol.format.OWS.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Get:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readGet_),Post:undefined});ol.format.OWS.OPERATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{DCP:ol.xml.makeObjectPropertySetter(ol.format.OWS.readDcp_)});ol.format.OWS.OPERATIONS_METADATA_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Operation:ol.format.OWS.readOperation_});ol.format.OWS.PHONE_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Voice:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Facsimile:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.REQUEST_METHOD_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Constraint:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readConstraint_)});ol.format.OWS.SERVICE_CONTACT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{IndividualName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PositionName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactInfo:ol.xml.makeObjectPropertySetter(ol.format.OWS.readContactInfo_)});ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ServiceTypeVersion:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ServiceType:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.SERVICE_PROVIDER_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{ProviderName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ProviderSite:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),ServiceContact:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceContact_)});goog.provide("ol.geom.flat.flip");goog.require("goog.asserts");ol.geom.flat.flip.flipXY=function(a,b,c,d,e,f){var g,h;if(goog.isDef(e)){g=e;h=goog.isDef(f)?f:0}else{goog.asserts.assert(!goog.isDef(f),"opt_destOffSet should be defined");g=[];h=0}var i,j;for(i=b;i<c;){var k=a[i++];g[h++]=a[i++];g[h++]=k;for(j=2;j<d;++j){g[h++]=a[i++]}}g.length=h;return g};goog.provide("ol.format.Polyline");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.TextFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.flip");goog.require("ol.geom.flat.inflate");goog.require("ol.proj");ol.format.Polyline=function(a){var b=goog.isDef(a)?a:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.factor_=goog.isDef(b.factor)?b.factor:1e5;this.geometryLayout_=goog.isDef(b.geometryLayout)?b.geometryLayout:ol.geom.GeometryLayout.XY};goog.inherits(ol.format.Polyline,ol.format.TextFeature);ol.format.Polyline.encodeDeltas=function(a,b,c){var d=goog.isDef(c)?c:1e5;var e;var f=new Array(b);for(e=0;e<b;++e){f[e]=0}var g,h;for(g=0,h=a.length;g<h;){for(e=0;e<b;++e,++g){var i=a[g];var j=i-f[e];f[e]=i;a[g]=j}}return ol.format.Polyline.encodeFloats(a,d)};ol.format.Polyline.decodeDeltas=function(a,b,c){var d=goog.isDef(c)?c:1e5;var e;var f=new Array(b);for(e=0;e<b;++e){f[e]=0}var g=ol.format.Polyline.decodeFloats(a,d);var h,i;for(h=0,i=g.length;h<i;){for(e=0;e<b;++e,++h){f[e]+=g[h];g[h]=f[e]}}return g};ol.format.Polyline.encodeFloats=function(a,b){var c=goog.isDef(b)?b:1e5;var d,e;for(d=0,e=a.length;d<e;++d){a[d]=Math.round(a[d]*c)}return ol.format.Polyline.encodeSignedIntegers(a)};ol.format.Polyline.decodeFloats=function(a,b){var c=goog.isDef(b)?b:1e5;var d=ol.format.Polyline.decodeSignedIntegers(a);var e,f;for(e=0,f=d.length;e<f;++e){d[e]/=c}return d};ol.format.Polyline.encodeSignedIntegers=function(a){var b,c;for(b=0,c=a.length;b<c;++b){var d=a[b];a[b]=d<0?~(d<<1):d<<1}return ol.format.Polyline.encodeUnsignedIntegers(a)};ol.format.Polyline.decodeSignedIntegers=function(a){var b=ol.format.Polyline.decodeUnsignedIntegers(a);var c,d;for(c=0,d=b.length;c<d;++c){var e=b[c];b[c]=e&1?~(e>>1):e>>1}return b};ol.format.Polyline.encodeUnsignedIntegers=function(a){var b="";var c,d;for(c=0,d=a.length;c<d;++c){b+=ol.format.Polyline.encodeUnsignedInteger(a[c])}return b};ol.format.Polyline.decodeUnsignedIntegers=function(a){var b=[];var c=0;var d=0;var e,f;for(e=0,f=a.length;e<f;++e){var g=a.charCodeAt(e)-63;c|=(g&31)<<d;if(g<32){b.push(c);c=0;d=0}else{d+=5}}return b};ol.format.Polyline.encodeUnsignedInteger=function(a){var b,c="";while(a>=32){b=(32|a&31)+63;c+=String.fromCharCode(b);a>>=5}b=a+63;c+=String.fromCharCode(b);return c};ol.format.Polyline.prototype.readFeature;ol.format.Polyline.prototype.readFeatureFromText=function(a,b){var c=this.readGeometryFromText(a,b);return new ol.Feature(c)};ol.format.Polyline.prototype.readFeatures;ol.format.Polyline.prototype.readFeaturesFromText=function(a,b){var c=this.readFeatureFromText(a,b);return[c]};ol.format.Polyline.prototype.readGeometry;ol.format.Polyline.prototype.readGeometryFromText=function(a,b){var c=ol.geom.SimpleGeometry.getStrideForLayout(this.geometryLayout_);var d=ol.format.Polyline.decodeDeltas(a,c,this.factor_);ol.geom.flat.flip.flipXY(d,0,d.length,c,d);var e=ol.geom.flat.inflate.coordinates(d,0,d.length,c);return ol.format.Feature.transformWithOptions(new ol.geom.LineString(e,this.geometryLayout_),false,this.adaptOptions(b))};ol.format.Polyline.prototype.readProjection;ol.format.Polyline.prototype.writeFeatureText=function(a,b){var c=a.getGeometry();if(goog.isDefAndNotNull(c)){return this.writeGeometryText(c,b)}else{goog.asserts.fail("geometry needs to be defined");return""}};ol.format.Polyline.prototype.writeFeaturesText=function(a,b){goog.asserts.assert(a.length==1,"features array should have 1 item");return this.writeFeatureText(a[0],b)};ol.format.Polyline.prototype.writeGeometry;ol.format.Polyline.prototype.writeGeometryText=function(a,b){goog.asserts.assertInstanceof(a,ol.geom.LineString,"geometry should be an ol.geom.LineString");a=ol.format.Feature.transformWithOptions(a,true,this.adaptOptions(b));var c=a.getFlatCoordinates();var d=a.getStride();ol.geom.flat.flip.flipXY(c,0,c.length,d,c);return ol.format.Polyline.encodeDeltas(c,d,this.factor_)};goog.provide("ol.format.TopoJSON");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.JSONFeature");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");ol.format.TopoJSON=function(a){var b=goog.isDef(a)?a:{};goog.base(this);this.defaultDataProjection=ol.proj.get(goog.isDefAndNotNull(b.defaultDataProjection)?b.defaultDataProjection:"EPSG:4326")};goog.inherits(ol.format.TopoJSON,ol.format.JSONFeature);ol.format.TopoJSON.EXTENSIONS_=[".topojson"];ol.format.TopoJSON.concatenateArcs_=function(a,b){var c=[];var d,e;var f,g;var h,i;for(f=0,g=a.length;f<g;++f){d=a[f];if(f>0){c.pop()}if(d>=0){e=b[d]}else{e=b[~d].slice().reverse()}c.push.apply(c,e)}for(h=0,i=c.length;h<i;++h){c[h]=c[h].slice()}return c};ol.format.TopoJSON.readPointGeometry_=function(a,b,c){var d=a.coordinates;if(!goog.isNull(b)&&!goog.isNull(c)){ol.format.TopoJSON.transformVertex_(d,b,c)}return new ol.geom.Point(d)};ol.format.TopoJSON.readMultiPointGeometry_=function(a,b,c){var d=a.coordinates;var e,f;if(!goog.isNull(b)&&!goog.isNull(c)){for(e=0,f=d.length;e<f;++e){ol.format.TopoJSON.transformVertex_(d[e],b,c)}}return new ol.geom.MultiPoint(d)};ol.format.TopoJSON.readLineStringGeometry_=function(a,b){var c=ol.format.TopoJSON.concatenateArcs_(a.arcs,b);return new ol.geom.LineString(c)};ol.format.TopoJSON.readMultiLineStringGeometry_=function(a,b){var c=[];var d,e;for(d=0,e=a.arcs.length;d<e;++d){c[d]=ol.format.TopoJSON.concatenateArcs_(a.arcs[d],b)}return new ol.geom.MultiLineString(c)};ol.format.TopoJSON.readPolygonGeometry_=function(a,b){var c=[];var d,e;for(d=0,e=a.arcs.length;d<e;++d){c[d]=ol.format.TopoJSON.concatenateArcs_(a.arcs[d],b)}return new ol.geom.Polygon(c)};ol.format.TopoJSON.readMultiPolygonGeometry_=function(a,b){var c=[];var d,e,f,g;var h,i;for(h=0,i=a.arcs.length;h<i;++h){d=a.arcs[h];e=[];for(f=0,g=d.length;f<g;++f){e[f]=ol.format.TopoJSON.concatenateArcs_(d[f],b)}c[h]=e}return new ol.geom.MultiPolygon(c)};ol.format.TopoJSON.prototype.getExtensions=function(){return ol.format.TopoJSON.EXTENSIONS_};ol.format.TopoJSON.readFeaturesFromGeometryCollection_=function(a,b,c,d,e){var f=a.geometries;var g=[];var h,i;for(h=0,i=f.length;h<i;++h){g[h]=ol.format.TopoJSON.readFeatureFromGeometry_(f[h],b,c,d,e)}return g};ol.format.TopoJSON.readFeatureFromGeometry_=function(a,b,c,d,e){var f;var g=a.type;var h=ol.format.TopoJSON.GEOMETRY_READERS_[g];goog.asserts.assert(goog.isDef(h),"geometryReader should be defined");if(g==="Point"||g==="MultiPoint"){f=h(a,c,d)}else{f=h(a,b)}var i=new ol.Feature;i.setGeometry(ol.format.Feature.transformWithOptions(f,false,e));if(goog.isDef(a.id)){i.setId(a.id)}if(goog.isDef(a.properties)){i.setProperties(a.properties)}return i};ol.format.TopoJSON.prototype.readFeatures;ol.format.TopoJSON.prototype.readFeaturesFromObject=function(a,b){if(a.type=="Topology"){var c=a;var d,e=null,f=null;if(goog.isDef(c.transform)){d=c.transform;e=d.scale;f=d.translate}var g=c.arcs;if(goog.isDef(d)){ol.format.TopoJSON.transformArcs_(g,e,f)}var h=[];var i=goog.object.getValues(c.objects);var j,k;var l;for(j=0,k=i.length;j<k;++j){if(i[j].type==="GeometryCollection"){l=i[j];h.push.apply(h,ol.format.TopoJSON.readFeaturesFromGeometryCollection_(l,g,e,f,b))}else{l=i[j];h.push(ol.format.TopoJSON.readFeatureFromGeometry_(l,g,e,f,b))}}return h}else{return[]}};ol.format.TopoJSON.transformArcs_=function(a,b,c){var d,e;for(d=0,e=a.length;d<e;++d){ol.format.TopoJSON.transformArc_(a[d],b,c)}};ol.format.TopoJSON.transformArc_=function(a,b,c){var d=0;var e=0;var f;var g,h;for(g=0,h=a.length;g<h;++g){f=a[g];d+=f[0];e+=f[1];f[0]=d;f[1]=e;ol.format.TopoJSON.transformVertex_(f,b,c)}};ol.format.TopoJSON.transformVertex_=function(a,b,c){a[0]=a[0]*b[0]+c[0];a[1]=a[1]*b[1]+c[1]};ol.format.TopoJSON.prototype.readProjection=function(a){return this.defaultDataProjection};ol.format.TopoJSON.GEOMETRY_READERS_={Point:ol.format.TopoJSON.readPointGeometry_,LineString:ol.format.TopoJSON.readLineStringGeometry_,Polygon:ol.format.TopoJSON.readPolygonGeometry_,MultiPoint:ol.format.TopoJSON.readMultiPointGeometry_,MultiLineString:ol.format.TopoJSON.readMultiLineStringGeometry_,MultiPolygon:ol.format.TopoJSON.readMultiPolygonGeometry_};goog.provide("ol.format.WFS");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("ol.format.GML3");goog.require("ol.format.GMLBase");goog.require("ol.format.XMLFeature");goog.require("ol.format.XSD");goog.require("ol.geom.Geometry");goog.require("ol.proj");goog.require("ol.xml");ol.format.WFS=function(a){var b=goog.isDef(a)?a:{};this.featureType_=b.featureType;this.featureNS_=b.featureNS;this.gmlFormat_=goog.isDef(b.gmlFormat)?b.gmlFormat:new ol.format.GML3;this.schemaLocation_=goog.isDef(b.schemaLocation)?b.schemaLocation:ol.format.WFS.SCHEMA_LOCATION;goog.base(this)};goog.inherits(ol.format.WFS,ol.format.XMLFeature);ol.format.WFS.FEATURE_PREFIX="feature";ol.format.WFS.XMLNS="http://www.w3.org/2000/xmlns/";ol.format.WFS.FeatureCollectionMetadata;ol.format.WFS.TransactionResponse;ol.format.WFS.SCHEMA_LOCATION="http://www.opengis.net/wfs "+"http://schemas.opengis.net/wfs/1.1.0/wfs.xsd";ol.format.WFS.prototype.readFeatures;ol.format.WFS.prototype.readFeaturesFromNode=function(a,b){var c={featureType:this.featureType_,featureNS:this.featureNS_};goog.object.extend(c,this.getReadOptions(a,goog.isDef(b)?b:{}));var d=[c];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]["featureMember"]=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);var e=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,a,d,this.gmlFormat_);if(!goog.isDef(e)){e=[]}return e};ol.format.WFS.prototype.readTransactionResponse=function(a){if(ol.xml.isDocument(a)){return this.readTransactionResponseFromDocument(a)}else if(ol.xml.isNode(a)){return this.readTransactionResponseFromNode(a)}else if(goog.isString(a)){var b=ol.xml.parse(a);return this.readTransactionResponseFromDocument(b)}else{goog.asserts.fail("Unknown source type");return undefined}};ol.format.WFS.prototype.readFeatureCollectionMetadata=function(a){if(ol.xml.isDocument(a)){return this.readFeatureCollectionMetadataFromDocument(a)}else if(ol.xml.isNode(a)){return this.readFeatureCollectionMetadataFromNode(a)}else if(goog.isString(a)){var b=ol.xml.parse(a);return this.readFeatureCollectionMetadataFromDocument(b)}else{goog.asserts.fail("Unknown source type");return undefined}};ol.format.WFS.prototype.readFeatureCollectionMetadataFromDocument=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var b=a.firstChild;!goog.isNull(b);b=b.nextSibling){if(b.nodeType==goog.dom.NodeType.ELEMENT){return this.readFeatureCollectionMetadataFromNode(b)}}return undefined};ol.format.WFS.FEATURE_COLLECTION_PARSERS_={"http://www.opengis.net/gml":{boundedBy:ol.xml.makeObjectPropertySetter(ol.format.GMLBase.prototype.readGeometryElement,"bounds")}};ol.format.WFS.prototype.readFeatureCollectionMetadataFromNode=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="FeatureCollection","localName should be FeatureCollection");var b={};var c=ol.format.XSD.readNonNegativeIntegerString(a.getAttribute("numberOfFeatures"));b["numberOfFeatures"]=c;return ol.xml.pushParseAndPop(b,ol.format.WFS.FEATURE_COLLECTION_PARSERS_,a,[],this.gmlFormat_)};ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_={"http://www.opengis.net/wfs":{totalInserted:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),totalUpdated:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),totalDeleted:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)}};ol.format.WFS.readTransactionSummary_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_,a,b)};ol.format.WFS.OGC_FID_PARSERS_={"http://www.opengis.net/ogc":{FeatureId:ol.xml.makeArrayPusher(function(a,b){return a.getAttribute("fid")})}};ol.format.WFS.fidParser_=function(a,b){ol.xml.parseNode(ol.format.WFS.OGC_FID_PARSERS_,a,b)};ol.format.WFS.INSERT_RESULTS_PARSERS_={"http://www.opengis.net/wfs":{Feature:ol.format.WFS.fidParser_}};ol.format.WFS.readInsertResults_=function(a,b){return ol.xml.pushParseAndPop([],ol.format.WFS.INSERT_RESULTS_PARSERS_,a,b)};ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_={"http://www.opengis.net/wfs":{TransactionSummary:ol.xml.makeObjectPropertySetter(ol.format.WFS.readTransactionSummary_,"transactionSummary"),InsertResults:ol.xml.makeObjectPropertySetter(ol.format.WFS.readInsertResults_,"insertIds")}};ol.format.WFS.prototype.readTransactionResponseFromDocument=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var b=a.firstChild;!goog.isNull(b);b=b.nextSibling){if(b.nodeType==goog.dom.NodeType.ELEMENT){return this.readTransactionResponseFromNode(b)}}return undefined};ol.format.WFS.prototype.readTransactionResponseFromNode=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should  be ELEMENT");goog.asserts.assert(a.localName=="TransactionResponse","localName should be TransactionResponse");return ol.xml.pushParseAndPop({},ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_,a,[])};ol.format.WFS.QUERY_SERIALIZERS_={"http://www.opengis.net/wfs":{PropertyName:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};ol.format.WFS.writeFeature_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["featureType"];var f=d["featureNS"];var g=ol.xml.createElementNS(f,e);a.appendChild(g);ol.format.GML3.prototype.writeFeatureElement(g,b,c)};ol.format.WFS.writeOgcFidFilter_=function(a,b,c){var d=ol.xml.createElementNS("http://www.opengis.net/ogc","Filter");var e=ol.xml.createElementNS("http://www.opengis.net/ogc","FeatureId");d.appendChild(e);e.setAttribute("fid",b);a.appendChild(d)};ol.format.WFS.writeDelete_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["featureType"];var f=d["featurePrefix"];f=goog.isDef(f)?f:ol.format.WFS.FEATURE_PREFIX;var g=d["featureNS"];a.setAttribute("typeName",f+":"+e);ol.xml.setAttributeNS(a,ol.format.WFS.XMLNS,"xmlns:"+f,g);var h=b.getId();if(goog.isDef(h)){ol.format.WFS.writeOgcFidFilter_(a,h,c)}};ol.format.WFS.writeUpdate_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["featureType"];var f=d["featurePrefix"];f=goog.isDef(f)?f:ol.format.WFS.FEATURE_PREFIX;var g=d["featureNS"];a.setAttribute("typeName",f+":"+e);ol.xml.setAttributeNS(a,ol.format.WFS.XMLNS,"xmlns:"+f,g);var h=b.getId();if(goog.isDef(h)){var i=b.getKeys();var j=[];for(var k=0,l=i.length;k<l;k++){var m=b.get(i[k]);if(goog.isDef(m)){j.push({name:i[k],value:m})}}ol.xml.pushSerializeAndPop({node:a,srsName:d["srsName"]},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Property"),j,c);ol.format.WFS.writeOgcFidFilter_(a,h,c)}};ol.format.WFS.writeProperty_=function(a,b,c){var d=ol.xml.createElementNS("http://www.opengis.net/wfs","Name");a.appendChild(d);ol.format.XSD.writeStringTextNode(d,b.name);if(goog.isDefAndNotNull(b.value)){var e=ol.xml.createElementNS("http://www.opengis.net/wfs","Value");a.appendChild(e);if(b.value instanceof ol.geom.Geometry){ol.format.GML3.prototype.writeGeometryElement(e,b.value,c)}else{ol.format.XSD.writeStringTextNode(e,b.value)}}};ol.format.WFS.writeNative_=function(a,b,c){if(goog.isDef(b.vendorId)){a.setAttribute("vendorId",b.vendorId)}if(goog.isDef(b.safeToIgnore)){a.setAttribute("safeToIgnore",b.safeToIgnore)}if(goog.isDef(b.value)){ol.format.XSD.writeStringTextNode(a,b.value)}};ol.format.WFS.TRANSACTION_SERIALIZERS_={"http://www.opengis.net/wfs":{Insert:ol.xml.makeChildAppender(ol.format.WFS.writeFeature_),Update:ol.xml.makeChildAppender(ol.format.WFS.writeUpdate_),Delete:ol.xml.makeChildAppender(ol.format.WFS.writeDelete_),Property:ol.xml.makeChildAppender(ol.format.WFS.writeProperty_),Native:ol.xml.makeChildAppender(ol.format.WFS.writeNative_)}};ol.format.WFS.writeQuery_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["featurePrefix"];var f=d["featureNS"];var g=d["propertyNames"];var h=d["srsName"];var i=goog.isDef(e)?e+":":"";a.setAttribute("typeName",i+b);if(goog.isDef(h)){a.setAttribute("srsName",h)}if(goog.isDef(f)){ol.xml.setAttributeNS(a,ol.format.WFS.XMLNS,"xmlns:"+e,f)}var j=goog.object.clone(d);j.node=a;ol.xml.pushSerializeAndPop(j,ol.format.WFS.QUERY_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("PropertyName"),g,c);var k=d["bbox"];if(goog.isDef(k)){var l=ol.xml.createElementNS("http://www.opengis.net/ogc","Filter");ol.format.WFS.writeOgcBBOX_(l,k,c);a.appendChild(l)}};ol.format.WFS.writeOgcPropertyName_=function(a,b,c){var d=ol.xml.createElementNS("http://www.opengis.net/ogc","PropertyName");ol.format.XSD.writeStringTextNode(d,b);a.appendChild(d)};ol.format.WFS.writeOgcBBOX_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=d["geometryName"];var f=ol.xml.createElementNS("http://www.opengis.net/ogc","BBOX");a.appendChild(f);ol.format.WFS.writeOgcPropertyName_(f,e,c);ol.format.GML3.prototype.writeGeometryElement(f,b,c)};ol.format.WFS.GETFEATURE_SERIALIZERS_={"http://www.opengis.net/wfs":{Query:ol.xml.makeChildAppender(ol.format.WFS.writeQuery_)}};ol.format.WFS.writeGetFeature_=function(a,b,c){var d=c[c.length-1];goog.asserts.assert(goog.isObject(d),"context should be an Object");var e=goog.object.clone(d);e.node=a;ol.xml.pushSerializeAndPop(e,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Query"),b,c)};ol.format.WFS.prototype.writeGetFeature=function(a){var b=ol.xml.createElementNS("http://www.opengis.net/wfs","GetFeature");b.setAttribute("service","WFS");b.setAttribute("version","1.1.0");if(goog.isDef(a)){if(goog.isDef(a.handle)){b.setAttribute("handle",a.handle)}if(goog.isDef(a.outputFormat)){b.setAttribute("outputFormat",a.outputFormat)}if(goog.isDef(a.maxFeatures)){b.setAttribute("maxFeatures",a.maxFeatures)}if(goog.isDef(a.resultType)){b.setAttribute("resultType",a.resultType)}if(goog.isDef(a.startIndex)){b.setAttribute("startIndex",a.startIndex)}if(goog.isDef(a.count)){b.setAttribute("count",a.count)}}ol.xml.setAttributeNS(b,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);var c={node:b,srsName:a.srsName,featureNS:goog.isDef(a.featureNS)?a.featureNS:this.featureNS_,featurePrefix:a.featurePrefix,geometryName:a.geometryName,bbox:a.bbox,propertyNames:goog.isDef(a.propertyNames)?a.propertyNames:[]};goog.asserts.assert(goog.isArray(a.featureTypes),"options.featureTypes should be an array");ol.format.WFS.writeGetFeature_(b,a.featureTypes,[c]);return b};ol.format.WFS.prototype.writeTransaction=function(a,b,c,d){var e=[];var f=ol.xml.createElementNS("http://www.opengis.net/wfs","Transaction");f.setAttribute("service","WFS");f.setAttribute("version","1.1.0");var g,h;if(goog.isDef(d)){g=goog.isDef(d.gmlOptions)?d.gmlOptions:{};if(goog.isDef(d.handle)){f.setAttribute("handle",d.handle)}}ol.xml.setAttributeNS(f,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);if(goog.isDefAndNotNull(a)){h={node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix};goog.object.extend(h,g);ol.xml.pushSerializeAndPop(h,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Insert"),a,e)}if(goog.isDefAndNotNull(b)){h={node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix};goog.object.extend(h,g);ol.xml.pushSerializeAndPop(h,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Update"),b,e)}if(goog.isDefAndNotNull(c)){ol.xml.pushSerializeAndPop({node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Delete"),c,e)}if(goog.isDef(d.nativeElements)){ol.xml.pushSerializeAndPop({node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Native"),d.nativeElements,e)}return f};ol.format.WFS.prototype.readProjection;ol.format.WFS.prototype.readProjectionFromDocument=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be a DOCUMENT");for(var b=a.firstChild;!goog.isNull(b);b=b.nextSibling){if(b.nodeType==goog.dom.NodeType.ELEMENT){return this.readProjectionFromNode(b)}}return null};ol.format.WFS.prototype.readProjectionFromNode=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="FeatureCollection","localName should be FeatureCollection");if(goog.isDefAndNotNull(a.firstElementChild)&&goog.isDefAndNotNull(a.firstElementChild.firstElementChild)){a=a.firstElementChild.firstElementChild;for(var b=a.firstElementChild;!goog.isNull(b);b=b.nextElementSibling){if(!(b.childNodes.length===0||b.childNodes.length===1&&b.firstChild.nodeType===3)){var c=[{}];this.gmlFormat_.readGeometryElement(b,c);return ol.proj.get(c.pop().srsName)}}}return null};goog.provide("ol.format.WKT");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.TextFeature");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");ol.format.WKT=function(a){var b=goog.isDef(a)?a:{};goog.base(this);this.splitCollection_=goog.isDef(b.splitCollection)?b.splitCollection:false};goog.inherits(ol.format.WKT,ol.format.TextFeature);ol.format.WKT.EMPTY="EMPTY";ol.format.WKT.encodePointGeometry_=function(a){var b=a.getCoordinates();if(goog.array.isEmpty(b)){return""}return b[0]+" "+b[1]};ol.format.WKT.encodeMultiPointGeometry_=function(a){var b=[];var c=a.getPoints();for(var d=0,e=c.length;d<e;++d){b.push("("+ol.format.WKT.encodePointGeometry_(c[d])+")")}return b.join(",")};ol.format.WKT.encodeGeometryCollectionGeometry_=function(a){var b=[];var c=a.getGeometries();for(var d=0,e=c.length;d<e;++d){b.push(ol.format.WKT.encode_(c[d]))}return b.join(",")};ol.format.WKT.encodeLineStringGeometry_=function(a){var b=a.getCoordinates();var c=[];for(var d=0,e=b.length;d<e;++d){c.push(b[d][0]+" "+b[d][1])}return c.join(",")};ol.format.WKT.encodeMultiLineStringGeometry_=function(a){var b=[];var c=a.getLineStrings();for(var d=0,e=c.length;d<e;++d){b.push("("+ol.format.WKT.encodeLineStringGeometry_(c[d])+")")}return b.join(",")};ol.format.WKT.encodePolygonGeometry_=function(a){var b=[];var c=a.getLinearRings();for(var d=0,e=c.length;d<e;++d){b.push("("+ol.format.WKT.encodeLineStringGeometry_(c[d])+")")}return b.join(",")};ol.format.WKT.encodeMultiPolygonGeometry_=function(a){var b=[];var c=a.getPolygons();for(var d=0,e=c.length;d<e;++d){b.push("("+ol.format.WKT.encodePolygonGeometry_(c[d])+")")}return b.join(",")};ol.format.WKT.encode_=function(a){var b=a.getType();var c=ol.format.WKT.GeometryEncoder_[b];goog.asserts.assert(goog.isDef(c),"geometryEncoder should be defined");var d=c(a);b=b.toUpperCase();if(d.length===0){return b+" "+ol.format.WKT.EMPTY}return b+"("+d+")"};ol.format.WKT.GeometryEncoder_={Point:ol.format.WKT.encodePointGeometry_,LineString:ol.format.WKT.encodeLineStringGeometry_,Polygon:ol.format.WKT.encodePolygonGeometry_,MultiPoint:ol.format.WKT.encodeMultiPointGeometry_,MultiLineString:ol.format.WKT.encodeMultiLineStringGeometry_,MultiPolygon:ol.format.WKT.encodeMultiPolygonGeometry_,
GeometryCollection:ol.format.WKT.encodeGeometryCollectionGeometry_};ol.format.WKT.prototype.parse_=function(a){var b=new ol.format.WKT.Lexer(a);var c=new ol.format.WKT.Parser(b);return c.parse()};ol.format.WKT.prototype.readFeature;ol.format.WKT.prototype.readFeatureFromText=function(a,b){var c=this.readGeometryFromText(a,b);if(goog.isDef(c)){var d=new ol.Feature;d.setGeometry(c);return d}return null};ol.format.WKT.prototype.readFeatures;ol.format.WKT.prototype.readFeaturesFromText=function(a,b){var c=[];var d=this.readGeometryFromText(a,b);if(this.splitCollection_&&d.getType()==ol.geom.GeometryType.GEOMETRY_COLLECTION){c=d.getGeometriesArray()}else{c=[d]}var e,f=[];for(var g=0,h=c.length;g<h;++g){e=new ol.Feature;e.setGeometry(c[g]);f.push(e)}return f};ol.format.WKT.prototype.readGeometry;ol.format.WKT.prototype.readGeometryFromText=function(a,b){var c=this.parse_(a);if(goog.isDef(c)){return ol.format.Feature.transformWithOptions(c,false,b)}else{return null}};ol.format.WKT.prototype.writeFeature;ol.format.WKT.prototype.writeFeatureText=function(a,b){var c=a.getGeometry();if(goog.isDef(c)){return this.writeGeometryText(c,b)}return""};ol.format.WKT.prototype.writeFeatures;ol.format.WKT.prototype.writeFeaturesText=function(a,b){if(a.length==1){return this.writeFeatureText(a[0],b)}var c=[];for(var d=0,e=a.length;d<e;++d){c.push(a[d].getGeometry())}var f=new ol.geom.GeometryCollection(c);return this.writeGeometryText(f,b)};ol.format.WKT.prototype.writeGeometry;ol.format.WKT.prototype.writeGeometryText=function(a,b){return ol.format.WKT.encode_(ol.format.Feature.transformWithOptions(a,true,b))};ol.format.WKT.Token;ol.format.WKT.TokenType={TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6};ol.format.WKT.Lexer=function(a){this.wkt=a;this.index_=-1};ol.format.WKT.Lexer.prototype.isAlpha_=function(a){return a>="a"&&a<="z"||a>="A"&&a<="Z"};ol.format.WKT.Lexer.prototype.isNumeric_=function(a,b){var c=goog.isDef(b)?b:false;return a>="0"&&a<="9"||a=="."&&!c};ol.format.WKT.Lexer.prototype.isWhiteSpace_=function(a){return a==" "||a=="\t"||a=="\r"||a=="\n"};ol.format.WKT.Lexer.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)};ol.format.WKT.Lexer.prototype.nextToken=function(){var a=this.nextChar_();var b={position:this.index_,value:a};if(a=="("){b.type=ol.format.WKT.TokenType.LEFT_PAREN}else if(a==","){b.type=ol.format.WKT.TokenType.COMMA}else if(a==")"){b.type=ol.format.WKT.TokenType.RIGHT_PAREN}else if(this.isNumeric_(a)||a=="-"){b.type=ol.format.WKT.TokenType.NUMBER;b.value=this.readNumber_()}else if(this.isAlpha_(a)){b.type=ol.format.WKT.TokenType.TEXT;b.value=this.readText_()}else if(this.isWhiteSpace_(a)){return this.nextToken()}else if(a===""){b.type=ol.format.WKT.TokenType.EOF}else{throw new Error("Unexpected character: "+a)}return b};ol.format.WKT.Lexer.prototype.readNumber_=function(){var a,b=this.index_;var c=false;var d=false;do{if(a=="."){c=true}else if(a=="e"||a=="E"){d=true}a=this.nextChar_()}while(this.isNumeric_(a,c)||!d&&(a=="e"||a=="E")||d&&(a=="-"||a=="+"));return parseFloat(this.wkt.substring(b,this.index_--))};ol.format.WKT.Lexer.prototype.readText_=function(){var a,b=this.index_;do{a=this.nextChar_()}while(this.isAlpha_(a));return this.wkt.substring(b,this.index_--).toUpperCase()};ol.format.WKT.Parser=function(a){this.lexer_=a;this.token_;this.dimension_=2};ol.format.WKT.Parser.prototype.consume_=function(){this.token_=this.lexer_.nextToken()};ol.format.WKT.Parser.prototype.match=function(a){var b=this.token_.type==a;if(b){this.consume_()}return b};ol.format.WKT.Parser.prototype.parse=function(){this.consume_();var a=this.parseGeometry_();goog.asserts.assert(this.token_.type==ol.format.WKT.TokenType.EOF,"token type should be end of file");return a};ol.format.WKT.Parser.prototype.parseGeometry_=function(){var a=this.token_;if(this.match(ol.format.WKT.TokenType.TEXT)){var b=a.value;if(b==ol.geom.GeometryType.GEOMETRY_COLLECTION.toUpperCase()){var c=this.parseGeometryCollectionText_();return new ol.geom.GeometryCollection(c)}else{var d=ol.format.WKT.Parser.GeometryParser_[b];var e=ol.format.WKT.Parser.GeometryConstructor_[b];if(!goog.isDef(d)||!goog.isDef(e)){throw new Error("Invalid geometry type: "+b)}var f=d.call(this);return new e(f)}}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseGeometryCollectionText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var a=[];do{a.push(this.parseGeometry_())}while(this.match(ol.format.WKT.TokenType.COMMA));if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePointText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var a=this.parsePoint_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return null}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseLineStringText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var a=this.parsePointList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePolygonText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var a=this.parseLineStringTextList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseMultiPointText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var a;if(this.token_.type==ol.format.WKT.TokenType.LEFT_PAREN){a=this.parsePointTextList_()}else{a=this.parsePointList_()}if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseMultiLineStringText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var a=this.parseLineStringTextList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseMultiPolygonText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var a=this.parsePolygonTextList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePoint_=function(){var a=[];for(var b=0;b<this.dimension_;++b){var c=this.token_;if(this.match(ol.format.WKT.TokenType.NUMBER)){a.push(c.value)}else{break}}if(a.length==this.dimension_){return a}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePointList_=function(){var a=[this.parsePoint_()];while(this.match(ol.format.WKT.TokenType.COMMA)){a.push(this.parsePoint_())}return a};ol.format.WKT.Parser.prototype.parsePointTextList_=function(){var a=[this.parsePointText_()];while(this.match(ol.format.WKT.TokenType.COMMA)){a.push(this.parsePointText_())}return a};ol.format.WKT.Parser.prototype.parseLineStringTextList_=function(){var a=[this.parseLineStringText_()];while(this.match(ol.format.WKT.TokenType.COMMA)){a.push(this.parseLineStringText_())}return a};ol.format.WKT.Parser.prototype.parsePolygonTextList_=function(){var a=[this.parsePolygonText_()];while(this.match(ol.format.WKT.TokenType.COMMA)){a.push(this.parsePolygonText_())}return a};ol.format.WKT.Parser.prototype.isEmptyGeometry_=function(){var a=this.token_.type==ol.format.WKT.TokenType.TEXT&&this.token_.value==ol.format.WKT.EMPTY;if(a){this.consume_()}return a};ol.format.WKT.Parser.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"};ol.format.WKT.Parser.GeometryConstructor_={POINT:ol.geom.Point,LINESTRING:ol.geom.LineString,POLYGON:ol.geom.Polygon,MULTIPOINT:ol.geom.MultiPoint,MULTILINESTRING:ol.geom.MultiLineString,MULTIPOLYGON:ol.geom.MultiPolygon};ol.format.WKT.Parser.GeometryParser_={POINT:ol.format.WKT.Parser.prototype.parsePointText_,LINESTRING:ol.format.WKT.Parser.prototype.parseLineStringText_,POLYGON:ol.format.WKT.Parser.prototype.parsePolygonText_,MULTIPOINT:ol.format.WKT.Parser.prototype.parseMultiPointText_,MULTILINESTRING:ol.format.WKT.Parser.prototype.parseMultiLineStringText_,MULTIPOLYGON:ol.format.WKT.Parser.prototype.parseMultiPolygonText_};goog.provide("ol.format.WMSCapabilities");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("goog.string");goog.require("ol.format.XLink");goog.require("ol.format.XML");goog.require("ol.format.XSD");goog.require("ol.xml");ol.format.WMSCapabilities=function(){goog.base(this);this.version=undefined};goog.inherits(ol.format.WMSCapabilities,ol.format.XML);ol.format.WMSCapabilities.prototype.read;ol.format.WMSCapabilities.prototype.readFromDocument=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var b=a.firstChild;!goog.isNull(b);b=b.nextSibling){if(b.nodeType==goog.dom.NodeType.ELEMENT){return this.readFromNode(b)}}return null};ol.format.WMSCapabilities.prototype.readFromNode=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="WMS_Capabilities"||a.localName=="WMT_MS_Capabilities","localName should be WMS_Capabilities or WMT_MS_Capabilities");this.version=goog.string.trim(a.getAttribute("version"));goog.asserts.assertString(this.version,"this.version should be a string");var b=ol.xml.pushParseAndPop({version:this.version},ol.format.WMSCapabilities.PARSERS_,a,[]);return goog.isDef(b)?b:null};ol.format.WMSCapabilities.readAttribution_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Attribution","localName should be Attribution");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_,a,b)};ol.format.WMSCapabilities.readBoundingBox_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="BoundingBox","localName should be BoundingBox");var c=[ol.format.XSD.readDecimalString(a.getAttribute("minx")),ol.format.XSD.readDecimalString(a.getAttribute("miny")),ol.format.XSD.readDecimalString(a.getAttribute("maxx")),ol.format.XSD.readDecimalString(a.getAttribute("maxy"))];var d=[ol.format.XSD.readDecimalString(a.getAttribute("resx")),ol.format.XSD.readDecimalString(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:c,res:d}};ol.format.WMSCapabilities.readEXGeographicBoundingBox_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="EX_GeographicBoundingBox","localName should be EX_GeographicBoundingBox");var c=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_,a,b);if(!goog.isDef(c)){return undefined}var d=c["westBoundLongitude"];var e=c["southBoundLatitude"];var f=c["eastBoundLongitude"];var g=c["northBoundLatitude"];if(!goog.isDef(d)||!goog.isDef(e)||!goog.isDef(f)||!goog.isDef(g)){return undefined}return[d,e,f,g]};ol.format.WMSCapabilities.readCapability_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Capability","localName should be Capability");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CAPABILITY_PARSERS_,a,b)};ol.format.WMSCapabilities.readService_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Service","localName should be Service");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.SERVICE_PARSERS_,a,b)};ol.format.WMSCapabilities.readContactInformation_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType shpuld be ELEMENT");goog.asserts.assert(a.localName=="ContactInformation","localName should be ContactInformation");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_,a,b)};ol.format.WMSCapabilities.readContactPersonPrimary_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="ContactPersonPrimary","localName should be ContactPersonPrimary");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_,a,b)};ol.format.WMSCapabilities.readContactAddress_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="ContactAddress","localName should be ContactAddress");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_,a,b)};ol.format.WMSCapabilities.readException_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Exception","localName should be Exception");return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.EXCEPTION_PARSERS_,a,b)};ol.format.WMSCapabilities.readCapabilityLayer_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Layer","localName should be Layer");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,a,b)};ol.format.WMSCapabilities.readLayer_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Layer","localName should be Layer");var c=b[b.length-1];var d=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,a,b);if(!goog.isDef(d)){return undefined}var e=ol.format.XSD.readBooleanString(a.getAttribute("queryable"));if(!goog.isDef(e)){e=c["queryable"]}d["queryable"]=goog.isDef(e)?e:false;var f=ol.format.XSD.readNonNegativeIntegerString(a.getAttribute("cascaded"));if(!goog.isDef(f)){f=c["cascaded"]}d["cascaded"]=f;var g=ol.format.XSD.readBooleanString(a.getAttribute("opaque"));if(!goog.isDef(g)){g=c["opaque"]}d["opaque"]=goog.isDef(g)?g:false;var h=ol.format.XSD.readBooleanString(a.getAttribute("noSubsets"));if(!goog.isDef(h)){h=c["noSubsets"]}d["noSubsets"]=goog.isDef(h)?h:false;var i=ol.format.XSD.readDecimalString(a.getAttribute("fixedWidth"));if(!goog.isDef(i)){i=c["fixedWidth"]}d["fixedWidth"]=i;var j=ol.format.XSD.readDecimalString(a.getAttribute("fixedHeight"));if(!goog.isDef(j)){j=c["fixedHeight"]}d["fixedHeight"]=j;var k=["Style","CRS","AuthorityURL"];goog.array.forEach(k,function(a){var b=c[a];if(goog.isDef(b)){var e=goog.object.setIfUndefined(d,a,[]);e=e.concat(b);d[a]=e}});var l=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];goog.array.forEach(l,function(a){var b=d[a];if(!goog.isDef(b)){var e=c[a];d[a]=e}});return d};ol.format.WMSCapabilities.readDimension_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Dimension","localName should be Dimension");var c={name:a.getAttribute("name"),units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),default:a.getAttribute("default"),multipleValues:ol.format.XSD.readBooleanString(a.getAttribute("multipleValues")),nearestValue:ol.format.XSD.readBooleanString(a.getAttribute("nearestValue")),current:ol.format.XSD.readBooleanString(a.getAttribute("current")),values:ol.format.XSD.readString(a)};return c};ol.format.WMSCapabilities.readFormatOnlineresource_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_,a,b)};ol.format.WMSCapabilities.readRequest_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Request","localName should be Request");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.REQUEST_PARSERS_,a,b)};ol.format.WMSCapabilities.readDCPType_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="DCPType","localName should be DCPType");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.DCPTYPE_PARSERS_,a,b)};ol.format.WMSCapabilities.readHTTP_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="HTTP","localName should be HTTP");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.HTTP_PARSERS_,a,b)};ol.format.WMSCapabilities.readOperationType_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_,a,b)};ol.format.WMSCapabilities.readSizedFormatOnlineresource_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var c=ol.format.WMSCapabilities.readFormatOnlineresource_(a,b);if(goog.isDef(c)){var d=[ol.format.XSD.readNonNegativeIntegerString(a.getAttribute("width")),ol.format.XSD.readNonNegativeIntegerString(a.getAttribute("height"))];c["size"]=d;return c}return undefined};ol.format.WMSCapabilities.readAuthorityURL_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="AuthorityURL","localName should be AuthorityURL");var c=ol.format.WMSCapabilities.readFormatOnlineresource_(a,b);if(goog.isDef(c)){c["name"]=a.getAttribute("name");return c}return undefined};ol.format.WMSCapabilities.readMetadataURL_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="MetadataURL","localName should be MetadataURL");var c=ol.format.WMSCapabilities.readFormatOnlineresource_(a,b);if(goog.isDef(c)){c["type"]=a.getAttribute("type");return c}return undefined};ol.format.WMSCapabilities.readStyle_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Style","localName should be Style");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.STYLE_PARSERS_,a,b)};ol.format.WMSCapabilities.readKeywordList_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="KeywordList","localName should be KeywordList");return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_,a,b)};ol.format.WMSCapabilities.NAMESPACE_URIS_=[null,"http://www.opengis.net/wms"];ol.format.WMSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Service:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readService_),Capability:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapability_)});ol.format.WMSCapabilities.CAPABILITY_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Request:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readRequest_),Exception:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readException_),Layer:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapabilityLayer_)});ol.format.WMSCapabilities.SERVICE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),KeywordList:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),ContactInformation:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactInformation_),Fees:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),AccessConstraints:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),LayerLimit:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)});ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{ContactPersonPrimary:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactPersonPrimary_),ContactPosition:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactAddress:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactAddress_),ContactVoiceTelephone:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactFacsimileTelephone:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactElectronicMailAddress:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{ContactPerson:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactOrganization:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{AddressType:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),City:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),StateOrProvince:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PostCode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Country:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.EXCEPTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeArrayPusher(ol.format.XSD.readString)});ol.format.WMSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),KeywordList:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),CRS:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),EX_GeographicBoundingBox:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readEXGeographicBoundingBox_),BoundingBox:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readBoundingBox_),Dimension:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDimension_),Attribution:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readAttribution_),AuthorityURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readAuthorityURL_),Identifier:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),MetadataURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readMetadataURL_),DataURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),FeatureListURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),Style:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readStyle_),MinScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),MaxScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),Layer:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readLayer_)});ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),LogoURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readSizedFormatOnlineresource_)});ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{westBoundLongitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),eastBoundLongitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),southBoundLatitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),northBoundLatitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.WMSCapabilities.REQUEST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{GetCapabilities:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),GetMap:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),GetFeatureInfo:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_)});ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),DCPType:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDCPType_)});ol.format.WMSCapabilities.DCPTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{HTTP:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readHTTP_)});ol.format.WMSCapabilities.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Get:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),Post:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)});ol.format.WMSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),LegendURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readSizedFormatOnlineresource_),StyleSheetURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),StyleURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)});ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref)});ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Keyword:ol.xml.makeArrayPusher(ol.format.XSD.readString)});goog.provide("ol.format.WMSGetFeatureInfo");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("goog.string");goog.require("ol.format.GML2");goog.require("ol.format.XMLFeature");goog.require("ol.xml");ol.format.WMSGetFeatureInfo=function(){this.featureNS_="http://mapserver.gis.umn.edu/mapserver";this.gmlFormat_=new ol.format.GML2;goog.base(this)};goog.inherits(ol.format.WMSGetFeatureInfo,ol.format.XMLFeature);ol.format.WMSGetFeatureInfo.featureIdentifier_="_feature";ol.format.WMSGetFeatureInfo.layerIdentifier_="_layer";ol.format.WMSGetFeatureInfo.prototype.readFeatures_=function(a,b){a.namespaceURI=this.featureNS_;goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var c=ol.xml.getLocalName(a);var d=[];if(a.childNodes.length===0){return d}if(c=="msGMLOutput"){goog.array.forEach(a.childNodes,function(a){if(a.nodeType!==goog.dom.NodeType.ELEMENT){return}var c=b[0];goog.asserts.assert(goog.isObject(c),"context should be an Object");goog.asserts.assert(a.localName.indexOf(ol.format.WMSGetFeatureInfo.layerIdentifier_)>=0,"localName of layer node should match layerIdentifier");var e=goog.string.remove(a.localName,ol.format.WMSGetFeatureInfo.layerIdentifier_)+ol.format.WMSGetFeatureInfo.featureIdentifier_;c["featureType"]=e;c["featureNS"]=this.featureNS_;var f={};f[e]=ol.xml.makeArrayPusher(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var g=ol.xml.makeStructureNS([c["featureNS"],null],f);a.namespaceURI=this.featureNS_;var h=ol.xml.pushParseAndPop([],g,a,b,this.gmlFormat_);if(goog.isDef(h)){goog.array.extend(d,h)}},this)}if(c=="FeatureCollection"){var e=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,a,[{}],this.gmlFormat_);if(goog.isDef(e)){d=e}}return d};ol.format.WMSGetFeatureInfo.prototype.readFeatures;ol.format.WMSGetFeatureInfo.prototype.readFeaturesFromNode=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};if(goog.isDef(b)){goog.object.extend(c,this.getReadOptions(a,b))}return this.readFeatures_(a,[c])};goog.provide("ol.format.WMTSCapabilities");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.string");goog.require("ol.extent");goog.require("ol.format.OWS");goog.require("ol.format.XLink");goog.require("ol.format.XML");goog.require("ol.format.XSD");goog.require("ol.xml");ol.format.WMTSCapabilities=function(){goog.base(this);this.owsParser_=new ol.format.OWS};goog.inherits(ol.format.WMTSCapabilities,ol.format.XML);ol.format.WMTSCapabilities.prototype.read;ol.format.WMTSCapabilities.prototype.readFromDocument=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var b=a.firstChild;!goog.isNull(b);b=b.nextSibling){if(b.nodeType==goog.dom.NodeType.ELEMENT){return this.readFromNode(b)}}return null};ol.format.WMTSCapabilities.prototype.readFromNode=function(a){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Capabilities","localName should be Capabilities");this.version=goog.string.trim(a.getAttribute("version"));goog.asserts.assertString(this.version,"this.version should be a string");var b=this.owsParser_.readFromNode(a);if(!goog.isDef(b)){return null}b["version"]=this.version;b=ol.xml.pushParseAndPop(b,ol.format.WMTSCapabilities.PARSERS_,a,[]);return goog.isDef(b)?b:null};ol.format.WMTSCapabilities.readContents_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Contents","localName should be Contents");return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.CONTENTS_PARSERS_,a,b)};ol.format.WMTSCapabilities.readLayer_=function(a,b){goog.asserts.assert(a.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(a.localName=="Layer","localName should be Layer");return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.LAYER_PARSERS_,a,b)};ol.format.WMTSCapabilities.readTileMatrixSet_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_PARSERS_,a,b)};ol.format.WMTSCapabilities.readStyle_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.STYLE_PARSERS_,a,b);if(!goog.isDef(c)){return undefined}var d=a.getAttribute("isDefault")==="true";c["isDefault"]=d;return c};ol.format.WMTSCapabilities.readTileMatrixSetLink_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_,a,b)};ol.format.WMTSCapabilities.readResourceUrl_=function(a,b){var c=a.getAttribute("format");var d=a.getAttribute("template");var e=a.getAttribute("resourceType");var f={};if(goog.isDef(c)){f["format"]=c}if(goog.isDef(d)){f["template"]=d}if(goog.isDef(e)){f["resourceType"]=e}return f};ol.format.WMTSCapabilities.readWgs84BoundingBox_=function(a,b){var c=ol.xml.pushParseAndPop([],ol.format.WMTSCapabilities.WGS84_BBOX_READERS_,a,b);if(c.length!=2){return undefined}return ol.extent.boundingExtent(c)};ol.format.WMTSCapabilities.readLegendUrl_=function(a,b){var c={};c["format"]=a.getAttribute("format")
;c["href"]=ol.format.XLink.readHref(a);return c};ol.format.WMTSCapabilities.readCoordinates_=function(a,b){var c=ol.format.XSD.readString(a).split(" ");if(!goog.isDef(c)||c.length!=2){return undefined}var d=+c[0];var e=+c[1];if(isNaN(d)||isNaN(e)){return undefined}return[d,e]};ol.format.WMTSCapabilities.readTileMatrix_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TM_PARSERS_,a,b)};ol.format.WMTSCapabilities.NAMESPACE_URIS_=[null,"http://www.opengis.net/wmts/1.0"];ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"];ol.format.WMTSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Contents:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readContents_)});ol.format.WMTSCapabilities.CONTENTS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Layer:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLayer_),TileMatrixSet:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSet_)});ol.format.WMTSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Style:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readStyle_),Format:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),TileMatrixSetLink:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSetLink_),ResourceURL:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readResourceUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),WGS84BoundingBox:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readWgs84BoundingBox_),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{LegendURL:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLegendUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TileMatrixSet:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMTSCapabilities.WGS84_BBOX_READERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{LowerCorner:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_),UpperCorner:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_)});ol.format.WMTSCapabilities.TMS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{WellKnownScaleSet:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),TileMatrix:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrix_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{SupportedCRS:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.TM_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TopLeftCorner:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readCoordinates_),ScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),TileWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),TileHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MatrixWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MatrixHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));goog.provide("ol.sphere.WGS84");goog.require("ol.Sphere");ol.sphere.WGS84=new ol.Sphere(6378137);goog.provide("ol.Geolocation");goog.provide("ol.GeolocationProperty");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.math");goog.require("ol.Coordinate");goog.require("ol.Object");goog.require("ol.geom.Geometry");goog.require("ol.geom.Polygon");goog.require("ol.has");goog.require("ol.proj");goog.require("ol.sphere.WGS84");ol.GeolocationProperty={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"};ol.Geolocation=function(a){goog.base(this);var b=goog.isDef(a)?a:{};this.position_=null;this.transform_=ol.proj.identityTransform;this.watchId_=undefined;goog.events.listen(this,ol.Object.getChangeEventType(ol.GeolocationProperty.PROJECTION),this.handleProjectionChanged_,false,this);goog.events.listen(this,ol.Object.getChangeEventType(ol.GeolocationProperty.TRACKING),this.handleTrackingChanged_,false,this);if(goog.isDef(b.projection)){this.setProjection(ol.proj.get(b.projection))}if(goog.isDef(b.trackingOptions)){this.setTrackingOptions(b.trackingOptions)}this.setTracking(goog.isDef(b.tracking)?b.tracking:false)};goog.inherits(ol.Geolocation,ol.Object);ol.Geolocation.prototype.disposeInternal=function(){this.setTracking(false);goog.base(this,"disposeInternal")};ol.Geolocation.prototype.handleProjectionChanged_=function(){var a=this.getProjection();if(goog.isDefAndNotNull(a)){this.transform_=ol.proj.getTransformFromProjections(ol.proj.get("EPSG:4326"),a);if(!goog.isNull(this.position_)){this.set(ol.GeolocationProperty.POSITION,this.transform_(this.position_))}}};ol.Geolocation.prototype.handleTrackingChanged_=function(){if(ol.has.GEOLOCATION){var a=this.getTracking();if(a&&!goog.isDef(this.watchId_)){this.watchId_=goog.global.navigator.geolocation.watchPosition(goog.bind(this.positionChange_,this),goog.bind(this.positionError_,this),this.getTrackingOptions())}else if(!a&&goog.isDef(this.watchId_)){goog.global.navigator.geolocation.clearWatch(this.watchId_);this.watchId_=undefined}}};ol.Geolocation.prototype.positionChange_=function(a){var b=a.coords;this.set(ol.GeolocationProperty.ACCURACY,b.accuracy);this.set(ol.GeolocationProperty.ALTITUDE,goog.isNull(b.altitude)?undefined:b.altitude);this.set(ol.GeolocationProperty.ALTITUDE_ACCURACY,goog.isNull(b.altitudeAccuracy)?undefined:b.altitudeAccuracy);this.set(ol.GeolocationProperty.HEADING,goog.isNull(b.heading)?undefined:goog.math.toRadians(b.heading));if(goog.isNull(this.position_)){this.position_=[b.longitude,b.latitude]}else{this.position_[0]=b.longitude;this.position_[1]=b.latitude}var c=this.transform_(this.position_);this.set(ol.GeolocationProperty.POSITION,c);this.set(ol.GeolocationProperty.SPEED,goog.isNull(b.speed)?undefined:b.speed);var d=ol.geom.Polygon.circular(ol.sphere.WGS84,this.position_,b.accuracy);d.applyTransform(this.transform_);this.set(ol.GeolocationProperty.ACCURACY_GEOMETRY,d);this.changed()};ol.Geolocation.prototype.positionError_=function(a){a.type=goog.events.EventType.ERROR;this.setTracking(false);this.dispatchEvent(a)};ol.Geolocation.prototype.getAccuracy=function(){return this.get(ol.GeolocationProperty.ACCURACY)};ol.Geolocation.prototype.getAccuracyGeometry=function(){return this.get(ol.GeolocationProperty.ACCURACY_GEOMETRY)||null};ol.Geolocation.prototype.getAltitude=function(){return this.get(ol.GeolocationProperty.ALTITUDE)};ol.Geolocation.prototype.getAltitudeAccuracy=function(){return this.get(ol.GeolocationProperty.ALTITUDE_ACCURACY)};ol.Geolocation.prototype.getHeading=function(){return this.get(ol.GeolocationProperty.HEADING)};ol.Geolocation.prototype.getPosition=function(){return this.get(ol.GeolocationProperty.POSITION)};ol.Geolocation.prototype.getProjection=function(){return this.get(ol.GeolocationProperty.PROJECTION)};ol.Geolocation.prototype.getSpeed=function(){return this.get(ol.GeolocationProperty.SPEED)};ol.Geolocation.prototype.getTracking=function(){return this.get(ol.GeolocationProperty.TRACKING)};ol.Geolocation.prototype.getTrackingOptions=function(){return this.get(ol.GeolocationProperty.TRACKING_OPTIONS)};ol.Geolocation.prototype.setProjection=function(a){this.set(ol.GeolocationProperty.PROJECTION,a)};ol.Geolocation.prototype.setTracking=function(a){this.set(ol.GeolocationProperty.TRACKING,a)};ol.Geolocation.prototype.setTrackingOptions=function(a){this.set(ol.GeolocationProperty.TRACKING_OPTIONS,a)};goog.provide("ol.geom.flat.geodesic");goog.require("goog.asserts");goog.require("goog.math");goog.require("goog.object");goog.require("ol.TransformFunction");goog.require("ol.math");goog.require("ol.proj");ol.geom.flat.geodesic.line_=function(a,b,c){var d=[];var e=a(0);var f=a(1);var g=b(e);var h=b(f);var i=[f,e];var j=[h,g];var k=[1,0];var l={};var m=1e5;var n,o,p,q,r,s;while(--m>0&&k.length>0){p=k.pop();e=i.pop();g=j.pop();s=p.toString();if(!goog.object.containsKey(l,s)){d.push(g[0],g[1]);l[s]=true}q=k.pop();f=i.pop();h=j.pop();r=(p+q)/2;n=a(r);o=b(n);if(ol.math.squaredSegmentDistance(o[0],o[1],g[0],g[1],h[0],h[1])<c){d.push(h[0],h[1]);s=q.toString();goog.asserts.assert(!goog.object.containsKey(l,s),"fractions object should contain key : "+s);l[s]=true}else{k.push(q,r,r,p);j.push(h,o,o,g);i.push(f,n,n,e)}}goog.asserts.assert(m>0,"maxIterations should be more than 0");return d};ol.geom.flat.geodesic.greatCircleArc=function(a,b,c,d,e,f){var g=ol.proj.get("EPSG:4326");var h=Math.cos(goog.math.toRadians(b));var i=Math.sin(goog.math.toRadians(b));var j=Math.cos(goog.math.toRadians(d));var k=Math.sin(goog.math.toRadians(d));var l=Math.cos(goog.math.toRadians(c-a));var m=Math.sin(goog.math.toRadians(c-a));var n=i*k+h*j*l;return ol.geom.flat.geodesic.line_(function(b){if(1<=n){return[c,d]}var e=b*Math.acos(n);var f=Math.cos(e);var g=Math.sin(e);var o=m*j;var p=h*k-i*j*l;var q=Math.atan2(o,p);var r=Math.asin(i*f+h*g*Math.cos(q));var s=goog.math.toRadians(a)+Math.atan2(Math.sin(q)*g*h,f-i*Math.sin(r));return[goog.math.toDegrees(s),goog.math.toDegrees(r)]},ol.proj.getTransform(g,e),f)};ol.geom.flat.geodesic.meridian=function(a,b,c,d,e){var f=ol.proj.get("EPSG:4326");return ol.geom.flat.geodesic.line_(function(d){return[a,b+(c-b)*d]},ol.proj.getTransform(f,d),e)};ol.geom.flat.geodesic.parallel=function(a,b,c,d,e){var f=ol.proj.get("EPSG:4326");return ol.geom.flat.geodesic.line_(function(d){return[b+(c-b)*d,a]},ol.proj.getTransform(f,d),e)};goog.provide("ol.Graticule");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.flat.geodesic");goog.require("ol.proj");goog.require("ol.render.EventType");goog.require("ol.style.Stroke");ol.Graticule=function(a){var b=goog.isDef(a)?a:{};this.map_=null;this.projection_=null;this.maxLat_=Infinity;this.maxLon_=Infinity;this.minLat_=-Infinity;this.minLon_=-Infinity;this.maxLatP_=Infinity;this.maxLonP_=Infinity;this.minLatP_=-Infinity;this.minLonP_=-Infinity;this.targetSize_=goog.isDef(b.targetSize)?b.targetSize:100;this.maxLines_=goog.isDef(b.maxLines)?b.maxLines:100;goog.asserts.assert(this.maxLines_>0,"this.maxLines_ should be more than 0");this.meridians_=[];this.parallels_=[];this.strokeStyle_=goog.isDef(b.strokeStyle)?b.strokeStyle:ol.Graticule.DEFAULT_STROKE_STYLE_;this.fromLonLatTransform_=undefined;this.toLonLatTransform_=undefined;this.projectionCenterLonLat_=null;this.setMap(goog.isDef(b.map)?b.map:null)};ol.Graticule.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:"rgba(0,0,0,0.2)"});ol.Graticule.intervals_=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001];ol.Graticule.prototype.addMeridian_=function(a,b,c,d,e,f){var g=this.getMeridian_(a,b,c,d,f);if(ol.extent.intersects(g.getExtent(),e)){this.meridians_[f++]=g}return f};ol.Graticule.prototype.addParallel_=function(a,b,c,d,e,f){var g=this.getParallel_(a,b,c,d,f);if(ol.extent.intersects(g.getExtent(),e)){this.parallels_[f++]=g}return f};ol.Graticule.prototype.createGraticule_=function(a,b,c,d){var e=this.getInterval_(c);if(e==-1){this.meridians_.length=this.parallels_.length=0;return}var f=this.toLonLatTransform_(b);var g=f[0];var h=f[1];var i=this.maxLines_;var j,k,l,m;var n=[Math.max(a[0],this.minLonP_),Math.max(a[1],this.minLatP_),Math.min(a[2],this.maxLonP_),Math.min(a[3],this.maxLatP_)];n=ol.proj.transformExtent(n,this.projection_,"EPSG:4326");var o=n[3];var p=n[2];var q=n[1];var r=n[0];g=Math.floor(g/e)*e;m=goog.math.clamp(g,this.minLon_,this.maxLon_);k=this.addMeridian_(m,q,o,d,a,0);j=0;while(m!=this.minLon_&&j++<i){m=Math.max(m-e,this.minLon_);k=this.addMeridian_(m,q,o,d,a,k)}m=goog.math.clamp(g,this.minLon_,this.maxLon_);j=0;while(m!=this.maxLon_&&j++<i){m=Math.min(m+e,this.maxLon_);k=this.addMeridian_(m,q,o,d,a,k)}this.meridians_.length=k;h=Math.floor(h/e)*e;l=goog.math.clamp(h,this.minLat_,this.maxLat_);k=this.addParallel_(l,r,p,d,a,0);j=0;while(l!=this.minLat_&&j++<i){l=Math.max(l-e,this.minLat_);k=this.addParallel_(l,r,p,d,a,k)}l=goog.math.clamp(h,this.minLat_,this.maxLat_);j=0;while(l!=this.maxLat_&&j++<i){l=Math.min(l+e,this.maxLat_);k=this.addParallel_(l,r,p,d,a,k)}this.parallels_.length=k};ol.Graticule.prototype.getInterval_=function(a){var b=this.projectionCenterLonLat_[0];var c=this.projectionCenterLonLat_[1];var d=-1;var e,f,g,h;var i=Math.pow(this.targetSize_*a,2);var j=[];var k=[];for(e=0,f=ol.Graticule.intervals_.length;e<f;++e){g=ol.Graticule.intervals_[e]/2;j[0]=b-g;j[1]=c-g;k[0]=b+g;k[1]=c+g;this.fromLonLatTransform_(j,j);this.fromLonLatTransform_(k,k);h=Math.pow(k[0]-j[0],2)+Math.pow(k[1]-j[1],2);if(h<=i){break}d=ol.Graticule.intervals_[e]}return d};ol.Graticule.prototype.getMap=function(){return this.map_};ol.Graticule.prototype.getMeridian_=function(a,b,c,d,e){goog.asserts.assert(a>=this.minLon_,"lon should be larger than or equal to this.minLon_");goog.asserts.assert(a<=this.maxLon_,"lon should be smaller than or equal to this.maxLon_");var f=ol.geom.flat.geodesic.meridian(a,b,c,this.projection_,d);goog.asserts.assert(f.length>0,"flatCoordinates cannot be empty");var g=goog.isDef(this.meridians_[e])?this.meridians_[e]:new ol.geom.LineString(null);g.setFlatCoordinates(ol.geom.GeometryLayout.XY,f);return g};ol.Graticule.prototype.getMeridians=function(){return this.meridians_};ol.Graticule.prototype.getParallel_=function(a,b,c,d,e){goog.asserts.assert(a>=this.minLat_,"lat should be larger than or equal to this.minLat_");goog.asserts.assert(a<=this.maxLat_,"lat should be smaller than or equal to this.maxLat_");var f=ol.geom.flat.geodesic.parallel(a,this.minLon_,this.maxLon_,this.projection_,d);goog.asserts.assert(f.length>0,"flatCoordinates cannot be empty");var g=goog.isDef(this.parallels_[e])?this.parallels_[e]:new ol.geom.LineString(null);g.setFlatCoordinates(ol.geom.GeometryLayout.XY,f);return g};ol.Graticule.prototype.getParallels=function(){return this.parallels_};ol.Graticule.prototype.handlePostCompose_=function(a){var b=a.vectorContext;var c=a.frameState;var d=c.extent;var e=c.viewState;var f=e.center;var g=e.projection;var h=e.resolution;var i=c.pixelRatio;var j=h*h/(4*i*i);var k=goog.isNull(this.projection_)||!ol.proj.equivalent(this.projection_,g);if(k){this.updateProjectionInfo_(g)}this.createGraticule_(d,f,h,j);b.setFillStrokeStyle(null,this.strokeStyle_);var l,m,n;for(l=0,m=this.meridians_.length;l<m;++l){n=this.meridians_[l];b.drawLineStringGeometry(n,null)}for(l=0,m=this.parallels_.length;l<m;++l){n=this.parallels_[l];b.drawLineStringGeometry(n,null)}};ol.Graticule.prototype.updateProjectionInfo_=function(a){goog.asserts.assert(!goog.isNull(a),"projection cannot be null");var b=ol.proj.get("EPSG:4326");var c=a.getExtent();var d=a.getWorldExtent();var e=ol.proj.transformExtent(d,b,a);var f=d[3];var g=d[2];var h=d[1];var i=d[0];var j=e[3];var k=e[2];var l=e[1];var m=e[0];goog.asserts.assert(!goog.isNull(c),"extent cannot be null");goog.asserts.assert(goog.isDef(f),"maxLat should be defined");goog.asserts.assert(goog.isDef(g),"maxLon should be defined");goog.asserts.assert(goog.isDef(h),"minLat should be defined");goog.asserts.assert(goog.isDef(i),"minLon should be defined");goog.asserts.assert(goog.isDef(j),"projected maxLat should be defined");goog.asserts.assert(goog.isDef(k),"projected maxLon should be defined");goog.asserts.assert(goog.isDef(l),"projected minLat should be defined");goog.asserts.assert(goog.isDef(m),"projected minLon should be defined");this.maxLat_=f;this.maxLon_=g;this.minLat_=h;this.minLon_=i;this.maxLatP_=j;this.maxLonP_=k;this.minLatP_=l;this.minLonP_=m;this.fromLonLatTransform_=ol.proj.getTransform(b,a);this.toLonLatTransform_=ol.proj.getTransform(a,b);this.projectionCenterLonLat_=this.toLonLatTransform_(ol.extent.getCenter(c));this.projection_=a};ol.Graticule.prototype.setMap=function(a){if(!goog.isNull(this.map_)){this.map_.un(ol.render.EventType.POSTCOMPOSE,this.handlePostCompose_,this);this.map_.render()}if(!goog.isNull(a)){a.on(ol.render.EventType.POSTCOMPOSE,this.handlePostCompose_,this);a.render()}this.map_=a};goog.provide("ol.Image");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.ImageBase");goog.require("ol.ImageState");goog.require("ol.extent");ol.Image=function(a,b,c,d,e,f,g){goog.base(this,a,b,c,ol.ImageState.IDLE,d);this.src_=e;this.image_=new Image;if(!goog.isNull(f)){this.image_.crossOrigin=f}this.imageByContext_={};this.imageListenerKeys_=null;this.state=ol.ImageState.IDLE;this.imageLoadFunction_=g};goog.inherits(ol.Image,ol.ImageBase);ol.Image.prototype.getImage=function(a){if(goog.isDef(a)){var b;var c=goog.getUid(a);if(c in this.imageByContext_){return this.imageByContext_[c]}else if(goog.object.isEmpty(this.imageByContext_)){b=this.image_}else{b=this.image_.cloneNode(false)}this.imageByContext_[c]=b;return b}else{return this.image_}};ol.Image.prototype.handleImageError_=function(){this.state=ol.ImageState.ERROR;this.unlistenImage_();this.changed()};ol.Image.prototype.handleImageLoad_=function(){if(!goog.isDef(this.resolution)){this.resolution=ol.extent.getHeight(this.extent)/this.image_.height}this.state=ol.ImageState.LOADED;this.unlistenImage_();this.changed()};ol.Image.prototype.load=function(){if(this.state==ol.ImageState.IDLE){this.state=ol.ImageState.LOADING;this.changed();goog.asserts.assert(goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should be null");this.imageListenerKeys_=[goog.events.listenOnce(this.image_,goog.events.EventType.ERROR,this.handleImageError_,false,this),goog.events.listenOnce(this.image_,goog.events.EventType.LOAD,this.handleImageLoad_,false,this)];this.imageLoadFunction_(this,this.src_)}};ol.Image.prototype.unlistenImage_=function(){goog.asserts.assert(!goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should not be null");goog.array.forEach(this.imageListenerKeys_,goog.events.unlistenByKey);this.imageListenerKeys_=null};goog.provide("ol.ImageLoadFunctionType");ol.ImageLoadFunctionType;goog.provide("ol.TileLoadFunctionType");goog.provide("ol.TileVectorLoadFunctionType");ol.TileLoadFunctionType;ol.TileVectorLoadFunctionType;goog.provide("ol.ImageTile");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.Tile");goog.require("ol.TileCoord");goog.require("ol.TileLoadFunctionType");goog.require("ol.TileState");ol.ImageTile=function(a,b,c,d,e){goog.base(this,a,b);this.src_=c;this.image_=new Image;if(!goog.isNull(d)){this.image_.crossOrigin=d}this.imageByContext_={};this.imageListenerKeys_=null;this.tileLoadFunction_=e};goog.inherits(ol.ImageTile,ol.Tile);ol.ImageTile.prototype.disposeInternal=function(){if(this.state==ol.TileState.LOADING){this.unlistenImage_()}goog.base(this,"disposeInternal")};ol.ImageTile.prototype.getImage=function(a){if(goog.isDef(a)){var b;var c=goog.getUid(a);if(c in this.imageByContext_){return this.imageByContext_[c]}else if(goog.object.isEmpty(this.imageByContext_)){b=this.image_}else{b=this.image_.cloneNode(false)}this.imageByContext_[c]=b;return b}else{return this.image_}};ol.ImageTile.prototype.getKey=function(){return this.src_};ol.ImageTile.prototype.handleImageError_=function(){this.state=ol.TileState.ERROR;this.unlistenImage_();this.changed()};ol.ImageTile.prototype.handleImageLoad_=function(){if(ol.LEGACY_IE_SUPPORT&&ol.IS_LEGACY_IE){if(!goog.isDef(this.image_.naturalWidth)){this.image_.naturalWidth=this.image_.width;this.image_.naturalHeight=this.image_.height}}if(this.image_.naturalWidth&&this.image_.naturalHeight){this.state=ol.TileState.LOADED}else{this.state=ol.TileState.EMPTY}this.unlistenImage_();this.changed()};ol.ImageTile.prototype.load=function(){if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING;this.changed();goog.asserts.assert(goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should be null");this.imageListenerKeys_=[goog.events.listenOnce(this.image_,goog.events.EventType.ERROR,this.handleImageError_,false,this),goog.events.listenOnce(this.image_,goog.events.EventType.LOAD,this.handleImageLoad_,false,this)];this.tileLoadFunction_(this,this.src_)}};ol.ImageTile.prototype.unlistenImage_=function(){goog.asserts.assert(!goog.isNull(this.imageListenerKeys_),"this.imageListenerKeys_ should not be null");goog.array.forEach(this.imageListenerKeys_,goog.events.unlistenByKey);this.imageListenerKeys_=null};goog.provide("ol.ImageUrlFunction");goog.provide("ol.ImageUrlFunctionType");goog.require("ol.Size");ol.ImageUrlFunctionType;ol.ImageUrlFunction.createFromParamsFunction=function(a,b,c){return function(d,e,f){return c(a,b,d,e,f)}};ol.ImageUrlFunction.nullImageUrlFunction=function(a,b){return undefined};goog.provide("goog.events.FileDropHandler");goog.provide("goog.events.FileDropHandler.EventType");goog.require("goog.array");goog.require("goog.dom");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventHandler");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.log");goog.require("goog.log.Level");goog.events.FileDropHandler=function(a,b){goog.events.EventTarget.call(this);this.eventHandler_=new goog.events.EventHandler(this);var c=a;if(b){c=goog.dom.getOwnerDocument(a)}this.eventHandler_.listen(c,goog.events.EventType.DRAGENTER,this.onDocDragEnter_);if(c!=a){this.eventHandler_.listen(c,goog.events.EventType.DRAGOVER,this.onDocDragOver_)}this.eventHandler_.listen(a,goog.events.EventType.DRAGOVER,this.onElemDragOver_);this.eventHandler_.listen(a,goog.events.EventType.DROP,this.onElemDrop_)};goog.inherits(goog.events.FileDropHandler,goog.events.EventTarget);goog.events.FileDropHandler.prototype.dndContainsFiles_=false;goog.events.FileDropHandler.prototype.logger_=goog.log.getLogger("goog.events.FileDropHandler");goog.events.FileDropHandler.EventType={DROP:goog.events.EventType.DROP};goog.events.FileDropHandler.prototype.disposeInternal=function(){goog.events.FileDropHandler.superClass_.disposeInternal.call(this);this.eventHandler_.dispose()};goog.events.FileDropHandler.prototype.dispatch_=function(a){goog.log.fine(this.logger_,"Firing DROP event...");var b=new goog.events.BrowserEvent(a.getBrowserEvent());b.type=goog.events.FileDropHandler.EventType.DROP;this.dispatchEvent(b)};goog.events.FileDropHandler.prototype.onDocDragEnter_=function(a){goog.log.log(this.logger_,goog.log.Level.FINER,'"'+a.target.id+'" ('+a.target+") dispatched: "+a.type);var b=a.getBrowserEvent().dataTransfer;this.dndContainsFiles_=!!(b&&(b.types&&(goog.array.contains(b.types,"Files")||goog.array.contains(b.types,"public.file-url"))||b.files&&b.files.length>0));if(this.dndContainsFiles_){a.preventDefault()}goog.log.log(this.logger_,goog.log.Level.FINER,"dndContainsFiles_: "+this.dndContainsFiles_)};goog.events.FileDropHandler.prototype.onDocDragOver_=function(a){goog.log.log(this.logger_,goog.log.Level.FINEST,'"'+a.target.id+'" ('+a.target+") dispatched: "+a.type);if(this.dndContainsFiles_){a.preventDefault();var b=a.getBrowserEvent().dataTransfer;b.dropEffect="none"}};goog.events.FileDropHandler.prototype.onElemDragOver_=function(a){goog.log.log(this.logger_,goog.log.Level.FINEST,'"'+a.target.id+'" ('+a.target+") dispatched: "+a.type);if(this.dndContainsFiles_){a.preventDefault();a.stopPropagation();var b=a.getBrowserEvent().dataTransfer;try{b.effectAllowed="all"}catch(a){}b.dropEffect="copy"}};goog.events.FileDropHandler.prototype.onElemDrop_=function(a){goog.log.log(this.logger_,goog.log.Level.FINER,'"'+a.target.id+'" ('+a.target+") dispatched: "+a.type);if(this.dndContainsFiles_){a.preventDefault();a.stopPropagation();this.dispatch_(a)}};goog.provide("goog.async.Deferred");goog.provide("goog.async.Deferred.AlreadyCalledError");goog.provide("goog.async.Deferred.CanceledError");goog.require("goog.Promise");goog.require("goog.Thenable");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.debug.Error");goog.async.Deferred=function(a,b){this.sequence_=[];this.onCancelFunction_=a;this.defaultScope_=b||null;this.fired_=false;this.hadError_=false;this.result_=undefined;this.blocked_=false;this.blocking_=false;this.silentlyCanceled_=false;this.unhandledErrorId_=0;this.parent_=null;this.branches_=0;if(goog.async.Deferred.LONG_STACK_TRACES){this.constructorStack_=null;if(Error.captureStackTrace){var c={stack:""};Error.captureStackTrace(c,goog.async.Deferred);if(typeof c.stack=="string"){this.constructorStack_=c.stack.replace(/^[^\n]*\n/,"")}}}};goog.define("goog.async.Deferred.STRICT_ERRORS",false);goog.define("goog.async.Deferred.LONG_STACK_TRACES",false);goog.async.Deferred.prototype.cancel=function(a){if(!this.hasFired()){if(this.parent_){var b=this.parent_;delete this.parent_;if(a){b.cancel(a)}else{b.branchCancel_()}}if(this.onCancelFunction_){this.onCancelFunction_.call(this.defaultScope_,this)}else{this.silentlyCanceled_=true}if(!this.hasFired()){this.errback(new goog.async.Deferred.CanceledError(this))}}else if(this.result_ instanceof goog.async.Deferred){this.result_.cancel()}};goog.async.Deferred.prototype.branchCancel_=function(){this.branches_--;if(this.branches_<=0){this.cancel()}};goog.async.Deferred.prototype.continue_=function(a,b){this.blocked_=false;this.updateResult_(a,b)};goog.async.Deferred.prototype.updateResult_=function(a,b){this.fired_=true;this.result_=b;this.hadError_=!a;this.fire_()};goog.async.Deferred.prototype.check_=function(){if(this.hasFired()){if(!this.silentlyCanceled_){throw new goog.async.Deferred.AlreadyCalledError(this)}this.silentlyCanceled_=false}};goog.async.Deferred.prototype.callback=function(a){this.check_();this.assertNotDeferred_(a);this.updateResult_(true,a)};goog.async.Deferred.prototype.errback=function(a){this.check_();this.assertNotDeferred_(a);this.makeStackTraceLong_(a);this.updateResult_(false,a)};goog.async.Deferred.prototype.makeStackTraceLong_=function(a){if(!goog.async.Deferred.LONG_STACK_TRACES){return}if(this.constructorStack_&&goog.isObject(a)&&a.stack&&/^[^\n]+(\n   [^\n]+)+/.test(a.stack)){a.stack=a.stack+"\nDEFERRED OPERATION:\n"+this.constructorStack_}};goog.async.Deferred.prototype.assertNotDeferred_=function(a){goog.asserts.assert(!(a instanceof goog.async.Deferred),"An execution sequence may not be initiated with a blocking Deferred.")};goog.async.Deferred.prototype.addCallback=function(a,b){return this.addCallbacks(a,null,b)};goog.async.Deferred.prototype.addErrback=function(a,b){return this.addCallbacks(null,a,b)};goog.async.Deferred.prototype.addBoth=function(a,b){return this.addCallbacks(a,a,b)};goog.async.Deferred.prototype.addFinally=function(a,b){var c=this;return this.addCallbacks(a,function(b){var d=a.call(c,b);if(!goog.isDef(d)){throw b}return d},b)};goog.async.Deferred.prototype.addCallbacks=function(a,b,c){goog.asserts.assert(!this.blocking_,"Blocking Deferreds can not be re-used");this.sequence_.push([a,b,c]);if(this.hasFired()){this.fire_()}return this};goog.async.Deferred.prototype.then=function(a,b,c){var d,e;var f=new goog.Promise(function(a,b){d=a;e=b});this.addCallbacks(d,function(a){if(a instanceof goog.async.Deferred.CanceledError){f.cancel()}else{e(a)}});return f.then(a,b,c)};goog.Thenable.addImplementation(goog.async.Deferred);goog.async.Deferred.prototype.chainDeferred=function(a){this.addCallbacks(a.callback,a.errback,a);return this};goog.async.Deferred.prototype.awaitDeferred=function(a){if(!(a instanceof goog.async.Deferred)){return this.addCallback(function(){return a})}return this.addCallback(goog.bind(a.branch,a))};goog.async.Deferred.prototype.branch=function(a){var b=new goog.async.Deferred;this.chainDeferred(b);if(a){b.parent_=this;this.branches_++}return b};goog.async.Deferred.prototype.hasFired=function(){return this.fired_};goog.async.Deferred.prototype.isError=function(a){return a instanceof Error};goog.async.Deferred.prototype.hasErrback_=function(){return goog.array.some(this.sequence_,function(a){return goog.isFunction(a[1])})};goog.async.Deferred.prototype.fire_=function(){if(this.unhandledErrorId_&&this.hasFired()&&this.hasErrback_()){goog.async.Deferred.unscheduleError_(this.unhandledErrorId_);this.unhandledErrorId_=0}if(this.parent_){this.parent_.branches_--;delete this.parent_}var a=this.result_;var b=false;var c=false;while(this.sequence_.length&&!this.blocked_){var d=this.sequence_.shift();var e=d[0];var f=d[1];var g=d[2];var h=this.hadError_?f:e;if(h){try{var i=h.call(g||this.defaultScope_,a);if(goog.isDef(i)){this.hadError_=this.hadError_&&(i==a||this.isError(i));this.result_=a=i}if(goog.Thenable.isImplementedBy(a)||typeof goog.global["Promise"]==="function"&&a instanceof goog.global["Promise"]){c=true;this.blocked_=true}}catch(c){a=c;this.hadError_=true;this.makeStackTraceLong_(a);if(!this.hasErrback_()){b=true}}}}this.result_=a;if(c){var j=goog.bind(this.continue_,this,true);var k=goog.bind(this.continue_,this,false);if(a instanceof goog.async.Deferred){a.addCallbacks(j,k);a.blocking_=true}else{a.then(j,k)}}else if(goog.async.Deferred.STRICT_ERRORS&&this.isError(a)&&!(a instanceof goog.async.Deferred.CanceledError)){this.hadError_=true;b=true}if(b){this.unhandledErrorId_=goog.async.Deferred.scheduleError_(a)}};goog.async.Deferred.succeed=function(a){var b=new goog.async.Deferred;b.callback(a);return b};goog.async.Deferred.fromPromise=function(a){var b=new goog.async.Deferred;b.callback();b.addCallback(function(){return a});return b};goog.async.Deferred.fail=function(a){var b=new goog.async.Deferred;b.errback(a);return b};goog.async.Deferred.canceled=function(){var a=new goog.async.Deferred;a.cancel();return a};goog.async.Deferred.when=function(a,b,c){if(a instanceof goog.async.Deferred){return a.branch(true).addCallback(b,c)}else{return goog.async.Deferred.succeed(a).addCallback(b,c)}};goog.async.Deferred.AlreadyCalledError=function(a){goog.debug.Error.call(this);this.deferred=a};goog.inherits(goog.async.Deferred.AlreadyCalledError,goog.debug.Error);goog.async.Deferred.AlreadyCalledError.prototype.message="Deferred has already fired";goog.async.Deferred.AlreadyCalledError.prototype.name="AlreadyCalledError";goog.async.Deferred.CanceledError=function(a){goog.debug.Error.call(this);this.deferred=a};goog.inherits(goog.async.Deferred.CanceledError,goog.debug.Error);goog.async.Deferred.CanceledError.prototype.message="Deferred was canceled";goog.async.Deferred.CanceledError.prototype.name="CanceledError";goog.async.Deferred.Error_=function(a){this.id_=goog.global.setTimeout(goog.bind(this.throwError,this),0);this.error_=a};goog.async.Deferred.Error_.prototype.throwError=function(){goog.asserts.assert(goog.async.Deferred.errorMap_[this.id_],"Cannot throw an error that is not scheduled.");delete goog.async.Deferred.errorMap_[this.id_];throw this.error_};goog.async.Deferred.Error_.prototype.resetTimer=function(){goog.global.clearTimeout(this.id_)}
;goog.async.Deferred.errorMap_={};goog.async.Deferred.scheduleError_=function(a){var b=new goog.async.Deferred.Error_(a);goog.async.Deferred.errorMap_[b.id_]=b;return b.id_};goog.async.Deferred.unscheduleError_=function(a){var b=goog.async.Deferred.errorMap_[a];if(b){b.resetTimer();delete goog.async.Deferred.errorMap_[a]}};goog.async.Deferred.assertNoErrors=function(){var a=goog.async.Deferred.errorMap_;for(var b in a){var c=a[b];c.resetTimer();c.throwError()}};goog.provide("goog.fs.Error");goog.provide("goog.fs.Error.ErrorCode");goog.require("goog.debug.Error");goog.require("goog.object");goog.require("goog.string");goog.fs.Error=function(a,b){this.name;this.code;if(goog.isDef(a.name)){this.name=a.name;this.code=goog.fs.Error.getCodeFromName_(a.name)}else{this.code=a.code;this.name=goog.fs.Error.getNameFromCode_(a.code)}goog.fs.Error.base(this,"constructor",goog.string.subs("%s %s",this.name,b))};goog.inherits(goog.fs.Error,goog.debug.Error);goog.fs.Error.ErrorName={ABORT:"AbortError",ENCODING:"EncodingError",INVALID_MODIFICATION:"InvalidModificationError",INVALID_STATE:"InvalidStateError",NOT_FOUND:"NotFoundError",NOT_READABLE:"NotReadableError",NO_MODIFICATION_ALLOWED:"NoModificationAllowedError",PATH_EXISTS:"PathExistsError",QUOTA_EXCEEDED:"QuotaExceededError",SECURITY:"SecurityError",SYNTAX:"SyntaxError",TYPE_MISMATCH:"TypeMismatchError"};goog.fs.Error.ErrorCode={NOT_FOUND:1,SECURITY:2,ABORT:3,NOT_READABLE:4,ENCODING:5,NO_MODIFICATION_ALLOWED:6,INVALID_STATE:7,SYNTAX:8,INVALID_MODIFICATION:9,QUOTA_EXCEEDED:10,TYPE_MISMATCH:11,PATH_EXISTS:12};goog.fs.Error.getNameFromCode_=function(a){var b=goog.object.findKey(goog.fs.Error.NameToCodeMap_,function(b){return a==b});if(!goog.isDef(b)){throw new Error("Invalid code: "+a)}return b};goog.fs.Error.getCodeFromName_=function(a){return goog.fs.Error.NameToCodeMap_[a]};goog.fs.Error.NameToCodeMap_=goog.object.create(goog.fs.Error.ErrorName.ABORT,goog.fs.Error.ErrorCode.ABORT,goog.fs.Error.ErrorName.ENCODING,goog.fs.Error.ErrorCode.ENCODING,goog.fs.Error.ErrorName.INVALID_MODIFICATION,goog.fs.Error.ErrorCode.INVALID_MODIFICATION,goog.fs.Error.ErrorName.INVALID_STATE,goog.fs.Error.ErrorCode.INVALID_STATE,goog.fs.Error.ErrorName.NOT_FOUND,goog.fs.Error.ErrorCode.NOT_FOUND,goog.fs.Error.ErrorName.NOT_READABLE,goog.fs.Error.ErrorCode.NOT_READABLE,goog.fs.Error.ErrorName.NO_MODIFICATION_ALLOWED,goog.fs.Error.ErrorCode.NO_MODIFICATION_ALLOWED,goog.fs.Error.ErrorName.PATH_EXISTS,goog.fs.Error.ErrorCode.PATH_EXISTS,goog.fs.Error.ErrorName.QUOTA_EXCEEDED,goog.fs.Error.ErrorCode.QUOTA_EXCEEDED,goog.fs.Error.ErrorName.SECURITY,goog.fs.Error.ErrorCode.SECURITY,goog.fs.Error.ErrorName.SYNTAX,goog.fs.Error.ErrorCode.SYNTAX,goog.fs.Error.ErrorName.TYPE_MISMATCH,goog.fs.Error.ErrorCode.TYPE_MISMATCH);goog.provide("goog.fs.ProgressEvent");goog.require("goog.events.Event");goog.fs.ProgressEvent=function(a,b){goog.fs.ProgressEvent.base(this,"constructor",a.type,b);this.event_=a};goog.inherits(goog.fs.ProgressEvent,goog.events.Event);goog.fs.ProgressEvent.prototype.isLengthComputable=function(){return this.event_.lengthComputable};goog.fs.ProgressEvent.prototype.getLoaded=function(){return this.event_.loaded};goog.fs.ProgressEvent.prototype.getTotal=function(){return this.event_.total};goog.provide("goog.fs.FileReader");goog.provide("goog.fs.FileReader.EventType");goog.provide("goog.fs.FileReader.ReadyState");goog.require("goog.async.Deferred");goog.require("goog.events.EventTarget");goog.require("goog.fs.Error");goog.require("goog.fs.ProgressEvent");goog.fs.FileReader=function(){goog.fs.FileReader.base(this,"constructor");this.reader_=new FileReader;this.reader_.onloadstart=goog.bind(this.dispatchProgressEvent_,this);this.reader_.onprogress=goog.bind(this.dispatchProgressEvent_,this);this.reader_.onload=goog.bind(this.dispatchProgressEvent_,this);this.reader_.onabort=goog.bind(this.dispatchProgressEvent_,this);this.reader_.onerror=goog.bind(this.dispatchProgressEvent_,this);this.reader_.onloadend=goog.bind(this.dispatchProgressEvent_,this)};goog.inherits(goog.fs.FileReader,goog.events.EventTarget);goog.fs.FileReader.ReadyState={INIT:0,LOADING:1,DONE:2};goog.fs.FileReader.EventType={LOAD_START:"loadstart",PROGRESS:"progress",LOAD:"load",ABORT:"abort",ERROR:"error",LOAD_END:"loadend"};goog.fs.FileReader.prototype.abort=function(){try{this.reader_.abort()}catch(a){throw new goog.fs.Error(a,"aborting read")}};goog.fs.FileReader.prototype.getReadyState=function(){return this.reader_.readyState};goog.fs.FileReader.prototype.getResult=function(){return this.reader_.result};goog.fs.FileReader.prototype.getError=function(){return this.reader_.error&&new goog.fs.Error(this.reader_.error,"reading file")};goog.fs.FileReader.prototype.dispatchProgressEvent_=function(a){this.dispatchEvent(new goog.fs.ProgressEvent(a,this))};goog.fs.FileReader.prototype.disposeInternal=function(){goog.fs.FileReader.base(this,"disposeInternal");delete this.reader_};goog.fs.FileReader.prototype.readAsBinaryString=function(a){this.reader_.readAsBinaryString(a)};goog.fs.FileReader.readAsBinaryString=function(a){var b=new goog.fs.FileReader;var c=goog.fs.FileReader.createDeferred_(b);b.readAsBinaryString(a);return c};goog.fs.FileReader.prototype.readAsArrayBuffer=function(a){this.reader_.readAsArrayBuffer(a)};goog.fs.FileReader.readAsArrayBuffer=function(a){var b=new goog.fs.FileReader;var c=goog.fs.FileReader.createDeferred_(b);b.readAsArrayBuffer(a);return c};goog.fs.FileReader.prototype.readAsText=function(a,b){this.reader_.readAsText(a,b)};goog.fs.FileReader.readAsText=function(a,b){var c=new goog.fs.FileReader;var d=goog.fs.FileReader.createDeferred_(c);c.readAsText(a,b);return d};goog.fs.FileReader.prototype.readAsDataUrl=function(a){this.reader_.readAsDataURL(a)};goog.fs.FileReader.readAsDataUrl=function(a){var b=new goog.fs.FileReader;var c=goog.fs.FileReader.createDeferred_(b);b.readAsDataUrl(a);return c};goog.fs.FileReader.createDeferred_=function(a){var b=new goog.async.Deferred;a.listen(goog.fs.FileReader.EventType.LOAD_END,goog.partial(function(a,b,c){var d=b.getResult();var e=b.getError();if(d!=null&&!e){a.callback(d)}else{a.errback(e)}b.dispose()},b,a));return b};goog.provide("ol.interaction.DragAndDrop");goog.provide("ol.interaction.DragAndDropEvent");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.FileDropHandler");goog.require("goog.events.FileDropHandler.EventType");goog.require("goog.fs.FileReader");goog.require("goog.functions");goog.require("ol.interaction.Interaction");goog.require("ol.proj");ol.interaction.DragAndDrop=function(a){var b=goog.isDef(a)?a:{};goog.base(this,{handleEvent:ol.interaction.DragAndDrop.handleEvent});this.formatConstructors_=goog.isDef(b.formatConstructors)?b.formatConstructors:[];this.projection_=goog.isDef(b.projection)?ol.proj.get(b.projection):null;this.fileDropHandler_=null;this.dropListenKey_=undefined};goog.inherits(ol.interaction.DragAndDrop,ol.interaction.Interaction);ol.interaction.DragAndDrop.prototype.disposeInternal=function(){if(goog.isDef(this.dropListenKey_)){goog.events.unlistenByKey(this.dropListenKey_)}goog.base(this,"disposeInternal")};ol.interaction.DragAndDrop.prototype.handleDrop_=function(a){var b=a.getBrowserEvent().dataTransfer.files;var c,d,e;for(c=0,d=b.length;c<d;++c){e=b[c];var f=goog.fs.FileReader.readAsText(e,"");f.addCallback(goog.partial(this.handleResult_,e),this)}};ol.interaction.DragAndDrop.prototype.handleResult_=function(a,b){var c=this.getMap();goog.asserts.assert(!goog.isNull(c),"map should not be null");var d=this.projection_;if(goog.isNull(d)){var e=c.getView();goog.asserts.assert(!goog.isNull(e),"view should not be null");d=e.getProjection();goog.asserts.assert(goog.isDef(d),"projection should be defined")}var f=this.formatConstructors_;var g=[];var h,i;for(h=0,i=f.length;h<i;++h){var j=f[h];var k=new j;var l=this.tryReadFeatures_(k,b);if(!goog.isNull(l)){var m=k.readProjection(b);var n=ol.proj.getTransform(m,d);var o,p;for(o=0,p=l.length;o<p;++o){var q=l[o];var r=q.getGeometry();if(goog.isDefAndNotNull(r)){r.applyTransform(n)}g.push(q)}}}this.dispatchEvent(new ol.interaction.DragAndDropEvent(ol.interaction.DragAndDropEventType.ADD_FEATURES,this,a,g,d))};ol.interaction.DragAndDrop.handleEvent=goog.functions.TRUE;ol.interaction.DragAndDrop.prototype.setMap=function(a){if(goog.isDef(this.dropListenKey_)){goog.events.unlistenByKey(this.dropListenKey_);this.dropListenKey_=undefined}if(!goog.isNull(this.fileDropHandler_)){goog.dispose(this.fileDropHandler_);this.fileDropHandler_=null}goog.asserts.assert(!goog.isDef(this.dropListenKey_),"this.dropListenKey_ should be undefined");goog.base(this,"setMap",a);if(!goog.isNull(a)){this.fileDropHandler_=new goog.events.FileDropHandler(a.getViewport());this.dropListenKey_=goog.events.listen(this.fileDropHandler_,goog.events.FileDropHandler.EventType.DROP,this.handleDrop_,false,this)}};ol.interaction.DragAndDrop.prototype.tryReadFeatures_=function(a,b){try{return a.readFeatures(b)}catch(a){return null}};ol.interaction.DragAndDropEventType={ADD_FEATURES:"addfeatures"};ol.interaction.DragAndDropEvent=function(a,b,c,d,e){goog.base(this,a,b);this.features=d;this.file=c;this.projection=e};goog.inherits(ol.interaction.DragAndDropEvent,goog.events.Event);goog.provide("goog.math.Vec2");goog.require("goog.math");goog.require("goog.math.Coordinate");goog.math.Vec2=function(a,b){this.x=a;this.y=b};goog.inherits(goog.math.Vec2,goog.math.Coordinate);goog.math.Vec2.randomUnit=function(){var a=Math.random()*Math.PI*2;return new goog.math.Vec2(Math.cos(a),Math.sin(a))};goog.math.Vec2.random=function(){var a=Math.sqrt(Math.random());var b=Math.random()*Math.PI*2;return new goog.math.Vec2(Math.cos(b)*a,Math.sin(b)*a)};goog.math.Vec2.fromCoordinate=function(a){return new goog.math.Vec2(a.x,a.y)};goog.math.Vec2.prototype.clone=function(){return new goog.math.Vec2(this.x,this.y)};goog.math.Vec2.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};goog.math.Vec2.prototype.squaredMagnitude=function(){return this.x*this.x+this.y*this.y};goog.math.Vec2.prototype.scale=goog.math.Coordinate.prototype.scale;goog.math.Vec2.prototype.invert=function(){this.x=-this.x;this.y=-this.y;return this};goog.math.Vec2.prototype.normalize=function(){return this.scale(1/this.magnitude())};goog.math.Vec2.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};goog.math.Vec2.prototype.subtract=function(a){this.x-=a.x;this.y-=a.y;return this};goog.math.Vec2.prototype.rotate=function(a){var b=Math.cos(a);var c=Math.sin(a);var d=this.x*b-this.y*c;var e=this.y*b+this.x*c;this.x=d;this.y=e;return this};goog.math.Vec2.rotateAroundPoint=function(a,b,c){var d=a.clone();return d.subtract(b).rotate(c).add(b)};goog.math.Vec2.prototype.equals=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};goog.math.Vec2.distance=goog.math.Coordinate.distance;goog.math.Vec2.squaredDistance=goog.math.Coordinate.squaredDistance;goog.math.Vec2.equals=goog.math.Coordinate.equals;goog.math.Vec2.sum=function(a,b){return new goog.math.Vec2(a.x+b.x,a.y+b.y)};goog.math.Vec2.difference=function(a,b){return new goog.math.Vec2(a.x-b.x,a.y-b.y)};goog.math.Vec2.dot=function(a,b){return a.x*b.x+a.y*b.y};goog.math.Vec2.determinant=function(a,b){return a.x*b.y-a.y*b.x};goog.math.Vec2.lerp=function(a,b,c){return new goog.math.Vec2(goog.math.lerp(a.x,b.x,c),goog.math.lerp(a.y,b.y,c))};goog.provide("ol.interaction.DragRotateAndZoom");goog.require("goog.math.Vec2");goog.require("ol.ViewHint");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.DragRotateAndZoom=function(a){var b=goog.isDef(a)?a:{};goog.base(this,{handleDownEvent:ol.interaction.DragRotateAndZoom.handleDownEvent_,handleDragEvent:ol.interaction.DragRotateAndZoom.handleDragEvent_,handleUpEvent:ol.interaction.DragRotateAndZoom.handleUpEvent_});this.condition_=goog.isDef(b.condition)?b.condition:ol.events.condition.shiftKeyOnly;this.lastAngle_=undefined;this.lastMagnitude_=undefined;this.lastScaleDelta_=0;this.duration_=goog.isDef(b.duration)?b.duration:400};goog.inherits(ol.interaction.DragRotateAndZoom,ol.interaction.Pointer);ol.interaction.DragRotateAndZoom.handleDragEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return}var b=a.map;var c=b.getSize();var d=a.pixel;var e=new goog.math.Vec2(d[0]-c[0]/2,c[1]/2-d[1]);var f=Math.atan2(e.y,e.x);var g=e.magnitude();var h=b.getView();b.render();if(goog.isDef(this.lastAngle_)){var i=f-this.lastAngle_;ol.interaction.Interaction.rotateWithoutConstraints(b,h,h.getRotation()-i)}this.lastAngle_=f;if(goog.isDef(this.lastMagnitude_)){var j=this.lastMagnitude_*(h.getResolution()/g);ol.interaction.Interaction.zoomWithoutConstraints(b,h,j)}if(goog.isDef(this.lastMagnitude_)){this.lastScaleDelta_=this.lastMagnitude_/g}this.lastMagnitude_=g};ol.interaction.DragRotateAndZoom.handleUpEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return true}var b=a.map;var c=b.getView();c.setHint(ol.ViewHint.INTERACTING,-1);var d=this.lastScaleDelta_-1;ol.interaction.Interaction.rotate(b,c,c.getRotation());ol.interaction.Interaction.zoom(b,c,c.getResolution(),undefined,this.duration_,d);this.lastScaleDelta_=0;return false};ol.interaction.DragRotateAndZoom.handleDownEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return false}if(this.condition_(a)){a.map.getView().setHint(ol.ViewHint.INTERACTING,1);this.lastAngle_=undefined;this.lastMagnitude_=undefined;return true}else{return false}};goog.provide("ol.interaction.Draw");goog.provide("ol.interaction.DrawEvent");goog.provide("ol.interaction.DrawEventType");goog.provide("ol.interaction.DrawGeometryFunctionType");goog.provide("ol.interaction.DrawMode");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("ol.Collection");goog.require("ol.Coordinate");goog.require("ol.Feature");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.Object");goog.require("ol.coordinate");goog.require("ol.events.condition");goog.require("ol.geom.Circle");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.interaction.InteractionProperty");goog.require("ol.interaction.Pointer");goog.require("ol.layer.Vector");goog.require("ol.source.Vector");ol.interaction.DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend"};ol.interaction.DrawEvent=function(a,b){goog.base(this,a);this.feature=b};goog.inherits(ol.interaction.DrawEvent,goog.events.Event);ol.interaction.Draw=function(a){goog.base(this,{handleDownEvent:ol.interaction.Draw.handleDownEvent_,handleEvent:ol.interaction.Draw.handleEvent,handleUpEvent:ol.interaction.Draw.handleUpEvent_});this.downPx_=null;this.freehand_=false;this.source_=goog.isDef(a.source)?a.source:null;this.features_=goog.isDef(a.features)?a.features:null;this.snapTolerance_=goog.isDef(a.snapTolerance)?a.snapTolerance:12;this.type_=a.type;this.mode_=ol.interaction.Draw.getMode_(this.type_);this.minPoints_=goog.isDef(a.minPoints)?a.minPoints:this.mode_===ol.interaction.DrawMode.POLYGON?3:2;this.maxPoints_=goog.isDef(a.maxPoints)?a.maxPoints:Infinity;var b=a.geometryFunction;if(!goog.isDef(b)){if(this.type_===ol.geom.GeometryType.CIRCLE){b=function(a,b){var c=goog.isDef(b)?b:new ol.geom.Circle([NaN,NaN]);goog.asserts.assertInstanceof(c,ol.geom.Circle,"geometry must be an ol.geom.Circle");var d=ol.coordinate.squaredDistance(a[0],a[1]);c.setCenterAndRadius(a[0],Math.sqrt(d));return c}}else{var c;var d=this.mode_;if(d===ol.interaction.DrawMode.POINT){c=ol.geom.Point}else if(d===ol.interaction.DrawMode.LINE_STRING){c=ol.geom.LineString}else if(d===ol.interaction.DrawMode.POLYGON){c=ol.geom.Polygon}b=function(a,b){var d=b;if(goog.isDef(d)){d.setCoordinates(a)}else{d=new c(a)}return d}}}this.geometryFunction_=b;this.finishCoordinate_=null;this.sketchFeature_=null;this.sketchPoint_=null;this.sketchCoords_=null;this.sketchLine_=null;this.sketchLineCoords_=null;this.squaredClickTolerance_=goog.isDef(a.clickTolerance)?a.clickTolerance*a.clickTolerance:36;this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:goog.isDef(a.wrapX)?a.wrapX:false}),style:goog.isDef(a.style)?a.style:ol.interaction.Draw.getDefaultStyleFunction()});this.geometryName_=a.geometryName;this.condition_=goog.isDef(a.condition)?a.condition:ol.events.condition.noModifierKeys;this.freehandCondition_=goog.isDef(a.freehandCondition)?a.freehandCondition:ol.events.condition.shiftKeyOnly;goog.events.listen(this,ol.Object.getChangeEventType(ol.interaction.InteractionProperty.ACTIVE),this.updateState_,false,this)};goog.inherits(ol.interaction.Draw,ol.interaction.Pointer);ol.interaction.Draw.getDefaultStyleFunction=function(){var a=ol.style.createDefaultEditingStyles();return function(b,c){return a[b.getGeometry().getType()]}};ol.interaction.Draw.prototype.setMap=function(a){goog.base(this,"setMap",a);this.updateState_()};ol.interaction.Draw.handleEvent=function(a){var b=!this.freehand_;if(this.freehand_&&a.type===ol.MapBrowserEvent.EventType.POINTERDRAG){this.addToDrawing_(a);b=false}else if(a.type===ol.MapBrowserEvent.EventType.POINTERMOVE){b=this.handlePointerMove_(a)}else if(a.type===ol.MapBrowserEvent.EventType.DBLCLICK){b=false}return ol.interaction.Pointer.handleEvent.call(this,a)&&b};ol.interaction.Draw.handleDownEvent_=function(a){if(this.condition_(a)){this.downPx_=a.pixel;return true}else if((this.mode_===ol.interaction.DrawMode.LINE_STRING||this.mode_===ol.interaction.DrawMode.POLYGON)&&this.freehandCondition_(a)){this.downPx_=a.pixel;this.freehand_=true;if(goog.isNull(this.finishCoordinate_)){this.startDrawing_(a)}return true}else{return false}};ol.interaction.Draw.handleUpEvent_=function(a){this.freehand_=false;var b=this.downPx_;var c=a.pixel;var d=b[0]-c[0];var e=b[1]-c[1];var f=d*d+e*e;var g=true;if(f<=this.squaredClickTolerance_){this.handlePointerMove_(a);if(goog.isNull(this.finishCoordinate_)){this.startDrawing_(a);if(this.mode_===ol.interaction.DrawMode.POINT){this.finishDrawing()}}else if(this.mode_===ol.interaction.DrawMode.CIRCLE){this.finishDrawing()}else if(this.atFinish_(a)){this.finishDrawing()}else{this.addToDrawing_(a)}g=false}return g};ol.interaction.Draw.prototype.handlePointerMove_=function(a){if(!goog.isNull(this.finishCoordinate_)){this.modifyDrawing_(a)}else{this.createOrUpdateSketchPoint_(a)}return true};ol.interaction.Draw.prototype.atFinish_=function(a){var b=false;if(!goog.isNull(this.sketchFeature_)){var c=false;var d=[this.finishCoordinate_];if(this.mode_===ol.interaction.DrawMode.LINE_STRING){c=this.sketchCoords_.length>this.minPoints_}else if(this.mode_===ol.interaction.DrawMode.POLYGON){c=this.sketchCoords_[0].length>this.minPoints_;d=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]}if(c){var e=a.map;for(var f=0,g=d.length;f<g;f++){var h=d[f];var i=e.getPixelFromCoordinate(h);var j=a.pixel;var k=j[0]-i[0];var l=j[1]-i[1];var m=this.freehand_&&this.freehandCondition_(a);var n=m?1:this.snapTolerance_;b=Math.sqrt(k*k+l*l)<=n;if(b){this.finishCoordinate_=h;break}}}}return b};ol.interaction.Draw.prototype.createOrUpdateSketchPoint_=function(a){var b=a.coordinate.slice();if(goog.isNull(this.sketchPoint_)){this.sketchPoint_=new ol.Feature(new ol.geom.Point(b));this.updateSketchFeatures_()}else{var c=this.sketchPoint_.getGeometry();goog.asserts.assertInstanceof(c,ol.geom.Point,"sketchPointGeom should be an ol.geom.Point");c.setCoordinates(b)}};ol.interaction.Draw.prototype.startDrawing_=function(a){var b=a.coordinate;this.finishCoordinate_=b;if(this.mode_===ol.interaction.DrawMode.POINT){this.sketchCoords_=b.slice()}else if(this.mode_===ol.interaction.DrawMode.POLYGON){this.sketchCoords_=[[b.slice(),b.slice()]];this.sketchLineCoords_=this.sketchCoords_[0]}else{this.sketchCoords_=[b.slice(),b.slice()];if(this.mode_===ol.interaction.DrawMode.CIRCLE){this.sketchLineCoords_=this.sketchCoords_}}if(!goog.isNull(this.sketchLineCoords_)){this.sketchLine_=new ol.Feature(new ol.geom.LineString(this.sketchLineCoords_))}var c=this.geometryFunction_(this.sketchCoords_);goog.asserts.assert(goog.isDef(c),"geometry should be defined");this.sketchFeature_=new ol.Feature;if(goog.isDef(this.geometryName_)){this.sketchFeature_.setGeometryName(this.geometryName_)}this.sketchFeature_.setGeometry(c);this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw.prototype.modifyDrawing_=function(a){var b=a.coordinate;var c=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(c,ol.geom.SimpleGeometry,"geometry should be ol.geom.SimpleGeometry or subclass");var d,e;if(this.mode_===ol.interaction.DrawMode.POINT){e=this.sketchCoords_}else if(this.mode_===ol.interaction.DrawMode.POLYGON){d=this.sketchCoords_[0];e=d[d.length-1];if(this.atFinish_(a)){b=this.finishCoordinate_.slice()}}else{d=this.sketchCoords_;e=d[d.length-1]}e[0]=b[0];e[1]=b[1];goog.asserts.assert(!goog.isNull(this.sketchCoords_),"sketchCoords_ must not be null");this.geometryFunction_(this.sketchCoords_,c);if(!goog.isNull(this.sketchPoint_)){var f=this.sketchPoint_.getGeometry();goog.asserts.assertInstanceof(f,ol.geom.Point,"sketchPointGeom should be an ol.geom.Point");f.setCoordinates(b)}var g;if(c instanceof ol.geom.Polygon&&this.mode_!==ol.interaction.DrawMode.POLYGON){if(goog.isNull(this.sketchLine_)){this.sketchLine_=new ol.Feature(new ol.geom.LineString(null))}var h=c.getLinearRing(0);g=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(g,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");g.setFlatCoordinates(h.getLayout(),h.getFlatCoordinates())}else if(!goog.isNull(this.sketchLineCoords_)){g=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(g,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");g.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()};ol.interaction.Draw.prototype.addToDrawing_=function(a){var b=a.coordinate;var c=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(c,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");var d;var e;if(this.mode_===ol.interaction.DrawMode.LINE_STRING){this.finishCoordinate_=b.slice();e=this.sketchCoords_;e.push(b.slice());d=e.length>this.maxPoints_;this.geometryFunction_(e,c)}else if(this.mode_===ol.interaction.DrawMode.POLYGON){e=this.sketchCoords_[0];e.push(b.slice());d=e.length>this.maxPoints_;if(d){this.finishCoordinate_=e[0]}this.geometryFunction_(this.sketchCoords_,c)}this.updateSketchFeatures_();if(d){this.finishDrawing()}};ol.interaction.Draw.prototype.removeLastPoint=function(){var a=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(a,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");var b,c;if(this.mode_===ol.interaction.DrawMode.LINE_STRING){b=this.sketchCoords_;b.splice(-2,1);this.geometryFunction_(b,a)}else if(this.mode_===ol.interaction.DrawMode.POLYGON){b=this.sketchCoords_[0];b.splice(-2,1);c=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(c,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");c.setCoordinates(b);this.geometryFunction_(this.sketchCoords_,a)}if(b.length===0){this.finishCoordinate_=null}this.updateSketchFeatures_()};ol.interaction.Draw.prototype.finishDrawing=function(){var a=this.abortDrawing_();goog.asserts.assert(!goog.isNull(a),"sketchFeature should not be null");var b=this.sketchCoords_;var c=a.getGeometry();goog.asserts.assertInstanceof(c,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");if(this.mode_===ol.interaction.DrawMode.LINE_STRING){b.pop();this.geometryFunction_(b,c)}else if(this.mode_===ol.interaction.DrawMode.POLYGON){b[0].pop();b[0].push(b[0][0]);this.geometryFunction_(b,c)}if(this.type_===ol.geom.GeometryType.MULTI_POINT){a.setGeometry(new ol.geom.MultiPoint([b]))}else if(this.type_===ol.geom.GeometryType.MULTI_LINE_STRING){a.setGeometry(new ol.geom.MultiLineString([b]))}else if(this.type_===ol.geom.GeometryType.MULTI_POLYGON){a.setGeometry(new ol.geom.MultiPolygon([b]))}this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWEND,a));if(!goog.isNull(this.features_)){this.features_.push(a)}if(!goog.isNull(this.source_)){this.source_.addFeature(a)}};ol.interaction.Draw.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var a=this.sketchFeature_;if(!goog.isNull(a)){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLine_=null;this.overlay_.getSource().clear(true)}return a};ol.interaction.Draw.prototype.extend=function(a){var b=a.getGeometry();goog.asserts.assert(this.mode_==ol.interaction.DrawMode.LINE_STRING,'interaction mode must be "line"');goog.asserts.assert(goog.isDefAndNotNull(b),"feature must have a geometry");goog.asserts.assert(b.getType()==ol.geom.GeometryType.LINE_STRING,"feature geometry must be a line string");var c=b;this.sketchFeature_=a;this.sketchCoords_=c.getCoordinates();var d=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=d.slice();this.sketchCoords_.push(d.slice());this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.Draw.prototype.updateSketchFeatures_=function(){var a=[];if(!goog.isNull(this.sketchFeature_)){a.push(this.sketchFeature_)}if(!goog.isNull(this.sketchLine_)){a.push(this.sketchLine_)}if(!goog.isNull(this.sketchPoint_)){a.push(this.sketchPoint_)}var b=this.overlay_.getSource();b.clear(true);b.addFeatures(a)};ol.interaction.Draw.prototype.updateState_=function(){var a=this.getMap();var b=this.getActive();if(goog.isNull(a)||!b){this.abortDrawing_()}this.overlay_.setMap(b?a:null)};ol.interaction.Draw.createRegularPolygon=function(a,b){return function(c,d){var e=c[0];var f=c[1];var g=Math.sqrt(ol.coordinate.squaredDistance(e,f));var h=goog.isDef(d)?d:ol.geom.Polygon.fromCircle(new ol.geom.Circle(e),a);goog.asserts.assertInstanceof(h,ol.geom.Polygon,"geometry must be a polygon");var i=goog.isDef(b)?b:Math.atan((f[1]-e[1])/(f[0]-e[0]));ol.geom.Polygon.makeRegular(h,e,g,i);return h}};ol.interaction.Draw.getMode_=function(a){var b;if(a===ol.geom.GeometryType.POINT||a===ol.geom.GeometryType.MULTI_POINT){b=ol.interaction.DrawMode.POINT}else if(a===ol.geom.GeometryType.LINE_STRING||a===ol.geom.GeometryType.MULTI_LINE_STRING){b=ol.interaction.DrawMode.LINE_STRING}else if(a===ol.geom.GeometryType.POLYGON||a===ol.geom.GeometryType.MULTI_POLYGON){b=ol.interaction.DrawMode.POLYGON}else if(a===ol.geom.GeometryType.CIRCLE){b=ol.interaction.DrawMode.CIRCLE}goog.asserts.assert(goog.isDef(b),"mode should be defined");return b};ol.interaction.DrawGeometryFunctionType;ol.interaction.DrawMode={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"};goog.provide("ol.interaction.Modify");goog.provide("ol.interaction.ModifyEvent");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("ol.Collection");goog.require("ol.CollectionEventType");goog.require("ol.Feature");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.ViewHint");goog.require("ol.coordinate");goog.require("ol.events.condition");goog.require("ol.extent");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.interaction.Pointer");goog.require("ol.layer.Vector");goog.require("ol.source.Vector");goog.require("ol.structs.RBush");ol.ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};ol.interaction.ModifyEvent=function(a,b,c){goog.base(this,a);this.features=b;this.mapBrowserPointerEvent=c};goog.inherits(ol.interaction.ModifyEvent,goog.events.Event);ol.interaction.SegmentDataType;ol.interaction.Modify=function(a){goog.base(this,{handleDownEvent:ol.interaction.Modify.handleDownEvent_,handleDragEvent:ol.interaction.Modify.handleDragEvent_,handleEvent:ol.interaction.Modify.handleEvent,handleUpEvent:ol.interaction.Modify.handleUpEvent_});this.deleteCondition_=goog.isDef(a.deleteCondition)?a.deleteCondition:goog.functions.and(ol.events.condition.noModifierKeys,ol.events.condition.singleClick);this.vertexFeature_=null;this.vertexSegments_=null;this.lastPixel_=[0,0];this.ignoreNextSingleClick_=false;this.rBush_=new ol.structs.RBush;this.pixelTolerance_=goog.isDef(a.pixelTolerance)?a.pixelTolerance:10;this.snappedToVertex_=false;this.changingFeature_=false;this.dragSegments_=null;this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:goog.isDef(a.wrapX)?a.wrapX:false}),style:goog.isDef(a.style)?a.style:ol.interaction.Modify.getDefaultStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_};this.features_=a.features;this.features_.forEach(this.addFeature_,this);goog.events.listen(this.features_,ol.CollectionEventType.ADD,this.handleFeatureAdd_,false,this);goog.events.listen(this.features_,ol.CollectionEventType.REMOVE,this.handleFeatureRemove_,false,this)};goog.inherits(ol.interaction.Modify,ol.interaction.Pointer);ol.interaction.Modify.prototype.addFeature_=function(a){var b=a.getGeometry();if(goog.isDef(this.SEGMENT_WRITERS_[b.getType()])){this.SEGMENT_WRITERS_[b.getType()].call(this,a,b)}var c=this.getMap();if(!goog.isNull(c)){this.handlePointerAtPixel_(this.lastPixel_,c)}goog.events.listen(a,goog.events.EventType.CHANGE,this.handleFeatureChange_,false,this)};ol.interaction.Modify.prototype.removeFeature_=function(a){this.removeFeatureSegmentData_(a);if(!goog.isNull(this.vertexFeature_)&&this.features_.getLength()===0){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}goog.events.unlisten(a,goog.events.EventType.CHANGE,this.handleFeatureChange_,false,this)};ol.interaction.Modify.prototype.removeFeatureSegmentData_=function(a){var b=this.rBush_;var c=[];b.forEach(function(b){if(a===b.feature){c.push(b)}});for(var d=c.length-1;d>=0;--d){b.remove(c[d])}};ol.interaction.Modify.prototype.setMap=function(a){this.overlay_.setMap(a);goog.base(this,"setMap",a)};ol.interaction.Modify.prototype.handleFeatureAdd_=function(a){var b=a.element;goog.asserts.assertInstanceof(b,ol.Feature,"feature should be an ol.Feature");this.addFeature_(b)};ol.interaction.Modify.prototype.handleFeatureChange_=function(a){if(!this.changingFeature_){var b=a.target;this.removeFeature_(b);this.addFeature_(b)}};ol.interaction.Modify.prototype.handleFeatureRemove_=function(a){var b=a.element;this.removeFeature_(b)};ol.interaction.Modify.prototype.writePointGeometry_=function(a,b){var c=b.getCoordinates();var d={feature:a,geometry:b,segment:[c,c]};this.rBush_.insert(b.getExtent(),d)};ol.interaction.Modify.prototype.writeMultiPointGeometry_=function(a,b){var c=b.getCoordinates();var d,e,f,g;for(e=0,f=c.length;e<f;++e){d=c[e];g={feature:a,geometry:b,depth:[e],index:e,segment:[d,d]};this.rBush_.insert(b.getExtent(),g)}};ol.interaction.Modify.prototype.writeLineStringGeometry_=function(a,b){
var c=b.getCoordinates();var d,e,f,g;for(d=0,e=c.length-1;d<e;++d){f=c.slice(d,d+2);g={feature:a,geometry:b,index:d,segment:f};this.rBush_.insert(ol.extent.boundingExtent(f),g)}};ol.interaction.Modify.prototype.writeMultiLineStringGeometry_=function(a,b){var c=b.getCoordinates();var d,e,f,g,h,i,j;for(g=0,h=c.length;g<h;++g){d=c[g];for(e=0,f=d.length-1;e<f;++e){i=d.slice(e,e+2);j={feature:a,geometry:b,depth:[g],index:e,segment:i};this.rBush_.insert(ol.extent.boundingExtent(i),j)}}};ol.interaction.Modify.prototype.writePolygonGeometry_=function(a,b){var c=b.getCoordinates();var d,e,f,g,h,i,j;for(g=0,h=c.length;g<h;++g){d=c[g];for(e=0,f=d.length-1;e<f;++e){i=d.slice(e,e+2);j={feature:a,geometry:b,depth:[g],index:e,segment:i};this.rBush_.insert(ol.extent.boundingExtent(i),j)}}};ol.interaction.Modify.prototype.writeMultiPolygonGeometry_=function(a,b){var c=b.getCoordinates();var d,e,f,g,h,i,j,k,l,m;for(i=0,j=c.length;i<j;++i){k=c[i];for(g=0,h=k.length;g<h;++g){d=k[g];for(e=0,f=d.length-1;e<f;++e){l=d.slice(e,e+2);m={feature:a,geometry:b,depth:[g,i],index:e,segment:l};this.rBush_.insert(ol.extent.boundingExtent(l),m)}}}};ol.interaction.Modify.prototype.writeGeometryCollectionGeometry_=function(a,b){var c,d=b.getGeometriesArray();for(c=0;c<d.length;++c){this.SEGMENT_WRITERS_[d[c].getType()].call(this,a,d[c])}};ol.interaction.Modify.prototype.createOrUpdateVertexFeature_=function(a){var b=this.vertexFeature_;if(goog.isNull(b)){b=new ol.Feature(new ol.geom.Point(a));this.vertexFeature_=b;this.overlay_.getSource().addFeature(b)}else{var c=b.getGeometry();c.setCoordinates(a)}return b};ol.interaction.Modify.compareIndexes_=function(a,b){return a.index-b.index};ol.interaction.Modify.handleDownEvent_=function(a){this.handlePointerAtPixel_(a.pixel,a.map);this.dragSegments_=[];var b=this.vertexFeature_;if(!goog.isNull(b)){var c=[];var d=b.getGeometry();var e=d.getCoordinates();var f=ol.extent.boundingExtent([e]);var g=this.rBush_.getInExtent(f);var h={};g.sort(ol.interaction.Modify.compareIndexes_);for(var i=0,j=g.length;i<j;++i){var k=g[i];var l=k.segment;var m=goog.getUid(k.feature);var n=k.depth;if(n){m+="-"+n.join("-")}if(!h[m]){h[m]=new Array(2)}if(ol.coordinate.equals(l[0],e)&&!h[m][0]){this.dragSegments_.push([k,0]);h[m][0]=k}else if(ol.coordinate.equals(l[1],e)&&!h[m][1]){if((k.geometry.getType()===ol.geom.GeometryType.LINE_STRING||k.geometry.getType()===ol.geom.GeometryType.MULTI_LINE_STRING)&&h[m][0]&&h[m][0].index===0){continue}this.dragSegments_.push([k,1]);h[m][1]=k}else if(goog.getUid(l)in this.vertexSegments_&&(!h[m][0]&&!h[m][1])){c.push([k,e])}}for(i=c.length-1;i>=0;--i){this.insertVertex_.apply(this,c[i])}this.dispatchEvent(new ol.interaction.ModifyEvent(ol.ModifyEventType.MODIFYSTART,this.features_,a))}return!goog.isNull(this.vertexFeature_)};ol.interaction.Modify.handleDragEvent_=function(a){this.ignoreNextSingleClick_=false;var b=a.coordinate;for(var c=0,d=this.dragSegments_.length;c<d;++c){var e=this.dragSegments_[c];var f=e[0];var g=f.depth;var h=f.geometry;var i=h.getCoordinates();var j=f.segment;var k=e[1];while(b.length<h.getStride()){b.push(0)}switch(h.getType()){case ol.geom.GeometryType.POINT:i=b;j[0]=j[1]=b;break;case ol.geom.GeometryType.MULTI_POINT:i[f.index]=b;j[0]=j[1]=b;break;case ol.geom.GeometryType.LINE_STRING:i[f.index+k]=b;j[k]=b;break;case ol.geom.GeometryType.MULTI_LINE_STRING:i[g[0]][f.index+k]=b;j[k]=b;break;case ol.geom.GeometryType.POLYGON:i[g[0]][f.index+k]=b;j[k]=b;break;case ol.geom.GeometryType.MULTI_POLYGON:i[g[1]][g[0]][f.index+k]=b;j[k]=b;break}this.setGeometryCoordinates_(h,i)}this.createOrUpdateVertexFeature_(b)};ol.interaction.Modify.handleUpEvent_=function(a){var b;for(var c=this.dragSegments_.length-1;c>=0;--c){b=this.dragSegments_[c][0];this.rBush_.update(ol.extent.boundingExtent(b.segment),b)}this.dispatchEvent(new ol.interaction.ModifyEvent(ol.ModifyEventType.MODIFYEND,this.features_,a));return false};ol.interaction.Modify.handleEvent=function(a){var b;if(!a.map.getView().getHints()[ol.ViewHint.INTERACTING]&&a.type==ol.MapBrowserEvent.EventType.POINTERMOVE&&!this.handlingDownUpSequence){this.handlePointerMove_(a)}if(!goog.isNull(this.vertexFeature_)&&this.deleteCondition_(a)){if(a.type!=ol.MapBrowserEvent.EventType.SINGLECLICK||!this.ignoreNextSingleClick_){var c=this.vertexFeature_.getGeometry();goog.asserts.assertInstanceof(c,ol.geom.Point,"geometry should be an ol.geom.Point");b=this.removeVertex_()}else{b=true}}if(a.type==ol.MapBrowserEvent.EventType.SINGLECLICK){this.ignoreNextSingleClick_=false}return ol.interaction.Pointer.handleEvent.call(this,a)&&!b};ol.interaction.Modify.prototype.handlePointerMove_=function(a){this.lastPixel_=a.pixel;this.handlePointerAtPixel_(a.pixel,a.map)};ol.interaction.Modify.prototype.handlePointerAtPixel_=function(a,b){var c=b.getCoordinateFromPixel(a);var d=function(a,b){return ol.coordinate.squaredDistanceToSegment(c,a.segment)-ol.coordinate.squaredDistanceToSegment(c,b.segment)};var e=b.getCoordinateFromPixel([a[0]-this.pixelTolerance_,a[1]+this.pixelTolerance_]);var f=b.getCoordinateFromPixel([a[0]+this.pixelTolerance_,a[1]-this.pixelTolerance_]);var g=ol.extent.boundingExtent([e,f]);var h=this.rBush_;var i=h.getInExtent(g);if(i.length>0){i.sort(d);var j=i[0];var k=j.segment;var l=ol.coordinate.closestOnSegment(c,k);var m=b.getPixelFromCoordinate(l);if(Math.sqrt(ol.coordinate.squaredDistance(a,m))<=this.pixelTolerance_){var n=b.getPixelFromCoordinate(k[0]);var o=b.getPixelFromCoordinate(k[1]);var p=ol.coordinate.squaredDistance(m,n);var q=ol.coordinate.squaredDistance(m,o);var r=Math.sqrt(Math.min(p,q));this.snappedToVertex_=r<=this.pixelTolerance_;if(this.snappedToVertex_){l=p>q?k[1]:k[0]}this.createOrUpdateVertexFeature_(l);var s={};s[goog.getUid(k)]=true;var t;for(var u=1,v=i.length;u<v;++u){t=i[u].segment;if(ol.coordinate.equals(k[0],t[0])&&ol.coordinate.equals(k[1],t[1])||ol.coordinate.equals(k[0],t[1])&&ol.coordinate.equals(k[1],t[0])){s[goog.getUid(t)]=true}else{break}}this.vertexSegments_=s;return}}if(!goog.isNull(this.vertexFeature_)){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};ol.interaction.Modify.prototype.insertVertex_=function(a,b){var c=a.segment;var d=a.feature;var e=a.geometry;var f=a.depth;var g=a.index;var h;while(b.length<e.getStride()){b.push(0)}switch(e.getType()){case ol.geom.GeometryType.MULTI_LINE_STRING:goog.asserts.assertInstanceof(e,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");h=e.getCoordinates();h[f[0]].splice(g+1,0,b);break;case ol.geom.GeometryType.POLYGON:goog.asserts.assertInstanceof(e,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");h=e.getCoordinates();h[f[0]].splice(g+1,0,b);break;case ol.geom.GeometryType.MULTI_POLYGON:goog.asserts.assertInstanceof(e,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");h=e.getCoordinates();h[f[1]][f[0]].splice(g+1,0,b);break;case ol.geom.GeometryType.LINE_STRING:goog.asserts.assertInstanceof(e,ol.geom.LineString,"geometry should be an ol.geom.LineString");h=e.getCoordinates();h.splice(g+1,0,b);break;default:return}this.setGeometryCoordinates_(e,h);var i=this.rBush_;goog.asserts.assert(goog.isDef(c),"segment should be defined");i.remove(a);goog.asserts.assert(goog.isDef(g),"index should be defined");this.updateSegmentIndices_(e,g,f,1);var j={segment:[c[0],b],feature:d,geometry:e,depth:f,index:g};i.insert(ol.extent.boundingExtent(j.segment),j);this.dragSegments_.push([j,1]);var k={segment:[b,c[1]],feature:d,geometry:e,depth:f,index:g+1};i.insert(ol.extent.boundingExtent(k.segment),k);this.dragSegments_.push([k,0]);this.ignoreNextSingleClick_=true};ol.interaction.Modify.prototype.removeVertex_=function(){var a=this.dragSegments_;var b={};var c,d,e,f,g,h,i;var j,k,l,m,n,o;for(g=a.length-1;g>=0;--g){e=a[g];m=e[0];f=m.geometry;d=f.getCoordinates();n=goog.getUid(m.feature);if(m.depth){n+="-"+m.depth.join("-")}i=l=h=undefined;if(e[1]===0){l=m;h=m.index}else if(e[1]==1){i=m;h=m.index+1}if(!(n in b)){b[n]=[i,l,h]}k=b[n];if(goog.isDef(i)){k[0]=i}if(goog.isDef(l)){k[1]=l}if(goog.isDef(k[0])&&goog.isDef(k[1])){c=d;o=false;j=h-1;switch(f.getType()){case ol.geom.GeometryType.MULTI_LINE_STRING:d[m.depth[0]].splice(h,1);o=true;break;case ol.geom.GeometryType.LINE_STRING:d.splice(h,1);o=true;break;case ol.geom.GeometryType.MULTI_POLYGON:c=c[m.depth[1]];case ol.geom.GeometryType.POLYGON:c=c[m.depth[0]];if(c.length>4){if(h==c.length-1){h=0}c.splice(h,1);o=true;if(h===0){c.pop();c.push(c[0]);j=c.length-1}}break}if(o){this.rBush_.remove(k[0]);this.rBush_.remove(k[1]);this.setGeometryCoordinates_(f,d);goog.asserts.assert(j>=0,"newIndex should be larger than 0");var p={depth:m.depth,feature:m.feature,geometry:m.geometry,index:j,segment:[k[0].segment[0],k[1].segment[1]]};this.rBush_.insert(ol.extent.boundingExtent(p.segment),p);this.updateSegmentIndices_(f,h,m.depth,-1);if(!goog.isNull(this.vertexFeature_)){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}}}}return true};ol.interaction.Modify.prototype.setGeometryCoordinates_=function(a,b){this.changingFeature_=true;a.setCoordinates(b);this.changingFeature_=false};ol.interaction.Modify.prototype.updateSegmentIndices_=function(a,b,c,d){this.rBush_.forEachInExtent(a.getExtent(),function(e){goog.asserts.assert(goog.isDef(e.depth));if(e.geometry===a&&(!goog.isDef(c)||goog.array.equals(e.depth,c))&&e.index>b){e.index+=d}})};ol.interaction.Modify.getDefaultStyleFunction=function(){var a=ol.style.createDefaultEditingStyles();return function(b,c){return a[ol.geom.GeometryType.POINT]}};goog.provide("ol.interaction.Select");goog.provide("ol.interaction.SelectEvent");goog.provide("ol.interaction.SelectEventType");goog.provide("ol.interaction.SelectFilterFunction");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.functions");goog.require("ol.CollectionEventType");goog.require("ol.Feature");goog.require("ol.events.condition");goog.require("ol.geom.GeometryType");goog.require("ol.interaction.Interaction");goog.require("ol.layer.Vector");goog.require("ol.source.Vector");ol.interaction.SelectEventType={SELECT:"select"};ol.interaction.SelectFilterFunction;ol.interaction.SelectEvent=function(a,b,c,d){goog.base(this,a);this.selected=b;this.deselected=c;this.mapBrowserEvent=d};goog.inherits(ol.interaction.SelectEvent,goog.events.Event);ol.interaction.Select=function(a){goog.base(this,{handleEvent:ol.interaction.Select.handleEvent});var b=goog.isDef(a)?a:{};this.condition_=goog.isDef(b.condition)?b.condition:ol.events.condition.singleClick;this.addCondition_=goog.isDef(b.addCondition)?b.addCondition:ol.events.condition.never;this.removeCondition_=goog.isDef(b.removeCondition)?b.removeCondition:ol.events.condition.never;this.toggleCondition_=goog.isDef(b.toggleCondition)?b.toggleCondition:ol.events.condition.shiftKeyOnly;this.multi_=goog.isDef(b.multi)?b.multi:false;this.filter_=goog.isDef(b.filter)?b.filter:goog.functions.TRUE;var c;if(goog.isDef(b.layers)){if(goog.isFunction(b.layers)){c=b.layers}else{var d=b.layers;c=function(a){return goog.array.contains(d,a)}}}else{c=goog.functions.TRUE}this.layerFilter_=c;this.featureOverlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:b.wrapX}),style:goog.isDef(b.style)?b.style:ol.interaction.Select.getDefaultStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});var e=this.featureOverlay_.getSource().getFeaturesCollection();goog.events.listen(e,ol.CollectionEventType.ADD,this.addFeature_,false,this);goog.events.listen(e,ol.CollectionEventType.REMOVE,this.removeFeature_,false,this)};goog.inherits(ol.interaction.Select,ol.interaction.Interaction);ol.interaction.Select.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()};ol.interaction.Select.handleEvent=function(a){if(!this.condition_(a)){return true}var b=this.addCondition_(a);var c=this.removeCondition_(a);var d=this.toggleCondition_(a);var e=!b&&!c&&!d;var f=a.map;var g=this.featureOverlay_.getSource().getFeaturesCollection();var h=[];var i=[];var j=false;if(e){f.forEachFeatureAtPixel(a.pixel,function(a,b){if(this.filter_(a,b)){i.push(a);return!this.multi_}},this,this.layerFilter_);if(i.length>0&&g.getLength()==1&&g.item(0)==i[0]){}else{j=true;if(g.getLength()!==0){h=Array.prototype.concat(g.getArray());g.clear()}g.extend(i)}}else{f.forEachFeatureAtPixel(a.pixel,function(a,e){var f=goog.array.indexOf(g.getArray(),a);if(f==-1){if(b||d){if(this.filter_(a,e)){i.push(a)}}}else{if(c||d){h.push(a)}}},this,this.layerFilter_);var k;for(k=h.length-1;k>=0;--k){g.remove(h[k])}g.extend(i);if(i.length>0||h.length>0){j=true}}if(j){this.dispatchEvent(new ol.interaction.SelectEvent(ol.interaction.SelectEventType.SELECT,i,h,a))}return ol.events.condition.pointerMove(a)};ol.interaction.Select.prototype.setMap=function(a){var b=this.getMap();var c=this.featureOverlay_.getSource().getFeaturesCollection();if(!goog.isNull(b)){c.forEach(b.unskipFeature,b)}goog.base(this,"setMap",a);this.featureOverlay_.setMap(a);if(!goog.isNull(a)){c.forEach(a.skipFeature,a)}};ol.interaction.Select.getDefaultStyleFunction=function(){var a=ol.style.createDefaultEditingStyles();goog.array.extend(a[ol.geom.GeometryType.POLYGON],a[ol.geom.GeometryType.LINE_STRING]);goog.array.extend(a[ol.geom.GeometryType.GEOMETRY_COLLECTION],a[ol.geom.GeometryType.LINE_STRING]);return function(b,c){return a[b.getGeometry().getType()]}};ol.interaction.Select.prototype.addFeature_=function(a){var b=a.element;var c=this.getMap();goog.asserts.assertInstanceof(b,ol.Feature,"feature should be an ol.Feature");if(!goog.isNull(c)){c.skipFeature(b)}};ol.interaction.Select.prototype.removeFeature_=function(a){var b=a.element;var c=this.getMap();goog.asserts.assertInstanceof(b,ol.Feature,"feature should be an ol.Feature");if(!goog.isNull(c)){c.unskipFeature(b)}};goog.provide("ol.interaction.Snap");goog.provide("ol.interaction.SnapProperty");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.Collection");goog.require("ol.CollectionEvent");goog.require("ol.CollectionEventType");goog.require("ol.Extent");goog.require("ol.Feature");goog.require("ol.Object");goog.require("ol.Observable");goog.require("ol.coordinate");goog.require("ol.extent");goog.require("ol.geom.Geometry");goog.require("ol.interaction.Pointer");goog.require("ol.source.Vector");goog.require("ol.source.VectorEvent");goog.require("ol.source.VectorEventType");goog.require("ol.structs.RBush");ol.interaction.Snap=function(a){goog.base(this,{handleEvent:ol.interaction.Snap.handleEvent_,handleDownEvent:goog.functions.TRUE,handleUpEvent:ol.interaction.Snap.handleUpEvent_});var b=goog.isDef(a)?a:{};this.source_=goog.isDef(b.source)?b.source:null;this.features_=goog.isDef(b.features)?b.features:null;this.featuresListenerKeys_=[];this.geometryChangeListenerKeys_={};this.geometryModifyListenerKeys_={};this.indexedFeaturesExtents_={};this.pendingFeatures_={};this.pixelCoordinate_=null;this.pixelTolerance_=goog.isDef(b.pixelTolerance)?b.pixelTolerance:10;this.sortByDistance_=goog.bind(ol.interaction.Snap.sortByDistance,this);this.rBush_=new ol.structs.RBush;this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_}};goog.inherits(ol.interaction.Snap,ol.interaction.Pointer);ol.interaction.Snap.prototype.addFeature=function(a,b){var c=goog.isDef(b)?b:true;var d=a.getGeometry();var e=this.SEGMENT_WRITERS_[d.getType()];if(goog.isDef(e)){var f=goog.getUid(a);this.indexedFeaturesExtents_[f]=d.getExtent(ol.extent.createEmpty());e.call(this,a,d);if(c){this.geometryModifyListenerKeys_[f]=d.on(goog.events.EventType.CHANGE,goog.bind(this.handleGeometryModify_,this,a),this);this.geometryChangeListenerKeys_[f]=a.on(ol.Object.getChangeEventType(a.getGeometryName()),this.handleGeometryChange_,this)}}};ol.interaction.Snap.prototype.forEachFeatureAdd_=function(a){this.addFeature(a)};ol.interaction.Snap.prototype.forEachFeatureRemove_=function(a){this.removeFeature(a)};ol.interaction.Snap.prototype.getFeatures_=function(){var a;if(!goog.isNull(this.features_)){a=this.features_}else if(!goog.isNull(this.source_)){a=this.source_.getFeatures()}goog.asserts.assert(goog.isDef(a),"features should be defined");return a};ol.interaction.Snap.prototype.handleFeatureAdd_=function(a){var b;if(a instanceof ol.source.VectorEvent){b=a.feature}else if(a instanceof ol.CollectionEvent){b=a.element}goog.asserts.assertInstanceof(b,ol.Feature,"feature should be an ol.Feature");this.addFeature(b)};ol.interaction.Snap.prototype.handleFeatureRemove_=function(a){var b;if(a instanceof ol.source.VectorEvent){b=a.feature}else if(a instanceof ol.CollectionEvent){b=a.element}goog.asserts.assertInstanceof(b,ol.Feature,"feature should be an ol.Feature");this.removeFeature(b)};ol.interaction.Snap.prototype.handleGeometryChange_=function(a){var b=a.currentTarget;goog.asserts.assertInstanceof(b,ol.Feature);this.removeFeature(b,true);this.addFeature(b,true)};ol.interaction.Snap.prototype.handleGeometryModify_=function(a,b){if(this.handlingDownUpSequence){var c=goog.getUid(a);if(!(c in this.pendingFeatures_)){this.pendingFeatures_[c]=a}}else{this.updateFeature_(a)}};ol.interaction.Snap.prototype.removeFeature=function(a,b){var c=goog.isDef(b)?b:true;var d=goog.getUid(a);var e=this.indexedFeaturesExtents_[d];if(e){var f=this.rBush_;var g,h=[];f.forEachInExtent(e,function(b){if(a===b.feature){h.push(b)}});for(g=h.length-1;g>=0;--g){f.remove(h[g])}if(c){ol.Observable.unByKey(this.geometryModifyListenerKeys_[d]);delete this.geometryModifyListenerKeys_[d];ol.Observable.unByKey(this.geometryChangeListenerKeys_[d]);delete this.geometryChangeListenerKeys_[d]}}};ol.interaction.Snap.prototype.setMap=function(a){var b=this.getMap();var c=this.featuresListenerKeys_;var d=this.getFeatures_();if(b){goog.array.forEach(c,ol.Observable.unByKey);c.length=0;d.forEach(this.forEachFeatureRemove_,this)}goog.base(this,"setMap",a);if(a){if(!goog.isNull(this.features_)){c.push(this.features_.on(ol.CollectionEventType.ADD,this.handleFeatureAdd_,this));c.push(this.features_.on(ol.CollectionEventType.REMOVE,this.handleFeatureRemove_,this))}else if(!goog.isNull(this.source_)){c.push(this.source_.on(ol.source.VectorEventType.ADDFEATURE,this.handleFeatureAdd_,this));c.push(this.source_.on(ol.source.VectorEventType.REMOVEFEATURE,this.handleFeatureRemove_,this))}d.forEach(this.forEachFeatureAdd_,this)}};ol.interaction.Snap.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.Snap.prototype.snapTo=function(a,b,c){var d=c.getCoordinateFromPixel([a[0]-this.pixelTolerance_,a[1]+this.pixelTolerance_]);var e=c.getCoordinateFromPixel([a[0]+this.pixelTolerance_,a[1]-this.pixelTolerance_]);var f=ol.extent.boundingExtent([d,e]);var g=this.rBush_.getInExtent(f);var h=false;var i=false;var j=null;var k=null;if(g.length>0){this.pixelCoordinate_=b;g.sort(this.sortByDistance_);var l=g[0].segment;j=ol.coordinate.closestOnSegment(b,l);k=c.getPixelFromCoordinate(j);if(Math.sqrt(ol.coordinate.squaredDistance(a,k))<=this.pixelTolerance_){i=true;var m=c.getPixelFromCoordinate(l[0]);var n=c.getPixelFromCoordinate(l[1]);var o=ol.coordinate.squaredDistance(k,m);var p=ol.coordinate.squaredDistance(k,n);var q=Math.sqrt(Math.min(o,p));h=q<=this.pixelTolerance_;if(h){j=o>p?l[1]:l[0];k=c.getPixelFromCoordinate(j);k=[Math.round(k[0]),Math.round(k[1])]}}}return{snapped:i,vertex:j,vertexPixel:k}};ol.interaction.Snap.prototype.updateFeature_=function(a){this.removeFeature(a,false);this.addFeature(a,false)};ol.interaction.Snap.prototype.writeGeometryCollectionGeometry_=function(a,b){var c,d=b.getGeometriesArray();for(c=0;c<d.length;++c){this.SEGMENT_WRITERS_[d[c].getType()].call(this,a,d[c])}};ol.interaction.Snap.prototype.writeLineStringGeometry_=function(a,b){var c=b.getCoordinates();var d,e,f,g;for(d=0,e=c.length-1;d<e;++d){f=c.slice(d,d+2);g={feature:a,segment:f};this.rBush_.insert(ol.extent.boundingExtent(f),g)}};ol.interaction.Snap.prototype.writeMultiLineStringGeometry_=function(a,b){var c=b.getCoordinates();var d,e,f,g,h,i,j;for(g=0,h=c.length;g<h;++g){d=c[g];for(e=0,f=d.length-1;e<f;++e){i=d.slice(e,e+2);j={feature:a,segment:i};this.rBush_.insert(ol.extent.boundingExtent(i),j)}}};ol.interaction.Snap.prototype.writeMultiPointGeometry_=function(a,b){var c=b.getCoordinates();var d,e,f,g;for(e=0,f=c.length;e<f;++e){d=c[e];g={feature:a,segment:[d,d]};this.rBush_.insert(b.getExtent(),g)}};ol.interaction.Snap.prototype.writeMultiPolygonGeometry_=function(a,b){var c=b.getCoordinates();var d,e,f,g,h,i,j,k,l,m;for(i=0,j=c.length;i<j;++i){k=c[i];for(g=0,h=k.length;g<h;++g){d=k[g];for(e=0,f=d.length-1;e<f;++e){l=d.slice(e,e+2);m={feature:a,segment:l};this.rBush_.insert(ol.extent.boundingExtent(l),m)}}}};ol.interaction.Snap.prototype.writePointGeometry_=function(a,b){var c=b.getCoordinates();var d={feature:a,segment:[c,c]};this.rBush_.insert(b.getExtent(),d)};ol.interaction.Snap.prototype.writePolygonGeometry_=function(a,b){var c=b.getCoordinates();var d,e,f,g,h,i,j;for(g=0,h=c.length;g<h;++g){d=c[g];for(e=0,f=d.length-1;e<f;++e){i=d.slice(e,e+2);j={feature:a,segment:i};this.rBush_.insert(ol.extent.boundingExtent(i),j)}}};ol.interaction.Snap.ResultType;ol.interaction.Snap.SegmentDataType;ol.interaction.Snap.handleEvent_=function(a){var b=this.snapTo(a.pixel,a.coordinate,a.map);if(b.snapped){a.coordinate=b.vertex.slice(0,2);a.pixel=b.vertexPixel}return ol.interaction.Pointer.handleEvent.call(this,a)};ol.interaction.Snap.handleUpEvent_=function(a){var b=goog.object.getValues(this.pendingFeatures_);if(b.length){goog.array.forEach(b,this.updateFeature_,this);this.pendingFeatures_={}}return false};ol.interaction.Snap.sortByDistance=function(a,b){return ol.coordinate.squaredDistanceToSegment(this.pixelCoordinate_,a.segment)-ol.coordinate.squaredDistanceToSegment(this.pixelCoordinate_,b.segment)};goog.provide("ol.interaction.Translate");goog.require("goog.array");goog.require("ol.interaction.Pointer");ol.interaction.Translate=function(a){goog.base(this,{handleDownEvent:ol.interaction.Translate.handleDownEvent_,handleDragEvent:ol.interaction.Translate.handleDragEvent_,handleMoveEvent:ol.interaction.Translate.handleMoveEvent_,handleUpEvent:ol.interaction.Translate.handleUpEvent_});this.previousCursor_=undefined;this.lastCoordinate_=null;this.features_=goog.isDef(a.features)?a.features:null;this.lastFeature_=null};goog.inherits(ol.interaction.Translate,ol.interaction.Pointer);ol.interaction.Translate.handleDownEvent_=function(a){this.lastFeature_=this.featuresAtPixel_(a.pixel,a.map);if(goog.isNull(this.lastCoordinate_)&&!goog.isNull(this.lastFeature_)){this.lastCoordinate_=a.coordinate;ol.interaction.Translate.handleMoveEvent_.call(this,a);return true}return false};ol.interaction.Translate.handleUpEvent_=function(a){if(!goog.isNull(this.lastCoordinate_)){this.lastCoordinate_=null;ol.interaction.Translate.handleMoveEvent_.call(this,a);return true}return false};ol.interaction.Translate.handleDragEvent_=function(a){if(!goog.isNull(this.lastCoordinate_)){var b=a.coordinate;var c=b[0]-this.lastCoordinate_[0];var d=b[1]-this.lastCoordinate_[1];if(!goog.isNull(this.features_)){this.features_.forEach(function(a){var b=a.getGeometry();b.translate(c,d);a.setGeometry(b)})}else if(goog.isNull(this.lastFeature_)){var e=this.lastFeature_.getGeometry();e.translate(c,d);this.lastFeature_.setGeometry(e)}this.lastCoordinate_=b}};ol.interaction.Translate.handleMoveEvent_=function(a){var b=a.map.getTargetElement();var c=a.map.forEachFeatureAtPixel(a.pixel,function(a){return a});if(c){var d=false;if(!goog.isNull(this.features_)&&goog.array.contains(this.features_.getArray(),c)){d=true}this.previousCursor_=b.style.cursor;b.style.cursor=!goog.isNull(this.lastCoordinate_)?"-webkit-grabbing":d?"-webkit-grab":"pointer";b.style.cursor=goog.isNull(this.lastCoordinate_)?"grabbing":d?"grab":"pointer"}else{b.style.cursor=goog.isDef(this.previousCursor_)?this.previousCursor_:"";this.previousCursor_=undefined}};ol.interaction.Translate.prototype.featuresAtPixel_=function(a,b){var c=null;var d=b.forEachFeatureAtPixel(a,function(a){return a});if(!goog.isNull(this.features_)&&goog.array.contains(this.features_.getArray(),d)){c=d}return c};goog.provide("ol.layer.Heatmap");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.math");goog.require("goog.object");goog.require("ol.Object");goog.require("ol.dom");goog.require("ol.layer.Vector");goog.require("ol.render.EventType");goog.require("ol.style.Icon");goog.require("ol.style.Style");ol.layer.HeatmapLayerProperty={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"};ol.layer.Heatmap=function(a){var b=goog.isDef(a)?a:{};var c=goog.object.clone(b);delete c.gradient;delete c.radius;delete c.blur;delete c.shadow;delete c.weight;goog.base(this,c);this.gradient_=null;this.shadow_=goog.isDef(b.shadow)?b.shadow:250;this.circleImage_=undefined;this.styleCache_=null;goog.events.listen(this,ol.Object.getChangeEventType(ol.layer.HeatmapLayerProperty.GRADIENT),this.handleGradientChanged_,false,this);this.setGradient(goog.isDef(b.gradient)?b.gradient:ol.layer.Heatmap.DEFAULT_GRADIENT);this.setBlur(goog.isDef(b.blur)?b.blur:15);this.setRadius(goog.isDef(b.radius)?b.radius:8);goog.events.listen(this,[ol.Object.getChangeEventType(ol.layer.HeatmapLayerProperty.BLUR),ol.Object.getChangeEventType(ol.layer.HeatmapLayerProperty.RADIUS)],this.handleStyleChanged_,false,this);this.handleStyleChanged_();var d=goog.isDef(b.weight)?b.weight:"weight";var e;if(goog.isString(d)){e=function(a){return a.get(d)}}else{e=d}goog.asserts.assert(goog.isFunction(e),"weightFunction should be a function");this.setStyle(goog.bind(function(a,b){goog.asserts.assert(!goog.isNull(this.styleCache_),"this.styleCache_ should not be null");goog.asserts.assert(goog.isDef(this.circleImage_),"this.circleImage_ should be defined");var c=e(a);var d=goog.isDef(c)?goog.math.clamp(c,0,1):1;var f=255*d|0;var g=this.styleCache_[f];if(!goog.isDef(g)){g=[new ol.style.Style({image:new ol.style.Icon({opacity:d,src:this.circleImage_})})];this.styleCache_[f]=g}return g},this));this.setRenderOrder(null);goog.events.listen(this,ol.render.EventType.RENDER,this.handleRender_,false,this)};goog.inherits(ol.layer.Heatmap,ol.layer.Vector);ol.layer.Heatmap.DEFAULT_GRADIENT=["#00f","#0ff","#0f0","#ff0","#f00"];ol.layer.Heatmap.createGradient_=function(a){var b=1;var c=256;var d=ol.dom.createCanvasContext2D(b,c);var e=d.createLinearGradient(0,0,b,c);var f=1/(a.length-1);for(var g=0,h=a.length;g<h;++g){e.addColorStop(g*f,a[g])}d.fillStyle=e;d.fillRect(0,0,b,c);return d.getImageData(0,0,b,c).data};ol.layer.Heatmap.prototype.createCircle_=function(){var a=this.getRadius();var b=this.getBlur();goog.asserts.assert(goog.isDef(a)&&goog.isDef(b),"radius and blur should be defined");var c=a+b+1;var d=2*c;var e=ol.dom.createCanvasContext2D(d,d);e.shadowOffsetX=e.shadowOffsetY=this.shadow_;e.shadowBlur=b;e.shadowColor="#000";e.beginPath();var f=c-this.shadow_;e.arc(f,f,a,0,Math.PI*2,true);e.fill();return e.canvas.toDataURL()};ol.layer.Heatmap.prototype.getBlur=function(){return this.get(ol.layer.HeatmapLayerProperty.BLUR)};ol.layer.Heatmap.prototype.getGradient=function(){return this.get(ol.layer.HeatmapLayerProperty.GRADIENT)};ol.layer.Heatmap.prototype.getRadius=function(){return this.get(ol.layer.HeatmapLayerProperty.RADIUS)};ol.layer.Heatmap.prototype.handleGradientChanged_=function(){this.gradient_=ol.layer.Heatmap.createGradient_(this.getGradient())};ol.layer.Heatmap.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_();this.styleCache_=new Array(256);this.changed()};ol.layer.Heatmap.prototype.handleRender_=function(a){goog.asserts.assert(a.type==ol.render.EventType.RENDER,"event.type should be RENDER");goog.asserts.assert(!goog.isNull(this.gradient_),"this.gradient_ should not be null");var b=a.context;var c=b.canvas;var d=b.getImageData(0,0,c.width,c.height);var e=d.data;var f,g,h,i;for(f=0,g=e.length;f<g;f+=4){h=e[f+3]*4;if(h){e[f]=this.gradient_[h];e[f+1]=this.gradient_[h+1];e[f+2]=this.gradient_[h+2]}}b.putImageData(d,0,0)};ol.layer.Heatmap.prototype.setBlur=function(a){this.set(ol.layer.HeatmapLayerProperty.BLUR,a)};ol.layer.Heatmap.prototype.setGradient=function(a){this.set(ol.layer.HeatmapLayerProperty.GRADIENT,a)};ol.layer.Heatmap.prototype.setRadius=function(a){this.set(ol.layer.HeatmapLayerProperty.RADIUS,a)};goog.provide("ol.raster.Operation");goog.provide("ol.raster.OperationType");ol.raster.OperationType={PIXEL:"pixel",IMAGE:"image"};ol.raster.Operation;goog.provide("ol.raster.Pixel");ol.raster.Pixel;goog.provide("goog.net.jsloader");goog.provide("goog.net.jsloader.Error");goog.provide("goog.net.jsloader.ErrorCode");goog.provide("goog.net.jsloader.Options");goog.require("goog.array");goog.require("goog.async.Deferred");goog.require("goog.debug.Error");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.object");goog.net.jsloader.GLOBAL_VERIFY_OBJS_="closure_verification";goog.net.jsloader.DEFAULT_TIMEOUT=5e3;goog.net.jsloader.Options;goog.net.jsloader.scriptsToLoad_=[];goog.net.jsloader.loadMany=function(a,b){if(!a.length){return}var c=goog.net.jsloader.scriptsToLoad_.length;goog.array.extend(goog.net.jsloader.scriptsToLoad_,a);if(c){return}a=goog.net.jsloader.scriptsToLoad_;var d=function(){var c=a.shift();var e=goog.net.jsloader.load(c,b);if(a.length){e.addBoth(d)}};d()};goog.net.jsloader.load=function(a,b){var c=b||{};var d=c.document||document;var e=goog.dom.createElement(goog.dom.TagName.SCRIPT);var f={script_:e,timeout_:undefined};var g=new goog.async.Deferred(goog.net.jsloader.cancel_,f);var h=null;var i=goog.isDefAndNotNull(c.timeout)?c.timeout:goog.net.jsloader.DEFAULT_TIMEOUT;if(i>0){h=window.setTimeout(function(){goog.net.jsloader.cleanup_(e,true);g.errback(new goog.net.jsloader.Error(goog.net.jsloader.ErrorCode.TIMEOUT,"Timeout reached for loading script "+a))},i);f.timeout_=h}e.onload=e.onreadystatechange=function(){if(!e.readyState||e.readyState=="loaded"||e.readyState=="complete"){var a=c.cleanupWhenDone||false;goog.net.jsloader.cleanup_(e,a,h);g.callback(null)}};e.onerror=function(){goog.net.jsloader.cleanup_(e,true,h);g.errback(new goog.net.jsloader.Error(goog.net.jsloader.ErrorCode.LOAD_ERROR,"Error while loading script "+a))};var j=c.attributes||{};goog.object.extend(j,{type:"text/javascript",charset:"UTF-8",src:a});goog.dom.setProperties(e,j);var k=goog.net.jsloader.getScriptParentElement_(d);k.appendChild(e);return g};goog.net.jsloader.loadAndVerify=function(a,b,c){if(!goog.global[goog.net.jsloader.GLOBAL_VERIFY_OBJS_]){goog.global[goog.net.jsloader.GLOBAL_VERIFY_OBJS_]={}}var d=goog.global[goog.net.jsloader.GLOBAL_VERIFY_OBJS_];if(goog.isDef(d[b])){return goog.async.Deferred.fail(new goog.net.jsloader.Error(goog.net.jsloader.ErrorCode.VERIFY_OBJECT_ALREADY_EXISTS,"Verification object "+b+" already defined."))}var e=goog.net.jsloader.load(a,c);var f=new goog.async.Deferred(goog.bind(e.cancel,e));e.addCallback(function(){var c=d[b];if(goog.isDef(c)){f.callback(c);delete d[b]}else{f.errback(new goog.net.jsloader.Error(goog.net.jsloader.ErrorCode.VERIFY_ERROR,"Script "+a+" loaded, but verification object "+b+" was not defined."))}});e.addErrback(function(a){if(goog.isDef(d[b])){delete d[b]}f.errback(a)});return f};goog.net.jsloader.getScriptParentElement_=function(a){var b=a.getElementsByTagName(goog.dom.TagName.HEAD);if(!b||goog.array.isEmpty(b)){return a.documentElement}else{return b[0]}};goog.net.jsloader.cancel_=function(){var a=this;if(a&&a.script_){var b=a.script_;if(b&&b.tagName==goog.dom.TagName.SCRIPT){
goog.net.jsloader.cleanup_(b,true,a.timeout_)}}};goog.net.jsloader.cleanup_=function(a,b,c){if(goog.isDefAndNotNull(c)){goog.global.clearTimeout(c)}a.onload=goog.nullFunction;a.onerror=goog.nullFunction;a.onreadystatechange=goog.nullFunction;if(b){window.setTimeout(function(){goog.dom.removeNode(a)},0)}};goog.net.jsloader.ErrorCode={LOAD_ERROR:0,TIMEOUT:1,VERIFY_ERROR:2,VERIFY_OBJECT_ALREADY_EXISTS:3};goog.net.jsloader.Error=function(a,b){var c="Jsloader error (code #"+a+")";if(b){c+=": "+b}goog.net.jsloader.Error.base(this,"constructor",c);this.code=a};goog.inherits(goog.net.jsloader.Error,goog.debug.Error);goog.provide("goog.net.Jsonp");goog.require("goog.Uri");goog.require("goog.net.jsloader");goog.net.Jsonp=function(a,b){this.uri_=new goog.Uri(a);this.callbackParamName_=b?b:"callback";this.timeout_=5e3};goog.net.Jsonp.CALLBACKS="_callbacks_";goog.net.Jsonp.scriptCounter_=0;goog.net.Jsonp.prototype.setRequestTimeout=function(a){this.timeout_=a};goog.net.Jsonp.prototype.getRequestTimeout=function(){return this.timeout_};goog.net.Jsonp.prototype.send=function(a,b,c,d){var e=a||null;var f=d||"_"+(goog.net.Jsonp.scriptCounter_++).toString(36)+goog.now().toString(36);if(!goog.global[goog.net.Jsonp.CALLBACKS]){goog.global[goog.net.Jsonp.CALLBACKS]={}}var g=this.uri_.clone();if(e){goog.net.Jsonp.addPayloadToUri_(e,g)}if(b){var h=goog.net.Jsonp.newReplyHandler_(f,b);goog.global[goog.net.Jsonp.CALLBACKS][f]=h;g.setParameterValues(this.callbackParamName_,goog.net.Jsonp.CALLBACKS+"."+f)}var i=goog.net.jsloader.load(g.toString(),{timeout:this.timeout_,cleanupWhenDone:true});var j=goog.net.Jsonp.newErrorHandler_(f,e,c);i.addErrback(j);return{id_:f,deferred_:i}};goog.net.Jsonp.prototype.cancel=function(a){if(a){if(a.deferred_){a.deferred_.cancel()}if(a.id_){goog.net.Jsonp.cleanup_(a.id_,false)}}};goog.net.Jsonp.newErrorHandler_=function(a,b,c){return function(){goog.net.Jsonp.cleanup_(a,false);if(c){c(b)}}};goog.net.Jsonp.newReplyHandler_=function(a,b){var c=function(c){goog.net.Jsonp.cleanup_(a,true);b.apply(undefined,arguments)};return c};goog.net.Jsonp.cleanup_=function(a,b){if(goog.global[goog.net.Jsonp.CALLBACKS][a]){if(b){delete goog.global[goog.net.Jsonp.CALLBACKS][a]}else{goog.global[goog.net.Jsonp.CALLBACKS][a]=goog.nullFunction}}};goog.net.Jsonp.addPayloadToUri_=function(a,b){for(var c in a){if(!a.hasOwnProperty||a.hasOwnProperty(c)){b.setParameterValues(c,a[c])}}return b};goog.provide("ol.TileUrlFunction");goog.provide("ol.TileUrlFunctionType");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.TileCoord");goog.require("ol.tilecoord");ol.TileUrlFunctionType;ol.TileCoordTransformType;ol.TileUrlFunction.createFromTemplate=function(a){var b=/\{z\}/g;var c=/\{x\}/g;var d=/\{y\}/g;var e=/\{-y\}/g;return function(f,g,h){if(goog.isNull(f)){return undefined}else{return a.replace(b,f[0].toString()).replace(c,f[1].toString()).replace(d,function(){var a=-f[2]-1;return a.toString()}).replace(e,function(){var a=(1<<f[0])+f[2];return a.toString()})}}};ol.TileUrlFunction.createFromTemplates=function(a){return ol.TileUrlFunction.createFromTileUrlFunctions(goog.array.map(a,ol.TileUrlFunction.createFromTemplate))};ol.TileUrlFunction.createFromTileUrlFunctions=function(a){goog.asserts.assert(a.length>0,"Length of tile url functions should be greater than 0");if(a.length===1){return a[0]}return function(b,c,d){if(goog.isNull(b)){return undefined}else{var e=ol.tilecoord.hash(b);var f=goog.math.modulo(e,a.length);return a[f](b,c,d)}}};ol.TileUrlFunction.nullTileUrlFunction=function(a,b,c){return undefined};ol.TileUrlFunction.expandUrl=function(a){var b=[];var c=/\{(\d)-(\d)\}/.exec(a)||/\{([a-z])-([a-z])\}/.exec(a);if(c){var d=c[1].charCodeAt(0);var e=c[2].charCodeAt(0);var f;for(f=d;f<=e;++f){b.push(a.replace(c[0],String.fromCharCode(f)))}}else{b.push(a)}return b};goog.provide("ol.source.TileImage");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.ImageTile");goog.require("ol.TileCoord");goog.require("ol.TileLoadFunctionType");goog.require("ol.TileState");goog.require("ol.TileUrlFunction");goog.require("ol.TileUrlFunctionType");goog.require("ol.source.Tile");goog.require("ol.source.TileEvent");ol.source.TileImage=function(a){goog.base(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:goog.isDef(a.state)?a.state:undefined,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX});this.tileUrlFunction=goog.isDef(a.tileUrlFunction)?a.tileUrlFunction:ol.TileUrlFunction.nullTileUrlFunction;this.crossOrigin=goog.isDef(a.crossOrigin)?a.crossOrigin:null;this.tileLoadFunction=goog.isDef(a.tileLoadFunction)?a.tileLoadFunction:ol.source.TileImage.defaultTileLoadFunction;this.tileClass=goog.isDef(a.tileClass)?a.tileClass:ol.ImageTile};goog.inherits(ol.source.TileImage,ol.source.Tile);ol.source.TileImage.defaultTileLoadFunction=function(a,b){a.getImage().src=b};ol.source.TileImage.prototype.getTile=function(a,b,c,d,e){var f=this.getKeyZXY(a,b,c);if(this.tileCache.containsKey(f)){return this.tileCache.get(f)}else{goog.asserts.assert(e,"argument projection is truthy");var g=[a,b,c];var h=this.getTileCoordForTileUrlFunction(g,e);var i=goog.isNull(h)?undefined:this.tileUrlFunction(h,d,e);var j=new this.tileClass(g,goog.isDef(i)?ol.TileState.IDLE:ol.TileState.EMPTY,goog.isDef(i)?i:"",this.crossOrigin,this.tileLoadFunction);goog.events.listen(j,goog.events.EventType.CHANGE,this.handleTileChange_,false,this);this.tileCache.set(f,j);return j}};ol.source.TileImage.prototype.getTileLoadFunction=function(){return this.tileLoadFunction};ol.source.TileImage.prototype.getTileUrlFunction=function(){return this.tileUrlFunction};ol.source.TileImage.prototype.handleTileChange_=function(a){var b=a.target;switch(b.getState()){case ol.TileState.LOADING:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADSTART,b));break;case ol.TileState.LOADED:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADEND,b));break;case ol.TileState.ERROR:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADERROR,b));break}};ol.source.TileImage.prototype.setTileLoadFunction=function(a){this.tileCache.clear();this.tileLoadFunction=a;this.changed()};ol.source.TileImage.prototype.setTileUrlFunction=function(a){this.tileCache.clear();this.tileUrlFunction=a;this.changed()};ol.source.TileImage.prototype.useTile=function(a,b,c){var d=this.getKeyZXY(a,b,c);if(this.tileCache.containsKey(d)){this.tileCache.get(d)}};goog.provide("ol.source.BingMaps");goog.require("goog.Uri");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.net.Jsonp");goog.require("ol.Attribution");goog.require("ol.TileRange");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.State");goog.require("ol.source.TileImage");goog.require("ol.tilecoord");ol.source.BingMaps=function(a){goog.base(this,{crossOrigin:"anonymous",opaque:true,projection:ol.proj.get("EPSG:3857"),state:ol.source.State.LOADING,tileLoadFunction:a.tileLoadFunction,wrapX:goog.isDef(a.wrapX)?a.wrapX:true});this.culture_=goog.isDef(a.culture)?a.culture:"en-us";this.maxZoom_=goog.isDef(a.maxZoom)?a.maxZoom:-1;var b=new goog.Uri("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+a.imagerySet);var c=new goog.net.Jsonp(b,"jsonp");c.send({include:"ImageryProviders",uriScheme:"https",key:a.key},goog.bind(this.handleImageryMetadataResponse,this))};goog.inherits(ol.source.BingMaps,ol.source.TileImage);ol.source.BingMaps.TOS_ATTRIBUTION=new ol.Attribution({html:'<a class="ol-attribution-bing-tos" '+'href="http://www.microsoft.com/maps/product/terms.html">'+"Terms of Use</a>"});ol.source.BingMaps.prototype.handleImageryMetadataResponse=function(a){if(a.statusCode!=200||a.statusDescription!="OK"||a.authenticationResultCode!="ValidCredentials"||a.resourceSets.length!=1||a.resourceSets[0].resources.length!=1){this.setState(ol.source.State.ERROR);return}var b=a.brandLogoUri;if(b.indexOf("https")==-1){b=b.replace("http","https")}var c=a.resourceSets[0].resources[0];goog.asserts.assert(c.imageWidth==c.imageHeight,"resource has imageWidth equal to imageHeight, i.e. is square");var d=this.maxZoom_==-1?c.zoomMax:this.maxZoom_;var e=this.getProjection();var f=ol.tilegrid.extentFromProjection(e);var g=c.imageWidth==c.imageHeight?c.imageWidth:[c.imageWidth,c.imageHeight];var h=ol.tilegrid.createXYZ({extent:f,minZoom:c.zoomMin,maxZoom:d,tileSize:g});this.tileGrid=h;var i=this.culture_;this.tileUrlFunction=ol.TileUrlFunction.createFromTileUrlFunctions(goog.array.map(c.imageUrlSubdomains,function(a){var b=[0,0,0];var d=c.imageUrl.replace("{subdomain}",a).replace("{culture}",i);return function(a,c,f){goog.asserts.assert(ol.proj.equivalent(f,e),"projections are equivalent");if(goog.isNull(a)){return undefined}else{ol.tilecoord.createOrUpdate(a[0],a[1],-a[2]-1,b);return d.replace("{quadkey}",ol.tilecoord.quadKey(b))}}}));if(c.imageryProviders){var j=ol.proj.getTransformFromProjections(ol.proj.get("EPSG:4326"),this.getProjection());var k=goog.array.map(c.imageryProviders,function(a){var b=a.attribution;var c={};goog.array.forEach(a.coverageAreas,function(a){var b=a.zoomMin;var e=Math.min(a.zoomMax,d);var f=a.bbox;var g=[f[1],f[0],f[3],f[2]];var i=ol.extent.applyTransform(g,j);var k,l,m;for(l=b;l<=e;++l){m=l.toString();k=h.getTileRangeForExtentAndZ(i,l);if(m in c){c[m].push(k)}else{c[m]=[k]}}});return new ol.Attribution({html:b,tileRanges:c})});k.push(ol.source.BingMaps.TOS_ATTRIBUTION);this.setAttributions(k)}this.setLogo(b);this.setState(ol.source.State.READY)};goog.provide("ol.source.Cluster");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("ol.Feature");goog.require("ol.coordinate");goog.require("ol.extent");goog.require("ol.geom.Point");goog.require("ol.source.Vector");ol.source.Cluster=function(a){goog.base(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection});this.resolution_=undefined;this.distance_=goog.isDef(a.distance)?a.distance:20;this.features_=[];this.source_=a.source;this.source_.on(goog.events.EventType.CHANGE,ol.source.Cluster.prototype.onSourceChange_,this)};goog.inherits(ol.source.Cluster,ol.source.Vector);ol.source.Cluster.prototype.getSource=function(){return this.source_};ol.source.Cluster.prototype.loadFeatures=function(a,b,c){this.source_.loadFeatures(a,b,c);if(b!==this.resolution_){this.clear();this.resolution_=b;this.cluster_();this.addFeatures(this.features_)}};ol.source.Cluster.prototype.onSourceChange_=function(){this.clear();this.cluster_();this.addFeatures(this.features_);this.changed()};ol.source.Cluster.prototype.cluster_=function(){if(!goog.isDef(this.resolution_)){return}this.features_.length=0;var a=ol.extent.createEmpty();var b=this.distance_*this.resolution_;var c=this.source_.getFeatures();var d={};for(var e=0,f=c.length;e<f;e++){var g=c[e];if(!goog.object.containsKey(d,goog.getUid(g).toString())){var h=g.getGeometry();goog.asserts.assert(h instanceof ol.geom.Point,"feature geometry is a ol.geom.Point instance");var i=h.getCoordinates();ol.extent.createOrUpdateFromCoordinate(i,a);ol.extent.buffer(a,b,a);var j=this.source_.getFeaturesInExtent(a);goog.asserts.assert(j.length>=1,"at least one neighbor found");j=goog.array.filter(j,function(a){var b=goog.getUid(a).toString();if(!goog.object.containsKey(d,b)){d[b]=true;return true}else{return false}});this.features_.push(this.createCluster_(j))}}goog.asserts.assert(goog.object.getCount(d)==this.source_.getFeatures().length,"number of clustered equals number of features in the source")};ol.source.Cluster.prototype.createCluster_=function(a){var b=a.length;var c=[0,0];for(var d=0;d<b;d++){var e=a[d].getGeometry();goog.asserts.assert(e instanceof ol.geom.Point,"feature geometry is a ol.geom.Point instance");var f=e.getCoordinates();ol.coordinate.add(c,f)}ol.coordinate.scale(c,1/b);var g=new ol.Feature(new ol.geom.Point(c));g.set("features",a);return g};goog.provide("ol.source.ImageMapGuide");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("goog.uri.utils");goog.require("ol.Image");goog.require("ol.ImageLoadFunctionType");goog.require("ol.ImageUrlFunction");goog.require("ol.extent");goog.require("ol.source.Image");ol.source.ImageMapGuide=function(a){goog.base(this,{projection:a.projection,resolutions:a.resolutions});this.crossOrigin_=goog.isDef(a.crossOrigin)?a.crossOrigin:null;this.displayDpi_=goog.isDef(a.displayDpi)?a.displayDpi:96;this.params_=goog.isDef(a.params)?a.params:{};var b;if(goog.isDef(a.url)){b=ol.ImageUrlFunction.createFromParamsFunction(a.url,this.params_,goog.bind(this.getUrl,this))}else{b=ol.ImageUrlFunction.nullImageUrlFunction}this.imageUrlFunction_=b;this.imageLoadFunction_=goog.isDef(a.imageLoadFunction)?a.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;this.hidpi_=goog.isDef(a.hidpi)?a.hidpi:true;this.metersPerUnit_=goog.isDef(a.metersPerUnit)?a.metersPerUnit:1;this.ratio_=goog.isDef(a.ratio)?a.ratio:1;this.useOverlay_=goog.isDef(a.useOverlay)?a.useOverlay:false;this.image_=null;this.renderedRevision_=0};goog.inherits(ol.source.ImageMapGuide,ol.source.Image);ol.source.ImageMapGuide.prototype.getParams=function(){return this.params_};ol.source.ImageMapGuide.prototype.getImage=function(a,b,c,d){b=this.findNearestResolution(b);c=this.hidpi_?c:1;var e=this.image_;if(!goog.isNull(e)&&this.renderedRevision_==this.getRevision()&&e.getResolution()==b&&e.getPixelRatio()==c&&ol.extent.containsExtent(e.getExtent(),a)){return e}if(this.ratio_!=1){a=a.slice();ol.extent.scaleFromCenter(a,this.ratio_)}var f=ol.extent.getWidth(a)/b;var g=ol.extent.getHeight(a)/b;var h=[f*c,g*c];var i=this.imageUrlFunction_(a,h,d);if(goog.isDef(i)){e=new ol.Image(a,b,c,this.getAttributions(),i,this.crossOrigin_,this.imageLoadFunction_);goog.events.listen(e,goog.events.EventType.CHANGE,this.handleImageChange,false,this)}else{e=null}this.image_=e;this.renderedRevision_=this.getRevision();return e};ol.source.ImageMapGuide.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};ol.source.ImageMapGuide.getScale=function(a,b,c,d){var e=ol.extent.getWidth(a);var f=ol.extent.getHeight(a);var g=b[0];var h=b[1];var i=.0254/d;if(h*e>g*f){return e*c/(g*i)}else{return f*c/(h*i)}};ol.source.ImageMapGuide.prototype.updateParams=function(a){goog.object.extend(this.params_,a);this.changed()};ol.source.ImageMapGuide.prototype.getUrl=function(a,b,c,d,e){var f=ol.source.ImageMapGuide.getScale(c,d,this.metersPerUnit_,this.displayDpi_);var g=ol.extent.getCenter(c);var h={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol.source.ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(d[0]),SETDISPLAYHEIGHT:Math.round(d[1]),SETVIEWSCALE:f,SETVIEWCENTERX:g[0],SETVIEWCENTERY:g[1]};goog.object.extend(h,b);return goog.uri.utils.appendParamsFromMap(a,h)};ol.source.ImageMapGuide.prototype.setImageLoadFunction=function(a){this.image_=null;this.imageLoadFunction_=a;this.changed()};goog.provide("ol.source.ImageStatic");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("ol.Image");goog.require("ol.ImageLoadFunctionType");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.Image");ol.source.ImageStatic=function(a){var b=goog.isDef(a.attributions)?a.attributions:null;var c=a.imageExtent;var d,e;if(goog.isDef(a.imageSize)){d=ol.extent.getHeight(c)/a.imageSize[1];e=[d]}var f=goog.isDef(a.crossOrigin)?a.crossOrigin:null;var g=goog.isDef(a.imageLoadFunction)?a.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;goog.base(this,{attributions:b,logo:a.logo,projection:ol.proj.get(a.projection),resolutions:e});this.image_=new ol.Image(c,d,1,b,a.url,f,g);goog.events.listen(this.image_,goog.events.EventType.CHANGE,this.handleImageChange,false,this)};goog.inherits(ol.source.ImageStatic,ol.source.Image);ol.source.ImageStatic.prototype.getImage=function(a,b,c,d){if(ol.extent.intersects(a,this.image_.getExtent())){return this.image_}return null};goog.provide("ol.source.wms");goog.provide("ol.source.wms.ServerType");ol.source.wms.ServerType={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};goog.provide("ol.source.ImageWMS");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.object");goog.require("goog.string");goog.require("goog.uri.utils");goog.require("ol");goog.require("ol.Image");goog.require("ol.ImageLoadFunctionType");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.Image");goog.require("ol.source.wms");goog.require("ol.source.wms.ServerType");ol.source.ImageWMS=function(a){var b=goog.isDef(a)?a:{};goog.base(this,{attributions:b.attributions,logo:b.logo,projection:b.projection,resolutions:b.resolutions});this.crossOrigin_=goog.isDef(b.crossOrigin)?b.crossOrigin:null;this.url_=b.url;this.imageLoadFunction_=goog.isDef(b.imageLoadFunction)?b.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;this.params_=b.params;this.v13_=true;this.updateV13_();this.serverType_=b.serverType;this.hidpi_=goog.isDef(b.hidpi)?b.hidpi:true;this.image_=null;this.imageSize_=[0,0];this.renderedRevision_=0;this.ratio_=goog.isDef(b.ratio)?b.ratio:1.5};goog.inherits(ol.source.ImageWMS,ol.source.Image);ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_=[101,101];ol.source.ImageWMS.prototype.getGetFeatureInfoUrl=function(a,b,c,d){goog.asserts.assert(!("VERSION"in d),"key VERSION is not allowed in params");if(!goog.isDef(this.url_)){return undefined}var e=ol.extent.getForViewAndSize(a,b,0,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_);var f={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_["LAYERS"]};goog.object.extend(f,this.params_,d);var g=Math.floor((a[0]-e[0])/b);var h=Math.floor((e[3]-a[1])/b);f[this.v13_?"I":"X"]=g;f[this.v13_?"J":"Y"]=h;return this.getRequestUrl_(e,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,1,ol.proj.get(c),f)};ol.source.ImageWMS.prototype.getParams=function(){return this.params_};ol.source.ImageWMS.prototype.getImage=function(a,b,c,d){if(!goog.isDef(this.url_)){return null}b=this.findNearestResolution(b);if(c!=1&&(!this.hidpi_||!goog.isDef(this.serverType_))){c=1}a=a.slice();var e=(a[0]+a[2])/2;var f=(a[1]+a[3])/2;if(this.ratio_!=1){var g=this.ratio_*ol.extent.getWidth(a)/2;var h=this.ratio_*ol.extent.getHeight(a)/2;a[0]=e-g;a[1]=f-h;a[2]=e+g;a[3]=f+h}var i=b/c;var j=Math.ceil(ol.extent.getWidth(a)/i);var k=Math.ceil(ol.extent.getHeight(a)/i);a[0]=e-i*j/2;a[2]=e+i*j/2;a[1]=f-i*k/2;a[3]=f+i*k/2;var l=this.image_;if(!goog.isNull(l)&&this.renderedRevision_==this.getRevision()&&l.getResolution()==b&&l.getPixelRatio()==c&&ol.extent.containsExtent(l.getExtent(),a)){return l}var m={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};goog.object.extend(m,this.params_);this.imageSize_[0]=j;this.imageSize_[1]=k;var n=this.getRequestUrl_(a,this.imageSize_,c,d,m);this.image_=new ol.Image(a,b,c,this.getAttributions(),n,this.crossOrigin_,this.imageLoadFunction_);this.renderedRevision_=this.getRevision();goog.events.listen(this.image_,goog.events.EventType.CHANGE,this.handleImageChange,false,this);return this.image_};ol.source.ImageWMS.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};ol.source.ImageWMS.prototype.getRequestUrl_=function(a,b,c,d,e){goog.asserts.assert(goog.isDef(this.url_),"url is defined");e[this.v13_?"CRS":"SRS"]=d.getCode();if(!("STYLES"in this.params_)){e["STYLES"]=new String("")}if(c!=1){switch(this.serverType_){case ol.source.wms.ServerType.GEOSERVER:var f=90*c+.5|0;if(goog.isDef(e["FORMAT_OPTIONS"])){e["FORMAT_OPTIONS"]+=";dpi:"+f}else{e["FORMAT_OPTIONS"]="dpi:"+f}break;case ol.source.wms.ServerType.MAPSERVER:e["MAP_RESOLUTION"]=90*c;break;case ol.source.wms.ServerType.CARMENTA_SERVER:case ol.source.wms.ServerType.QGIS:e["DPI"]=90*c;break;default:goog.asserts.fail("unknown serverType configured");break}}e["WIDTH"]=b[0];e["HEIGHT"]=b[1];var g=d.getAxisOrientation();var h;if(this.v13_&&g.substr(0,2)=="ne"){h=[a[1],a[0],a[3],a[2]]}else{h=a}e["BBOX"]=h.join(",");return goog.uri.utils.appendParamsFromMap(this.url_,e)};ol.source.ImageWMS.prototype.getUrl=function(){return this.url_};ol.source.ImageWMS.prototype.setImageLoadFunction=function(a){this.image_=null;this.imageLoadFunction_=a;this.changed()};ol.source.ImageWMS.prototype.setUrl=function(a){if(a!=this.url_){this.url_=a;this.image_=null;this.changed()}};ol.source.ImageWMS.prototype.updateParams=function(a){goog.object.extend(this.params_,a);this.updateV13_();this.image_=null;this.changed()};ol.source.ImageWMS.prototype.updateV13_=function(){var a=goog.object.get(this.params_,"VERSION",ol.DEFAULT_WMS_VERSION);this.v13_=goog.string.compareVersions(a,"1.3")>=0};goog.provide("ol.source.XYZ");goog.require("ol.TileUrlFunction");goog.require("ol.source.TileImage");ol.source.XYZ=function(a){var b=goog.isDef(a.projection)?a.projection:"EPSG:3857";var c=goog.isDef(a.tileGrid)?a.tileGrid:ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(b),maxZoom:a.maxZoom,tileSize:a.tileSize});this.urls_=null;goog.base(this,{attributions:a.attributions,crossOrigin:a.crossOrigin,logo:a.logo,projection:b,tileGrid:c,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:ol.TileUrlFunction.nullTileUrlFunction,wrapX:goog.isDef(a.wrapX)?a.wrapX:true});if(goog.isDef(a.tileUrlFunction)){this.setTileUrlFunction(a.tileUrlFunction)}else if(goog.isDef(a.urls)){this.setUrls(a.urls)}else if(goog.isDef(a.url)){this.setUrl(a.url)}};goog.inherits(ol.source.XYZ,ol.source.TileImage);ol.source.XYZ.prototype.getUrls=function(){return this.urls_};ol.source.XYZ.prototype.setUrl=function(a){this.setTileUrlFunction(ol.TileUrlFunction.createFromTemplates(ol.TileUrlFunction.expandUrl(a)));this.urls_=[a]};ol.source.XYZ.prototype.setUrls=function(a){this.setTileUrlFunction(ol.TileUrlFunction.createFromTemplates(a));this.urls_=a};goog.provide("ol.source.OSM");goog.require("ol.Attribution");goog.require("ol.source.XYZ");ol.source.OSM=function(a){var b=goog.isDef(a)?a:{};var c;if(goog.isDef(b.attributions)){c=b.attributions}else{c=[ol.source.OSM.ATTRIBUTION]}var d=goog.isDef(b.crossOrigin)?b.crossOrigin:"anonymous";var e=goog.isDef(b.url)?b.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";goog.base(this,{attributions:c,crossOrigin:d,opaque:true,maxZoom:goog.isDef(b.maxZoom)?b.maxZoom:19,tileLoadFunction:b.tileLoadFunction,url:e,wrapX:b.wrapX})};goog.inherits(ol.source.OSM,ol.source.XYZ);ol.source.OSM.ATTRIBUTION=new ol.Attribution({html:"&copy; "+'<a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> '+"contributors."});goog.provide("ol.source.MapQuest");goog.require("goog.asserts");goog.require("ol.Attribution");goog.require("ol.source.OSM");goog.require("ol.source.XYZ");ol.source.MapQuest=function(a){var b=goog.isDef(a)?a:{};goog.asserts.assert(b.layer in ol.source.MapQuestConfig,"known layer configured");var c=ol.source.MapQuestConfig[b.layer];this.layer_=b.layer;var d=goog.isDef(b.url)?b.url:"https://otile{1-4}-s.mqcdn.com/tiles/1.0.0/"+this.layer_+"/{z}/{x}/{y}.jpg";goog.base(this,{attributions:c.attributions,crossOrigin:"anonymous",logo:"https://developer.mapquest.com/content/osm/mq_logo.png",maxZoom:c.maxZoom,opaque:true,tileLoadFunction:b.tileLoadFunction,url:d})};goog.inherits(ol.source.MapQuest,ol.source.XYZ);ol.source.MapQuest.TILE_ATTRIBUTION=new ol.Attribution({html:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a>'});ol.source.MapQuestConfig={osm:{maxZoom:19,attributions:[ol.source.MapQuest.TILE_ATTRIBUTION,ol.source.OSM.ATTRIBUTION]},sat:{maxZoom:18,attributions:[ol.source.MapQuest.TILE_ATTRIBUTION,new ol.Attribution({html:"Portions Courtesy NASA/JPL-Caltech and "+"U.S. Depart. of Agriculture, Farm Service Agency"})]},hyb:{maxZoom:18,attributions:[ol.source.MapQuest.TILE_ATTRIBUTION,ol.source.OSM.ATTRIBUTION]}};ol.source.MapQuest.prototype.getLayer=function(){return this.layer_};goog.provide("ol.ext.pixelworks");ol.ext.pixelworks;(function(){var a={};var b={exports:a};var c;(function(d){if(typeof a==="object"&&typeof b!=="undefined"){b.exports=d()}else if(typeof c==="function"&&c.amd){c([],d)}else{var e;if(typeof window!=="undefined"){e=window}else if(typeof global!=="undefined"){e=global}else if(typeof self!=="undefined"){e=self}else{e=this}e.pixelworks=d()}})(function(){var a,b,c;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i=typeof require=="function"&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}var f=typeof require=="function"&&require;for(var g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./processor");c.Processor=d},{"./processor":2}],2:[function(a,b,c){function d(a){return function(b){var c=b["buffers"];var d=b["meta"];var e=b["imageOps"];var f=b["width"];var g=b["height"];var h=c.length;var i=c[0].byteLength;var j,k;if(e){var l=new Array(h);for(k=0;k<h;++k){l[k]=new ImageData(new Uint8ClampedArray(c[k]),f,g)}j=a(l,d).data}else{j=new Uint8ClampedArray(i);var m=new Array(h);var n=new Array(h);for(k=0;k<h;++k){m[k]=new Uint8ClampedArray(c[k]);n[k]=[0,0,0,0]}for(var o=0;o<i;o+=4){for(var p=0;p<h;++p){var q=m[p];n[p][0]=q[o];n[p][1]=q[o+1];n[p][2]=q[o+2];n[p][3]=q[o+3]}var r=a(n,d);j[o]=r[0];j[o+1]=r[1];j[o+2]=r[2];j[o+3]=r[3]}}return j.buffer}}function e(a,b){var c=Object.keys(a.lib||{}).map(function(b){return"var "+b+" = "+a.lib[b].toString()+";"});var e=c.concat(["var __minion__ = ("+d.toString()+")(",a.operation.toString(),");",'self.addEventListener("message", function(__event__) {',"var buffer = __minion__(__event__.data);","self.postMessage({buffer: buffer, meta: __event__.data.meta}, [buffer]);","});"]);var f=new Blob(e,{type:"text/javascript"});var g=URL.createObjectURL(f);var h=new Worker(g);h.addEventListener("message",b);return h}function f(a,b){var c=d(a.operation);return{postMessage:function(a){setTimeout(function(){b({data:{buffer:c(a),meta:a.meta}})},0)}}}function g(a){this._imageOps=!!a.imageOps;var b;if(a.threads===0){b=0}else if(this._imageOps){b=1}else{b=a.threads||1}var c=[];if(b){for(var d=0;d<b;++d){c[d]=e(a,this._onWorkerMessage.bind(this,d))}}else{c[0]=f(a,this._onWorkerMessage.bind(this,0))}this._workers=c;this._queue=[];this._maxQueueLength=a.queue||Infinity;this._running=0;this._dataLookup={};this._job=null}g.prototype.process=function(a,b,c){this._enqueue({inputs:a,meta:b,callback:c});this._dispatch()};g.prototype.destroy=function(){for(var a in this){this[a]=null}this._destroyed=true};g.prototype._enqueue=function(a){this._queue.push(a);while(this._queue.length>this._maxQueueLength){this._queue.shift().callback(null,null)}};g.prototype._dispatch=function(){if(this._running===0&&this._queue.length>0){var a=this._job=this._queue.shift();var b=a.inputs[0].width;var c=a.inputs[0].height;var d=a.inputs.map(function(a){return a.data.buffer});var e=this._workers.length;this._running=e;if(e===1){this._workers[0].postMessage({buffers:d,meta:a.meta,imageOps:this._imageOps,width:b,height:c},d)}else{var f=a.inputs[0].data.length;var g=4*Math.ceil(f/4/e);for(var h=0;h<e;++h){var i=h*g;var j=[];for(var k=0,l=d.length;k<l;++k){j.push(d[h].slice(i,i+g))}this._workers[h].postMessage({buffers:j,meta:a.meta,imageOps:this._imageOps,width:b,height:c},j)}}}};g.prototype._onWorkerMessage=function(a,b){if(this._destroyed){return}this._dataLookup[a]=b.data;--this._running;if(this._running===0){this._resolveJob()}};g.prototype._resolveJob=function(){var a=this._job;var b=this._workers.length;var c,d;if(b===1){c=new Uint8ClampedArray(this._dataLookup[0]["buffer"]);d=this._dataLookup[0]["meta"]}else{var e=a.inputs[0].data.length;c=new Uint8ClampedArray(e);d=new Array(e);var f=4*Math.ceil(e/4/b);for(var g=0;g<b;++g){var h=this._dataLookup[g]["buffer"];var i=g*f;c.set(new Uint8ClampedArray(h),i);d[g]=this._dataLookup[g]["meta"]}}this._job=null;this._dataLookup={};a.callback(null,new ImageData(c,a.inputs[0].width,a.inputs[0].height),d);this._dispatch()};b.exports=g},{}]},{},[1])(1)});ol.ext.pixelworks=b.exports})();goog.provide("ol.source.Raster");goog.provide("ol.source.RasterEvent");goog.provide("ol.source.RasterEventType");goog.require("goog.asserts");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.functions");goog.require("goog.object");goog.require("goog.vec.Mat4");goog.require("ol.ImageCanvas");goog.require("ol.TileQueue");goog.require("ol.dom");goog.require("ol.ext.pixelworks");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.layer.Tile");goog.require("ol.raster.OperationType");goog.require("ol.renderer.canvas.ImageLayer");goog.require("ol.renderer.canvas.TileLayer");goog.require("ol.source.Image");goog.require("ol.source.State");goog.require("ol.source.Tile");ol.source.Raster=function(a){this.worker_=null;this.operationType_=goog.isDef(a.operationType)?a.operationType:ol.raster.OperationType.PIXEL;this.threads_=goog.isDef(a.threads)?a.threads:1;this.renderers_=ol.source.Raster.createRenderers_(a.sources);for(var b=0,c=this.renderers_.length;b<c;++b){goog.events.listen(this.renderers_[b],goog.events.EventType.CHANGE,this.changed,false,this)}this.canvasContext_=ol.dom.createCanvasContext2D();this.tileQueue_=new ol.TileQueue(goog.functions.constant(1),goog.bind(this.changed,this));var d=ol.source.Raster.getLayerStatesArray_(this.renderers_);var e={};for(var f=0,g=d.length;f<g;++f){e[goog.getUid(d[f].layer)]=d[f]}this.renderedState_=null;this.renderedImageCanvas_=null;this.frameState_={animate:false,attributions:{},coordinateToPixelMatrix:goog.vec.Mat4.createNumber(),extent:null,focus:null,index:0,layerStates:e,layerStatesArray:d,logos:{},pixelRatio:1,pixelToCoordinateMatrix:goog.vec.Mat4.createNumber(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}};goog.base(this,{});if(goog.isDef(a.operation)){this.setOperation(a.operation,a.lib)}};goog.inherits(ol.source.Raster,ol.source.Image);ol.source.Raster.prototype.setOperation=function(a,b){this.worker_=new ol.ext.pixelworks.Processor({operation:a,imageOps:this.operationType_===ol.raster.OperationType.IMAGE,queue:1,lib:b,threads:this.threads_});this.changed()};ol.source.Raster.prototype.updateFrameState_=function(a,b,c){var d=goog.object.clone(this.frameState_);d.viewState=goog.object.clone(d.viewState);var e=ol.extent.getCenter(a);var f=Math.round(ol.extent.getWidth(a)/b);var g=Math.round(ol.extent.getHeight(a)/b);d.extent=a;d.focus=ol.extent.getCenter(a);d.size[0]=f;d.size[1]=g;var h=d.viewState;h.center=e;h.projection=c;h.resolution=b;return d};ol.source.Raster.prototype.isDirty_=function(a,b){var c=this.renderedState_;return!c||this.getRevision()!==c.revision||b!==c.resolution||!ol.extent.equals(a,c.extent)};ol.source.Raster.prototype.getImage=function(a,b,c,d){if(!this.allSourcesReady_()){return null}if(!this.isDirty_(a,b)){return this.renderedImageCanvas_}var e=this.canvasContext_;var f=e.canvas;var g=Math.round(ol.extent.getWidth(a)/b);var h=Math.round(ol.extent.getHeight(a)/b);if(g!==f.width||h!==f.height){f.width=g;f.height=h}var i=this.updateFrameState_(a,b,d);var j=new ol.ImageCanvas(a,b,1,this.getAttributions(),f,this.composeFrame_.bind(this,i));this.renderedImageCanvas_=j;this.renderedState_={extent:a,resolution:b,revision:this.getRevision()};return j}
;ol.source.Raster.prototype.allSourcesReady_=function(){var a=true;var b;for(var c=0,d=this.renderers_.length;c<d;++c){b=this.renderers_[c].getLayer().getSource();if(b.getState()!==ol.source.State.READY){a=false;break}}return a};ol.source.Raster.prototype.composeFrame_=function(a,b){var c=this.renderers_.length;var d=new Array(c);for(var e=0;e<c;++e){var f=ol.source.Raster.getImageData_(this.renderers_[e],a,a.layerStatesArray[e]);if(f){d[e]=f}else{return}}var g={};this.dispatchEvent(new ol.source.RasterEvent(ol.source.RasterEventType.BEFOREOPERATIONS,a,g));this.worker_.process(d,g,this.onWorkerComplete_.bind(this,a,b));a.tileQueue.loadMoreTiles(16,16)};ol.source.Raster.prototype.onWorkerComplete_=function(a,b,c,d,e){if(c){b(c);return}if(goog.isNull(d)){return}this.dispatchEvent(new ol.source.RasterEvent(ol.source.RasterEventType.AFTEROPERATIONS,a,e));var f=a.viewState.resolution/a.pixelRatio;if(!this.isDirty_(a.extent,f)){this.canvasContext_.putImageData(d,0,0)}b(null)};ol.source.Raster.getImageData_=function(a,b,c){a.prepareFrame(b,c);var d=a.getImage();if(!d){return null}var e=a.getImageTransform();var f=Math.round(goog.vec.Mat4.getElement(e,0,3));var g=Math.round(goog.vec.Mat4.getElement(e,1,3));var h=b.size[0];var i=b.size[1];if(d instanceof Image){if(!ol.source.Raster.context_){ol.source.Raster.context_=ol.dom.createCanvasContext2D(h,i)}else{var j=ol.source.Raster.context_.canvas;if(j.width!==h||j.height!==i){ol.source.Raster.context_=ol.dom.createCanvasContext2D(h,i)}else{ol.source.Raster.context_.clearRect(0,0,h,i)}}var k=Math.round(d.width*goog.vec.Mat4.getElement(e,0,0));var l=Math.round(d.height*goog.vec.Mat4.getElement(e,1,1));ol.source.Raster.context_.drawImage(d,f,g,k,l);return ol.source.Raster.context_.getImageData(0,0,h,i)}else{return d.getContext("2d").getImageData(-f,-g,h,i)}};ol.source.Raster.context_=null;ol.source.Raster.getLayerStatesArray_=function(a){return a.map(function(a){return a.getLayer().getLayerState()})};ol.source.Raster.createRenderers_=function(a){var b=a.length;var c=new Array(b);for(var d=0;d<b;++d){c[d]=ol.source.Raster.createRenderer_(a[d])}return c};ol.source.Raster.createRenderer_=function(a){var b=null;if(a instanceof ol.source.Tile){b=ol.source.Raster.createTileRenderer_(a)}else if(a instanceof ol.source.Image){b=ol.source.Raster.createImageRenderer_(a)}else{goog.asserts.fail("Unsupported source type: "+a)}return b};ol.source.Raster.createImageRenderer_=function(a){var b=new ol.layer.Image({source:a});return new ol.renderer.canvas.ImageLayer(b)};ol.source.Raster.createTileRenderer_=function(a){var b=new ol.layer.Tile({source:a});return new ol.renderer.canvas.TileLayer(b)};ol.source.Raster.RenderedState;ol.source.RasterEvent=function(a,b,c){goog.base(this,a);this.extent=b.extent;this.resolution=b.viewState.resolution/b.pixelRatio;this.data=c};goog.inherits(ol.source.RasterEvent,goog.events.Event);ol.source.RasterEventType={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};goog.provide("ol.source.Stamen");goog.require("goog.asserts");goog.require("ol.Attribution");goog.require("ol.source.OSM");goog.require("ol.source.XYZ");ol.source.StamenLayerConfig={terrain:{extension:"jpg",opaque:true},"terrain-background":{extension:"jpg",opaque:true},"terrain-labels":{extension:"png",opaque:false},"terrain-lines":{extension:"png",opaque:false},"toner-background":{extension:"png",opaque:true},toner:{extension:"png",opaque:true},"toner-hybrid":{extension:"png",opaque:false},"toner-labels":{extension:"png",opaque:false},"toner-lines":{extension:"png",opaque:false},"toner-lite":{extension:"png",opaque:true},watercolor:{extension:"jpg",opaque:true}};ol.source.StamenProviderConfig={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:3,maxZoom:16}};ol.source.Stamen=function(a){var b=a.layer.indexOf("-");var c=b==-1?a.layer:a.layer.slice(0,b);goog.asserts.assert(c in ol.source.StamenProviderConfig,"known provider configured");var d=ol.source.StamenProviderConfig[c];goog.asserts.assert(a.layer in ol.source.StamenLayerConfig,"known layer configured");var e=ol.source.StamenLayerConfig[a.layer];var f=goog.isDef(a.url)?a.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+a.layer+"/{z}/{x}/{y}."+e.extension;goog.base(this,{attributions:ol.source.Stamen.ATTRIBUTIONS,crossOrigin:"anonymous",maxZoom:d.maxZoom,opaque:e.opaque,tileLoadFunction:a.tileLoadFunction,url:f})};goog.inherits(ol.source.Stamen,ol.source.XYZ);ol.source.Stamen.ATTRIBUTIONS=[new ol.Attribution({html:'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, '+'under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY'+" 3.0</a>."}),ol.source.OSM.ATTRIBUTION];goog.provide("ol.source.TileArcGISRest");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");goog.require("goog.object");goog.require("goog.string");goog.require("goog.uri.utils");goog.require("ol");goog.require("ol.TileCoord");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.size");goog.require("ol.source.TileImage");goog.require("ol.tilecoord");ol.source.TileArcGISRest=function(a){var b=goog.isDef(a)?a:{};var c=goog.isDef(b.params)?b.params:{};goog.base(this,{attributions:b.attributions,crossOrigin:b.crossOrigin,logo:b.logo,projection:b.projection,tileGrid:b.tileGrid,tileLoadFunction:b.tileLoadFunction,tileUrlFunction:goog.bind(this.tileUrlFunction_,this),wrapX:goog.isDef(b.wrapX)?b.wrapX:true});var d=b.urls;if(!goog.isDef(d)&&goog.isDef(b.url)){d=ol.TileUrlFunction.expandUrl(b.url)}this.urls_=goog.isDefAndNotNull(d)?d:[];this.params_=c;this.tmpExtent_=ol.extent.createEmpty()};goog.inherits(ol.source.TileArcGISRest,ol.source.TileImage);ol.source.TileArcGISRest.prototype.getParams=function(){return this.params_};ol.source.TileArcGISRest.prototype.getRequestUrl_=function(a,b,c,d,e,f){var g=this.urls_;if(goog.array.isEmpty(g)){return undefined}var h=e.getCode().split(":").pop();f["SIZE"]=b[0]+","+b[1];f["BBOX"]=c.join(",");f["BBOXSR"]=h;f["IMAGESR"]=h;f["DPI"]=Math.round(90*d);var i;if(g.length==1){i=g[0]}else{var j=goog.math.modulo(ol.tilecoord.hash(a),g.length);i=g[j]}if(!goog.string.endsWith(i,"/")){i=i+"/"}if(goog.string.endsWith(i,"MapServer/")){i=i+"export"}else if(goog.string.endsWith(i,"ImageServer/")){i=i+"exportImage"}else{goog.asserts.fail("Unknown Rest Service",i)}return goog.uri.utils.appendParamsFromMap(i,f)};ol.source.TileArcGISRest.prototype.getTilePixelSize=function(a,b,c){var d=goog.base(this,"getTilePixelSize",a,b,c);if(b==1){return d}else{return ol.size.scale(d,b,this.tmpSize)}};ol.source.TileArcGISRest.prototype.getUrls=function(){return this.urls_};ol.source.TileArcGISRest.prototype.setUrl=function(a){var b=goog.isDef(a)?ol.TileUrlFunction.expandUrl(a):null;this.setUrls(b)};ol.source.TileArcGISRest.prototype.setUrls=function(a){this.urls_=goog.isDefAndNotNull(a)?a:[];this.changed()};ol.source.TileArcGISRest.prototype.tileUrlFunction_=function(a,b,c){var d=this.getTileGrid();if(goog.isNull(d)){d=this.getTileGridForProjection(c)}if(d.getResolutions().length<=a[0]){return undefined}var e=d.getTileCoordExtent(a,this.tmpExtent_);var f=ol.size.toSize(d.getTileSize(a[0]),this.tmpSize);if(b!=1){f=ol.size.scale(f,b,this.tmpSize)}var g={F:"image",FORMAT:"PNG32",TRANSPARENT:true};goog.object.extend(g,this.params_);return this.getRequestUrl_(a,f,e,b,c,g)};ol.source.TileArcGISRest.prototype.updateParams=function(a){goog.object.extend(this.params_,a);this.changed()};goog.provide("ol.source.TileDebug");goog.require("ol.Tile");goog.require("ol.TileCoord");goog.require("ol.TileState");goog.require("ol.dom");goog.require("ol.size");goog.require("ol.source.Tile");goog.require("ol.tilecoord");ol.DebugTile_=function(a,b,c){goog.base(this,a,ol.TileState.LOADED);this.tileSize_=b;this.text_=c;this.canvasByContext_={}};goog.inherits(ol.DebugTile_,ol.Tile);ol.DebugTile_.prototype.getImage=function(a){var b=goog.isDef(a)?goog.getUid(a):-1;if(b in this.canvasByContext_){return this.canvasByContext_[b]}else{var c=this.tileSize_;var d=ol.dom.createCanvasContext2D(c[0],c[1]);d.strokeStyle="black";d.strokeRect(.5,.5,c[0]+.5,c[1]+.5);d.fillStyle="black";d.textAlign="center";d.textBaseline="middle";d.font="24px sans-serif";d.fillText(this.text_,c[0]/2,c[1]/2);this.canvasByContext_[b]=d.canvas;return d.canvas}};ol.source.TileDebug=function(a){goog.base(this,{opaque:false,projection:a.projection,tileGrid:a.tileGrid,wrapX:goog.isDef(a.wrapX)?a.wrapX:true})};goog.inherits(ol.source.TileDebug,ol.source.Tile);ol.source.TileDebug.prototype.getTile=function(a,b,c){var d=this.getKeyZXY(a,b,c);if(this.tileCache.containsKey(d)){return this.tileCache.get(d)}else{var e=ol.size.toSize(this.tileGrid.getTileSize(a));var f=[a,b,c];var g=this.getTileCoordForTileUrlFunction(f);var h=goog.isNull(g)?"":ol.tilecoord.toString(this.getTileCoordForTileUrlFunction(g));var i=new ol.DebugTile_(f,e,h);this.tileCache.set(d,i);return i}};goog.provide("ol.source.TileJSON");goog.provide("ol.tilejson");goog.require("goog.asserts");goog.require("goog.net.Jsonp");goog.require("ol.Attribution");goog.require("ol.TileRange");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.State");goog.require("ol.source.TileImage");ol.source.TileJSON=function(a){goog.base(this,{attributions:a.attributions,crossOrigin:a.crossOrigin,projection:ol.proj.get("EPSG:3857"),state:ol.source.State.LOADING,tileLoadFunction:a.tileLoadFunction,wrapX:goog.isDef(a.wrapX)?a.wrapX:true});var b=new goog.net.Jsonp(a.url);b.send(undefined,goog.bind(this.handleTileJSONResponse,this),goog.bind(this.handleTileJSONError,this))};goog.inherits(ol.source.TileJSON,ol.source.TileImage);ol.source.TileJSON.prototype.handleTileJSONResponse=function(a){var b=ol.proj.get("EPSG:4326");var c=this.getProjection();var d;if(goog.isDef(a.bounds)){var e=ol.proj.getTransformFromProjections(b,c);d=ol.extent.applyTransform(a.bounds,e)}if(goog.isDef(a.scheme)){goog.asserts.assert(a.scheme=="xyz",'tileJSON-scheme is "xyz"')}var f=a.minzoom||0;var g=a.maxzoom||22;var h=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(c),maxZoom:g,minZoom:f});this.tileGrid=h;this.tileUrlFunction=ol.TileUrlFunction.createFromTemplates(a.tiles);if(goog.isDef(a.attribution)&&goog.isNull(this.getAttributions())){var i=goog.isDef(d)?d:b.getExtent();var j={};var k,l;for(k=f;k<=g;++k){l=k.toString();j[l]=[h.getTileRangeForExtentAndZ(i,k)]}this.setAttributions([new ol.Attribution({html:a.attribution,tileRanges:j})])}this.setState(ol.source.State.READY)};ol.source.TileJSON.prototype.handleTileJSONError=function(){this.setState(ol.source.State.ERROR)};goog.provide("ol.source.TileUTFGrid");goog.require("goog.asserts");goog.require("goog.async.nextTick");goog.require("goog.events");goog.require("goog.events.EventType");goog.require("goog.net.Jsonp");goog.require("ol.Attribution");goog.require("ol.Tile");goog.require("ol.TileState");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.State");goog.require("ol.source.Tile");ol.source.TileUTFGrid=function(a){goog.base(this,{projection:ol.proj.get("EPSG:3857"),state:ol.source.State.LOADING});this.preemptive_=goog.isDef(a.preemptive)?a.preemptive:true;this.tileUrlFunction_=ol.TileUrlFunction.nullTileUrlFunction;this.template_=undefined;var b=new goog.net.Jsonp(a.url);b.send(undefined,goog.bind(this.handleTileJSONResponse,this))};goog.inherits(ol.source.TileUTFGrid,ol.source.Tile);ol.source.TileUTFGrid.prototype.getTemplate=function(){return this.template_};ol.source.TileUTFGrid.prototype.forDataAtCoordinateAndResolution=function(a,b,c,d,e){if(!goog.isNull(this.tileGrid)){var f=this.tileGrid.getTileCoordForCoordAndResolution(a,b);var g=this.getTile(f[0],f[1],f[2],1,this.getProjection());g.forDataAtCoordinate(a,c,d,e)}else{if(e===true){goog.async.nextTick(function(){c.call(d,null)})}else{c.call(d,null)}}};ol.source.TileUTFGrid.prototype.handleTileJSONResponse=function(a){var b=ol.proj.get("EPSG:4326");var c=this.getProjection();var d;if(goog.isDef(a.bounds)){var e=ol.proj.getTransformFromProjections(b,c);d=ol.extent.applyTransform(a.bounds,e)}if(goog.isDef(a.scheme)){goog.asserts.assert(a.scheme=="xyz",'tileJSON-scheme is "xyz"')}var f=a.minzoom||0;var g=a.maxzoom||22;var h=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(c),maxZoom:g,minZoom:f});this.tileGrid=h;this.template_=a.template;var i=a.grids;if(!goog.isDefAndNotNull(i)){this.setState(ol.source.State.ERROR);return}this.tileUrlFunction_=ol.TileUrlFunction.createFromTemplates(i);if(goog.isDef(a.attribution)){var j=goog.isDef(d)?d:b.getExtent();var k={};var l,m;for(l=f;l<=g;++l){m=l.toString();k[m]=[h.getTileRangeForExtentAndZ(j,l)]}this.setAttributions([new ol.Attribution({html:a.attribution,tileRanges:k})])}this.setState(ol.source.State.READY)};ol.source.TileUTFGrid.prototype.getTile=function(a,b,c,d,e){var f=this.getKeyZXY(a,b,c);if(this.tileCache.containsKey(f)){return this.tileCache.get(f)}else{goog.asserts.assert(e,"argument projection is truthy");var g=[a,b,c];var h=this.getTileCoordForTileUrlFunction(g,e);var i=this.tileUrlFunction_(h,d,e);var j=new ol.source.TileUTFGridTile_(g,goog.isDef(i)?ol.TileState.IDLE:ol.TileState.EMPTY,goog.isDef(i)?i:"",this.tileGrid.getTileCoordExtent(g),this.preemptive_);this.tileCache.set(f,j);return j}};ol.source.TileUTFGrid.prototype.useTile=function(a,b,c){var d=this.getKeyZXY(a,b,c);if(this.tileCache.containsKey(d)){this.tileCache.get(d)}};ol.source.TileUTFGridTile_=function(a,b,c,d,e){goog.base(this,a,b);this.src_=c;this.extent_=d;this.preemptive_=e;this.grid_=null;this.keys_=null;this.data_=null};goog.inherits(ol.source.TileUTFGridTile_,ol.Tile);ol.source.TileUTFGridTile_.prototype.getImage=function(a){return null};ol.source.TileUTFGridTile_.prototype.getData=function(a){if(goog.isNull(this.grid_)||goog.isNull(this.keys_)||!goog.isDefAndNotNull(this.data_)){return null}var b=(a[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]);var c=(a[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]);var d=this.grid_[Math.floor((1-c)*this.grid_.length)];if(!goog.isString(d)){return null}var e=d.charCodeAt(Math.floor(b*d.length));if(e>=93){e--}if(e>=35){e--}e-=32;var f=this.keys_[e];return goog.isDefAndNotNull(f)?this.data_[f]:null};ol.source.TileUTFGridTile_.prototype.forDataAtCoordinate=function(a,b,c,d){if(this.state==ol.TileState.IDLE&&d===true){goog.events.listenOnce(this,goog.events.EventType.CHANGE,function(d){b.call(c,this.getData(a))},false,this);this.loadInternal_()}else{if(d===true){goog.async.nextTick(function(){b.call(c,this.getData(a))},this)}else{b.call(c,this.getData(a))}}};ol.source.TileUTFGridTile_.prototype.getKey=function(){return this.src_};ol.source.TileUTFGridTile_.prototype.handleError_=function(){this.state=ol.TileState.ERROR;this.changed()};ol.source.TileUTFGridTile_.prototype.handleLoad_=function(a){this.grid_=a.grid;this.keys_=a.keys;this.data_=a.data;this.state=ol.TileState.EMPTY;this.changed()};ol.source.TileUTFGridTile_.prototype.loadInternal_=function(){if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING;var a=new goog.net.Jsonp(this.src_);a.send(undefined,goog.bind(this.handleLoad_,this),goog.bind(this.handleError_,this))}};ol.source.TileUTFGridTile_.prototype.load=function(){if(this.preemptive_){this.loadInternal_()}};goog.provide("ol.source.TileVector");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("ol.TileUrlFunction");goog.require("ol.featureloader");goog.require("ol.source.State");goog.require("ol.source.Vector");goog.require("ol.tilecoord");goog.require("ol.tilegrid.TileGrid");ol.source.TileVector=function(a){goog.base(this,{attributions:a.attributions,logo:a.logo,projection:undefined,state:ol.source.State.READY,wrapX:a.wrapX});this.format_=goog.isDef(a.format)?a.format:null;this.tileGrid_=a.tileGrid;this.tileUrlFunction_=ol.TileUrlFunction.nullTileUrlFunction;this.tileLoadFunction_=goog.isDef(a.tileLoadFunction)?a.tileLoadFunction:null;goog.asserts.assert(!goog.isNull(this.format_)||!goog.isNull(this.tileLoadFunction_),"Either format or tileLoadFunction are required");this.tiles_={};if(goog.isDef(a.tileUrlFunction)){this.setTileUrlFunction(a.tileUrlFunction)}else if(goog.isDef(a.urls)){this.setUrls(a.urls)}else if(goog.isDef(a.url)){this.setUrl(a.url)}};goog.inherits(ol.source.TileVector,ol.source.Vector);ol.source.TileVector.prototype.addFeature=goog.abstractMethod;ol.source.TileVector.prototype.addFeatures=goog.abstractMethod;ol.source.TileVector.prototype.clear=function(){goog.object.clear(this.tiles_)};ol.source.TileVector.prototype.forEachFeature=goog.abstractMethod;ol.source.TileVector.prototype.forEachFeatureAtCoordinateAndResolution=function(a,b,c,d){var e=this.tileGrid_;var f=this.tiles_;var g=e.getTileCoordForCoordAndResolution(a,b);var h=this.getTileKeyZXY_(g[0],g[1],g[2]);var i=f[h];if(goog.isDef(i)){var j,k;for(j=0,k=i.length;j<k;++j){var l=i[j];var m=l.getGeometry();goog.asserts.assert(goog.isDefAndNotNull(m),"feature geometry is defined and not null");if(m.containsCoordinate(a)){var n=c.call(d,l);if(n){return n}}}}return undefined};ol.source.TileVector.prototype.forEachFeatureInExtent=goog.abstractMethod;ol.source.TileVector.prototype.forEachFeatureInExtentAtResolution=function(a,b,c,d){var e=this.tileGrid_;var f=this.tiles_;var g=e.getZForResolution(b);var h=e.getTileRangeForExtentAndZ(a,g);var i,j;for(i=h.minX;i<=h.maxX;++i){for(j=h.minY;j<=h.maxY;++j){var k=this.getTileKeyZXY_(g,i,j);var l=f[k];if(goog.isDef(l)){var m,n;for(m=0,n=l.length;m<n;++m){var o=c.call(d,l[m]);if(o){return o}}}}}return undefined};ol.source.TileVector.prototype.getClosestFeatureToCoordinate=goog.abstractMethod;ol.source.TileVector.prototype.getExtent=goog.abstractMethod;ol.source.TileVector.prototype.getFeatures=function(){var a=this.tiles_;var b=[];var c;for(c in a){goog.array.extend(b,a[c])}return b};ol.source.TileVector.prototype.getFeaturesAtCoordinateAndResolution=function(a,b){var c=[];this.forEachFeatureAtCoordinateAndResolution(a,b,function(a){c.push(a)});return c};ol.source.TileVector.prototype.getFeaturesInExtent=goog.abstractMethod;ol.source.TileVector.prototype.getTileCoordForTileUrlFunction=function(a,b){var c=this.tileGrid_;goog.asserts.assert(!goog.isNull(c),"tile grid needed");if(this.getWrapX()&&b.isGlobal()){a=ol.tilecoord.wrapX(a,c,b)}return ol.tilecoord.withinExtentAndZ(a,c)?a:null};ol.source.TileVector.prototype.getTileKeyZXY_=function(a,b,c){return a+"/"+b+"/"+c};ol.source.TileVector.prototype.loadFeatures=function(a,b,c){var d=this.tileGrid_;var e=this.tileUrlFunction_;var f=this.tiles_;var g=d.getZForResolution(b);var h=d.getTileRangeForExtentAndZ(a,g);var i=[g,0,0];var j,k;function l(a,b){f[a]=b;this.changed()}for(j=h.minX;j<=h.maxX;++j){for(k=h.minY;k<=h.maxY;++k){var m=this.getTileKeyZXY_(g,j,k);if(!(m in f)){i[1]=j;i[2]=k;var n=this.getTileCoordForTileUrlFunction(i,c);var o=goog.isNull(n)?undefined:e(n,1,c);if(goog.isDef(o)){f[m]=[];var p=goog.partial(l,m);if(!goog.isNull(this.tileLoadFunction_)){this.tileLoadFunction_(o,goog.bind(p,this))}else{var q=ol.featureloader.loadFeaturesXhr(o,this.format_,p);q.call(this,a,b,c)}}}}}};ol.source.TileVector.prototype.removeFeature=goog.abstractMethod;ol.source.TileVector.prototype.setTileUrlFunction=function(a){this.tileUrlFunction_=a;this.changed()};ol.source.TileVector.prototype.setUrl=function(a){this.setTileUrlFunction(ol.TileUrlFunction.createFromTemplates(ol.TileUrlFunction.expandUrl(a)))};ol.source.TileVector.prototype.setUrls=function(a){this.setTileUrlFunction(ol.TileUrlFunction.createFromTemplates(a))};goog.provide("ol.source.TileWMS");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.math");goog.require("goog.object");goog.require("goog.string");goog.require("goog.uri.utils");goog.require("ol");goog.require("ol.TileCoord");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.size");goog.require("ol.source.TileImage");goog.require("ol.source.wms");goog.require("ol.source.wms.ServerType");goog.require("ol.tilecoord");ol.source.TileWMS=function(a){var b=goog.isDef(a)?a:{};var c=goog.isDef(b.params)?b.params:{};var d=goog.object.get(c,"TRANSPARENT",true);goog.base(this,{attributions:b.attributions,crossOrigin:b.crossOrigin,logo:b.logo,opaque:!d,projection:b.projection,tileGrid:b.tileGrid,tileLoadFunction:b.tileLoadFunction,tileUrlFunction:goog.bind(this.tileUrlFunction_,this),wrapX:goog.isDef(b.wrapX)?b.wrapX:true});var e=b.urls;if(!goog.isDef(e)&&goog.isDef(b.url)){e=ol.TileUrlFunction.expandUrl(b.url)}this.urls_=goog.isDefAndNotNull(e)?e:[];this.gutter_=goog.isDef(b.gutter)?b.gutter:0;this.params_=c;this.v13_=true;this.serverType_=b.serverType;this.hidpi_=goog.isDef(b.hidpi)?b.hidpi:true;this.coordKeyPrefix_="";this.resetCoordKeyPrefix_();this.tmpExtent_=ol.extent.createEmpty();this.updateV13_()};goog.inherits(ol.source.TileWMS,ol.source.TileImage);ol.source.TileWMS.prototype.getGetFeatureInfoUrl=function(a,b,c,d){goog.asserts.assert(!("VERSION"in d),"key VERSION is not allowed in params");var e=ol.proj.get(c);var f=this.getTileGrid();if(goog.isNull(f)){f=this.getTileGridForProjection(e)}var g=f.getTileCoordForCoordAndResolution(a,b);if(f.getResolutions().length<=g[0]){return undefined}var h=f.getResolution(g[0]);var i=f.getTileCoordExtent(g,this.tmpExtent_);var j=ol.size.toSize(f.getTileSize(g[0]),this.tmpSize);var k=this.gutter_;if(k!==0){j=ol.size.buffer(j,k,this.tmpSize);i=ol.extent.buffer(i,h*k,i)}var l={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_["LAYERS"]};goog.object.extend(l,this.params_,d);var m=Math.floor((a[0]-i[0])/h);var n=Math.floor((i[3]-a[1])/h);l[this.v13_?"I":"X"]=m;l[this.v13_?"J":"Y"]=n;return this.getRequestUrl_(g,j,i,1,e,l)};ol.source.TileWMS.prototype.getGutter=function(){return this.gutter_};ol.source.TileWMS.prototype.getKeyZXY=function(a,b,c){return this.coordKeyPrefix_+goog.base(this,"getKeyZXY",a,b,c)};ol.source.TileWMS.prototype.getParams=function(){return this.params_};ol.source.TileWMS.prototype.getRequestUrl_=function(a,b,c,d,e,f){var g=this.urls_;if(goog.array.isEmpty(g)){return undefined}f["WIDTH"]=b[0];f["HEIGHT"]=b[1];f[this.v13_?"CRS":"SRS"]=e.getCode();if(!("STYLES"in this.params_)){f["STYLES"]=new String("")}if(d!=1){switch(this.serverType_){case ol.source.wms.ServerType.GEOSERVER:var h=90*d+.5|0;if(goog.isDef(f["FORMAT_OPTIONS"])){f["FORMAT_OPTIONS"]+=";dpi:"+h}else{f["FORMAT_OPTIONS"]="dpi:"+h}break;case ol.source.wms.ServerType.MAPSERVER:f["MAP_RESOLUTION"]=90*d;break;case ol.source.wms.ServerType.CARMENTA_SERVER:case ol.source.wms.ServerType.QGIS:f["DPI"]=90*d;break;default:goog.asserts.fail("unknown serverType configured");break}}var i=e.getAxisOrientation();var j=c;if(this.v13_&&i.substr(0,2)=="ne"){var k;k=c[0];j[0]=c[1];j[1]=k;k=c[2];j[2]=c[3];j[3]=k}f["BBOX"]=j.join(",");var l;if(g.length==1){l=g[0]}else{var m=goog.math.modulo(ol.tilecoord.hash(a),g.length);l=g[m]}return goog.uri.utils.appendParamsFromMap(l,f)};ol.source.TileWMS.prototype.getTilePixelSize=function(a,b,c){var d=goog.base(this,"getTilePixelSize",a,b,c);if(b==1||!this.hidpi_||!goog.isDef(this.serverType_)){return d}else{return ol.size.scale(d,b,this.tmpSize)}};ol.source.TileWMS.prototype.getUrls=function(){return this.urls_};ol.source.TileWMS.prototype.resetCoordKeyPrefix_=function(){var a=0;var b=[];var c,d;for(c=0,d=this.urls_.length;c<d;++c){b[a++]=this.urls_[c]}var e;for(e in this.params_){b[a++]=e+"-"+this.params_[e]}this.coordKeyPrefix_=b.join("#")};ol.source.TileWMS.prototype.setUrl=function(a){var b=goog.isDef(a)?ol.TileUrlFunction.expandUrl(a):null;this.setUrls(b)};ol.source.TileWMS.prototype.setUrls=function(a){this.urls_=goog.isDefAndNotNull(a)?a:[];this.resetCoordKeyPrefix_();this.changed()};ol.source.TileWMS.prototype.tileUrlFunction_=function(a,b,c){var d=this.getTileGrid();if(goog.isNull(d)){d=this.getTileGridForProjection(c)}if(d.getResolutions().length<=a[0]){return undefined}if(b!=1&&(!this.hidpi_||!goog.isDef(this.serverType_))){b=1}var e=d.getResolution(a[0]);var f=d.getTileCoordExtent(a,this.tmpExtent_);var g=ol.size.toSize(d.getTileSize(a[0]),this.tmpSize);var h=this.gutter_;if(h!==0){g=ol.size.buffer(g,h,this.tmpSize);f=ol.extent.buffer(f,e*h,f)}if(b!=1){g=ol.size.scale(g,b,this.tmpSize)}var i={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};goog.object.extend(i,this.params_);return this.getRequestUrl_(a,g,f,b,c,i)};ol.source.TileWMS.prototype.updateParams=function(a){goog.object.extend(this.params_,a);this.resetCoordKeyPrefix_();this.updateV13_();this.changed()};ol.source.TileWMS.prototype.updateV13_=function(){var a=goog.object.get(this.params_,"VERSION",ol.DEFAULT_WMS_VERSION);this.v13_=goog.string.compareVersions(a,"1.3")>=0};goog.provide("ol.tilegrid.WMTS");goog.require("goog.array");goog.require("goog.asserts");goog.require("ol.proj");goog.require("ol.tilegrid.TileGrid");ol.tilegrid.WMTS=function(a){goog.asserts.assert(a.resolutions.length==a.matrixIds.length,"options resolutions and matrixIds must have equal length (%s == %s)",a.resolutions.length,a.matrixIds.length);this.matrixIds_=a.matrixIds;goog.base(this,{extent:a.extent,origin:a.origin,origins:a.origins,resolutions:a.resolutions,tileSize:a.tileSize,tileSizes:a.tileSizes,sizes:a.sizes})};goog.inherits(ol.tilegrid.WMTS,ol.tilegrid.TileGrid);ol.tilegrid.WMTS.prototype.getMatrixId=function(a){goog.asserts.assert(0<=a&&a<this.matrixIds_.length,"attempted to retrive matrixId for illegal z (%s)",a);return this.matrixIds_[a]};ol.tilegrid.WMTS.prototype.getMatrixIds=function(){return this.matrixIds_};ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet=function(a,b){var c=[];var d=[];var e=[];var f=[];var g=[];var h="SupportedCRS";var i="TileMatrix";var j="Identifier";var k="ScaleDenominator";var l="TopLeftCorner";var m="TileWidth";var n="TileHeight";var o;o=ol.proj.get(a[h].replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var p=o.getMetersPerUnit();var q=o.getAxisOrientation().substr(0,2)=="ne";goog.array.sort(a[i],function(a,b){return b[k]-a[k]});goog.array.forEach(a[i],function(a,b,h){d.push(a[j]);var i=a[k]*28e-5/p;var o=a[m];var r=a[n];if(q){e.push([a[l][1],a[l][0]])}else{e.push(a[l])}c.push(i);f.push(o==r?o:[o,r]);g.push([a["MatrixWidth"],-a["MatrixHeight"]])});return new ol.tilegrid.WMTS({extent:b,origins:e,resolutions:c,matrixIds:d,tileSizes:f,sizes:g})};goog.provide("ol.source.WMTS");goog.provide("ol.source.WMTSRequestEncoding");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.object");goog.require("goog.string");goog.require("goog.uri.utils");goog.require("ol.TileUrlFunction");goog.require("ol.TileUrlFunctionType");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.TileImage");goog.require("ol.tilegrid.WMTS");ol.source.WMTSRequestEncoding={KVP:"KVP",REST:"REST"};ol.source.WMTS=function(a){this.version_=goog.isDef(a.version)?a.version:"1.0.0";this.format_=goog.isDef(a.format)?a.format:"image/jpeg";this.dimensions_=goog.isDef(a.dimensions)?a.dimensions:{};this.coordKeyPrefix_="";this.resetCoordKeyPrefix_();this.layer_=a.layer;this.matrixSet_=a.matrixSet;this.style_=a.style;var b=a.urls;if(!goog.isDef(b)&&goog.isDef(a.url)){b=ol.TileUrlFunction.expandUrl(a.url)}this.urls_=goog.isDefAndNotNull(b)?b:[];this.requestEncoding_=goog.isDef(a.requestEncoding)?a.requestEncoding:ol.source.WMTSRequestEncoding.KVP;var c=this.requestEncoding_;var d=a.tileGrid;var e={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};if(c==ol.source.WMTSRequestEncoding.KVP){goog.object.extend(e,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_})}var f=this.dimensions_;function g(a){a=c==ol.source.WMTSRequestEncoding.KVP?goog.uri.utils.appendParamsFromMap(a,e):a.replace(/\{(\w+?)\}/g,function(a,b){return b.toLowerCase()in e?e[b.toLowerCase()]:a});return function(b,e,g){if(goog.isNull(b)){return undefined}else{var h={TileMatrix:d.getMatrixId(b[0]),TileCol:b[1],TileRow:-b[2]-1};goog.object.extend(h,f);var i=a;if(c==ol.source.WMTSRequestEncoding.KVP){i=goog.uri.utils.appendParamsFromMap(i,h)}else{i=i.replace(/\{(\w+?)\}/g,function(a,b){return h[b]})}return i}}}var h=this.urls_.length>0?ol.TileUrlFunction.createFromTileUrlFunctions(goog.array.map(this.urls_,g)):ol.TileUrlFunction.nullTileUrlFunction;goog.base(this,{attributions:a.attributions,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,tileClass:a.tileClass,tileGrid:d,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:h,wrapX:goog.isDef(a.wrapX)?a.wrapX:false})};goog.inherits(ol.source.WMTS,ol.source.TileImage);ol.source.WMTS.prototype.getDimensions=function(){return this.dimensions_};ol.source.WMTS.prototype.getFormat=function(){return this.format_};ol.source.WMTS.prototype.getKeyZXY=function(a,b,c){return this.coordKeyPrefix_+goog.base(this,"getKeyZXY",a,b,c)};ol.source.WMTS.prototype.getLayer=function(){return this.layer_};ol.source.WMTS.prototype.getMatrixSet=function(){return this.matrixSet_};ol.source.WMTS.prototype.getRequestEncoding=function(){return this.requestEncoding_};ol.source.WMTS.prototype.getStyle=function(){return this.style_};ol.source.WMTS.prototype.getUrls=function(){return this.urls_};ol.source.WMTS.prototype.getVersion=function(){return this.version_};ol.source.WMTS.prototype.resetCoordKeyPrefix_=function(){var a=0;var b=[];for(var c in this.dimensions_){b[a++]=c+"-"+this.dimensions_[c]}this.coordKeyPrefix_=b.join("/")};ol.source.WMTS.prototype.updateDimensions=function(a){goog.object.extend(this.dimensions_,a);this.resetCoordKeyPrefix_();this.changed()};ol.source.WMTS.optionsFromCapabilities=function(a,b){goog.asserts.assert(!goog.isNull(b["layer"]),'config "layer" must not be null');var c=a["Contents"]["Layer"];var d=goog.array.find(c,function(a,c,d){return a["Identifier"]==b["layer"]});goog.asserts.assert(!goog.isNull(d),"found a matching layer in Contents/Layer");goog.asserts.assert(d["TileMatrixSetLink"].length>0,"layer has TileMatrixSetLink");var e=a["Contents"]["TileMatrixSet"];var f,g;if(d["TileMatrixSetLink"].length>1){if(goog.isDef(b["projection"])){f=goog.array.findIndex(d["TileMatrixSetLink"],function(a,c,d){var f=goog.array.find(e,function(b){return b["Identifier"]==a["TileMatrixSet"]});return f["SupportedCRS"].replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")==b["projection"]})}else{f=goog.array.findIndex(d["TileMatrixSetLink"],function(a,c,d){return a["TileMatrixSet"]==b["matrixSet"]})}}else{f=0}if(f<0){f=0}g=d["TileMatrixSetLink"][f]["TileMatrixSet"];goog.asserts.assert(!goog.isNull(g),"TileMatrixSet must not be null");var h=d["Format"][0];if(goog.isDef(b["format"])){h=b["format"]}f=goog.array.findIndex(d["Style"],function(a,c,d){if(goog.isDef(b["style"])){return a["Title"]==b["style"]}else{return a["isDefault"]}});if(f<0){f=0}var i=d["Style"][f]["Identifier"];var j={};if(goog.isDef(d["Dimension"])){goog.array.forEach(d["Dimension"],function(a,b,c){var d=a["Identifier"];var e=a["default"];if(goog.isDef(e)){goog.asserts.assert(goog.array.contains(a["values"],e),"default value contained in values")}else{e=a["values"][0]}goog.asserts.assert(goog.isDef(e),"value could be found");j[d]=e})}var k=a["Contents"]["TileMatrixSet"];var l=goog.array.find(k,function(a,b,c){return a["Identifier"]==g});goog.asserts.assert(!goog.isNull(l),"found matrixSet in Contents/TileMatrixSet");var m;if(goog.isDef(b["projection"])){m=ol.proj.get(b["projection"])}else{m=ol.proj.get(l["SupportedCRS"].replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))}var n=d["WGS84BoundingBox"];var o,p;if(goog.isDef(n)){var q=ol.proj.get("EPSG:4326").getExtent();p=n[0]==q[0]&&n[2]==q[2];o=ol.proj.transformExtent(n,"EPSG:4326",m);var r=m.getExtent();if(!goog.isNull(r)){if(!ol.extent.containsExtent(r,o)){o=undefined}}}
var s=ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet(l,o);var t=[];var u=b["requestEncoding"];u=goog.isDef(u)?u:"";goog.asserts.assert(goog.array.contains(["REST","RESTful","KVP",""],u),'requestEncoding (%s) is one of "REST", "RESTful", "KVP" or ""',u);if(!a.hasOwnProperty("OperationsMetadata")||!a["OperationsMetadata"].hasOwnProperty("GetTile")||goog.string.startsWith(u,"REST")){u=ol.source.WMTSRequestEncoding.REST;goog.array.forEach(d["ResourceURL"],function(a,b,c){if(a["resourceType"]=="tile"){h=a["format"];t.push(a["template"])}})}else{var v=a["OperationsMetadata"]["GetTile"]["DCP"]["HTTP"]["Get"];for(var w=0,x=v.length;w<x;++w){var y=goog.array.find(v[w]["Constraint"],function(a,b,c){return a["name"]=="GetEncoding"});var z=y["AllowedValues"]["Value"];if(z.length>0&&goog.array.contains(z,"KVP")){u=ol.source.WMTSRequestEncoding.KVP;t.push(v[w]["href"])}}}goog.asserts.assert(t.length>0,"At least one URL found");return{urls:t,layer:b["layer"],matrixSet:g,format:h,projection:m,requestEncoding:u,tileGrid:s,style:i,dimensions:j,wrapX:p}};goog.provide("ol.source.Zoomify");goog.require("goog.asserts");goog.require("ol");goog.require("ol.ImageTile");goog.require("ol.TileCoord");goog.require("ol.TileState");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.TileImage");goog.require("ol.tilegrid.TileGrid");ol.source.ZoomifyTierSizeCalculation={DEFAULT:"default",TRUNCATED:"truncated"};ol.source.Zoomify=function(a){var b=goog.isDef(a)?a:{};var c=b.size;var d=goog.isDef(b.tierSizeCalculation)?b.tierSizeCalculation:ol.source.ZoomifyTierSizeCalculation.DEFAULT;var e=c[0];var f=c[1];var g=[];var h=ol.DEFAULT_TILE_SIZE;switch(d){case ol.source.ZoomifyTierSizeCalculation.DEFAULT:while(e>h||f>h){g.push([Math.ceil(e/h),Math.ceil(f/h)]);h+=h}break;case ol.source.ZoomifyTierSizeCalculation.TRUNCATED:var i=e;var j=f;while(i>h||j>h){g.push([Math.ceil(i/h),Math.ceil(j/h)]);i>>=1;j>>=1}break;default:goog.asserts.fail();break}g.push([1,1]);g.reverse();var k=[1];var l=[0];var m,n;for(m=1,n=g.length;m<n;m++){k.push(1<<m);l.push(g[m-1][0]*g[m-1][1]+l[m-1])}k.reverse();var o=[0,-c[1],c[0],0];var p=new ol.tilegrid.TileGrid({extent:o,origin:ol.extent.getTopLeft(o),resolutions:k});var q=b.url;function r(a,b,c){if(goog.isNull(a)){return undefined}else{var d=a[0];var e=a[1];var f=-a[2]-1;var h=e+f*g[d][0]+l[d];var i=h/ol.DEFAULT_TILE_SIZE|0;return q+"TileGroup"+i+"/"+d+"-"+e+"-"+f+".jpg"}}goog.base(this,{attributions:b.attributions,crossOrigin:b.crossOrigin,logo:b.logo,tileClass:ol.source.ZoomifyTile_,tileGrid:p,tileUrlFunction:r})};goog.inherits(ol.source.Zoomify,ol.source.TileImage);ol.source.ZoomifyTile_=function(a,b,c,d,e){goog.base(this,a,b,c,d,e);this.zoomifyImageByContext_={}};goog.inherits(ol.source.ZoomifyTile_,ol.ImageTile);ol.source.ZoomifyTile_.prototype.getImage=function(a){var b=ol.DEFAULT_TILE_SIZE;var c=goog.isDef(a)?goog.getUid(a).toString():"";if(c in this.zoomifyImageByContext_){return this.zoomifyImageByContext_[c]}else{var d=goog.base(this,"getImage",a);if(this.state==ol.TileState.LOADED){if(d.width==b&&d.height==b){this.zoomifyImageByContext_[c]=d;return d}else{var e=ol.dom.createCanvasContext2D(b,b);e.drawImage(d,0,0);this.zoomifyImageByContext_[c]=e.canvas;return e.canvas}}else{return d}}};goog.provide("ol.style.Atlas");goog.provide("ol.style.AtlasManager");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.functions");goog.require("goog.object");goog.require("ol");ol.style.AtlasManagerInfo;ol.style.AtlasManager=function(a){var b=goog.isDef(a)?a:{};this.currentSize_=goog.isDef(b.initialSize)?b.initialSize:ol.INITIAL_ATLAS_SIZE;this.maxSize_=goog.isDef(b.maxSize)?b.maxSize:ol.MAX_ATLAS_SIZE!=-1?ol.MAX_ATLAS_SIZE:goog.isDef(ol.WEBGL_MAX_TEXTURE_SIZE)?ol.WEBGL_MAX_TEXTURE_SIZE:2048;this.space_=goog.isDef(b.space)?b.space:1;this.atlases_=[new ol.style.Atlas(this.currentSize_,this.space_)];this.currentHitSize_=this.currentSize_;this.hitAtlases_=[new ol.style.Atlas(this.currentHitSize_,this.space_)]};ol.style.AtlasManager.prototype.getInfo=function(a){var b=this.getInfo_(this.atlases_,a);if(goog.isNull(b)){return null}var c=this.getInfo_(this.hitAtlases_,a);goog.asserts.assert(!goog.isNull(c),"hitInfo must not be null");return this.mergeInfos_(b,c)};ol.style.AtlasManager.prototype.getInfo_=function(a,b){var c,d,e,f;for(e=0,f=a.length;e<f;++e){c=a[e];d=c.get(b);if(!goog.isNull(d)){return d}}return null};ol.style.AtlasManager.prototype.mergeInfos_=function(a,b){goog.asserts.assert(a.offsetX===b.offsetX,"in order to merge, offsetX of info and hitInfo must be equal");goog.asserts.assert(a.offsetY===b.offsetY,"in order to merge, offsetY of info and hitInfo must be equal");return{offsetX:a.offsetX,offsetY:a.offsetY,image:a.image,hitImage:b.image}};ol.style.AtlasManager.prototype.add=function(a,b,c,d,e,f){if(b+this.space_>this.maxSize_||c+this.space_>this.maxSize_){return null}var g=this.add_(false,a,b,c,d,f);if(goog.isNull(g)){return null}var h=goog.isDef(e)?e:goog.functions.NULL;var i=this.add_(true,a,b,c,h,f);goog.asserts.assert(!goog.isNull(i),"hitInfo must not be null");return this.mergeInfos_(g,i)};ol.style.AtlasManager.prototype.add_=function(a,b,c,d,e,f){var g=a?this.hitAtlases_:this.atlases_;var h,i,j,k;for(j=0,k=g.length;j<k;++j){h=g[j];i=h.add(b,c,d,e,f);if(!goog.isNull(i)){return i}else if(goog.isNull(i)&&j===k-1){var l;if(a){l=Math.min(this.currentHitSize_*2,this.maxSize_);this.currentHitSize_=l}else{l=Math.min(this.currentSize_*2,this.maxSize_);this.currentSize_=l}h=new ol.style.Atlas(l,this.space_);g.push(h);++k}}goog.asserts.fail("Failed to add to atlasmanager")};ol.style.AtlasInfo;ol.style.Atlas=function(a,b){this.space_=b;this.emptyBlocks_=[{x:0,y:0,width:a,height:a}];this.entries_={};this.canvas_=goog.dom.createElement(goog.dom.TagName.CANVAS);this.canvas_.width=a;this.canvas_.height=a;this.context_=this.canvas_.getContext("2d")};ol.style.Atlas.prototype.get=function(a){return goog.object.get(this.entries_,a,null)};ol.style.Atlas.prototype.add=function(a,b,c,d,e){var f,g,h;for(g=0,h=this.emptyBlocks_.length;g<h;++g){f=this.emptyBlocks_[g];if(f.width>=b+this.space_&&f.height>=c+this.space_){var i={offsetX:f.x+this.space_,offsetY:f.y+this.space_,image:this.canvas_};this.entries_[a]=i;d.call(e,this.context_,f.x+this.space_,f.y+this.space_);this.split_(g,f,b+this.space_,c+this.space_);return i}}return null};ol.style.Atlas.prototype.split_=function(a,b,c,d){var e=b.width-c;var f=b.height-d;var g;var h;if(e>f){g={x:b.x+c,y:b.y,width:b.width-c,height:b.height};h={x:b.x,y:b.y+d,width:c,height:b.height-d};this.updateBlocks_(a,g,h)}else{g={x:b.x+c,y:b.y,width:b.width-c,height:d};h={x:b.x,y:b.y+d,width:b.width,height:b.height-d};this.updateBlocks_(a,g,h)}};ol.style.Atlas.prototype.updateBlocks_=function(a,b,c){var d=[a,1];if(b.width>0&&b.height>0){d.push(b)}if(c.width>0&&c.height>0){d.push(c)}this.emptyBlocks_.splice.apply(this.emptyBlocks_,d)};ol.style.Atlas.Block;goog.provide("ol.style.RegularShape");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("ol.color");goog.require("ol.has");goog.require("ol.render.canvas");goog.require("ol.structs.IHasChecksum");goog.require("ol.style.AtlasManager");goog.require("ol.style.Fill");goog.require("ol.style.Image");goog.require("ol.style.ImageState");goog.require("ol.style.Stroke");ol.style.RegularShape=function(a){goog.asserts.assert(goog.isDef(a.radius)||goog.isDef(a.radius1),'must provide either "radius" or "radius1"');this.checksums_=null;this.canvas_=null;this.hitDetectionCanvas_=null;this.fill_=goog.isDef(a.fill)?a.fill:null;this.origin_=[0,0];this.points_=a.points;this.radius_=goog.isDef(a.radius)?a.radius:a.radius1;this.radius2_=goog.isDef(a.radius2)?a.radius2:this.radius_;this.angle_=goog.isDef(a.angle)?a.angle:0;this.stroke_=goog.isDef(a.stroke)?a.stroke:null;this.anchor_=null;this.size_=null;this.imageSize_=null;this.hitDetectionImageSize_=null;this.render_(a.atlasManager);var b=goog.isDef(a.snapToPixel)?a.snapToPixel:true;goog.base(this,{opacity:1,rotateWithView:false,rotation:goog.isDef(a.rotation)?a.rotation:0,scale:1,snapToPixel:b})};goog.inherits(ol.style.RegularShape,ol.style.Image);ol.style.RegularShape.prototype.getAnchor=function(){return this.anchor_};ol.style.RegularShape.prototype.getAngle=function(){return this.angle_};ol.style.RegularShape.prototype.getFill=function(){return this.fill_};ol.style.RegularShape.prototype.getHitDetectionImage=function(a){return this.hitDetectionCanvas_};ol.style.RegularShape.prototype.getImage=function(a){return this.canvas_};ol.style.RegularShape.prototype.getImageSize=function(){return this.imageSize_};ol.style.RegularShape.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_};ol.style.RegularShape.prototype.getImageState=function(){return ol.style.ImageState.LOADED};ol.style.RegularShape.prototype.getOrigin=function(){return this.origin_};ol.style.RegularShape.prototype.getPoints=function(){return this.points_};ol.style.RegularShape.prototype.getRadius=function(){return this.radius_};ol.style.RegularShape.prototype.getRadius2=function(){return this.radius2_};ol.style.RegularShape.prototype.getSize=function(){return this.size_};ol.style.RegularShape.prototype.getStroke=function(){return this.stroke_};ol.style.RegularShape.prototype.listenImageChange=goog.nullFunction;ol.style.RegularShape.prototype.load=goog.nullFunction;ol.style.RegularShape.prototype.unlistenImageChange=goog.nullFunction;ol.style.RegularShape.RenderOptions;ol.style.RegularShape.prototype.render_=function(a){var b;var c="";var d="";var e=0;var f=null;var g;var h=0;if(!goog.isNull(this.stroke_)){g=ol.color.asString(this.stroke_.getColor());h=this.stroke_.getWidth();if(!goog.isDef(h)){h=ol.render.canvas.defaultLineWidth}f=this.stroke_.getLineDash();if(!ol.has.CANVAS_LINE_DASH){f=null}d=this.stroke_.getLineJoin();if(!goog.isDef(d)){d=ol.render.canvas.defaultLineJoin}c=this.stroke_.getLineCap();if(!goog.isDef(c)){c=ol.render.canvas.defaultLineCap}e=this.stroke_.getMiterLimit();if(!goog.isDef(e)){e=ol.render.canvas.defaultMiterLimit}}var i=2*(this.radius_+h)+1;var j={strokeStyle:g,strokeWidth:h,size:i,lineCap:c,lineDash:f,lineJoin:d,miterLimit:e};if(!goog.isDef(a)){this.canvas_=goog.dom.createElement(goog.dom.TagName.CANVAS);this.canvas_.height=i;this.canvas_.width=i;i=this.canvas_.width;b=i;var k=this.canvas_.getContext("2d");this.draw_(j,k,0,0);this.createHitDetectionCanvas_(j)}else{i=Math.round(i);var l=goog.isNull(this.fill_);var m;if(l){m=goog.bind(this.drawHitDetectionCanvas_,this,j)}var n=this.getChecksum();var o=a.add(n,i,i,goog.bind(this.draw_,this,j),m);goog.asserts.assert(!goog.isNull(o),"shape size is too large");this.canvas_=o.image;this.origin_=[o.offsetX,o.offsetY];b=o.image.width;if(l){this.hitDetectionCanvas_=o.hitImage;this.hitDetectionImageSize_=[o.hitImage.width,o.hitImage.height]}else{this.hitDetectionCanvas_=this.canvas_;this.hitDetectionImageSize_=[b,b]}}this.anchor_=[i/2,i/2];this.size_=[i,i];this.imageSize_=[b,b]};ol.style.RegularShape.prototype.draw_=function(a,b,c,d){var e,f,g;b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();if(this.radius2_!==this.radius_){this.points_=2*this.points_}for(e=0;e<=this.points_;e++){f=e*2*Math.PI/this.points_-Math.PI/2+this.angle_;g=e%2===0?this.radius_:this.radius2_;b.lineTo(a.size/2+g*Math.cos(f),a.size/2+g*Math.sin(f))}if(!goog.isNull(this.fill_)){b.fillStyle=ol.color.asString(this.fill_.getColor());b.fill()}if(!goog.isNull(this.stroke_)){b.strokeStyle=a.strokeStyle;b.lineWidth=a.strokeWidth;if(!goog.isNull(a.lineDash)){b.setLineDash(a.lineDash)}b.lineCap=a.lineCap;b.lineJoin=a.lineJoin;b.miterLimit=a.miterLimit;b.stroke()}b.closePath()};ol.style.RegularShape.prototype.createHitDetectionCanvas_=function(a){this.hitDetectionImageSize_=[a.size,a.size];if(!goog.isNull(this.fill_)){this.hitDetectionCanvas_=this.canvas_;return}this.hitDetectionCanvas_=goog.dom.createElement(goog.dom.TagName.CANVAS);var b=this.hitDetectionCanvas_;b.height=a.size;b.width=a.size;var c=b.getContext("2d");this.drawHitDetectionCanvas_(a,c,0,0)};ol.style.RegularShape.prototype.drawHitDetectionCanvas_=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();if(this.radius2_!==this.radius_){this.points_=2*this.points_}var e,f,g;for(e=0;e<=this.points_;e++){g=e*2*Math.PI/this.points_-Math.PI/2+this.angle_;f=e%2===0?this.radius_:this.radius2_;b.lineTo(a.size/2+f*Math.cos(g),a.size/2+f*Math.sin(g))}b.fillStyle=ol.render.canvas.defaultFillStyle;b.fill();if(!goog.isNull(this.stroke_)){b.strokeStyle=a.strokeStyle;b.lineWidth=a.strokeWidth;if(!goog.isNull(a.lineDash)){b.setLineDash(a.lineDash)}b.stroke()}b.closePath()};ol.style.RegularShape.prototype.getChecksum=function(){var a=!goog.isNull(this.stroke_)?this.stroke_.getChecksum():"-";var b=!goog.isNull(this.fill_)?this.fill_.getChecksum():"-";var c=goog.isNull(this.checksums_)||(a!=this.checksums_[1]||b!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]);if(c){var d="r"+a+b+(goog.isDef(this.radius_)?this.radius_.toString():"-")+(goog.isDef(this.radius2_)?this.radius2_.toString():"-")+(goog.isDef(this.angle_)?this.angle_.toString():"-")+(goog.isDef(this.points_)?this.points_.toString():"-");this.checksums_=[d,a,b,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};goog.addDependency("demos/editor/equationeditor.js",["goog.demos.editor.EquationEditor"],["goog.ui.equation.EquationEditorDialog"]);goog.addDependency("demos/editor/helloworld.js",["goog.demos.editor.HelloWorld"],["goog.dom","goog.dom.TagName","goog.editor.Plugin"]);goog.addDependency("demos/editor/helloworlddialog.js",["goog.demos.editor.HelloWorldDialog","goog.demos.editor.HelloWorldDialog.OkEvent"],["goog.dom.TagName","goog.events.Event","goog.string","goog.ui.editor.AbstractDialog","goog.ui.editor.AbstractDialog.Builder","goog.ui.editor.AbstractDialog.EventType"]);goog.addDependency("demos/editor/helloworlddialogplugin.js",["goog.demos.editor.HelloWorldDialogPlugin","goog.demos.editor.HelloWorldDialogPlugin.Command"],["goog.demos.editor.HelloWorldDialog","goog.dom.TagName","goog.editor.plugins.AbstractDialogPlugin","goog.editor.range","goog.functions","goog.ui.editor.AbstractDialog.EventType"]);goog.require("ol");goog.require("ol.Attribution");goog.require("ol.Collection");goog.require("ol.CollectionEvent");goog.require("ol.CollectionEventType");goog.require("ol.Color");goog.require("ol.Coordinate");goog.require("ol.CoordinateFormatType");goog.require("ol.DeviceOrientation");goog.require("ol.DeviceOrientationProperty");goog.require("ol.DragBoxEvent");goog.require("ol.Extent");goog.require("ol.Feature");goog.require("ol.FeatureLoader");goog.require("ol.FeatureStyleFunction");goog.require("ol.FeatureUrlFunction");goog.require("ol.Geolocation");goog.require("ol.GeolocationProperty");goog.require("ol.Graticule");goog.require("ol.Image");goog.require("ol.ImageTile");goog.require("ol.Kinetic");goog.require("ol.LoadingStrategy");goog.require("ol.Map");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserEventHandler");goog.require("ol.MapBrowserPointerEvent");goog.require("ol.MapEvent");goog.require("ol.MapEventType");goog.require("ol.MapProperty");goog.require("ol.Object");goog.require("ol.ObjectEvent");goog.require("ol.ObjectEventType");goog.require("ol.Observable");goog.require("ol.Overlay");goog.require("ol.OverlayPositioning");goog.require("ol.OverlayProperty");goog.require("ol.Size");goog.require("ol.Sphere");goog.require("ol.Tile");goog.require("ol.TileState");goog.require("ol.View");goog.require("ol.ViewHint");goog.require("ol.ViewProperty");goog.require("ol.animation");goog.require("ol.color");goog.require("ol.control");goog.require("ol.control.Attribution");goog.require("ol.control.Control");goog.require("ol.control.FullScreen");goog.require("ol.control.MousePosition");goog.require("ol.control.OverviewMap");goog.require("ol.control.Rotate");goog.require("ol.control.ScaleLine");goog.require("ol.control.ScaleLineProperty");goog.require("ol.control.ScaleLineUnits");goog.require("ol.control.Zoom");goog.require("ol.control.ZoomSlider");goog.require("ol.control.ZoomToExtent");goog.require("ol.coordinate");goog.require("ol.easing");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.extent");goog.require("ol.extent.Corner");goog.require("ol.extent.Relationship");goog.require("ol.featureloader");goog.require("ol.format.EsriJSON");goog.require("ol.format.Feature");goog.require("ol.format.GML");goog.require("ol.format.GML2");goog.require("ol.format.GML3");goog.require("ol.format.GMLBase");goog.require("ol.format.GPX");goog.require("ol.format.GeoJSON");goog.require("ol.format.IGC");goog.require("ol.format.IGCZ");goog.require("ol.format.KML");goog.require("ol.format.OSMXML");goog.require("ol.format.Polyline");goog.require("ol.format.TopoJSON");goog.require("ol.format.WFS");goog.require("ol.format.WKT");goog.require("ol.format.WMSCapabilities");goog.require("ol.format.WMSGetFeatureInfo");goog.require("ol.format.WMTSCapabilities");goog.require("ol.geom.Circle");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.has");goog.require("ol.interaction");goog.require("ol.interaction.DoubleClickZoom");goog.require("ol.interaction.DragAndDrop");goog.require("ol.interaction.DragAndDropEvent");goog.require("ol.interaction.DragBox");goog.require("ol.interaction.DragPan");goog.require("ol.interaction.DragRotate");goog.require("ol.interaction.DragRotateAndZoom");goog.require("ol.interaction.DragZoom");goog.require("ol.interaction.Draw");goog.require("ol.interaction.DrawEvent");goog.require("ol.interaction.DrawEventType");goog.require("ol.interaction.DrawGeometryFunctionType");goog.require("ol.interaction.DrawMode");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.InteractionProperty");goog.require("ol.interaction.KeyboardPan");goog.require("ol.interaction.KeyboardZoom");goog.require("ol.interaction.Modify");goog.require("ol.interaction.ModifyEvent");goog.require("ol.interaction.MouseWheelZoom");goog.require("ol.interaction.PinchRotate");goog.require("ol.interaction.PinchZoom");goog.require("ol.interaction.Pointer");goog.require("ol.interaction.Select");goog.require("ol.interaction.SelectEvent");goog.require("ol.interaction.SelectEventType");goog.require("ol.interaction.SelectFilterFunction");goog.require("ol.interaction.Snap");goog.require("ol.interaction.SnapProperty");goog.require("ol.interaction.Translate");goog.require("ol.layer.Base");goog.require("ol.layer.Group");goog.require("ol.layer.Heatmap");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.LayerProperty");goog.require("ol.layer.LayerState");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.loadingstrategy");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Projection");goog.require("ol.proj.ProjectionLike");goog.require("ol.proj.Units");goog.require("ol.proj.common");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.VectorContext");goog.require("ol.render.canvas.Immediate");goog.require("ol.render.webgl.Immediate");goog.require("ol.size");goog.require("ol.source.BingMaps");goog.require("ol.source.Cluster");goog.require("ol.source.Image");goog.require("ol.source.ImageCanvas");goog.require("ol.source.ImageEvent");goog.require("ol.source.ImageMapGuide");goog.require("ol.source.ImageStatic");goog.require("ol.source.ImageVector");goog.require("ol.source.ImageWMS");goog.require("ol.source.MapQuest");goog.require("ol.source.OSM");goog.require("ol.source.Raster");goog.require("ol.source.RasterEvent");goog.require("ol.source.RasterEventType");goog.require("ol.source.Source");goog.require("ol.source.Stamen");goog.require("ol.source.State");goog.require("ol.source.Tile");goog.require("ol.source.TileArcGISRest");goog.require("ol.source.TileDebug");goog.require("ol.source.TileEvent");goog.require("ol.source.TileImage");goog.require("ol.source.TileJSON");goog.require("ol.source.TileOptions");goog.require("ol.source.TileUTFGrid");goog.require("ol.source.TileVector");goog.require("ol.source.TileWMS");goog.require("ol.source.Vector");goog.require("ol.source.VectorEvent");goog.require("ol.source.VectorEventType");goog.require("ol.source.WMTS");goog.require("ol.source.WMTSRequestEncoding");goog.require("ol.source.XYZ");goog.require("ol.source.Zoomify");goog.require("ol.style.Atlas");goog.require("ol.style.AtlasManager");goog.require("ol.style.Circle");goog.require("ol.style.Fill");goog.require("ol.style.GeometryFunction");goog.require("ol.style.Icon");goog.require("ol.style.IconAnchorUnits");goog.require("ol.style.IconImageCache");goog.require("ol.style.IconOrigin");goog.require("ol.style.Image");goog.require("ol.style.ImageState");goog.require("ol.style.RegularShape");goog.require("ol.style.Stroke");goog.require("ol.style.Style");goog.require("ol.style.StyleFunction");goog.require("ol.style.Text");goog.require("ol.style.defaultGeometryFunction");goog.require("ol.tilegrid.TileGrid");goog.require("ol.tilegrid.WMTS");goog.require("ol.tilejson");goog.require("ol.webgl.Context");goog.require("ol.xml");goog.exportSymbol("ol.animation.bounce",ol.animation.bounce,OPENLAYERS);goog.exportSymbol("ol.animation.pan",ol.animation.pan,OPENLAYERS);goog.exportSymbol("ol.animation.rotate",ol.animation.rotate,OPENLAYERS);goog.exportSymbol("ol.animation.zoom",ol.animation.zoom,OPENLAYERS);goog.exportSymbol("ol.Attribution",ol.Attribution,OPENLAYERS);goog.exportProperty(ol.Attribution.prototype,"getHTML",ol.Attribution.prototype.getHTML);goog.exportProperty(ol.CollectionEvent.prototype,"element",ol.CollectionEvent.prototype.element);goog.exportSymbol("ol.Collection",ol.Collection,OPENLAYERS);goog.exportProperty(ol.Collection.prototype,"clear",ol.Collection.prototype.clear);goog.exportProperty(ol.Collection.prototype,"extend",ol.Collection.prototype.extend);goog.exportProperty(ol.Collection.prototype,"forEach",ol.Collection.prototype.forEach);goog.exportProperty(ol.Collection.prototype,"getArray",ol.Collection.prototype.getArray);goog.exportProperty(ol.Collection.prototype,"item",ol.Collection.prototype.item);goog.exportProperty(ol.Collection.prototype,"getLength",ol.Collection.prototype.getLength);goog.exportProperty(ol.Collection.prototype,"insertAt",ol.Collection.prototype.insertAt);goog.exportProperty(ol.Collection.prototype,"pop",ol.Collection.prototype.pop);goog.exportProperty(ol.Collection.prototype,"push",ol.Collection.prototype.push);goog.exportProperty(ol.Collection.prototype,"remove",ol.Collection.prototype.remove);goog.exportProperty(ol.Collection.prototype,"removeAt",ol.Collection.prototype.removeAt);goog.exportProperty(ol.Collection.prototype,"setAt",ol.Collection.prototype.setAt);goog.exportSymbol("ol.coordinate.add",ol.coordinate.add,OPENLAYERS);goog.exportSymbol("ol.coordinate.createStringXY",ol.coordinate.createStringXY,OPENLAYERS);goog.exportSymbol("ol.coordinate.format",ol.coordinate.format,OPENLAYERS);goog.exportSymbol("ol.coordinate.rotate",ol.coordinate.rotate,OPENLAYERS);goog.exportSymbol("ol.coordinate.toStringHDMS",ol.coordinate.toStringHDMS,OPENLAYERS);goog.exportSymbol("ol.coordinate.toStringXY",ol.coordinate.toStringXY,OPENLAYERS);goog.exportSymbol("ol.DeviceOrientation",ol.DeviceOrientation,OPENLAYERS);goog.exportProperty(ol.DeviceOrientation.prototype,"getAlpha",ol.DeviceOrientation.prototype.getAlpha);goog.exportProperty(ol.DeviceOrientation.prototype,"getBeta",ol.DeviceOrientation.prototype.getBeta);goog.exportProperty(ol.DeviceOrientation.prototype,"getGamma",ol.DeviceOrientation.prototype.getGamma);goog.exportProperty(ol.DeviceOrientation.prototype,"getHeading",ol.DeviceOrientation.prototype.getHeading);goog.exportProperty(ol.DeviceOrientation.prototype,"getTracking",ol.DeviceOrientation.prototype.getTracking);goog.exportProperty(ol.DeviceOrientation.prototype,"setTracking",ol.DeviceOrientation.prototype.setTracking);goog.exportSymbol("ol.easing.easeIn",ol.easing.easeIn,OPENLAYERS);goog.exportSymbol("ol.easing.easeOut",ol.easing.easeOut,OPENLAYERS);goog.exportSymbol("ol.easing.inAndOut",ol.easing.inAndOut,OPENLAYERS);goog.exportSymbol("ol.easing.linear",ol.easing.linear,OPENLAYERS);goog.exportSymbol("ol.easing.upAndDown",ol.easing.upAndDown,OPENLAYERS);goog.exportSymbol("ol.extent.boundingExtent",ol.extent.boundingExtent,OPENLAYERS);goog.exportSymbol("ol.extent.buffer",ol.extent.buffer,OPENLAYERS);goog.exportSymbol("ol.extent.containsCoordinate",ol.extent.containsCoordinate,OPENLAYERS);goog.exportSymbol("ol.extent.containsExtent",ol.extent.containsExtent,OPENLAYERS);goog.exportSymbol("ol.extent.containsXY",ol.extent.containsXY,OPENLAYERS);goog.exportSymbol("ol.extent.createEmpty",ol.extent.createEmpty,OPENLAYERS);goog.exportSymbol("ol.extent.equals",ol.extent.equals,OPENLAYERS);goog.exportSymbol("ol.extent.extend",ol.extent.extend,OPENLAYERS);goog.exportSymbol("ol.extent.getBottomLeft",ol.extent.getBottomLeft,OPENLAYERS);goog.exportSymbol("ol.extent.getBottomRight",ol.extent.getBottomRight,OPENLAYERS);goog.exportSymbol("ol.extent.getCenter",ol.extent.getCenter,OPENLAYERS);goog.exportSymbol("ol.extent.getHeight",ol.extent.getHeight,OPENLAYERS);goog.exportSymbol("ol.extent.getIntersection",ol.extent.getIntersection,OPENLAYERS);goog.exportSymbol("ol.extent.getSize",ol.extent.getSize,OPENLAYERS);goog.exportSymbol("ol.extent.getTopLeft",ol.extent.getTopLeft,OPENLAYERS);goog.exportSymbol("ol.extent.getTopRight",ol.extent.getTopRight,OPENLAYERS);goog.exportSymbol("ol.extent.getWidth",ol.extent.getWidth,OPENLAYERS);goog.exportSymbol("ol.extent.intersects",ol.extent.intersects,OPENLAYERS);goog.exportSymbol("ol.extent.isEmpty",ol.extent.isEmpty,OPENLAYERS);goog.exportSymbol("ol.extent.applyTransform",ol.extent.applyTransform,OPENLAYERS);goog.exportSymbol("ol.Feature",ol.Feature,OPENLAYERS);goog.exportProperty(ol.Feature.prototype,"clone",ol.Feature.prototype.clone);goog.exportProperty(ol.Feature.prototype,"getGeometry",ol.Feature.prototype.getGeometry);goog.exportProperty(ol.Feature.prototype,"getId",ol.Feature.prototype.getId);goog.exportProperty(ol.Feature.prototype,"getGeometryName",ol.Feature.prototype.getGeometryName);goog.exportProperty(ol.Feature.prototype,"getStyle",ol.Feature.prototype.getStyle);goog.exportProperty(ol.Feature.prototype,"getStyleFunction",ol.Feature.prototype.getStyleFunction);goog.exportProperty(ol.Feature.prototype,"setGeometry",ol.Feature.prototype.setGeometry);goog.exportProperty(ol.Feature.prototype,"setStyle",ol.Feature.prototype.setStyle);goog.exportProperty(ol.Feature.prototype,"setId",ol.Feature.prototype.setId);goog.exportProperty(ol.Feature.prototype,"setGeometryName",ol.Feature.prototype.setGeometryName);goog.exportSymbol("ol.featureloader.xhr",ol.featureloader.xhr,OPENLAYERS);goog.exportSymbol("ol.Geolocation",ol.Geolocation,OPENLAYERS);goog.exportProperty(ol.Geolocation.prototype,"getAccuracy",ol.Geolocation.prototype.getAccuracy);goog.exportProperty(ol.Geolocation.prototype,"getAccuracyGeometry",ol.Geolocation.prototype.getAccuracyGeometry);goog.exportProperty(ol.Geolocation.prototype,"getAltitude",ol.Geolocation.prototype.getAltitude);goog.exportProperty(ol.Geolocation.prototype,"getAltitudeAccuracy",ol.Geolocation.prototype.getAltitudeAccuracy);goog.exportProperty(ol.Geolocation.prototype,"getHeading",ol.Geolocation.prototype.getHeading);goog.exportProperty(ol.Geolocation.prototype,"getPosition",ol.Geolocation.prototype.getPosition);goog.exportProperty(ol.Geolocation.prototype,"getProjection",ol.Geolocation.prototype.getProjection);goog.exportProperty(ol.Geolocation.prototype,"getSpeed",ol.Geolocation.prototype.getSpeed);goog.exportProperty(ol.Geolocation.prototype,"getTracking",ol.Geolocation.prototype.getTracking);goog.exportProperty(ol.Geolocation.prototype,"getTrackingOptions",ol.Geolocation.prototype.getTrackingOptions);goog.exportProperty(ol.Geolocation.prototype,"setProjection",ol.Geolocation.prototype.setProjection);goog.exportProperty(ol.Geolocation.prototype,"setTracking",ol.Geolocation.prototype.setTracking);goog.exportProperty(ol.Geolocation.prototype,"setTrackingOptions",ol.Geolocation.prototype.setTrackingOptions);goog.exportSymbol("ol.Graticule",ol.Graticule,OPENLAYERS);goog.exportProperty(ol.Graticule.prototype,"getMap",ol.Graticule.prototype.getMap);goog.exportProperty(ol.Graticule.prototype,"getMeridians",ol.Graticule.prototype.getMeridians);goog.exportProperty(ol.Graticule.prototype,"getParallels",ol.Graticule.prototype.getParallels);goog.exportProperty(ol.Graticule.prototype,"setMap",ol.Graticule.prototype.setMap);goog.exportSymbol("ol.has.DEVICE_PIXEL_RATIO",ol.has.DEVICE_PIXEL_RATIO,OPENLAYERS);goog.exportSymbol("ol.has.CANVAS",ol.has.CANVAS,OPENLAYERS);goog.exportSymbol("ol.has.DEVICE_ORIENTATION",ol.has.DEVICE_ORIENTATION,OPENLAYERS);goog.exportSymbol("ol.has.GEOLOCATION",ol.has.GEOLOCATION,OPENLAYERS);goog.exportSymbol("ol.has.TOUCH",ol.has.TOUCH,OPENLAYERS);goog.exportSymbol("ol.has.WEBGL",ol.has.WEBGL,OPENLAYERS);goog.exportProperty(ol.Image.prototype,"getImage",ol.Image.prototype.getImage);goog.exportProperty(ol.ImageTile.prototype,"getImage",ol.ImageTile.prototype.getImage);goog.exportSymbol("ol.Kinetic",ol.Kinetic,OPENLAYERS);goog.exportSymbol("ol.loadingstrategy.all",ol.loadingstrategy.all,OPENLAYERS);goog.exportSymbol("ol.loadingstrategy.bbox",ol.loadingstrategy.bbox,OPENLAYERS);goog.exportSymbol("ol.loadingstrategy.tile",ol.loadingstrategy.tile,OPENLAYERS);goog.exportSymbol("ol.Map",ol.Map,OPENLAYERS);goog.exportProperty(ol.Map.prototype,"addControl",ol.Map.prototype.addControl);goog.exportProperty(ol.Map.prototype,"addInteraction",ol.Map.prototype.addInteraction);goog.exportProperty(ol.Map.prototype,"addLayer",ol.Map.prototype.addLayer);goog.exportProperty(ol.Map.prototype,"addOverlay",ol.Map.prototype.addOverlay);goog.exportProperty(ol.Map.prototype,"beforeRender",ol.Map.prototype.beforeRender);goog.exportProperty(ol.Map.prototype,"forEachFeatureAtPixel",ol.Map.prototype.forEachFeatureAtPixel);goog.exportProperty(ol.Map.prototype,"forEachLayerAtPixel",ol.Map.prototype.forEachLayerAtPixel);goog.exportProperty(ol.Map.prototype,"hasFeatureAtPixel",ol.Map.prototype.hasFeatureAtPixel);goog.exportProperty(ol.Map.prototype,"getEventCoordinate",ol.Map.prototype.getEventCoordinate);goog.exportProperty(ol.Map.prototype,"getEventPixel",ol.Map.prototype.getEventPixel);goog.exportProperty(ol.Map.prototype,"getTarget",ol.Map.prototype.getTarget);goog.exportProperty(ol.Map.prototype,"getTargetElement",ol.Map.prototype.getTargetElement);goog.exportProperty(ol.Map.prototype,"getCoordinateFromPixel",ol.Map.prototype.getCoordinateFromPixel);goog.exportProperty(ol.Map.prototype,"getControls",ol.Map.prototype.getControls);goog.exportProperty(ol.Map.prototype,"getOverlays",ol.Map.prototype.getOverlays);goog.exportProperty(ol.Map.prototype,"getInteractions",ol.Map.prototype.getInteractions);goog.exportProperty(ol.Map.prototype,"getLayerGroup",ol.Map.prototype.getLayerGroup);goog.exportProperty(ol.Map.prototype,"getLayers",ol.Map.prototype.getLayers);goog.exportProperty(ol.Map.prototype,"getPixelFromCoordinate",ol.Map.prototype.getPixelFromCoordinate);goog.exportProperty(ol.Map.prototype,"getSize",ol.Map.prototype.getSize);goog.exportProperty(ol.Map.prototype,"getView",ol.Map.prototype.getView)
;goog.exportProperty(ol.Map.prototype,"getViewport",ol.Map.prototype.getViewport);goog.exportProperty(ol.Map.prototype,"renderSync",ol.Map.prototype.renderSync);goog.exportProperty(ol.Map.prototype,"render",ol.Map.prototype.render);goog.exportProperty(ol.Map.prototype,"removeControl",ol.Map.prototype.removeControl);goog.exportProperty(ol.Map.prototype,"removeInteraction",ol.Map.prototype.removeInteraction);goog.exportProperty(ol.Map.prototype,"removeLayer",ol.Map.prototype.removeLayer);goog.exportProperty(ol.Map.prototype,"removeOverlay",ol.Map.prototype.removeOverlay);goog.exportProperty(ol.Map.prototype,"setLayerGroup",ol.Map.prototype.setLayerGroup);goog.exportProperty(ol.Map.prototype,"setSize",ol.Map.prototype.setSize);goog.exportProperty(ol.Map.prototype,"setTarget",ol.Map.prototype.setTarget);goog.exportProperty(ol.Map.prototype,"setView",ol.Map.prototype.setView);goog.exportProperty(ol.Map.prototype,"updateSize",ol.Map.prototype.updateSize);goog.exportProperty(ol.MapBrowserEvent.prototype,"originalEvent",ol.MapBrowserEvent.prototype.originalEvent);goog.exportProperty(ol.MapBrowserEvent.prototype,"pixel",ol.MapBrowserEvent.prototype.pixel);goog.exportProperty(ol.MapBrowserEvent.prototype,"coordinate",ol.MapBrowserEvent.prototype.coordinate);goog.exportProperty(ol.MapBrowserEvent.prototype,"dragging",ol.MapBrowserEvent.prototype.dragging);goog.exportProperty(ol.MapBrowserEvent.prototype,"preventDefault",ol.MapBrowserEvent.prototype.preventDefault);goog.exportProperty(ol.MapBrowserEvent.prototype,"stopPropagation",ol.MapBrowserEvent.prototype.stopPropagation);goog.exportProperty(ol.MapEvent.prototype,"map",ol.MapEvent.prototype.map);goog.exportProperty(ol.MapEvent.prototype,"frameState",ol.MapEvent.prototype.frameState);goog.exportProperty(ol.ObjectEvent.prototype,"key",ol.ObjectEvent.prototype.key);goog.exportProperty(ol.ObjectEvent.prototype,"oldValue",ol.ObjectEvent.prototype.oldValue);goog.exportSymbol("ol.Object",ol.Object,OPENLAYERS);goog.exportProperty(ol.Object.prototype,"get",ol.Object.prototype.get);goog.exportProperty(ol.Object.prototype,"getKeys",ol.Object.prototype.getKeys);goog.exportProperty(ol.Object.prototype,"getProperties",ol.Object.prototype.getProperties);goog.exportProperty(ol.Object.prototype,"set",ol.Object.prototype.set);goog.exportProperty(ol.Object.prototype,"setProperties",ol.Object.prototype.setProperties);goog.exportProperty(ol.Object.prototype,"unset",ol.Object.prototype.unset);goog.exportSymbol("ol.Observable",ol.Observable,OPENLAYERS);goog.exportSymbol("ol.Observable.unByKey",ol.Observable.unByKey,OPENLAYERS);goog.exportProperty(ol.Observable.prototype,"changed",ol.Observable.prototype.changed);goog.exportProperty(ol.Observable.prototype,"getRevision",ol.Observable.prototype.getRevision);goog.exportProperty(ol.Observable.prototype,"on",ol.Observable.prototype.on);goog.exportProperty(ol.Observable.prototype,"once",ol.Observable.prototype.once);goog.exportProperty(ol.Observable.prototype,"un",ol.Observable.prototype.un);goog.exportProperty(ol.Observable.prototype,"unByKey",ol.Observable.prototype.unByKey);goog.exportSymbol("ol.inherits",ol.inherits,OPENLAYERS);goog.exportSymbol("ol.Overlay",ol.Overlay,OPENLAYERS);goog.exportProperty(ol.Overlay.prototype,"getElement",ol.Overlay.prototype.getElement);goog.exportProperty(ol.Overlay.prototype,"getMap",ol.Overlay.prototype.getMap);goog.exportProperty(ol.Overlay.prototype,"getOffset",ol.Overlay.prototype.getOffset);goog.exportProperty(ol.Overlay.prototype,"getPosition",ol.Overlay.prototype.getPosition);goog.exportProperty(ol.Overlay.prototype,"getPositioning",ol.Overlay.prototype.getPositioning);goog.exportProperty(ol.Overlay.prototype,"setElement",ol.Overlay.prototype.setElement);goog.exportProperty(ol.Overlay.prototype,"setMap",ol.Overlay.prototype.setMap);goog.exportProperty(ol.Overlay.prototype,"setOffset",ol.Overlay.prototype.setOffset);goog.exportProperty(ol.Overlay.prototype,"setPosition",ol.Overlay.prototype.setPosition);goog.exportProperty(ol.Overlay.prototype,"setPositioning",ol.Overlay.prototype.setPositioning);goog.exportSymbol("ol.size.toSize",ol.size.toSize,OPENLAYERS);goog.exportProperty(ol.Tile.prototype,"getTileCoord",ol.Tile.prototype.getTileCoord);goog.exportSymbol("ol.View",ol.View,OPENLAYERS);goog.exportProperty(ol.View.prototype,"constrainCenter",ol.View.prototype.constrainCenter);goog.exportProperty(ol.View.prototype,"constrainResolution",ol.View.prototype.constrainResolution);goog.exportProperty(ol.View.prototype,"constrainRotation",ol.View.prototype.constrainRotation);goog.exportProperty(ol.View.prototype,"getCenter",ol.View.prototype.getCenter);goog.exportProperty(ol.View.prototype,"calculateExtent",ol.View.prototype.calculateExtent);goog.exportProperty(ol.View.prototype,"getProjection",ol.View.prototype.getProjection);goog.exportProperty(ol.View.prototype,"getResolution",ol.View.prototype.getResolution);goog.exportProperty(ol.View.prototype,"getRotation",ol.View.prototype.getRotation);goog.exportProperty(ol.View.prototype,"getZoom",ol.View.prototype.getZoom);goog.exportProperty(ol.View.prototype,"fit",ol.View.prototype.fit);goog.exportProperty(ol.View.prototype,"centerOn",ol.View.prototype.centerOn);goog.exportProperty(ol.View.prototype,"rotate",ol.View.prototype.rotate);goog.exportProperty(ol.View.prototype,"setCenter",ol.View.prototype.setCenter);goog.exportProperty(ol.View.prototype,"setResolution",ol.View.prototype.setResolution);goog.exportProperty(ol.View.prototype,"setRotation",ol.View.prototype.setRotation);goog.exportProperty(ol.View.prototype,"setZoom",ol.View.prototype.setZoom);goog.exportSymbol("ol.xml.getAllTextContent",ol.xml.getAllTextContent,OPENLAYERS);goog.exportSymbol("ol.xml.parse",ol.xml.parse,OPENLAYERS);goog.exportSymbol("ol.webgl.Context",ol.webgl.Context,OPENLAYERS);goog.exportProperty(ol.webgl.Context.prototype,"getGL",ol.webgl.Context.prototype.getGL);goog.exportProperty(ol.webgl.Context.prototype,"getHitDetectionFramebuffer",ol.webgl.Context.prototype.getHitDetectionFramebuffer);goog.exportProperty(ol.webgl.Context.prototype,"useProgram",ol.webgl.Context.prototype.useProgram);goog.exportSymbol("ol.tilegrid.TileGrid",ol.tilegrid.TileGrid,OPENLAYERS);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getMaxZoom",ol.tilegrid.TileGrid.prototype.getMaxZoom);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getMinZoom",ol.tilegrid.TileGrid.prototype.getMinZoom);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getOrigin",ol.tilegrid.TileGrid.prototype.getOrigin);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getResolution",ol.tilegrid.TileGrid.prototype.getResolution);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getResolutions",ol.tilegrid.TileGrid.prototype.getResolutions);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileCoordForCoordAndResolution",ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileCoordForCoordAndZ",ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileSize",ol.tilegrid.TileGrid.prototype.getTileSize);goog.exportSymbol("ol.tilegrid.createXYZ",ol.tilegrid.createXYZ,OPENLAYERS);goog.exportSymbol("ol.tilegrid.WMTS",ol.tilegrid.WMTS,OPENLAYERS);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMatrixIds",ol.tilegrid.WMTS.prototype.getMatrixIds);goog.exportSymbol("ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet",ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet,OPENLAYERS);goog.exportSymbol("ol.style.AtlasManager",ol.style.AtlasManager,OPENLAYERS);goog.exportSymbol("ol.style.Circle",ol.style.Circle,OPENLAYERS);goog.exportProperty(ol.style.Circle.prototype,"getFill",ol.style.Circle.prototype.getFill);goog.exportProperty(ol.style.Circle.prototype,"getImage",ol.style.Circle.prototype.getImage);goog.exportProperty(ol.style.Circle.prototype,"getRadius",ol.style.Circle.prototype.getRadius);goog.exportProperty(ol.style.Circle.prototype,"getStroke",ol.style.Circle.prototype.getStroke);goog.exportSymbol("ol.style.Fill",ol.style.Fill,OPENLAYERS);goog.exportProperty(ol.style.Fill.prototype,"getColor",ol.style.Fill.prototype.getColor);goog.exportProperty(ol.style.Fill.prototype,"setColor",ol.style.Fill.prototype.setColor);goog.exportSymbol("ol.style.Icon",ol.style.Icon,OPENLAYERS);goog.exportProperty(ol.style.Icon.prototype,"getAnchor",ol.style.Icon.prototype.getAnchor);goog.exportProperty(ol.style.Icon.prototype,"getImage",ol.style.Icon.prototype.getImage);goog.exportProperty(ol.style.Icon.prototype,"getOrigin",ol.style.Icon.prototype.getOrigin);goog.exportProperty(ol.style.Icon.prototype,"getSrc",ol.style.Icon.prototype.getSrc);goog.exportProperty(ol.style.Icon.prototype,"getSize",ol.style.Icon.prototype.getSize);goog.exportProperty(ol.style.Icon.prototype,"load",ol.style.Icon.prototype.load);goog.exportSymbol("ol.style.Image",ol.style.Image,OPENLAYERS);goog.exportProperty(ol.style.Image.prototype,"getOpacity",ol.style.Image.prototype.getOpacity);goog.exportProperty(ol.style.Image.prototype,"getRotateWithView",ol.style.Image.prototype.getRotateWithView);goog.exportProperty(ol.style.Image.prototype,"getRotation",ol.style.Image.prototype.getRotation);goog.exportProperty(ol.style.Image.prototype,"getScale",ol.style.Image.prototype.getScale);goog.exportProperty(ol.style.Image.prototype,"getSnapToPixel",ol.style.Image.prototype.getSnapToPixel);goog.exportProperty(ol.style.Image.prototype,"setOpacity",ol.style.Image.prototype.setOpacity);goog.exportProperty(ol.style.Image.prototype,"setRotation",ol.style.Image.prototype.setRotation);goog.exportProperty(ol.style.Image.prototype,"setScale",ol.style.Image.prototype.setScale);goog.exportSymbol("ol.style.RegularShape",ol.style.RegularShape,OPENLAYERS);goog.exportProperty(ol.style.RegularShape.prototype,"getAnchor",ol.style.RegularShape.prototype.getAnchor);goog.exportProperty(ol.style.RegularShape.prototype,"getAngle",ol.style.RegularShape.prototype.getAngle);goog.exportProperty(ol.style.RegularShape.prototype,"getFill",ol.style.RegularShape.prototype.getFill);goog.exportProperty(ol.style.RegularShape.prototype,"getImage",ol.style.RegularShape.prototype.getImage);goog.exportProperty(ol.style.RegularShape.prototype,"getOrigin",ol.style.RegularShape.prototype.getOrigin);goog.exportProperty(ol.style.RegularShape.prototype,"getPoints",ol.style.RegularShape.prototype.getPoints);goog.exportProperty(ol.style.RegularShape.prototype,"getRadius",ol.style.RegularShape.prototype.getRadius);goog.exportProperty(ol.style.RegularShape.prototype,"getRadius2",ol.style.RegularShape.prototype.getRadius2);goog.exportProperty(ol.style.RegularShape.prototype,"getSize",ol.style.RegularShape.prototype.getSize);goog.exportProperty(ol.style.RegularShape.prototype,"getStroke",ol.style.RegularShape.prototype.getStroke);goog.exportSymbol("ol.style.Stroke",ol.style.Stroke,OPENLAYERS);goog.exportProperty(ol.style.Stroke.prototype,"getColor",ol.style.Stroke.prototype.getColor);goog.exportProperty(ol.style.Stroke.prototype,"getLineCap",ol.style.Stroke.prototype.getLineCap);goog.exportProperty(ol.style.Stroke.prototype,"getLineDash",ol.style.Stroke.prototype.getLineDash);goog.exportProperty(ol.style.Stroke.prototype,"getLineJoin",ol.style.Stroke.prototype.getLineJoin);goog.exportProperty(ol.style.Stroke.prototype,"getMiterLimit",ol.style.Stroke.prototype.getMiterLimit);goog.exportProperty(ol.style.Stroke.prototype,"getWidth",ol.style.Stroke.prototype.getWidth);goog.exportProperty(ol.style.Stroke.prototype,"setColor",ol.style.Stroke.prototype.setColor);goog.exportProperty(ol.style.Stroke.prototype,"setLineCap",ol.style.Stroke.prototype.setLineCap);goog.exportProperty(ol.style.Stroke.prototype,"setLineDash",ol.style.Stroke.prototype.setLineDash);goog.exportProperty(ol.style.Stroke.prototype,"setLineJoin",ol.style.Stroke.prototype.setLineJoin);goog.exportProperty(ol.style.Stroke.prototype,"setMiterLimit",ol.style.Stroke.prototype.setMiterLimit);goog.exportProperty(ol.style.Stroke.prototype,"setWidth",ol.style.Stroke.prototype.setWidth);goog.exportSymbol("ol.style.Style",ol.style.Style,OPENLAYERS);goog.exportProperty(ol.style.Style.prototype,"getGeometry",ol.style.Style.prototype.getGeometry);goog.exportProperty(ol.style.Style.prototype,"getGeometryFunction",ol.style.Style.prototype.getGeometryFunction);goog.exportProperty(ol.style.Style.prototype,"getFill",ol.style.Style.prototype.getFill);goog.exportProperty(ol.style.Style.prototype,"getImage",ol.style.Style.prototype.getImage);goog.exportProperty(ol.style.Style.prototype,"getStroke",ol.style.Style.prototype.getStroke);goog.exportProperty(ol.style.Style.prototype,"getText",ol.style.Style.prototype.getText);goog.exportProperty(ol.style.Style.prototype,"getZIndex",ol.style.Style.prototype.getZIndex);goog.exportProperty(ol.style.Style.prototype,"setGeometry",ol.style.Style.prototype.setGeometry);goog.exportProperty(ol.style.Style.prototype,"setZIndex",ol.style.Style.prototype.setZIndex);goog.exportSymbol("ol.style.Text",ol.style.Text,OPENLAYERS);goog.exportProperty(ol.style.Text.prototype,"getFont",ol.style.Text.prototype.getFont);goog.exportProperty(ol.style.Text.prototype,"getOffsetX",ol.style.Text.prototype.getOffsetX);goog.exportProperty(ol.style.Text.prototype,"getOffsetY",ol.style.Text.prototype.getOffsetY);goog.exportProperty(ol.style.Text.prototype,"getFill",ol.style.Text.prototype.getFill);goog.exportProperty(ol.style.Text.prototype,"getRotation",ol.style.Text.prototype.getRotation);goog.exportProperty(ol.style.Text.prototype,"getScale",ol.style.Text.prototype.getScale);goog.exportProperty(ol.style.Text.prototype,"getStroke",ol.style.Text.prototype.getStroke);goog.exportProperty(ol.style.Text.prototype,"getText",ol.style.Text.prototype.getText);goog.exportProperty(ol.style.Text.prototype,"getTextAlign",ol.style.Text.prototype.getTextAlign);goog.exportProperty(ol.style.Text.prototype,"getTextBaseline",ol.style.Text.prototype.getTextBaseline);goog.exportProperty(ol.style.Text.prototype,"setFont",ol.style.Text.prototype.setFont);goog.exportProperty(ol.style.Text.prototype,"setFill",ol.style.Text.prototype.setFill);goog.exportProperty(ol.style.Text.prototype,"setRotation",ol.style.Text.prototype.setRotation);goog.exportProperty(ol.style.Text.prototype,"setScale",ol.style.Text.prototype.setScale);goog.exportProperty(ol.style.Text.prototype,"setStroke",ol.style.Text.prototype.setStroke);goog.exportProperty(ol.style.Text.prototype,"setText",ol.style.Text.prototype.setText);goog.exportProperty(ol.style.Text.prototype,"setTextAlign",ol.style.Text.prototype.setTextAlign);goog.exportProperty(ol.style.Text.prototype,"setTextBaseline",ol.style.Text.prototype.setTextBaseline);goog.exportSymbol("ol.Sphere",ol.Sphere,OPENLAYERS);goog.exportProperty(ol.Sphere.prototype,"geodesicArea",ol.Sphere.prototype.geodesicArea);goog.exportProperty(ol.Sphere.prototype,"haversineDistance",ol.Sphere.prototype.haversineDistance);goog.exportSymbol("ol.source.BingMaps",ol.source.BingMaps,OPENLAYERS);goog.exportSymbol("ol.source.BingMaps.TOS_ATTRIBUTION",ol.source.BingMaps.TOS_ATTRIBUTION,OPENLAYERS);goog.exportSymbol("ol.source.Cluster",ol.source.Cluster,OPENLAYERS);goog.exportProperty(ol.source.Cluster.prototype,"getSource",ol.source.Cluster.prototype.getSource);goog.exportSymbol("ol.source.ImageCanvas",ol.source.ImageCanvas,OPENLAYERS);goog.exportSymbol("ol.source.ImageMapGuide",ol.source.ImageMapGuide,OPENLAYERS);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getParams",ol.source.ImageMapGuide.prototype.getParams);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getImageLoadFunction",ol.source.ImageMapGuide.prototype.getImageLoadFunction);goog.exportProperty(ol.source.ImageMapGuide.prototype,"updateParams",ol.source.ImageMapGuide.prototype.updateParams);goog.exportProperty(ol.source.ImageMapGuide.prototype,"setImageLoadFunction",ol.source.ImageMapGuide.prototype.setImageLoadFunction);goog.exportSymbol("ol.source.Image",ol.source.Image,OPENLAYERS);goog.exportProperty(ol.source.ImageEvent.prototype,"image",ol.source.ImageEvent.prototype.image);goog.exportSymbol("ol.source.ImageStatic",ol.source.ImageStatic,OPENLAYERS);goog.exportSymbol("ol.source.ImageVector",ol.source.ImageVector,OPENLAYERS);goog.exportProperty(ol.source.ImageVector.prototype,"getSource",ol.source.ImageVector.prototype.getSource);goog.exportProperty(ol.source.ImageVector.prototype,"getStyle",ol.source.ImageVector.prototype.getStyle);goog.exportProperty(ol.source.ImageVector.prototype,"getStyleFunction",ol.source.ImageVector.prototype.getStyleFunction);goog.exportProperty(ol.source.ImageVector.prototype,"setStyle",ol.source.ImageVector.prototype.setStyle);goog.exportSymbol("ol.source.ImageWMS",ol.source.ImageWMS,OPENLAYERS);goog.exportProperty(ol.source.ImageWMS.prototype,"getGetFeatureInfoUrl",ol.source.ImageWMS.prototype.getGetFeatureInfoUrl);goog.exportProperty(ol.source.ImageWMS.prototype,"getParams",ol.source.ImageWMS.prototype.getParams);goog.exportProperty(ol.source.ImageWMS.prototype,"getImageLoadFunction",ol.source.ImageWMS.prototype.getImageLoadFunction);goog.exportProperty(ol.source.ImageWMS.prototype,"getUrl",ol.source.ImageWMS.prototype.getUrl);goog.exportProperty(ol.source.ImageWMS.prototype,"setImageLoadFunction",ol.source.ImageWMS.prototype.setImageLoadFunction);goog.exportProperty(ol.source.ImageWMS.prototype,"setUrl",ol.source.ImageWMS.prototype.setUrl);goog.exportProperty(ol.source.ImageWMS.prototype,"updateParams",ol.source.ImageWMS.prototype.updateParams);goog.exportSymbol("ol.source.MapQuest",ol.source.MapQuest,OPENLAYERS);goog.exportProperty(ol.source.MapQuest.prototype,"getLayer",ol.source.MapQuest.prototype.getLayer);goog.exportSymbol("ol.source.OSM",ol.source.OSM,OPENLAYERS);goog.exportSymbol("ol.source.OSM.ATTRIBUTION",ol.source.OSM.ATTRIBUTION,OPENLAYERS);goog.exportSymbol("ol.source.Raster",ol.source.Raster,OPENLAYERS);goog.exportProperty(ol.source.Raster.prototype,"setOperation",ol.source.Raster.prototype.setOperation);goog.exportProperty(ol.source.RasterEvent.prototype,"extent",ol.source.RasterEvent.prototype.extent);goog.exportProperty(ol.source.RasterEvent.prototype,"resolution",ol.source.RasterEvent.prototype.resolution);goog.exportProperty(ol.source.RasterEvent.prototype,"data",ol.source.RasterEvent.prototype.data);goog.exportSymbol("ol.source.Source",ol.source.Source,OPENLAYERS);goog.exportProperty(ol.source.Source.prototype,"getAttributions",ol.source.Source.prototype.getAttributions);goog.exportProperty(ol.source.Source.prototype,"getLogo",ol.source.Source.prototype.getLogo);goog.exportProperty(ol.source.Source.prototype,"getProjection",ol.source.Source.prototype.getProjection);goog.exportProperty(ol.source.Source.prototype,"getState",ol.source.Source.prototype.getState);goog.exportProperty(ol.source.Source.prototype,"setAttributions",ol.source.Source.prototype.setAttributions);goog.exportSymbol("ol.source.Stamen",ol.source.Stamen,OPENLAYERS);goog.exportSymbol("ol.source.TileArcGISRest",ol.source.TileArcGISRest,OPENLAYERS);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getParams",ol.source.TileArcGISRest.prototype.getParams);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getUrls",ol.source.TileArcGISRest.prototype.getUrls);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setUrl",ol.source.TileArcGISRest.prototype.setUrl);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setUrls",ol.source.TileArcGISRest.prototype.setUrls);goog.exportProperty(ol.source.TileArcGISRest.prototype,"updateParams",ol.source.TileArcGISRest.prototype.updateParams);goog.exportSymbol("ol.source.TileDebug",ol.source.TileDebug,OPENLAYERS);goog.exportSymbol("ol.source.TileImage",ol.source.TileImage,OPENLAYERS);goog.exportProperty(ol.source.TileImage.prototype,"getTileLoadFunction",ol.source.TileImage.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileImage.prototype,"getTileUrlFunction",ol.source.TileImage.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileImage.prototype,"setTileLoadFunction",ol.source.TileImage.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileImage.prototype,"setTileUrlFunction",ol.source.TileImage.prototype.setTileUrlFunction);goog.exportSymbol("ol.source.TileJSON",ol.source.TileJSON,OPENLAYERS);goog.exportSymbol("ol.source.Tile",ol.source.Tile,OPENLAYERS);goog.exportProperty(ol.source.Tile.prototype,"getTileGrid",ol.source.Tile.prototype.getTileGrid);goog.exportProperty(ol.source.TileEvent.prototype,"tile",ol.source.TileEvent.prototype.tile);goog.exportSymbol("ol.source.TileUTFGrid",ol.source.TileUTFGrid,OPENLAYERS);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getTemplate",ol.source.TileUTFGrid.prototype.getTemplate);goog.exportProperty(ol.source.TileUTFGrid.prototype,"forDataAtCoordinateAndResolution",ol.source.TileUTFGrid.prototype.forDataAtCoordinateAndResolution);goog.exportSymbol("ol.source.TileVector",ol.source.TileVector,OPENLAYERS);goog.exportProperty(ol.source.TileVector.prototype,"getFeaturesAtCoordinateAndResolution",ol.source.TileVector.prototype.getFeaturesAtCoordinateAndResolution);goog.exportSymbol("ol.source.TileWMS",ol.source.TileWMS,OPENLAYERS);goog.exportProperty(ol.source.TileWMS.prototype,"getGetFeatureInfoUrl",ol.source.TileWMS.prototype.getGetFeatureInfoUrl);goog.exportProperty(ol.source.TileWMS.prototype,"getParams",ol.source.TileWMS.prototype.getParams);goog.exportProperty(ol.source.TileWMS.prototype,"getUrls",ol.source.TileWMS.prototype.getUrls);goog.exportProperty(ol.source.TileWMS.prototype,"setUrl",ol.source.TileWMS.prototype.setUrl);goog.exportProperty(ol.source.TileWMS.prototype,"setUrls",ol.source.TileWMS.prototype.setUrls);goog.exportProperty(ol.source.TileWMS.prototype,"updateParams",ol.source.TileWMS.prototype.updateParams);goog.exportSymbol("ol.source.Vector",ol.source.Vector,OPENLAYERS);goog.exportProperty(ol.source.Vector.prototype,"addFeature",ol.source.Vector.prototype.addFeature);goog.exportProperty(ol.source.Vector.prototype,"addFeatures",ol.source.Vector.prototype.addFeatures);goog.exportProperty(ol.source.Vector.prototype,"clear",ol.source.Vector.prototype.clear);goog.exportProperty(ol.source.Vector.prototype,"forEachFeature",ol.source.Vector.prototype.forEachFeature);goog.exportProperty(ol.source.Vector.prototype,"forEachFeatureInExtent",ol.source.Vector.prototype.forEachFeatureInExtent);goog.exportProperty(ol.source.Vector.prototype,"forEachFeatureIntersectingExtent",ol.source.Vector.prototype.forEachFeatureIntersectingExtent);goog.exportProperty(ol.source.Vector.prototype,"getFeaturesCollection",ol.source.Vector.prototype.getFeaturesCollection);goog.exportProperty(ol.source.Vector.prototype,"getFeatures",ol.source.Vector.prototype.getFeatures);goog.exportProperty(ol.source.Vector.prototype,"getFeaturesAtCoordinate",ol.source.Vector.prototype.getFeaturesAtCoordinate);goog.exportProperty(ol.source.Vector.prototype,"getFeaturesInExtent",ol.source.Vector.prototype.getFeaturesInExtent);goog.exportProperty(ol.source.Vector.prototype,"getClosestFeatureToCoordinate",ol.source.Vector.prototype.getClosestFeatureToCoordinate);goog.exportProperty(ol.source.Vector.prototype,"getExtent",ol.source.Vector.prototype.getExtent);goog.exportProperty(ol.source.Vector.prototype,"getFeatureById",ol.source.Vector.prototype.getFeatureById);goog.exportProperty(ol.source.Vector.prototype,"removeFeature",ol.source.Vector.prototype.removeFeature);goog.exportProperty(ol.source.VectorEvent.prototype,"feature",ol.source.VectorEvent.prototype.feature);goog.exportSymbol("ol.source.WMTS",ol.source.WMTS,OPENLAYERS);goog.exportProperty(ol.source.WMTS.prototype,"getDimensions",ol.source.WMTS.prototype.getDimensions);goog.exportProperty(ol.source.WMTS.prototype,"getFormat",ol.source.WMTS.prototype.getFormat);goog.exportProperty(ol.source.WMTS.prototype,"getLayer",ol.source.WMTS.prototype.getLayer);goog.exportProperty(ol.source.WMTS.prototype,"getMatrixSet",ol.source.WMTS.prototype.getMatrixSet);goog.exportProperty(ol.source.WMTS.prototype,"getRequestEncoding",ol.source.WMTS.prototype.getRequestEncoding);goog.exportProperty(ol.source.WMTS.prototype,"getStyle",ol.source.WMTS.prototype.getStyle);goog.exportProperty(ol.source.WMTS.prototype,"getUrls",ol.source.WMTS.prototype.getUrls);goog.exportProperty(ol.source.WMTS.prototype,"getVersion",ol.source.WMTS.prototype.getVersion);goog.exportProperty(ol.source.WMTS.prototype,"updateDimensions",ol.source.WMTS.prototype.updateDimensions);goog.exportSymbol("ol.source.WMTS.optionsFromCapabilities",ol.source.WMTS.optionsFromCapabilities,OPENLAYERS);goog.exportSymbol("ol.source.XYZ",ol.source.XYZ,OPENLAYERS);goog.exportProperty(ol.source.XYZ.prototype,"getUrls",ol.source.XYZ.prototype.getUrls);goog.exportProperty(ol.source.XYZ.prototype,"setUrl",ol.source.XYZ.prototype.setUrl);goog.exportSymbol("ol.source.Zoomify",ol.source.Zoomify,OPENLAYERS);goog.exportProperty(ol.render.Event.prototype,"vectorContext",ol.render.Event.prototype.vectorContext);goog.exportProperty(ol.render.Event.prototype,"frameState",ol.render.Event.prototype.frameState);goog.exportProperty(ol.render.Event.prototype,"context",ol.render.Event.prototype.context);goog.exportProperty(ol.render.Event.prototype,"glContext",ol.render.Event.prototype.glContext);goog.exportSymbol("ol.render.VectorContext",ol.render.VectorContext,OPENLAYERS);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawAsync",ol.render.webgl.Immediate.prototype.drawAsync);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawCircleGeometry",ol.render.webgl.Immediate.prototype.drawCircleGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawFeature",ol.render.webgl.Immediate.prototype.drawFeature);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawGeometryCollectionGeometry",ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawPointGeometry",ol.render.webgl.Immediate.prototype.drawPointGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawLineStringGeometry",ol.render.webgl.Immediate.prototype.drawLineStringGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawMultiLineStringGeometry",ol.render.webgl.Immediate.prototype.drawMultiLineStringGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawMultiPointGeometry",ol.render.webgl.Immediate.prototype.drawMultiPointGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawMultiPolygonGeometry",ol.render.webgl.Immediate.prototype.drawMultiPolygonGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawPolygonGeometry",ol.render.webgl.Immediate.prototype.drawPolygonGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawText",ol.render.webgl.Immediate.prototype.drawText);goog.exportProperty(ol.render.webgl.Immediate.prototype,"setFillStrokeStyle",ol.render.webgl.Immediate.prototype.setFillStrokeStyle);goog.exportProperty(ol.render.webgl.Immediate.prototype,"setImageStyle",ol.render.webgl.Immediate.prototype.setImageStyle);goog.exportProperty(ol.render.webgl.Immediate.prototype,"setTextStyle",ol.render.webgl.Immediate.prototype.setTextStyle);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawAsync",ol.render.canvas.Immediate.prototype.drawAsync);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawCircleGeometry",ol.render.canvas.Immediate.prototype.drawCircleGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawFeature",ol.render.canvas.Immediate.prototype.drawFeature);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawPointGeometry",ol.render.canvas.Immediate.prototype.drawPointGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawMultiPointGeometry",ol.render.canvas.Immediate.prototype.drawMultiPointGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawLineStringGeometry",ol.render.canvas.Immediate.prototype.drawLineStringGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawMultiLineStringGeometry",ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawPolygonGeometry",ol.render.canvas.Immediate.prototype.drawPolygonGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawMultiPolygonGeometry",ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"setFillStrokeStyle",ol.render.canvas.Immediate.prototype.setFillStrokeStyle);goog.exportProperty(ol.render.canvas.Immediate.prototype,"setImageStyle",ol.render.canvas.Immediate.prototype.setImageStyle);goog.exportProperty(ol.render.canvas.Immediate.prototype,"setTextStyle",ol.render.canvas.Immediate.prototype.setTextStyle);goog.exportSymbol("ol.proj.common.add",ol.proj.common.add,OPENLAYERS);goog.exportSymbol("ol.proj.METERS_PER_UNIT",ol.proj.METERS_PER_UNIT,OPENLAYERS);goog.exportSymbol("ol.proj.Projection",ol.proj.Projection,OPENLAYERS);goog.exportProperty(ol.proj.Projection.prototype,"getCode",ol.proj.Projection.prototype.getCode);goog.exportProperty(ol.proj.Projection.prototype,"getExtent",ol.proj.Projection.prototype.getExtent);goog.exportProperty(ol.proj.Projection.prototype,"getUnits",ol.proj.Projection.prototype.getUnits);goog.exportProperty(ol.proj.Projection.prototype,"getMetersPerUnit",ol.proj.Projection.prototype.getMetersPerUnit);goog.exportProperty(ol.proj.Projection.prototype,"getWorldExtent",ol.proj.Projection.prototype.getWorldExtent);goog.exportProperty(ol.proj.Projection.prototype,"isGlobal",ol.proj.Projection.prototype.isGlobal);goog.exportProperty(ol.proj.Projection.prototype,"setGlobal",ol.proj.Projection.prototype.setGlobal);goog.exportProperty(ol.proj.Projection.prototype,"setExtent",ol.proj.Projection.prototype.setExtent);goog.exportProperty(ol.proj.Projection.prototype,"setWorldExtent",ol.proj.Projection.prototype.setWorldExtent);goog.exportProperty(ol.proj.Projection.prototype,"setGetPointResolution",ol.proj.Projection.prototype.setGetPointResolution);goog.exportProperty(ol.proj.Projection.prototype,"getPointResolution",ol.proj.Projection.prototype.getPointResolution);goog.exportSymbol("ol.proj.addEquivalentProjections",ol.proj.addEquivalentProjections,OPENLAYERS);goog.exportSymbol("ol.proj.addProjection",ol.proj.addProjection,OPENLAYERS);goog.exportSymbol("ol.proj.addCoordinateTransforms",ol.proj.addCoordinateTransforms,OPENLAYERS);goog.exportSymbol("ol.proj.fromLonLat",ol.proj.fromLonLat,OPENLAYERS);goog.exportSymbol("ol.proj.toLonLat",ol.proj.toLonLat,OPENLAYERS);goog.exportSymbol("ol.proj.get",ol.proj.get,OPENLAYERS);goog.exportSymbol("ol.proj.getTransform",ol.proj.getTransform,OPENLAYERS);goog.exportSymbol("ol.proj.transform",ol.proj.transform,OPENLAYERS);goog.exportSymbol("ol.proj.transformExtent",ol.proj.transformExtent,OPENLAYERS);goog.exportSymbol("ol.layer.Heatmap",ol.layer.Heatmap,OPENLAYERS);goog.exportProperty(ol.layer.Heatmap.prototype,"getBlur",ol.layer.Heatmap.prototype.getBlur);goog.exportProperty(ol.layer.Heatmap.prototype,"getGradient",ol.layer.Heatmap.prototype.getGradient);goog.exportProperty(ol.layer.Heatmap.prototype,"getRadius",ol.layer.Heatmap.prototype.getRadius);goog.exportProperty(ol.layer.Heatmap.prototype,"setBlur",ol.layer.Heatmap.prototype.setBlur);goog.exportProperty(ol.layer.Heatmap.prototype,"setGradient",ol.layer.Heatmap.prototype.setGradient);goog.exportProperty(ol.layer.Heatmap.prototype,"setRadius",ol.layer.Heatmap.prototype.setRadius);goog.exportSymbol("ol.layer.Image",ol.layer.Image,OPENLAYERS);goog.exportProperty(ol.layer.Image.prototype,"getSource",ol.layer.Image.prototype.getSource);goog.exportSymbol("ol.layer.Layer",ol.layer.Layer,OPENLAYERS);goog.exportProperty(ol.layer.Layer.prototype,"getSource",ol.layer.Layer.prototype.getSource);goog.exportProperty(ol.layer.Layer.prototype,"setMap",ol.layer.Layer.prototype.setMap)
;goog.exportProperty(ol.layer.Layer.prototype,"setSource",ol.layer.Layer.prototype.setSource);goog.exportSymbol("ol.layer.Base",ol.layer.Base,OPENLAYERS);goog.exportProperty(ol.layer.Base.prototype,"getBrightness",ol.layer.Base.prototype.getBrightness);goog.exportProperty(ol.layer.Base.prototype,"getContrast",ol.layer.Base.prototype.getContrast);goog.exportProperty(ol.layer.Base.prototype,"getHue",ol.layer.Base.prototype.getHue);goog.exportProperty(ol.layer.Base.prototype,"getExtent",ol.layer.Base.prototype.getExtent);goog.exportProperty(ol.layer.Base.prototype,"getMaxResolution",ol.layer.Base.prototype.getMaxResolution);goog.exportProperty(ol.layer.Base.prototype,"getMinResolution",ol.layer.Base.prototype.getMinResolution);goog.exportProperty(ol.layer.Base.prototype,"getOpacity",ol.layer.Base.prototype.getOpacity);goog.exportProperty(ol.layer.Base.prototype,"getSaturation",ol.layer.Base.prototype.getSaturation);goog.exportProperty(ol.layer.Base.prototype,"getVisible",ol.layer.Base.prototype.getVisible);goog.exportProperty(ol.layer.Base.prototype,"getZIndex",ol.layer.Base.prototype.getZIndex);goog.exportProperty(ol.layer.Base.prototype,"setBrightness",ol.layer.Base.prototype.setBrightness);goog.exportProperty(ol.layer.Base.prototype,"setContrast",ol.layer.Base.prototype.setContrast);goog.exportProperty(ol.layer.Base.prototype,"setHue",ol.layer.Base.prototype.setHue);goog.exportProperty(ol.layer.Base.prototype,"setExtent",ol.layer.Base.prototype.setExtent);goog.exportProperty(ol.layer.Base.prototype,"setMaxResolution",ol.layer.Base.prototype.setMaxResolution);goog.exportProperty(ol.layer.Base.prototype,"setMinResolution",ol.layer.Base.prototype.setMinResolution);goog.exportProperty(ol.layer.Base.prototype,"setOpacity",ol.layer.Base.prototype.setOpacity);goog.exportProperty(ol.layer.Base.prototype,"setSaturation",ol.layer.Base.prototype.setSaturation);goog.exportProperty(ol.layer.Base.prototype,"setVisible",ol.layer.Base.prototype.setVisible);goog.exportProperty(ol.layer.Base.prototype,"setZIndex",ol.layer.Base.prototype.setZIndex);goog.exportSymbol("ol.layer.Group",ol.layer.Group,OPENLAYERS);goog.exportProperty(ol.layer.Group.prototype,"getLayers",ol.layer.Group.prototype.getLayers);goog.exportProperty(ol.layer.Group.prototype,"setLayers",ol.layer.Group.prototype.setLayers);goog.exportSymbol("ol.layer.Tile",ol.layer.Tile,OPENLAYERS);goog.exportProperty(ol.layer.Tile.prototype,"getPreload",ol.layer.Tile.prototype.getPreload);goog.exportProperty(ol.layer.Tile.prototype,"getSource",ol.layer.Tile.prototype.getSource);goog.exportProperty(ol.layer.Tile.prototype,"setPreload",ol.layer.Tile.prototype.setPreload);goog.exportProperty(ol.layer.Tile.prototype,"getUseInterimTilesOnError",ol.layer.Tile.prototype.getUseInterimTilesOnError);goog.exportProperty(ol.layer.Tile.prototype,"setUseInterimTilesOnError",ol.layer.Tile.prototype.setUseInterimTilesOnError);goog.exportSymbol("ol.layer.Vector",ol.layer.Vector,OPENLAYERS);goog.exportProperty(ol.layer.Vector.prototype,"getSource",ol.layer.Vector.prototype.getSource);goog.exportProperty(ol.layer.Vector.prototype,"getStyle",ol.layer.Vector.prototype.getStyle);goog.exportProperty(ol.layer.Vector.prototype,"getStyleFunction",ol.layer.Vector.prototype.getStyleFunction);goog.exportProperty(ol.layer.Vector.prototype,"setStyle",ol.layer.Vector.prototype.setStyle);goog.exportSymbol("ol.interaction.DoubleClickZoom",ol.interaction.DoubleClickZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.DoubleClickZoom.handleEvent",ol.interaction.DoubleClickZoom.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.DragAndDrop",ol.interaction.DragAndDrop,OPENLAYERS);goog.exportSymbol("ol.interaction.DragAndDrop.handleEvent",ol.interaction.DragAndDrop.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.DragAndDropEvent.prototype,"features",ol.interaction.DragAndDropEvent.prototype.features);goog.exportProperty(ol.interaction.DragAndDropEvent.prototype,"file",ol.interaction.DragAndDropEvent.prototype.file);goog.exportProperty(ol.interaction.DragAndDropEvent.prototype,"projection",ol.interaction.DragAndDropEvent.prototype.projection);goog.exportProperty(ol.DragBoxEvent.prototype,"coordinate",ol.DragBoxEvent.prototype.coordinate);goog.exportSymbol("ol.interaction.DragBox",ol.interaction.DragBox,OPENLAYERS);goog.exportProperty(ol.interaction.DragBox.prototype,"getGeometry",ol.interaction.DragBox.prototype.getGeometry);goog.exportSymbol("ol.interaction.DragPan",ol.interaction.DragPan,OPENLAYERS);goog.exportSymbol("ol.interaction.DragRotateAndZoom",ol.interaction.DragRotateAndZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.DragRotate",ol.interaction.DragRotate,OPENLAYERS);goog.exportSymbol("ol.interaction.DragZoom",ol.interaction.DragZoom,OPENLAYERS);goog.exportProperty(ol.interaction.DrawEvent.prototype,"feature",ol.interaction.DrawEvent.prototype.feature);goog.exportSymbol("ol.interaction.Draw",ol.interaction.Draw,OPENLAYERS);goog.exportSymbol("ol.interaction.Draw.handleEvent",ol.interaction.Draw.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.Draw.prototype,"removeLastPoint",ol.interaction.Draw.prototype.removeLastPoint);goog.exportProperty(ol.interaction.Draw.prototype,"finishDrawing",ol.interaction.Draw.prototype.finishDrawing);goog.exportProperty(ol.interaction.Draw.prototype,"extend",ol.interaction.Draw.prototype.extend);goog.exportSymbol("ol.interaction.Draw.createRegularPolygon",ol.interaction.Draw.createRegularPolygon,OPENLAYERS);goog.exportSymbol("ol.interaction.Interaction",ol.interaction.Interaction,OPENLAYERS);goog.exportProperty(ol.interaction.Interaction.prototype,"getActive",ol.interaction.Interaction.prototype.getActive);goog.exportProperty(ol.interaction.Interaction.prototype,"setActive",ol.interaction.Interaction.prototype.setActive);goog.exportSymbol("ol.interaction.defaults",ol.interaction.defaults,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardPan",ol.interaction.KeyboardPan,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardPan.handleEvent",ol.interaction.KeyboardPan.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardZoom",ol.interaction.KeyboardZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardZoom.handleEvent",ol.interaction.KeyboardZoom.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.ModifyEvent.prototype,"features",ol.interaction.ModifyEvent.prototype.features);goog.exportProperty(ol.interaction.ModifyEvent.prototype,"mapBrowserPointerEvent",ol.interaction.ModifyEvent.prototype.mapBrowserPointerEvent);goog.exportSymbol("ol.interaction.Modify",ol.interaction.Modify,OPENLAYERS);goog.exportSymbol("ol.interaction.Modify.handleEvent",ol.interaction.Modify.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.MouseWheelZoom",ol.interaction.MouseWheelZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.MouseWheelZoom.handleEvent",ol.interaction.MouseWheelZoom.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.PinchRotate",ol.interaction.PinchRotate,OPENLAYERS);goog.exportSymbol("ol.interaction.PinchZoom",ol.interaction.PinchZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.Pointer",ol.interaction.Pointer,OPENLAYERS);goog.exportSymbol("ol.interaction.Pointer.handleEvent",ol.interaction.Pointer.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.SelectEvent.prototype,"selected",ol.interaction.SelectEvent.prototype.selected);goog.exportProperty(ol.interaction.SelectEvent.prototype,"deselected",ol.interaction.SelectEvent.prototype.deselected);goog.exportProperty(ol.interaction.SelectEvent.prototype,"mapBrowserEvent",ol.interaction.SelectEvent.prototype.mapBrowserEvent);goog.exportSymbol("ol.interaction.Select",ol.interaction.Select,OPENLAYERS);goog.exportProperty(ol.interaction.Select.prototype,"getFeatures",ol.interaction.Select.prototype.getFeatures);goog.exportSymbol("ol.interaction.Select.handleEvent",ol.interaction.Select.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.Select.prototype,"setMap",ol.interaction.Select.prototype.setMap);goog.exportSymbol("ol.interaction.Snap",ol.interaction.Snap,OPENLAYERS);goog.exportProperty(ol.interaction.Snap.prototype,"addFeature",ol.interaction.Snap.prototype.addFeature);goog.exportProperty(ol.interaction.Snap.prototype,"removeFeature",ol.interaction.Snap.prototype.removeFeature);goog.exportSymbol("ol.interaction.Translate",ol.interaction.Translate,OPENLAYERS);goog.exportSymbol("ol.geom.Circle",ol.geom.Circle,OPENLAYERS);goog.exportProperty(ol.geom.Circle.prototype,"clone",ol.geom.Circle.prototype.clone);goog.exportProperty(ol.geom.Circle.prototype,"getCenter",ol.geom.Circle.prototype.getCenter);goog.exportProperty(ol.geom.Circle.prototype,"getRadius",ol.geom.Circle.prototype.getRadius);goog.exportProperty(ol.geom.Circle.prototype,"getType",ol.geom.Circle.prototype.getType);goog.exportProperty(ol.geom.Circle.prototype,"intersectsExtent",ol.geom.Circle.prototype.intersectsExtent);goog.exportProperty(ol.geom.Circle.prototype,"setCenter",ol.geom.Circle.prototype.setCenter);goog.exportProperty(ol.geom.Circle.prototype,"setCenterAndRadius",ol.geom.Circle.prototype.setCenterAndRadius);goog.exportProperty(ol.geom.Circle.prototype,"setRadius",ol.geom.Circle.prototype.setRadius);goog.exportProperty(ol.geom.Circle.prototype,"transform",ol.geom.Circle.prototype.transform);goog.exportSymbol("ol.geom.Geometry",ol.geom.Geometry,OPENLAYERS);goog.exportProperty(ol.geom.Geometry.prototype,"getClosestPoint",ol.geom.Geometry.prototype.getClosestPoint);goog.exportProperty(ol.geom.Geometry.prototype,"getExtent",ol.geom.Geometry.prototype.getExtent);goog.exportProperty(ol.geom.Geometry.prototype,"transform",ol.geom.Geometry.prototype.transform);goog.exportSymbol("ol.geom.GeometryCollection",ol.geom.GeometryCollection,OPENLAYERS);goog.exportProperty(ol.geom.GeometryCollection.prototype,"clone",ol.geom.GeometryCollection.prototype.clone);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getGeometries",ol.geom.GeometryCollection.prototype.getGeometries);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getType",ol.geom.GeometryCollection.prototype.getType);goog.exportProperty(ol.geom.GeometryCollection.prototype,"intersectsExtent",ol.geom.GeometryCollection.prototype.intersectsExtent);goog.exportProperty(ol.geom.GeometryCollection.prototype,"setGeometries",ol.geom.GeometryCollection.prototype.setGeometries);goog.exportProperty(ol.geom.GeometryCollection.prototype,"applyTransform",ol.geom.GeometryCollection.prototype.applyTransform);goog.exportProperty(ol.geom.GeometryCollection.prototype,"translate",ol.geom.GeometryCollection.prototype.translate);goog.exportSymbol("ol.geom.LinearRing",ol.geom.LinearRing,OPENLAYERS);goog.exportProperty(ol.geom.LinearRing.prototype,"clone",ol.geom.LinearRing.prototype.clone);goog.exportProperty(ol.geom.LinearRing.prototype,"getArea",ol.geom.LinearRing.prototype.getArea);goog.exportProperty(ol.geom.LinearRing.prototype,"getCoordinates",ol.geom.LinearRing.prototype.getCoordinates);goog.exportProperty(ol.geom.LinearRing.prototype,"getType",ol.geom.LinearRing.prototype.getType);goog.exportProperty(ol.geom.LinearRing.prototype,"setCoordinates",ol.geom.LinearRing.prototype.setCoordinates);goog.exportSymbol("ol.geom.LineString",ol.geom.LineString,OPENLAYERS);goog.exportProperty(ol.geom.LineString.prototype,"appendCoordinate",ol.geom.LineString.prototype.appendCoordinate);goog.exportProperty(ol.geom.LineString.prototype,"clone",ol.geom.LineString.prototype.clone);goog.exportProperty(ol.geom.LineString.prototype,"forEachSegment",ol.geom.LineString.prototype.forEachSegment);goog.exportProperty(ol.geom.LineString.prototype,"getCoordinateAtM",ol.geom.LineString.prototype.getCoordinateAtM);goog.exportProperty(ol.geom.LineString.prototype,"getCoordinates",ol.geom.LineString.prototype.getCoordinates);goog.exportProperty(ol.geom.LineString.prototype,"getLength",ol.geom.LineString.prototype.getLength);goog.exportProperty(ol.geom.LineString.prototype,"getType",ol.geom.LineString.prototype.getType);goog.exportProperty(ol.geom.LineString.prototype,"intersectsExtent",ol.geom.LineString.prototype.intersectsExtent);goog.exportProperty(ol.geom.LineString.prototype,"setCoordinates",ol.geom.LineString.prototype.setCoordinates);goog.exportSymbol("ol.geom.MultiLineString",ol.geom.MultiLineString,OPENLAYERS);goog.exportProperty(ol.geom.MultiLineString.prototype,"appendLineString",ol.geom.MultiLineString.prototype.appendLineString);goog.exportProperty(ol.geom.MultiLineString.prototype,"clone",ol.geom.MultiLineString.prototype.clone);goog.exportProperty(ol.geom.MultiLineString.prototype,"getCoordinateAtM",ol.geom.MultiLineString.prototype.getCoordinateAtM);goog.exportProperty(ol.geom.MultiLineString.prototype,"getCoordinates",ol.geom.MultiLineString.prototype.getCoordinates);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLineString",ol.geom.MultiLineString.prototype.getLineString);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLineStrings",ol.geom.MultiLineString.prototype.getLineStrings);goog.exportProperty(ol.geom.MultiLineString.prototype,"getType",ol.geom.MultiLineString.prototype.getType);goog.exportProperty(ol.geom.MultiLineString.prototype,"intersectsExtent",ol.geom.MultiLineString.prototype.intersectsExtent);goog.exportProperty(ol.geom.MultiLineString.prototype,"setCoordinates",ol.geom.MultiLineString.prototype.setCoordinates);goog.exportSymbol("ol.geom.MultiPoint",ol.geom.MultiPoint,OPENLAYERS);goog.exportProperty(ol.geom.MultiPoint.prototype,"appendPoint",ol.geom.MultiPoint.prototype.appendPoint);goog.exportProperty(ol.geom.MultiPoint.prototype,"clone",ol.geom.MultiPoint.prototype.clone);goog.exportProperty(ol.geom.MultiPoint.prototype,"getCoordinates",ol.geom.MultiPoint.prototype.getCoordinates);goog.exportProperty(ol.geom.MultiPoint.prototype,"getPoint",ol.geom.MultiPoint.prototype.getPoint);goog.exportProperty(ol.geom.MultiPoint.prototype,"getPoints",ol.geom.MultiPoint.prototype.getPoints);goog.exportProperty(ol.geom.MultiPoint.prototype,"getType",ol.geom.MultiPoint.prototype.getType);goog.exportProperty(ol.geom.MultiPoint.prototype,"intersectsExtent",ol.geom.MultiPoint.prototype.intersectsExtent);goog.exportProperty(ol.geom.MultiPoint.prototype,"setCoordinates",ol.geom.MultiPoint.prototype.setCoordinates);goog.exportSymbol("ol.geom.MultiPolygon",ol.geom.MultiPolygon,OPENLAYERS);goog.exportProperty(ol.geom.MultiPolygon.prototype,"appendPolygon",ol.geom.MultiPolygon.prototype.appendPolygon);goog.exportProperty(ol.geom.MultiPolygon.prototype,"clone",ol.geom.MultiPolygon.prototype.clone);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getArea",ol.geom.MultiPolygon.prototype.getArea);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getCoordinates",ol.geom.MultiPolygon.prototype.getCoordinates);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getInteriorPoints",ol.geom.MultiPolygon.prototype.getInteriorPoints);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getPolygon",ol.geom.MultiPolygon.prototype.getPolygon);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getPolygons",ol.geom.MultiPolygon.prototype.getPolygons);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getType",ol.geom.MultiPolygon.prototype.getType);goog.exportProperty(ol.geom.MultiPolygon.prototype,"intersectsExtent",ol.geom.MultiPolygon.prototype.intersectsExtent);goog.exportProperty(ol.geom.MultiPolygon.prototype,"setCoordinates",ol.geom.MultiPolygon.prototype.setCoordinates);goog.exportSymbol("ol.geom.Point",ol.geom.Point,OPENLAYERS);goog.exportProperty(ol.geom.Point.prototype,"clone",ol.geom.Point.prototype.clone);goog.exportProperty(ol.geom.Point.prototype,"getCoordinates",ol.geom.Point.prototype.getCoordinates);goog.exportProperty(ol.geom.Point.prototype,"getType",ol.geom.Point.prototype.getType);goog.exportProperty(ol.geom.Point.prototype,"intersectsExtent",ol.geom.Point.prototype.intersectsExtent);goog.exportProperty(ol.geom.Point.prototype,"setCoordinates",ol.geom.Point.prototype.setCoordinates);goog.exportSymbol("ol.geom.Polygon",ol.geom.Polygon,OPENLAYERS);goog.exportProperty(ol.geom.Polygon.prototype,"appendLinearRing",ol.geom.Polygon.prototype.appendLinearRing);goog.exportProperty(ol.geom.Polygon.prototype,"clone",ol.geom.Polygon.prototype.clone);goog.exportProperty(ol.geom.Polygon.prototype,"getArea",ol.geom.Polygon.prototype.getArea);goog.exportProperty(ol.geom.Polygon.prototype,"getCoordinates",ol.geom.Polygon.prototype.getCoordinates);goog.exportProperty(ol.geom.Polygon.prototype,"getInteriorPoint",ol.geom.Polygon.prototype.getInteriorPoint);goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRingCount",ol.geom.Polygon.prototype.getLinearRingCount);goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRing",ol.geom.Polygon.prototype.getLinearRing);goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRings",ol.geom.Polygon.prototype.getLinearRings);goog.exportProperty(ol.geom.Polygon.prototype,"getType",ol.geom.Polygon.prototype.getType);goog.exportProperty(ol.geom.Polygon.prototype,"intersectsExtent",ol.geom.Polygon.prototype.intersectsExtent);goog.exportProperty(ol.geom.Polygon.prototype,"setCoordinates",ol.geom.Polygon.prototype.setCoordinates);goog.exportSymbol("ol.geom.Polygon.circular",ol.geom.Polygon.circular,OPENLAYERS);goog.exportSymbol("ol.geom.Polygon.fromExtent",ol.geom.Polygon.fromExtent,OPENLAYERS);goog.exportSymbol("ol.geom.Polygon.fromCircle",ol.geom.Polygon.fromCircle,OPENLAYERS);goog.exportSymbol("ol.geom.SimpleGeometry",ol.geom.SimpleGeometry,OPENLAYERS);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getFirstCoordinate",ol.geom.SimpleGeometry.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getLastCoordinate",ol.geom.SimpleGeometry.prototype.getLastCoordinate);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getLayout",ol.geom.SimpleGeometry.prototype.getLayout);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"applyTransform",ol.geom.SimpleGeometry.prototype.applyTransform);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"translate",ol.geom.SimpleGeometry.prototype.translate);goog.exportSymbol("ol.format.EsriJSON",ol.format.EsriJSON,OPENLAYERS);goog.exportProperty(ol.format.EsriJSON.prototype,"readFeature",ol.format.EsriJSON.prototype.readFeature);goog.exportProperty(ol.format.EsriJSON.prototype,"readFeatures",ol.format.EsriJSON.prototype.readFeatures);goog.exportProperty(ol.format.EsriJSON.prototype,"readGeometry",ol.format.EsriJSON.prototype.readGeometry);goog.exportProperty(ol.format.EsriJSON.prototype,"readProjection",ol.format.EsriJSON.prototype.readProjection);goog.exportProperty(ol.format.EsriJSON.prototype,"writeGeometry",ol.format.EsriJSON.prototype.writeGeometry);goog.exportProperty(ol.format.EsriJSON.prototype,"writeGeometryObject",ol.format.EsriJSON.prototype.writeGeometryObject);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeature",ol.format.EsriJSON.prototype.writeFeature);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeatureObject",ol.format.EsriJSON.prototype.writeFeatureObject);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeatures",ol.format.EsriJSON.prototype.writeFeatures);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeaturesObject",ol.format.EsriJSON.prototype.writeFeaturesObject);goog.exportSymbol("ol.format.Feature",ol.format.Feature,OPENLAYERS);goog.exportSymbol("ol.format.GeoJSON",ol.format.GeoJSON,OPENLAYERS);goog.exportProperty(ol.format.GeoJSON.prototype,"readFeature",ol.format.GeoJSON.prototype.readFeature);goog.exportProperty(ol.format.GeoJSON.prototype,"readFeatures",ol.format.GeoJSON.prototype.readFeatures);goog.exportProperty(ol.format.GeoJSON.prototype,"readGeometry",ol.format.GeoJSON.prototype.readGeometry);goog.exportProperty(ol.format.GeoJSON.prototype,"readProjection",ol.format.GeoJSON.prototype.readProjection);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeature",ol.format.GeoJSON.prototype.writeFeature);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeatureObject",ol.format.GeoJSON.prototype.writeFeatureObject);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeatures",ol.format.GeoJSON.prototype.writeFeatures);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeaturesObject",ol.format.GeoJSON.prototype.writeFeaturesObject);goog.exportProperty(ol.format.GeoJSON.prototype,"writeGeometry",ol.format.GeoJSON.prototype.writeGeometry);goog.exportProperty(ol.format.GeoJSON.prototype,"writeGeometryObject",ol.format.GeoJSON.prototype.writeGeometryObject);goog.exportSymbol("ol.format.GPX",ol.format.GPX,OPENLAYERS);goog.exportProperty(ol.format.GPX.prototype,"readFeature",ol.format.GPX.prototype.readFeature);goog.exportProperty(ol.format.GPX.prototype,"readFeatures",ol.format.GPX.prototype.readFeatures);goog.exportProperty(ol.format.GPX.prototype,"readProjection",ol.format.GPX.prototype.readProjection);goog.exportProperty(ol.format.GPX.prototype,"writeFeatures",ol.format.GPX.prototype.writeFeatures);goog.exportProperty(ol.format.GPX.prototype,"writeFeaturesNode",ol.format.GPX.prototype.writeFeaturesNode);goog.exportSymbol("ol.format.IGC",ol.format.IGC,OPENLAYERS);goog.exportProperty(ol.format.IGC.prototype,"readFeature",ol.format.IGC.prototype.readFeature);goog.exportProperty(ol.format.IGC.prototype,"readFeatures",ol.format.IGC.prototype.readFeatures);goog.exportProperty(ol.format.IGC.prototype,"readProjection",ol.format.IGC.prototype.readProjection);goog.exportSymbol("ol.format.KML",ol.format.KML,OPENLAYERS);goog.exportProperty(ol.format.KML.prototype,"readFeature",ol.format.KML.prototype.readFeature);goog.exportProperty(ol.format.KML.prototype,"readFeatures",ol.format.KML.prototype.readFeatures);goog.exportProperty(ol.format.KML.prototype,"readName",ol.format.KML.prototype.readName);goog.exportProperty(ol.format.KML.prototype,"readNetworkLinks",ol.format.KML.prototype.readNetworkLinks);goog.exportProperty(ol.format.KML.prototype,"readProjection",ol.format.KML.prototype.readProjection);goog.exportProperty(ol.format.KML.prototype,"writeFeatures",ol.format.KML.prototype.writeFeatures);goog.exportProperty(ol.format.KML.prototype,"writeFeaturesNode",ol.format.KML.prototype.writeFeaturesNode);goog.exportSymbol("ol.format.OSMXML",ol.format.OSMXML,OPENLAYERS);goog.exportProperty(ol.format.OSMXML.prototype,"readFeatures",ol.format.OSMXML.prototype.readFeatures);goog.exportProperty(ol.format.OSMXML.prototype,"readProjection",ol.format.OSMXML.prototype.readProjection);goog.exportSymbol("ol.format.Polyline",ol.format.Polyline,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.encodeDeltas",ol.format.Polyline.encodeDeltas,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.decodeDeltas",ol.format.Polyline.decodeDeltas,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.encodeFloats",ol.format.Polyline.encodeFloats,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.decodeFloats",ol.format.Polyline.decodeFloats,OPENLAYERS);goog.exportProperty(ol.format.Polyline.prototype,"readFeature",ol.format.Polyline.prototype.readFeature);goog.exportProperty(ol.format.Polyline.prototype,"readFeatures",ol.format.Polyline.prototype.readFeatures);goog.exportProperty(ol.format.Polyline.prototype,"readGeometry",ol.format.Polyline.prototype.readGeometry);goog.exportProperty(ol.format.Polyline.prototype,"readProjection",ol.format.Polyline.prototype.readProjection);goog.exportProperty(ol.format.Polyline.prototype,"writeGeometry",ol.format.Polyline.prototype.writeGeometry);goog.exportSymbol("ol.format.TopoJSON",ol.format.TopoJSON,OPENLAYERS);goog.exportProperty(ol.format.TopoJSON.prototype,"readFeatures",ol.format.TopoJSON.prototype.readFeatures);goog.exportProperty(ol.format.TopoJSON.prototype,"readProjection",ol.format.TopoJSON.prototype.readProjection);goog.exportSymbol("ol.format.WFS",ol.format.WFS,OPENLAYERS);goog.exportProperty(ol.format.WFS.prototype,"readFeatures",ol.format.WFS.prototype.readFeatures);goog.exportProperty(ol.format.WFS.prototype,"readTransactionResponse",ol.format.WFS.prototype.readTransactionResponse);goog.exportProperty(ol.format.WFS.prototype,"readFeatureCollectionMetadata",ol.format.WFS.prototype.readFeatureCollectionMetadata);goog.exportProperty(ol.format.WFS.prototype,"writeGetFeature",ol.format.WFS.prototype.writeGetFeature);goog.exportProperty(ol.format.WFS.prototype,"writeTransaction",ol.format.WFS.prototype.writeTransaction);goog.exportProperty(ol.format.WFS.prototype,"readProjection",ol.format.WFS.prototype.readProjection);goog.exportSymbol("ol.format.WKT",ol.format.WKT,OPENLAYERS);goog.exportProperty(ol.format.WKT.prototype,"readFeature",ol.format.WKT.prototype.readFeature);goog.exportProperty(ol.format.WKT.prototype,"readFeatures",ol.format.WKT.prototype.readFeatures);goog.exportProperty(ol.format.WKT.prototype,"readGeometry",ol.format.WKT.prototype.readGeometry);goog.exportProperty(ol.format.WKT.prototype,"writeFeature",ol.format.WKT.prototype.writeFeature);goog.exportProperty(ol.format.WKT.prototype,"writeFeatures",ol.format.WKT.prototype.writeFeatures);goog.exportProperty(ol.format.WKT.prototype,"writeGeometry",ol.format.WKT.prototype.writeGeometry);goog.exportSymbol("ol.format.WMSCapabilities",ol.format.WMSCapabilities,OPENLAYERS);goog.exportProperty(ol.format.WMSCapabilities.prototype,"read",ol.format.WMSCapabilities.prototype.read);goog.exportSymbol("ol.format.WMSGetFeatureInfo",ol.format.WMSGetFeatureInfo,OPENLAYERS);goog.exportProperty(ol.format.WMSGetFeatureInfo.prototype,"readFeatures",ol.format.WMSGetFeatureInfo.prototype.readFeatures);goog.exportSymbol("ol.format.WMTSCapabilities",ol.format.WMTSCapabilities,OPENLAYERS);goog.exportProperty(ol.format.WMTSCapabilities.prototype,"read",ol.format.WMTSCapabilities.prototype.read);goog.exportSymbol("ol.format.GML2",ol.format.GML2,OPENLAYERS);goog.exportSymbol("ol.format.GML3",ol.format.GML3,OPENLAYERS);goog.exportProperty(ol.format.GML3.prototype,"writeGeometryNode",ol.format.GML3.prototype.writeGeometryNode);goog.exportProperty(ol.format.GML3.prototype,"writeFeatures",ol.format.GML3.prototype.writeFeatures);goog.exportProperty(ol.format.GML3.prototype,"writeFeaturesNode",ol.format.GML3.prototype.writeFeaturesNode);goog.exportSymbol("ol.format.GML",ol.format.GML,OPENLAYERS);goog.exportProperty(ol.format.GML.prototype,"writeFeatures",ol.format.GML.prototype.writeFeatures);goog.exportProperty(ol.format.GML.prototype,"writeFeaturesNode",ol.format.GML.prototype.writeFeaturesNode);goog.exportProperty(ol.format.GMLBase.prototype,"readFeatures",ol.format.GMLBase.prototype.readFeatures);goog.exportSymbol("ol.events.condition.altKeyOnly",ol.events.condition.altKeyOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.altShiftKeysOnly",ol.events.condition.altShiftKeysOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.always",ol.events.condition.always,OPENLAYERS);goog.exportSymbol("ol.events.condition.click",ol.events.condition.click,OPENLAYERS);goog.exportSymbol("ol.events.condition.never",ol.events.condition.never,OPENLAYERS);goog.exportSymbol("ol.events.condition.pointerMove",ol.events.condition.pointerMove,OPENLAYERS);goog.exportSymbol("ol.events.condition.singleClick",ol.events.condition.singleClick,OPENLAYERS);goog.exportSymbol("ol.events.condition.doubleClick",ol.events.condition.doubleClick,OPENLAYERS);goog.exportSymbol("ol.events.condition.noModifierKeys",ol.events.condition.noModifierKeys,OPENLAYERS);goog.exportSymbol("ol.events.condition.platformModifierKeyOnly",ol.events.condition.platformModifierKeyOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.shiftKeyOnly",ol.events.condition.shiftKeyOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.targetNotEditable",ol.events.condition.targetNotEditable,OPENLAYERS);goog.exportSymbol("ol.events.condition.mouseOnly",ol.events.condition.mouseOnly,OPENLAYERS);goog.exportSymbol("ol.control.Attribution",ol.control.Attribution,OPENLAYERS);goog.exportSymbol("ol.control.Attribution.render",ol.control.Attribution.render,OPENLAYERS);goog.exportProperty(ol.control.Attribution.prototype,"getCollapsible",ol.control.Attribution.prototype.getCollapsible);goog.exportProperty(ol.control.Attribution.prototype,"setCollapsible",ol.control.Attribution.prototype.setCollapsible);goog.exportProperty(ol.control.Attribution.prototype,"setCollapsed",ol.control.Attribution.prototype.setCollapsed);goog.exportProperty(ol.control.Attribution.prototype,"getCollapsed",ol.control.Attribution.prototype.getCollapsed);goog.exportSymbol("ol.control.Control",ol.control.Control,OPENLAYERS);goog.exportProperty(ol.control.Control.prototype,"getMap",ol.control.Control.prototype.getMap);goog.exportProperty(ol.control.Control.prototype,"setMap",ol.control.Control.prototype.setMap);goog.exportProperty(ol.control.Control.prototype,"setTarget",ol.control.Control.prototype.setTarget);goog.exportSymbol("ol.control.defaults",ol.control.defaults,OPENLAYERS);goog.exportSymbol("ol.control.FullScreen",ol.control.FullScreen,OPENLAYERS);goog.exportSymbol("ol.control.MousePosition",ol.control.MousePosition,OPENLAYERS);goog.exportSymbol("ol.control.MousePosition.render",ol.control.MousePosition.render,OPENLAYERS);goog.exportProperty(ol.control.MousePosition.prototype,"getCoordinateFormat",ol.control.MousePosition.prototype.getCoordinateFormat);goog.exportProperty(ol.control.MousePosition.prototype,"getProjection",ol.control.MousePosition.prototype.getProjection);goog.exportProperty(ol.control.MousePosition.prototype,"setCoordinateFormat",ol.control.MousePosition.prototype.setCoordinateFormat);goog.exportProperty(ol.control.MousePosition.prototype,"setProjection",ol.control.MousePosition.prototype.setProjection);goog.exportSymbol("ol.control.OverviewMap",ol.control.OverviewMap,OPENLAYERS);goog.exportSymbol("ol.control.OverviewMap.render",ol.control.OverviewMap.render,OPENLAYERS);goog.exportProperty(ol.control.OverviewMap.prototype,"getCollapsible",ol.control.OverviewMap.prototype.getCollapsible);goog.exportProperty(ol.control.OverviewMap.prototype,"setCollapsible",ol.control.OverviewMap.prototype.setCollapsible);goog.exportProperty(ol.control.OverviewMap.prototype,"setCollapsed",ol.control.OverviewMap.prototype.setCollapsed);goog.exportProperty(ol.control.OverviewMap.prototype,"getCollapsed",ol.control.OverviewMap.prototype.getCollapsed);goog.exportSymbol("ol.control.Rotate",ol.control.Rotate,OPENLAYERS);goog.exportSymbol("ol.control.Rotate.render",ol.control.Rotate.render,OPENLAYERS);goog.exportSymbol("ol.control.ScaleLine",ol.control.ScaleLine,OPENLAYERS);goog.exportProperty(ol.control.ScaleLine.prototype,"getUnits",ol.control.ScaleLine.prototype.getUnits);goog.exportSymbol("ol.control.ScaleLine.render",ol.control.ScaleLine.render,OPENLAYERS);goog.exportProperty(ol.control.ScaleLine.prototype,"setUnits",ol.control.ScaleLine.prototype.setUnits);goog.exportSymbol("ol.control.Zoom",ol.control.Zoom,OPENLAYERS);goog.exportSymbol("ol.control.ZoomSlider",ol.control.ZoomSlider,OPENLAYERS);goog.exportSymbol("ol.control.ZoomSlider.render",ol.control.ZoomSlider.render,OPENLAYERS);goog.exportSymbol("ol.control.ZoomToExtent",ol.control.ZoomToExtent,OPENLAYERS);goog.exportSymbol("ol.color.asArray",ol.color.asArray,OPENLAYERS);goog.exportSymbol("ol.color.asString",ol.color.asString,OPENLAYERS);goog.exportProperty(ol.Object.prototype,"changed",ol.Object.prototype.changed);goog.exportProperty(ol.Object.prototype,"getRevision",ol.Object.prototype.getRevision);goog.exportProperty(ol.Object.prototype,"on",ol.Object.prototype.on);goog.exportProperty(ol.Object.prototype,"once",ol.Object.prototype.once);goog.exportProperty(ol.Object.prototype,"un",ol.Object.prototype.un);goog.exportProperty(ol.Object.prototype,"unByKey",ol.Object.prototype.unByKey);goog.exportProperty(ol.Collection.prototype,"get",ol.Collection.prototype.get);goog.exportProperty(ol.Collection.prototype,"getKeys",ol.Collection.prototype.getKeys);goog.exportProperty(ol.Collection.prototype,"getProperties",ol.Collection.prototype.getProperties);goog.exportProperty(ol.Collection.prototype,"set",ol.Collection.prototype.set)
;goog.exportProperty(ol.Collection.prototype,"setProperties",ol.Collection.prototype.setProperties);goog.exportProperty(ol.Collection.prototype,"unset",ol.Collection.prototype.unset);goog.exportProperty(ol.Collection.prototype,"changed",ol.Collection.prototype.changed);goog.exportProperty(ol.Collection.prototype,"getRevision",ol.Collection.prototype.getRevision);goog.exportProperty(ol.Collection.prototype,"on",ol.Collection.prototype.on);goog.exportProperty(ol.Collection.prototype,"once",ol.Collection.prototype.once);goog.exportProperty(ol.Collection.prototype,"un",ol.Collection.prototype.un);goog.exportProperty(ol.Collection.prototype,"unByKey",ol.Collection.prototype.unByKey);goog.exportProperty(ol.DeviceOrientation.prototype,"get",ol.DeviceOrientation.prototype.get);goog.exportProperty(ol.DeviceOrientation.prototype,"getKeys",ol.DeviceOrientation.prototype.getKeys);goog.exportProperty(ol.DeviceOrientation.prototype,"getProperties",ol.DeviceOrientation.prototype.getProperties);goog.exportProperty(ol.DeviceOrientation.prototype,"set",ol.DeviceOrientation.prototype.set);goog.exportProperty(ol.DeviceOrientation.prototype,"setProperties",ol.DeviceOrientation.prototype.setProperties);goog.exportProperty(ol.DeviceOrientation.prototype,"unset",ol.DeviceOrientation.prototype.unset);goog.exportProperty(ol.DeviceOrientation.prototype,"changed",ol.DeviceOrientation.prototype.changed);goog.exportProperty(ol.DeviceOrientation.prototype,"getRevision",ol.DeviceOrientation.prototype.getRevision);goog.exportProperty(ol.DeviceOrientation.prototype,"on",ol.DeviceOrientation.prototype.on);goog.exportProperty(ol.DeviceOrientation.prototype,"once",ol.DeviceOrientation.prototype.once);goog.exportProperty(ol.DeviceOrientation.prototype,"un",ol.DeviceOrientation.prototype.un);goog.exportProperty(ol.DeviceOrientation.prototype,"unByKey",ol.DeviceOrientation.prototype.unByKey);goog.exportProperty(ol.Feature.prototype,"get",ol.Feature.prototype.get);goog.exportProperty(ol.Feature.prototype,"getKeys",ol.Feature.prototype.getKeys);goog.exportProperty(ol.Feature.prototype,"getProperties",ol.Feature.prototype.getProperties);goog.exportProperty(ol.Feature.prototype,"set",ol.Feature.prototype.set);goog.exportProperty(ol.Feature.prototype,"setProperties",ol.Feature.prototype.setProperties);goog.exportProperty(ol.Feature.prototype,"unset",ol.Feature.prototype.unset);goog.exportProperty(ol.Feature.prototype,"changed",ol.Feature.prototype.changed);goog.exportProperty(ol.Feature.prototype,"getRevision",ol.Feature.prototype.getRevision);goog.exportProperty(ol.Feature.prototype,"on",ol.Feature.prototype.on);goog.exportProperty(ol.Feature.prototype,"once",ol.Feature.prototype.once);goog.exportProperty(ol.Feature.prototype,"un",ol.Feature.prototype.un);goog.exportProperty(ol.Feature.prototype,"unByKey",ol.Feature.prototype.unByKey);goog.exportProperty(ol.Geolocation.prototype,"get",ol.Geolocation.prototype.get);goog.exportProperty(ol.Geolocation.prototype,"getKeys",ol.Geolocation.prototype.getKeys);goog.exportProperty(ol.Geolocation.prototype,"getProperties",ol.Geolocation.prototype.getProperties);goog.exportProperty(ol.Geolocation.prototype,"set",ol.Geolocation.prototype.set);goog.exportProperty(ol.Geolocation.prototype,"setProperties",ol.Geolocation.prototype.setProperties);goog.exportProperty(ol.Geolocation.prototype,"unset",ol.Geolocation.prototype.unset);goog.exportProperty(ol.Geolocation.prototype,"changed",ol.Geolocation.prototype.changed);goog.exportProperty(ol.Geolocation.prototype,"getRevision",ol.Geolocation.prototype.getRevision);goog.exportProperty(ol.Geolocation.prototype,"on",ol.Geolocation.prototype.on);goog.exportProperty(ol.Geolocation.prototype,"once",ol.Geolocation.prototype.once);goog.exportProperty(ol.Geolocation.prototype,"un",ol.Geolocation.prototype.un);goog.exportProperty(ol.Geolocation.prototype,"unByKey",ol.Geolocation.prototype.unByKey);goog.exportProperty(ol.ImageTile.prototype,"getTileCoord",ol.ImageTile.prototype.getTileCoord);goog.exportProperty(ol.Map.prototype,"get",ol.Map.prototype.get);goog.exportProperty(ol.Map.prototype,"getKeys",ol.Map.prototype.getKeys);goog.exportProperty(ol.Map.prototype,"getProperties",ol.Map.prototype.getProperties);goog.exportProperty(ol.Map.prototype,"set",ol.Map.prototype.set);goog.exportProperty(ol.Map.prototype,"setProperties",ol.Map.prototype.setProperties);goog.exportProperty(ol.Map.prototype,"unset",ol.Map.prototype.unset);goog.exportProperty(ol.Map.prototype,"changed",ol.Map.prototype.changed);goog.exportProperty(ol.Map.prototype,"getRevision",ol.Map.prototype.getRevision);goog.exportProperty(ol.Map.prototype,"on",ol.Map.prototype.on);goog.exportProperty(ol.Map.prototype,"once",ol.Map.prototype.once);goog.exportProperty(ol.Map.prototype,"un",ol.Map.prototype.un);goog.exportProperty(ol.Map.prototype,"unByKey",ol.Map.prototype.unByKey);goog.exportProperty(ol.MapBrowserEvent.prototype,"map",ol.MapBrowserEvent.prototype.map);goog.exportProperty(ol.MapBrowserEvent.prototype,"frameState",ol.MapBrowserEvent.prototype.frameState);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"originalEvent",ol.MapBrowserPointerEvent.prototype.originalEvent);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"pixel",ol.MapBrowserPointerEvent.prototype.pixel);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"coordinate",ol.MapBrowserPointerEvent.prototype.coordinate);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"dragging",ol.MapBrowserPointerEvent.prototype.dragging);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"preventDefault",ol.MapBrowserPointerEvent.prototype.preventDefault);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"stopPropagation",ol.MapBrowserPointerEvent.prototype.stopPropagation);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"map",ol.MapBrowserPointerEvent.prototype.map);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"frameState",ol.MapBrowserPointerEvent.prototype.frameState);goog.exportProperty(ol.Overlay.prototype,"get",ol.Overlay.prototype.get);goog.exportProperty(ol.Overlay.prototype,"getKeys",ol.Overlay.prototype.getKeys);goog.exportProperty(ol.Overlay.prototype,"getProperties",ol.Overlay.prototype.getProperties);goog.exportProperty(ol.Overlay.prototype,"set",ol.Overlay.prototype.set);goog.exportProperty(ol.Overlay.prototype,"setProperties",ol.Overlay.prototype.setProperties);goog.exportProperty(ol.Overlay.prototype,"unset",ol.Overlay.prototype.unset);goog.exportProperty(ol.Overlay.prototype,"changed",ol.Overlay.prototype.changed);goog.exportProperty(ol.Overlay.prototype,"getRevision",ol.Overlay.prototype.getRevision);goog.exportProperty(ol.Overlay.prototype,"on",ol.Overlay.prototype.on);goog.exportProperty(ol.Overlay.prototype,"once",ol.Overlay.prototype.once);goog.exportProperty(ol.Overlay.prototype,"un",ol.Overlay.prototype.un);goog.exportProperty(ol.Overlay.prototype,"unByKey",ol.Overlay.prototype.unByKey);goog.exportProperty(ol.View.prototype,"get",ol.View.prototype.get);goog.exportProperty(ol.View.prototype,"getKeys",ol.View.prototype.getKeys);goog.exportProperty(ol.View.prototype,"getProperties",ol.View.prototype.getProperties);goog.exportProperty(ol.View.prototype,"set",ol.View.prototype.set);goog.exportProperty(ol.View.prototype,"setProperties",ol.View.prototype.setProperties);goog.exportProperty(ol.View.prototype,"unset",ol.View.prototype.unset);goog.exportProperty(ol.View.prototype,"changed",ol.View.prototype.changed);goog.exportProperty(ol.View.prototype,"getRevision",ol.View.prototype.getRevision);goog.exportProperty(ol.View.prototype,"on",ol.View.prototype.on);goog.exportProperty(ol.View.prototype,"once",ol.View.prototype.once);goog.exportProperty(ol.View.prototype,"un",ol.View.prototype.un);goog.exportProperty(ol.View.prototype,"unByKey",ol.View.prototype.unByKey);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMaxZoom",ol.tilegrid.WMTS.prototype.getMaxZoom);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMinZoom",ol.tilegrid.WMTS.prototype.getMinZoom);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getOrigin",ol.tilegrid.WMTS.prototype.getOrigin);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getResolution",ol.tilegrid.WMTS.prototype.getResolution);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getResolutions",ol.tilegrid.WMTS.prototype.getResolutions);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileCoordForCoordAndResolution",ol.tilegrid.WMTS.prototype.getTileCoordForCoordAndResolution);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileCoordForCoordAndZ",ol.tilegrid.WMTS.prototype.getTileCoordForCoordAndZ);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileSize",ol.tilegrid.WMTS.prototype.getTileSize);goog.exportProperty(ol.style.Circle.prototype,"getOpacity",ol.style.Circle.prototype.getOpacity);goog.exportProperty(ol.style.Circle.prototype,"getRotateWithView",ol.style.Circle.prototype.getRotateWithView);goog.exportProperty(ol.style.Circle.prototype,"getRotation",ol.style.Circle.prototype.getRotation);goog.exportProperty(ol.style.Circle.prototype,"getScale",ol.style.Circle.prototype.getScale);goog.exportProperty(ol.style.Circle.prototype,"getSnapToPixel",ol.style.Circle.prototype.getSnapToPixel);goog.exportProperty(ol.style.Circle.prototype,"setOpacity",ol.style.Circle.prototype.setOpacity);goog.exportProperty(ol.style.Circle.prototype,"setRotation",ol.style.Circle.prototype.setRotation);goog.exportProperty(ol.style.Circle.prototype,"setScale",ol.style.Circle.prototype.setScale);goog.exportProperty(ol.style.Icon.prototype,"getOpacity",ol.style.Icon.prototype.getOpacity);goog.exportProperty(ol.style.Icon.prototype,"getRotateWithView",ol.style.Icon.prototype.getRotateWithView);goog.exportProperty(ol.style.Icon.prototype,"getRotation",ol.style.Icon.prototype.getRotation);goog.exportProperty(ol.style.Icon.prototype,"getScale",ol.style.Icon.prototype.getScale);goog.exportProperty(ol.style.Icon.prototype,"getSnapToPixel",ol.style.Icon.prototype.getSnapToPixel);goog.exportProperty(ol.style.Icon.prototype,"setOpacity",ol.style.Icon.prototype.setOpacity);goog.exportProperty(ol.style.Icon.prototype,"setRotation",ol.style.Icon.prototype.setRotation);goog.exportProperty(ol.style.Icon.prototype,"setScale",ol.style.Icon.prototype.setScale);goog.exportProperty(ol.style.RegularShape.prototype,"getOpacity",ol.style.RegularShape.prototype.getOpacity);goog.exportProperty(ol.style.RegularShape.prototype,"getRotateWithView",ol.style.RegularShape.prototype.getRotateWithView);goog.exportProperty(ol.style.RegularShape.prototype,"getRotation",ol.style.RegularShape.prototype.getRotation);goog.exportProperty(ol.style.RegularShape.prototype,"getScale",ol.style.RegularShape.prototype.getScale);goog.exportProperty(ol.style.RegularShape.prototype,"getSnapToPixel",ol.style.RegularShape.prototype.getSnapToPixel);goog.exportProperty(ol.style.RegularShape.prototype,"setOpacity",ol.style.RegularShape.prototype.setOpacity);goog.exportProperty(ol.style.RegularShape.prototype,"setRotation",ol.style.RegularShape.prototype.setRotation);goog.exportProperty(ol.style.RegularShape.prototype,"setScale",ol.style.RegularShape.prototype.setScale);goog.exportProperty(ol.source.Source.prototype,"get",ol.source.Source.prototype.get);goog.exportProperty(ol.source.Source.prototype,"getKeys",ol.source.Source.prototype.getKeys);goog.exportProperty(ol.source.Source.prototype,"getProperties",ol.source.Source.prototype.getProperties);goog.exportProperty(ol.source.Source.prototype,"set",ol.source.Source.prototype.set);goog.exportProperty(ol.source.Source.prototype,"setProperties",ol.source.Source.prototype.setProperties);goog.exportProperty(ol.source.Source.prototype,"unset",ol.source.Source.prototype.unset);goog.exportProperty(ol.source.Source.prototype,"changed",ol.source.Source.prototype.changed);goog.exportProperty(ol.source.Source.prototype,"getRevision",ol.source.Source.prototype.getRevision);goog.exportProperty(ol.source.Source.prototype,"on",ol.source.Source.prototype.on);goog.exportProperty(ol.source.Source.prototype,"once",ol.source.Source.prototype.once);goog.exportProperty(ol.source.Source.prototype,"un",ol.source.Source.prototype.un);goog.exportProperty(ol.source.Source.prototype,"unByKey",ol.source.Source.prototype.unByKey);goog.exportProperty(ol.source.Tile.prototype,"getAttributions",ol.source.Tile.prototype.getAttributions);goog.exportProperty(ol.source.Tile.prototype,"getLogo",ol.source.Tile.prototype.getLogo);goog.exportProperty(ol.source.Tile.prototype,"getProjection",ol.source.Tile.prototype.getProjection);goog.exportProperty(ol.source.Tile.prototype,"getState",ol.source.Tile.prototype.getState);goog.exportProperty(ol.source.Tile.prototype,"setAttributions",ol.source.Tile.prototype.setAttributions);goog.exportProperty(ol.source.Tile.prototype,"get",ol.source.Tile.prototype.get);goog.exportProperty(ol.source.Tile.prototype,"getKeys",ol.source.Tile.prototype.getKeys);goog.exportProperty(ol.source.Tile.prototype,"getProperties",ol.source.Tile.prototype.getProperties);goog.exportProperty(ol.source.Tile.prototype,"set",ol.source.Tile.prototype.set);goog.exportProperty(ol.source.Tile.prototype,"setProperties",ol.source.Tile.prototype.setProperties);goog.exportProperty(ol.source.Tile.prototype,"unset",ol.source.Tile.prototype.unset);goog.exportProperty(ol.source.Tile.prototype,"changed",ol.source.Tile.prototype.changed);goog.exportProperty(ol.source.Tile.prototype,"getRevision",ol.source.Tile.prototype.getRevision);goog.exportProperty(ol.source.Tile.prototype,"on",ol.source.Tile.prototype.on);goog.exportProperty(ol.source.Tile.prototype,"once",ol.source.Tile.prototype.once);goog.exportProperty(ol.source.Tile.prototype,"un",ol.source.Tile.prototype.un);goog.exportProperty(ol.source.Tile.prototype,"unByKey",ol.source.Tile.prototype.unByKey);goog.exportProperty(ol.source.TileImage.prototype,"getTileGrid",ol.source.TileImage.prototype.getTileGrid);goog.exportProperty(ol.source.TileImage.prototype,"getAttributions",ol.source.TileImage.prototype.getAttributions);goog.exportProperty(ol.source.TileImage.prototype,"getLogo",ol.source.TileImage.prototype.getLogo);goog.exportProperty(ol.source.TileImage.prototype,"getProjection",ol.source.TileImage.prototype.getProjection);goog.exportProperty(ol.source.TileImage.prototype,"getState",ol.source.TileImage.prototype.getState);goog.exportProperty(ol.source.TileImage.prototype,"setAttributions",ol.source.TileImage.prototype.setAttributions);goog.exportProperty(ol.source.TileImage.prototype,"get",ol.source.TileImage.prototype.get);goog.exportProperty(ol.source.TileImage.prototype,"getKeys",ol.source.TileImage.prototype.getKeys);goog.exportProperty(ol.source.TileImage.prototype,"getProperties",ol.source.TileImage.prototype.getProperties);goog.exportProperty(ol.source.TileImage.prototype,"set",ol.source.TileImage.prototype.set);goog.exportProperty(ol.source.TileImage.prototype,"setProperties",ol.source.TileImage.prototype.setProperties);goog.exportProperty(ol.source.TileImage.prototype,"unset",ol.source.TileImage.prototype.unset);goog.exportProperty(ol.source.TileImage.prototype,"changed",ol.source.TileImage.prototype.changed);goog.exportProperty(ol.source.TileImage.prototype,"getRevision",ol.source.TileImage.prototype.getRevision);goog.exportProperty(ol.source.TileImage.prototype,"on",ol.source.TileImage.prototype.on);goog.exportProperty(ol.source.TileImage.prototype,"once",ol.source.TileImage.prototype.once);goog.exportProperty(ol.source.TileImage.prototype,"un",ol.source.TileImage.prototype.un);goog.exportProperty(ol.source.TileImage.prototype,"unByKey",ol.source.TileImage.prototype.unByKey);goog.exportProperty(ol.source.BingMaps.prototype,"getTileLoadFunction",ol.source.BingMaps.prototype.getTileLoadFunction);goog.exportProperty(ol.source.BingMaps.prototype,"getTileUrlFunction",ol.source.BingMaps.prototype.getTileUrlFunction);goog.exportProperty(ol.source.BingMaps.prototype,"setTileLoadFunction",ol.source.BingMaps.prototype.setTileLoadFunction);goog.exportProperty(ol.source.BingMaps.prototype,"setTileUrlFunction",ol.source.BingMaps.prototype.setTileUrlFunction);goog.exportProperty(ol.source.BingMaps.prototype,"getTileGrid",ol.source.BingMaps.prototype.getTileGrid);goog.exportProperty(ol.source.BingMaps.prototype,"getAttributions",ol.source.BingMaps.prototype.getAttributions);goog.exportProperty(ol.source.BingMaps.prototype,"getLogo",ol.source.BingMaps.prototype.getLogo);goog.exportProperty(ol.source.BingMaps.prototype,"getProjection",ol.source.BingMaps.prototype.getProjection);goog.exportProperty(ol.source.BingMaps.prototype,"getState",ol.source.BingMaps.prototype.getState);goog.exportProperty(ol.source.BingMaps.prototype,"setAttributions",ol.source.BingMaps.prototype.setAttributions);goog.exportProperty(ol.source.BingMaps.prototype,"get",ol.source.BingMaps.prototype.get);goog.exportProperty(ol.source.BingMaps.prototype,"getKeys",ol.source.BingMaps.prototype.getKeys);goog.exportProperty(ol.source.BingMaps.prototype,"getProperties",ol.source.BingMaps.prototype.getProperties);goog.exportProperty(ol.source.BingMaps.prototype,"set",ol.source.BingMaps.prototype.set);goog.exportProperty(ol.source.BingMaps.prototype,"setProperties",ol.source.BingMaps.prototype.setProperties);goog.exportProperty(ol.source.BingMaps.prototype,"unset",ol.source.BingMaps.prototype.unset);goog.exportProperty(ol.source.BingMaps.prototype,"changed",ol.source.BingMaps.prototype.changed);goog.exportProperty(ol.source.BingMaps.prototype,"getRevision",ol.source.BingMaps.prototype.getRevision);goog.exportProperty(ol.source.BingMaps.prototype,"on",ol.source.BingMaps.prototype.on);goog.exportProperty(ol.source.BingMaps.prototype,"once",ol.source.BingMaps.prototype.once);goog.exportProperty(ol.source.BingMaps.prototype,"un",ol.source.BingMaps.prototype.un);goog.exportProperty(ol.source.BingMaps.prototype,"unByKey",ol.source.BingMaps.prototype.unByKey);goog.exportProperty(ol.source.Vector.prototype,"getAttributions",ol.source.Vector.prototype.getAttributions);goog.exportProperty(ol.source.Vector.prototype,"getLogo",ol.source.Vector.prototype.getLogo);goog.exportProperty(ol.source.Vector.prototype,"getProjection",ol.source.Vector.prototype.getProjection);goog.exportProperty(ol.source.Vector.prototype,"getState",ol.source.Vector.prototype.getState);goog.exportProperty(ol.source.Vector.prototype,"setAttributions",ol.source.Vector.prototype.setAttributions);goog.exportProperty(ol.source.Vector.prototype,"get",ol.source.Vector.prototype.get);goog.exportProperty(ol.source.Vector.prototype,"getKeys",ol.source.Vector.prototype.getKeys);goog.exportProperty(ol.source.Vector.prototype,"getProperties",ol.source.Vector.prototype.getProperties);goog.exportProperty(ol.source.Vector.prototype,"set",ol.source.Vector.prototype.set);goog.exportProperty(ol.source.Vector.prototype,"setProperties",ol.source.Vector.prototype.setProperties);goog.exportProperty(ol.source.Vector.prototype,"unset",ol.source.Vector.prototype.unset);goog.exportProperty(ol.source.Vector.prototype,"changed",ol.source.Vector.prototype.changed);goog.exportProperty(ol.source.Vector.prototype,"getRevision",ol.source.Vector.prototype.getRevision);goog.exportProperty(ol.source.Vector.prototype,"on",ol.source.Vector.prototype.on);goog.exportProperty(ol.source.Vector.prototype,"once",ol.source.Vector.prototype.once);goog.exportProperty(ol.source.Vector.prototype,"un",ol.source.Vector.prototype.un);goog.exportProperty(ol.source.Vector.prototype,"unByKey",ol.source.Vector.prototype.unByKey);goog.exportProperty(ol.source.Cluster.prototype,"addFeature",ol.source.Cluster.prototype.addFeature);goog.exportProperty(ol.source.Cluster.prototype,"addFeatures",ol.source.Cluster.prototype.addFeatures);goog.exportProperty(ol.source.Cluster.prototype,"clear",ol.source.Cluster.prototype.clear);goog.exportProperty(ol.source.Cluster.prototype,"forEachFeature",ol.source.Cluster.prototype.forEachFeature);goog.exportProperty(ol.source.Cluster.prototype,"forEachFeatureInExtent",ol.source.Cluster.prototype.forEachFeatureInExtent);goog.exportProperty(ol.source.Cluster.prototype,"forEachFeatureIntersectingExtent",ol.source.Cluster.prototype.forEachFeatureIntersectingExtent);goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesCollection",ol.source.Cluster.prototype.getFeaturesCollection);goog.exportProperty(ol.source.Cluster.prototype,"getFeatures",ol.source.Cluster.prototype.getFeatures);goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesAtCoordinate",ol.source.Cluster.prototype.getFeaturesAtCoordinate);goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesInExtent",ol.source.Cluster.prototype.getFeaturesInExtent);goog.exportProperty(ol.source.Cluster.prototype,"getClosestFeatureToCoordinate",ol.source.Cluster.prototype.getClosestFeatureToCoordinate);goog.exportProperty(ol.source.Cluster.prototype,"getExtent",ol.source.Cluster.prototype.getExtent);goog.exportProperty(ol.source.Cluster.prototype,"getFeatureById",ol.source.Cluster.prototype.getFeatureById);goog.exportProperty(ol.source.Cluster.prototype,"removeFeature",ol.source.Cluster.prototype.removeFeature);goog.exportProperty(ol.source.Cluster.prototype,"getAttributions",ol.source.Cluster.prototype.getAttributions);goog.exportProperty(ol.source.Cluster.prototype,"getLogo",ol.source.Cluster.prototype.getLogo);goog.exportProperty(ol.source.Cluster.prototype,"getProjection",ol.source.Cluster.prototype.getProjection);goog.exportProperty(ol.source.Cluster.prototype,"getState",ol.source.Cluster.prototype.getState);goog.exportProperty(ol.source.Cluster.prototype,"setAttributions",ol.source.Cluster.prototype.setAttributions);goog.exportProperty(ol.source.Cluster.prototype,"get",ol.source.Cluster.prototype.get);goog.exportProperty(ol.source.Cluster.prototype,"getKeys",ol.source.Cluster.prototype.getKeys);goog.exportProperty(ol.source.Cluster.prototype,"getProperties",ol.source.Cluster.prototype.getProperties);goog.exportProperty(ol.source.Cluster.prototype,"set",ol.source.Cluster.prototype.set);goog.exportProperty(ol.source.Cluster.prototype,"setProperties",ol.source.Cluster.prototype.setProperties);goog.exportProperty(ol.source.Cluster.prototype,"unset",ol.source.Cluster.prototype.unset);goog.exportProperty(ol.source.Cluster.prototype,"changed",ol.source.Cluster.prototype.changed);goog.exportProperty(ol.source.Cluster.prototype,"getRevision",ol.source.Cluster.prototype.getRevision);goog.exportProperty(ol.source.Cluster.prototype,"on",ol.source.Cluster.prototype.on);goog.exportProperty(ol.source.Cluster.prototype,"once",ol.source.Cluster.prototype.once);goog.exportProperty(ol.source.Cluster.prototype,"un",ol.source.Cluster.prototype.un);goog.exportProperty(ol.source.Cluster.prototype,"unByKey",ol.source.Cluster.prototype.unByKey);goog.exportProperty(ol.source.Image.prototype,"getAttributions",ol.source.Image.prototype.getAttributions);goog.exportProperty(ol.source.Image.prototype,"getLogo",ol.source.Image.prototype.getLogo);goog.exportProperty(ol.source.Image.prototype,"getProjection",ol.source.Image.prototype.getProjection);goog.exportProperty(ol.source.Image.prototype,"getState",ol.source.Image.prototype.getState);goog.exportProperty(ol.source.Image.prototype,"setAttributions",ol.source.Image.prototype.setAttributions);goog.exportProperty(ol.source.Image.prototype,"get",ol.source.Image.prototype.get);goog.exportProperty(ol.source.Image.prototype,"getKeys",ol.source.Image.prototype.getKeys);goog.exportProperty(ol.source.Image.prototype,"getProperties",ol.source.Image.prototype.getProperties);goog.exportProperty(ol.source.Image.prototype,"set",ol.source.Image.prototype.set);goog.exportProperty(ol.source.Image.prototype,"setProperties",ol.source.Image.prototype.setProperties);goog.exportProperty(ol.source.Image.prototype,"unset",ol.source.Image.prototype.unset);goog.exportProperty(ol.source.Image.prototype,"changed",ol.source.Image.prototype.changed);goog.exportProperty(ol.source.Image.prototype,"getRevision",ol.source.Image.prototype.getRevision);goog.exportProperty(ol.source.Image.prototype,"on",ol.source.Image.prototype.on);goog.exportProperty(ol.source.Image.prototype,"once",ol.source.Image.prototype.once);goog.exportProperty(ol.source.Image.prototype,"un",ol.source.Image.prototype.un);goog.exportProperty(ol.source.Image.prototype,"unByKey",ol.source.Image.prototype.unByKey);goog.exportProperty(ol.source.ImageCanvas.prototype,"getAttributions",ol.source.ImageCanvas.prototype.getAttributions);goog.exportProperty(ol.source.ImageCanvas.prototype,"getLogo",ol.source.ImageCanvas.prototype.getLogo);goog.exportProperty(ol.source.ImageCanvas.prototype,"getProjection",ol.source.ImageCanvas.prototype.getProjection);goog.exportProperty(ol.source.ImageCanvas.prototype,"getState",ol.source.ImageCanvas.prototype.getState);goog.exportProperty(ol.source.ImageCanvas.prototype,"setAttributions",ol.source.ImageCanvas.prototype.setAttributions);goog.exportProperty(ol.source.ImageCanvas.prototype,"get",ol.source.ImageCanvas.prototype.get);goog.exportProperty(ol.source.ImageCanvas.prototype,"getKeys",ol.source.ImageCanvas.prototype.getKeys);goog.exportProperty(ol.source.ImageCanvas.prototype,"getProperties",ol.source.ImageCanvas.prototype.getProperties);goog.exportProperty(ol.source.ImageCanvas.prototype,"set",ol.source.ImageCanvas.prototype.set);goog.exportProperty(ol.source.ImageCanvas.prototype,"setProperties",ol.source.ImageCanvas.prototype.setProperties);goog.exportProperty(ol.source.ImageCanvas.prototype,"unset",ol.source.ImageCanvas.prototype.unset);goog.exportProperty(ol.source.ImageCanvas.prototype,"changed",ol.source.ImageCanvas.prototype.changed);goog.exportProperty(ol.source.ImageCanvas.prototype,"getRevision",ol.source.ImageCanvas.prototype.getRevision);goog.exportProperty(ol.source.ImageCanvas.prototype,"on",ol.source.ImageCanvas.prototype.on);goog.exportProperty(ol.source.ImageCanvas.prototype,"once",ol.source.ImageCanvas.prototype.once);goog.exportProperty(ol.source.ImageCanvas.prototype,"un",ol.source.ImageCanvas.prototype.un);goog.exportProperty(ol.source.ImageCanvas.prototype,"unByKey",ol.source.ImageCanvas.prototype.unByKey);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getAttributions",ol.source.ImageMapGuide.prototype.getAttributions);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getLogo",ol.source.ImageMapGuide.prototype.getLogo);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getProjection",ol.source.ImageMapGuide.prototype.getProjection);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getState",ol.source.ImageMapGuide.prototype.getState);goog.exportProperty(ol.source.ImageMapGuide.prototype,"setAttributions",ol.source.ImageMapGuide.prototype.setAttributions);goog.exportProperty(ol.source.ImageMapGuide.prototype,"get",ol.source.ImageMapGuide.prototype.get);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getKeys",ol.source.ImageMapGuide.prototype.getKeys);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getProperties",ol.source.ImageMapGuide.prototype.getProperties);goog.exportProperty(ol.source.ImageMapGuide.prototype,"set",ol.source.ImageMapGuide.prototype.set);goog.exportProperty(ol.source.ImageMapGuide.prototype,"setProperties",ol.source.ImageMapGuide.prototype.setProperties);goog.exportProperty(ol.source.ImageMapGuide.prototype,"unset",ol.source.ImageMapGuide.prototype.unset);goog.exportProperty(ol.source.ImageMapGuide.prototype,"changed",ol.source.ImageMapGuide.prototype.changed);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getRevision",ol.source.ImageMapGuide.prototype.getRevision);goog.exportProperty(ol.source.ImageMapGuide.prototype,"on",ol.source.ImageMapGuide.prototype.on);goog.exportProperty(ol.source.ImageMapGuide.prototype,"once",ol.source.ImageMapGuide.prototype.once);goog.exportProperty(ol.source.ImageMapGuide.prototype,"un",ol.source.ImageMapGuide.prototype.un);goog.exportProperty(ol.source.ImageMapGuide.prototype,"unByKey",ol.source.ImageMapGuide.prototype.unByKey);goog.exportProperty(ol.source.ImageStatic.prototype,"getAttributions",ol.source.ImageStatic.prototype.getAttributions);goog.exportProperty(ol.source.ImageStatic.prototype,"getLogo",ol.source.ImageStatic.prototype.getLogo);goog.exportProperty(ol.source.ImageStatic.prototype,"getProjection",ol.source.ImageStatic.prototype.getProjection);goog.exportProperty(ol.source.ImageStatic.prototype,"getState",ol.source.ImageStatic.prototype.getState);goog.exportProperty(ol.source.ImageStatic.prototype,"setAttributions",ol.source.ImageStatic.prototype.setAttributions);goog.exportProperty(ol.source.ImageStatic.prototype,"get",ol.source.ImageStatic.prototype.get);goog.exportProperty(ol.source.ImageStatic.prototype,"getKeys",ol.source.ImageStatic.prototype.getKeys);goog.exportProperty(ol.source.ImageStatic.prototype,"getProperties",ol.source.ImageStatic.prototype.getProperties);goog.exportProperty(ol.source.ImageStatic.prototype,"set",ol.source.ImageStatic.prototype.set);goog.exportProperty(ol.source.ImageStatic.prototype,"setProperties",ol.source.ImageStatic.prototype.setProperties);goog.exportProperty(ol.source.ImageStatic.prototype,"unset",ol.source.ImageStatic.prototype.unset);goog.exportProperty(ol.source.ImageStatic.prototype,"changed",ol.source.ImageStatic.prototype.changed);goog.exportProperty(ol.source.ImageStatic.prototype,"getRevision",ol.source.ImageStatic.prototype.getRevision);goog.exportProperty(ol.source.ImageStatic.prototype,"on",ol.source.ImageStatic.prototype.on);goog.exportProperty(ol.source.ImageStatic.prototype,"once",ol.source.ImageStatic.prototype.once);goog.exportProperty(ol.source.ImageStatic.prototype,"un",ol.source.ImageStatic.prototype.un);goog.exportProperty(ol.source.ImageStatic.prototype,"unByKey",ol.source.ImageStatic.prototype.unByKey);goog.exportProperty(ol.source.ImageVector.prototype,"getAttributions",ol.source.ImageVector.prototype.getAttributions);goog.exportProperty(ol.source.ImageVector.prototype,"getLogo",ol.source.ImageVector.prototype.getLogo);goog.exportProperty(ol.source.ImageVector.prototype,"getProjection",ol.source.ImageVector.prototype.getProjection);goog.exportProperty(ol.source.ImageVector.prototype,"getState",ol.source.ImageVector.prototype.getState);goog.exportProperty(ol.source.ImageVector.prototype,"setAttributions",ol.source.ImageVector.prototype.setAttributions);goog.exportProperty(ol.source.ImageVector.prototype,"get",ol.source.ImageVector.prototype.get);goog.exportProperty(ol.source.ImageVector.prototype,"getKeys",ol.source.ImageVector.prototype.getKeys);goog.exportProperty(ol.source.ImageVector.prototype,"getProperties",ol.source.ImageVector.prototype.getProperties);goog.exportProperty(ol.source.ImageVector.prototype,"set",ol.source.ImageVector.prototype.set);goog.exportProperty(ol.source.ImageVector.prototype,"setProperties",ol.source.ImageVector.prototype.setProperties);goog.exportProperty(ol.source.ImageVector.prototype,"unset",ol.source.ImageVector.prototype.unset);goog.exportProperty(ol.source.ImageVector.prototype,"changed",ol.source.ImageVector.prototype.changed);goog.exportProperty(ol.source.ImageVector.prototype,"getRevision",ol.source.ImageVector.prototype.getRevision);goog.exportProperty(ol.source.ImageVector.prototype,"on",ol.source.ImageVector.prototype.on);goog.exportProperty(ol.source.ImageVector.prototype,"once",ol.source.ImageVector.prototype.once);goog.exportProperty(ol.source.ImageVector.prototype,"un",ol.source.ImageVector.prototype.un);goog.exportProperty(ol.source.ImageVector.prototype,"unByKey",ol.source.ImageVector.prototype.unByKey);goog.exportProperty(ol.source.ImageWMS.prototype,"getAttributions",ol.source.ImageWMS.prototype.getAttributions);goog.exportProperty(ol.source.ImageWMS.prototype,"getLogo",ol.source.ImageWMS.prototype.getLogo);goog.exportProperty(ol.source.ImageWMS.prototype,"getProjection",ol.source.ImageWMS.prototype.getProjection);goog.exportProperty(ol.source.ImageWMS.prototype,"getState",ol.source.ImageWMS.prototype.getState)
;goog.exportProperty(ol.source.ImageWMS.prototype,"setAttributions",ol.source.ImageWMS.prototype.setAttributions);goog.exportProperty(ol.source.ImageWMS.prototype,"get",ol.source.ImageWMS.prototype.get);goog.exportProperty(ol.source.ImageWMS.prototype,"getKeys",ol.source.ImageWMS.prototype.getKeys);goog.exportProperty(ol.source.ImageWMS.prototype,"getProperties",ol.source.ImageWMS.prototype.getProperties);goog.exportProperty(ol.source.ImageWMS.prototype,"set",ol.source.ImageWMS.prototype.set);goog.exportProperty(ol.source.ImageWMS.prototype,"setProperties",ol.source.ImageWMS.prototype.setProperties);goog.exportProperty(ol.source.ImageWMS.prototype,"unset",ol.source.ImageWMS.prototype.unset);goog.exportProperty(ol.source.ImageWMS.prototype,"changed",ol.source.ImageWMS.prototype.changed);goog.exportProperty(ol.source.ImageWMS.prototype,"getRevision",ol.source.ImageWMS.prototype.getRevision);goog.exportProperty(ol.source.ImageWMS.prototype,"on",ol.source.ImageWMS.prototype.on);goog.exportProperty(ol.source.ImageWMS.prototype,"once",ol.source.ImageWMS.prototype.once);goog.exportProperty(ol.source.ImageWMS.prototype,"un",ol.source.ImageWMS.prototype.un);goog.exportProperty(ol.source.ImageWMS.prototype,"unByKey",ol.source.ImageWMS.prototype.unByKey);goog.exportProperty(ol.source.XYZ.prototype,"getTileLoadFunction",ol.source.XYZ.prototype.getTileLoadFunction);goog.exportProperty(ol.source.XYZ.prototype,"getTileUrlFunction",ol.source.XYZ.prototype.getTileUrlFunction);goog.exportProperty(ol.source.XYZ.prototype,"setTileLoadFunction",ol.source.XYZ.prototype.setTileLoadFunction);goog.exportProperty(ol.source.XYZ.prototype,"setTileUrlFunction",ol.source.XYZ.prototype.setTileUrlFunction);goog.exportProperty(ol.source.XYZ.prototype,"getTileGrid",ol.source.XYZ.prototype.getTileGrid);goog.exportProperty(ol.source.XYZ.prototype,"getAttributions",ol.source.XYZ.prototype.getAttributions);goog.exportProperty(ol.source.XYZ.prototype,"getLogo",ol.source.XYZ.prototype.getLogo);goog.exportProperty(ol.source.XYZ.prototype,"getProjection",ol.source.XYZ.prototype.getProjection);goog.exportProperty(ol.source.XYZ.prototype,"getState",ol.source.XYZ.prototype.getState);goog.exportProperty(ol.source.XYZ.prototype,"setAttributions",ol.source.XYZ.prototype.setAttributions);goog.exportProperty(ol.source.XYZ.prototype,"get",ol.source.XYZ.prototype.get);goog.exportProperty(ol.source.XYZ.prototype,"getKeys",ol.source.XYZ.prototype.getKeys);goog.exportProperty(ol.source.XYZ.prototype,"getProperties",ol.source.XYZ.prototype.getProperties);goog.exportProperty(ol.source.XYZ.prototype,"set",ol.source.XYZ.prototype.set);goog.exportProperty(ol.source.XYZ.prototype,"setProperties",ol.source.XYZ.prototype.setProperties);goog.exportProperty(ol.source.XYZ.prototype,"unset",ol.source.XYZ.prototype.unset);goog.exportProperty(ol.source.XYZ.prototype,"changed",ol.source.XYZ.prototype.changed);goog.exportProperty(ol.source.XYZ.prototype,"getRevision",ol.source.XYZ.prototype.getRevision);goog.exportProperty(ol.source.XYZ.prototype,"on",ol.source.XYZ.prototype.on);goog.exportProperty(ol.source.XYZ.prototype,"once",ol.source.XYZ.prototype.once);goog.exportProperty(ol.source.XYZ.prototype,"un",ol.source.XYZ.prototype.un);goog.exportProperty(ol.source.XYZ.prototype,"unByKey",ol.source.XYZ.prototype.unByKey);goog.exportProperty(ol.source.MapQuest.prototype,"getUrls",ol.source.MapQuest.prototype.getUrls);goog.exportProperty(ol.source.MapQuest.prototype,"setUrl",ol.source.MapQuest.prototype.setUrl);goog.exportProperty(ol.source.MapQuest.prototype,"getTileLoadFunction",ol.source.MapQuest.prototype.getTileLoadFunction);goog.exportProperty(ol.source.MapQuest.prototype,"getTileUrlFunction",ol.source.MapQuest.prototype.getTileUrlFunction);goog.exportProperty(ol.source.MapQuest.prototype,"setTileLoadFunction",ol.source.MapQuest.prototype.setTileLoadFunction);goog.exportProperty(ol.source.MapQuest.prototype,"setTileUrlFunction",ol.source.MapQuest.prototype.setTileUrlFunction);goog.exportProperty(ol.source.MapQuest.prototype,"getTileGrid",ol.source.MapQuest.prototype.getTileGrid);goog.exportProperty(ol.source.MapQuest.prototype,"getAttributions",ol.source.MapQuest.prototype.getAttributions);goog.exportProperty(ol.source.MapQuest.prototype,"getLogo",ol.source.MapQuest.prototype.getLogo);goog.exportProperty(ol.source.MapQuest.prototype,"getProjection",ol.source.MapQuest.prototype.getProjection);goog.exportProperty(ol.source.MapQuest.prototype,"getState",ol.source.MapQuest.prototype.getState);goog.exportProperty(ol.source.MapQuest.prototype,"setAttributions",ol.source.MapQuest.prototype.setAttributions);goog.exportProperty(ol.source.MapQuest.prototype,"get",ol.source.MapQuest.prototype.get);goog.exportProperty(ol.source.MapQuest.prototype,"getKeys",ol.source.MapQuest.prototype.getKeys);goog.exportProperty(ol.source.MapQuest.prototype,"getProperties",ol.source.MapQuest.prototype.getProperties);goog.exportProperty(ol.source.MapQuest.prototype,"set",ol.source.MapQuest.prototype.set);goog.exportProperty(ol.source.MapQuest.prototype,"setProperties",ol.source.MapQuest.prototype.setProperties);goog.exportProperty(ol.source.MapQuest.prototype,"unset",ol.source.MapQuest.prototype.unset);goog.exportProperty(ol.source.MapQuest.prototype,"changed",ol.source.MapQuest.prototype.changed);goog.exportProperty(ol.source.MapQuest.prototype,"getRevision",ol.source.MapQuest.prototype.getRevision);goog.exportProperty(ol.source.MapQuest.prototype,"on",ol.source.MapQuest.prototype.on);goog.exportProperty(ol.source.MapQuest.prototype,"once",ol.source.MapQuest.prototype.once);goog.exportProperty(ol.source.MapQuest.prototype,"un",ol.source.MapQuest.prototype.un);goog.exportProperty(ol.source.MapQuest.prototype,"unByKey",ol.source.MapQuest.prototype.unByKey);goog.exportProperty(ol.source.OSM.prototype,"getUrls",ol.source.OSM.prototype.getUrls);goog.exportProperty(ol.source.OSM.prototype,"setUrl",ol.source.OSM.prototype.setUrl);goog.exportProperty(ol.source.OSM.prototype,"getTileLoadFunction",ol.source.OSM.prototype.getTileLoadFunction);goog.exportProperty(ol.source.OSM.prototype,"getTileUrlFunction",ol.source.OSM.prototype.getTileUrlFunction);goog.exportProperty(ol.source.OSM.prototype,"setTileLoadFunction",ol.source.OSM.prototype.setTileLoadFunction);goog.exportProperty(ol.source.OSM.prototype,"setTileUrlFunction",ol.source.OSM.prototype.setTileUrlFunction);goog.exportProperty(ol.source.OSM.prototype,"getTileGrid",ol.source.OSM.prototype.getTileGrid);goog.exportProperty(ol.source.OSM.prototype,"getAttributions",ol.source.OSM.prototype.getAttributions);goog.exportProperty(ol.source.OSM.prototype,"getLogo",ol.source.OSM.prototype.getLogo);goog.exportProperty(ol.source.OSM.prototype,"getProjection",ol.source.OSM.prototype.getProjection);goog.exportProperty(ol.source.OSM.prototype,"getState",ol.source.OSM.prototype.getState);goog.exportProperty(ol.source.OSM.prototype,"setAttributions",ol.source.OSM.prototype.setAttributions);goog.exportProperty(ol.source.OSM.prototype,"get",ol.source.OSM.prototype.get);goog.exportProperty(ol.source.OSM.prototype,"getKeys",ol.source.OSM.prototype.getKeys);goog.exportProperty(ol.source.OSM.prototype,"getProperties",ol.source.OSM.prototype.getProperties);goog.exportProperty(ol.source.OSM.prototype,"set",ol.source.OSM.prototype.set);goog.exportProperty(ol.source.OSM.prototype,"setProperties",ol.source.OSM.prototype.setProperties);goog.exportProperty(ol.source.OSM.prototype,"unset",ol.source.OSM.prototype.unset);goog.exportProperty(ol.source.OSM.prototype,"changed",ol.source.OSM.prototype.changed);goog.exportProperty(ol.source.OSM.prototype,"getRevision",ol.source.OSM.prototype.getRevision);goog.exportProperty(ol.source.OSM.prototype,"on",ol.source.OSM.prototype.on);goog.exportProperty(ol.source.OSM.prototype,"once",ol.source.OSM.prototype.once);goog.exportProperty(ol.source.OSM.prototype,"un",ol.source.OSM.prototype.un);goog.exportProperty(ol.source.OSM.prototype,"unByKey",ol.source.OSM.prototype.unByKey);goog.exportProperty(ol.source.Raster.prototype,"getAttributions",ol.source.Raster.prototype.getAttributions);goog.exportProperty(ol.source.Raster.prototype,"getLogo",ol.source.Raster.prototype.getLogo);goog.exportProperty(ol.source.Raster.prototype,"getProjection",ol.source.Raster.prototype.getProjection);goog.exportProperty(ol.source.Raster.prototype,"getState",ol.source.Raster.prototype.getState);goog.exportProperty(ol.source.Raster.prototype,"setAttributions",ol.source.Raster.prototype.setAttributions);goog.exportProperty(ol.source.Raster.prototype,"get",ol.source.Raster.prototype.get);goog.exportProperty(ol.source.Raster.prototype,"getKeys",ol.source.Raster.prototype.getKeys);goog.exportProperty(ol.source.Raster.prototype,"getProperties",ol.source.Raster.prototype.getProperties);goog.exportProperty(ol.source.Raster.prototype,"set",ol.source.Raster.prototype.set);goog.exportProperty(ol.source.Raster.prototype,"setProperties",ol.source.Raster.prototype.setProperties);goog.exportProperty(ol.source.Raster.prototype,"unset",ol.source.Raster.prototype.unset);goog.exportProperty(ol.source.Raster.prototype,"changed",ol.source.Raster.prototype.changed);goog.exportProperty(ol.source.Raster.prototype,"getRevision",ol.source.Raster.prototype.getRevision);goog.exportProperty(ol.source.Raster.prototype,"on",ol.source.Raster.prototype.on);goog.exportProperty(ol.source.Raster.prototype,"once",ol.source.Raster.prototype.once);goog.exportProperty(ol.source.Raster.prototype,"un",ol.source.Raster.prototype.un);goog.exportProperty(ol.source.Raster.prototype,"unByKey",ol.source.Raster.prototype.unByKey);goog.exportProperty(ol.source.Stamen.prototype,"getUrls",ol.source.Stamen.prototype.getUrls);goog.exportProperty(ol.source.Stamen.prototype,"setUrl",ol.source.Stamen.prototype.setUrl);goog.exportProperty(ol.source.Stamen.prototype,"getTileLoadFunction",ol.source.Stamen.prototype.getTileLoadFunction);goog.exportProperty(ol.source.Stamen.prototype,"getTileUrlFunction",ol.source.Stamen.prototype.getTileUrlFunction);goog.exportProperty(ol.source.Stamen.prototype,"setTileLoadFunction",ol.source.Stamen.prototype.setTileLoadFunction);goog.exportProperty(ol.source.Stamen.prototype,"setTileUrlFunction",ol.source.Stamen.prototype.setTileUrlFunction);goog.exportProperty(ol.source.Stamen.prototype,"getTileGrid",ol.source.Stamen.prototype.getTileGrid);goog.exportProperty(ol.source.Stamen.prototype,"getAttributions",ol.source.Stamen.prototype.getAttributions);goog.exportProperty(ol.source.Stamen.prototype,"getLogo",ol.source.Stamen.prototype.getLogo);goog.exportProperty(ol.source.Stamen.prototype,"getProjection",ol.source.Stamen.prototype.getProjection);goog.exportProperty(ol.source.Stamen.prototype,"getState",ol.source.Stamen.prototype.getState);goog.exportProperty(ol.source.Stamen.prototype,"setAttributions",ol.source.Stamen.prototype.setAttributions);goog.exportProperty(ol.source.Stamen.prototype,"get",ol.source.Stamen.prototype.get);goog.exportProperty(ol.source.Stamen.prototype,"getKeys",ol.source.Stamen.prototype.getKeys);goog.exportProperty(ol.source.Stamen.prototype,"getProperties",ol.source.Stamen.prototype.getProperties);goog.exportProperty(ol.source.Stamen.prototype,"set",ol.source.Stamen.prototype.set);goog.exportProperty(ol.source.Stamen.prototype,"setProperties",ol.source.Stamen.prototype.setProperties);goog.exportProperty(ol.source.Stamen.prototype,"unset",ol.source.Stamen.prototype.unset);goog.exportProperty(ol.source.Stamen.prototype,"changed",ol.source.Stamen.prototype.changed);goog.exportProperty(ol.source.Stamen.prototype,"getRevision",ol.source.Stamen.prototype.getRevision);goog.exportProperty(ol.source.Stamen.prototype,"on",ol.source.Stamen.prototype.on);goog.exportProperty(ol.source.Stamen.prototype,"once",ol.source.Stamen.prototype.once);goog.exportProperty(ol.source.Stamen.prototype,"un",ol.source.Stamen.prototype.un);goog.exportProperty(ol.source.Stamen.prototype,"unByKey",ol.source.Stamen.prototype.unByKey);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileLoadFunction",ol.source.TileArcGISRest.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileUrlFunction",ol.source.TileArcGISRest.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setTileLoadFunction",ol.source.TileArcGISRest.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setTileUrlFunction",ol.source.TileArcGISRest.prototype.setTileUrlFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileGrid",ol.source.TileArcGISRest.prototype.getTileGrid);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getAttributions",ol.source.TileArcGISRest.prototype.getAttributions);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getLogo",ol.source.TileArcGISRest.prototype.getLogo);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getProjection",ol.source.TileArcGISRest.prototype.getProjection);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getState",ol.source.TileArcGISRest.prototype.getState);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setAttributions",ol.source.TileArcGISRest.prototype.setAttributions);goog.exportProperty(ol.source.TileArcGISRest.prototype,"get",ol.source.TileArcGISRest.prototype.get);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getKeys",ol.source.TileArcGISRest.prototype.getKeys);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getProperties",ol.source.TileArcGISRest.prototype.getProperties);goog.exportProperty(ol.source.TileArcGISRest.prototype,"set",ol.source.TileArcGISRest.prototype.set);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setProperties",ol.source.TileArcGISRest.prototype.setProperties);goog.exportProperty(ol.source.TileArcGISRest.prototype,"unset",ol.source.TileArcGISRest.prototype.unset);goog.exportProperty(ol.source.TileArcGISRest.prototype,"changed",ol.source.TileArcGISRest.prototype.changed);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getRevision",ol.source.TileArcGISRest.prototype.getRevision);goog.exportProperty(ol.source.TileArcGISRest.prototype,"on",ol.source.TileArcGISRest.prototype.on);goog.exportProperty(ol.source.TileArcGISRest.prototype,"once",ol.source.TileArcGISRest.prototype.once);goog.exportProperty(ol.source.TileArcGISRest.prototype,"un",ol.source.TileArcGISRest.prototype.un);goog.exportProperty(ol.source.TileArcGISRest.prototype,"unByKey",ol.source.TileArcGISRest.prototype.unByKey);goog.exportProperty(ol.source.TileDebug.prototype,"getTileGrid",ol.source.TileDebug.prototype.getTileGrid);goog.exportProperty(ol.source.TileDebug.prototype,"getAttributions",ol.source.TileDebug.prototype.getAttributions);goog.exportProperty(ol.source.TileDebug.prototype,"getLogo",ol.source.TileDebug.prototype.getLogo);goog.exportProperty(ol.source.TileDebug.prototype,"getProjection",ol.source.TileDebug.prototype.getProjection);goog.exportProperty(ol.source.TileDebug.prototype,"getState",ol.source.TileDebug.prototype.getState);goog.exportProperty(ol.source.TileDebug.prototype,"setAttributions",ol.source.TileDebug.prototype.setAttributions);goog.exportProperty(ol.source.TileDebug.prototype,"get",ol.source.TileDebug.prototype.get);goog.exportProperty(ol.source.TileDebug.prototype,"getKeys",ol.source.TileDebug.prototype.getKeys);goog.exportProperty(ol.source.TileDebug.prototype,"getProperties",ol.source.TileDebug.prototype.getProperties);goog.exportProperty(ol.source.TileDebug.prototype,"set",ol.source.TileDebug.prototype.set);goog.exportProperty(ol.source.TileDebug.prototype,"setProperties",ol.source.TileDebug.prototype.setProperties);goog.exportProperty(ol.source.TileDebug.prototype,"unset",ol.source.TileDebug.prototype.unset);goog.exportProperty(ol.source.TileDebug.prototype,"changed",ol.source.TileDebug.prototype.changed);goog.exportProperty(ol.source.TileDebug.prototype,"getRevision",ol.source.TileDebug.prototype.getRevision);goog.exportProperty(ol.source.TileDebug.prototype,"on",ol.source.TileDebug.prototype.on);goog.exportProperty(ol.source.TileDebug.prototype,"once",ol.source.TileDebug.prototype.once);goog.exportProperty(ol.source.TileDebug.prototype,"un",ol.source.TileDebug.prototype.un);goog.exportProperty(ol.source.TileDebug.prototype,"unByKey",ol.source.TileDebug.prototype.unByKey);goog.exportProperty(ol.source.TileJSON.prototype,"getTileLoadFunction",ol.source.TileJSON.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileJSON.prototype,"getTileUrlFunction",ol.source.TileJSON.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileJSON.prototype,"setTileLoadFunction",ol.source.TileJSON.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileJSON.prototype,"setTileUrlFunction",ol.source.TileJSON.prototype.setTileUrlFunction);goog.exportProperty(ol.source.TileJSON.prototype,"getTileGrid",ol.source.TileJSON.prototype.getTileGrid);goog.exportProperty(ol.source.TileJSON.prototype,"getAttributions",ol.source.TileJSON.prototype.getAttributions);goog.exportProperty(ol.source.TileJSON.prototype,"getLogo",ol.source.TileJSON.prototype.getLogo);goog.exportProperty(ol.source.TileJSON.prototype,"getProjection",ol.source.TileJSON.prototype.getProjection);goog.exportProperty(ol.source.TileJSON.prototype,"getState",ol.source.TileJSON.prototype.getState);goog.exportProperty(ol.source.TileJSON.prototype,"setAttributions",ol.source.TileJSON.prototype.setAttributions);goog.exportProperty(ol.source.TileJSON.prototype,"get",ol.source.TileJSON.prototype.get);goog.exportProperty(ol.source.TileJSON.prototype,"getKeys",ol.source.TileJSON.prototype.getKeys);goog.exportProperty(ol.source.TileJSON.prototype,"getProperties",ol.source.TileJSON.prototype.getProperties);goog.exportProperty(ol.source.TileJSON.prototype,"set",ol.source.TileJSON.prototype.set);goog.exportProperty(ol.source.TileJSON.prototype,"setProperties",ol.source.TileJSON.prototype.setProperties);goog.exportProperty(ol.source.TileJSON.prototype,"unset",ol.source.TileJSON.prototype.unset);goog.exportProperty(ol.source.TileJSON.prototype,"changed",ol.source.TileJSON.prototype.changed);goog.exportProperty(ol.source.TileJSON.prototype,"getRevision",ol.source.TileJSON.prototype.getRevision);goog.exportProperty(ol.source.TileJSON.prototype,"on",ol.source.TileJSON.prototype.on);goog.exportProperty(ol.source.TileJSON.prototype,"once",ol.source.TileJSON.prototype.once);goog.exportProperty(ol.source.TileJSON.prototype,"un",ol.source.TileJSON.prototype.un);goog.exportProperty(ol.source.TileJSON.prototype,"unByKey",ol.source.TileJSON.prototype.unByKey);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getTileGrid",ol.source.TileUTFGrid.prototype.getTileGrid);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getAttributions",ol.source.TileUTFGrid.prototype.getAttributions);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getLogo",ol.source.TileUTFGrid.prototype.getLogo);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getProjection",ol.source.TileUTFGrid.prototype.getProjection);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getState",ol.source.TileUTFGrid.prototype.getState);goog.exportProperty(ol.source.TileUTFGrid.prototype,"setAttributions",ol.source.TileUTFGrid.prototype.setAttributions);goog.exportProperty(ol.source.TileUTFGrid.prototype,"get",ol.source.TileUTFGrid.prototype.get);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getKeys",ol.source.TileUTFGrid.prototype.getKeys);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getProperties",ol.source.TileUTFGrid.prototype.getProperties);goog.exportProperty(ol.source.TileUTFGrid.prototype,"set",ol.source.TileUTFGrid.prototype.set);goog.exportProperty(ol.source.TileUTFGrid.prototype,"setProperties",ol.source.TileUTFGrid.prototype.setProperties);goog.exportProperty(ol.source.TileUTFGrid.prototype,"unset",ol.source.TileUTFGrid.prototype.unset);goog.exportProperty(ol.source.TileUTFGrid.prototype,"changed",ol.source.TileUTFGrid.prototype.changed);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getRevision",ol.source.TileUTFGrid.prototype.getRevision);goog.exportProperty(ol.source.TileUTFGrid.prototype,"on",ol.source.TileUTFGrid.prototype.on);goog.exportProperty(ol.source.TileUTFGrid.prototype,"once",ol.source.TileUTFGrid.prototype.once);goog.exportProperty(ol.source.TileUTFGrid.prototype,"un",ol.source.TileUTFGrid.prototype.un);goog.exportProperty(ol.source.TileUTFGrid.prototype,"unByKey",ol.source.TileUTFGrid.prototype.unByKey);goog.exportProperty(ol.source.TileVector.prototype,"addFeature",ol.source.TileVector.prototype.addFeature);goog.exportProperty(ol.source.TileVector.prototype,"addFeatures",ol.source.TileVector.prototype.addFeatures);goog.exportProperty(ol.source.TileVector.prototype,"clear",ol.source.TileVector.prototype.clear);goog.exportProperty(ol.source.TileVector.prototype,"forEachFeature",ol.source.TileVector.prototype.forEachFeature);goog.exportProperty(ol.source.TileVector.prototype,"forEachFeatureInExtent",ol.source.TileVector.prototype.forEachFeatureInExtent);goog.exportProperty(ol.source.TileVector.prototype,"forEachFeatureIntersectingExtent",ol.source.TileVector.prototype.forEachFeatureIntersectingExtent);goog.exportProperty(ol.source.TileVector.prototype,"getFeaturesCollection",ol.source.TileVector.prototype.getFeaturesCollection);goog.exportProperty(ol.source.TileVector.prototype,"getFeatures",ol.source.TileVector.prototype.getFeatures);goog.exportProperty(ol.source.TileVector.prototype,"getFeaturesAtCoordinate",ol.source.TileVector.prototype.getFeaturesAtCoordinate);goog.exportProperty(ol.source.TileVector.prototype,"getFeaturesInExtent",ol.source.TileVector.prototype.getFeaturesInExtent);goog.exportProperty(ol.source.TileVector.prototype,"getClosestFeatureToCoordinate",ol.source.TileVector.prototype.getClosestFeatureToCoordinate);goog.exportProperty(ol.source.TileVector.prototype,"getExtent",ol.source.TileVector.prototype.getExtent);goog.exportProperty(ol.source.TileVector.prototype,"getFeatureById",ol.source.TileVector.prototype.getFeatureById);goog.exportProperty(ol.source.TileVector.prototype,"removeFeature",ol.source.TileVector.prototype.removeFeature);goog.exportProperty(ol.source.TileVector.prototype,"getAttributions",ol.source.TileVector.prototype.getAttributions);goog.exportProperty(ol.source.TileVector.prototype,"getLogo",ol.source.TileVector.prototype.getLogo);goog.exportProperty(ol.source.TileVector.prototype,"getProjection",ol.source.TileVector.prototype.getProjection);goog.exportProperty(ol.source.TileVector.prototype,"getState",ol.source.TileVector.prototype.getState);goog.exportProperty(ol.source.TileVector.prototype,"setAttributions",ol.source.TileVector.prototype.setAttributions);goog.exportProperty(ol.source.TileVector.prototype,"get",ol.source.TileVector.prototype.get);goog.exportProperty(ol.source.TileVector.prototype,"getKeys",ol.source.TileVector.prototype.getKeys);goog.exportProperty(ol.source.TileVector.prototype,"getProperties",ol.source.TileVector.prototype.getProperties);goog.exportProperty(ol.source.TileVector.prototype,"set",ol.source.TileVector.prototype.set);goog.exportProperty(ol.source.TileVector.prototype,"setProperties",ol.source.TileVector.prototype.setProperties);goog.exportProperty(ol.source.TileVector.prototype,"unset",ol.source.TileVector.prototype.unset);goog.exportProperty(ol.source.TileVector.prototype,"changed",ol.source.TileVector.prototype.changed);goog.exportProperty(ol.source.TileVector.prototype,"getRevision",ol.source.TileVector.prototype.getRevision);goog.exportProperty(ol.source.TileVector.prototype,"on",ol.source.TileVector.prototype.on);goog.exportProperty(ol.source.TileVector.prototype,"once",ol.source.TileVector.prototype.once);goog.exportProperty(ol.source.TileVector.prototype,"un",ol.source.TileVector.prototype.un);goog.exportProperty(ol.source.TileVector.prototype,"unByKey",ol.source.TileVector.prototype.unByKey);goog.exportProperty(ol.source.TileWMS.prototype,"getTileLoadFunction",ol.source.TileWMS.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileWMS.prototype,"getTileUrlFunction",ol.source.TileWMS.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileWMS.prototype,"setTileLoadFunction",ol.source.TileWMS.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileWMS.prototype,"setTileUrlFunction",ol.source.TileWMS.prototype.setTileUrlFunction);goog.exportProperty(ol.source.TileWMS.prototype,"getTileGrid",ol.source.TileWMS.prototype.getTileGrid);goog.exportProperty(ol.source.TileWMS.prototype,"getAttributions",ol.source.TileWMS.prototype.getAttributions);goog.exportProperty(ol.source.TileWMS.prototype,"getLogo",ol.source.TileWMS.prototype.getLogo);goog.exportProperty(ol.source.TileWMS.prototype,"getProjection",ol.source.TileWMS.prototype.getProjection);goog.exportProperty(ol.source.TileWMS.prototype,"getState",ol.source.TileWMS.prototype.getState);goog.exportProperty(ol.source.TileWMS.prototype,"setAttributions",ol.source.TileWMS.prototype.setAttributions);goog.exportProperty(ol.source.TileWMS.prototype,"get",ol.source.TileWMS.prototype.get);goog.exportProperty(ol.source.TileWMS.prototype,"getKeys",ol.source.TileWMS.prototype.getKeys);goog.exportProperty(ol.source.TileWMS.prototype,"getProperties",ol.source.TileWMS.prototype.getProperties);goog.exportProperty(ol.source.TileWMS.prototype,"set",ol.source.TileWMS.prototype.set);goog.exportProperty(ol.source.TileWMS.prototype,"setProperties",ol.source.TileWMS.prototype.setProperties);goog.exportProperty(ol.source.TileWMS.prototype,"unset",ol.source.TileWMS.prototype.unset);goog.exportProperty(ol.source.TileWMS.prototype,"changed",ol.source.TileWMS.prototype.changed);goog.exportProperty(ol.source.TileWMS.prototype,"getRevision",ol.source.TileWMS.prototype.getRevision);goog.exportProperty(ol.source.TileWMS.prototype,"on",ol.source.TileWMS.prototype.on);goog.exportProperty(ol.source.TileWMS.prototype,"once",ol.source.TileWMS.prototype.once);goog.exportProperty(ol.source.TileWMS.prototype,"un",ol.source.TileWMS.prototype.un);goog.exportProperty(ol.source.TileWMS.prototype,"unByKey",ol.source.TileWMS.prototype.unByKey);goog.exportProperty(ol.source.WMTS.prototype,"getTileLoadFunction",ol.source.WMTS.prototype.getTileLoadFunction);goog.exportProperty(ol.source.WMTS.prototype,"getTileUrlFunction",ol.source.WMTS.prototype.getTileUrlFunction);goog.exportProperty(ol.source.WMTS.prototype,"setTileLoadFunction",ol.source.WMTS.prototype.setTileLoadFunction);goog.exportProperty(ol.source.WMTS.prototype,"setTileUrlFunction",ol.source.WMTS.prototype.setTileUrlFunction);goog.exportProperty(ol.source.WMTS.prototype,"getTileGrid",ol.source.WMTS.prototype.getTileGrid);goog.exportProperty(ol.source.WMTS.prototype,"getAttributions",ol.source.WMTS.prototype.getAttributions);goog.exportProperty(ol.source.WMTS.prototype,"getLogo",ol.source.WMTS.prototype.getLogo);goog.exportProperty(ol.source.WMTS.prototype,"getProjection",ol.source.WMTS.prototype.getProjection);goog.exportProperty(ol.source.WMTS.prototype,"getState",ol.source.WMTS.prototype.getState);goog.exportProperty(ol.source.WMTS.prototype,"setAttributions",ol.source.WMTS.prototype.setAttributions);goog.exportProperty(ol.source.WMTS.prototype,"get",ol.source.WMTS.prototype.get);goog.exportProperty(ol.source.WMTS.prototype,"getKeys",ol.source.WMTS.prototype.getKeys);goog.exportProperty(ol.source.WMTS.prototype,"getProperties",ol.source.WMTS.prototype.getProperties);goog.exportProperty(ol.source.WMTS.prototype,"set",ol.source.WMTS.prototype.set);goog.exportProperty(ol.source.WMTS.prototype,"setProperties",ol.source.WMTS.prototype.setProperties);goog.exportProperty(ol.source.WMTS.prototype,"unset",ol.source.WMTS.prototype.unset);goog.exportProperty(ol.source.WMTS.prototype,"changed",ol.source.WMTS.prototype.changed);goog.exportProperty(ol.source.WMTS.prototype,"getRevision",ol.source.WMTS.prototype.getRevision);goog.exportProperty(ol.source.WMTS.prototype,"on",ol.source.WMTS.prototype.on);goog.exportProperty(ol.source.WMTS.prototype,"once",ol.source.WMTS.prototype.once);goog.exportProperty(ol.source.WMTS.prototype,"un",ol.source.WMTS.prototype.un);goog.exportProperty(ol.source.WMTS.prototype,"unByKey",ol.source.WMTS.prototype.unByKey);goog.exportProperty(ol.source.Zoomify.prototype,"getTileLoadFunction",ol.source.Zoomify.prototype.getTileLoadFunction);goog.exportProperty(ol.source.Zoomify.prototype,"getTileUrlFunction",ol.source.Zoomify.prototype.getTileUrlFunction);goog.exportProperty(ol.source.Zoomify.prototype,"setTileLoadFunction",ol.source.Zoomify.prototype.setTileLoadFunction);goog.exportProperty(ol.source.Zoomify.prototype,"setTileUrlFunction",ol.source.Zoomify.prototype.setTileUrlFunction);goog.exportProperty(ol.source.Zoomify.prototype,"getTileGrid",ol.source.Zoomify.prototype.getTileGrid);goog.exportProperty(ol.source.Zoomify.prototype,"getAttributions",ol.source.Zoomify.prototype.getAttributions);goog.exportProperty(ol.source.Zoomify.prototype,"getLogo",ol.source.Zoomify.prototype.getLogo);goog.exportProperty(ol.source.Zoomify.prototype,"getProjection",ol.source.Zoomify.prototype.getProjection);goog.exportProperty(ol.source.Zoomify.prototype,"getState",ol.source.Zoomify.prototype.getState);goog.exportProperty(ol.source.Zoomify.prototype,"setAttributions",ol.source.Zoomify.prototype.setAttributions);goog.exportProperty(ol.source.Zoomify.prototype,"get",ol.source.Zoomify.prototype.get);goog.exportProperty(ol.source.Zoomify.prototype,"getKeys",ol.source.Zoomify.prototype.getKeys);goog.exportProperty(ol.source.Zoomify.prototype,"getProperties",ol.source.Zoomify.prototype.getProperties);goog.exportProperty(ol.source.Zoomify.prototype,"set",ol.source.Zoomify.prototype.set);goog.exportProperty(ol.source.Zoomify.prototype,"setProperties",ol.source.Zoomify.prototype.setProperties);goog.exportProperty(ol.source.Zoomify.prototype,"unset",ol.source.Zoomify.prototype.unset);goog.exportProperty(ol.source.Zoomify.prototype,"changed",ol.source.Zoomify.prototype.changed);goog.exportProperty(ol.source.Zoomify.prototype,"getRevision",ol.source.Zoomify.prototype.getRevision);goog.exportProperty(ol.source.Zoomify.prototype,"on",ol.source.Zoomify.prototype.on);goog.exportProperty(ol.source.Zoomify.prototype,"once",ol.source.Zoomify.prototype.once);goog.exportProperty(ol.source.Zoomify.prototype,"un",ol.source.Zoomify.prototype.un);goog.exportProperty(ol.source.Zoomify.prototype,"unByKey",ol.source.Zoomify.prototype.unByKey);goog.exportProperty(ol.renderer.Layer.prototype,"changed",ol.renderer.Layer.prototype.changed);goog.exportProperty(ol.renderer.Layer.prototype,"getRevision",ol.renderer.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.Layer.prototype,"on",ol.renderer.Layer.prototype.on);goog.exportProperty(ol.renderer.Layer.prototype,"once",ol.renderer.Layer.prototype.once);goog.exportProperty(ol.renderer.Layer.prototype,"un",ol.renderer.Layer.prototype.un);goog.exportProperty(ol.renderer.Layer.prototype,"unByKey",ol.renderer.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"changed",ol.renderer.webgl.Layer.prototype.changed);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"getRevision",ol.renderer.webgl.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"on",ol.renderer.webgl.Layer.prototype.on);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"once",ol.renderer.webgl.Layer.prototype.once);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"un",ol.renderer.webgl.Layer.prototype.un);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"unByKey",ol.renderer.webgl.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"changed",ol.renderer.webgl.ImageLayer.prototype.changed);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"getRevision",ol.renderer.webgl.ImageLayer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"on",ol.renderer.webgl.ImageLayer.prototype.on)
;goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"once",ol.renderer.webgl.ImageLayer.prototype.once);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"un",ol.renderer.webgl.ImageLayer.prototype.un);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"unByKey",ol.renderer.webgl.ImageLayer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"changed",ol.renderer.webgl.TileLayer.prototype.changed);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"getRevision",ol.renderer.webgl.TileLayer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"on",ol.renderer.webgl.TileLayer.prototype.on);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"once",ol.renderer.webgl.TileLayer.prototype.once);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"un",ol.renderer.webgl.TileLayer.prototype.un);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"unByKey",ol.renderer.webgl.TileLayer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"changed",ol.renderer.webgl.VectorLayer.prototype.changed);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"getRevision",ol.renderer.webgl.VectorLayer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"on",ol.renderer.webgl.VectorLayer.prototype.on);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"once",ol.renderer.webgl.VectorLayer.prototype.once);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"un",ol.renderer.webgl.VectorLayer.prototype.un);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"unByKey",ol.renderer.webgl.VectorLayer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.Layer.prototype,"changed",ol.renderer.dom.Layer.prototype.changed);goog.exportProperty(ol.renderer.dom.Layer.prototype,"getRevision",ol.renderer.dom.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.Layer.prototype,"on",ol.renderer.dom.Layer.prototype.on);goog.exportProperty(ol.renderer.dom.Layer.prototype,"once",ol.renderer.dom.Layer.prototype.once);goog.exportProperty(ol.renderer.dom.Layer.prototype,"un",ol.renderer.dom.Layer.prototype.un);goog.exportProperty(ol.renderer.dom.Layer.prototype,"unByKey",ol.renderer.dom.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"changed",ol.renderer.dom.ImageLayer.prototype.changed);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"getRevision",ol.renderer.dom.ImageLayer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"on",ol.renderer.dom.ImageLayer.prototype.on);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"once",ol.renderer.dom.ImageLayer.prototype.once);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"un",ol.renderer.dom.ImageLayer.prototype.un);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"unByKey",ol.renderer.dom.ImageLayer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"changed",ol.renderer.dom.TileLayer.prototype.changed);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"getRevision",ol.renderer.dom.TileLayer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"on",ol.renderer.dom.TileLayer.prototype.on);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"once",ol.renderer.dom.TileLayer.prototype.once);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"un",ol.renderer.dom.TileLayer.prototype.un);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"unByKey",ol.renderer.dom.TileLayer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"changed",ol.renderer.dom.VectorLayer.prototype.changed);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"getRevision",ol.renderer.dom.VectorLayer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"on",ol.renderer.dom.VectorLayer.prototype.on);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"once",ol.renderer.dom.VectorLayer.prototype.once);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"un",ol.renderer.dom.VectorLayer.prototype.un);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"unByKey",ol.renderer.dom.VectorLayer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"changed",ol.renderer.canvas.Layer.prototype.changed);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"getRevision",ol.renderer.canvas.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"on",ol.renderer.canvas.Layer.prototype.on);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"once",ol.renderer.canvas.Layer.prototype.once);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"un",ol.renderer.canvas.Layer.prototype.un);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"unByKey",ol.renderer.canvas.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"changed",ol.renderer.canvas.ImageLayer.prototype.changed);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"getRevision",ol.renderer.canvas.ImageLayer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"on",ol.renderer.canvas.ImageLayer.prototype.on);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"once",ol.renderer.canvas.ImageLayer.prototype.once);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"un",ol.renderer.canvas.ImageLayer.prototype.un);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"unByKey",ol.renderer.canvas.ImageLayer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"changed",ol.renderer.canvas.TileLayer.prototype.changed);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"getRevision",ol.renderer.canvas.TileLayer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"on",ol.renderer.canvas.TileLayer.prototype.on);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"once",ol.renderer.canvas.TileLayer.prototype.once);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"un",ol.renderer.canvas.TileLayer.prototype.un);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"unByKey",ol.renderer.canvas.TileLayer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"changed",ol.renderer.canvas.VectorLayer.prototype.changed);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"getRevision",ol.renderer.canvas.VectorLayer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"on",ol.renderer.canvas.VectorLayer.prototype.on);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"once",ol.renderer.canvas.VectorLayer.prototype.once);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"un",ol.renderer.canvas.VectorLayer.prototype.un);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"unByKey",ol.renderer.canvas.VectorLayer.prototype.unByKey);goog.exportProperty(ol.layer.Base.prototype,"get",ol.layer.Base.prototype.get);goog.exportProperty(ol.layer.Base.prototype,"getKeys",ol.layer.Base.prototype.getKeys);goog.exportProperty(ol.layer.Base.prototype,"getProperties",ol.layer.Base.prototype.getProperties);goog.exportProperty(ol.layer.Base.prototype,"set",ol.layer.Base.prototype.set);goog.exportProperty(ol.layer.Base.prototype,"setProperties",ol.layer.Base.prototype.setProperties);goog.exportProperty(ol.layer.Base.prototype,"unset",ol.layer.Base.prototype.unset);goog.exportProperty(ol.layer.Base.prototype,"changed",ol.layer.Base.prototype.changed);goog.exportProperty(ol.layer.Base.prototype,"getRevision",ol.layer.Base.prototype.getRevision);goog.exportProperty(ol.layer.Base.prototype,"on",ol.layer.Base.prototype.on);goog.exportProperty(ol.layer.Base.prototype,"once",ol.layer.Base.prototype.once);goog.exportProperty(ol.layer.Base.prototype,"un",ol.layer.Base.prototype.un);goog.exportProperty(ol.layer.Base.prototype,"unByKey",ol.layer.Base.prototype.unByKey);goog.exportProperty(ol.layer.Layer.prototype,"getBrightness",ol.layer.Layer.prototype.getBrightness);goog.exportProperty(ol.layer.Layer.prototype,"getContrast",ol.layer.Layer.prototype.getContrast);goog.exportProperty(ol.layer.Layer.prototype,"getHue",ol.layer.Layer.prototype.getHue);goog.exportProperty(ol.layer.Layer.prototype,"getExtent",ol.layer.Layer.prototype.getExtent);goog.exportProperty(ol.layer.Layer.prototype,"getMaxResolution",ol.layer.Layer.prototype.getMaxResolution);goog.exportProperty(ol.layer.Layer.prototype,"getMinResolution",ol.layer.Layer.prototype.getMinResolution);goog.exportProperty(ol.layer.Layer.prototype,"getOpacity",ol.layer.Layer.prototype.getOpacity);goog.exportProperty(ol.layer.Layer.prototype,"getSaturation",ol.layer.Layer.prototype.getSaturation);goog.exportProperty(ol.layer.Layer.prototype,"getVisible",ol.layer.Layer.prototype.getVisible);goog.exportProperty(ol.layer.Layer.prototype,"getZIndex",ol.layer.Layer.prototype.getZIndex);goog.exportProperty(ol.layer.Layer.prototype,"setBrightness",ol.layer.Layer.prototype.setBrightness);goog.exportProperty(ol.layer.Layer.prototype,"setContrast",ol.layer.Layer.prototype.setContrast);goog.exportProperty(ol.layer.Layer.prototype,"setHue",ol.layer.Layer.prototype.setHue);goog.exportProperty(ol.layer.Layer.prototype,"setExtent",ol.layer.Layer.prototype.setExtent);goog.exportProperty(ol.layer.Layer.prototype,"setMaxResolution",ol.layer.Layer.prototype.setMaxResolution);goog.exportProperty(ol.layer.Layer.prototype,"setMinResolution",ol.layer.Layer.prototype.setMinResolution);goog.exportProperty(ol.layer.Layer.prototype,"setOpacity",ol.layer.Layer.prototype.setOpacity);goog.exportProperty(ol.layer.Layer.prototype,"setSaturation",ol.layer.Layer.prototype.setSaturation);goog.exportProperty(ol.layer.Layer.prototype,"setVisible",ol.layer.Layer.prototype.setVisible);goog.exportProperty(ol.layer.Layer.prototype,"setZIndex",ol.layer.Layer.prototype.setZIndex);goog.exportProperty(ol.layer.Layer.prototype,"get",ol.layer.Layer.prototype.get);goog.exportProperty(ol.layer.Layer.prototype,"getKeys",ol.layer.Layer.prototype.getKeys);goog.exportProperty(ol.layer.Layer.prototype,"getProperties",ol.layer.Layer.prototype.getProperties);goog.exportProperty(ol.layer.Layer.prototype,"set",ol.layer.Layer.prototype.set);goog.exportProperty(ol.layer.Layer.prototype,"setProperties",ol.layer.Layer.prototype.setProperties);goog.exportProperty(ol.layer.Layer.prototype,"unset",ol.layer.Layer.prototype.unset);goog.exportProperty(ol.layer.Layer.prototype,"changed",ol.layer.Layer.prototype.changed);goog.exportProperty(ol.layer.Layer.prototype,"getRevision",ol.layer.Layer.prototype.getRevision);goog.exportProperty(ol.layer.Layer.prototype,"on",ol.layer.Layer.prototype.on);goog.exportProperty(ol.layer.Layer.prototype,"once",ol.layer.Layer.prototype.once);goog.exportProperty(ol.layer.Layer.prototype,"un",ol.layer.Layer.prototype.un);goog.exportProperty(ol.layer.Layer.prototype,"unByKey",ol.layer.Layer.prototype.unByKey);goog.exportProperty(ol.layer.Vector.prototype,"setMap",ol.layer.Vector.prototype.setMap);goog.exportProperty(ol.layer.Vector.prototype,"setSource",ol.layer.Vector.prototype.setSource);goog.exportProperty(ol.layer.Vector.prototype,"getBrightness",ol.layer.Vector.prototype.getBrightness);goog.exportProperty(ol.layer.Vector.prototype,"getContrast",ol.layer.Vector.prototype.getContrast);goog.exportProperty(ol.layer.Vector.prototype,"getHue",ol.layer.Vector.prototype.getHue);goog.exportProperty(ol.layer.Vector.prototype,"getExtent",ol.layer.Vector.prototype.getExtent);goog.exportProperty(ol.layer.Vector.prototype,"getMaxResolution",ol.layer.Vector.prototype.getMaxResolution);goog.exportProperty(ol.layer.Vector.prototype,"getMinResolution",ol.layer.Vector.prototype.getMinResolution);goog.exportProperty(ol.layer.Vector.prototype,"getOpacity",ol.layer.Vector.prototype.getOpacity);goog.exportProperty(ol.layer.Vector.prototype,"getSaturation",ol.layer.Vector.prototype.getSaturation);goog.exportProperty(ol.layer.Vector.prototype,"getVisible",ol.layer.Vector.prototype.getVisible);goog.exportProperty(ol.layer.Vector.prototype,"getZIndex",ol.layer.Vector.prototype.getZIndex);goog.exportProperty(ol.layer.Vector.prototype,"setBrightness",ol.layer.Vector.prototype.setBrightness);goog.exportProperty(ol.layer.Vector.prototype,"setContrast",ol.layer.Vector.prototype.setContrast);goog.exportProperty(ol.layer.Vector.prototype,"setHue",ol.layer.Vector.prototype.setHue);goog.exportProperty(ol.layer.Vector.prototype,"setExtent",ol.layer.Vector.prototype.setExtent);goog.exportProperty(ol.layer.Vector.prototype,"setMaxResolution",ol.layer.Vector.prototype.setMaxResolution);goog.exportProperty(ol.layer.Vector.prototype,"setMinResolution",ol.layer.Vector.prototype.setMinResolution);goog.exportProperty(ol.layer.Vector.prototype,"setOpacity",ol.layer.Vector.prototype.setOpacity);goog.exportProperty(ol.layer.Vector.prototype,"setSaturation",ol.layer.Vector.prototype.setSaturation);goog.exportProperty(ol.layer.Vector.prototype,"setVisible",ol.layer.Vector.prototype.setVisible);goog.exportProperty(ol.layer.Vector.prototype,"setZIndex",ol.layer.Vector.prototype.setZIndex);goog.exportProperty(ol.layer.Vector.prototype,"get",ol.layer.Vector.prototype.get);goog.exportProperty(ol.layer.Vector.prototype,"getKeys",ol.layer.Vector.prototype.getKeys);goog.exportProperty(ol.layer.Vector.prototype,"getProperties",ol.layer.Vector.prototype.getProperties);goog.exportProperty(ol.layer.Vector.prototype,"set",ol.layer.Vector.prototype.set);goog.exportProperty(ol.layer.Vector.prototype,"setProperties",ol.layer.Vector.prototype.setProperties);goog.exportProperty(ol.layer.Vector.prototype,"unset",ol.layer.Vector.prototype.unset);goog.exportProperty(ol.layer.Vector.prototype,"changed",ol.layer.Vector.prototype.changed);goog.exportProperty(ol.layer.Vector.prototype,"getRevision",ol.layer.Vector.prototype.getRevision);goog.exportProperty(ol.layer.Vector.prototype,"on",ol.layer.Vector.prototype.on);goog.exportProperty(ol.layer.Vector.prototype,"once",ol.layer.Vector.prototype.once);goog.exportProperty(ol.layer.Vector.prototype,"un",ol.layer.Vector.prototype.un);goog.exportProperty(ol.layer.Vector.prototype,"unByKey",ol.layer.Vector.prototype.unByKey);goog.exportProperty(ol.layer.Heatmap.prototype,"getSource",ol.layer.Heatmap.prototype.getSource);goog.exportProperty(ol.layer.Heatmap.prototype,"getStyle",ol.layer.Heatmap.prototype.getStyle);goog.exportProperty(ol.layer.Heatmap.prototype,"getStyleFunction",ol.layer.Heatmap.prototype.getStyleFunction);goog.exportProperty(ol.layer.Heatmap.prototype,"setStyle",ol.layer.Heatmap.prototype.setStyle);goog.exportProperty(ol.layer.Heatmap.prototype,"setMap",ol.layer.Heatmap.prototype.setMap);goog.exportProperty(ol.layer.Heatmap.prototype,"setSource",ol.layer.Heatmap.prototype.setSource);goog.exportProperty(ol.layer.Heatmap.prototype,"getBrightness",ol.layer.Heatmap.prototype.getBrightness);goog.exportProperty(ol.layer.Heatmap.prototype,"getContrast",ol.layer.Heatmap.prototype.getContrast);goog.exportProperty(ol.layer.Heatmap.prototype,"getHue",ol.layer.Heatmap.prototype.getHue);goog.exportProperty(ol.layer.Heatmap.prototype,"getExtent",ol.layer.Heatmap.prototype.getExtent);goog.exportProperty(ol.layer.Heatmap.prototype,"getMaxResolution",ol.layer.Heatmap.prototype.getMaxResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"getMinResolution",ol.layer.Heatmap.prototype.getMinResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"getOpacity",ol.layer.Heatmap.prototype.getOpacity);goog.exportProperty(ol.layer.Heatmap.prototype,"getSaturation",ol.layer.Heatmap.prototype.getSaturation);goog.exportProperty(ol.layer.Heatmap.prototype,"getVisible",ol.layer.Heatmap.prototype.getVisible);goog.exportProperty(ol.layer.Heatmap.prototype,"getZIndex",ol.layer.Heatmap.prototype.getZIndex);goog.exportProperty(ol.layer.Heatmap.prototype,"setBrightness",ol.layer.Heatmap.prototype.setBrightness);goog.exportProperty(ol.layer.Heatmap.prototype,"setContrast",ol.layer.Heatmap.prototype.setContrast);goog.exportProperty(ol.layer.Heatmap.prototype,"setHue",ol.layer.Heatmap.prototype.setHue);goog.exportProperty(ol.layer.Heatmap.prototype,"setExtent",ol.layer.Heatmap.prototype.setExtent);goog.exportProperty(ol.layer.Heatmap.prototype,"setMaxResolution",ol.layer.Heatmap.prototype.setMaxResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"setMinResolution",ol.layer.Heatmap.prototype.setMinResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"setOpacity",ol.layer.Heatmap.prototype.setOpacity);goog.exportProperty(ol.layer.Heatmap.prototype,"setSaturation",ol.layer.Heatmap.prototype.setSaturation);goog.exportProperty(ol.layer.Heatmap.prototype,"setVisible",ol.layer.Heatmap.prototype.setVisible);goog.exportProperty(ol.layer.Heatmap.prototype,"setZIndex",ol.layer.Heatmap.prototype.setZIndex);goog.exportProperty(ol.layer.Heatmap.prototype,"get",ol.layer.Heatmap.prototype.get);goog.exportProperty(ol.layer.Heatmap.prototype,"getKeys",ol.layer.Heatmap.prototype.getKeys);goog.exportProperty(ol.layer.Heatmap.prototype,"getProperties",ol.layer.Heatmap.prototype.getProperties);goog.exportProperty(ol.layer.Heatmap.prototype,"set",ol.layer.Heatmap.prototype.set);goog.exportProperty(ol.layer.Heatmap.prototype,"setProperties",ol.layer.Heatmap.prototype.setProperties);goog.exportProperty(ol.layer.Heatmap.prototype,"unset",ol.layer.Heatmap.prototype.unset);goog.exportProperty(ol.layer.Heatmap.prototype,"changed",ol.layer.Heatmap.prototype.changed);goog.exportProperty(ol.layer.Heatmap.prototype,"getRevision",ol.layer.Heatmap.prototype.getRevision);goog.exportProperty(ol.layer.Heatmap.prototype,"on",ol.layer.Heatmap.prototype.on);goog.exportProperty(ol.layer.Heatmap.prototype,"once",ol.layer.Heatmap.prototype.once);goog.exportProperty(ol.layer.Heatmap.prototype,"un",ol.layer.Heatmap.prototype.un);goog.exportProperty(ol.layer.Heatmap.prototype,"unByKey",ol.layer.Heatmap.prototype.unByKey);goog.exportProperty(ol.layer.Image.prototype,"setMap",ol.layer.Image.prototype.setMap);goog.exportProperty(ol.layer.Image.prototype,"setSource",ol.layer.Image.prototype.setSource);goog.exportProperty(ol.layer.Image.prototype,"getBrightness",ol.layer.Image.prototype.getBrightness);goog.exportProperty(ol.layer.Image.prototype,"getContrast",ol.layer.Image.prototype.getContrast);goog.exportProperty(ol.layer.Image.prototype,"getHue",ol.layer.Image.prototype.getHue);goog.exportProperty(ol.layer.Image.prototype,"getExtent",ol.layer.Image.prototype.getExtent);goog.exportProperty(ol.layer.Image.prototype,"getMaxResolution",ol.layer.Image.prototype.getMaxResolution);goog.exportProperty(ol.layer.Image.prototype,"getMinResolution",ol.layer.Image.prototype.getMinResolution);goog.exportProperty(ol.layer.Image.prototype,"getOpacity",ol.layer.Image.prototype.getOpacity);goog.exportProperty(ol.layer.Image.prototype,"getSaturation",ol.layer.Image.prototype.getSaturation);goog.exportProperty(ol.layer.Image.prototype,"getVisible",ol.layer.Image.prototype.getVisible);goog.exportProperty(ol.layer.Image.prototype,"getZIndex",ol.layer.Image.prototype.getZIndex);goog.exportProperty(ol.layer.Image.prototype,"setBrightness",ol.layer.Image.prototype.setBrightness);goog.exportProperty(ol.layer.Image.prototype,"setContrast",ol.layer.Image.prototype.setContrast);goog.exportProperty(ol.layer.Image.prototype,"setHue",ol.layer.Image.prototype.setHue);goog.exportProperty(ol.layer.Image.prototype,"setExtent",ol.layer.Image.prototype.setExtent);goog.exportProperty(ol.layer.Image.prototype,"setMaxResolution",ol.layer.Image.prototype.setMaxResolution);goog.exportProperty(ol.layer.Image.prototype,"setMinResolution",ol.layer.Image.prototype.setMinResolution);goog.exportProperty(ol.layer.Image.prototype,"setOpacity",ol.layer.Image.prototype.setOpacity);goog.exportProperty(ol.layer.Image.prototype,"setSaturation",ol.layer.Image.prototype.setSaturation);goog.exportProperty(ol.layer.Image.prototype,"setVisible",ol.layer.Image.prototype.setVisible);goog.exportProperty(ol.layer.Image.prototype,"setZIndex",ol.layer.Image.prototype.setZIndex);goog.exportProperty(ol.layer.Image.prototype,"get",ol.layer.Image.prototype.get);goog.exportProperty(ol.layer.Image.prototype,"getKeys",ol.layer.Image.prototype.getKeys);goog.exportProperty(ol.layer.Image.prototype,"getProperties",ol.layer.Image.prototype.getProperties);goog.exportProperty(ol.layer.Image.prototype,"set",ol.layer.Image.prototype.set);goog.exportProperty(ol.layer.Image.prototype,"setProperties",ol.layer.Image.prototype.setProperties);goog.exportProperty(ol.layer.Image.prototype,"unset",ol.layer.Image.prototype.unset);goog.exportProperty(ol.layer.Image.prototype,"changed",ol.layer.Image.prototype.changed);goog.exportProperty(ol.layer.Image.prototype,"getRevision",ol.layer.Image.prototype.getRevision);goog.exportProperty(ol.layer.Image.prototype,"on",ol.layer.Image.prototype.on);goog.exportProperty(ol.layer.Image.prototype,"once",ol.layer.Image.prototype.once);goog.exportProperty(ol.layer.Image.prototype,"un",ol.layer.Image.prototype.un);goog.exportProperty(ol.layer.Image.prototype,"unByKey",ol.layer.Image.prototype.unByKey);goog.exportProperty(ol.layer.Group.prototype,"getBrightness",ol.layer.Group.prototype.getBrightness);goog.exportProperty(ol.layer.Group.prototype,"getContrast",ol.layer.Group.prototype.getContrast);goog.exportProperty(ol.layer.Group.prototype,"getHue",ol.layer.Group.prototype.getHue);goog.exportProperty(ol.layer.Group.prototype,"getExtent",ol.layer.Group.prototype.getExtent);goog.exportProperty(ol.layer.Group.prototype,"getMaxResolution",ol.layer.Group.prototype.getMaxResolution);goog.exportProperty(ol.layer.Group.prototype,"getMinResolution",ol.layer.Group.prototype.getMinResolution);goog.exportProperty(ol.layer.Group.prototype,"getOpacity",ol.layer.Group.prototype.getOpacity);goog.exportProperty(ol.layer.Group.prototype,"getSaturation",ol.layer.Group.prototype.getSaturation);goog.exportProperty(ol.layer.Group.prototype,"getVisible",ol.layer.Group.prototype.getVisible);goog.exportProperty(ol.layer.Group.prototype,"getZIndex",ol.layer.Group.prototype.getZIndex);goog.exportProperty(ol.layer.Group.prototype,"setBrightness",ol.layer.Group.prototype.setBrightness);goog.exportProperty(ol.layer.Group.prototype,"setContrast",ol.layer.Group.prototype.setContrast);goog.exportProperty(ol.layer.Group.prototype,"setHue",ol.layer.Group.prototype.setHue);goog.exportProperty(ol.layer.Group.prototype,"setExtent",ol.layer.Group.prototype.setExtent);goog.exportProperty(ol.layer.Group.prototype,"setMaxResolution",ol.layer.Group.prototype.setMaxResolution);goog.exportProperty(ol.layer.Group.prototype,"setMinResolution",ol.layer.Group.prototype.setMinResolution);goog.exportProperty(ol.layer.Group.prototype,"setOpacity",ol.layer.Group.prototype.setOpacity);goog.exportProperty(ol.layer.Group.prototype,"setSaturation",ol.layer.Group.prototype.setSaturation);goog.exportProperty(ol.layer.Group.prototype,"setVisible",ol.layer.Group.prototype.setVisible);goog.exportProperty(ol.layer.Group.prototype,"setZIndex",ol.layer.Group.prototype.setZIndex);goog.exportProperty(ol.layer.Group.prototype,"get",ol.layer.Group.prototype.get);goog.exportProperty(ol.layer.Group.prototype,"getKeys",ol.layer.Group.prototype.getKeys);goog.exportProperty(ol.layer.Group.prototype,"getProperties",ol.layer.Group.prototype.getProperties);goog.exportProperty(ol.layer.Group.prototype,"set",ol.layer.Group.prototype.set);goog.exportProperty(ol.layer.Group.prototype,"setProperties",ol.layer.Group.prototype.setProperties);goog.exportProperty(ol.layer.Group.prototype,"unset",ol.layer.Group.prototype.unset);goog.exportProperty(ol.layer.Group.prototype,"changed",ol.layer.Group.prototype.changed);goog.exportProperty(ol.layer.Group.prototype,"getRevision",ol.layer.Group.prototype.getRevision);goog.exportProperty(ol.layer.Group.prototype,"on",ol.layer.Group.prototype.on);goog.exportProperty(ol.layer.Group.prototype,"once",ol.layer.Group.prototype.once);goog.exportProperty(ol.layer.Group.prototype,"un",ol.layer.Group.prototype.un);goog.exportProperty(ol.layer.Group.prototype,"unByKey",ol.layer.Group.prototype.unByKey);goog.exportProperty(ol.layer.Tile.prototype,"setMap",ol.layer.Tile.prototype.setMap);goog.exportProperty(ol.layer.Tile.prototype,"setSource",ol.layer.Tile.prototype.setSource);goog.exportProperty(ol.layer.Tile.prototype,"getBrightness",ol.layer.Tile.prototype.getBrightness);goog.exportProperty(ol.layer.Tile.prototype,"getContrast",ol.layer.Tile.prototype.getContrast);goog.exportProperty(ol.layer.Tile.prototype,"getHue",ol.layer.Tile.prototype.getHue);goog.exportProperty(ol.layer.Tile.prototype,"getExtent",ol.layer.Tile.prototype.getExtent);goog.exportProperty(ol.layer.Tile.prototype,"getMaxResolution",ol.layer.Tile.prototype.getMaxResolution);goog.exportProperty(ol.layer.Tile.prototype,"getMinResolution",ol.layer.Tile.prototype.getMinResolution);goog.exportProperty(ol.layer.Tile.prototype,"getOpacity",ol.layer.Tile.prototype.getOpacity);goog.exportProperty(ol.layer.Tile.prototype,"getSaturation",ol.layer.Tile.prototype.getSaturation);goog.exportProperty(ol.layer.Tile.prototype,"getVisible",ol.layer.Tile.prototype.getVisible);goog.exportProperty(ol.layer.Tile.prototype,"getZIndex",ol.layer.Tile.prototype.getZIndex);goog.exportProperty(ol.layer.Tile.prototype,"setBrightness",ol.layer.Tile.prototype.setBrightness);goog.exportProperty(ol.layer.Tile.prototype,"setContrast",ol.layer.Tile.prototype.setContrast);goog.exportProperty(ol.layer.Tile.prototype,"setHue",ol.layer.Tile.prototype.setHue);goog.exportProperty(ol.layer.Tile.prototype,"setExtent",ol.layer.Tile.prototype.setExtent);goog.exportProperty(ol.layer.Tile.prototype,"setMaxResolution",ol.layer.Tile.prototype.setMaxResolution);goog.exportProperty(ol.layer.Tile.prototype,"setMinResolution",ol.layer.Tile.prototype.setMinResolution);goog.exportProperty(ol.layer.Tile.prototype,"setOpacity",ol.layer.Tile.prototype.setOpacity);goog.exportProperty(ol.layer.Tile.prototype,"setSaturation",ol.layer.Tile.prototype.setSaturation);goog.exportProperty(ol.layer.Tile.prototype,"setVisible",ol.layer.Tile.prototype.setVisible);goog.exportProperty(ol.layer.Tile.prototype,"setZIndex",ol.layer.Tile.prototype.setZIndex);goog.exportProperty(ol.layer.Tile.prototype,"get",ol.layer.Tile.prototype.get);goog.exportProperty(ol.layer.Tile.prototype,"getKeys",ol.layer.Tile.prototype.getKeys);goog.exportProperty(ol.layer.Tile.prototype,"getProperties",ol.layer.Tile.prototype.getProperties);goog.exportProperty(ol.layer.Tile.prototype,"set",ol.layer.Tile.prototype.set);goog.exportProperty(ol.layer.Tile.prototype,"setProperties",ol.layer.Tile.prototype.setProperties);goog.exportProperty(ol.layer.Tile.prototype,"unset",ol.layer.Tile.prototype.unset);goog.exportProperty(ol.layer.Tile.prototype,"changed",ol.layer.Tile.prototype.changed);goog.exportProperty(ol.layer.Tile.prototype,"getRevision",ol.layer.Tile.prototype.getRevision);goog.exportProperty(ol.layer.Tile.prototype,"on",ol.layer.Tile.prototype.on);goog.exportProperty(ol.layer.Tile.prototype,"once",ol.layer.Tile.prototype.once);goog.exportProperty(ol.layer.Tile.prototype,"un",ol.layer.Tile.prototype.un);goog.exportProperty(ol.layer.Tile.prototype,"unByKey",ol.layer.Tile.prototype.unByKey);goog.exportProperty(ol.interaction.Interaction.prototype,"get",ol.interaction.Interaction.prototype.get);goog.exportProperty(ol.interaction.Interaction.prototype,"getKeys",ol.interaction.Interaction.prototype.getKeys);goog.exportProperty(ol.interaction.Interaction.prototype,"getProperties",ol.interaction.Interaction.prototype.getProperties);goog.exportProperty(ol.interaction.Interaction.prototype,"set",ol.interaction.Interaction.prototype.set);goog.exportProperty(ol.interaction.Interaction.prototype,"setProperties",ol.interaction.Interaction.prototype.setProperties);goog.exportProperty(ol.interaction.Interaction.prototype,"unset",ol.interaction.Interaction.prototype.unset);goog.exportProperty(ol.interaction.Interaction.prototype,"changed",ol.interaction.Interaction.prototype.changed);goog.exportProperty(ol.interaction.Interaction.prototype,"getRevision",ol.interaction.Interaction.prototype.getRevision);goog.exportProperty(ol.interaction.Interaction.prototype,"on",ol.interaction.Interaction.prototype.on);goog.exportProperty(ol.interaction.Interaction.prototype,"once",ol.interaction.Interaction.prototype.once);goog.exportProperty(ol.interaction.Interaction.prototype,"un",ol.interaction.Interaction.prototype.un);goog.exportProperty(ol.interaction.Interaction.prototype,"unByKey",ol.interaction.Interaction.prototype.unByKey);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getActive",ol.interaction.DoubleClickZoom.prototype.getActive);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"setActive",ol.interaction.DoubleClickZoom.prototype.setActive);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"get",ol.interaction.DoubleClickZoom.prototype.get);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getKeys",ol.interaction.DoubleClickZoom.prototype.getKeys);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getProperties",ol.interaction.DoubleClickZoom.prototype.getProperties);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"set",ol.interaction.DoubleClickZoom.prototype.set);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"setProperties",ol.interaction.DoubleClickZoom.prototype.setProperties);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"unset",ol.interaction.DoubleClickZoom.prototype.unset);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"changed",ol.interaction.DoubleClickZoom.prototype.changed);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getRevision",ol.interaction.DoubleClickZoom.prototype.getRevision);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"on",ol.interaction.DoubleClickZoom.prototype.on);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"once",ol.interaction.DoubleClickZoom.prototype.once);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"un",ol.interaction.DoubleClickZoom.prototype.un);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"unByKey",ol.interaction.DoubleClickZoom.prototype.unByKey);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getActive",ol.interaction.DragAndDrop.prototype.getActive);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"setActive",ol.interaction.DragAndDrop.prototype.setActive);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"get",ol.interaction.DragAndDrop.prototype.get);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getKeys",ol.interaction.DragAndDrop.prototype.getKeys);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getProperties",ol.interaction.DragAndDrop.prototype.getProperties);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"set",ol.interaction.DragAndDrop.prototype.set);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"setProperties",ol.interaction.DragAndDrop.prototype.setProperties);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"unset",ol.interaction.DragAndDrop.prototype.unset);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"changed",ol.interaction.DragAndDrop.prototype.changed);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getRevision",ol.interaction.DragAndDrop.prototype.getRevision);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"on",ol.interaction.DragAndDrop.prototype.on);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"once",ol.interaction.DragAndDrop.prototype.once);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"un",ol.interaction.DragAndDrop.prototype.un);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"unByKey",ol.interaction.DragAndDrop.prototype.unByKey)
;goog.exportProperty(ol.interaction.Pointer.prototype,"getActive",ol.interaction.Pointer.prototype.getActive);goog.exportProperty(ol.interaction.Pointer.prototype,"setActive",ol.interaction.Pointer.prototype.setActive);goog.exportProperty(ol.interaction.Pointer.prototype,"get",ol.interaction.Pointer.prototype.get);goog.exportProperty(ol.interaction.Pointer.prototype,"getKeys",ol.interaction.Pointer.prototype.getKeys);goog.exportProperty(ol.interaction.Pointer.prototype,"getProperties",ol.interaction.Pointer.prototype.getProperties);goog.exportProperty(ol.interaction.Pointer.prototype,"set",ol.interaction.Pointer.prototype.set);goog.exportProperty(ol.interaction.Pointer.prototype,"setProperties",ol.interaction.Pointer.prototype.setProperties);goog.exportProperty(ol.interaction.Pointer.prototype,"unset",ol.interaction.Pointer.prototype.unset);goog.exportProperty(ol.interaction.Pointer.prototype,"changed",ol.interaction.Pointer.prototype.changed);goog.exportProperty(ol.interaction.Pointer.prototype,"getRevision",ol.interaction.Pointer.prototype.getRevision);goog.exportProperty(ol.interaction.Pointer.prototype,"on",ol.interaction.Pointer.prototype.on);goog.exportProperty(ol.interaction.Pointer.prototype,"once",ol.interaction.Pointer.prototype.once);goog.exportProperty(ol.interaction.Pointer.prototype,"un",ol.interaction.Pointer.prototype.un);goog.exportProperty(ol.interaction.Pointer.prototype,"unByKey",ol.interaction.Pointer.prototype.unByKey);goog.exportProperty(ol.interaction.DragBox.prototype,"getActive",ol.interaction.DragBox.prototype.getActive);goog.exportProperty(ol.interaction.DragBox.prototype,"setActive",ol.interaction.DragBox.prototype.setActive);goog.exportProperty(ol.interaction.DragBox.prototype,"get",ol.interaction.DragBox.prototype.get);goog.exportProperty(ol.interaction.DragBox.prototype,"getKeys",ol.interaction.DragBox.prototype.getKeys);goog.exportProperty(ol.interaction.DragBox.prototype,"getProperties",ol.interaction.DragBox.prototype.getProperties);goog.exportProperty(ol.interaction.DragBox.prototype,"set",ol.interaction.DragBox.prototype.set);goog.exportProperty(ol.interaction.DragBox.prototype,"setProperties",ol.interaction.DragBox.prototype.setProperties);goog.exportProperty(ol.interaction.DragBox.prototype,"unset",ol.interaction.DragBox.prototype.unset);goog.exportProperty(ol.interaction.DragBox.prototype,"changed",ol.interaction.DragBox.prototype.changed);goog.exportProperty(ol.interaction.DragBox.prototype,"getRevision",ol.interaction.DragBox.prototype.getRevision);goog.exportProperty(ol.interaction.DragBox.prototype,"on",ol.interaction.DragBox.prototype.on);goog.exportProperty(ol.interaction.DragBox.prototype,"once",ol.interaction.DragBox.prototype.once);goog.exportProperty(ol.interaction.DragBox.prototype,"un",ol.interaction.DragBox.prototype.un);goog.exportProperty(ol.interaction.DragBox.prototype,"unByKey",ol.interaction.DragBox.prototype.unByKey);goog.exportProperty(ol.interaction.DragPan.prototype,"getActive",ol.interaction.DragPan.prototype.getActive);goog.exportProperty(ol.interaction.DragPan.prototype,"setActive",ol.interaction.DragPan.prototype.setActive);goog.exportProperty(ol.interaction.DragPan.prototype,"get",ol.interaction.DragPan.prototype.get);goog.exportProperty(ol.interaction.DragPan.prototype,"getKeys",ol.interaction.DragPan.prototype.getKeys);goog.exportProperty(ol.interaction.DragPan.prototype,"getProperties",ol.interaction.DragPan.prototype.getProperties);goog.exportProperty(ol.interaction.DragPan.prototype,"set",ol.interaction.DragPan.prototype.set);goog.exportProperty(ol.interaction.DragPan.prototype,"setProperties",ol.interaction.DragPan.prototype.setProperties);goog.exportProperty(ol.interaction.DragPan.prototype,"unset",ol.interaction.DragPan.prototype.unset);goog.exportProperty(ol.interaction.DragPan.prototype,"changed",ol.interaction.DragPan.prototype.changed);goog.exportProperty(ol.interaction.DragPan.prototype,"getRevision",ol.interaction.DragPan.prototype.getRevision);goog.exportProperty(ol.interaction.DragPan.prototype,"on",ol.interaction.DragPan.prototype.on);goog.exportProperty(ol.interaction.DragPan.prototype,"once",ol.interaction.DragPan.prototype.once);goog.exportProperty(ol.interaction.DragPan.prototype,"un",ol.interaction.DragPan.prototype.un);goog.exportProperty(ol.interaction.DragPan.prototype,"unByKey",ol.interaction.DragPan.prototype.unByKey);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getActive",ol.interaction.DragRotateAndZoom.prototype.getActive);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"setActive",ol.interaction.DragRotateAndZoom.prototype.setActive);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"get",ol.interaction.DragRotateAndZoom.prototype.get);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getKeys",ol.interaction.DragRotateAndZoom.prototype.getKeys);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getProperties",ol.interaction.DragRotateAndZoom.prototype.getProperties);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"set",ol.interaction.DragRotateAndZoom.prototype.set);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"setProperties",ol.interaction.DragRotateAndZoom.prototype.setProperties);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"unset",ol.interaction.DragRotateAndZoom.prototype.unset);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"changed",ol.interaction.DragRotateAndZoom.prototype.changed);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getRevision",ol.interaction.DragRotateAndZoom.prototype.getRevision);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"on",ol.interaction.DragRotateAndZoom.prototype.on);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"once",ol.interaction.DragRotateAndZoom.prototype.once);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"un",ol.interaction.DragRotateAndZoom.prototype.un);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"unByKey",ol.interaction.DragRotateAndZoom.prototype.unByKey);goog.exportProperty(ol.interaction.DragRotate.prototype,"getActive",ol.interaction.DragRotate.prototype.getActive);goog.exportProperty(ol.interaction.DragRotate.prototype,"setActive",ol.interaction.DragRotate.prototype.setActive);goog.exportProperty(ol.interaction.DragRotate.prototype,"get",ol.interaction.DragRotate.prototype.get);goog.exportProperty(ol.interaction.DragRotate.prototype,"getKeys",ol.interaction.DragRotate.prototype.getKeys);goog.exportProperty(ol.interaction.DragRotate.prototype,"getProperties",ol.interaction.DragRotate.prototype.getProperties);goog.exportProperty(ol.interaction.DragRotate.prototype,"set",ol.interaction.DragRotate.prototype.set);goog.exportProperty(ol.interaction.DragRotate.prototype,"setProperties",ol.interaction.DragRotate.prototype.setProperties);goog.exportProperty(ol.interaction.DragRotate.prototype,"unset",ol.interaction.DragRotate.prototype.unset);goog.exportProperty(ol.interaction.DragRotate.prototype,"changed",ol.interaction.DragRotate.prototype.changed);goog.exportProperty(ol.interaction.DragRotate.prototype,"getRevision",ol.interaction.DragRotate.prototype.getRevision);goog.exportProperty(ol.interaction.DragRotate.prototype,"on",ol.interaction.DragRotate.prototype.on);goog.exportProperty(ol.interaction.DragRotate.prototype,"once",ol.interaction.DragRotate.prototype.once);goog.exportProperty(ol.interaction.DragRotate.prototype,"un",ol.interaction.DragRotate.prototype.un);goog.exportProperty(ol.interaction.DragRotate.prototype,"unByKey",ol.interaction.DragRotate.prototype.unByKey);goog.exportProperty(ol.interaction.DragZoom.prototype,"getGeometry",ol.interaction.DragZoom.prototype.getGeometry);goog.exportProperty(ol.interaction.DragZoom.prototype,"getActive",ol.interaction.DragZoom.prototype.getActive);goog.exportProperty(ol.interaction.DragZoom.prototype,"setActive",ol.interaction.DragZoom.prototype.setActive);goog.exportProperty(ol.interaction.DragZoom.prototype,"get",ol.interaction.DragZoom.prototype.get);goog.exportProperty(ol.interaction.DragZoom.prototype,"getKeys",ol.interaction.DragZoom.prototype.getKeys);goog.exportProperty(ol.interaction.DragZoom.prototype,"getProperties",ol.interaction.DragZoom.prototype.getProperties);goog.exportProperty(ol.interaction.DragZoom.prototype,"set",ol.interaction.DragZoom.prototype.set);goog.exportProperty(ol.interaction.DragZoom.prototype,"setProperties",ol.interaction.DragZoom.prototype.setProperties);goog.exportProperty(ol.interaction.DragZoom.prototype,"unset",ol.interaction.DragZoom.prototype.unset);goog.exportProperty(ol.interaction.DragZoom.prototype,"changed",ol.interaction.DragZoom.prototype.changed);goog.exportProperty(ol.interaction.DragZoom.prototype,"getRevision",ol.interaction.DragZoom.prototype.getRevision);goog.exportProperty(ol.interaction.DragZoom.prototype,"on",ol.interaction.DragZoom.prototype.on);goog.exportProperty(ol.interaction.DragZoom.prototype,"once",ol.interaction.DragZoom.prototype.once);goog.exportProperty(ol.interaction.DragZoom.prototype,"un",ol.interaction.DragZoom.prototype.un);goog.exportProperty(ol.interaction.DragZoom.prototype,"unByKey",ol.interaction.DragZoom.prototype.unByKey);goog.exportProperty(ol.interaction.Draw.prototype,"getActive",ol.interaction.Draw.prototype.getActive);goog.exportProperty(ol.interaction.Draw.prototype,"setActive",ol.interaction.Draw.prototype.setActive);goog.exportProperty(ol.interaction.Draw.prototype,"get",ol.interaction.Draw.prototype.get);goog.exportProperty(ol.interaction.Draw.prototype,"getKeys",ol.interaction.Draw.prototype.getKeys);goog.exportProperty(ol.interaction.Draw.prototype,"getProperties",ol.interaction.Draw.prototype.getProperties);goog.exportProperty(ol.interaction.Draw.prototype,"set",ol.interaction.Draw.prototype.set);goog.exportProperty(ol.interaction.Draw.prototype,"setProperties",ol.interaction.Draw.prototype.setProperties);goog.exportProperty(ol.interaction.Draw.prototype,"unset",ol.interaction.Draw.prototype.unset);goog.exportProperty(ol.interaction.Draw.prototype,"changed",ol.interaction.Draw.prototype.changed);goog.exportProperty(ol.interaction.Draw.prototype,"getRevision",ol.interaction.Draw.prototype.getRevision);goog.exportProperty(ol.interaction.Draw.prototype,"on",ol.interaction.Draw.prototype.on);goog.exportProperty(ol.interaction.Draw.prototype,"once",ol.interaction.Draw.prototype.once);goog.exportProperty(ol.interaction.Draw.prototype,"un",ol.interaction.Draw.prototype.un);goog.exportProperty(ol.interaction.Draw.prototype,"unByKey",ol.interaction.Draw.prototype.unByKey);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getActive",ol.interaction.KeyboardPan.prototype.getActive);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"setActive",ol.interaction.KeyboardPan.prototype.setActive);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"get",ol.interaction.KeyboardPan.prototype.get);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getKeys",ol.interaction.KeyboardPan.prototype.getKeys);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getProperties",ol.interaction.KeyboardPan.prototype.getProperties);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"set",ol.interaction.KeyboardPan.prototype.set);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"setProperties",ol.interaction.KeyboardPan.prototype.setProperties);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"unset",ol.interaction.KeyboardPan.prototype.unset);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"changed",ol.interaction.KeyboardPan.prototype.changed);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getRevision",ol.interaction.KeyboardPan.prototype.getRevision);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"on",ol.interaction.KeyboardPan.prototype.on);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"once",ol.interaction.KeyboardPan.prototype.once);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"un",ol.interaction.KeyboardPan.prototype.un);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"unByKey",ol.interaction.KeyboardPan.prototype.unByKey);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getActive",ol.interaction.KeyboardZoom.prototype.getActive);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"setActive",ol.interaction.KeyboardZoom.prototype.setActive);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"get",ol.interaction.KeyboardZoom.prototype.get);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getKeys",ol.interaction.KeyboardZoom.prototype.getKeys);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getProperties",ol.interaction.KeyboardZoom.prototype.getProperties);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"set",ol.interaction.KeyboardZoom.prototype.set);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"setProperties",ol.interaction.KeyboardZoom.prototype.setProperties);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"unset",ol.interaction.KeyboardZoom.prototype.unset);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"changed",ol.interaction.KeyboardZoom.prototype.changed);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getRevision",ol.interaction.KeyboardZoom.prototype.getRevision);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"on",ol.interaction.KeyboardZoom.prototype.on);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"once",ol.interaction.KeyboardZoom.prototype.once);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"un",ol.interaction.KeyboardZoom.prototype.un);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"unByKey",ol.interaction.KeyboardZoom.prototype.unByKey);goog.exportProperty(ol.interaction.Modify.prototype,"getActive",ol.interaction.Modify.prototype.getActive);goog.exportProperty(ol.interaction.Modify.prototype,"setActive",ol.interaction.Modify.prototype.setActive);goog.exportProperty(ol.interaction.Modify.prototype,"get",ol.interaction.Modify.prototype.get);goog.exportProperty(ol.interaction.Modify.prototype,"getKeys",ol.interaction.Modify.prototype.getKeys);goog.exportProperty(ol.interaction.Modify.prototype,"getProperties",ol.interaction.Modify.prototype.getProperties);goog.exportProperty(ol.interaction.Modify.prototype,"set",ol.interaction.Modify.prototype.set);goog.exportProperty(ol.interaction.Modify.prototype,"setProperties",ol.interaction.Modify.prototype.setProperties);goog.exportProperty(ol.interaction.Modify.prototype,"unset",ol.interaction.Modify.prototype.unset);goog.exportProperty(ol.interaction.Modify.prototype,"changed",ol.interaction.Modify.prototype.changed);goog.exportProperty(ol.interaction.Modify.prototype,"getRevision",ol.interaction.Modify.prototype.getRevision);goog.exportProperty(ol.interaction.Modify.prototype,"on",ol.interaction.Modify.prototype.on);goog.exportProperty(ol.interaction.Modify.prototype,"once",ol.interaction.Modify.prototype.once);goog.exportProperty(ol.interaction.Modify.prototype,"un",ol.interaction.Modify.prototype.un);goog.exportProperty(ol.interaction.Modify.prototype,"unByKey",ol.interaction.Modify.prototype.unByKey);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getActive",ol.interaction.MouseWheelZoom.prototype.getActive);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"setActive",ol.interaction.MouseWheelZoom.prototype.setActive);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"get",ol.interaction.MouseWheelZoom.prototype.get);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getKeys",ol.interaction.MouseWheelZoom.prototype.getKeys);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getProperties",ol.interaction.MouseWheelZoom.prototype.getProperties);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"set",ol.interaction.MouseWheelZoom.prototype.set);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"setProperties",ol.interaction.MouseWheelZoom.prototype.setProperties);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"unset",ol.interaction.MouseWheelZoom.prototype.unset);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"changed",ol.interaction.MouseWheelZoom.prototype.changed);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getRevision",ol.interaction.MouseWheelZoom.prototype.getRevision);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"on",ol.interaction.MouseWheelZoom.prototype.on);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"once",ol.interaction.MouseWheelZoom.prototype.once);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"un",ol.interaction.MouseWheelZoom.prototype.un);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"unByKey",ol.interaction.MouseWheelZoom.prototype.unByKey);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getActive",ol.interaction.PinchRotate.prototype.getActive);goog.exportProperty(ol.interaction.PinchRotate.prototype,"setActive",ol.interaction.PinchRotate.prototype.setActive);goog.exportProperty(ol.interaction.PinchRotate.prototype,"get",ol.interaction.PinchRotate.prototype.get);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getKeys",ol.interaction.PinchRotate.prototype.getKeys);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getProperties",ol.interaction.PinchRotate.prototype.getProperties);goog.exportProperty(ol.interaction.PinchRotate.prototype,"set",ol.interaction.PinchRotate.prototype.set);goog.exportProperty(ol.interaction.PinchRotate.prototype,"setProperties",ol.interaction.PinchRotate.prototype.setProperties);goog.exportProperty(ol.interaction.PinchRotate.prototype,"unset",ol.interaction.PinchRotate.prototype.unset);goog.exportProperty(ol.interaction.PinchRotate.prototype,"changed",ol.interaction.PinchRotate.prototype.changed);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getRevision",ol.interaction.PinchRotate.prototype.getRevision);goog.exportProperty(ol.interaction.PinchRotate.prototype,"on",ol.interaction.PinchRotate.prototype.on);goog.exportProperty(ol.interaction.PinchRotate.prototype,"once",ol.interaction.PinchRotate.prototype.once);goog.exportProperty(ol.interaction.PinchRotate.prototype,"un",ol.interaction.PinchRotate.prototype.un);goog.exportProperty(ol.interaction.PinchRotate.prototype,"unByKey",ol.interaction.PinchRotate.prototype.unByKey);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getActive",ol.interaction.PinchZoom.prototype.getActive);goog.exportProperty(ol.interaction.PinchZoom.prototype,"setActive",ol.interaction.PinchZoom.prototype.setActive);goog.exportProperty(ol.interaction.PinchZoom.prototype,"get",ol.interaction.PinchZoom.prototype.get);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getKeys",ol.interaction.PinchZoom.prototype.getKeys);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getProperties",ol.interaction.PinchZoom.prototype.getProperties);goog.exportProperty(ol.interaction.PinchZoom.prototype,"set",ol.interaction.PinchZoom.prototype.set);goog.exportProperty(ol.interaction.PinchZoom.prototype,"setProperties",ol.interaction.PinchZoom.prototype.setProperties);goog.exportProperty(ol.interaction.PinchZoom.prototype,"unset",ol.interaction.PinchZoom.prototype.unset);goog.exportProperty(ol.interaction.PinchZoom.prototype,"changed",ol.interaction.PinchZoom.prototype.changed);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getRevision",ol.interaction.PinchZoom.prototype.getRevision);goog.exportProperty(ol.interaction.PinchZoom.prototype,"on",ol.interaction.PinchZoom.prototype.on);goog.exportProperty(ol.interaction.PinchZoom.prototype,"once",ol.interaction.PinchZoom.prototype.once);goog.exportProperty(ol.interaction.PinchZoom.prototype,"un",ol.interaction.PinchZoom.prototype.un);goog.exportProperty(ol.interaction.PinchZoom.prototype,"unByKey",ol.interaction.PinchZoom.prototype.unByKey);goog.exportProperty(ol.interaction.Select.prototype,"getActive",ol.interaction.Select.prototype.getActive);goog.exportProperty(ol.interaction.Select.prototype,"setActive",ol.interaction.Select.prototype.setActive);goog.exportProperty(ol.interaction.Select.prototype,"get",ol.interaction.Select.prototype.get);goog.exportProperty(ol.interaction.Select.prototype,"getKeys",ol.interaction.Select.prototype.getKeys);goog.exportProperty(ol.interaction.Select.prototype,"getProperties",ol.interaction.Select.prototype.getProperties);goog.exportProperty(ol.interaction.Select.prototype,"set",ol.interaction.Select.prototype.set);goog.exportProperty(ol.interaction.Select.prototype,"setProperties",ol.interaction.Select.prototype.setProperties);goog.exportProperty(ol.interaction.Select.prototype,"unset",ol.interaction.Select.prototype.unset);goog.exportProperty(ol.interaction.Select.prototype,"changed",ol.interaction.Select.prototype.changed);goog.exportProperty(ol.interaction.Select.prototype,"getRevision",ol.interaction.Select.prototype.getRevision);goog.exportProperty(ol.interaction.Select.prototype,"on",ol.interaction.Select.prototype.on);goog.exportProperty(ol.interaction.Select.prototype,"once",ol.interaction.Select.prototype.once);goog.exportProperty(ol.interaction.Select.prototype,"un",ol.interaction.Select.prototype.un);goog.exportProperty(ol.interaction.Select.prototype,"unByKey",ol.interaction.Select.prototype.unByKey);goog.exportProperty(ol.interaction.Snap.prototype,"getActive",ol.interaction.Snap.prototype.getActive);goog.exportProperty(ol.interaction.Snap.prototype,"setActive",ol.interaction.Snap.prototype.setActive);goog.exportProperty(ol.interaction.Snap.prototype,"get",ol.interaction.Snap.prototype.get);goog.exportProperty(ol.interaction.Snap.prototype,"getKeys",ol.interaction.Snap.prototype.getKeys);goog.exportProperty(ol.interaction.Snap.prototype,"getProperties",ol.interaction.Snap.prototype.getProperties);goog.exportProperty(ol.interaction.Snap.prototype,"set",ol.interaction.Snap.prototype.set);goog.exportProperty(ol.interaction.Snap.prototype,"setProperties",ol.interaction.Snap.prototype.setProperties);goog.exportProperty(ol.interaction.Snap.prototype,"unset",ol.interaction.Snap.prototype.unset);goog.exportProperty(ol.interaction.Snap.prototype,"changed",ol.interaction.Snap.prototype.changed);goog.exportProperty(ol.interaction.Snap.prototype,"getRevision",ol.interaction.Snap.prototype.getRevision);goog.exportProperty(ol.interaction.Snap.prototype,"on",ol.interaction.Snap.prototype.on);goog.exportProperty(ol.interaction.Snap.prototype,"once",ol.interaction.Snap.prototype.once);goog.exportProperty(ol.interaction.Snap.prototype,"un",ol.interaction.Snap.prototype.un);goog.exportProperty(ol.interaction.Snap.prototype,"unByKey",ol.interaction.Snap.prototype.unByKey);goog.exportProperty(ol.interaction.Translate.prototype,"getActive",ol.interaction.Translate.prototype.getActive);goog.exportProperty(ol.interaction.Translate.prototype,"setActive",ol.interaction.Translate.prototype.setActive);goog.exportProperty(ol.interaction.Translate.prototype,"get",ol.interaction.Translate.prototype.get);goog.exportProperty(ol.interaction.Translate.prototype,"getKeys",ol.interaction.Translate.prototype.getKeys);goog.exportProperty(ol.interaction.Translate.prototype,"getProperties",ol.interaction.Translate.prototype.getProperties);goog.exportProperty(ol.interaction.Translate.prototype,"set",ol.interaction.Translate.prototype.set);goog.exportProperty(ol.interaction.Translate.prototype,"setProperties",ol.interaction.Translate.prototype.setProperties);goog.exportProperty(ol.interaction.Translate.prototype,"unset",ol.interaction.Translate.prototype.unset);goog.exportProperty(ol.interaction.Translate.prototype,"changed",ol.interaction.Translate.prototype.changed);goog.exportProperty(ol.interaction.Translate.prototype,"getRevision",ol.interaction.Translate.prototype.getRevision);goog.exportProperty(ol.interaction.Translate.prototype,"on",ol.interaction.Translate.prototype.on);goog.exportProperty(ol.interaction.Translate.prototype,"once",ol.interaction.Translate.prototype.once);goog.exportProperty(ol.interaction.Translate.prototype,"un",ol.interaction.Translate.prototype.un);goog.exportProperty(ol.interaction.Translate.prototype,"unByKey",ol.interaction.Translate.prototype.unByKey);goog.exportProperty(ol.geom.Geometry.prototype,"get",ol.geom.Geometry.prototype.get);goog.exportProperty(ol.geom.Geometry.prototype,"getKeys",ol.geom.Geometry.prototype.getKeys);goog.exportProperty(ol.geom.Geometry.prototype,"getProperties",ol.geom.Geometry.prototype.getProperties);goog.exportProperty(ol.geom.Geometry.prototype,"set",ol.geom.Geometry.prototype.set);goog.exportProperty(ol.geom.Geometry.prototype,"setProperties",ol.geom.Geometry.prototype.setProperties);goog.exportProperty(ol.geom.Geometry.prototype,"unset",ol.geom.Geometry.prototype.unset);goog.exportProperty(ol.geom.Geometry.prototype,"changed",ol.geom.Geometry.prototype.changed);goog.exportProperty(ol.geom.Geometry.prototype,"getRevision",ol.geom.Geometry.prototype.getRevision);goog.exportProperty(ol.geom.Geometry.prototype,"on",ol.geom.Geometry.prototype.on);goog.exportProperty(ol.geom.Geometry.prototype,"once",ol.geom.Geometry.prototype.once);goog.exportProperty(ol.geom.Geometry.prototype,"un",ol.geom.Geometry.prototype.un);goog.exportProperty(ol.geom.Geometry.prototype,"unByKey",ol.geom.Geometry.prototype.unByKey);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getClosestPoint",ol.geom.SimpleGeometry.prototype.getClosestPoint);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getExtent",ol.geom.SimpleGeometry.prototype.getExtent);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"transform",ol.geom.SimpleGeometry.prototype.transform);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"get",ol.geom.SimpleGeometry.prototype.get);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getKeys",ol.geom.SimpleGeometry.prototype.getKeys);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getProperties",ol.geom.SimpleGeometry.prototype.getProperties);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"set",ol.geom.SimpleGeometry.prototype.set);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"setProperties",ol.geom.SimpleGeometry.prototype.setProperties);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"unset",ol.geom.SimpleGeometry.prototype.unset);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"changed",ol.geom.SimpleGeometry.prototype.changed);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getRevision",ol.geom.SimpleGeometry.prototype.getRevision);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"on",ol.geom.SimpleGeometry.prototype.on);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"once",ol.geom.SimpleGeometry.prototype.once);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"un",ol.geom.SimpleGeometry.prototype.un);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"unByKey",ol.geom.SimpleGeometry.prototype.unByKey);goog.exportProperty(ol.geom.Circle.prototype,"getFirstCoordinate",ol.geom.Circle.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.Circle.prototype,"getLastCoordinate",ol.geom.Circle.prototype.getLastCoordinate);goog.exportProperty(ol.geom.Circle.prototype,"getLayout",ol.geom.Circle.prototype.getLayout);goog.exportProperty(ol.geom.Circle.prototype,"getClosestPoint",ol.geom.Circle.prototype.getClosestPoint);goog.exportProperty(ol.geom.Circle.prototype,"getExtent",ol.geom.Circle.prototype.getExtent);goog.exportProperty(ol.geom.Circle.prototype,"get",ol.geom.Circle.prototype.get);goog.exportProperty(ol.geom.Circle.prototype,"getKeys",ol.geom.Circle.prototype.getKeys);goog.exportProperty(ol.geom.Circle.prototype,"getProperties",ol.geom.Circle.prototype.getProperties);goog.exportProperty(ol.geom.Circle.prototype,"set",ol.geom.Circle.prototype.set);goog.exportProperty(ol.geom.Circle.prototype,"setProperties",ol.geom.Circle.prototype.setProperties);goog.exportProperty(ol.geom.Circle.prototype,"unset",ol.geom.Circle.prototype.unset);goog.exportProperty(ol.geom.Circle.prototype,"changed",ol.geom.Circle.prototype.changed);goog.exportProperty(ol.geom.Circle.prototype,"getRevision",ol.geom.Circle.prototype.getRevision);goog.exportProperty(ol.geom.Circle.prototype,"on",ol.geom.Circle.prototype.on);goog.exportProperty(ol.geom.Circle.prototype,"once",ol.geom.Circle.prototype.once);goog.exportProperty(ol.geom.Circle.prototype,"un",ol.geom.Circle.prototype.un);goog.exportProperty(ol.geom.Circle.prototype,"unByKey",ol.geom.Circle.prototype.unByKey);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getClosestPoint",ol.geom.GeometryCollection.prototype.getClosestPoint);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getExtent",ol.geom.GeometryCollection.prototype.getExtent);goog.exportProperty(ol.geom.GeometryCollection.prototype,"transform",ol.geom.GeometryCollection.prototype.transform);goog.exportProperty(ol.geom.GeometryCollection.prototype,"get",ol.geom.GeometryCollection.prototype.get);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getKeys",ol.geom.GeometryCollection.prototype.getKeys);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getProperties",ol.geom.GeometryCollection.prototype.getProperties);goog.exportProperty(ol.geom.GeometryCollection.prototype,"set",ol.geom.GeometryCollection.prototype.set);goog.exportProperty(ol.geom.GeometryCollection.prototype,"setProperties",ol.geom.GeometryCollection.prototype.setProperties);goog.exportProperty(ol.geom.GeometryCollection.prototype,"unset",ol.geom.GeometryCollection.prototype.unset);goog.exportProperty(ol.geom.GeometryCollection.prototype,"changed",ol.geom.GeometryCollection.prototype.changed);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getRevision",ol.geom.GeometryCollection.prototype.getRevision);goog.exportProperty(ol.geom.GeometryCollection.prototype,"on",ol.geom.GeometryCollection.prototype.on);goog.exportProperty(ol.geom.GeometryCollection.prototype,"once",ol.geom.GeometryCollection.prototype.once);goog.exportProperty(ol.geom.GeometryCollection.prototype,"un",ol.geom.GeometryCollection.prototype.un);goog.exportProperty(ol.geom.GeometryCollection.prototype,"unByKey",ol.geom.GeometryCollection.prototype.unByKey);goog.exportProperty(ol.geom.LinearRing.prototype,"getFirstCoordinate",ol.geom.LinearRing.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.LinearRing.prototype,"getLastCoordinate",ol.geom.LinearRing.prototype.getLastCoordinate);goog.exportProperty(ol.geom.LinearRing.prototype,"getLayout",ol.geom.LinearRing.prototype.getLayout);goog.exportProperty(ol.geom.LinearRing.prototype,"getClosestPoint",ol.geom.LinearRing.prototype.getClosestPoint);goog.exportProperty(ol.geom.LinearRing.prototype,"getExtent",ol.geom.LinearRing.prototype.getExtent);goog.exportProperty(ol.geom.LinearRing.prototype,"transform",ol.geom.LinearRing.prototype.transform);goog.exportProperty(ol.geom.LinearRing.prototype,"get",ol.geom.LinearRing.prototype.get);goog.exportProperty(ol.geom.LinearRing.prototype,"getKeys",ol.geom.LinearRing.prototype.getKeys);goog.exportProperty(ol.geom.LinearRing.prototype,"getProperties",ol.geom.LinearRing.prototype.getProperties);goog.exportProperty(ol.geom.LinearRing.prototype,"set",ol.geom.LinearRing.prototype.set);goog.exportProperty(ol.geom.LinearRing.prototype,"setProperties",ol.geom.LinearRing.prototype.setProperties);goog.exportProperty(ol.geom.LinearRing.prototype,"unset",ol.geom.LinearRing.prototype.unset);goog.exportProperty(ol.geom.LinearRing.prototype,"changed",ol.geom.LinearRing.prototype.changed);goog.exportProperty(ol.geom.LinearRing.prototype,"getRevision",ol.geom.LinearRing.prototype.getRevision);goog.exportProperty(ol.geom.LinearRing.prototype,"on",ol.geom.LinearRing.prototype.on);goog.exportProperty(ol.geom.LinearRing.prototype,"once",ol.geom.LinearRing.prototype.once)
;goog.exportProperty(ol.geom.LinearRing.prototype,"un",ol.geom.LinearRing.prototype.un);goog.exportProperty(ol.geom.LinearRing.prototype,"unByKey",ol.geom.LinearRing.prototype.unByKey);goog.exportProperty(ol.geom.LineString.prototype,"getFirstCoordinate",ol.geom.LineString.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.LineString.prototype,"getLastCoordinate",ol.geom.LineString.prototype.getLastCoordinate);goog.exportProperty(ol.geom.LineString.prototype,"getLayout",ol.geom.LineString.prototype.getLayout);goog.exportProperty(ol.geom.LineString.prototype,"getClosestPoint",ol.geom.LineString.prototype.getClosestPoint);goog.exportProperty(ol.geom.LineString.prototype,"getExtent",ol.geom.LineString.prototype.getExtent);goog.exportProperty(ol.geom.LineString.prototype,"transform",ol.geom.LineString.prototype.transform);goog.exportProperty(ol.geom.LineString.prototype,"get",ol.geom.LineString.prototype.get);goog.exportProperty(ol.geom.LineString.prototype,"getKeys",ol.geom.LineString.prototype.getKeys);goog.exportProperty(ol.geom.LineString.prototype,"getProperties",ol.geom.LineString.prototype.getProperties);goog.exportProperty(ol.geom.LineString.prototype,"set",ol.geom.LineString.prototype.set);goog.exportProperty(ol.geom.LineString.prototype,"setProperties",ol.geom.LineString.prototype.setProperties);goog.exportProperty(ol.geom.LineString.prototype,"unset",ol.geom.LineString.prototype.unset);goog.exportProperty(ol.geom.LineString.prototype,"changed",ol.geom.LineString.prototype.changed);goog.exportProperty(ol.geom.LineString.prototype,"getRevision",ol.geom.LineString.prototype.getRevision);goog.exportProperty(ol.geom.LineString.prototype,"on",ol.geom.LineString.prototype.on);goog.exportProperty(ol.geom.LineString.prototype,"once",ol.geom.LineString.prototype.once);goog.exportProperty(ol.geom.LineString.prototype,"un",ol.geom.LineString.prototype.un);goog.exportProperty(ol.geom.LineString.prototype,"unByKey",ol.geom.LineString.prototype.unByKey);goog.exportProperty(ol.geom.MultiLineString.prototype,"getFirstCoordinate",ol.geom.MultiLineString.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLastCoordinate",ol.geom.MultiLineString.prototype.getLastCoordinate);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLayout",ol.geom.MultiLineString.prototype.getLayout);goog.exportProperty(ol.geom.MultiLineString.prototype,"getClosestPoint",ol.geom.MultiLineString.prototype.getClosestPoint);goog.exportProperty(ol.geom.MultiLineString.prototype,"getExtent",ol.geom.MultiLineString.prototype.getExtent);goog.exportProperty(ol.geom.MultiLineString.prototype,"transform",ol.geom.MultiLineString.prototype.transform);goog.exportProperty(ol.geom.MultiLineString.prototype,"get",ol.geom.MultiLineString.prototype.get);goog.exportProperty(ol.geom.MultiLineString.prototype,"getKeys",ol.geom.MultiLineString.prototype.getKeys);goog.exportProperty(ol.geom.MultiLineString.prototype,"getProperties",ol.geom.MultiLineString.prototype.getProperties);goog.exportProperty(ol.geom.MultiLineString.prototype,"set",ol.geom.MultiLineString.prototype.set);goog.exportProperty(ol.geom.MultiLineString.prototype,"setProperties",ol.geom.MultiLineString.prototype.setProperties);goog.exportProperty(ol.geom.MultiLineString.prototype,"unset",ol.geom.MultiLineString.prototype.unset);goog.exportProperty(ol.geom.MultiLineString.prototype,"changed",ol.geom.MultiLineString.prototype.changed);goog.exportProperty(ol.geom.MultiLineString.prototype,"getRevision",ol.geom.MultiLineString.prototype.getRevision);goog.exportProperty(ol.geom.MultiLineString.prototype,"on",ol.geom.MultiLineString.prototype.on);goog.exportProperty(ol.geom.MultiLineString.prototype,"once",ol.geom.MultiLineString.prototype.once);goog.exportProperty(ol.geom.MultiLineString.prototype,"un",ol.geom.MultiLineString.prototype.un);goog.exportProperty(ol.geom.MultiLineString.prototype,"unByKey",ol.geom.MultiLineString.prototype.unByKey);goog.exportProperty(ol.geom.MultiPoint.prototype,"getFirstCoordinate",ol.geom.MultiPoint.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.MultiPoint.prototype,"getLastCoordinate",ol.geom.MultiPoint.prototype.getLastCoordinate);goog.exportProperty(ol.geom.MultiPoint.prototype,"getLayout",ol.geom.MultiPoint.prototype.getLayout);goog.exportProperty(ol.geom.MultiPoint.prototype,"getClosestPoint",ol.geom.MultiPoint.prototype.getClosestPoint);goog.exportProperty(ol.geom.MultiPoint.prototype,"getExtent",ol.geom.MultiPoint.prototype.getExtent);goog.exportProperty(ol.geom.MultiPoint.prototype,"transform",ol.geom.MultiPoint.prototype.transform);goog.exportProperty(ol.geom.MultiPoint.prototype,"get",ol.geom.MultiPoint.prototype.get);goog.exportProperty(ol.geom.MultiPoint.prototype,"getKeys",ol.geom.MultiPoint.prototype.getKeys);goog.exportProperty(ol.geom.MultiPoint.prototype,"getProperties",ol.geom.MultiPoint.prototype.getProperties);goog.exportProperty(ol.geom.MultiPoint.prototype,"set",ol.geom.MultiPoint.prototype.set);goog.exportProperty(ol.geom.MultiPoint.prototype,"setProperties",ol.geom.MultiPoint.prototype.setProperties);goog.exportProperty(ol.geom.MultiPoint.prototype,"unset",ol.geom.MultiPoint.prototype.unset);goog.exportProperty(ol.geom.MultiPoint.prototype,"changed",ol.geom.MultiPoint.prototype.changed);goog.exportProperty(ol.geom.MultiPoint.prototype,"getRevision",ol.geom.MultiPoint.prototype.getRevision);goog.exportProperty(ol.geom.MultiPoint.prototype,"on",ol.geom.MultiPoint.prototype.on);goog.exportProperty(ol.geom.MultiPoint.prototype,"once",ol.geom.MultiPoint.prototype.once);goog.exportProperty(ol.geom.MultiPoint.prototype,"un",ol.geom.MultiPoint.prototype.un);goog.exportProperty(ol.geom.MultiPoint.prototype,"unByKey",ol.geom.MultiPoint.prototype.unByKey);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getFirstCoordinate",ol.geom.MultiPolygon.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getLastCoordinate",ol.geom.MultiPolygon.prototype.getLastCoordinate);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getLayout",ol.geom.MultiPolygon.prototype.getLayout);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getClosestPoint",ol.geom.MultiPolygon.prototype.getClosestPoint);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getExtent",ol.geom.MultiPolygon.prototype.getExtent);goog.exportProperty(ol.geom.MultiPolygon.prototype,"transform",ol.geom.MultiPolygon.prototype.transform);goog.exportProperty(ol.geom.MultiPolygon.prototype,"get",ol.geom.MultiPolygon.prototype.get);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getKeys",ol.geom.MultiPolygon.prototype.getKeys);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getProperties",ol.geom.MultiPolygon.prototype.getProperties);goog.exportProperty(ol.geom.MultiPolygon.prototype,"set",ol.geom.MultiPolygon.prototype.set);goog.exportProperty(ol.geom.MultiPolygon.prototype,"setProperties",ol.geom.MultiPolygon.prototype.setProperties);goog.exportProperty(ol.geom.MultiPolygon.prototype,"unset",ol.geom.MultiPolygon.prototype.unset);goog.exportProperty(ol.geom.MultiPolygon.prototype,"changed",ol.geom.MultiPolygon.prototype.changed);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getRevision",ol.geom.MultiPolygon.prototype.getRevision);goog.exportProperty(ol.geom.MultiPolygon.prototype,"on",ol.geom.MultiPolygon.prototype.on);goog.exportProperty(ol.geom.MultiPolygon.prototype,"once",ol.geom.MultiPolygon.prototype.once);goog.exportProperty(ol.geom.MultiPolygon.prototype,"un",ol.geom.MultiPolygon.prototype.un);goog.exportProperty(ol.geom.MultiPolygon.prototype,"unByKey",ol.geom.MultiPolygon.prototype.unByKey);goog.exportProperty(ol.geom.Point.prototype,"getFirstCoordinate",ol.geom.Point.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.Point.prototype,"getLastCoordinate",ol.geom.Point.prototype.getLastCoordinate);goog.exportProperty(ol.geom.Point.prototype,"getLayout",ol.geom.Point.prototype.getLayout);goog.exportProperty(ol.geom.Point.prototype,"getClosestPoint",ol.geom.Point.prototype.getClosestPoint);goog.exportProperty(ol.geom.Point.prototype,"getExtent",ol.geom.Point.prototype.getExtent);goog.exportProperty(ol.geom.Point.prototype,"transform",ol.geom.Point.prototype.transform);goog.exportProperty(ol.geom.Point.prototype,"get",ol.geom.Point.prototype.get);goog.exportProperty(ol.geom.Point.prototype,"getKeys",ol.geom.Point.prototype.getKeys);goog.exportProperty(ol.geom.Point.prototype,"getProperties",ol.geom.Point.prototype.getProperties);goog.exportProperty(ol.geom.Point.prototype,"set",ol.geom.Point.prototype.set);goog.exportProperty(ol.geom.Point.prototype,"setProperties",ol.geom.Point.prototype.setProperties);goog.exportProperty(ol.geom.Point.prototype,"unset",ol.geom.Point.prototype.unset);goog.exportProperty(ol.geom.Point.prototype,"changed",ol.geom.Point.prototype.changed);goog.exportProperty(ol.geom.Point.prototype,"getRevision",ol.geom.Point.prototype.getRevision);goog.exportProperty(ol.geom.Point.prototype,"on",ol.geom.Point.prototype.on);goog.exportProperty(ol.geom.Point.prototype,"once",ol.geom.Point.prototype.once);goog.exportProperty(ol.geom.Point.prototype,"un",ol.geom.Point.prototype.un);goog.exportProperty(ol.geom.Point.prototype,"unByKey",ol.geom.Point.prototype.unByKey);goog.exportProperty(ol.geom.Polygon.prototype,"getFirstCoordinate",ol.geom.Polygon.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.Polygon.prototype,"getLastCoordinate",ol.geom.Polygon.prototype.getLastCoordinate);goog.exportProperty(ol.geom.Polygon.prototype,"getLayout",ol.geom.Polygon.prototype.getLayout);goog.exportProperty(ol.geom.Polygon.prototype,"getClosestPoint",ol.geom.Polygon.prototype.getClosestPoint);goog.exportProperty(ol.geom.Polygon.prototype,"getExtent",ol.geom.Polygon.prototype.getExtent);goog.exportProperty(ol.geom.Polygon.prototype,"transform",ol.geom.Polygon.prototype.transform);goog.exportProperty(ol.geom.Polygon.prototype,"get",ol.geom.Polygon.prototype.get);goog.exportProperty(ol.geom.Polygon.prototype,"getKeys",ol.geom.Polygon.prototype.getKeys);goog.exportProperty(ol.geom.Polygon.prototype,"getProperties",ol.geom.Polygon.prototype.getProperties);goog.exportProperty(ol.geom.Polygon.prototype,"set",ol.geom.Polygon.prototype.set);goog.exportProperty(ol.geom.Polygon.prototype,"setProperties",ol.geom.Polygon.prototype.setProperties);goog.exportProperty(ol.geom.Polygon.prototype,"unset",ol.geom.Polygon.prototype.unset);goog.exportProperty(ol.geom.Polygon.prototype,"changed",ol.geom.Polygon.prototype.changed);goog.exportProperty(ol.geom.Polygon.prototype,"getRevision",ol.geom.Polygon.prototype.getRevision);goog.exportProperty(ol.geom.Polygon.prototype,"on",ol.geom.Polygon.prototype.on);goog.exportProperty(ol.geom.Polygon.prototype,"once",ol.geom.Polygon.prototype.once);goog.exportProperty(ol.geom.Polygon.prototype,"un",ol.geom.Polygon.prototype.un);goog.exportProperty(ol.geom.Polygon.prototype,"unByKey",ol.geom.Polygon.prototype.unByKey);goog.exportProperty(ol.format.GML2.prototype,"readFeatures",ol.format.GML2.prototype.readFeatures);goog.exportProperty(ol.format.GML3.prototype,"readFeatures",ol.format.GML3.prototype.readFeatures);goog.exportProperty(ol.format.GML.prototype,"readFeatures",ol.format.GML.prototype.readFeatures);goog.exportProperty(ol.control.Control.prototype,"get",ol.control.Control.prototype.get);goog.exportProperty(ol.control.Control.prototype,"getKeys",ol.control.Control.prototype.getKeys);goog.exportProperty(ol.control.Control.prototype,"getProperties",ol.control.Control.prototype.getProperties);goog.exportProperty(ol.control.Control.prototype,"set",ol.control.Control.prototype.set);goog.exportProperty(ol.control.Control.prototype,"setProperties",ol.control.Control.prototype.setProperties);goog.exportProperty(ol.control.Control.prototype,"unset",ol.control.Control.prototype.unset);goog.exportProperty(ol.control.Control.prototype,"changed",ol.control.Control.prototype.changed);goog.exportProperty(ol.control.Control.prototype,"getRevision",ol.control.Control.prototype.getRevision);goog.exportProperty(ol.control.Control.prototype,"on",ol.control.Control.prototype.on);goog.exportProperty(ol.control.Control.prototype,"once",ol.control.Control.prototype.once);goog.exportProperty(ol.control.Control.prototype,"un",ol.control.Control.prototype.un);goog.exportProperty(ol.control.Control.prototype,"unByKey",ol.control.Control.prototype.unByKey);goog.exportProperty(ol.control.Attribution.prototype,"getMap",ol.control.Attribution.prototype.getMap);goog.exportProperty(ol.control.Attribution.prototype,"setMap",ol.control.Attribution.prototype.setMap);goog.exportProperty(ol.control.Attribution.prototype,"setTarget",ol.control.Attribution.prototype.setTarget);goog.exportProperty(ol.control.Attribution.prototype,"get",ol.control.Attribution.prototype.get);goog.exportProperty(ol.control.Attribution.prototype,"getKeys",ol.control.Attribution.prototype.getKeys);goog.exportProperty(ol.control.Attribution.prototype,"getProperties",ol.control.Attribution.prototype.getProperties);goog.exportProperty(ol.control.Attribution.prototype,"set",ol.control.Attribution.prototype.set);goog.exportProperty(ol.control.Attribution.prototype,"setProperties",ol.control.Attribution.prototype.setProperties);goog.exportProperty(ol.control.Attribution.prototype,"unset",ol.control.Attribution.prototype.unset);goog.exportProperty(ol.control.Attribution.prototype,"changed",ol.control.Attribution.prototype.changed);goog.exportProperty(ol.control.Attribution.prototype,"getRevision",ol.control.Attribution.prototype.getRevision);goog.exportProperty(ol.control.Attribution.prototype,"on",ol.control.Attribution.prototype.on);goog.exportProperty(ol.control.Attribution.prototype,"once",ol.control.Attribution.prototype.once);goog.exportProperty(ol.control.Attribution.prototype,"un",ol.control.Attribution.prototype.un);goog.exportProperty(ol.control.Attribution.prototype,"unByKey",ol.control.Attribution.prototype.unByKey);goog.exportProperty(ol.control.FullScreen.prototype,"getMap",ol.control.FullScreen.prototype.getMap);goog.exportProperty(ol.control.FullScreen.prototype,"setMap",ol.control.FullScreen.prototype.setMap);goog.exportProperty(ol.control.FullScreen.prototype,"setTarget",ol.control.FullScreen.prototype.setTarget);goog.exportProperty(ol.control.FullScreen.prototype,"get",ol.control.FullScreen.prototype.get);goog.exportProperty(ol.control.FullScreen.prototype,"getKeys",ol.control.FullScreen.prototype.getKeys);goog.exportProperty(ol.control.FullScreen.prototype,"getProperties",ol.control.FullScreen.prototype.getProperties);goog.exportProperty(ol.control.FullScreen.prototype,"set",ol.control.FullScreen.prototype.set);goog.exportProperty(ol.control.FullScreen.prototype,"setProperties",ol.control.FullScreen.prototype.setProperties);goog.exportProperty(ol.control.FullScreen.prototype,"unset",ol.control.FullScreen.prototype.unset);goog.exportProperty(ol.control.FullScreen.prototype,"changed",ol.control.FullScreen.prototype.changed);goog.exportProperty(ol.control.FullScreen.prototype,"getRevision",ol.control.FullScreen.prototype.getRevision);goog.exportProperty(ol.control.FullScreen.prototype,"on",ol.control.FullScreen.prototype.on);goog.exportProperty(ol.control.FullScreen.prototype,"once",ol.control.FullScreen.prototype.once);goog.exportProperty(ol.control.FullScreen.prototype,"un",ol.control.FullScreen.prototype.un);goog.exportProperty(ol.control.FullScreen.prototype,"unByKey",ol.control.FullScreen.prototype.unByKey);goog.exportProperty(ol.control.MousePosition.prototype,"getMap",ol.control.MousePosition.prototype.getMap);goog.exportProperty(ol.control.MousePosition.prototype,"setMap",ol.control.MousePosition.prototype.setMap);goog.exportProperty(ol.control.MousePosition.prototype,"setTarget",ol.control.MousePosition.prototype.setTarget);goog.exportProperty(ol.control.MousePosition.prototype,"get",ol.control.MousePosition.prototype.get);goog.exportProperty(ol.control.MousePosition.prototype,"getKeys",ol.control.MousePosition.prototype.getKeys);goog.exportProperty(ol.control.MousePosition.prototype,"getProperties",ol.control.MousePosition.prototype.getProperties);goog.exportProperty(ol.control.MousePosition.prototype,"set",ol.control.MousePosition.prototype.set);goog.exportProperty(ol.control.MousePosition.prototype,"setProperties",ol.control.MousePosition.prototype.setProperties);goog.exportProperty(ol.control.MousePosition.prototype,"unset",ol.control.MousePosition.prototype.unset);goog.exportProperty(ol.control.MousePosition.prototype,"changed",ol.control.MousePosition.prototype.changed);goog.exportProperty(ol.control.MousePosition.prototype,"getRevision",ol.control.MousePosition.prototype.getRevision);goog.exportProperty(ol.control.MousePosition.prototype,"on",ol.control.MousePosition.prototype.on);goog.exportProperty(ol.control.MousePosition.prototype,"once",ol.control.MousePosition.prototype.once);goog.exportProperty(ol.control.MousePosition.prototype,"un",ol.control.MousePosition.prototype.un);goog.exportProperty(ol.control.MousePosition.prototype,"unByKey",ol.control.MousePosition.prototype.unByKey);goog.exportProperty(ol.control.OverviewMap.prototype,"getMap",ol.control.OverviewMap.prototype.getMap);goog.exportProperty(ol.control.OverviewMap.prototype,"setMap",ol.control.OverviewMap.prototype.setMap);goog.exportProperty(ol.control.OverviewMap.prototype,"setTarget",ol.control.OverviewMap.prototype.setTarget);goog.exportProperty(ol.control.OverviewMap.prototype,"get",ol.control.OverviewMap.prototype.get);goog.exportProperty(ol.control.OverviewMap.prototype,"getKeys",ol.control.OverviewMap.prototype.getKeys);goog.exportProperty(ol.control.OverviewMap.prototype,"getProperties",ol.control.OverviewMap.prototype.getProperties);goog.exportProperty(ol.control.OverviewMap.prototype,"set",ol.control.OverviewMap.prototype.set);goog.exportProperty(ol.control.OverviewMap.prototype,"setProperties",ol.control.OverviewMap.prototype.setProperties);goog.exportProperty(ol.control.OverviewMap.prototype,"unset",ol.control.OverviewMap.prototype.unset);goog.exportProperty(ol.control.OverviewMap.prototype,"changed",ol.control.OverviewMap.prototype.changed);goog.exportProperty(ol.control.OverviewMap.prototype,"getRevision",ol.control.OverviewMap.prototype.getRevision);goog.exportProperty(ol.control.OverviewMap.prototype,"on",ol.control.OverviewMap.prototype.on);goog.exportProperty(ol.control.OverviewMap.prototype,"once",ol.control.OverviewMap.prototype.once);goog.exportProperty(ol.control.OverviewMap.prototype,"un",ol.control.OverviewMap.prototype.un);goog.exportProperty(ol.control.OverviewMap.prototype,"unByKey",ol.control.OverviewMap.prototype.unByKey);goog.exportProperty(ol.control.Rotate.prototype,"getMap",ol.control.Rotate.prototype.getMap);goog.exportProperty(ol.control.Rotate.prototype,"setMap",ol.control.Rotate.prototype.setMap);goog.exportProperty(ol.control.Rotate.prototype,"setTarget",ol.control.Rotate.prototype.setTarget);goog.exportProperty(ol.control.Rotate.prototype,"get",ol.control.Rotate.prototype.get);goog.exportProperty(ol.control.Rotate.prototype,"getKeys",ol.control.Rotate.prototype.getKeys);goog.exportProperty(ol.control.Rotate.prototype,"getProperties",ol.control.Rotate.prototype.getProperties);goog.exportProperty(ol.control.Rotate.prototype,"set",ol.control.Rotate.prototype.set);goog.exportProperty(ol.control.Rotate.prototype,"setProperties",ol.control.Rotate.prototype.setProperties);goog.exportProperty(ol.control.Rotate.prototype,"unset",ol.control.Rotate.prototype.unset);goog.exportProperty(ol.control.Rotate.prototype,"changed",ol.control.Rotate.prototype.changed);goog.exportProperty(ol.control.Rotate.prototype,"getRevision",ol.control.Rotate.prototype.getRevision);goog.exportProperty(ol.control.Rotate.prototype,"on",ol.control.Rotate.prototype.on);goog.exportProperty(ol.control.Rotate.prototype,"once",ol.control.Rotate.prototype.once);goog.exportProperty(ol.control.Rotate.prototype,"un",ol.control.Rotate.prototype.un);goog.exportProperty(ol.control.Rotate.prototype,"unByKey",ol.control.Rotate.prototype.unByKey);goog.exportProperty(ol.control.ScaleLine.prototype,"getMap",ol.control.ScaleLine.prototype.getMap);goog.exportProperty(ol.control.ScaleLine.prototype,"setMap",ol.control.ScaleLine.prototype.setMap);goog.exportProperty(ol.control.ScaleLine.prototype,"setTarget",ol.control.ScaleLine.prototype.setTarget);goog.exportProperty(ol.control.ScaleLine.prototype,"get",ol.control.ScaleLine.prototype.get);goog.exportProperty(ol.control.ScaleLine.prototype,"getKeys",ol.control.ScaleLine.prototype.getKeys);goog.exportProperty(ol.control.ScaleLine.prototype,"getProperties",ol.control.ScaleLine.prototype.getProperties);goog.exportProperty(ol.control.ScaleLine.prototype,"set",ol.control.ScaleLine.prototype.set);goog.exportProperty(ol.control.ScaleLine.prototype,"setProperties",ol.control.ScaleLine.prototype.setProperties);goog.exportProperty(ol.control.ScaleLine.prototype,"unset",ol.control.ScaleLine.prototype.unset);goog.exportProperty(ol.control.ScaleLine.prototype,"changed",ol.control.ScaleLine.prototype.changed);goog.exportProperty(ol.control.ScaleLine.prototype,"getRevision",ol.control.ScaleLine.prototype.getRevision);goog.exportProperty(ol.control.ScaleLine.prototype,"on",ol.control.ScaleLine.prototype.on);goog.exportProperty(ol.control.ScaleLine.prototype,"once",ol.control.ScaleLine.prototype.once);goog.exportProperty(ol.control.ScaleLine.prototype,"un",ol.control.ScaleLine.prototype.un);goog.exportProperty(ol.control.ScaleLine.prototype,"unByKey",ol.control.ScaleLine.prototype.unByKey);goog.exportProperty(ol.control.Zoom.prototype,"getMap",ol.control.Zoom.prototype.getMap);goog.exportProperty(ol.control.Zoom.prototype,"setMap",ol.control.Zoom.prototype.setMap);goog.exportProperty(ol.control.Zoom.prototype,"setTarget",ol.control.Zoom.prototype.setTarget);goog.exportProperty(ol.control.Zoom.prototype,"get",ol.control.Zoom.prototype.get);goog.exportProperty(ol.control.Zoom.prototype,"getKeys",ol.control.Zoom.prototype.getKeys);goog.exportProperty(ol.control.Zoom.prototype,"getProperties",ol.control.Zoom.prototype.getProperties);goog.exportProperty(ol.control.Zoom.prototype,"set",ol.control.Zoom.prototype.set);goog.exportProperty(ol.control.Zoom.prototype,"setProperties",ol.control.Zoom.prototype.setProperties);goog.exportProperty(ol.control.Zoom.prototype,"unset",ol.control.Zoom.prototype.unset);goog.exportProperty(ol.control.Zoom.prototype,"changed",ol.control.Zoom.prototype.changed);goog.exportProperty(ol.control.Zoom.prototype,"getRevision",ol.control.Zoom.prototype.getRevision);goog.exportProperty(ol.control.Zoom.prototype,"on",ol.control.Zoom.prototype.on);goog.exportProperty(ol.control.Zoom.prototype,"once",ol.control.Zoom.prototype.once);goog.exportProperty(ol.control.Zoom.prototype,"un",ol.control.Zoom.prototype.un);goog.exportProperty(ol.control.Zoom.prototype,"unByKey",ol.control.Zoom.prototype.unByKey);goog.exportProperty(ol.control.ZoomSlider.prototype,"getMap",ol.control.ZoomSlider.prototype.getMap);goog.exportProperty(ol.control.ZoomSlider.prototype,"setMap",ol.control.ZoomSlider.prototype.setMap);goog.exportProperty(ol.control.ZoomSlider.prototype,"setTarget",ol.control.ZoomSlider.prototype.setTarget);goog.exportProperty(ol.control.ZoomSlider.prototype,"get",ol.control.ZoomSlider.prototype.get);goog.exportProperty(ol.control.ZoomSlider.prototype,"getKeys",ol.control.ZoomSlider.prototype.getKeys);goog.exportProperty(ol.control.ZoomSlider.prototype,"getProperties",ol.control.ZoomSlider.prototype.getProperties);goog.exportProperty(ol.control.ZoomSlider.prototype,"set",ol.control.ZoomSlider.prototype.set);goog.exportProperty(ol.control.ZoomSlider.prototype,"setProperties",ol.control.ZoomSlider.prototype.setProperties);goog.exportProperty(ol.control.ZoomSlider.prototype,"unset",ol.control.ZoomSlider.prototype.unset);goog.exportProperty(ol.control.ZoomSlider.prototype,"changed",ol.control.ZoomSlider.prototype.changed);goog.exportProperty(ol.control.ZoomSlider.prototype,"getRevision",ol.control.ZoomSlider.prototype.getRevision);goog.exportProperty(ol.control.ZoomSlider.prototype,"on",ol.control.ZoomSlider.prototype.on);goog.exportProperty(ol.control.ZoomSlider.prototype,"once",ol.control.ZoomSlider.prototype.once);goog.exportProperty(ol.control.ZoomSlider.prototype,"un",ol.control.ZoomSlider.prototype.un);goog.exportProperty(ol.control.ZoomSlider.prototype,"unByKey",ol.control.ZoomSlider.prototype.unByKey);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getMap",ol.control.ZoomToExtent.prototype.getMap);goog.exportProperty(ol.control.ZoomToExtent.prototype,"setMap",ol.control.ZoomToExtent.prototype.setMap);goog.exportProperty(ol.control.ZoomToExtent.prototype,"setTarget",ol.control.ZoomToExtent.prototype.setTarget);goog.exportProperty(ol.control.ZoomToExtent.prototype,"get",ol.control.ZoomToExtent.prototype.get);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getKeys",ol.control.ZoomToExtent.prototype.getKeys);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getProperties",ol.control.ZoomToExtent.prototype.getProperties);goog.exportProperty(ol.control.ZoomToExtent.prototype,"set",ol.control.ZoomToExtent.prototype.set);goog.exportProperty(ol.control.ZoomToExtent.prototype,"setProperties",ol.control.ZoomToExtent.prototype.setProperties);goog.exportProperty(ol.control.ZoomToExtent.prototype,"unset",ol.control.ZoomToExtent.prototype.unset);goog.exportProperty(ol.control.ZoomToExtent.prototype,"changed",ol.control.ZoomToExtent.prototype.changed);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getRevision",ol.control.ZoomToExtent.prototype.getRevision);goog.exportProperty(ol.control.ZoomToExtent.prototype,"on",ol.control.ZoomToExtent.prototype.on);goog.exportProperty(ol.control.ZoomToExtent.prototype,"once",ol.control.ZoomToExtent.prototype.once);goog.exportProperty(ol.control.ZoomToExtent.prototype,"un",ol.control.ZoomToExtent.prototype.un);goog.exportProperty(ol.control.ZoomToExtent.prototype,"unByKey",ol.control.ZoomToExtent.prototype.unByKey);OPENLAYERS.ol=ol;return OPENLAYERS.ol});"use strict";var DHuSModule=angular.module("DHuS-webclient",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ngToast","ui.bootstrap"]);DHuSModule.config(["$routeProvider",function(a){a.when("/home",{templateUrl:"sections/main/view.html",controller:"MainCtrl"}).when("/home/:r",{templateUrl:"sections/reset-password/view.html",controller:"ResetPasswordCtrl",resolve:{usercode:["$route",function(a){return a.current.params.r.replace("r=","")}]}}).when("/user-profile",{templateUrl:"sections/user-profile/view.html",controller:"UserProfileCtrl"}).when("/self-registration",{templateUrl:"sections/self-registration/view.html",controller:"SelfRegistrationCtrl"}).when("/forgot-password",{templateUrl:"sections/forgot-password/view.html",controller:"ForgotPasswordCtrl"}).when("/example",{templateUrl:"sections/example/view.html",controller:"ExampleCtrl"}).when("/user-cart",{templateUrl:"sections/user-cart/view.html",controller:"UserCartCtrl"}).when("/user-searches",{templateUrl:"sections/user-searches/view.html",controller:"UserSearchesCtrl"}).when("/terms-conditions",{templateUrl:"sections/terms-conditions/view.html",controller:"TermsConditionsCtrl"}).when("/management",{templateUrl:"sections/management/view.html",controller:"ManagementCtrl"}).when("/odata-synchronizer",{templateUrl:"sections/admin-odata-synchronizer/view.html",controller:"OdataSynchronizerCtrl"}).when("/upload-product",{templateUrl:"sections/upload-product/view.html",controller:"UploadCtrl"}).otherwise({redirectTo:"/home"})}]).run(["LayoutManager","StyleService","ConfigurationService","$rootScope","$location","$http","Session",function(a,b,c,d,e,f,g){window.http=f;f.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";a.init();b.init();var h=this;if(!c.isLoaded()){c.getConfiguration().then(function(a){if(a){ApplicationService=a}d.debugMode=ApplicationService.debugMode},function(a){})}else{d.debugMode=ApplicationService.debugMode}jQuery.ajaxSettings=null;g.checkSession()}]);angular.module("DHuS-webclient").filter("beautifuldate",function(){return function(a){return moment(a).format()}}).filter("utcdatefromtime",function(){return function(a){return moment.utc(a)}});angular.module("DHuS-webclient").filter("checkHTML",function(){return function(a){if(a.indexOf("<a")==0&&a.indexOf("</a>"==a.length-1)){var b=document.createElement("div");b.innerHTML=a;return b.firstChild.innerHTML}else{return a}}});"use strict";angular.module("DHuS-webclient").factory("AuthorizationInterceptor",["$q","$injector","Logger","UserInfoService",function(a,b,c,d){var e=[{url:/components\/.*\/view.html/g,method:"GET"},{url:/template\/.*\/.*.html/g,method:"GET"},{url:/sections\/.*\/view.html/g,method:"GET"},{url:/application_layout.html/g,method:"GET"},{url:/config\/appconfig.json/g,method:"GET"},{url:/config\/styles.json/g,method:"GET"},{url:/.*\/\/login/g,method:"POST"},{url:/.*\/\/logout/g,method:"POST"},{url:/ngToast\/toast.html/g,method:"GET"},{url:/ngToast\/toastMessage.html/g,method:"GET"},{url:/.*api\/stub\/signup/g,method:"POST"},{url:/.*api\/stub\/version/g,method:"GET"},{url:/.*api\/stub\/configuration/g,method:"GET"},{url:/.*api\/stub\/countries/g,method:"GET"},{url:/.*api\/stub\/forgotpwd/g,method:"POST"},{url:/.*api\/stub\/resetpwd/g,method:"POST"}];return{request:function(a){if(a.bypassCheck){return a}var c=b.get("AuthenticationService");var d=b.get("Session");var f=b.get("SearchModel");SpinnerManager.on();for(var g=0;g<e.length;g++){var h=a.url.match(e[g].url);if(h&&a.method==e[g].method){return a}}if(c.logged&&d.isSessionPresent()){return a}return a},requestError:function(a){c.warn("http","http request error:"+JSON.stringify(a));SpinnerManager.off()},response:function(a){c.log("http","http response:"+JSON.stringify(a));SpinnerManager.off();return a},responseError:function(d){var e=b.get("AuthenticationService");var f=b.get("Session");var g=b.get("SearchModel");c.warn("http","http response error:"+JSON.stringify(d));SpinnerManager.off();if(d.status==401){e.showLogin();f.setUserLoggedOut();g.createModel({});$(document).trigger("closeSession");return a.reject(d)}return a.reject(d)}}}]);angular.module("DHuS-webclient").config(["$httpProvider",function(a){a.interceptors.push("AuthorizationInterceptor")}]);angular.module("DHuS-webclient").factory("Logger",function(){return{ready:true,conf:{active:false,level:"debug"},channels:{MainHttpInterceptor:true,cart:true,map:true,list:true,"product-details-map":true,quicklook:true,"search-bar":true,"search-container":true,http:true,"search-service":true,"product-cart-service":true,"user-searches":true,"search-model-service":true},levels:{debug:0,log:1,warn:2,error:3},loggers:{debug:function(a){console.debug(a)},log:function(a){console.log(a)},warn:function(a){console.warn(a)},error:function(a){console.error(a)}},levelLog:function(a,b,c){this.loggers[b]("["+moment().format("HH:mm:ss.SSS")+"]-"+"["+a+"]-"+c)},logImp:function(a,b,c){this.conf.active&&this.channels[b]&&this.levels[a]>=this.levels[this.conf.level]&&this.levelLog(b,a,c)},log:function(a,b){this.logImp("log",a,b)},warn:function(a,b){this.logImp("warn",a,b)},debug:function(a,b){this.logImp("debug",a,b)},error:function(a,b){this.logImp("error",a,b)}}});angular.module("DHuS-webclient").factory("LayoutManager",["$document","$window",function(a,b){var c="#page-container",d="#dhus-toolbar-container";var e=function(){var a=this;$(c).css("height",$(window).height()-$(d).height());$(c).css("top",$(d).height())};var f={resize:function(){var a=this;e()},init:function(){var c=this;angular.element(b).bind("resize",c.resize);angular.element(a).ready(c.resize)},getPageContainerTop:function(){return $(c).top()},getPageContainerHeight:function(){return $(c).height()},getToolbarHeight:function(){return $(d).height()},getScreenHeight:function(){return angular.element(b).height()}};$(document).ready(e);return f}])
;angular.module("DHuS-webclient").factory("UIUtils",["$window",function(a){return{XS_LIMIT:768,responsiveLayout:function(b,c,d,e){var f=this.XS_LIMIT?this.XS_LIMIT:768,g=992,h=1200,i=angular.element(a).width();if(i<=f){b()}if(i>f&&i<=g){c()}if(i>g&&i<=h){d()}if(i>h){e()}},getScreenWidth:function(){return angular.element(a).width()},getScreenHeight:function(){return angular.element(a).height()},getElement2ScreenRatio:function(b){return parseInt($(b).css("width"))/parseInt(angular.element(a).width())}}}]);angular.module("DHuS-webclient").factory("StyleService",["$document","$window","$http",function(a,b,c){var d=[{matches:[{name:"Satellite name",value:"Sentinel-3"}],styles:{fill:{color:[0,0,255,.5]},stroke:{color:[0,0,255,1],width:1}},selected_styles:{fill:{color:[0,0,255,.7]},stroke:{color:[0,0,255,1],width:2}},highlighted_styles:{fill:{color:[0,0,255,.3]},stroke:{color:[0,0,255,1],width:1}}},{matches:[{name:"Satellite name",value:"Sentinel-2"}],styles:{fill:{color:[0,255,0,.5]},stroke:{color:[0,255,0,1],width:1}},selected_styles:{fill:{color:[0,255,0,.7]},stroke:{color:[0,255,0,1],width:2}},highlighted_styles:{fill:{color:[0,255,0,.3]},stroke:{color:[0,255,0,1],width:1}}},{matches:[{name:"Satellite name",value:"Sentinel-1"}],styles:{fill:{color:[255,0,0,.5]},stroke:{color:[255,0,0,1],width:1}},selected_styles:{fill:{color:[255,0,0,.7]},stroke:{color:[255,0,0,1],width:2}},highlighted_styles:{fill:{color:[255,0,0,.3]},stroke:{color:[255,0,0,1],width:1}}}];var e={init:function(){var a=this;http.get("config/styles.json").success(function(a){if(a){d=[];d=a}})},getDHuSStyles:function(){return d},getStyleFromProduct:function(a){var b=this;var c={};for(var e=0;e<d.length;e++){var f=d[e].matches;var g=true;for(var h=0;h<f.length&&g;h++){var i=false;if(a.indexes){for(var j=0;j<a.indexes.length&&!i;j++){for(var k=0;k<a.indexes[j].children.length;k++){if(a.indexes[j].children[k].name==f[h].name&&a.indexes[j].children[k].value==f[h].value){i=true;break}}}}g=g&&i}if(g){c.default_style=new ol.style.Style({fill:new ol.style.Fill(d[e].styles.fill),stroke:new ol.style.Stroke(d[e].styles.stroke)});c.selected_style=new ol.style.Style({fill:new ol.style.Fill(d[e].selected_styles.fill),stroke:new ol.style.Stroke(d[e].selected_styles.stroke)});c.highlighted_style=new ol.style.Style({fill:new ol.style.Fill(d[e].highlighted_styles.fill),stroke:new ol.style.Stroke(d[e].highlighted_styles.stroke)});c.label_style=d[e].label_style;c.instrlabel_style=d[e].instrlabel_style;return c}else{}}c.default_style=new ol.style.Style({fill:new ol.style.Fill(DHuSMapConfig.styles.default.fill),stroke:new ol.style.Stroke(DHuSMapConfig.styles.default.stroke)});c.selected_style=new ol.style.Style({fill:new ol.style.Fill(DHuSMapConfig.styles.selection.fill),stroke:new ol.style.Stroke(DHuSMapConfig.styles.selection.stroke)});c.highlighted_style=new ol.style.Style({fill:new ol.style.Fill(DHuSMapConfig.styles.highlight.fill),stroke:new ol.style.Stroke(DHuSMapConfig.styles.highlight.stroke)});return c}};return e}]);"use strict";var ApplicationConfig={baseUrl:window.location.href.split("#")[0]};var ApplicationService={debugMode:false,webAppRoot:"/",logged:false,version:"Data Hub System #version developed by a Serco and GAEL Systems consortium under a contract with the European Space Agency - Funded by the EU and ESA",settings:{title:"",logo:"images/datahub.png",signup:true,editprofile:true,showcart:true,show_newgui_link:true,toolbar:{title:"","background-color":"rgb(55, 59, 80)",eu_comm_link:"http://www.copernicus.eu",esa_link:"https://sentinel.esa.int",userguide_link:"https://scihub.copernicus.eu/userguide",userguide_title:"User Guide",home_link:"https://scihub.copernicus.eu",home_title:"Scientific Data Hub Portal"}}};"use strict";angular.module("DHuS-webclient").factory("ConfigurationService",["$q","$http",function(a,b){return{loaded:false,default_order_style:{FAILED:"pop-order-failed",COMPLETED:"pop-order-completed",RUNNING:"pop-order-running",PENDING:"pop-order-pending",PAUSED:"pop-order-paused"},default_transformation_style:{FAILED:"pop-order-failed",COMPLETED:"pop-order-completed",RUNNING:"pop-order-running",PENDING:"pop-order-pending",INGESTING:"pop-order-paused"},default_order_properties:{id:true,status:true,submissionTime:true,estimatedTime:false,statusMessage:true},getConfiguration:function(){var c=this;return b({url:ApplicationConfig.baseUrl+"api/stub/configuration",method:"GET"}).then(function(b){if(b.data){c.loaded=true;return b.data}else{return a.reject(b.data)}},function(b){return a.reject(b.data)})},isLoaded:function(){return this.loaded}}}]);"use strict";var InfoManager={getInfo:function(){},setInfo:function(a){this.getInfo=a}};"use strict";angular.module("DHuS-webclient").factory("VersionService",["$http",function(a){return{versionUrl:"api/stub/version",getVersion:function(){var b=this;return a({url:ApplicationConfig.baseUrl+"api/stub/version",method:"GET"}).then(function(a){return a.status==200?a.data:{}})}}}]);"use strict";angular.module("DHuS-webclient").factory("CountryService",["$http",function(a){return{getCountries:function(){var b=this;return a({url:ApplicationConfig.baseUrl+"api/stub/countries",method:"GET"}).then(function(a){return a.status==200?a.data:{}})}}}]);"use strict";angular.module("DHuS-webclient").controller("MainCtrl",["$scope","LayoutManager","ConfigurationService",function(a,b,c){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];a.init=function(){if(!c.isLoaded()){c.getConfiguration().then(function(b){if(b){ApplicationService=b;a.showmap=ApplicationService.settings.showmap;setTimeout(function(){$("#bgimage").attr("src",ApplicationService.settings.bgimage)},0)}},function(a){})}else{a.showmap=ApplicationService.settings.showmap;setTimeout(function(){$("#bgimage").attr("src",ApplicationService.settings.bgimage)},0)}};a.init()}]);"use strict";angular.module("DHuS-webclient").controller("UserProfileCtrl",["$scope","LayoutManager","SearchBoxService","UserService","CountryService",function(a,b,c,d,e){a.model=c.model;a.user={};a.checkFields=true;a.domains=["Atmosphere","Emergency","Marine","Land","Security","Climate","Other"];a.usages=["Research","Commercial","Education","Other"];a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];b.init();a.init=function(){var b=[];e.getCountries().then(function(c){for(var e=0;e<c.length;e++){var f=c[e].name;b.push(f)}a.countries=b;d.getUser().then(function(b){a.user=b;a.loadUserInfo()})})};a.init();a.loadUserInfo=function(){a.checkUsage();a.checkDomain()};a.$on("$viewContentLoaded",function(){if(!a.countries){}});a.getCountryIdByName=function(){var b=_.findIndex(a.countries,function(b){return b.name==a.user.country});return a.countries[b]?a.countries[b].id:-1};a.checkUsage=function(){var b=true;if(!a.user.usage||a.user.usage=="unknown"){$("#checkUsage").css("display","inline-block");$("#usageLbl").css("display","none");b=false}else{$("#checkUsage").css("display","none");$("#usageLbl").css("display","inline-block")}if(a.user.usage=="Other"){$("#usageLabel").show();$("#usageDesc").show()}else{$("#usageLabel").hide();$("#usageDesc").hide()}a.checkFields=a.checkFields&&b};a.checkDomain=function(){var b=true;if(!a.user.domain||a.user.domain=="unknown"){$("#checkDomain").css("display","inline-block");$("#domainLbl").css("display","none");b=false}else{$("#checkDomain").css("display","none");$("#domainLbl").css("display","inline-block")}if(a.user.domain=="Other"){$("#domainLabel").show();$("#domainDesc").show()}else{$("#domainLabel").hide();$("#domainDesc").hide()}a.checkFields=a.checkFields&&b};a.checkUserPassword=function(){a.checkFields=true;a.checkPwd();a.checkOldPwd();a.checkConfimPwd()};a.changePassword=function(){var b=this;a.checkUserPassword();if(a.checkFields){d.updateUser({password:$(".password").val()},{oldPassword:$(".oldpassword").val(),confirmPassword:$(".confirmpassword").val()},b).then(function(b){a.init();AlertManager.forceLogout(true);AlertManager.success("Changed password successfully","Your password has been changed successfully. Please, perform the login again with your new credentials")},function(b){a.init();ToastManager.error("Changed password failed")})}a.init()};a.checkName=function(){var b=true;if(!a.user.firstname||a.user.firstname.trim()==""){$("#checkName").css("display","inline-block");b=false}else{$("#checkName").css("display","none")}a.checkFields=a.checkFields&&b};a.checkLastname=function(){var b=true;if(!a.user.lastname||a.user.lastname.trim()==""){$("#checkLastname").css("display","inline-block");b=false}else{$("#checkLastname").css("display","none")}a.checkFields=a.checkFields&&b};a.checkEmail=function(){var b=true;if(!a.user.email||a.user.email.trim()==""){$("#checkEmail").css("display","inline-block");b=false}else{if($("#email").is(":valid")){$("#checkEmail").css("display","none")}else{$("#checkEmail").css("display","inline-block")}}a.checkFields=a.checkFields&&b};a.checkConfimEmail=function(){var b=true;if($("#email").val()!=$("#confirmemail").val()){$("#checkConfirmEmail").css("display","inline-block");b=false}else{$("#checkConfirmEmail").css("display","none")}a.checkFields=a.checkFields&&b};a.checkSubDomain=function(){var b=true;if($("#domainLabel").is(":visible")){if(!a.user.subDomain||a.user.subDomain=="unknown"){$("#checkSubDomain").css("display","inline-block");b=false}else{$("#checkSubDomain").css("display","none")}}a.checkFields=a.checkFields&&b};a.checkSubUsage=function(){var b=true;if($("#usageLabel").is(":visible")){if(!a.user.subUsage||a.user.subUsage=="unknown"){$("#checkSubUsage").css("display","inline-block");b=false}else{$("#checkSubUsage").css("display","none")}}a.checkFields=a.checkFields&&b};a.checkCountry=function(){var b=true;if(!a.user.country||a.user.country=="unknown"){$("#checkCountry").css("display","inline-block");b=false}else{$("#checkCountry").css("display","none")}a.checkFields=a.checkFields&&b};a.checkOldPwd=function(){var b=true;if(!$(".oldpassword").val()||$(".oldpassword").val().trim()==""){$("#checkOldPassword").css("display","inline-block");b=false}else{$("#checkOldPassword").css("display","none")}a.checkFields=a.checkFields&&b};a.checkPwd=function(){var b=true;var c=/^[a-zA-Z0-9!@#\$%\^\&*\)\(+=._-]+$/g;if(!$(".password").val()||$(".password").val().trim()==""){$("#checkPassword").css("display","inline-block");$("#checkPasswordLength").css("display","none");$("#checkPasswordNonLatin").css("display","none");b=false}else if(!c.test($(".password").val())){$("#checkPasswordLength").css("display","none");$("#checkPassword").css("display","none");$("#checkPasswordNonLatin").css("display","inline-block");b=false}else if($(".password").val().length<8){$("#checkPasswordLength").css("display","inline-block");$("#checkPassword").css("display","none");$("#checkPasswordNonLatin").css("display","none");b=false}else{$("#checkPassword").css("display","none");$("#checkPasswordLength").css("display","none");$("#checkPasswordNonLatin").css("display","none")}a.checkFields=a.checkFields&&b};a.checkConfimPwd=function(){var b=true;if($(".password").val()!=$(".confirmpassword").val()){$("#checkConfirmPassword").css("display","inline-block");b=false}else{$("#checkConfirmPassword").css("display","none")}a.checkFields=a.checkFields&&b};a.sendUpdate=function(){a.checkAndUpdateUserInfo();if(a.checkFields){a.updateUser()}};a.checkAndUpdateUserInfo=function(){a.checkFields=true;a.checkName();a.checkLastname();a.checkEmail();a.checkConfimEmail();a.checkDomain();a.checkSubDomain();a.checkUsage();a.checkSubUsage();a.checkCountry();delete a.user["password"]};a.updateUser=function(){var b=this;d.updateUser(a.user,{},b).then(function(b){ToastManager.success("Changed user profile successfully");a.init()},function(a){ToastManager.error("Changed user profile failed")})}}]);"use strict";angular.module("DHuS-webclient").controller("SelfRegistrationCtrl",["$scope","$location","LayoutManager","UserService","ConfigurationService","CountryService",function(a,b,c,d,e,f){a.user={};a.checkFields=true;a.domains=["Atmosphere","Emergency","Marine","Land","Security","Climate","Other"];a.usages=["Research","Commercial","Education","Other"];a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];$(document).ready(function(){$("#password").bind("copy paste cut",function(a){a.preventDefault();return false});$("#confirmpassword").bind("copy paste cut",function(a){a.preventDefault();return false})});a.$on("$viewContentLoaded",function(){if(!a.countries){f.getCountries().then(function(b){a.countries=b})}a.showsignup=ApplicationService.settings.signup;if(!e.isLoaded()){e.getConfiguration().then(function(c){if(c){ApplicationService=c;a.showsignup=ApplicationService.settings.signup;if(!a.showsignup){b.path("#/home").replace()}}else{b.path("#/home").replace()}},function(a){b.path("#/home").replace()})}else a.showsignup=ApplicationService.settings.signup;if(!a.showsignup){b.path("#/home").replace()}});c.init();a.init=function(){a.user.usage="unknown";a.user.domain="unknown";a.user.country="unknown";a.user.username="";a.user.firstname="";a.user.lastname="";a.user.email="";a.user.confirmemail="";a.user.password="";a.user.confirmpwd="";a.user.subDomain="";a.user.subUsage="";a.TandCLink=ApplicationService.settings.t_and_c};a.init();a.checkUsage=function(){var b=true;if(!a.user.usage||a.user.usage=="unknown"||a.user.usage.trim()==""){$("#checkUsage").css("display","inline-block");$("#usageLbl").css("display","none");b=false}else{$("#checkUsage").css("display","none");$("#usageLbl").css("display","inline-block")}if(a.user.usage=="Other"){$("#usageDesc").show()}else{$("#usageLabel").hide();$("#usageDesc").hide();$("#checkSubUsage").hide()}a.checkFields=a.checkFields&&b};a.checkDomain=function(){var b=true;if(!a.user.domain||a.user.domain=="unknown"||a.user.domain.trim()==""){$("#checkDomain").css("display","inline-block");$("#domainLbl").css("display","none");b=false}else{$("#checkDomain").css("display","none");$("#domainLbl").css("display","inline-block")}if(a.user.domain=="Other"){$("#domainDesc").show()}else{$("#domainLabel").hide();$("#domainDesc").hide();$("#checkSubDomain").hide()}a.checkFields=a.checkFields&&b};a.checkUsername=function(){var b=true;var c=new RegExp("^[a-zA-Z0-9-_.]+$");if(!a.user.username||a.user.username.trim()==""){$("#checkUsername").css("display","inline-block");$("#checkUsernameInvalid").css("display","none");$("#usernameLbl").css("display","none");b=false}else if(!c.test(a.user.username)||a.user.username.indexOf(" ")>-1){$("#checkUsernameInvalid").css("display","inline-block");$("#checkUsername").css("display","none");$("#usernameLbl").css("display","none");b=false}else{$("#checkUsernameInvalid").css("display","none");$("#checkUsername").css("display","none");$("#usernameLbl").css("display","inline-block");a.user.username=a.user.username.toLowerCase()}a.checkFields=a.checkFields&&b};a.checkName=function(){var b=true;if(!a.user.firstname||a.user.firstname.trim()==""){$("#checkName").css("display","inline-block");$("#firstnameLbl").css("display","none");b=false}else{$("#checkName").css("display","none");$("#firstnameLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkLastname=function(){var b=true;if(!a.user.lastname||a.user.lastname.trim()==""){$("#checkLastname").css("display","inline-block");$("#lastnameLbl").css("display","none");b=false}else{$("#checkLastname").css("display","none");$("#lastnameLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkEmail=function(){function b(a){var b=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return b.test(a)}var c=true;var d=new RegExp("^[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}$");var e=$("#email").val();if(!a.user.email||a.user.email.trim()==""){$("#checkEmail").css("display","inline-block");$("#emailLbl").css("display","none");c=false}else if(!b(e)){$("#checkEmail").css("display","inline-block");$("#emailLbl").css("display","inline-block");c=false}else{$("#checkEmail").css("display","none");$("#emailLbl").css("display","inline-block")}a.checkFields=a.checkFields&&c};a.checkConfimEmail=function(){var b=true;if($("#confirmemail").val().trim()==""){$("#confirmEmailLbl").css("display","none");$("#checkConfirmEmail").css("display","inline-block");b=false}else{$("#confirmEmailLbl").css("display","inline-block");if($("#email").val()!=$("#confirmemail").val()){$("#checkConfirmEmail").css("display","inline-block");b=false}else{$("#checkConfirmEmail").css("display","none")}}a.checkFields=a.checkFields&&b};a.checkSubDomain=function(){var b=true;if($("#domainDesc").is(":visible")){if(!a.user.subDomain||a.user.subDomain=="unknown"){$("#checkSubDomain").css("display","inline-block");$("#domailLabel").css("display","none");b=false}else{$("#checkSubDomain").css("display","none");$("#domailLabel").css("display","inline-block")}}a.checkFields=a.checkFields&&b};a.checkSubUsage=function(){var b=true;if($("#usageDesc").is(":visible")){if(!a.user.subUsage||a.user.subUsage=="unknown"){$("#checkSubUsage").css("display","inline-block");$("#usageLabel").css("display","none");b=false}else{$("#checkSubUsage").css("display","none");$("#usageLabel").css("display","inline-block")}}a.checkFields=a.checkFields&&b};a.getCountryIdByName=function(){var b=_.findIndex(a.countries,function(b){return b.name==a.user.country});return a.countries[b]?a.countries[b].id:-1};a.checkCountry=function(){var b=true;if(!a.user.country||a.user.country=="unknown"||a.user.country==""){$("#checkCountry").css("display","inline-block");$("#countryLbl").css("display","none");b=false}else{$("#checkCountry").css("display","none");$("#countryLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkPwd=function(){var b=true;var c=/^[a-zA-Z0-9!@#\$%\^\&*\)\(+=._-]+$/g;if(!$("#password").val()||$("#password").val().trim()==""){$("#checkPassword").css("display","inline-block");$("#checkPasswordLength").css("display","none");$("#checkPasswordNonLatin").css("display","none");$("#pwdLbl").css("display","none");b=false}else if(!c.test($("#password").val())){$("#checkPasswordLength").css("display","none");$("#checkPassword").css("display","none");$("#checkPasswordNonLatin").css("display","inline-block");$("#pwdLbl").css("display","inline-block");b=false}else if($("#password").val().length<8){$("#checkPasswordLength").css("display","inline-block");$("#checkPassword").css("display","none");$("#checkPasswordNonLatin").css("display","none");$("#pwdLbl").css("display","inline-block");b=false}else{$("#checkPassword").css("display","none");$("#checkPasswordLength").css("display","none");$("#checkPasswordNonLatin").css("display","none");$("#pwdLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkConfimPwd=function(){var b=true;if($("#confirmpassword").val().trim()==""){$("#confirmPwdLbl").css("display","none");$("#checkConfirmPassword").css("display","inline-block");b=false}else{$("#confirmPwdLbl").css("display","inline-block");if($("#password").val()!=$("#confirmpassword").val()){$("#checkConfirmPassword").css("display","inline-block");b=false}else{$("#checkConfirmPassword").css("display","none")}}a.checkFields=a.checkFields&&b};a.register=function(){a.checkAndUpdateUserInfo();if(a.checkFields){a.saveUser()}};a.checkAndUpdateUserInfo=function(){a.checkFields=true;a.checkUsername();a.checkName();a.checkLastname();a.checkEmail();a.checkConfimEmail();a.checkDomain();a.checkSubDomain();a.checkUsage();a.checkSubUsage();a.checkCountry();a.checkPwd();a.checkConfimPwd();delete a.user["confirmpwd"];delete a.user["confirmemail"]};a.saveUser=function(){var b=this;a.user.country=a.getCountryIdByName().toString();d.signup(a.user).success(function(){AlertManager.success("Registration successful","An email was sent to let you validate your registration.");window.location.replace("#/home")}).error(function(a){switch(a.code){case"user_already_present":AlertManager.error("Registration error","Username already taken.");break;default:$("#confirmEmailLbl").css("display","none");$("#confirmPwdLbl").css("display","none");AlertManager.error("Registration error","An error occurred while creating account.")}})}}]);"use strict";angular.module("DHuS-webclient").controller("ForgotPasswordCtrl",["$scope","LayoutManager","UserService",function(a,b,c){a.user={};a.checkFields=true;b.init();a.init=function(){a.user.username="";a.user.email="";a.user.confirmemail=""};a.init();a.checkUsername=function(){var b=true;if(!a.user.username||a.user.username.trim()==""){$("#checkUsername").css("display","inline-block");$("#usernameLbl").css("display","none");b=false}else{$("#checkUsername").css("display","none");$("#usernameLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkEmail=function(){var b=true;var c=new RegExp("^[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}$");var d=$("#email").val();if(!a.user.email||a.user.email.trim()==""){$("#checkEmail").css("display","inline-block");$("#emailLbl").css("display","none");b=false}else if(!c.test(d.toUpperCase())){$("#checkEmail").css("display","inline-block");$("#emailLbl").css("display","inline-block");b=false}else{$("#checkEmail").css("display","none");$("#emailLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkConfimEmail=function(){var b=true;if($("#confirmemail").val().trim()==""){$("#confirmEmailLbl").css("display","none");$("#checkConfirmEmail").css("display","inline-block");b=false}else{$("#confirmEmailLbl").css("display","inline-block");if($("#email").val()!=$("#confirmemail").val()){$("#checkConfirmEmail").css("display","inline-block");b=false}else{$("#checkConfirmEmail").css("display","none")}}a.checkFields=a.checkFields&&b};a.retrievePassword=function(){a.checkUserInfo();if(a.checkFields){a.sendRequest()}};a.checkUserInfo=function(){a.checkFields=true;a.checkUsername();a.checkEmail();a.checkConfimEmail()};a.sendRequest=function(){var b=this;var d="An email was sent to you with instruction for resetting your password.";c.retrievePassword(a.user,b).then(function b(c){switch(c.code){case"1001":d="There was an error while retrieving your account. Root cannot be modified";AlertManager.error("Retrieve Password Error",d);break;case"1002":d="No user can be found for this username/mail combination";AlertManager.error("Retrieve Password Error",d);break;case"1003":d="Your account was found, but there was an error while sending you an email"+". Please contact an administrator. Cannot send email to "+a.user.email;AlertManager.error("Retrieve Password Error",d);break;default:AlertManager.success("Retrieve Password Successful",d);window.location.replace("#/home")}},function b(c){switch(c.data.code){case"error-sending-email":d="Your account was found, but there was an error while sending you an email"+". Please contact an administrator. Cannot send email to "+a.user.email;AlertManager.error("Retrieve Password Error",d);break;case"generic-error":d="There was an error while try to retrieve your account information. "+"Please contact an administrator.";AlertManager.error("Retrieve Password Error",d);break;case"user-not-found":d="No user can be found for this username/email combination";AlertManager.error("Retrieve Password Error",d);break}})}}]);"use strict";angular.module("DHuS-webclient").controller("UserCartCtrl",["$scope","LayoutManager",function(a,b){b.init();a.init=function(){};a.init()}]);"use strict";angular.module("DHuS-webclient").controller("UserSearchesCtrl",["$scope","LayoutManager","SavedSearchModel","SavedSearchService","UserService",function(a,b,c,d,e){b.init();a.init=function(){};a.init()}]);"use strict";angular.module("DHuS-webclient").controller("TermsConditionsCtrl",["$scope","ConfigurationService",function(a,b){a.title=ApplicationService.settings;a.init=function(){a.title=ApplicationService.settings.toolbar.title;if(!b.isLoaded()){b.getConfiguration().then(function(b){if(b){ApplicationService=b;a.title=ApplicationService.settings}else{}},function(a){})}};a.init()}]);"use strict";angular.module("DHuS-webclient").controller("UserProductsCtrl",["$scope","LayoutManager",function(a,b){b.init();a.init=function(){};a.init()}]);"use strict";angular.module("DHuS-webclient").controller("ManagementCtrl",["$scope","UserService","Session",function(a,b,c){a.user=b.getUserModel();a.isUserManagement=false;a.isDataManagement=false;a.isSystemManagement=false;var d="USER_MANAGER";var e="DATA_MANAGER";var f="SYSTEM_MANAGER";a.getAccessRights=function(){if(_.contains(a.user.roles,d))a.isUserManagement=true;if(_.contains(a.user.roles,e))a.isDataManagement=true;if(_.contains(a.user.roles,f))a.isSystemManagement=true};a.$watch("$viewContentLoaded",function(){if(a.user){a.getAccessRights();setTimeout(function(){$(window).trigger("resize")},0)}else{var d=c.getSessionUsername();b.getODataUser(d).then(function(c){b.setUserModel(c);b.setUserRolesModel(c);a.user=b.getUserModel();a.getAccessRights();setTimeout(function(){$(window).trigger("resize")},0)})}})}]);"use strict";angular.module("DHuS-webclient").controller("OdataSynchronizerCtrl",["$scope",function(a){a.init=function(){};a.init()}]);(function(){"use strict"})();angular.module("DHuS-webclient").directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel).assign;c.bind("change",function(){b.$apply(function(){e(b,c[0].files[0])})})}}}]);angular.module("DHuS-webclient").controller("UploadCtrl",["$q","$scope","AdminUploadService","AdminCollectionManager",function(a,b,c,d){b.setIfSelectedFile=function(){b.isSelectedFile=document.querySelector("#upload-file-info").innerText!="No file choosen"?true:false};b.Initdivs=function(){b.scanninginfo="";b.urltoscan="";b.username="";b.password="";b.pattern="";b.collections=[];b.x_state=-1;b.toggle=false;b.isSelectedFile=false;b.isCron=false;b.cronValue=undefined;b.isSourceRemove=false;b.isFtp=false};b.getFileScanners=function(){c.getFileScanners().then(function(a){b.names=[];if(a.data.value)b.names=a.data.value;b.updateList()})};b.Initdivs();b.getFileScanners();b.generateOdataModel=function(a){var c={"@odata.type":"",Url:b.urltoscan,Pattern:b.pattern,SourceRemove:b.isSourceRemove,Cron:{Active:b.isCron}};c["@odata.type"]=b.isFtp?"#OData.DHuS.FtpScanner":"#OData.DHuS.FileScanner";c.Username=b.isFtp?b.username:undefined;c.Password=b.isFtp?b.password:undefined;if(b.cronValue)c.Cron.Schedule=b.cronValue;return c};b.generateCollectionsModel=function(){var a=[];var b=d.getSelectedCollectionsIds();for(var c=0;c<b.length;c++){a.push({"@odata.id":"Collections('"+b[c]+"')"})}return a};b.updateList=function(a){for(var c=0;c<b.names.length;c++){if(a){if(c==b.x_state)b.names[c].toggle=true;else b.names[c].toggle=false;b.names[c].toggleHover=false}else{b.names[c].toggle=false;b.names[c].toggleHover=false;b.x_state=-1}if(b.names[c].Cron.Active===true){b.names[c].styleColor="color: blue;"}else{b.names[c].styleColor="color: darkgray;";b.names[c].styleColor="color: darkgray;"}}for(var c=0;c<b.names.length;c++){var d=b.names[c].ScannerStatus.Status;if(d=="ok"){b.names[c].classicon="glyphicon glyphicon-ok"}else if(d=="error"){b.names[c].classicon="glyphicon glyphicon-remove"}else if(d=="added"){b.names[c].classicon="glyphicon glyphicon-question-sign"}else if(d=="running"){b.names[c].classicon="glyphicon glyphicon-upload"}else{b.names[c].classicon="glyphicon glyphicon-question-sign"}}b.Initdivs()};b.resetCheckOnField=function(){$("#checkUrl").css("display","none")};b.checkUrl=function(a){var b=true;if(!a||a.trim()===""){$("#checkUrl").css("display","inline-block");b=false}else{$("#checkUrl").css("display","none")}return b};b.addFileScanner=function(){var d=b.generateOdataModel(true);if(!b.checkUrl(d.Url))return;b.getScanningInfo(d);var e=b.generateCollectionsModel();c.createFileScanner(d).then(function(d){if(d.status>=200&&d.status<300){if(e&&e.length>0){var f=[];for(var g=0;g<e.length;g++){f.push(c.addCollectionsToFS(d.data.Id,e[g]))}a.all(f).then(function(){c.getFileScanners().then(function(a){b.names=[];if(a&&a.data&&a.data.value)b.names=a.data.value;b.updateList();ToastManager.success("file scanner added")})},function(){ToastManager.error("file scanner added, but error occurred associating the collection to the file scanner.")})}else{c.getFileScanners().then(function(a){b.names=[];if(a&&a.data&&a.data.value)b.names=a.data.value;b.updateList();ToastManager.success("file scanner added")})}}else{ToastManager.error("error in add file scanner")}},function(a){ToastManager.error("error in add file scanner")})};b.saveFileScanner=function(){var d=b.generateCollectionsModel();var e=b.names[b.x_state].Id;c.getOneFileScanner(b.names[b.x_state].Id).then(function(f){var g=f.data;g.Pattern=b.pattern;g.Url=b.urltoscan;g.SourceRemove=b.isSourceRemove;g.Cron.Active=b.isCron;g.Cron.Schedule=b.cronValue;c.updateFileScanner(g).then(function(f){if(f.status>=200&&f.status<300){if(d&&d.length>0||b.collections.length>0){var g=[];for(var h=0;h<b.collections.length;h++){g.push(c.removeCollectionsToFS(e,b.collections[h]))}for(var i=0;i<d.length;i++){g.push(c.addCollectionsToFS(e,d[i]))}a.all(g).then(function(){c.getFileScanners().then(function(a){b.names=[];if(a.data.value)b.names=a.data.value;b.updateList();ToastManager.success("Scanner Updated")})},function(){ToastManager.error("file scanner updated, but error occurred associating the collection to the file scanner.")})}else{c.getFileScanners().then(function(a){b.names=[];if(a.data.value)b.names=a.data.value;b.updateList();ToastManager.success("Scanner Updated")})}}else{ToastManager.error("file scanner update error")}},function(){ToastManager.error("file scanner update error")})},function(a){ToastManager.error("file scanner update error")})};b.refreshAllFilescanners=function(){b.isCron=false;b.cronValue=undefined;b.isSourceRemove=false;b.isFtp=false;b.scanninginfo="";b.urltoscan="";b.username="";b.password="";b.pattern="";b.getFileScanners();b.toggle=false;b.collections=[];b.resetCheckOnField()};b.getFSCollections=function(a){var b=[];for(var c=0;c<a.length;c++){b.push(a[c].Name)}return b};b.getScanningInfo=function(a){b.toggle=false;b.resetCheckOnField();for(var c=0;c<b.names.length;c++){if(b.names[c]==a){if(b.x_state!=c&&b.x_state!=-1){b.names[b.x_state].toggle=false}if(b.names[c].toggle){b.scanninginfo="";b.collections=[];b.urltoscan="";b.username="";b.password="";b.pattern="";b.names[c].toggle=false;b.isCron=false;b.cronValue=undefined;b.isSourceRemove=false;b.isFtp=false}else{a["@odata.type"]==="#OData.DHuS.FtpScanner"?b.isFtp=true:b.isFtp=false;var d="";var e=a.ScannerStatus.StatusMessages;e.forEach(function(a){d+=a+"\n"});b.scanninginfo=d;b.collections=a.Collections?b.getFSCollections(a.Collections):[];b.urltoscan=a.Url;b.username=a.Username;b.password="";b.pattern=a.Pattern;b.names[c].toggle=true;b.isCron=a.Cron.Active;b.cronValue=a.Cron.Schedule;b.isSourceRemove=a.SourceRemove}if(b.names[c].toggle){b.x_state=c}else{b.x_state=-1}}b.toggle=b.toggle||b.names[c].toggle}};b.setIdFileScannerHovered=function(a){for(var c=0;c<b.names.length;c++){if(b.names[c]==a){if(b.x_state==-1){b.names[c].toggleHover=true}}else{if(b.x_state==-1){b.names[c].toggleHover=false}}}};b.resetIdFileScannerHovered=function(){for(var a=0;a<b.names.length;a++){b.names[a].toggleHover=false}};b.playFileScanner=function(a){b.getScanningInfo(a);c.startFileScanner(a.Id).then(function(a){if(a.status>=200&&a.status<300){c.getFileScanners().then(function(a){b.names=[];if(a.data)b.names=a.data.value;b.updateList();ToastManager.success("file scanner played")})}else{ToastManager.error("error in play file scanner")}},function(a){ToastManager.error("error in play file scanner")})};b.stopFileScanner=function(a){b.getScanningInfo(a);c.stopFileScanner(a.Id).then(function(a){if(a.status>=200&&a.status<300){c.getFileScanners().then(function(a){b.names=[];if(a.data)b.names=a.data.value;b.updateList();ToastManager.success("file scanner stopped")})}else{ToastManager.error("error in stop file scanner")}},function(a){ToastManager.error("error in stop file scanner")})}
;b.removeFileScanner=function(a){b.getScanningInfo(a);c.removeFileScanner(a.Id).then(function(a){if(a.status>=200&&a.status<300){c.getFileScanners().then(function(a){b.names=[];if(a.data){b.names=a.data.value}b.updateList();ToastManager.success("file scanner removed")})}else{ToastManager.error("error in remove file scanner")}},function(a){ToastManager.error("error in remove file scanner")})};b.uploadProduct=function(){if(b.isSelectedFile===false){ToastManager.error("Please select a file to upload");return}var a=b.fileToUpload;var e=d.getSelectedCollectionsUUID();c.uploadProduct(a,e).then(function(a){if(a.status==200||a.status==201)AlertManager.success("Product Upload Succeeded",a.data);else AlertManager.error("Product Upload Error",a.data.replace("<style>","").replace("</style>",""))},function(a){AlertManager.error("Product Upload Error",a.data.replace("<style>","").replace("</style>",""))})};b.cleanFields=function(){if(b.isFtp){b.username=undefined;b.password=undefined}};b.scheduleFileScanner=function(a){b.getScanningInfo(a);c.getOneFileScanner(a.Id).then(function(a){var d=a.data;d.Cron.Active=!d.Cron.Active;c.updateFileScanner(d).then(function(a){if(a.status>=200&&a.status<300){c.getFileScanners().then(function(a){b.names=[];if(a.data.value)b.names=a.data.value;b.updateList();ToastManager.success("Scanner Schedule Updated")})}else{ToastManager.error("file scanner update error")}},function(){ToastManager.error("file scanner update error")})},function(a){ToastManager.error("file scanner update error")})}}]);"use strict";angular.module("DHuS-webclient").controller("CheckResetCtrl",["$scope","$routeParams","UserService",function(a,b,c){console.log("CheckresetController")}]);"use strict";angular.module("DHuS-webclient").controller("ResetPasswordCtrl",["$scope","LayoutManager","UserService","usercode",function(a,b,c,d){a.password="";a.confirmpwd="";a.checkFields=true;b.init();a.usercode=d;a.checkPwd=function(){var b=true;var c=/^[a-zA-Z0-9!@#\$%\^\&*\)\(+=._-]+$/g;if(!$("#reset-password").val()||$("#reset-password").val().trim()==""){$("#reset-checkPassword").css("display","inline-block");$("#reset-checkPasswordLength").css("display","none");$("#reset-checkPasswordNonLatin").css("display","none");$("#reset-pwdLbl").css("display","none");b=false}else if(!c.test($("#reset-password").val())){$("#reset-checkPasswordLength").css("display","none");$("#reset-checkPassword").css("display","none");$("#reset-checkPasswordNonLatin").css("display","inline-block");$("#reset-pwdLbl").css("display","inline-block");b=false}else if($("#reset-password").val().length<8){$("#reset-checkPasswordLength").css("display","inline-block");$("#reset-checkPassword").css("display","none");$("#reset-checkPasswordNonLatin").css("display","none");$("#reset-pwdLbl").css("display","inline-block");b=false}else{$("#reset-checkPassword").css("display","none");$("#reset-checkPasswordLength").css("display","none");$("#reset-checkPasswordNonLatin").css("display","none");$("#reset-pwdLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkConfirmPwd=function(){var b=true;if($("#reset-confirmpassword").val().trim()==""){$("#reset-confirmPwdLbl").css("display","none");$("#reset-checkConfirmPassword").css("display","inline-block");b=false}else{$("#reset-confirmPwdLbl").css("display","inline-block");if($("#reset-password").val()!=$("#reset-confirmpassword").val()){$("#reset-checkConfirmPassword").css("display","inline-block");b=false}else{$("#reset-checkConfirmPassword").css("display","none")}}a.checkFields=a.checkFields&&b};a.resetPassword=function(){a.checkInfo();if(a.checkFields){a.sendRequest()}};a.checkInfo=function(){a.checkFields=true;a.checkPwd();a.checkConfirmPwd()};a.sendRequest=function(){var b=this;c.resetPassword(a.usercode,a.password).then(function(a){if(a.status==200){AlertManager.success("Password Reset","Your password was successfully changed")}else if(a.data&&a.data.code=="email_not_sent"){var b="Your password was changed, but there was an error while sending your email.\n"+"Please contact an administrator.\n.";AlertManager.warn("Password Reset Error",b)}else if(a.data&&a.data.code=="unauthorized"){AlertManager.error("Password Reset Failed","There was an error while changing your password")}else{AlertManager.error("Password Reset Failed","There was an error while changing your password")}window.location.href="#/home"},function(a){AlertManager.error("Password Reset Failed","There was an error while changing your password");window.location.href="#/home"})}}]);angular.module("DHuS-webclient").directive("dhusToolbar",["UserInfoService","$location","AdvancedSearchService","ConfigurationService",function(a,b,c,d){return{restrict:"AE",replace:true,templateUrl:"components/toolbar/view.html",scope:{text:"="},compile:function(b,e){return{pre:function(a,b,c){},post:function(b,e,f){if(!d.isLoaded()){d.getConfiguration().then(function(a){if(a){ApplicationService=a;b.setToolbarInfo()}else{b.setToolbarInfo()}},function(a){b.setToolbarInfo()})}else{b.setToolbarInfo()}b.userInfo=a.userInfo;b.redirectHome=function(){var a=window.location.href;if(a.indexOf("#/home")>=0)return;c.hide();window.location.href="#/home"};b.setToolbarInfo=function(){b.logos=ApplicationService.settings.toolbar.logos;b.rightlogos=ApplicationService.settings.toolbar.rightlogos;b.userguide_link=ApplicationService.settings.toolbar.userguide_link;b.userguide_title=ApplicationService.settings.toolbar.userguide_title;b.home_link=ApplicationService.settings.toolbar.home_link;b.home_title=ApplicationService.settings.toolbar.home_title;b.show_newgui_link=ApplicationService.settings.show_newgui_link;b.newgui_link=ApplicationService.settings.newgui_link;b.newgui_label=ApplicationService.settings.newgui_label;b.show_userguide=ApplicationService.settings.show_userguide;b.show_home=ApplicationService.settings.show_home};b.goToNewUI=function(){var a=!!window.chrome&&!!window.chrome.webstore;if(!a){alert("Browser not supported. \nThis web application currently is available only on browser supporting web components.");return}window.location.href=b.newgui_link}}}}}}]).factory("UserInfoService",function(){return{userInfo:{user:{},isLogged:false}}});angular.module("DHuS-webclient").directive("navbar",["UserInfoService",function(a){return{restrict:"AE",replace:true,templateUrl:"components/navbar/view.html",scope:{text:"="},compile:function(b,c){return{pre:function(a,b,c){},post:function(b,c,d){b.userInfo=a.userInfo}}}}}]).factory("UserInfoService",function(){return{userInfo:{user:{},isLogged:false}}});angular.module("DHuS-webclient").directive("helloWorld",function(){return{restrict:"AE",replace:true,templateUrl:"components/example/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){}}}}});angular.module("DHuS-webclient").directive("apptitle",["ConfigurationService",function(a){return{restrict:"AE",replace:true,templateUrl:"components/title/view.html",scope:{text:"="},compile:function(b,c){return{pre:function(a,b,c){},post:function(b,c,d){b.title=ApplicationService.settings.toolbar.title;if(!a.isLoaded()){a.getConfiguration().then(function(a){if(a){ApplicationService=a;b.title=ApplicationService.settings.toolbar.title}else{}},function(a){})}}}}}}]);angular.module("DHuS-webclient").directive("searchBox",["$window","$document","UIUtils","SearchBoxService","SearchService","SearchModel","AdvancedSearchService","CartMenuService","ConfigurationService","AdvancedFilterService","AuthenticationService","UserService","CartStatusService","OLMap",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=$("<span>").css("display","inline-block").css("word-break","break-all").appendTo("body").css("visibility","hidden");var p="#search-box-container",q="#ui-id-1",r="#dhus-toolbar-container",p="#search-box-container",s="10",t=20;var u=function(){var a=$("#search-input");var b=150;c.responsiveLayout(function a(){$(p).css("width",parseInt(c.getScreenWidth())-t*2+"px");$(q).css("width",parseInt(c.getScreenWidth())-t*2+"px !important")},function a(){$(p).css("width",parseInt(c.getScreenWidth())-t*2+"px");$(q).css("width",parseInt(c.getScreenWidth())-t*2+"px !important")},function a(){if(!ApplicationService.settings.show_extended_list){if(o.outerWidth()<parseInt(c.getScreenWidth())*.5-b){$(p).css("width","50%");$(q).css("width",parseInt(c.getScreenWidth())*.5-t*2+"px !important")}else{var d=parseInt(o.outerWidth())+b;if(d>parseInt(c.getScreenWidth())-t*2){$(p).css("width",parseInt(c.getScreenWidth())-t*2+"px")}else{$(p).css("width",parseInt(o.outerWidth()+b)+"px")}}}else{$(p).css("width",parseInt(c.getScreenWidth())-t*2+"px")}},function a(){if(!ApplicationService.settings.show_extended_list){if(o.outerWidth()<parseInt(c.getScreenWidth())*.4-b){$(p).css("width","40%");$(q).css("width",parseInt(c.getScreenWidth())*.4-t*2+"px !important")}else{var d=parseInt(o.outerWidth())+b;if(d>parseInt(c.getScreenWidth())-t*2){$(p).css("width",parseInt(c.getScreenWidth())-t*2+"px")}else{$(p).css("width",parseInt(o.outerWidth()+b)+"px")}}}else{$(p).css("width",parseInt(c.getScreenWidth())-t*2+"px")}});var d=parseInt($(r).height())+parseInt(s)+"px";$(p).css("top",d)};return{restrict:"AE",replace:true,templateUrl:"components/search-box/view.html",scope:{text:"="},compile:function(c,n){return{pre:function(a,b,c){a.solrindexes="";a.showcart=false},post:function(c,n,p){c.$watch("model.textQuery",function(a){o.text(a);u()});if(!i.isLoaded()){i.getConfiguration().then(function(a){if(a){ApplicationService=a;if(ApplicationService.settings.showcart)c.showcart=ApplicationService.settings.showcart;if(ApplicationService.settings.search_max_length)e.setSearchMaxLength(ApplicationService.settings.search_max_length);u()}else{}},function(a){})}else{if(ApplicationService.settings.search_max_length)e.setSearchMaxLength(ApplicationService.settings.search_max_length);if(ApplicationService.settings.showcart)c.showcart=ApplicationService.settings.showcart}$("#search-input").autocomplete({source:c.solrindexes,delay:500});e.setClearSearchInput(function(){c.clearSearchInput()});e.setClearGeoSelection(function(){c.clearGeoSelection()});c.advancedSearchButtonActive=false;c.cartStatus=false;c.showCartMenu=function(){if(!k.logged)return;h.show();c.cartMenuButtonActive=true;c.cartStatus=true};c.hideAdvancedMenu=function(){h.hide();c.cartMenuButtonActive=false;c.cartStatus=false};c.toggleAdvancedMenu=function(){if(g.model.hidden)g.show();else g.hide()};c.toggleMenuCart=function(){if(l.model===null){UserDetailsManager.getUserDetails();return}if(h.model.hidden){h.show()}else{h.hide()}};var q=_.debounce(function(a){if(a.keyCode==37||a.keyCode==39||k.logged==false)return;if(c.model.textQuery){e.getSuggestions(c.model.textQuery).then(function(a){if(a){u();a=a.split("\r\n");c.solrindexes=a;$("#search-input").autocomplete({source:c.solrindexes,delay:500})}})}},800);c.getSuggestions=q;c.clearSearchInput=function(){c.model.textQuery="";e.setTextQuery(c.model.textQuery)};c.clearGeoSelection=function(){c.model.geoselection="";e.setGeoselection(c.model.geoselection);f.clearMap()};c.saveSearch=function(){if(m.getCartActive()){ToastManager.error("Save user search disabled when cart mode");return}if(l.model==null){UserDetailsManager.getUserDetails();return}e.saveUserSearch(d.model.textQuery,d.model.geoselection,d.model.advancedFilter,d.model.missionFilter).then(function(a){if(a.status==200)ToastManager.success("User search saved successfully")},function(a){if(k.logged)ToastManager.error("Save user search operation failed")})};c.showClear=function(){$(".clear-button").css("display","block")};c.hideClear=function(){setTimeout(function(){$(".clear-button").css("display","none")},300)};c.clearFilter=function(){c.model.textQuery="";c.model.sortedby="";c.model.order="";e.setTextQuery(c.model.textQuery);e.clearGeoSelection();e.setSortedBy(c.model.sortedby);e.setOrder(c.model.order);j.clearAdvancedFilter();g.clearAdvFilter();h.clearAdvFilter();$("#advanced-search-icon").removeClass("glyphicon-filter colored").addClass("glyphicon-menu-hamburger");$(".clear-button").css("display","none")};c.search=function(){if(m.getCartActive()){ToastManager.error("Search Disabled when cart is active");return}if(l.model==null){UserDetailsManager.getUserDetails();return}else{var a=$("#search-input").text();e.setTextQuery(c.model.textQuery);e.setGeoselection(c.model.geoselection);e.setOffset(0);e.search();setTimeout(function(){g.hide();h.hide()},100)}};if(m.getIsUserDialog()===true){setTimeout(function(){c.showCartMenu()},1e3)}n.bind("keypress",function(a){if(a.which===13){c.search()}});$("#search-button").click(function(){});angular.element(a).bind("resize",function(){$("#search-input").blur();u()});angular.element(b).ready(u);c.model=d.model;c.ad={};c.ad.advancedSearchBoxHidden=g.model.hidden;if(d.model.advancedFilter.trim()!=""||d.model.missionFilter.trim()!=""){$("#advanced-search-icon").removeClass("glyphicon-menu-hamburger").addClass("glyphicon-filter colored")}}}}}}]).factory("SearchBoxService",function(){return{model:{textQuery:"",list:"",geoselection:"",offset:0,pagesize:25,advancedFilter:"",missionFilter:"",sortedby:"",order:""}}});"use strict";(function(){"use strict";function a(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d}function b(a,b,c){var d=b.x,e=b.y,f=c.x-d,g=c.y-e;if(f!==0||g!==0){var h=((a.x-d)*f+(a.y-e)*g)/(f*f+g*g);if(h>1){d=c.x;e=c.y}else if(h>0){d+=f*h;e+=g*h}}f=a.x-d;g=a.y-e;return f*f+g*g}function c(b,c){var d=b[0],e=[d],f;for(var g=1,h=b.length;g<h;g++){f=b[g];if(a(f,d)>c){e.push(f);d=f}}if(d!==f)e.push(f);return e}function d(a,c,e,f,g){var h=f,i;for(var j=c+1;j<e;j++){var k=b(a[j],a[c],a[e]);if(k>h){i=j;h=k}}if(h>f){if(i-c>1)d(a,c,i,f,g);g.push(a[i]);if(e-i>1)d(a,i,e,f,g)}}function e(a,b){var c=a.length-1;var e=[a[0]];d(a,0,c,b,e);e.push(a[c]);return e}function f(a,b,d){if(a.length<=2)return a;var e=b!==undefined?b*b:1;a=d?a:c(a,e);return a}if(typeof define==="function"&&define.amd)define(function(){return f});else if(typeof module!=="undefined")module.exports=f;else if(typeof self!=="undefined")self.simplify=f;else window.simplify=f})();var MAX_SHAPE_FILE_SIZE=5242880;var MAX_SHAPE_FILE_SIZE_MESSAGE="Your shapefile cannot be uploaded because it is too large. Shapefiles must be no larger than 5.00 MB.";var MOUSE_POSITION_FORMAT="dd";var coordinateStatus="dd";var ddCoordTemplate="Lat Lon: {y}, {x}";var Product={create:function(a,b){return{name:a.identifier,footprint:b,id:a.uuid,default_style:a.default_style,selected_style:a.selected_style,highlighted_style:a.highlighted_style}}};var DHuSMapConfig={webAppRoot:"",styles:{selection:{fill:{color:[255,255,255,.6]},stroke:{color:[255,255,255,1],width:5}},highlight:{fill:{color:[255,255,255,.3]},stroke:{color:[255,255,255,.6],width:1}},default:{fill:{color:[255,255,255,.4]},stroke:{color:[0,153,255,1],width:1}}},mapToggleButton:{active3DlabelText:"3d Map",active2DlabelText:"2d Map"},selectionButton:{activedText:"Disable selection",disabledText:"Active selection",activedIcon:"flip-to-front",disabledIcon:"open-with",clearImageIcon:"flip-to-back"},map3dActive:false,map:{transformation:{source:"EPSG:4326",destination:"EPSG:3857"},defaultCenter:{coordinates:[13.707047,51.060086]},defaultZoom:4,minZoom:1.3,maxZoom:19,defaultLayer:"sat"},cesium:{terrainProviderUrl:"//cesiumjs.org/stk-terrain/tilesets/world/tiles"},events:{changedModel:"changed-model",newModel:"new-model"}};angular.module("DHuS-webclient").factory("OLMap",["Logger","SearchModel","CartModel","ConfigurationService","CartStatusService",function(a,b,c,d,e){return{productModel:{list:"hello"},map:{},map3d:{},mapModel:{footprintLayerId:3,selectionLayerId:5,shapeLayerId:4,currentZoom:0,currentPosition:{}},map3dActive:false,activedSelection:true,externalInterface:{sendSelectionCoordinates:null},selectionStyle:new ol.style.Style({fill:new ol.style.Fill(DHuSMapConfig.styles.selection.fill),stroke:new ol.style.Stroke(DHuSMapConfig.styles.selection.stroke)}),highlightStyle:new ol.style.Style({fill:new ol.style.Fill(DHuSMapConfig.styles.highlight.fill),stroke:new ol.style.Stroke(DHuSMapConfig.styles.highlight.stroke)}),defaultStyle:new ol.style.Style({fill:new ol.style.Fill(DHuSMapConfig.styles["default"].fill),stroke:new ol.style.Stroke(DHuSMapConfig.styles["default"].stroke)}),setActivedSelection:function(b){a.log("map","setActivedSelection()");this.activedSelection=b},clearSelection:function(){a.log("map","clearSelection()");this.map.getLayers().item(this.mapModel.selectionLayerId).setSource(new ol.source.Vector({features:[],wrapX:false}));this.map.getLayers().item(this.mapModel.shapeLayerId).setSource(new ol.source.Vector({features:[],wrapX:false}));this.externalInterface.sendSelectionCoordinates(null);if(this.model&&this.model.length){for(var b=0;b<this.model.length;b++){}$(document).trigger(DHuSMapConfig.events.changedModel,"false")}},renderFootprintLayer:function(b){a.log("map","renderFootprintLayer()");var c=this;var d=new ol.format.WKT;var e=[];for(var f=0;f<b.length;f++){var g=d.readFeature(b[f].footprint);g.getGeometry().transform(DHuSMapConfig.map.transformation.source,DHuSMapConfig.map.transformation.destination);g.product=b[f];g.setStyle(g.product.default_style);e.push(g)}this.map.getLayers().item(this.mapModel.footprintLayerId).setSource(new ol.source.Vector({features:e,wrapX:false}));c.refresh3dMap()},refresh3dMap:function(){a.log("map","refresh3dMap()");if(this.map3dActive){var b=this.map3d.getEnabled();if(b){this.map3d.setEnabled(false)}this.setup3dMap();if(b){this.map3d.setEnabled(true)}}},setup3dMap:function(){a.log("map","setup3dMap()");this.map3d=new olcs.OLCesium({map:this.map});this.scene=this.map3d.getCesiumScene().terrainProvider=new Cesium.CesiumTerrainProvider({url:DHuSMapConfig.cesium.terrainProviderUrl})},olCoords2LatLon:function(b){a.log("map","olCoords2LatLon()");a.log("map","coordinates: "+JSON.stringify(c));var c=b[0];var d=[];var e=[];for(var f=0;f<c.length;f++){d.push(ol.proj.transform([c[f][0],c[f][1]],"EPSG:3857","EPSG:4326"))}for(var g=0;g<d.length;g++){e.push({lat:d[g][1],lon:d[g][0]})}a.log("map","points: "+JSON.stringify(e));return e},switchCoordinate:function(a){this.map.removeControl(this.mousePositionControl);this.mousePositionControl=new ol.control.MousePosition({coordinateFormat:function(b){if(a.localeCompare("dd")==0){return ol.coordinate.format(b,ddCoordTemplate,2)}else{var c=ol.coordinate.toStringHDMS(b);return"Lat Lon: "+c}},projection:"EPSG:4326",undefinedHTML:"&nbsp;"});this.map.addControl(this.mousePositionControl)},setupBoxSelection:function(){var a=this;var d=0;document.getElementById("map").addEventListener("contextmenu",function(d){d.preventDefault();var f;if(a.mapButton=="Box"&&d.button!=0){if(f){f.setStyle(null)}var g=[d.offsetX,d.offsetY];f=a.map.forEachFeatureAtPixel(g,function(b,c){if(c===a.map.getLayers().item(a.mapModel.footprintLayerId))return b});b.deselectAll({uuid:null,sender:"OLMap"});c.deselectAll({uuid:null,sender:"OLMap"});if(f&&f.product){if(e.getCartActive()==true){if(e.getCartFootprints()==true){c.callEventSelectProduct({uuid:f.product.id,sender:"OLMap"})}else ToastManager.error("Map selection disabled. Please load Cart Footprints to select them")}else{b.selectProduct({uuid:f.product.id,sender:"OLMap"});f.setStyle(f.product.selected_style)}}b.OnSelectionChange()}else{return}});document.getElementById("map").addEventListener("mouseup",function(b){if(a.mapButton.localeCompare("Box")==0){if(b.button==0){if(a.map.getLayers().item(a.mapModel.selectionLayerId).getSource().getFeatures().length==0){return}else{if(a.clearOnly){if(a.selectionType&&a.selectionType.localeCompare("Polygon")==0)a.clearSelection()}else{return}}}else{}}else{if(b.button==0){}else{if(a.map.getLayers().item(a.mapModel.selectionLayerId).getSource().getFeatures().length==0){return}else{if(a.clearOnly){if(a.selectionType&&a.selectionType.localeCompare("Polygon")==0)a.clearSelection()}else{return}}}}});document.getElementById("map").addEventListener("mousedown",function(b){a.clearOnly=false;a.map.addInteraction(a.dragBox);a.map.addInteraction(a.drawBox);if(a.mapButton.localeCompare("Box")==0){if(b.button==0){if(a.map.getLayers().item(a.mapModel.selectionLayerId).getSource().getFeatures().length==0){return}else{a.clearOnly=true;if(a.selectionType&&a.selectionType.localeCompare("Box")==0){a.clearSelection();a.map.removeInteraction(a.dragBox);a.map.removeInteraction(a.drawBox)}else{a.map.addInteraction(a.dragBox);a.map.addInteraction(a.drawBox)}}}}else{if(b.button==0){}else if(a.map.getLayers().item(a.mapModel.selectionLayerId).getSource().getFeatures().length==0){return}else{a.clearOnly=true;if(a.selectionType&&a.selectionType.localeCompare("Box")==0){a.clearSelection();a.map.removeInteraction(a.dragBox);a.map.removeInteraction(a.drawBox)}else{a.map.addInteraction(a.dragBox);a.map.addInteraction(a.drawBox)}}}});a.dragBox=new ol.interaction.DragBox({condition:function(b){if(a.mapButton=="Pan"){if(b.originalEvent.button==0){return false}else{return true}}else{if(b.originalEvent.button==0){return true}else{return false}}},style:new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,.4]}),stroke:new ol.style.Stroke({color:[0,0,255,1]})})});a.dragBox.setActive(true);this.map.addInteraction(a.dragBox);a.drawBox=new ol.interaction.Draw({source:a.map.getLayers().item(a.mapModel.selectionLayerId).getSource(),type:"Polygon",geometryFunction:function(a,b){if(!b)b=new ol.geom.Polygon(null);b.setCoordinates(a);return b},condition:function(b){if(a.mapButton=="Pan"){if(b.originalEvent.button==0)return false;else return true}else{if(b.originalEvent.button==0)return true;else return false}},style:new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,.4]}),stroke:new ol.style.Stroke({color:[0,0,255,1]})})});a.drawBox.setActive(true);this.map.addInteraction(a.drawBox);a.dragBox.on("boxend",function(b){a.drawBox.abortDrawing_();var c=new ol.geom.Polygon(null);a.end=b.coordinate;c.setCoordinates([[a.start,[a.start[0],a.end[1]],a.end,[a.end[0],a.start[1]],a.start]]);var d=new ol.Feature;d.setStyle(new ol.style.Style({fill:new ol.style.Fill({color:[220,142,2,.5]}),stroke:new ol.style.Stroke({color:[220,142,2,1]})}));d.setGeometry(c);a.map.getLayers().item(a.mapModel.selectionLayerId).setSource(new ol.source.Vector({features:[d],wrapX:false}));a.map.getLayers().item(a.mapModel.shapeLayerId).setSource(new ol.source.Vector({features:[],wrapX:false}));a.setCurrentSelection(a.processSelection(d));a.selectionType="Box"});a.dragBox.on("boxstart",function(b){a.start=b.coordinate;a.externalInterface.sendSelectionCoordinates(null)});a.drawBox.on("drawstart",function(b){if(a.clearOnly||a.map.getLayers().item(a.mapModel.selectionLayerId).getSource().getFeatures().length>0){a.drawBox.removeLastPoint()}});a.drawBox.on("drawend",function(b){var c=new ol.style.Style({fill:new ol.style.Fill({color:[220,142,2,.5]}),stroke:new ol.style.Stroke({color:[220,142,2,1]})});b.feature.setStyle(c);a.map.getLayers().item(a.mapModel.selectionLayerId).setSource(new ol.source.Vector({features:[b.feature],wrapX:false}));a.map.getLayers().item(a.mapModel.shapeLayerId).setSource(new ol.source.Vector({features:[],wrapX:false}));a.setCurrentSelection(a.processSelection(b.feature,"Polygon"));a.selectionType="Polygon"})},loadShapeFile:function(a){var b=a;var c=this;if((b&&b.name.toLowerCase().indexOf(".shp",b.name.length-4))==-1){AlertManager.info("Unsupported file","Only files with extension .shp are supported.");SpinnerManager.off();return}try{var d=new FileReader;d.onloadend=function(){var a="";var e=new Uint8Array(d.result);var f=e.byteLength;for(var g=0;g<f;g++){a+=String.fromCharCode(e[g])}var h=a;var i=[];var j=[];getOpenLayersFeatures(b.name,h,function(a){if(!a||!a.data||a.message){AlertManager.info("Unsupported shapefile",a.message);SpinnerManager.off();return}var b=new ol.format.WKT;var d=b.readFeature(a.data);var e=angular.copy(d);var f=e.getGeometry();var g=[];var h=[];var k=[];g=f.getCoordinates();var l=false;var m=.01;var n=ApplicationService.settings.max_points_shape_file?ApplicationService.settings.max_points_shape_file:50;var o=0;var p=-1;do{k=[];for(var q=0;q<g.length;q++){h[q]=[];for(var r=0;r<g[q].length;r++){h[q].push({x:g[q][r][0],y:g[q][r][1]})}var s=simplify(h[q],m);if(s.length>3)k.push(s)}var t=0;for(var u=0;u<k.length;u++){t+=parseInt(k[u].length)}var v=0;var w=0;for(var u=0;u<g.length;u++){v+=parseInt(g[u].length);w++}p=t;if(t>n){m+=.01;l=false}else{l=true}}while(!l);var x=[];for(var y=0;y<k.length;y++){x[y]=[];for(var z=0;z<k[y].length;z++){x[y][z]=[];x[y][z].push(k[y][z].x);x[y][z].push(k[y][z].y)}}var A=new ol.Feature({name:"shp",geometry:f});A.getGeometry().setCoordinates(x);A.getGeometry().transform(DHuSMapConfig.map.transformation.source,DHuSMapConfig.map.transformation.destination);A.setStyle(new ol.style.Style({fill:new ol.style.Fill({color:[220,142,2,.5]}),stroke:new ol.style.Stroke({color:[220,142,2,1]})}));d.getGeometry().transform(DHuSMapConfig.map.transformation.source,DHuSMapConfig.map.transformation.destination);d.setStyle(new ol.style.Style({fill:new ol.style.Fill({color:[147,237,147,.5]}),stroke:new ol.style.Stroke({color:[147,237,147,1]})}));j.push(d);i.push(A);var B=new ol.source.Vector({features:i,wrapX:false});var C=new ol.source.Vector({features:j,wrapX:false});c.map.getLayers().item(c.mapModel.selectionLayerId).setSource(B);c.map.getLayers().item(c.mapModel.shapeLayerId).setSource(C);c.setCurrentSelection(c.processSelection(A,"Shape"));var D=c.map.getView();D.fit(B.getExtent(),c.map.getSize());SpinnerManager.off()})};d.readAsArrayBuffer(b)}catch(a){AlertManager.info("Unsupported shapefile","Unsupported shapefile type. Shapefiles are limited to one record of type POLYGON.");SpinnerManager.off()}},setupDragAndDrop:function(){var a=this;function b(b){SpinnerManager.on();b.stopPropagation();b.preventDefault();var c=b.dataTransfer.files;if(c&&c.length>0){if((c[0]&&c[0].name.toLowerCase().indexOf(".shp",c[0].name.length-4))==-1){AlertManager.info("Unsupported file","Only files with extension .shp are supported.");SpinnerManager.off()}else{if(c[0].size>MAX_SHAPE_FILE_SIZE){SpinnerManager.off();AlertManager.info("File too large",MAX_SHAPE_FILE_SIZE_MESSAGE)}else{a.loadShapeFile(c[0])}}}else{SpinnerManager.off();AlertManager.info("Unsupported file","Only files with extension .shp are supported.")}}function c(a){a.stopPropagation();a.preventDefault();a.dataTransfer.dropEffect="copy"}document.getElementById("map").addEventListener("dragover",c,false);document.getElementById("map").addEventListener("drop",b,false)},testGeomIsValid:function(a){var b={};var c=new jsts.io.WKTReader;var d=c.read(a);var e=new jsts.operation.valid.IsValidOp(d);var f=e.isValid();return f},testPolygonOutOfBounds:function(a){var b=a[3];var c=a[1];var d=a[0];var e=a[2];return b<=85.05&&c>=-85.05&&d>=-180&&e<=180},testPolygonOutOfMap:function(a){var b=a[3];var c=a[1];var d=a[0];var e=a[2];return Math.abs(b)>85.05&&Math.abs(c)>85.05||Math.abs(d)>180&&Math.abs(e)>180},displayFeatureInfo:function(a){var b=this;var c=[];b.map.forEachFeatureAtPixel(a,function(a,b){c.push(a)});if(c.length>0){var d=[];var e,f;for(e=0,f=c.length;e<f;++e){d.push(c[e].get("name"))}document.getElementById("info").innerHTML=d.join(", ")||"&nbsp"}else{document.getElementById("info").innerHTML="&nbsp;"}},setCurrentSelection:function(b){if(this.externalInterface.sendSelectionCoordinates){this.externalInterface.sendSelectionCoordinates(b)}else{a.error("map","[MAP] - sendSelectionCoordinates not implemented")}},initMap:function(f,g){var h=this;if(!d.isLoaded())d.getConfiguration().then(function(a){if(a){ApplicationService=a;if(ApplicationService.settings.shapefile_max_size&&ApplicationService.settings.shapefile_max_size_message){MAX_SHAPE_FILE_SIZE=ApplicationService.settings.shapefile_max_size;MAX_SHAPE_FILE_SIZE_MESSAGE=ApplicationService.settings.shapefile_max_size_message}}});else if(ApplicationService.settings.shapefile_max_size&&ApplicationService.settings.shapefile_max_size_message){MAX_SHAPE_FILE_SIZE=ApplicationService.settings.shapefile_max_size;MAX_SHAPE_FILE_SIZE_MESSAGE=ApplicationService.settings.shapefile_max_size_message}var i=[-180,-80,180,80];a.log("map","initMap()");h.productModel.list=g&&g.list;h.footprintLayer=new ol.layer.Vector({source:new ol.source.Vector({wrapX:false}),displayInLayerSwitcher:false});var j=function(a){var b=[];if(a&&a.sources){for(var c=0;a&&c<a.sources.length;c++){var d=a.sources[c].params;if(a.sources[c].attributions){var e=new ol.Attribution({html:a.sources[c].attributions});d.attributions=[e]}b.push(new ol.layer.Tile({source:new ol.source[a.sources[c].class](d)}))}}return new ol.layer.Group({title:a?a.title:"",type:a?a.type:"",visible:a?a.visible:false,layers:b,wrapX:false})};var k=function(){var a=[];var b=Object.keys(ApplicationService.settings.map);for(var c=0;c<b.length;c++){a.push(j(ApplicationService.settings.map[b[c]]))}return a};var l=function(){h.mapLayers=[];h.mapLayers=k();h.mapLayers.push(h.footprintLayer);h.mapLayers.push(new ol.layer.Vector({source:new ol.source.Vector({wrapX:false}),displayInLayerSwitcher:false}));h.mapLayers.push(new ol.layer.Vector({source:new ol.source.Vector({features:[],wrapX:false}),displayInLayerSwitcher:false}));return h.mapLayers};this.mousePositionControl=new ol.control.MousePosition({coordinateFormat:function(a){return ol.coordinate.format(a,ddCoordTemplate,2)},projection:"EPSG:4326",undefinedHTML:"&nbsp;"});this.map=new ol.Map({target:f,layers:l(),view:new ol.View({center:ol.proj.transform(DHuSMapConfig.map.defaultCenter.coordinates,DHuSMapConfig.map.transformation.source,DHuSMapConfig.map.transformation.destination),zoom:DHuSMapConfig.map.defaultZoom,minZoom:DHuSMapConfig.map.minZoom,maxZoom:DHuSMapConfig.map.maxZoom,extent:ol.proj.transformExtent(i,DHuSMapConfig.map.transformation.source,DHuSMapConfig.map.transformation.destination)}),controls:ol.control.defaults({attributionOptions:{collapsible:false}}).extend([this.mousePositionControl])});h.mapModel.footprintLayerId=h.map.getLayers().getLength()-3;h.mapModel.shapeLayerId=h.map.getLayers().getLength()-2;h.mapModel.selectionLayerId=h.map.getLayers().getLength()-1;if(ApplicationService.settings.isMapLayerSwitcherVisible){var m=new ol.control.LayerSwitcherImage({tipLabel:"Map Layers"});h.map.addControl(m)}if(ApplicationService.settings.enable_shapefile)h.setupDragAndDrop();h.setupBoxSelection();h.setActivedSelection(true);$(document).on("zoom-to",function(a,d){var f={};if(e.getCartFootprints()===true){f=c.model}else{f=b.model}for(var g=0;g<f.list.length;g++){if(f.list[g]){if(f.list[g].uuid==d.uuid){var i=h.map.getLayers().item(h.mapModel.footprintLayerId).getSource().getFeatures()[_.findIndex(h.map.getLayers().item(h.mapModel.footprintLayerId).getSource().getFeatures(),function(a){return h.model[g].uuid==a.product.id})];var j=800;var k=+new Date;var l=ol.animation.pan({duration:j,source:h.map.getView().getCenter(),start:k});var m=ol.animation.zoom({duration:j,resolution:h.map.getView().getResolution(),start:k});h.map.beforeRender(l,m);if(i)h.map.getView().fit(i.getGeometry().getExtent(),h.map.getSize())}}}})},setGraticule:function(a){graticule_step=ApplicationService.settings.graticule_step||.2;graticule_stepCoord=ApplicationService.settings.graticule_stepCoord||2;graticule_maxResolution=ApplicationService.settings.graticule_maxResolution||1e4;graticule_style=ApplicationService.settings.graticule_style||{color:"#808080",width:1};graticul_color=graticule_style.color||"#808080";graticul_width=graticule_style.width||1;graticule_min_dash=ApplicationService.settings.graticule_min_dash;graticule_max_dash=ApplicationService.settings.graticule_max_dash;this.graticule=new ol.control.Graticule({style:new ol.style.Style({stroke:new ol.style.Stroke({color:graticule_style.color,width:graticule_style.width,lineDash:[graticule_min_dash,graticule_max_dash]}),fill:new ol.style.Fill({color:"#fff"}),text:new ol.style.Text({stroke:new ol.style.Stroke({color:"#fff",width:1}),fill:new ol.style.Fill({color:"#000"})})}),
step:graticule_step,stepCoord:graticule_stepCoord,borderWidth:1,margin:0,maxResolution:graticule_maxResolution,formatCoord:function(b){if(a==="dd"){return b.toFixed(1)}else{var c=Math.abs(b);var d=Math.floor(c);var e=(c-d)*60;var f=Math.floor(e);var g=Math.floor((e-f)*60);sign=b<0?"-":"";return sign+d+"°"+f+"'"}}});this.graticule.setMap(this.map)},unsetGraticule:function(){this.graticule.setMap(null)},setupSelection:function(){a.log("map","setupSelection()");var d=this;var f;d.map.on("click",function(a){if(d.mapButton=="Box"){a.preventDefault();return}if(!(d.mapButton=="Pan"&&a.originalEvent.button==0&&d.map.getLayers().item(d.mapModel.selectionLayerId).getSource().getFeatures().length>0)){d.clearSelection()}if(f)f.setStyle(null);f=d.map.forEachFeatureAtPixel(a.pixel,function(a,b){if(b===d.map.getLayers().item(d.mapModel.footprintLayerId))return a});b.deselectAll({uuid:null,sender:"OLMap"});c.deselectAll({uuid:null,sender:"OLMap"});if(f&&f.product){if(e.getCartActive()==true){if(e.getCartFootprints()==true){c.callEventSelectProduct({uuid:f.product.id,sender:"OLMap"})}else ToastManager.error("Map selection disabled. Please load Cart Footprints to select them")}else{b.selectProduct({uuid:f.product.id,sender:"OLMap"});f.setStyle(f.product.selected_style)}}b.OnSelectionChange()})},setupMap:function(b){a.log("map","setupMap()");this.initMap(b);this.setupSelection()},setupCesium:function(){a.log("map","setupCesium()");this.setup3dMap();this.map3d.setEnabled(true);this.map3dActive=true},createJTSMultipolygon:function(a){var b="MULTIPOLYGON(";for(var c=0;c<a.length;c++){var d=a[c];b+="((";var e;var f;for(var g=0;g<d.length-1;g++){if(d[g][1]>85.05)e=85.05;else if(d[g][1]<-85.05)e=-85.05;else e=d[g][1];b+=d[g][0]+" "+e+","}if(d[0][1]>85.05)f=85.05;else if(d[0][1]<-85.05)f=-85.05;else f=d[0][1];b+=d[0][0]+" "+f+")),"}b=b.substring(0,b.length-1)+")";return b},setModel:function(b){a.log("map","setModel()");var c=b;this.model=b;var d=[];var e=b&&b.length?b.length:0;for(var f=0;f<e;f++){var g=_.findIndex(b[f].indexes,function(a){return a.name=="product"});var h=b[f].footprint;var i="";var j=b[f].wkt;if(j){d.push(Product.create(b[f],j))}else{if(h){console.log("No WKT found, rebuild from coordinates...");i=this.createJTSMultipolygon(h);d.push(Product.create(b[f],i))}}}this.renderFootprintLayer(d)},updateHighlightProducts:function(){var a=this;if(b.model.list){for(var c=0;c<b.model.list.length;c++){if(b.model.list[c]){var d=a.map.getLayers().item(a.mapModel.footprintLayerId).getSource().getFeatures()[_.findIndex(a.map.getLayers().item(a.mapModel.footprintLayerId).getSource().getFeatures(),function(a){return b.model.list[c].uuid==a.product.id})];if(d){d.setStyle(b.model.list[c].selected?b.model.list[c].selected_style:b.model.list[c].highlight?b.model.list[c].highlighted_style:b.model.list[c].default_style)}}}}},updateModel:function(c){a.log("map","updateModel()  "+c);var d=this;if(b.model.list){for(var f=0;f<b.model.list.length;f++){if(b.model.list[f]){var g=d.map.getLayers().item(d.mapModel.footprintLayerId).getSource().getFeatures()[_.findIndex(d.map.getLayers().item(d.mapModel.footprintLayerId).getSource().getFeatures(),function(a){return b.model.list[f].uuid==a.product.id})];if(g)g.setStyle(b.model.list[f].selected?b.model.list[f].selected_style:b.model.list[f].default_style)}if(b.model.list[f].selected&&c){var h=d.map.getLayers().item(d.mapModel.footprintLayerId).getSource().getFeatures()[_.findIndex(d.map.getLayers().item(d.mapModel.footprintLayerId).getSource().getFeatures(),function(a){return d.model[f].uuid==a.product.id})];var i=800;var j=+new Date;var k=ol.animation.pan({duration:i,source:d.map.getView().getCenter(),start:j});var l=ol.animation.zoom({duration:i,resolution:d.map.getView().getResolution(),start:j});var l=function(){};d.map.beforeRender(k,l);if(h){var m=h.getGeometry().getExtent();var n=ol.extent.getCenter(m);d.map.getView().setCenter(n)}}}}if(e.getCartFootprints())d.updateCartFootprints()},updateCartHighlightedProducts:function(){var a=this;if(e.getCartFootprints()===true&&c.model.list)a.updateCartFootprints()},updateCartFootprints:function(){var a=this;c.model.list.forEach(function(b,d){b=a.map.getLayers().item(a.mapModel.footprintLayerId).getSource().getFeatures()[_.findIndex(a.map.getLayers().item(a.mapModel.footprintLayerId).getSource().getFeatures(),function(a){return c.model.list[d].uuid==a.product.id})];var e=c.model.list[d];if(b)b.setStyle(e.selected?e.selected_style:e.highlight?e.highlighted_style:e.default_style)})},polygon2String:function(a){var b="POLYGON((";for(var c=0;c<a.length;c++)b+=a[c][0]+" "+a[c][1]+",";return b+a[0][0]+" "+a[0][1]+"))"},processSelection:function(a,b){var c=this;var d="";var e=a.clone();var f=e.getGeometry();var g=[];var h=[];var i=[];f=f.transform(DHuSMapConfig.map.transformation.destination,DHuSMapConfig.map.transformation.source);g=f.getCoordinates();var j="";for(var k=0;k<g.length;k++){j+=c.polygon2String(g[k])}if(b){if(b.localeCompare("Polygon")==0&&(!c.testGeomIsValid(j)||!c.testPolygonOutOfBounds(f.getExtent()))){alert("Not a valid polygon!");c.clearSelection();return""}d="( ";for(var k=0;k<g.length;k++){d+='footprint:"Intersects(';d+=c.polygon2String(g[k]);d+=')"';if(k<g.length-1)d+=" OR "}d+=")"}else{if(c.testPolygonOutOfMap(f.getExtent())){alert("Not a valid polygon!");c.clearSelection();return""}var l=f.getExtent();var m=l[3];var n=l[1];var o=l[0];var p=l[2];var q=false;var r=false;var d="";var s={};if(o<-180&p>180){d="( ";d+='footprint:"Intersects('+c.polygon2String([[-180,n],[0,n],[0,m],[-180,m]])+')" OR ';d+='footprint:"Intersects('+c.polygon2String([[0,n],[180,n],[180,m],[0,m]])+')" )'}else{while(o<-180){q=true;o+=360}while(p>180){r=true;p-=360}if(p>o){if(p-o>180){d="( ";d+='footprint:"Intersects('+c.polygon2String([[o,n],[0,n],[0,m],[o,m]])+')" OR ';d+='footprint:"Intersects('+c.polygon2String([[0,n],[p,n],[p,m],[0,m]])+')" )'}else if(q||r){d="( ";d+='footprint:"Intersects('+c.polygon2String([[-180,n],[0,n],[0,m],[-180,m]])+')" OR ';d+='footprint:"Intersects('+c.polygon2String([[0,n],[180,n],[180,m],[0,m]])+')" )'}else{d="( ";d+='footprint:"Intersects('+c.polygon2String([[o,n],[p,n],[p,m],[o,m]])+')" )'}}else{if(o<0){d="( ";d+='footprint:"Intersects('+c.polygon2String([[o,n],[0,n],[0,m],[o,m]])+')" OR ';d+='footprint:"Intersects('+c.polygon2String([[0,n],[180,n],[180,m],[0,m]])+')" OR ';d+='footprint:"Intersects('+c.polygon2String([[-180,n],[p,n],[p,m],[-180,m]])+')" )'}else if(p>0){d="( ";d+='footprint:"Intersects('+c.polygon2String([[o,n],[180,n],[180,m],[o,m]])+')" OR ';d+='footprint:"Intersects('+c.polygon2String([[-180,n],[0,n],[0,m],[-180,m]])+')" OR ';d+='footprint:"Intersects('+c.polygon2String([[0,n],[p,n],[p,m],[0,m]])+')" )'}else{d="( ";d+='footprint:"Intersects('+c.polygon2String([[o,n],[180,n],[180,m],[o,m]])+')" OR ';d+='footprint:"Intersects('+c.polygon2String([[-180,n],[p,n],[p,m],[-180,m]])+')" )'}}}}return d},setDrawOnMap:function(a){if(!a)this.clearSelection();this.dragBox.setActive(a);this.drawBox.setActive(a)},init:function(b){a.log("map","init()");var c=this;this.setupMap(b);if(DHuSMapConfig.map3dActive)this.setupCesium()}}}]);angular.module("DHuS-webclient").directive("dhusMap",["$document","$location","$rootScope","$window","GraticuleService","CartModel","CartStatusService","ConfigurationService","LayoutManager","Logger","OLMap","SearchBoxService","SearchModel",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{restrict:"AE",replace:true,templateUrl:"components/map/view.html",scope:{text:"="},createdSearchModel:function(){},productDidSelected:function(){},singleProductDidSelected:function(){},productDidDeselected:function(){},productDidHighlighted:function(){},OnSelectProduct:function(){},OnHighlight:function(){},compile:function(b,c){var n=this;var o=false;return{pre:function(b,c,e){m.sub(n);f.sub(n);var g=function(){$("#map").css("top",parseInt(i.getToolbarHeight())+"px");$("#map").css("height",parseInt(i.getScreenHeight())-parseInt(i.getToolbarHeight())+"px")};angular.element(d).bind("resize",function(){g()});angular.element(a).ready(g);angular.element(d).bind("resize",function(){setTimeout(function(){k.map.updateSize()},0)});angular.element(d).ready(function(){setTimeout(function(){k.map.updateSize()},0)})},post:function(a,b,c){if(!h.isLoaded()){h.getConfiguration().then(function(a){if(a){ApplicationService=a;if(ApplicationService.settings.shapefile_max_size&&ApplicationService.settings.shapefile_max_size_message){MAX_SHAPE_FILE_SIZE=ApplicationService.settings.shapefile_max_size;MAX_SHAPE_FILE_SIZE_MESSAGE=ApplicationService.settings.shapefile_max_size_message}}})}else{if(ApplicationService.settings.shapefile_max_size&&ApplicationService.settings.shapefile_max_size_message){MAX_SHAPE_FILE_SIZE=ApplicationService.settings.shapefile_max_size;MAX_SHAPE_FILE_SIZE_MESSAGE=ApplicationService.settings.shapefile_max_size_message}}a.format=MOUSE_POSITION_FORMAT;a.titleformat="Convert to Degree Minute Second";a.model=l.model;a.toggleBtnMap=false;k.mapButton="Box";a.drawByDefault=ApplicationService.settings.draw_by_default;function d(){k.init("map");k.externalInterface.sendSelectionCoordinates=function(b){a.model.geoselection=b};n.OnSelectProduct=function(a){k.updateModel(false)};n.OnDeselectCurrentProduct=function(a){k.updateModel(false)};n.OnHighlight=function(a){k.updateCartHighlightedProducts()};n.createdSearchModel=function(){k.setModel(m.model.list)};n.productDidSelected=function(a){k.updateModel(false)};n.productDidDeselected=function(a){k.updateModel(false)};n.singleProductDidSelected=function(a){k.updateModel(false)};n.productDidHighlighted=function(a){k.updateHighlightProducts()};n.productDidntHighlighted=function(a){k.updateHighlightProducts()};n.clearMap=function(){k.clearSelection()};n.updatedSearchModel=function(){}}a.toggle3dMap=function(){j.log("map","toggle3dMap()");k.map3d.setEnabled(!k.map3d.getEnabled());k.toggleButtonLabel=k.map3d.getEnabled()?DHuSMapConfig.mapToggleButton.active2DlabelText:DHuSMapConfig.mapToggleButton.active3DlabelText};a.toggleActivedSelection=function(){if(g.getCartActive()==true){ToastManager.error("Disabled When Cart is Active");return}j.log("map","toggleActivedSelection()");k.setActivedSelection(!k.activedSelection);a.toggleBtnMap=!k.activedSelection;k.mapButton=a.toggleBtnMap?"Pan":"Box";a.animateCircle()};a.animateCircle=function(){if(g.getCartActive()==true){ToastManager.error("Toggle button disabled when Cart is active");return}var b=document.getElementById("moving-circle-toggle");if(o){$(b).animate({top:"30px"},300);a.toggleSwitcherTitle="Switch to Area Mode"}else{$(b).animate({top:"-"+parseInt($(b).height()+-28)+"px"},300);a.toggleSwitcherTitle="Switch to Navigation Mode"}o=!o};a.activatePan=function(){k.setActivedSelection(false);a.toggleBtnMap=true;k.mapButton="Pan"};a.activateBox=function(){k.setActivedSelection(true);a.toggleBtnMap=false;k.mapButton="Box";k.setupBoxSelection()};a.activatePolygon=function(){k.setActivedSelection(true);a.toggleBtnMap=false;k.mapButton="Polygon";k.setupBoxSelection()};a.clearSelection=function(){k.clearSelection()};a.switchCoordinate=function(){if(e.getGraticuleStatus()==false){k.unsetGraticule();k.setGraticule(a.format=="dd"?"dms":"dd")}if(a.format.localeCompare("dd")==0){a.format="dms";coordinateStatus=a.format;a.titleformat="Convert to Decimal Degree"}else{a.format="dd";coordinateStatus=a.format;a.titleformat="Convert to Degree Minute Second"}k.switchCoordinate(a.format)};a.isMapLayerSwitcherVisible=ApplicationService.settings.isMapLayerSwitcherVisible;a.showmap=ApplicationService.settings.showmap;d();if(!a.drawByDefault)a.toggleActivedSelection()}}}}}]);angular.module("DHuS-webclient").directive("loginButton",["$location","AuthenticationService",function(a,b){return{restrict:"AE",replace:true,templateUrl:"components/login-button/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){a.openLogin=function(){UserDetailsManager.getUserDetails()}}}}}}]);angular.module("DHuS-webclient").directive("loginDialog",["$location","AuthenticationService","UserInfoService","ConfigurationService","UserService","Session",function(a,b,c,d,e,f){return{restrict:"AE",replace:true,templateUrl:"components/login-dialog/view.html",scope:{text:"="},compile:function(a,g){return{pre:function(a,b,c){a.showsignup=ApplicationService.settings.signup;a.forgotpassword=ApplicationService.settings.forgotpassword;if(!d.isLoaded()){d.getConfiguration().then(function(b){if(b){ApplicationService=b;a.showsignup=ApplicationService.settings.signup;a.forgotpassword=ApplicationService.settings.forgotpassword}else{}},function(a){})}else a.showsignup=ApplicationService.settings.signup;a.forgotpassword=ApplicationService.settings.forgotpassword},post:function(a,d,g){b.setLoginMethod(function(){$("#wronglogin").html("");$("#wronglogin").html("");$("#loginModal").modal("show")});a.user={};a.userInfo=c.userInfo;a.showsignup=false;a.forgotpassword=false;function h(){$("#loginModal").on("shown.bs.modal",function(a){$("#wronglogin").html("");$("#loginUsername").focus()})}a.login=function(){console.log("login-dialog scope.login");var c=this;if(a.user.username!=null){a.user.username=a.user.username.toLowerCase();b.login(a.user.username,a.user.password,c).success(function(c){e.getODataUser(a.user.username).then(function(c){window.user=a.user.username;b.logged=true;b.basicAuth=window.btoa(a.user.username+":"+a.user.password);f.setSessionUsername(a.user.username);f.updateSession();e.setUserModel(c);e.setUserRolesModel(c);a.manageLoginResult();ToastManager.success("Login successful")},function(a){b.logout().success(function(){ToastManager.error("Login failed");$("#wronglogin").html("Login failed.\n Please try again.")}).error(function(){ToastManager.error("Login failed");$("#wronglogin").html("Login failed.\n Please try again.")})})}).error(function(a){ToastManager.error("Login failed");$("#wronglogin").html("!The username and password you entered don't match.")})}else{ToastManager.error("!Login failed");$("#wronglogin").html("!The username and password you entered don't match.")}};a.close=function(){$("#loginModal").modal("hide")};a.signup=function(){$("#loginModal").modal("hide");location.href="#/self-registration"};a.manageLoginResult=function(){$("#loginModal").modal("hide");a.userInfo.isLogged=true;window.location.replace("#/home")};h()}}}}}]);angular.module("DHuS-webclient").directive("userButton",["$location","SearchService","UserService","UserInfoService","Session","CartStatusService",function(a,b,c,d,e,f){return{restrict:"AE",replace:true,templateUrl:"components/user-button/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){a.openBadge=function(){e.checkSession().then(function(a){if(a){d.userInfo.isLogged=true;UserDetailsManager.getUserDetails()}else{d.userInfo.isLogged=false;UserDetailsManager.getUserDetails()}},function(a){d.userInfo.isLogged=false;UserDetailsManager.getUserDetails()})}}}}}}]);angular.module("DHuS-webclient").directive("userDialog",["$location","UserService","UserInfoService","AuthenticationService","AdvancedSearchService","ConfigurationService","Session","CartMenuService","CartStatusService",function(a,b,c,d,e,f,g,h,i){$(document).mousedown(function(a){var b=$("#userBadge");if(!b.is(a.target)&&b.has(a.target).length==0)b.hide()});return{restrict:"AE",replace:true,templateUrl:"components/user-dialog/view.html",scope:{text:"="},compile:function(a,e){return{pre:function(a,b,c){a.showsignup=ApplicationService.settings.signup;a.forgotpassword=ApplicationService.settings.forgotpassword;if(!f.isLoaded()){f.getConfiguration().then(function(b){if(b){ApplicationService=b;a.showsignup=ApplicationService.settings.signup;a.forgotpassword=ApplicationService.settings.forgotpassword;a.hideLoginTitle=ApplicationService.settings.hide_login_title;a.loginTitle=ApplicationService.settings.login_title?ApplicationService.settings.login_title:"Please login to access our services…"}else{}},function(a){})}else a.showsignup=ApplicationService.settings.signup;a.forgotpassword=ApplicationService.settings.forgotpassword},post:function(a,e,f){a.userInfo=c.userInfo;a.isManagement=false;a.isSynchroUser=false;a.isUploadUser=false;a.isRootUser=false;a.showsignup=false;a.forgotpassword=false;a.username;a.password;function j(){UserDetailsManager.setUserDetails(function(){a.getUserDetails()})}a.getUserDetails=function(){if(a.userInfo.isLogged){a.user=b.model;a.editprofile=ApplicationService.settings.editprofile;a.showcart=ApplicationService.settings.showcart;if(!a.user||!a.user.username){a.getUser()}else if(g.getSessionUsername()&&a.user.username.localeCompare(g.getSessionUsername())!=0){a.getUser()}else{a.getInfoByRole(a.user.roles);a.isRootUser=a.user&&a.user.username.localeCompare(ApplicationService.settings.superuser)==0?true:false}}else{$("#wronglogin").html("");$("#loginUsername").focus()}if($(".callout").css("display")=="none"){$(".callout").css("display","inline-block");$(".notch").css("display","inline-block")}else{$(".callout").css("display","none");$(".notch").css("display","none")}};a.closeBadge=function(){$(".callout").css("display","none");$(".notch").css("display","none")};a.editProfile=function(){$(".callout").css("display","none");$(".notch").css("display","none");i.setIsUserDialog(true);location.href="#/user-profile"};a.loadCart=function(){console.warn("OLD CART FUNCTION");$(".callout").css("display","none");$(".notch").css("display","none");location.href="#/user-cart"};a.loadSearches=function(){$(".callout").css("display","none");$(".notch").css("display","none");location.href="#/user-searches"};a.loadManagement=function(){$(".callout").css("display","none");$(".notch").css("display","none");i.setIsUserDialog(true);location.href="#/management"};a.loadSynchronizers=function(){$(".callout").css("display","none");$(".notch").css("display","none");i.setIsUserDialog(true);location.href="#/odata-synchronizer"};a.loadUpload=function(){$(".callout").css("display","none");$(".notch").css("display","none");i.setIsUserDialog(true);location.href="#/upload-product"};a.userDialogGoCart=function(){if(i.getIsUserDialog()===true){a.closeBadge();window.location.replace("#/home")}else{if(h.model.hidden)h.show();else h.hide()}};a.login=function(){var c=this;if(a.username!==null){a.username=a.username.toLowerCase();d.login(a.username,a.password,c).success(function(c){b.getODataUser(a.username).then(function(c){window.user=a.username;d.logged=true;d.basicAuth=window.btoa(a.username+":"+a.password);g.setSessionUsername(a.username);g.updateSession();b.setUserModel(c);b.setUserRolesModel(c);a.manageLoginResult();ToastManager.success("Login successful!");i.setIsUserDialog(false);window.location.replace("#/home")},function(a){d.logout().success(function(){ToastManager.error("Login failed");$("#wronglogin").html("Login failed.\n Please try again.")}).error(function(){ToastManager.error("Login failed");$("#wronglogin").html("Login failed.\n Please try again.")})})}).error(function(a){ToastManager.error("Login failed");$("#wronglogin").html("The username and password you entered don't match.")})}else{ToastManager.error("Login failed");$("#wronglogin").html("The username and password you entered don't match.")}};a.signup=function(){location.href="#/self-registration"};a.manageLoginResult=function(){a.userInfo.isLogged=true;this.closeBadge()};a.getUser=function(){b.getUser().then(function(b){a.user=b;a.getInfoByRole(a.user.roles);a.isRootUser=a.user&&a.user.username.localeCompare(ApplicationService.settings.superuser)==0?true:false})};a.logout=function(){d.logout().success(function(b){h.hide();ToastManager.success("Logout successful");a.closeBadge();a.userInfo.isLogged=false;window.location.replace("#/home")}).error(function(a){ToastManager.error("Logout failed")})};a.getInfoByRole=function(b){var c=$("#roles");var d="";a.isManagement=false;a.isSynchroUser=false;a.isUploadUser=false;if(b){var e=ApplicationService.settings.availableRoles;var f="";e.forEach(function(a){f="#role_"+a.id;$(f).hide()});b.forEach(function(b){d="#role_"+b;if(_.contains(ApplicationService.settings.managementRoles,b))a.isManagement=true;if(_.contains(ApplicationService.settings.synchronizerRoles,b))a.isSynchroUser=true;if(_.contains(ApplicationService.settings.uploadRoles,b))a.isUploadUser=true;$(d).show()})}};j()}}}}}]);angular.module("DHuS-webclient").directive("alertManager",["$location","AuthenticationService",function(a,b){return{restrict:"AE",replace:true,templateUrl:"components/alert-manager/view.html",scope:{text:"="},compile:function(a,c){return{pre:function(a,b,c){a.force=false},post:function(a,c,d){AlertManager.setSuccess(function(b,c){a.success(b,c)});AlertManager.setError(function(b,c){a.error(b,c)});AlertManager.setWarn(function(b,c){a.warn(b,c)});AlertManager.setInfo(function(b,c){a.info(b,c)});AlertManager.setForceLogout(function(b){a.forceLogout(b)});function e(){$("#alertModal").on("shown.bs.modal",function(a){});$("#alertModal").on("hidden.bs.modal",function(c){if(a.force){b.logout().success(function(b){a.force=false;window.location.replace("#/home");window.location.reload()}).error(function(b){a.force=false;ToastManager.error("Logout failed")})}})}a.close=function(){$("#alertModal").modal("hide")};a.toastImp=function(a,b,c,d){$("#alertModal").removeClass("success error warn info");$("#alertModal").addClass(a);$("#alerttitle").removeClass("success error warn info");$("#alerttitle").addClass(a);$("#alerticon").removeClass();$("#alerticon").addClass(d);$(".fab").css("display","none");var e=".fab."+a;$(e).css("display","inline-block");$("#alerttitle").html(b);$("#alertmessage").html(c);$("#alertModal").modal("show")};a.success=function(b,c){var d="glyphicon glyphicon-ok-sign";a.toastImp("success",b,c,d)};a.error=function(b,c){var d="glyphicon glyphicon-exclamation-sign";a.toastImp("error",b,c,d)};a.warn=function(b,c){var d="glyphicon glyphicon-alert";a.toastImp("warn",b,c,d)};a.info=function(b,c){var d="glyphicon glyphicon-info-sign";a.toastImp("info",b,c,d)};a.forceLogout=function(b){a.force=b};e()}}}}}]);angular.module("DHuS-webclient").directive("toastManager",["$location","ngToast",function(a,b){return{restrict:"AE",replace:true,templateUrl:"components/toast-manager/view.html",scope:{text:"="},compile:function(a,c){return{pre:function(a,b,c){},post:function(a,c,d){a.alert={};ToastManager.setSuccess(function(b){a.success(b)});ToastManager.setError(function(b){a.error(b)});ToastManager.setWarn(function(b){a.warn(b)});ToastManager.setInfo(function(b){a.info(b)});function e(){}a.close=function(a){$("#toast-container").css("display","none")};a.toastImp=function(a,c){b.create({className:a,content:'<span style="color: white">'+c.toUpperCase()+"</span>",timeout:2e3})};a.success=function(b){a.toastImp("success",b)};a.error=function(b){a.toastImp("danger",b)};a.warn=function(b){a.toastImp("warn",b)};a.info=function(b){a.toastImp("info",b)};e()}}}}}]);angular.module("DHuS-webclient").directive("ol3switcherButton",["$location",function(a){return{restrict:"AE",replace:true,templateUrl:"components/map/ol3switcher-button/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){var d='<div class="fab-layer toggle-layers-button" title="Map Layers">';var e='<svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;">';var f='<g id="layers"><path d="M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"/></g>';var g="</svg>";var h="</div>";$(".layer-switcher > button").html(d+e+f+g+h)},post:function(a,b,c){a.openLayers=function(){ol.control.LayerSwitcher.prototype.showPanel()}}}}}}]);angular.module("DHuS-webclient").directive("infoElement",["$location",function(a){return{restrict:"AE",replace:true,templateUrl:"components/info-element/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){a.openInfo=function(){InfoManager.getInfo()}}}}}}]);angular.module("DHuS-webclient").directive("infoBadge",["$location","VersionService","ConfigurationService",function(a,b,c){$(document).mouseup(function(a){var b=$("#infoBadge");if(!b.is(a.target)&&b.has(a.target).length==0)b.hide()});var d=false;var e=ApplicationService.version;return{restrict:"AE",replace:true,templateUrl:"components/info-badge/view.html",scope:{text:"="},compile:function(a,f){return{pre:function(a,b,c){},post:function(a,f,g){function h(){InfoManager.setInfo(function(){a.getInfo()})}a.getInfo=function(){if(!d){if(!c.isLoaded()){c.getConfiguration().then(function(b){if(b){ApplicationService=b;a.setInfo()}else{a.setInfo()}},function(b){a.setInfo()})}else{a.setInfo()}d=true}else{a.setInfo();a.showHideCollout()}};a.setInfo=function(){$("#datahublogo").attr("src",ApplicationService.settings.logo);$("#datahubtitle").html(ApplicationService.settings.toolbar.title);a.title=ApplicationService.settings.toolbar.title;a.TandCLink=ApplicationService.settings.t_and_c;if(!d)a.getVersion();else{$("#datahubversion").html(e)}};a.showHideCollout=function(){if($(".info-callout").css("display")=="none"){$(".info-callout").css("display","inline-block")}else{$(".info-callout").css("display","none")}};a.closeBadge=function(){$(".info-callout").css("display","none")};a.getVersion=function(){var c=this;e=ApplicationService.version;b.getVersion().then(function(b){var c=b.value;e=e.replace("#version",c);$("#datahubversion").html(e);a.showHideCollout()})};a.goLink=function(){a.closeBadge()};h()}}}}}]);angular.module("DHuS-webclient").directive("spinnerManager",["$location",function(a){return{restrict:"AE",replace:true,templateUrl:"components/spinner-manager/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){SpinnerManager.setOn(function(){a.on()});SpinnerManager.setOff(function(){a.off()});function d(){}a.on=function(){SpinnerManager.counter+=1;$("#wait").css("display","block")};a.off=function(a,b,c,d){SpinnerManager.counter-=1;if(SpinnerManager.counter<=0){$("#wait").css("display","none")}};d()}}}}}]);angular.module("DHuS-webclient").directive("signupButton",["$location","AuthenticationService","ConfigurationService",function(a,b,c){return{restrict:"AE",replace:true,templateUrl:"components/signup-button/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,d){if(!c.isLoaded()){c.getConfiguration().then(function(b){if(b){ApplicationService=b;a.showsignup=ApplicationService.settings.signup}else{a.showsignup=ApplicationService.settings.signup}},function(a){})}else a.showsignup=ApplicationService.settings.signup},post:function(a,b,c){a.signup=function(){location.href="#/self-registration"}}}}}}]);"use strict";angular.module("DHuS-webclient").directive("listContainer",["UIUtils","$document","$window","SearchModel","SearchService","$q","ProductCartService","UserService","ConfigurationService","AuthenticationService","Session","UserInfoService",function(a,b,c,d,e,f,g,h,i,j,k,l){var m="#search-box-container",n="#list-container",o="30",p="10",q="#show-list-button",r=20,s=0;var t=function(b,c){var d=$("#list-container").width();a.responsiveLayout(function b(){$(n).css("width",parseInt(a.getScreenWidth())-r*2+"px");if(d<550){$("#product-per-page-label").hide()}else{$("#product-per-page-label").show()}},function b(){$(n).css("width",parseInt(a.getScreenWidth())-r*2+"px");if(d<550){$("#product-per-page-label").hide()}else{$("#product-per-page-label").show()}},function b(){if(!ApplicationService.settings.show_extended_list){$(n).css("width",parseInt(a.getScreenWidth()*.5)-r*2+"px");if(d<550){$("#product-per-page-label").hide()}else{$("#product-per-page-label").show()}}else{$(n).css("width",parseInt(a.getScreenWidth())-r*2+"px")}},function b(){if(!ApplicationService.settings.show_extended_list){$(n).css("width",parseInt(a.getScreenWidth()*.4)-r*2+"px");if(d<550){$("#product-per-page-label").hide()}else{$("#product-per-page-label").show()}}else{$(n).css("width",parseInt(a.getScreenWidth())-r*2+"px")}});var e;var f;if($(m)&&$(m).position()){e=parseInt($(m).height())+parseInt(p)+parseInt($(m).position().top);$(n).css("top",e+"px");if(c&&c.length>0)f=parseInt(a.getScreenHeight())-e-parseInt(o)-parseInt(p)-$(".request-done").outerHeight();else f=parseInt(a.getScreenHeight())-e-parseInt(o)-parseInt(p);$(n).animate({height:parseInt($(".item").outerHeight()*b+$(".list-header").outerHeight()+$(".list-toolbar").outerHeight()+s)+"px"},0);$(n).css("max-height",f+"px");$(q).css("top",e+"px")}};return{showList:false,restrict:"AE",replace:true,templateUrl:"components/list/view.html",scope:{text:"="},expandedList:false,createdSearchModel:function(){},compile:function(a,b){var m=this;return{pre:function(a,b,c){d.sub(m);if(!j.logged){a.productCount=0;a.currentPage=1;a.showDeleteButton=false;$("#show-list-button").hide();$("#showBr1").hide()}},post:function(a,b,o){a.toggleButtonClass="glyphicon glyphicon-resize-full";a.toggleExpandListTitle="Expand list";a.selectAll=false;a.selectLabel="Select All";a.selectStatus="Selected:";a.selectCounter="0";a.checkboxStatus="none";d.setOnSelectionChange(function(){a.OnSelectionChange()});if(!j.logged){$("#show-list-button").hide();a.visibleList=false;a.currentPageCache=1;m.productsPerPagePristine=true;m.currentPagePristine=true;m.visibleListPristine=true;a.showDeleteButton=false;a.currentPage=1}if(!i.isLoaded()){i.getConfiguration().then(function(b){if(b){ApplicationService=b;a.options=ApplicationService.settings.pagination_limit;e.setErrorMessage(ApplicationService.settings.search_error_message);e.setInvalidGeometryMessage(ApplicationService.settings.invalid_geometry_message);e.setErrorTitle(ApplicationService.settings.search_error_title);if(a.options[0]!==null&&angular.isNumber(a.options[0])&&a.options[0]>=0){a.productsPerPage=a.options[0];e.setLimit(a.productsPerPage)}else{a.options=[25,50,75,100,125,150];a.productsPerPage=a.options[0];e.setLimit(a.productsPerPage)}a.showcart=ApplicationService.settings.showcart}else{a.options=[25,50,75,100,125,150];a.productsPerPage=a.options[0];e.setLimit(a.productsPerPage)}},function(a){})}else{a.options=ApplicationService.settings.pagination_limit;a.showcart=ApplicationService.settings.showcart;e.setErrorMessage(ApplicationService.settings.search_error_message);e.setInvalidGeometryMessage(ApplicationService.settings.invalid_geometry_message);e.setErrorTitle(ApplicationService.settings.search_error_title);if(a.options[0]!==null&&angular.isNumber(a.options[0])&&a.options[0]>=0){a.productsPerPage=a.options[0];e.setLimit(a.productsPerPage)}else{a.options=[25,50,75,100,125,150];a.productsPerPage=a.options[0];e.setLimit(a.productsPerPage)}}if(d.model.list&&d.model.list.length>0){setTimeout(function(){m.createdSearchModel()},0)}else{setTimeout(function(){t(0);$("#show-list-button").hide()},0)}a.toggleSelectAll=function(){a.selectAll=!a.selectAll;for(var b=0;b<a.model.length;b++){a.model[b].selected=a.selectAll}a.selectAll?a.selectLabel="Deselect All":a.selectLabel="Select All"};a.checkSomeSelected=function(){var b=d.countSelected();if(a.model==undefined)return;var c=a.model.length;if(b>0&&b<c){return true}else{return false}};a.checkIsOneSelected=function(){var a=d.countSelected();if(a==1){return true}else{return false}};a.checkFull=function(){var b=d.countSelected();if(a.model==undefined)return;var c=a.model.length;if(b==c){return true}else{return false}};a.checkEmpty=function(){var a=d.countSelected();if(a==0){return true}else{return false}};a.SelectAll=function(){a.selectAll=true;for(var b=0;a.model&&b<a.model.length;b++){a.model[b].selected=true}for(var b=0;a.model&&b<a.model.length;b++){d.selectProduct({uuid:a.model[b].uuid,sender:"listItem"})}a.OnSelectionChange()};a.DeselectAll=function(){a.selectAll=false;for(var b=0;a.model&&b<a.model.length;b++){a.model[b].selected=false}for(var b=0;a.model&&b<a.model.length;b++){d.deselectProduct({uuid:a.model[b].uuid,sender:"listItem"});d.nohighlightProduct({
uuid:a.model[b].uuid,sender:"listItem"})}a.OnSelectionChange();setTimeout(function(){a.$apply()},0)};a.UpdateUI=function(){a.selectCounter=d.countSelected()};a.OnSelectionChange=function(){a.UpdateUI()};a.toggleExpandList=function(b){if(b){this.expandedList=true}else{this.expandedList=!this.expandedList}if(this.expandedList){$(n).css("width","calc(100% - 40px)");a.toggleButtonClass="glyphicon glyphicon-resize-small";a.toggleExpandListTitle="Compact list"}else{setTimeout(function(){t(a.productCount,e.doneRequest);a.toggleButtonClass="glyphicon glyphicon-resize-full";a.toggleExpandListTitle="Expand list";$(window).trigger("resize")},0)}};a.showList=function(){$(window).resize();$(window).trigger("resize");m.toggle=true;if(a.model){if(ApplicationService.settings.show_extended_list){a.toggleExpandList(ApplicationService.settings.show_extended_list)}if(!h.getUserModel()){var b=k.getSessionUsername();h.getODataUser(b).then(function(a){h.setUserModel(a);h.setUserRolesModel(a);k.setUserLoggedIn();l.userInfo.isLogged=true})}a.user=h.getUserModel();a.showDeleteButton=false;for(var c=0;c<a.user.roles.length;c++){if(a.user.roles[c]=="DATA_MANAGER"){a.showDeleteButton=true}}a.showSelect=a.showDeleteButton||a.showcart}a.visibleList=true;$(n).animate({opacity:.9},500)};a.hideList=function(){a.visibleList=false};a.goToPage=function(b,c){if(b<=a.pageCount&&b>0||c){a.currentPage=b;return e.gotoPage(b).then(function(){a.refreshCounters();a.currentPageCache=b;a.currentPage=b})}else{var d=f.defer();return d.promise}};var p;angular.element(c).bind("resize",function(b){clearTimeout(p);p=setTimeout(function(){if(a.model)t(a.model.length,e.doneRequest)},0)});m.toggle=false;a.refreshCounters=function(){a.productCount=d.model.count;a.pageCount=Math.floor(d.model.count/a.productsPerPage)+(d.model.count%a.productsPerPage?1:0)};m.createdSearchModel=function(){a.DeselectAll();a.model=d.model.list;a.productCount=d.model.count;a.showtoggle=(a.productCount||e.doneRequest&&e.doneRequest.length>0)&&!ApplicationService.settings.show_extended_list;a.refreshCounters();a.showList(a.productCount,e.doneRequest);a.order=e.getOrderName();a.sortedby=e.getSortedName();if(e.offset==0){a.currentPageCache=1;a.currentPage=1}else{a.currentPageCache=d.model.count?a.currentPage:1;a.currentPage=d.model.count?a.currentPage:1}a.visualizedProductsFrom=d.model.count?e.offset+1:0;a.visualizedProductsTo=(d.model.count?a.currentPage*a.productsPerPage:1)>a.productCount?a.productCount:d.model.count?a.currentPage*a.productsPerPage:1;if(!ApplicationService.settings.show_extended_list)setTimeout(function(){t(a&&a.model&&a.model.length?a.model.length:0,e.doneRequest)},0);else setTimeout(function(){t(a&&a.model&&a.model.length?a.model.length:0,e.doneRequest);a.toggleExpandList(ApplicationService.settings.show_extended_list)},0);setTimeout(function(){$("#product-list").animate({scrollTop:0})},0)};m.updatedSearchModel=function(){};a.toggleList=function(){m.toggle=!m.toggle;if(m.toggle){a.showList();a.visibleList=true}else{a.hideList();a.visibleList=false}};a.closeList=function(){a.hideList();a.visibleList=false};$(document).on("closeSession",function(){a.closeList();setTimeout(function(){$("#show-list-button").hide()},0)});a.switchButtonLabel="+";i.getConfiguration().then(function(b){if(b){a.ApplicationConf=b;a.options=a.ApplicationConf.settings.pagination_limit;if(a.options[0]!==null&&angular.isNumber(a.options[0])&&a.options[0]>=0){a.productsPerPage=a.options[0];e.setLimit(a.productsPerPage)}else{a.options=[25,50,75,100,125,150];a.productsPerPage=a.options[0];e.setLimit(a.productsPerPage)}}else{a.options=[25,50,75,100,125,150];a.productsPerPage=a.options[0];e.setLimit(a.productsPerPage)}},function(a){});a.switchButtonLabel="+";a.updateValue=function(){if(this.productsPerPagePristine){this.productsPerPagePristine=false;return}e.setLimit(a.productsPerPage);a.goToPage(1,true)};a.clearCart=function(){if(a.productCount==0)return;g.clearCart().then(function(a){if(a.status==200){e.search();ToastManager.success("user cart cleared")}else{ToastManager.error("error cleaning user cart")}})};a.$watch("visibleList",function(a){if(m.visibleListPristine){m.visibleListPristine=false;return}if(a){$("#show-list-button").animate({opacity:0},500,"linear",function(){$("#show-list-button").hide()})}else{$("#show-list-button").show();$("#show-list-button").animate({opacity:1},500,"linear",function(){})}});var q=function(){var b=parseInt(a.currentPage);if(isNaN(b)||!/^\d+$/.test(a.currentPage)){a.$apply(function(){a.currentPage=a.currentPageCache});return}if(b<=0){a.$apply(function(){a.currentPage=a.currentPageCache});return}if(b>a.pageCount){a.$apply(function(){a.currentPage=a.currentPageCache});return}a.goToPage(a.currentPage,true)};$("#page-selector").bind("enterKey",function(a){q()});$("#page-selector").focusout(function(a){q()});$("#page-selector").keyup(function(a){if(a.keyCode==13){$(this).trigger("enterKey")}});a.currentPage=1;a.gotoFirstPage=function(){a.goToPage(1,false)};a.gotoPreviousPage=function(){a.goToPage(a.currentPageCache-1,false)};a.gotoNextPage=function(){a.goToPage(parseInt(a.currentPageCache)+parseInt(1),false)};a.gotoLastPage=function(){a.goToPage(a.pageCount,false)};a.selectPageDidClicked=function(a){};a.hasSelectedProducts=function(){for(var b=0;b<a.model.length;b++){if(a.model[b].selected){return true}}return false};a.addAllToCart=function(){var b=[];var c=0;for(var d=0;d<a.model.length;d++){if(a.model[d].selected){a.model[d].isincart=true;b.push(g.addProductToCart(a.model[d].id).success(function(){c++}).error(function(){ToastManager.error("Added product to cart failed")}))}}f.all(b).then(function(){if(c>0){var b=c>1?"products":"product";ToastManager.success(c+" "+b+" added to cart");a.DeselectAll()}})};a.removeAllSelected=function(){var b=[];var c=0;for(var d=0;d<a.model.length;d++){if(a.model[d].selected){a.model[d].isincart=false;b.push(g.removeProductFromCart(a.model[d].id).success(function(){c++}).error(function(){ToastManager.error("Removed product to cart failed")}))}}f.all(b).then(function(){if(c>0){var b=c>1?"products":"product";ToastManager.success(c+" "+b+" added to cart");a.DeselectAll()}})};a.deleteAll=function(){if(!a.hasSelectedProducts())return;var b=[];var c=0;var d=null;var g=confirm("Delete the product?");if(g){if(ApplicationService.settings.deleted_product.show_deletion_cause){var h=prompt("Please enter a deletion cause.\n "+'Valid causes are: "'+ApplicationService.settings.deleted_product.causes+"\". \nClick on 'Cancel' if you don't want to insert any cause.","");if(h!=null&&h.length>0){if(ApplicationService.settings.deleted_product.causes.indexOf(h)>=0){d=h}else{d=ApplicationService.settings.deleted_product.default_cause}}}for(var i=0;i<a.model.length;i++){if(a.model[i].selected){a.model[i].isincart=true;b.push(ProductService.removeProduct(a.model[i].uuid,d).success(function(){c++}).error(function(){ToastManager.error("Delete product failed")}))}}f.all(b).then(function(){if(c>0){var b=c>1?"products":"product";ToastManager.success(c+" "+b+" deleted");a.DeselectAll();e.search()}})}}}}}}}]);"use strict";angular.module("DHuS-webclient").directive("listItem",["$rootScope","$window","CartModel","CartMenuService","ConfigurationService","ProductCartService","ProductListService","SearchModel","SearchService","Session","UserInfoService","UserService","UIUtils",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n="#dbdbdb";var o="#F5F5F5";var p="transparent";var q="";var r={restrict:"AE",replace:true,templateUrl:"components/list/list-item/view.html",scope:{product:"=",uuid:"="},getShortString:function(a,b){return a.length<=b?a:a.substring(0,b/2)+"..."+a.substring(a.length-b/2-3)},searchModelSubscription:function(a,b,c){h.sub({scope:c,id:"listItem",product:a,element:b,productDidSelected:function(a){var b=this;if(a.uuid==this.product.uuid){setTimeout(function(){b.element.css({"background-color":n});c.$apply()},0)}else{setTimeout(function(){if(a.sender=="OLMap"){b.element.css({"background-color":p});c.$apply()}},0)}if(a.uuid==this.product.uuid&&a.sender=="OLMap"){g.scrollToItem(this.element)}},productDidHighlighted:function(a){if(a.uuid==this.product.uuid&&h.getProductByUUID(this.product.uuid)&&!h.getProductByUUID(this.product.uuid).selected){this.element.css({"background-color":o})}if(a.uuid!=this.product.uuid&&!h.getProductByUUID(this.product.uuid).selected){this.element.css({"background-color":p})}}})},updatedSearchModel:function(){},productDidSelected:function(){},productDidDeselected:function(){},productDidntHighlighted:function(){},setUI:function(){},compile:function(a,d){var g=this;return{pre:function(a,b,c){a.showquicklook=ApplicationService.settings.showquicklook;a.showcart=ApplicationService.settings.showcart;a.hide_on_demand=ApplicationService.settings.hide_on_demand;a.enableLta=ApplicationService.settings.enable_lta;a.hideorder=ApplicationService.settings.hideorder;a.order_properties=ApplicationService.settings.order_properties?ApplicationService.settings.order_properties:e.default_order_properties;a.order_style=ApplicationService.settings.order_style?ApplicationService.settings.order_style:e.default_order_style;if(!e.isLoaded()){e.getConfiguration().then(function(b){if(b){ApplicationService=b;a.showquicklook=ApplicationService.settings.showquicklook;a.showcart=ApplicationService.settings.showcart;a.hide_on_demand=ApplicationService.settings.hide_on_demand;q=ApplicationConfig.baseUrl;a.enableLta=ApplicationService.settings.enable_lta;a.hide_popover_list=ApplicationService.settings.hide_popover_list;a.hideorder=ApplicationService.settings.hideorder;a.order_properties=ApplicationService.settings.order_properties?ApplicationService.settings.order_properties:e.default_order_properties;a.order_style=ApplicationService.settings.order_style?ApplicationService.settings.order_style:e.default_order_style}},function(a){})}else{q=ApplicationConfig.baseUrl}},post:function(a,d,e){if(!a.user){if(!l.getUserModel()){var n=j.getSessionUsername();l.getODataUser(n).then(function(b){l.setUserModel(b);l.setUserRolesModel(b);a.user=l.getUserModel();j.setUserLoggedIn();k.userInfo.isLogged=true;a.showDeleteButton=false;a.hide_popover_list=ApplicationService.settings.hide_popover_list;for(var c=0;c<a.user.roles.length;c++)if(a.user.roles[c]=="DATA_MANAGER")a.showDeleteButton=true;a.showSelect=a.showDeleteButton||a.showcart})}else{a.user=l.getUserModel();a.showDeleteButton=false;a.hide_popover_list=ApplicationService.settings.hide_popover_list;for(var o=0;o<a.user.roles.length;o++)if(a.user.roles[o]=="DATA_MANAGER")a.showDeleteButton=true;a.showSelect=a.showDeleteButton||a.showcart}}a.showSelect=a.showDeleteButton||a.showcart;a.hide_popover_list=ApplicationService.settings.hide_popover_list;a.satellite=a.product.identifier.substring(0,2);a.mission=a.product.identifier.substring(0,3);var p=function(){};angular.element(b).bind("resize",p);g.searchModelSubscription(a.product,d,a);var r=_.findWhere(a.product.indexes,{name:"summary"});if(r){var s=_.findWhere(r.children,{name:"Size"});var t=_.findWhere(r.children,{name:"Date"});var u=_.findWhere(r.children,{name:"Satellite"});a.size=s?s.value:"";a.date=t?t.value:"";a.satellitename=u?u.value:"";a.summary="";a.summary+=a.satellitename?"Mission: "+a.satellitename+"; ":"";a.summary+=a.product.instrument?"Instrument: "+a.product.instrument+"; ":"";a.summary+=a.date?"Sensing Date: "+a.date+"; ":"";a.summary+=a.size?"Size: "+a.size:""}a.link=q+"odata/v1/Products('"+a.product.uuid+"')/$value";a.enableLta?a.product.offline=a.product.offline:a.product.offline=false;if(a.product.quicklook){a.quicklooksrc=q+"odata/v1/Products('"+a.product.uuid+"')/Products('Thumbnail')/$value";a.bigQuicklooksrc=q+"odata/v1/Products('"+a.product.uuid+"')/Products('Quicklook')/$value"}$("[data-toggle='pop']").on("show.bs.popover",function(){$(".popover").removeClass("in")});$("[data-toggle='pop-order']").on("show.bs.popover",function(){$(".popover").removeClass("in")});if(a.product.offline&&!a.hideorder&&a.product.order){a.product.isOrderOn=true}else{a.product.isOrderOn=false}$("[data-toggle=pop]").popover({html:true,content:function(){if(a.hide_popover_list==true)return undefined;var b='<img class="popover-image" src='+a.bigQuicklooksrc+">";return a.bigQuicklooksrc!==undefined?b:undefined}}).on("show.bs.popover",function(){$(".popover").removeClass("in")});$("[data-toggle='pop-order']").popover({placement:function(a,b){$(a).addClass("popp2");var c=m.getElement2ScreenRatio("#list-container")<.7?"right":"bottom";return c},container:"body",trigger:"hover",html:true,delay:{show:600,hide:500},content:function(){var b=a.product.order.status;var c=a.order_style[b];var d="def";var e="";if(a.order_properties["status"])e+='<div><span class="pop2-inner-title">Status: </span><span class="pop-inner-status '+c+'">'+b+"</span></div>";if(a.order_properties["statusMessage"])e+='<div><span class="pop2-inner-title">Status Message: </span><span class="pop-inner-2">'+a.product.order.statusMessage+"</span></div>";if(a.order_properties["id"])e+='<div ><span class="pop2-inner-title">Order Id: </span><span class="pop-inner-2">'+a.product.order.id+"</span></div>";if(a.order_properties["submissionTime"])e+='<div ><span  class="pop2-inner-title">Submission Time: </span><span class="pop-inner-2">'+moment.utc(a.product.order.submissionTime).format("YYYY-MM-DDTHH:mm:ss.SSS")+"</span></div>";if(a.order_properties["estimatedTime"])e+='<div ><span  class="pop2-inner-title">Estimated Time: </span><span class="pop-inner-2">'+moment.utc(a.product.order.estimatedTime).format("YYYY-MM-DDTHH:mm:ss.SSS")+"</span></div>";return e}}).on("show.bs.popover",function(){$(".popover").removeClass("in")});a.hoverIn=function(){h.highlightProduct({uuid:a.product.uuid,sender:"listItem"});a.visibleItemButton=true};a.hoverOut=function(){h.nohighlightProduct({uuid:a.product.uuid,sender:"listItem"});a.visibleItemButton=false};a.selectProduct=function(){if(a.product.selected){h.deselectProduct({uuid:a.product.uuid,sender:"listItem"})}else{h.selectProduct({uuid:a.product.uuid,sender:"listItem"})}h.highlightProduct({uuid:a.product.uuid,sender:"listItem"});h.OnSelectionChange()};a.zoomTo=function(a){$(document).trigger("zoom-to",a)};a.showProductDetails=function(){if(!a.product.selected){a.selectProduct()}ProductDetailsManager.getProductDetails(a.product.uuid,h.model.list)};a.addProductToCart=function(){f.addProductToCart(a.product.id).success(function(){ToastManager.success("Product added to cart");a.product.isincart=true}).error(function(){ToastManager.error("Added product failed")})};a.removeProductFromCart=function(){f.removeProductFromCart(a.product.id).success(function(){ToastManager.success("Product removed from cart");a.product.isincart=false}).error(function(){ToastManager.error("Removed product failed")})};a.isInCart=function(){var b=false;c.model.list.forEach(function(c){if(a.product.id===c.id){b=true}});return b};a.downloadProduct=function(){if(!a.product.offline){window.location=a.link}else{var b=ApplicationConfig.baseUrl+"odata/v2/Products('"+a.uuid+"')/OData.DHuS.Order";var c="The retrieval of offline data is temporary unavailable, please try again later.";ProductService.getLTAProduct(b).then(function(b){if(b.status>=200&&b.status<=202){a.product.order=ProductService.getOrder(b.data);a.product.isOrderOn=true;if(a.product.isincart){AlertManager.success("Offline product retrieval initiated","Offline product retrieval has been initiated. Please check again your Cart to know when it will be online.")}else{f.addProductToCart(a.product.id).success(function(){AlertManager.success("Offline product retrieval initiated","Offline product retrieval has been initiated and the product has been moved to Cart. Please check your Cart to know when it will be online.");a.product.isincart=true}).error(function(){AlertManager.warning("Offline product retrieval initiated","Offline product retrieval has been initiated, but there was an error while adding product to cart. Please check again product list to know when it will be online.")})}}else{b.data&&b.data.error&&b.data.error.message&&b.data.error.message.value?c=b.data.error.message.value:c=c;AlertManager.error("Product unavailable",c)}},function(a){a.data&&a.data.error&&a.data.error.message&&a.data.error.message.value?c=a.data.error.message.value:c=c;AlertManager.error("Product unavailable",c)}).catch(function(a){a.data&&a.data.error&&a.data.error.message&&a.data.error.message.value?c=a.data.error.message.value:c=c;AlertManager.error("Product unavailable",c)})}};a.deleteProduct=function(){var b=confirm("Delete the product?");var c=null;if(b){if(ApplicationService.settings.deleted_product.show_deletion_cause){var d=prompt("Please enter a deletion cause. \n"+'Valid causes are: "'+ApplicationService.settings.deleted_product.causes+"\". \nClick on 'Cancel' if you want to use the default cause: "+'"'+ApplicationService.settings.deleted_product.default_cause+'"');if(d!=null&&d.length>0){if(ApplicationService.settings.deleted_product.causes.indexOf(d)>=0){c=d}else{c=ApplicationService.settings.deleted_product.default_cause}}else{c=ApplicationService.settings.deleted_product.default_cause}}ProductService.removeProduct(a.product.uuid,c).success(function(){i.search();ToastManager.success("Product removed")}).error(function(){ToastManager.error("Remove product failed")})}};a.isOnDemandEnabled=function(){var b=new RegExp("S2(A|B)_MSIL1C.*","g");return b.test(a.product.identifier)};a.requestOnDemandProduct=function(){var b=ApplicationService.settings.confirm_ondemand_request||"Are you sure you want to submit the L2A On-Demand processing request?";var c="The L2A On-Demand processing request is temporary unavailable, please try again later.";var d=confirm(b);if(d){ProductService.submitOnDemandRequest(a.product.uuid).then(function(a){console.log("response is",a);if(a.status>=200&&a.status<=202){if(a.data&&a.data.Status=="COMPLETED"){ProductService.getProductOut(a.data.Id).then(function(a){var b=a.data.Name;var c=ApplicationConfig.baseUrl+"odata/v1/Products('"+a.data.Id+"')/$value";AlertManager.success("Product already available","The demanded product is already available.\nThe product reference is "+b+".\nThe Download URL is "+c)},function(a){AlertManager.success("Product already available","The demanded product is already available.")}).catch(function(a){AlertManager.success("Product already available","The demanded product is already available.")})}else{AlertManager.success("L2A On-Demand processing request initiated","L2A On-Demand processing request has been initiated. Please check your Cart to know when the requested product will be available.")}}else{a.data&&a.data.error&&a.data.error.message?c=a.data.error.message:c=c;AlertManager.error("Processing unavailable",c)}},function(a){a.data&&a.data.error&&a.data.error.message?c=a.data.error.message:c=c;AlertManager.error("Processing unavailable",c)}).catch(function(a){a.data&&a.data.error&&a.data.error.message?c=a.data.error.message:c=c;AlertManager.error("Processing unavailable",c)})}}}}}};return r}]);"use strict";angular.module("DHuS-webclient").directive("productList",["SearchModel",function(a){return{restrict:"AE",replace:true,templateUrl:"components/list/product-list/view.html",scope:{text:"="},compile:function(b,c){var d=this;return{pre:function(b,c,e){b.model=a.model.list;a.sub(d)},post:function(b,c,e){d.createdSearchModel=function(){b.model=[];b.model=a.model.list}}}}}}]);var fileToUpload;angular.module("DHuS-webclient").directive("shapefileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.shapefileModel);var f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0]);fileToUpload=c[0].files[0]})})}}}]);angular.module("DHuS-webclient").directive("advancedSearch",["$window","$document","CartMenuService","UIUtils","AdvancedSearchService","SearchService","SearchModel","SearchBoxService","AdvancedFilterService","ConfigurationService","OLMap","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l){var m="#advanced-search-container",n="#dhus-toolbar-container",o="#search-box-container",p="#list-container",q="30",r="10",s="#show-list-button",t=20,u="15",v=20;var w=5242880;var x="Your shapefile cannot be uploaded because it is too large. Shapefiles must be no larger than 5.00 MB.";e.model.hidden=true;var y=function(){d.responsiveLayout(function a(){$(m).css("width",parseInt(d.getScreenWidth())-t*2+"px");if(e.model.hidden){$(m).css("left","-"+parseInt($(m).width()+20)+"px")}},function a(){$(m).css("width",parseInt(d.getScreenWidth())-t*2+"px");if(e.model.hidden){$(m).css("left","-"+parseInt($(m).width()+20)+"px")}},function a(){if(!ApplicationService.settings.show_extended_list)$(m).css("width","calc(50% - 40px)");else $(m).css("width",parseInt(d.getScreenWidth())-t*2+"px");if(e.model.hidden){$(m).css("left","-"+parseInt($(m).width()+20)+"px")}},function a(){if(!ApplicationService.settings.show_extended_list)$(m).css("width","calc(40% - 40px)");else $(m).css("width",parseInt(d.getScreenWidth())-t*2+"px");if(e.model.hidden){$(m).css("left","-"+parseInt($(m).width()+20)+"px")}});var a,b;if($(o)&&$(o).position()){a=parseInt($(o).height())+parseInt(r)+parseInt($(o).position().top);$(m).css("top",a);b=parseInt(d.getScreenHeight())-a-parseInt(q)-parseInt(r);$(m).css("height",b+"px")}};return{restrict:"AE",replace:true,templateUrl:"components/advanced-search/view.html",scope:{text:"="},expandedAdvancedSearch:false,compile:function(d,l){var n=this;return{pre:function(a,b,c){a.showingestionfilter=ApplicationService.settings.showingestionfilter;a.showsensingfilter=ApplicationService.settings.showsensingfilter;a.enable_shapefile=ApplicationService.settings.enable_shapefile;a.shapefile_description=ApplicationService.settings.shapefile_description?ApplicationService.settings.shapefile_description:"You can also drag & drop the shapefile on map. Only files with extension .shp are supported. Shapefiles are limited to one record of type POLYGON and must be no larger than 5.00 MB.";var d=document.createElement("div");if("draggable"in d||"ondragstart"in d&&"ondrop"in d){a.isdragsupported=true}a.showSortMessage=false;a.sortmessage={}},post:function(d,l,o){d.toggleButtonClass="glyphicon glyphicon-resize-full";d.toggleExpandTitle="Expand AdvancedSearch";g.sub(n);d.model=f.filterContext;e.setClearAdvFilter(function(){d.clearAdvFilter()});n.createdSearchModel=function(){d.doneRequest=f.doneRequest};var p=function(a){var b=a;if(a!=undefined){var c=moment(a).get("date");var d=moment(a).get("month");var e=moment(a).get("year");var f=moment(e+"-"+(parseInt(d)+1)+"-"+c+" 00:00 +0000","YYYY-MM-DD HH:mm Z");b=f}return b};d.updateFilter=function(){d.model.sortFilter=d.sortmessage.selected?d.sortfilter:"";var a={sensingPeriodFrom:p(d.model.sensingPeriodFrom),sensingPeriodTo:p(d.model.sensingPeriodTo),ingestionFrom:p(d.model.ingestionFrom),ingestionTo:p(d.model.ingestionTo),sortFilter:d.model.sortFilter};e.setAdvancedSearchFilter(a,d.model);h.model.advancedFilter=e.getAdvancedSearchFilter();f.setAdvancedFilter(h.model.advancedFilter)};d.loadSettings=function(){d.showingestionfilter=ApplicationService.settings.showingestionfilter;d.showsensingfilter=ApplicationService.settings.showsensingfilter;d.enable_shapefile=ApplicationService.settings.enable_shapefile;d.model.options=ApplicationService.settings.sortOptions;if(!d.model.sortedby){d.model.sortedby=d.model.options[0].value;f.setSortedBy(d.model.options[0].value);f.setSortedName(d.model.options[0].name)}d.model.orderOptions=ApplicationService.settings.orderOptions;if(!d.model.order){d.model.order=d.model.orderOptions[0].value;f.setOrder(d.model.orderOptions[0].value);f.setOrderName(d.model.orderOptions[0].name)}d.showtoggle=!ApplicationService.settings.show_extended_list};angular.element(a).bind("resize",function(){y()});angular.element(b).ready(function(){if(!j.isLoaded()){j.getConfiguration().then(function(a){if(a){ApplicationService=a;if(ApplicationService.settings.shapefile_max_size&&ApplicationService.settings.shapefile_max_size_message){w=ApplicationService.settings.shapefile_max_size;x=ApplicationService.settings.shapefile_max_size_message}if(ApplicationService.settings.shapefile_description){d.shapefile_description=ApplicationService.settings.shapefile_description}d.loadSettings()}else{}},function(a){})}else{if(ApplicationService.settings.shapefile_max_size&&ApplicationService.settings.shapefile_max_size_message){w=ApplicationService.settings.shapefile_max_size;x=ApplicationService.settings.shapefile_max_size_message}if(ApplicationService.settings.shapefile_description){d.shapefile_description=ApplicationService.settings.shapefile_description}d.loadSettings()}y()});e.setHide(function(){e.model.hidden=true;$(m).animate({left:"-"+parseInt($(m).width()+20)+"px"},300);if(h.model.advancedFilter.trim()!=""||h.model.missionFilter.trim()!=""){$("#advanced-search-icon").removeClass("glyphicon-menu-hamburger").addClass("glyphicon-filter colored")}});e.setShow(function(){c.hide();e.model.hidden=false;y();$(m).animate({left:"20px"},300);$("#advanced-search-icon").removeClass("glyphicon-filter colored").addClass("glyphicon-menu-hamburger");d.sortedbyChange(true);$("#advanced-search-content").scrollTop(0)});d.today=function(){d.dt=new Date};d.today();d.clear=function(){d.dt=null};d.clearAdvFilter=function(){d.model.sensingPeriodFrom=null;d.model.sensingPeriodTo=null;d.model.ingestionFrom=null;d.model.ingestionTo=null;d.model.sortFilter=null;d.showSortMessage=false;d.sortmessage.selected=false;d.sortfilter="";d.sortMessage="";d.showCheckbox=false;d.disableAdvFilter="";d.resetSortingToDefault();$("#advanced-search-icon").removeClass("glyphicon-filter colored").addClass("glyphicon-menu-hamburger");$(".clear-button").css("display","none");d.updateFilter()};d.clearFilter=function(){f.clearSearchInput();f.clearGeoSelection();i.clearAdvancedFilter();e.clearAdvFilter();$("#advanced-search-icon").removeClass("glyphicon-filter colored").addClass("glyphicon-menu-hamburger");$(".clear-button").css("display","none")};d.resetSortingToDefault=function(){d.model.sortedby=d.model.options[0].value;f.setSortedBy(d.model.options[0].value);f.setSortedName(d.model.options[0].name);d.model.order=d.model.orderOptions[0].value;f.setOrder(d.model.orderOptions[0].value);f.setOrderName(d.model.orderOptions[0].name)};d.disabled=function(a,b){return false};function q(){setTimeout(function(){var a=[];a.push($('[aria-label="Thursday"]'));a.push($('[aria-label="Friday"]'));a.push($('[aria-label="Saturday"]'));a.push($('[aria-label="Sunday"]'));a.push($('[aria-label="Monday"]'));a.push($('[aria-label="Tuesday"]'));a.push($('[aria-label="Wednesday"]'));for(var b=0;b<a.length;b++){a[b]&&a[b].remove()}},0)}d.openSensingPeriodFrom=function(a){d.lastOpenEvent=a;d.status.openedSensingPeriodFrom=true;q()};d.openSensingPeriodTo=function(a){d.lastOpenEvent=a;d.status.openedSensingPeriodTo=true;q()};d.openIngestionFrom=function(a){d.lastOpenEvent=a;d.status.openedIngestionFrom=true;q()};d.openIngestionTo=function(a){d.lastOpenEvent=a;d.status.openedIngestionTo=true;q()};d.dateOptions={formatYear:"yy",startingDay:1};d.formats=["yyyy/MM/dd","dd-MMMM-yyyy","dd.MM.yyyy","shortDate"];d.format=d.formats[0];d.status={opened:false};d.sortedbyChange=function(a){f.setSortedBy(d.model.sortedby);if(!a)d.sortmessage.selected=false;var b=d.model.sortedby;var c=$.grep(d.model.options,function(a){return a.value===b})[0].name;var e=$.grep(d.model.options,function(a){return a.value===b})[0].message;var g=$.grep(d.model.options,function(a){return a.value===b})[0].filter;var h=$.grep(d.model.options,function(a){return a.value===b})[0].show_checkbox;var i=$.grep(d.model.options,function(a){return a.value===b})[0].checkbox_checked;var j=$.grep(d.model.options,function(a){return a.value===b})[0].disable_filters;if(e){d.showSortMessage=true;d.sortMessage=e;d.sortfilter=g?g:"";d.showCheckbox=h?true:false;if(d.showCheckbox){d.sortmessage.selected=i?true:false}else{d.sortmessage.selected=true}d.disableAdvFilter=j?"disabled":""}else{d.showSortMessage=false;d.sortMessage="";d.sortfilter="";d.showCheckbox=false;d.disableAdvFilter="";d.sortmessage.selected=false}f.setSortedName(c);d.updateFilter()};d.orderbyChange=function(){f.setOrder(d.model.order);var a=d.model.order;var b=$.grep(d.model.orderOptions,function(b){return b.value===a})[0].name;f.setOrderName(b)};var r=new Date;r.setDate(r.getDate()+1);var s=new Date;s.setDate(r.getDate()+2);d.getDayClass=function(a,b){if(b==="day"){var c=new Date(a).setHours(0,0,0,0);for(var e=0;e<d.events.length;e++){var f=new Date(d.events[e].date).setHours(0,0,0,0);if(c===f){return d.events[e].status}}}return""};d.setIfSelectedFile=function(){var a=document.querySelector("#shape-file-info").innerText;if(a!="No file choosen"){d.isSelectedFile=true}else{d.isSelectedFile=false}};d.uploadShapeFile=function(){var a=fileToUpload;var b=document.querySelector("#shape-file-info").innerText;if(!b||b=="No file choosen"){AlertManager.info("No file selected","Only files with extension .shp are supported.");return}if(b&&b.toLowerCase().indexOf(".shp",b.length-4)==-1){AlertManager.info("Unsupported file","Only files with extension .shp are supported.")}else{if(a.size>w){AlertManager.info("File too large",x)}else{SpinnerManager.on();k.loadShapeFile(a)}}};d.toggleExpandAdvancedSearch=function(a){if(a)this.expandedAdvancedSearch=true;else this.expandedAdvancedSearch=!this.expandedAdvancedSearch;if(this.expandedAdvancedSearch){$(m).css("width","calc(100% - 40px)");d.toggleButtonClass="glyphicon glyphicon-resize-small";d.toggleExpandTitle="Compact Advanced Search"}else{y();d.toggleButtonClass="glyphicon glyphicon-resize-full";d.toggleExpandTitle="Expand Advanced Search"}};d.closeAdvancedSearch=function(){if(e.model.hidden){e.show()}else{e.hide()}}}}}}}]);angular.module("DHuS-webclient").directive("advancedFilter",["$window","$document","ConfigurationService","AdvancedFilterService","SearchService","SearchBoxService",function(a,b,c,d,e,f){return{restrict:"AE",replace:true,templateUrl:"components/advanced-filter/view.html",scope:{text:"="},compile:function(a,b){var g=this;return{pre:function(a,b,c){},post:function(a,b,g){a.missions=ApplicationService.missions;a.disableFilter="";a.isDisabled=false;g.$observe("disableFilter",function(b){a.disableFilter=b;a.isDisabled=a.disableFilter?true:false});if(!c.isLoaded()){c.getConfiguration().then(function(b){if(b){ApplicationService=b;a.missions=ApplicationService.missions}else{}},function(a){})}d.setClearAdvancedFilter(function(){a.clearFilter()});a.setFilter=function(){d.setAdvancedFilter(a.missions);f.model.missionFilter=d.getAdvancedFilter();e.setMissionFilter(f.model.missionFilter)};a.updateFilter=function(b){var c=false;for(var d=0;d<a.missions[b].filters.length;d++){if(a.missions[b].filters[d].indexvalue&&a.missions[b].filters[d].indexvalue.trim()!=""){c=true;break}}a.missions[b].selected=c;a.setFilter()};a.clearInput=function(b,c){if(a.missions[b]&&a.missions[b].filters[c]){a.missions[b].filters[c].indexvalue=""}};a.updateMissionSelection=function(b){if(!a.missions[b].selected){for(var c=0;c<a.missions[b].filters.length;c++){a.missions[b].filters[c].indexvalue=""}}a.setFilter()};a.clearFilter=function(){for(var b=0;b<a.missions.length;b++){a.missions[b].selected=false;a.updateMissionSelection(b)}a.setFilter()};a.checkIsDisabled=function(b){if(a.isDisabled){a.clearFilter()}return"disabled"==b}}}}}}]);angular.module("DHuS-webclient").directive("cartMenu",["$document","$window","AdvancedSearchService","CartMenuService","CartModel","ConfigurationService","ProductCartService","OLMap","SearchModel","Session","UIUtils","UserInfoService","UserService","CartStatusService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o="#cart-menu-container";var p="#search-box-container";var q=30;var r=10;var s=20;resizeCartMenu=function(){k.responsiveLayout(function a(){$(o).css("width",parseInt(k.getScreenWidth())-s*2+"px");if(d.model.hidden)$(o).css("left","-"+parseInt($(o).width()+20)+"px")},function a(){
$(o).css("width",parseInt(k.getScreenWidth())-s*2+"px");if(d.model.hidden)$(o).css("left","-"+parseInt($(o).width()+20)+"px")},function a(){if(!ApplicationService.settings.show_extended_list)$(o).css("width","calc(50% - 40px)");else $(o).css("width",parseInt(k.getScreenWidth())-s*2+"px");if(d.model.hidden)$(o).css("left","-"+parseInt($(o).width()+20)+"px")},function a(){if(!ApplicationService.settings.show_extended_list)$(o).css("width","calc(40% - 40px)");else $(o).css("width",parseInt(k.getScreenWidth())-s*2+"px");if(d.model.hidden)$(o).css("left","-"+parseInt($(o).width()+20)+"px")});if($(p)&&$(p).position()){var a=parseInt($(p).height())+r+parseInt($(p).position().top);$(o).css("top",a);$(o).css("height",parseInt(k.getScreenHeight())-a-q-r+"px")}};return{restrict:"AE",replace:true,templateUrl:"components/cart-menu/view.html",scope:{text:"="},expandedCartMenu:false,createdCartModel:function(){},compile:function(k,p){var q=this;return{pre:function(a,b,c){e.sub(q);a.productCount=0;a.hasProducts=true;a.currentPage=1},post:function(k,p,r){k.downloadCartTitle="Download Cart";k.clearCartTitle="Clear Cart";k.productsPerPageTitle="Products per Page";k.goToFirstPageTitle="Go To First Page";k.goToPreviousPageTitle="Go To Previous Page";k.goToNextPageTitle="Go To Next Page";k.goToLastPageTitle="Go To Last Page";k.currentPageTitle="Enter page number";k.toggleButtonClass="glyphicon glyphicon-resize-full";k.toggleClosePanelTitle="Close Cart-List";k.toggleExpandTitle="Expand Cart-List";q.productsPerPagePristine=true;q.currentPagePristine=true;k.currentPage=1;k.currentPageCache=1;k.MSG_CART_EMPTY="Your cart is empty";angular.element(a).ready(function(){if(!f.isLoaded()){f.getConfiguration().then(function(a){if(a){ApplicationService=a}},function(a){})}else{k.showtoggle=false}resizeCartMenu()});angular.element(b).bind("resize",function(){resizeCartMenu()});k.initCart=function(){k.toggleShowCartFootprints=false;g.getCart();k.refreshCounters()};k.getCartFootprints=function(){if(!(Object.keys(h.map).length===0&&h.map.constructor===Object)){h.setModel(e.model.list)}};k.closeCartMenuPanel=function(){d.hide()};var s=function(a,b){if(n.getCartActive()===false)return;if(a<=k.pageCount&&a>0||b){k.currentPage=a;g.gotoPage(a).then(function(){k.refreshCounters();if(n.getCartFootprints()===true){if(!(Object.keys(h.map).length===0&&h.map.constructor===Object)){h.setModel(e.model.list)}}})}};k.refreshCounters=function(){k.productCount=e.model.count;k.hasProducts=e.model.hasProducts;k.pageCount=Math.floor(e.model.count/k.productsPerPage)+(e.model.count%k.productsPerPage?1:0)};q.createdCartModel=function(){k.model=e.model.list;k.refreshCounters();k.visualizedProductsFrom=e.model.count?g.offset+1:0;k.visualizedProductsTo=(e.model.count?k.currentPage*k.productsPerPage:0)>k.productCount?k.productCount:e.model.count?k.currentPage*k.productsPerPage:0;k.getCartFootprints()};q.updatedCartModel=function(){};k.productsPerPage="25";k.$watch("productsPerPage",function(a){if(q.productsPerPagePristine){q.productsPerPagePristine=false;return}g.setLimit(a);s(1,true)});var t=function(){var a=parseInt(k.currentPage);if(isNaN(a)){k.$apply(function(){k.currentPage=k.currentPageCache});return}if(a<=0){k.$apply(function(){k.currentPage=k.currentPageCache});return}if(a>k.pageCount){k.$apply(function(){k.currentPage=k.currentPageCache});return}s(k.currentPage)};$("#cart-page-selector").bind("enterKey",function(a){t()});$("#cart-page-selector").focusout(function(a){t()});$("#cart-page-selector").keyup(function(a){if(a.keyCode==13)$(this).trigger("enterKey")});k.currentPage=1;k.gotoFirstPage=function(){s(1)};k.gotoPreviousPage=function(){s(k.currentPage-1)};k.gotoNextPage=function(){s(k.currentPage+1)};k.gotoLastPage=function(){s(k.pageCount)};k.selectPageDidClicked=function(a){};d.setShow(function(){n.setCartActive(true);n.setCartFootprints(true);c.hide();k.initCart();d.model.hidden=false;if(!(Object.keys(h.map).length===0&&h.map.constructor===Object)){h.setDrawOnMap(false)}$(o).animate({left:"20px"},300);document.getElementById("menu-cart-icon").classList.add("cart-button-active");document.getElementById("search-button").classList.add("grayfy")});d.setHide(function(){n.setCartActive(false);n.setCartFootprints(false);d.model.hidden=true;$(o).animate({left:"-"+parseInt($(o).width()+20)+"px"},300);k.gotoFirstPage();if(!(Object.keys(h.map).length===0&&h.map.constructor===Object)){h.setDrawOnMap(true);h.setModel(i.model.list)}var a=document.getElementById("menu-cart-icon");if(a!==null){a.classList.remove("cart-button-active");document.getElementById("search-button").classList.remove("grayfy")}});k.toggleExpandCartMenu=function(a){a?this.expandedCartMenu=true:this.expandedCartMenu=!this.expandedCartMenu;if(this.expandedCartMenu){$(o).css("width","calc(100% - 40px)");k.toggleButtonClass="glyphicon glyphicon-resize-small";k.toggleExpandTitle="Compact Cart-menu"}else{resizeCartMenu();k.toggleButtonClass="glyphicon-resize-full glyphicon ";k.toggleExpandTitle="Expand Cart-menu"}};k.downloadCart=function(){if(k.hasProducts===false)return;var a="odata/v1/Users(':userid')/Cart?$format=application/metalink4%2Bxml&$top="+k.productCount;var b;var c=m.getUserModel();if(!c){var d=j.getSessionUsername();m.getODataUser(d).then(function(d){m.setUserModel(d);m.setUserRolesModel(d);j.setUserLoggedIn();l.userInfo.isLogged=true;c=m.getUserModel();b=ApplicationConfig.baseUrl+a.replace(":userid",c.username?c.username:"");window.location=b})}else{b=ApplicationConfig.baseUrl+a.replace(":userid",c.username?c.username:"");window.location=b}};k.clearCart=function(){if(k.hasProducts===false)return;if(!confirm("Want to Clear Cart?"))return;g.clearCart().then(function(a){if(a.status==200){g.getIdsInCart().then(function(a){i.model.cartids=a.data;if(!i.model.list)return;i.model.list.forEach(function(a){if(i.model.cartids.includes(a.id)){a.isincart=true}else{a.isincart=false}})});setTimeout(function(){k.closeCartMenuPanel()},1e3);ToastManager.success("user cart cleared")}else{ToastManager.error("error cleaning user cart")}})}}}}}}]);(function(){"use strict"})();angular.module("DHuS-webclient").directive("cartItem",["$document","$window","AdvancedSearchService","CartMenuService","CartModel","UIUtils","ConfigurationService","ProductCartService","OLMap","SearchModel","SearchService","Session","UIUtils","UserInfoService","UserService","CartStatusService",function(a,b,c,d,e,f,g,h,i,j,k,l,f,m,n,o){var p="#dbdbdb";var q="#F5F5F5";var r="transparent";var s="cartItem";var t="#cart-menu-content";const u="Product removed from cart";const v="Can't zoom to Cart Product right now";const w="List selection disabled, please load Cart Footprints to select Cart items";const x="Removed product failed";const y="Want to delete?";var z="";var A={restrict:"AE",replace:true,templateUrl:"components/cart/cart-item/view.html",scope:{product:"=",uuid:"="},compile:function(a,c){var d=this;return{post:function(a,c,k){z=ApplicationConfig.baseUrl;a.showquicklook=ApplicationService.settings.showquicklook;a.hide_popover_list=ApplicationService.settings.hide_popover_list;a.satellite=a.product.identifier.substring(0,2);a.enableLta=ApplicationService.settings.enable_lta;a.mission=a.product.identifier.substring(0,3);a.attributeTitles=["Select Cart product","Zoom to product","Remove Product from Download Cart","View Product Details","Download Product"];a.hideorder=ApplicationService.settings.hideorder;a.order_properties=ApplicationService.settings.order_properties?ApplicationService.settings.order_properties:g.default_order_properties;a.order_style=ApplicationService.settings.order_style?ApplicationService.settings.order_style:g.default_order_style;a.transformation_style=ApplicationService.settings.transformation_style?ApplicationService.settings.transformation_style:g.default_transformation_style;var l=function(){};angular.element(b).bind("resize",l);d.cartModelSubscription(a.product,c,a);var m=_.findWhere(a.product.indexes,{name:"summary"});if(m){var n=_.findWhere(m.children,{name:"Satellite"});var p=_.findWhere(m.children,{name:"Date"});var q=_.findWhere(m.children,{name:"Size"});a.satellitename=n?n.value:"";a.date=p?p.value:"";if(a.product.transformation==null)a.size=q?q.value:"";else if(a.product.transformation.status=="COMPLETED")a.size=q?q.value:"";a.summary="";a.summary+=a.satellitename?"Mission: "+a.satellitename+"; ":"";a.summary+=a.product.instrument?"Instrument: "+a.product.instrument+"; ":"";a.summary+=a.date?"Sensing Date: "+a.date+"; ":"";a.summary+=a.size?"Size: "+a.size:""}a.enableLta?a.product.offline=a.product.offline:a.product.offline=false;a.link=z+"odata/v1/Products('"+a.product.uuid+"')/$value";a.quicklooksrc=a.product.quicklook?z+"odata/v1/Products('"+a.product.uuid+"')/Products('"+"Thumbnail"+"')/$value":null;a.bigQuicklooksrc=a.product.quicklook?z+"odata/v1/Products('"+a.product.uuid+"')/Products('"+"Quicklook"+"')/$value":null;const r={uuid:a.product.uuid,sender:s};if(a.product.offline&&!a.hideorder&&a.product.order){a.product.isOrderOn=true}else{a.product.isOrderOn=false}$("[data-toggle='pop']").on("show.bs.popover",function(){$(".popover").removeClass("in")});$("[data-toggle='pop-order']").on("show.bs.popover",function(){$(".popover").removeClass("in")});$("[data-toggle='pop-transformation']").on("show.bs.popover",function(){$(".popover").removeClass("in")});$("[data-toggle=pop]").popover({html:true,content:function(){if(a.hide_popover_list==true)return undefined;var b='<img class="popover-image" src='+a.bigQuicklooksrc+">";return a.bigQuicklooksrc!==undefined?b:undefined}}).on("show.bs.popover",function(){$(".popover").removeClass("in")});$("[data-toggle='pop-order']").popover({placement:function(a,b){$(a).addClass("popp2");var c=f.getElement2ScreenRatio("#cart-menu-container")<.7?"right":"bottom";return c},container:"body",trigger:"hover",html:true,delay:{show:600,hide:500},content:function(){var b=a.product.order.status;var c=a.order_style[b];var d="def";var e="";if(a.order_properties["status"])e+='<div><span class="pop2-inner-title">Status: </span><span class="pop-inner-status '+c+'">'+b+"</span></div>";if(a.order_properties["statusMessage"])e+='<div><span class="pop2-inner-title">Status Message: </span><span class="pop-inner-2">'+a.product.order.statusMessage+"</span></div>";if(a.order_properties["id"])e+='<div ><span class="pop2-inner-title">Order Id: </span><span class="pop-inner-2">'+a.product.order.id+"</span></div>";if(a.order_properties["submissionTime"])e+='<div ><span  class="pop2-inner-title">Submission Time: </span><span class="pop-inner-2">'+moment.utc(a.product.order.submissionTime).format("YYYY-MM-DDTHH:mm:ss.SSS")+"</span></div>";if(a.order_properties["estimatedTime"])e+='<div ><span  class="pop2-inner-title">Estimated Time: </span><span class="pop-inner-2">'+moment.utc(a.product.order.estimatedTime).format("YYYY-MM-DDTHH:mm:ss.SSS")+"</span></div>";return e}}).on("show.bs.popover",function(){$(".popover").removeClass("in")});$("[data-toggle='pop-transformation']").popover({placement:function(a,b){$(a).addClass("popp2");var c=f.getElement2ScreenRatio("#cart-menu-container")<.7?"right":"bottom";return c},container:"body",trigger:"hover",html:true,delay:{show:600,hide:500},content:function(){var b=a.product.transformation.status;var c=a.transformation_style[b];var d="def";var e="";e+='<div><span class="pop2-inner-title">Status: </span><span class="pop-inner-status '+c+'">'+b+"</span></div>";e+='<div ><span class="pop2-inner-title">Transformation Id: </span><span class="pop-inner-2">'+a.product.transformation.id+"</span></div>";e+='<div ><span  class="pop2-inner-title">Submission Time: </span><span class="pop-inner-2">'+moment.utc(a.product.transformation.submissionTime).format("YYYY-MM-DDTHH:mm:ss.SSS")+"</span></div>";return e}}).on("show.bs.popover",function(){$(".popover").removeClass("in")});a.hoverIn=function(){a.visibleItemButton=true;if(!a.product.selected){e.callEventHighlightProduct(r)}};a.hoverOut=function(){a.visibleItemButton=false;a.product.selected?e.callEventSelectProduct(r):e.callEventResetUi(r)};a.selectProduct=function(){if(o.getCartFootprints()===false){ToastManager.error(w)}if(!a.product.selected){e.callEventSelectProduct(r)}else{e.callEventDeselectCurrentProduct(r);e.callEventHighlightProduct(r)}};a.zoomCart=function(){o.getCartFootprints()?$(document).trigger("zoom-to",this.product):ToastManager.error(v)};a.showProductDetails=function(){ProductDetailsManager.getProductDetails(a.product.uuid,e.model.list,true)};a.removeProductFromCart=function(){if(!confirm(y))return;if(a.product.transformation){h.removeTransformationFromCart(a.product.transformation.id).success(function(){h.getCart().then(function(){h.getIdsInCart().then(function(a){j.model.cartids=a.data;if(!j.model.list)return;j.model.list.forEach(function(a){if(j.model.cartids.includes(a.id)){a.isincart=true}else{a.isincart=false}})})});ToastManager.success(u)}).error(function(){ToastManager.error(x)})}else{h.removeProductFromCart(a.product.id).success(function(){h.getCart().then(function(){h.getIdsInCart().then(function(a){j.model.cartids=a.data;if(!j.model.list)return;j.model.list.forEach(function(a){if(j.model.cartids.includes(a.id)){a.isincart=true}else{a.isincart=false}})})});ToastManager.success(u)}).error(function(){ToastManager.error(x)})}if(!(Object.keys(i.map).length===0&&i.map.constructor===Object)){i.setModel(e.model.list)}setTimeout(function(){a.$apply()},0)};a.downloadProduct=function(){if(!a.product.offline){window.location=a.link}else{var b=ApplicationConfig.baseUrl+"odata/v2/Products('"+a.uuid+"')/OData.DHuS.Order";var c="The retrieval of offline data is temporary unavailable, please try again later.";ProductService.getLTAProduct(b).then(function(b){if(b.status>=200&&b.status<=202){a.product.order=ProductService.getOrder(b.data);a.product.isOrderOn=true;if(a.product.isincart){AlertManager.success("Offline product retrieval initiated","Offline product retrieval has been initiated. Please check again your Cart to know when it will be online.")}else{h.addProductToCart(a.product.id).success(function(){AlertManager.success("Offline product retrieval initiated","Offline product retrieval has been initiated and the product has been moved to Cart. Please check your Cart to know when it will be online.");a.product.isincart=true}).error(function(){AlertManager.warning("Offline product retrieval initiated","Offline product retrieval has been initiated, but there was an error while adding product to cart. Please check again product list to know when it will be online.")})}}else{b.data&&b.data.error&&b.data.error.message&&b.data.error.message.value?c=b.data.error.message.value:c=c;AlertManager.error("Product unavailable",c)}},function(a){a.data&&a.data.error&&a.data.error.message&&a.data.error.message.value?c=a.data.error.message.value:c=c;AlertManager.error("Product unavailable",c)}).catch(function(a){a.data&&a.data.error&&a.data.error.message&&a.data.error.message.value?c=a.data.error.message.value:c=c;AlertManager.error("Product unavailable",c)})}}}}},cartModelSubscription:function(a,b,c){e.sub({scope:c,id:s,product:a,element:b,OnHighlight:function(c){b.css(c.uuid==a.uuid?{"background-color":q}:{})},OnSelectProduct:function(d){b.css({"background-color":d.uuid==a.uuid?p:r});setTimeout(function(){c.$apply()},0);$(t).animate(d.uuid==a.uuid&&d.sender=="OLMap"?{scrollTop:angular.element(b).position().top+$(t).scrollTop()-57}:{})},OnResetUi:function(){b.css({"background-color":e.getProductByUUID(a.uuid).selected?p:r})}})}};return A}]);"use strict";angular.module("DHuS-webclient").directive("cartContainer",["UIUtils","$document","$window","CartModel","ProductCartService","UserService","Session","UserInfoService",function(a,b,c,d,e,f,g,h){var i="#page-label-id",j="#page-count-id",k="#page-num-id",l=".fab-cart",m=".cart-button";var n=function(){a.responsiveLayout(function a(){$(i).css("display","none");$(k).css("display","none");$(j).css("display","none");$(m).css("display","none");$(l).css("display","inline")},function a(){$(i).css("display","none");$(k).css("display","none");$(j).css("display","none");$(m).css("display","inline");$(l).css("display","none")},function a(){$(i).css("display","inline-block");$(k).css("display","inline-block");$(j).css("display","inline-block");$(m).css("display","inline");$(l).css("display","none")},function a(){$(i).css("display","inline-block");$(k).css("display","inline-block");$(j).css("display","inline-block");$(m).css("display","inline");$(l).css("display","none")})};return{restrict:"AE",replace:true,templateUrl:"components/cart/view.html",scope:{text:"="},createdCartModel:function(){},compile:function(a,i){var j=this;return{pre:function(a,c,e){d.sub(j);a.productCount=0;a.hasProducts=true;a.currentPage=1;setTimeout(function(){angular.element(b).ready(n)},0)},post:function(a,i,k){j.productsPerPagePristine=true;j.currentPagePristine=true;a.currentPage=1;a.currentPageCache=1;angular.element(b).ready(n);angular.element(c).bind("resize",n);function l(){a.initCart()}var m=function(b,c){if(b<=a.pageCount&&b>0||c){a.currentPage=b;e.gotoPage(b).then(function(){a.refreshCounters()})}};a.initCart=function(){e.getCart();a.refreshCounters()};a.refreshCounters=function(){a.productCount=d.model.count;a.hasProducts=d.model.hasProducts;a.pageCount=Math.floor(d.model.count/a.productsPerPage)+(d.model.count%a.productsPerPage?1:0)};j.createdCartModel=function(){a.model=d.model.list;a.productCount=d.model.count;a.hasProducts=d.model.hasProducts;a.refreshCounters();a.visualizedProductsFrom=d.model.count?e.offset+1:0;a.visualizedProductsTo=(d.model.count?a.currentPage*a.productsPerPage:0)>a.productCount?a.productCount:d.model.count?a.currentPage*a.productsPerPage:0};j.updatedCartModel=function(){};a.productsPerPage="25";a.$watch("productsPerPage",function(a){if(j.productsPerPagePristine){j.productsPerPagePristine=false;return}e.setLimit(a);m(1,true)});var o=function(){var b=parseInt(a.currentPage);if(isNaN(b)){a.$apply(function(){a.currentPage=a.currentPageCache});return}if(b<=0){a.$apply(function(){a.currentPage=a.currentPageCache});return}if(b>a.pageCount){a.$apply(function(){a.currentPage=a.currentPageCache});return}m(a.currentPage)};$("#cart-page-selector").bind("enterKey",function(a){o()});$("#cart-page-selector").focusout(function(a){o()});$("#cart-page-selector").keyup(function(a){if(a.keyCode==13){$(this).trigger("enterKey")}});a.currentPage=1;a.gotoFirstPage=function(){m(1)};a.gotoPreviousPage=function(){m(a.currentPage-1)};a.gotoNextPage=function(){m(a.currentPage+1)};a.gotoLastPage=function(){m(a.pageCount)};a.selectPageDidClicked=function(a){};a.downloadCart=function(){if(a.productCount==0)return;var b=this;var c="odata/v1/Users(':userid')/Cart?$format=application/metalink4%2Bxml&$top="+a.productCount;var d;var e=f.getUserModel();if(!e){var i=g.getSessionUsername();f.getODataUser(i).then(function(a){f.setUserModel(a);f.setUserRolesModel(a);g.setUserLoggedIn();h.userInfo.isLogged=true;e=f.getUserModel();d=ApplicationConfig.baseUrl+c.replace(":userid",e.username?e.username:"");window.location=d})}else{d=ApplicationConfig.baseUrl+c.replace(":userid",e.username?e.username:"");window.location=d}};a.clearCart=function(){if(a.productCount==0)return;e.clearCart().then(function(b){if(b.status==200){a.initCart();ToastManager.success("user cart cleared")}else{ToastManager.error("error cleaning user cart")}})};l()}}}}}]);(function(){"use strict"})();angular.module("DHuS-webclient").directive("productCart",["CartModel",function(a){return{restrict:"AE",replace:true,templateUrl:"components/cart/product-cart/view.html",scope:{text:"="},compile:function(b,c){var d=this;return{pre:function(b,c,e){b.model=a.model.list;a.sub(d)},post:function(b,c,e){d.createdCartModel=function(){b.model=[];b.model=a.model.list}}}}}}]);"use strict";angular.module("DHuS-webclient").factory("GraticuleService",function(){return{graticuleStatus:true,getGraticuleStatus:function(){return this.graticuleStatus},setGraticuleStatus:function(a){this.graticuleStatus=a}}});angular.module("DHuS-webclient").directive("mapGraticule",["GraticuleService","OLMap",function(a,b){return{restrict:"AE",replace:true,templateUrl:"components/map-graticule/view.html",scope:{text:"="},compile:function(c,d){return{post:function(c,d,e){c.hide_graticule=ApplicationService.settings.hide_graticule;c.st=a.getGraticuleStatus();c.graticuleOn=function(){switchStatus();b.setGraticule(coordinateStatus)};c.graticuleOff=function(){switchStatus();b.unsetGraticule()};switchStatus=function(){c.st=!c.st;a.setGraticuleStatus(!a.getGraticuleStatus())}}}}}}]);"use strict";angular.module("DHuS-webclient").directive("odataSynchronizerContainer",["ODataSynchronizerService",function(a){return{restrict:"AE",replace:true,templateUrl:"components/odata-synchronizer/view.html",scope:{},compile:function(a,b){var c=this;return{pre:function(a,b,c){},post:function(a,b,c){}}}}}]);"use strict";angular.module("DHuS-webclient").directive("odataSynchronizerItem",["$window","ODataSynchronizerService","OdataSynchDetailsManager","OdataModel",function(a,b,c,d){var e="#ecf0f1";var f="#F5F5F5";var g="transparent";var h="";var i={restrict:"AE",replace:true,templateUrl:"components/odata-synchronizer/odata-synchronizer-item/view.html",scope:{synchronizer:"="},compile:function(a,e){var f=this;return{pre:function(a,b,c){},post:function(a,e,f){a.startOdataSynchronizer=function(){var c={label:a.synchronizer.label,serviceUrl:a.synchronizer.serviceUrl,serviceLoginUsername:a.synchronizer.serviceLoginUsername,serviceLoginPassword:null,schedule:a.synchronizer.schedule,remoteIncoming:a.synchronizer.remoteIncoming,request:"start",filterParam:a.synchronizer.filterParam,geoFilter:a.synchronizer.geoFilter,sourceCollection:a.synchronizer.sourceCollection};b.updateSynchronizer(a.synchronizer.id,c).then(function(a){var c=parseInt(a.status);if(c>=200&&c<300){b.synchronizers().then(function(a){var b=a.data.d.results;d.createModel(b,b.length);ToastManager.success("odata synchronizer started")})}else{ToastManager.error("error in start odata synchronizer")}},function(a){ToastManager.error("error in start odata synchronizer")})};a.stopOdataSynchronizer=function(){var c={label:a.synchronizer.label,serviceUrl:a.synchronizer.serviceUrl,serviceLoginUsername:a.synchronizer.serviceLoginUsername,serviceLoginPassword:null,schedule:a.synchronizer.schedule,remoteIncoming:a.synchronizer.remoteIncoming,request:"stop",filterParam:a.synchronizer.filterParam,geoFilter:a.synchronizer.geoFilter,sourceCollection:a.synchronizer.sourceCollection};b.updateSynchronizer(a.synchronizer.id,c).then(function(a){var c=parseInt(a.status);if(c>=200&&c<300){b.synchronizers().then(function(a){var b=a.data.d.results;d.createModel(b,b.length);ToastManager.success("odata synchronizer stopped")})}else{ToastManager.error("error in stop odata synchronizer")}},function(a){ToastManager.error("error in stop odata synchronizer")})};a.deleteOdataSynchronizer=function(){b.deleteSynchronizer(a.synchronizer.id).then(function(a){var c=parseInt(a.status);if(c>=200&&c<300){b.synchronizers().then(function(a){var b=a.data.d.results;d.createModel(b,b.length);ToastManager.success("odata synchronizer deleted")})}else{ToastManager.error("error in delete odata synchronizer")}},function(a){ToastManager.error("error in delete odata synchronizer")})};a.editSynchronizer=function(){c.getOdataSynchDetails(a.synchronizer.id,false)};a.hoverIn=function(){a.visibleItemButton=true};a.hoverOut=function(){a.visibleItemButton=false}}}}};return i}]);"use strict";angular.module("DHuS-webclient").directive("odataSynchronizerList",["ODataSynchronizerService","OdataSynchDetailsManager","OdataModel",function(a,b,c){return{restrict:"AE",replace:true,templateUrl:"components/odata-synchronizer/odata-synchronizer-list/view.html",compile:function(d,e){var f=this;return{pre:function(a,b,c){a.synchronizerCount=0;a.currentPage=1},post:function(d,e,f){d.init=function(){a.synchronizers().then(function(a){var b=a.data.d.results;c.createModel(b,b.length);d.list=c.model.list;d.synchronizerCount=c.synchronizerCount})};d.$watch(function(){return c.model.list},function(a){d.list=a});d.$watch(function(){return c.synchronizerCount},function(a){d.synchronizerCount=a});d.synchronizersPerPage=25;d.currentPage=1;d.pageCount=Math.floor(d.synchronizerCount/d.synchronizersPerPage)+(d.synchronizerCount%d.synchronizersPerPage?1:0);d.gotoFirstPage=function(){goToPage(1)};d.gotoPreviousPage=function(){goToPage(d.currentPage-1)};d.gotoNextPage=function(){goToPage(d.currentPage+1)};d.gotoLastPage=function(){goToPage(d.pageCount)};d.selectPageDidClicked=function(a){};d.createOdataSynchronizer=function(){b.getOdataSynchDetails(-1,true)};d.init()}}}}}]);"use strict";angular.module("DHuS-webclient").directive("evictionContainer",["ODataEvictionService",function(a){return{restrict:"AE",replace:true,templateUrl:"components/eviction-container/view.html",scope:{},compile:function(a,b){var c=this;return{pre:function(a,b,c){},post:function(a,b,c){}}}}}]);"use strict";angular.module("DHuS-webclient").directive("evictionItem",["$window","ODataEvictionService","EvictionModel",function(a,b,c){var d="#eCF0F1";var e="#F5F5F5";var f="transparent";var g="";var h={restrict:"AE",replace:true,templateUrl:"components/eviction-container/eviction-item/view.html",scope:{eviction:"="},compile:function(a,d){var e=this;return{pre:function(a,b,c){},post:function(a,d,e){a.startEviction=function(){var d={Status:"STARTED"};var e="error starting eviction";b.startEviction(a.eviction.Name,d).then(function(a){var d=parseInt(a.status);if(d>=200&&d<300){b.getEvictionList().then(function(a){var b=a.data.value;c.createModel(b,b.length);ToastManager.success("eviction started")})}else{a.data&&a.data.error&&a.data.error.message?e=e+". Reason: "+a.data.error.message:e;ToastManager.error(e)}},function(a){a.data&&a.data.error&&a.data.error.message?e=e+". Reason: "+a.data.error.message:e;ToastManager.error(e)})};a.stopEviction=function(){var d={Status:"STOPPED"};var e="error stopping eviction";b.stopEviction(a.eviction.Name,d).then(function(a){var d=parseInt(a.status);if(d>=200&&d<300){b.getEvictionList().then(function(a){var b=a.data.value;c.createModel(b,b.length);ToastManager.success("eviction stopped")})}else{a.data&&a.data.error&&a.data.error.message?e=e+". Reason: "+a.data.error.message:e;ToastManager.error(e)}},function(a){a.data&&a.data.error&&a.data.error.message?e=e+". Reason: "+a.data.error.message:e;ToastManager.error(e)})};a.deleteEviction=function(){b.deleteEviction(a.eviction.Name).then(function(a){var d=parseInt(a.status);if(d>=200&&d<300){b.getEvictionList().then(function(a){var b=a.data.value;c.createModel(b,b.length);ToastManager.success("eviction deleted")})}else{ToastManager.error("error deleting eviction")}},function(a){ToastManager.error("error deleting eviction")})};a.editEviction=function(){console.log("124 edit eviction...");EvictionDetailsManager.getEvictionDetails(a.eviction.Name,false)};a.hoverIn=function(){a.visibleItemButton=true};a.hoverOut=function(){a.visibleItemButton=false}}}}};return h}]);"use strict";angular.module("DHuS-webclient").directive("evictionList",["ODataEvictionService","EvictionModel",function(a,b){return{restrict:"AE",replace:true,templateUrl:"components/eviction-container/eviction-list/view.html",compile:function(c,d){var e=this;return{pre:function(a,b,c){a.evictionsCount=0;a.currentPage=1},post:function(c,d,e){c.init=function(){a.getEvictionList().then(function(a){var d=a.data.value;b.createModel(d,d.length);c.evictionList=b.model.list;c.evictionsCount=b.evictionsCount})};c.$watch(function(){return b.model.list},function(a){c.evictionList=a});c.$watch(function(){return b.evictionsCount},function(a){c.evictionsCount=a});c.evictionsPerPage=25;c.currentPage=1;c.pageCount=Math.floor(c.evictionsCount/c.evictionsPerPage)+(c.evictionsCount%c.evictionsPerPage?1:0);c.gotoFirstPage=function(){goToPage(1)};c.gotoPreviousPage=function(){goToPage(c.currentPage-1)};c.gotoNextPage=function(){goToPage(c.currentPage+1)};c.gotoLastPage=function(){goToPage(c.pageCount)};c.selectPageDidClicked=function(a){};c.createEviction=function(){console.log("creating eviction list...");EvictionDetailsManager.getEvictionDetails(null,true)};c.init()}}}}}]);angular.module("DHuS-webclient").directive("evictionDetails",["$location","$document","$window","ODataEvictionService","EvictionModel",function(a,b,c,d,e){return{restrict:"AE",replace:true,templateUrl:"components/eviction-details/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){a.eviction={};a.checkFields=true;a.isNew=false;a.periods=["DAYS"];EvictionDetailsManager.setEvictionDetails(function(b,c){a.getEvictionDetails(b,c)});function f(b,c){if(ApplicationService.settings&&ApplicationService.settings.keep_period_unit){a.periods=ApplicationService.settings.keep_period_unit}if(c){a.eviction={};a.eviction.Cron={};a.resetFields()}else{g(b)}}function g(b){d.readEviction(b).then(function(b){if(b.status==200){if(b.data){a.eviction.Name=b.data.Name;a.eviction.MaxEvictedProducts=b.data.MaxEvictedProducts;a.eviction.KeepPeriod=b.data.KeepPeriod;a.eviction.KeepPeriodUnit=b.data.KeepPeriodUnit;a.eviction.Filter=b.data.Filter;a.eviction.OrderBy=b.data.OrderBy;a.eviction.TargetCollection=b.data.TargetCollection;a.eviction.SoftEviction=b.data.SoftEviction;a.eviction.Status=b.data.Status;a.eviction.Cron={};a.eviction.Cron.Schedule=b.data.Cron.Schedule;a.eviction.Cron.Active=b.data.Cron.Active;a.evictionOld=angular.copy(a.eviction)}}else{ToastManager.error("error reading eviction details")}},function(a){ToastManager.error("error reading eviction details")})}a.getEvictionDetails=function(b,c){console.log("getting eviction details...");a.isNew=c;f(b,c);if(!$("#evtDetails").hasClass("in"))$("#evtDetails").modal("show")};$("#evtDetails").on("shown.bs.modal",function(b){$("#evtcheckName").css("display","none");$("#evtcheckKeepPeriod").css("display","none");$("#evtcheckMaxEvictedProducts").css("display","none");d.collections().then(function(b){var c=[];for(var d=0;d<b.data.d.results.length;d++){c.push(b.data.d.results[d].Name)}a.collectionsName=c})});a.checkName=function(){var b=true;if(!a.eviction.Name||a.eviction.Name.trim()==""){$("#evtcheckName").css("display","inline-block");b=false}else{$("#evtcheckName").css("display","none")}a.checkFields=a.checkFields&&b};a.checkKeepPeriod=function(){var b=true;if(!a.eviction.KeepPeriod||a.eviction.KeepPeriod==0){$("#evtcheckKeepPeriod").css("display","inline-block");b=false}else{$("#evtcheckKeepPeriod").css("display","none")}a.checkFields=a.checkFields&&b};a.checkMaxEvictedProducts=function(){var b=true;if(!a.eviction.MaxEvictedProducts||a.eviction.MaxEvictedProducts==0){$("#evtcheckMaxEvictedProducts").css("display","inline-block");b=false}else{$("#evtcheckMaxEvictedProducts").css("display","none")}a.checkFields=a.checkFields&&b};a.checkSchedule=function(){var b=true;if(a.eviction.Cron&&a.eviction.Cron.Active&&(!a.eviction.Cron.Schedule||a.eviction.Cron.Schedule.trim()=="")){$("#evtcheckCron").css("display","inline-block");b=false}else{$("#evtcheckCron").css("display","none")}a.checkFields=a.checkFields&&b};a.checkFilter=function(){if(!a.eviction.Filter||a.eviction.Filter.trim()==""){a.eviction.Filter=null}};a.checkOrderBy=function(){if(!a.eviction.OrderBy||a.eviction.OrderBy.trim()==""){a.eviction.OrderBy=null}};a.checkTargetCollection=function(){if(!a.eviction.TargetCollection||a.eviction.TargetCollection.trim()==""){a.eviction.TargetCollection=null}};a.checkEvictionFields=function(){a.checkFields=true;a.checkName();a.checkKeepPeriod();a.checkMaxEvictedProducts();a.checkSchedule();a.checkFilter();a.checkOrderBy();a.checkTargetCollection()};a.save=function(){a.checkEvictionFields();if(a.checkFields){if(a.isNew){a.createEviction()}else{a.updateEviction()}}};a.createEviction=function(){var b="eviction creation failed";d.createEviction(a.eviction).then(function(c){
if(c.status==200||c.status==201||c.status==202||c.status==203||c.status==204){d.getEvictionList().then(function(b){var c=b.data.value;e.createModel(c,c.length);ToastManager.success("eviction created");a.close()})}else{c.data&&c.data.error&&c.data.error.message?b=b+". Reason: "+c.data.error.message:b;ToastManager.error(b)}},function(a){a.data&&a.data.error&&a.data.error.message?b=b+". Reason: "+a.data.error.message:b;ToastManager.error(b)})};a.updateEviction=function(){var b="eviction update failed";d.updateEviction(a.eviction.Name,a.eviction).then(function(c){if(c.status==200||c.status==201||c.status==202||c.status==203||c.status==204){d.getEvictionList().then(function(b){var c=b.data.value;console.log("modelFromServer:",c);e.createModel(c,c.length);ToastManager.success("eviction updated");a.close()})}else{c.data&&c.data.error&&c.data.error.message?b=b+". Reason: "+c.data.error.message:b;ToastManager.error(b)}},function(a){a.data&&a.data.error&&a.data.error.message?b=b+". Reason: "+a.data.error.message:b;ToastManager.error(b)})};a.resetFields=function(){a.eviction.Name="";a.eviction.MaxEvictedProducts="";a.eviction.KeepPeriod="";a.eviction.KeepPeriodUnit="DAYS";a.eviction.Filter=null;a.eviction.OrderBy=null;a.eviction.TargetCollection=null;a.eviction.SoftEviction=false;a.eviction.Cron.Active=false;a.eviction.Cron.Schedule="";a.eviction.Status="STOPPED"};a.close=function(){$("#evtDetails").modal("hide")}}}}}}]);angular.module("DHuS-webclient").directive("gotomapButton",["$location","AdvancedSearchService","CartMenuService","CartStatusService",function(a,b,c,d){return{restrict:"AE",replace:true,templateUrl:"components/gotomap-button/view.html",scope:{text:"="},compile:function(a,e){return{post:function(a,e,f){a.redirectHome=function(){d.setIsUserDialog(false);c.hide();b.hide();window.location.href="#/home"}}}}}}]);"use strict";var ProductDetailsManager={getProductDetails:function(){},setProductDetails:function(a){this.getProductDetails=a}};angular.module("DHuS-webclient").directive("productDetails",["$q","$location","$document","$window","ProductDetailsModelService","SearchModel","ProductOLMap","ProductCartService","ConfigurationService",function(a,b,c,d,e,f,g,h,i){var j=320;return{restrict:"AE",replace:true,templateUrl:"components/product-details/view.html",scope:{text:"="},compile:function(b,c){return{pre:function(a,b,c){},post:function(b,c,k){b.product={};b.nextProdUuid=null;b.prevProdUuid=null;b.currentProdUuid=null;b.currentList=null;b.nextbutton={};b.prevbutton={};b.model={};b.windows={};function l(a,c,d){b.product.name=a;b.product.footprint=c;b.product.id=d}function m(){ProductDetailsManager.setProductDetails(function(a,c,d){b.getProductDetails(a,c,d)});b.nextbutton.disabled=true;b.prevbutton.disabled=true;b.windows.map=true;b.windows.quicklook=true;b.windows.attributes=true;b.windows.inspector=true;b.showquicklook=ApplicationService.settings.showquicklook;b.hideminimap=ApplicationService.settings.hideminimap;b.hideorder=ApplicationService.settings.hideorder;$("#productView").on("shown.bs.modal",function(a){b.showquicklook=ApplicationService.settings.showquicklook;b.hideminimap=ApplicationService.settings.hideminimap;b.order_properties=ApplicationService.settings.order_properties?ApplicationService.settings.order_properties:i.default_order_properties;b.order_style=ApplicationService.settings.order_style?ApplicationService.settings.order_style:i.default_order_style;b.$digest()});$("#productView").on("hide.bs.modal",function(a){if(!b.isCalledFromCart)f.selectProduct({uuid:b.currentProdUuid,sender:"productDetails"})})}b.close=function(){f.OnSelectionChange();$("#productView").modal("hide")};b.downloadProduct=function(){if(!b.product.offline){window.location=b.product.link}else{var a="The retrieval of offline data is temporary unavailable, please try again later.";var c=ApplicationConfig.baseUrl+"odata/v2/Products('"+b.product.id+"')/OData.DHuS.Order";ProductService.getLTAProduct(c).then(function(c){if(c.status>=200&&c.status<=202){b.product.order=ProductService.getOrder(c.data);b.product.isOrderDetails=true;if(b.product.isincart){AlertManager.success("Offline product retrieval initiated","Offline product retrieval has been initiated. Please check again your Cart to know when it will be online.")}else{h.addProductToCart(b.product.cartid).success(function(){AlertManager.success("Offline product retrieval initiated","Offline product retrieval has been initiated and the product has been moved to Cart. Please check your Cart to know when it will be online.");b.product.isincart=true}).error(function(){AlertManager.warning("Offline product retrieval initiated","Offline product retrieval has been initiated, but there was an error while adding product to cart. Please check again product list to know when it will be online.")})}}else{c.data&&c.data.error&&c.data.error.message&&c.data.error.message.value?a=c.data.error.message.value:a=a;AlertManager.error("Product unavailable",a)}},function(b){b.data&&b.data.error&&b.data.error.message&&b.data.error.message.value?a=b.data.error.message.value:a=a;AlertManager.error("Product unavailable",a)}).catch(function(b){b.data&&b.data.error&&b.data.error.message&&b.data.error.message.value?a=b.data.error.message.value:a=a;AlertManager.error("Product unavailable",a)})}};b.downloadTCI=function(){if(!b.product.offline){window.location=b.product.tci_link}else{var a="The retrieval of offline data is temporary unavailable, please try again later.";ProductService.getProduct(b.product.tci_link).then(function(c){if(c.status==202){if(b.product.isincart){AlertManager.success("Offline product retrieval initiated","Offline product retrieval has been initiated. Please check again your Cart to know when it will be online.")}else{h.addProductToCart(b.product.cartid).success(function(){AlertManager.success("Offline product retrieval initiated","Offline product retrieval has been initiated and the product has been moved to Cart. Please check your Cart to know when it will be online.");b.product.isincart=true}).error(function(){AlertManager.warning("Offline product retrieval initiated","Offline product retrieval has been initiated, but there was an error while adding product to cart. Please check again product list to know when it will be online.")})}}else{c.data&&c.data.error&&c.data.error.message&&c.data.error.message.value?a=c.data.error.message.value:a=a;AlertManager.error("Product unavailable",a)}},function(b){b.data&&b.data.error&&b.data.error.message&&b.data.error.message.value?a=b.data.error.message.value:a=a;AlertManager.error("Product unavailable",a)}).catch(function(b){b.data&&b.data.error&&b.data.error.message&&b.data.error.message.value?a=b.data.error.message.value:a=a;AlertManager.error("Product unavailable",a)})}};b.showNextProduct=function(){if(b.nextbutton.disabled)return;if(!b.isCalledFromCart)f.selectProduct({uuid:b.nextProdUuid,sender:"productDetails"});b.getProductDetails(b.nextProdUuid,null)};b.showPrevProduct=function(){if(b.prevbutton.disabled)return;if(!b.isCalledFromCart)f.selectProduct({uuid:b.prevProdUuid,sender:"productDetails"});b.getProductDetails(b.prevProdUuid,null)};b.pad=function(a,b,c){c=c||"0";a=a+"";return a.length>=b?a:new Array(b-a.length+1).join(c)+a};b.getOrbitNumber=function(a){var c;var d=_.findWhere(a.indexes,{name:"product"});if(d){var e=_.findWhere(d.children,{name:"Orbit number (start)"});c=e?"A"+b.pad(e.value,6):"A000000"}return c};b.getTCILink=function(b){var c=null;var d=ApplicationConfig.baseUrl+"odata/v1/Products(%27"+b.uuid+"%27)/";var e="";var f=new RegExp("S2(A|B)_MSIL1C.*","g");var g=new RegExp("S2(A|B)_MSIL2A.*","g");var h=a.defer();var i=b.identifier;if(f.test(i)){ProductService.getNode(d).then(function(a){if(a.status==200&&a.data&&a.data.d.results.length>0){var d=a.data.d.results[0];var f="odata/v1/Products(%27"+b.uuid+"%27)/Nodes(%27"+d.Id+"%27)/Nodes(%27GRANULE%27)/Nodes";var g=f+"?$format=json";ProductService.getGranule(g).then(function(a){if(a.status==200){e=a.data&&a.data.d.results[0]?a.data.d.results[0].Name:"";c=f+"(%27"+e+"%27)/Nodes(%27IMG_DATA%27)/Nodes(%27"+i.substring(38,44)+"_"+i.substring(11,26)+"_TCI.jp2%27)";h.resolve(c)}else{console.error("unable to get granule information");h.reject(null)}},function(){console.error("unable to get granule information");h.reject(null)})}else{console.error("unable to get product node information");h.reject(null)}},function(){console.error("unable to get product node information");h.reject(null)})}else if(g.test(i)){ProductService.getNode(d).then(function(a){if(a.status==200&&a.data&&a.data.d.results.length>0){var d=a.data.d.results[0];var f="odata/v1/Products(%27"+b.uuid+"%27)/Nodes(%27"+d.Id+"%27)/Nodes(%27GRANULE%27)/Nodes";var g=f+"?$format=json";var j=b.productType=="S2MSI2Ap"?"L2A_":"";ProductService.getGranule(g).then(function(a){if(a.status==200){e=a.data&&a.data.d.results[0]?a.data.d.results[0].Name:"";c=f+"(%27"+e+"%27)/Nodes(%27IMG_DATA%27)/Nodes(%27R10m%27)/Nodes(%27"+j+i.substring(38,44)+"_"+i.substring(11,26)+"_TCI_10m.jp2%27)";h.resolve(c)}else{console.error("unable to get granule information");h.reject(null)}},function(){console.error("unable to get granule information");h.reject(null)})}else{console.error("unable to get product node information");h.reject(null)}},function(){console.error("unable to get product node information");h.reject(null)})}else{h.reject(null)}return h.promise};b.getProductDetails=function(a,c,d){b.currentProdUuid=a;b.product={};if(c){b.currentList=c;b.products.list=c}if(d){b.isCalledFromCart=true}for(var e=0;e<b.currentList.length;e++){if(b.currentList[e].uuid==a){var f=b.currentList[e];var g=new l;g.id=f.uuid;g.cartid=f.id;g.title=f.identifier;g.hasQuicklook=f.quicklook;g.quicklook=ApplicationConfig.baseUrl+"odata/v1/Products('"+f.uuid+"')/Products('Quicklook')/$value";g.link=ApplicationConfig.baseUrl+"odata/v1/Products('"+f.uuid+"')/$value";g.alternative=ApplicationConfig.baseUrl+"odata/v1/Products('"+f.uuid+"')/";g.offline=f.offline;g.tranformation=f.tranformation;if(f.order){g.order=f.order;g.order.submissionTime=moment.utc(f.order.submissionTime).format("YYYY-MM-DDTHH:mm:ss.SSS");g.order.estimatedTime=moment.utc(f.order.estimatedTime).format("YYYY-MM-DDTHH:mm:ss.SSS")}g.isOrderDetails=f.isOrderOn||false;b.product=g;if(e+1<b.currentList.length){b.nextProdUuid=b.currentList[e+1].uuid;b.nextbutton.disabled=false}else{b.nextbutton.disabled=true}if(e-1>=0){b.prevbutton.disabled=false;b.prevProdUuid=b.currentList[e-1].uuid;if(b.currentList[e-1]&&b.currentList[e-1].transformation!=null){if(b.currentList[e-1].transformation.status!="COMPLETED")b.prevbutton.disabled=true;else b.prevbutton.disabled=false}}else{b.prevbutton.disabled=true}if(!g.offline){b.getTCILink(f).then(function(a){if(a){ProductService.getTCI(a).then(function(c){if(c&&c.status==200){b.product.tci_link=ApplicationConfig.baseUrl+a+"/$value";b.resizeQuicklook();if(!$("#productView").hasClass("in"))$("#productView").modal("show")}},function(){b.product.tci_link=null;b.resizeQuicklook();if(!$("#productView").hasClass("in"))$("#productView").modal("show")})}else{b.product.tci_link=null;b.resizeQuicklook();if(!$("#productView").hasClass("in"))$("#productView").modal("show")}},function(){b.product.tci_link=null;b.resizeQuicklook();if(!$("#productView").hasClass("in"))$("#productView").modal("show")})}else{b.product.tci_link=null;b.resizeQuicklook();if(!$("#productView").hasClass("in"))$("#productView").modal("show")}}}};b.resizeQuicklook=function(){if(b.showquicklook&&b.hideminimap){$("#carousel-container").outerHeight(j);$("#noquicklook-container").outerHeight(j)}else{if(!b.windows.map)return;$("#carousel-container").outerHeight($("#map-container").outerHeight());$("#noquicklook-container").outerHeight($("#map-container").outerHeight())}};b.maximizeMap=function(){g.initProductMap("productmap",{list:b.products.list,uuid:b.currentProdUuid});b.windows.map=!b.windows.map};m();b.products=e.products;angular.element(d).bind("resize",function(){b.resizeQuicklook()})}}}}}]).factory("ProductDetailsModelService",function(){return{products:{list:""}}});angular.module("DHuS-webclient").directive("productQuicklook",["$location","$document","ProductDetailsModelService","ConfigurationService",function(a,b,c,d){return{restrict:"AE",replace:true,templateUrl:"components/product-quicklook/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){if(!d.isLoaded){d.getConfiguration().then(function(a){if(a){ApplicationService=a}else{}},function(a){})}},post:function(a,b,d){a.noquicklook="images/bigplaceholder.png";a.odataReqUrl="odata/v1/";a.url="images/bigplaceholder.png";a.hasQuicklook=d.hasQuicklook;a.products=c.products;d.$observe("productUuid",function(b){for(var c=0;c<a.products.list.length;c++){if(a.products.list[c].uuid==b){var d=a.products.list[c];a.product=d}}a.url=ApplicationConfig.baseUrl+a.odataReqUrl;a.url+="Products('"+b+"')/Products('Quicklook')/$value";if(b.trim()!=""&&a.product.quicklook){a.url=ApplicationConfig.baseUrl+a.odataReqUrl;a.url+="Products('"+b+"')/Products('Quicklook')/$value"}else{a.url="images/bigplaceholder.png"}});$("#productView").on("shown.bs.modal",function(b){if(a.uuid&&a.product.quicklook){a.url=ApplicationConfig.baseUrl+a.odataReqUrl;a.url+="Products('"+a.uuid+"')/Products('Quicklook')/$value"}});function e(){}e()}}}}}]);angular.module("DHuS-webclient").directive("fallbackSrc",function(){var a={link:function a(b,c,d){c.bind("error",function(){angular.element(this).attr("src",d.fallbackSrc)})}};return a});angular.module("DHuS-webclient").directive("productAttributes",["$location","$document","ProductDetailsModelService",function(a,b,c){return{restrict:"AE",replace:true,templateUrl:"components/product-attributes/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,d){a.model=null;a.products=c.products;a.uuid=null;d.$observe("productUuid",function(b){a.uuid=b;a.model=_.findWhere(a.products.list,{uuid:a.uuid})})}}}}}]);(function(){$.fn.EasyTree=function(a){var b={selectable:true,deletable:false,editable:false,addable:false,i18n:{deleteNull:"Select a node to delete",deleteConfirmation:"Delete this node?",confirmButtonLabel:"Okay",editNull:"Select a node to edit",editMultiple:"Only one node can be edited at one time",addMultiple:"Select a node to add a new node",collapseTip:"collapse",expandTip:"expand",selectTip:"select",unselectTip:"unselet",editTip:"edit",addTip:"add",deleteTip:"delete",cancelButtonLabel:"cancle"}};var c=$('<div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span> </div> ');var d=$('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span> </div> ');var e=$('<div class="input-group"><input type="text" class="form-control"><span class="input-group-btn"><button type="button" class="btn btn-default btn-success confirm"></button> </span><span class="input-group-btn"><button type="button" class="btn btn-default cancel"></button> </span> </div> ');a=$.extend(b,a);var f="?$skip=0&$top=200";this.each(function(){var b=$(this);$.each($(b).find("ul > li"),function(){var a;if($(this).is("li:has(ul)")){var b=$(this).find(" > ul");$(b).remove();a=$(this).text();$(this).html('<span><span class="glyphicon"></span><a href="javascript: void(0);"></a> </span>');$(this).find(" > span > span").addClass("glyphicon-folder-open");$(this).find(" > span > a").text(a);$(this).append(b)}else{a=$(this).text();$(this).html('<span><span class="glyphicon"></span><a href="javascript: void(0);"></a> </span>');$(this).find(" > span > span").addClass("glyphicon-folder-close");$(this).find(" > span > a").text(a)}});if(a.selectable){$(b).find("li > span > a").click(function(c){var e=$(this).parent().parent();if(e.hasClass("li_selected"))$(e).removeClass("li_selected");else{$(b).find("li.li_selected").removeClass("li_selected");$(e).addClass("li_selected")}if(a.deletable||a.editable||a.addable){var f=d(c);if(a.editable){if(f.length<=0||f.length>1)$(b).find(".easy-tree-toolbar .edit > button").addClass("disabled");else $(b).find(".easy-tree-toolbar .edit > button").removeClass("disabled")}if(a.deletable){if(f.length<=0||f.length>1)$(b).find(".easy-tree-toolbar .remove > button").addClass("disabled");else $(b).find(".easy-tree-toolbar .remove > button").removeClass("disabled")}}c.stopPropagation()})}var d=function(g){var h=$(b).find("li.li_selected");var i=$(h).firstChild;var j=$(b).find("li.li_selected").attr("nodelink");if($(h).attr("loaded")=="false"){$(h).attr("loaded","true");ProductService.getElement(j).success(function(g){var i=JSON.stringify(g);var k=$(h).find(" > ul");$(k).remove();for(var l=0;l<g.d.results.length;l++){var m=g.d.results[l];j=j.replace(f,"");var n=j+"('"+m.Id+"')/Nodes"+f;n=n.replace(new RegExp("'","g"),"%27");n=n.replace(new RegExp("\\[","g"),"%5B");n=n.replace(new RegExp("\\]","g"),"%5D");var o="";if(m.Value)o=m.Value;var p;if(m.Value){p=$('<li loaded="false" nodelink="'+n+'"><span><a href="javascript: void(0);"><span class="glyphicon glyphicon-file"></span><a href="javascript: void(0);">'+m.Name+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+o+"</a></span></li>")}else{if(m.ContentType!="Item"&&m.ContentLength>0){var q=n.replace("/Nodes"+f,"");p=$('<li loaded="false" nodelink="'+n+'"><span><span class="glyphicon glyphicon-folder-close"></span><a href="javascript: void(0);">'+m.Name+'</a> </span><a href="'+q+"/$value"+'"><span class="glyphicon glyphicon-download-alt download-prod-node"></span></a></li>')}else{if(m.ChildrenNumber==0){if(m.ContentType=="Item"&&m.ContentLength>0){var q=n.replace("/Nodes"+f,"");p=$('<li loaded="false" nodelink="'+n+'"><span><span class="glyphicon glyphicon-file"></span><a href="javascript: void(0);">'+m.Name+'</a> </span><a href="'+q+"/$value"+'"><span class="glyphicon glyphicon-download-alt download-prod-node"></span></a></li>')}else{p=$('<li loaded="false" nodelink="'+n+'"><span><span class="glyphicon glyphicon-file"></span><a href="javascript: void(0);">'+m.Name+"</a> </span></li>")}}else p=$('<li loaded="false" nodelink="'+n+'"><span><span class="glyphicon glyphicon-folder-close"></span><a href="javascript: void(0);">'+m.Name+"</a> </span></li>")}}if(h.length<=0){$(b).find(" > ul").append($(p))}else if(h.length>1){$(b).prepend(c);$(b).find(".alert .alert-content").text(a.i18n.addMultiple)}else{if($(h).hasClass("parent_li")){$(h).find(" > ul").append(p)}else{if(!$(h).find(" > span > span").hasClass("glyphicon-download-alt"))$(h).addClass("parent_li").find(" > span > span").addClass("glyphicon-folder-open").removeClass("glyphicon-folder-close");$(h).append($("<ul></ul>")).find(" > ul").append(p)}}$(e).find("input").val("");if(a.selectable){$(p).find(" > span > a").click(function(c){var e=$(this).parent().parent();if(e.hasClass("li_selected")){$(e).removeClass("li_selected")}else{$(b).find("li.li_selected").removeClass("li_selected");$(e).addClass("li_selected")}if(a.deletable||a.editable||a.addable){var f=d(c);if(a.editable){if(f.length<=0||f.length>1)$(b).find(".easy-tree-toolbar .edit > button").addClass("disabled");else $(b).find(".easy-tree-toolbar .edit > button").removeClass("disabled")}if(a.deletable){if(f.length<=0||f.length>1)$(b).find(".easy-tree-toolbar .remove > button").addClass("disabled");else $(b).find(".easy-tree-toolbar .remove > button").removeClass("disabled")}}c.stopPropagation()})}$(e).remove()}});return}else if($(h).attr("loaded")=="true"){var k=$(h).find("li");if($(k).is(":visible")){k.hide();var l=$(h).find(" span > span");if(!$(h).find(" span > span").first().hasClass("glyphicon-file")){$(h).find(" span > span").first().addClass("glyphicon-folder-close");$(h).find(" span > span").first().removeClass("glyphicon-folder-open")}}else{k.show();var l=$(h).find(" span > span");if(!$(h).find(" span > span").first().hasClass("glyphicon-file")){$(h).find(" span > span").first().addClass("glyphicon-folder-open");$(h).find(" span > span").first().removeClass("glyphicon-folder-close")}}}return $(b).find("li.li_selected")}})}})();function MetaProduct(a){this.id=a.uuid;this.title=a.identifier;this.quicklook=ApplicationConfig.baseUrl+"odata/v1/Products('"+a.uuid+"')/Products('Quicklook')/$value";this.link=ApplicationConfig.baseUrl+"odata/v1/Products('"+a.uuid+"')/$value";this.alternative=ApplicationConfig.baseUrl+"odata/v1/Products('"+a.uuid+"')/";this.offline=a.offline}angular.module("DHuS-webclient").directive("productMetadata",["$location","$document","ProductDetailsModelService",function(a,b,c){return{restrict:"AE",replace:true,templateUrl:"components/product-metadata/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,d){a.node={};a.products=c.products;a.uuid=null;a.product={};d.$observe("productUuid",function(b){a.uuid=b;for(var c=0;c<a.products.list.length;c++){if(a.products.list[c].uuid==a.uuid){var d=a.products.list[c];var e=new MetaProduct(d);a.product=e}}a.clearTree();if(!a.product.offline)a.requestNode()});$("#productView").on("shown.bs.modal",function(b){var c=d.productUuid;if(c){a.uuid=c;for(var e=0;e<a.products.list.length;e++){if(a.products.list[e].uuid==a.uuid){var f=a.products.list[e];var g=new MetaProduct(f);a.product=g}}}a.clearTree();if(!a.product.offline)a.requestNode()});a.requestNode=function(){var b=this;if(a.product.alternative){ProductService.getNode(a.product.alternative).success(function(b){a.clearTree();if(b.d.results.length<=0)return null;var c=b.d.results[0];var d=a.product.alternative+"Nodes('"+c.Id+"')/Nodes?$skip=0&$top=200";d=d.replace(new RegExp("'","g"),"%27");d=d.replace(new RegExp("\\[","g"),"%5B");d=d.replace(new RegExp("\\]","g"),"%5D");var e=a.getShortString(c.Name,60);$("#easytree").append("<ul><li loaded='false' nodelink='"+d+"'><span><span class='glyphicon glyphicon-folder-close'> "+e+"</span></span></li></ul>");$("#easytree").EasyTree({addable:true,editable:false,deletable:false});var f=$("#easytree").find("li > span > a");if(ApplicationService.settings.regex_closed_by_default){var g=new RegExp(ApplicationService.settings.regex_closed_by_default,"g");if(!g.test(a.product.title))$(f).click()}else $(f).click()})}};a.getShortString=function(a,b){if(a.length<=b)return a;var c=b/2;var d=c-3;var e=a.length-d;return a.substring(0,c)+"..."+a.substring(e)};a.clearTree=function(){var a=$("#easytree");$.each($(a).find("ul > li"),function(){$($(a).find("ul > li")).remove()})}}}}}}]);"use strict";var stylesMap=[{match:{satellite:"Sentinel-3",instrument:"OLCI"},style:{fill:[255,0,0,.5],stroke:[255,0,0,1]}},{match:{satellite:"Sentinel-2",instrument:"MSO"},style:{fill:[255,0,0,.5],stroke:[255,0,0,1]}}];var Product={create:function(a,b){return{name:a.identifier,footprint:b,id:a.uuid,default_style:a.default_style,selected_style:a.selected_style,highlighted_style:a.highlighted_style}}};var DHuSProductMapConfig={webAppRoot:"",styles:{selection:{fill:{color:[255,0,0,.6]},stroke:{color:[255,0,0,1],width:5}},default:{fill:{color:[255,255,255,.4]},stroke:{color:[0,153,255,1],width:1}}},map:{transformation:{source:"EPSG:4326",destination:"EPSG:3857"},defaultCenter:{coordinates:[12.489168,41.888018]},defaultZoom:6,minZoom:.5,defaultLayer:"sat"},cesium:{terrainProviderUrl:"//cesiumjs.org/stk-terrain/tilesets/world/tiles"},events:{changedModel:"changed-model",newModel:"new-model"}};angular.module("DHuS-webclient").factory("ProductOLMap",["Logger","ConfigurationService",function(a,b){return{productModel:{list:"hello"},map:{},mapModel:{footprintLayerId:1},activedSelection:false,externalInterface:{sendSelectionCoordinates:null},selectionStyle:new ol.style.Style({fill:new ol.style.Fill(DHuSProductMapConfig.styles.selection.fill),stroke:new ol.style.Stroke(DHuSProductMapConfig.styles.selection.stroke)}),defaultStyle:new ol.style.Style({fill:new ol.style.Fill(DHuSProductMapConfig.styles.default.fill),stroke:new ol.style.Stroke(DHuSProductMapConfig.styles.default.stroke)}),getStyleFromProduct:function(a){},renderFootprintLayer:function(b){a.log("product-details-map","renderFootprintLayer()");var c=this;var d=new ol.format.WKT;var e=[];for(var f=0;f<b.length;f++){a.log("product-details-map","renderFootprintLayer() FOR");var g=d.readFeature(b[f].footprint);g.getGeometry().transform(DHuSProductMapConfig.map.transformation.source,DHuSProductMapConfig.map.transformation.destination);g.product=b[f];g.setStyle(g.product.default_style);e.push(g)}if(e.length>0){this.map.getLayers().item(this.mapModel.footprintLayerId).setSource(new ol.source.Vector({features:e,wrapX:false}));var h=this.map.getLayers().item(this.mapModel.footprintLayerId).getSource().getExtent();this.map.getView().fit(h,this.map.getSize())}},initMap:function(c,d){if(!b.isLoaded())b.getConfiguration().then(function(a){if(a)ApplicationService=a});var e=function(a){var b=[];if(a&&a.sources){for(var c=0;c<a.sources.length;c++)b.push(new ol.layer.Tile({source:new ol.source[a.sources[c].class](a.sources[c].params)}))}return new ol.layer.Group({title:a?a.title:"",type:a?a.type:"",visible:a?a.visible:false,layers:b,wrapX:false})};a.log("product-details-map","initMap()");var f=this;var g=[-180,-80,180,80];this.map=new ol.Map({target:c,layers:[e(ApplicationService.settings.miniMap),new ol.layer.Vector({source:new ol.source.Vector}),new ol.layer.Vector({source:new ol.source.Vector})],view:new ol.View({center:ol.proj.transform(DHuSProductMapConfig.map.defaultCenter.coordinates,DHuSProductMapConfig.map.transformation.source,DHuSProductMapConfig.map.transformation.destination),zoom:DHuSProductMapConfig.map.defaultZoom,minZoom:DHuSProductMapConfig.map.minZoom,maxZoom:19,extent:ol.proj.transformExtent(g,DHuSProductMapConfig.map.transformation.source,DHuSProductMapConfig.map.transformation.destination)})})},setupMap:function(b){a.log("product-details-map","setupMap()");this.initMap(b)},createJTSMultipolygon:function(a){var b="MULTIPOLYGON(";for(var c=0;c<a.length;c++){var d=a[c];b+="((";var e;var f;for(var g=0;g<d.length-1;g++){if(d[g][1]>85.05)e=85.05;else if(d[g][1]<-85.05)e=-85.05;else e=d[g][1];b+=d[g][0]+" "+e+","}if(d[0][1]>85.05)f=85.05;else if(d[0][1]<-85.05)f=-85.05;else f=d[0][1];b+=d[0][0]+" "+f+")),"}b=b.substring(0,b.length-1)+")";return b},setModel:function(b,c){a.log("product-details-map","setModel() for product with id "+c);var d=b;this.model=b;var e=[];var f=b&&b.length?b.length:0;for(var g=0;g<f;g++){if(b[g].uuid==c){var h=_.findIndex(b[g].indexes,function(a){return a.name=="product"});a.log("product-details-map","created product "+b[g].identifier);var i=b[g].footprint;var j="";var k=b[g].wkt;if(k){e.push(Product.create(b[g],k))}else{if(i){console.log("No WKT found, rebuild from coordinates...");j=this.createJTSMultipolygon(i);e.push(Product.create(b[g],j))}}}}this.renderFootprintLayer(e)},init:function(b){a.log("product-details-map","init()");var c=this;this.setupMap(b)},initProductMap:function(a,b){var c=this;setTimeout(function(){$("#productmap").empty();c.init(a);c.setModel(b.list,b.uuid);$("#carousel-container").outerHeight($("#map-container").outerHeight());$("#noquicklook-container").outerHeight($("#map-container").outerHeight())},0)}}}]);angular.module("DHuS-webclient").directive("productMap",["ProductOLMap","$window","$document","Logger","$rootScope","$location","ProductDetailsModelService",function(a,b,c,d,e,f,g){return{restrict:"AE",replace:true,templateUrl:"components/product-map/view.html",scope:{text:"="},createdSearchModel:function(){},compile:function(b,c){var e=this;return{pre:function(b,c,d){setTimeout(function(){a.init("productmap")},0)},post:function(b,c,e){b.products=g.products;b.uuid=null;e.$observe("productUuid",function(c){b.uuid=c;setTimeout(function(){d.log("product-details-map","show-product event with id "+c);$("#productmap").empty();a.init("productmap");a.setModel(b.products.list,c)},0)});$("#productView").on("shown.bs.modal",function(c){if(b.uuid){setTimeout(function(){d.log("product-details-map","show-product event with id "+b.uuid);$("#productmap").empty();a.init("productmap");a.setModel(b.products.list,b.uuid);if($("#map-container").outerHeight()>0){$("#carousel-container").outerHeight($("#map-container").outerHeight());$("#noquicklook-container").outerHeight($("#map-container").outerHeight())}},0)}})}}}}}]);angular.module("DHuS-webclient").directive("actionsToolbar",["$location","SearchService","SearchBoxService","AuthenticationService",function(a,b,c,d){return{restrict:"AE",replace:true,templateUrl:"components/actions-toolbar/view.html",scope:{text:"="},compile:function(a,e){return{pre:function(a,b,c){},post:function(a,e,f){a.saveSearch=function(){b.saveUserSearch(c.model.textQuery,c.model.geoselection,c.model.advancedFilter,c.model.missionFilter).then(function(a){ToastManager.success("User search save successful")},function(a){if(d.logged)ToastManager.error("Save user search operation failed")})}}}}}}]);"use strict";angular.module("DHuS-webclient").directive("searchesContainer",["UIUtils","$document","$window","SavedSearchModel","SavedSearchService",function(a,b,c,d,e){var f="#saved-search-label-id",g="#saved-search-count-id",h="#saved-search-num-id",i=".fab-saved-search",j=".saved-search-button";var k=function(){a.responsiveLayout(function a(){$(f).css("display","none");$(h).css("display","none");$(g).css("display","none");$(j).css("display","none");$(i).css("display","inline")},function a(){$(f).css("display","none");$(h).css("display","none");$(g).css("display","none");$(j).css("display","inline");$(i).css("display","none")},function a(){$(f).css("display","inline-block");$(h).css("display","inline-block");$(g).css("display","inline-block");$(j).css("display","inline");$(i).css("display","none")},function a(){$(f).css("display","inline-block");$(h).css("display","inline-block");$(g).css("display","inline-block");$(j).css("display","inline");$(i).css("display","none")})};return{restrict:"AE",replace:true,templateUrl:"components/saved-searches/view.html",scope:{text:"="},createdSavedSearchModel:function(){},compile:function(a,f){var g=this;return{pre:function(a,c,e){d.sub(g);a.productCount=0;a.currentPage=1;setTimeout(function(){angular.element(b).ready(k)},0)},post:function(a,f,h){g.productsPerPagePristine=true;g.currentPagePristine=true;a.currentPage=1;a.currentPageCache=1;angular.element(b).ready(k);angular.element(c).bind("resize",k);function i(){a.initPage()}var j=function(b,c){if(b<=a.pageCount&&b>0||c){a.currentPage=b;e.gotoPage(b).then(function(){a.refreshCounters()})}};a.initPage=function(){e.getSavedSearches(e.offset,e.limit);a.refreshCounters()};a.refreshCounters=function(){a.productCount=d.model.count;a.pageCount=Math.floor(d.model.count/a.productsPerPage)+(d.model.count%a.productsPerPage?1:0)};g.createdSavedSearchModel=function(){a.model=d.model.list;a.productCount=d.model.count;a.refreshCounters();a.visualizedProductsFrom=d.model.count?e.offset+1:0;a.visualizedProductsTo=(d.model.count?a.currentPage*a.productsPerPage:0)>a.productCount?a.productCount:d.model.count?a.currentPage*a.productsPerPage:0};g.updatedSavedSearchModel=function(){};a.productsPerPage="25";a.$watch("productsPerPage",function(a){if(g.productsPerPagePristine){g.productsPerPagePristine=false;return}e.setLimit(a);j(1,true)});var l=function(){var b=parseInt(a.currentPage);if(isNaN(b)){a.$apply(function(){a.currentPage=a.currentPageCache});return}if(b<=0){a.$apply(function(){a.currentPage=a.currentPageCache});return}if(b>a.pageCount){a.$apply(function(){a.currentPage=a.currentPageCache});return}j(a.currentPage)};$("#saved-search-page-selector").bind("enterKey",function(a){l()});$("#saved-search-page-selector").focusout(function(a){l()});$("#saved-search-page-selector").keyup(function(a){if(a.keyCode==13){$(this).trigger("enterKey")}});a.currentPage=1;a.gotoFirstPage=function(){j(1)};a.gotoPreviousPage=function(){j(a.currentPage-1)}
;a.gotoNextPage=function(){j(a.currentPage+1)};a.gotoLastPage=function(){j(a.pageCount)};a.selectPageDidClicked=function(a){};a.clearSavedSearches=function(){if(a.productCount==0)return;e.clearUserSearches().then(function(b){if(b.status==200){a.initPage();ToastManager.success("User searches cleared")}else{ToastManager.error("Error cleaning user searches")}})};i()}}}}}]);"use strict";angular.module("DHuS-webclient").controller("TestController",function(){});angular.module("DHuS-webclient").directive("searchItem",["$rootScope","SavedSearchModel","CartMenuService","SavedSearchService","SearchService","AdvancedSearchService","SearchBoxService","$window",function(a,b,c,d,e,f,g,h){var i="#eCF0F1";var j="#F5F5F5";var k="transparent";var l={restrict:"AE",replace:true,templateUrl:"components/saved-searches/search-item/view.html",scope:{product:"=",id:"="},savedSearchModelSubscription:function(a,c,d){b.sub({scope:d,id:"searchItem",product:a,element:c,productDidHighlighted:function(a){if(a.id==this.product.id&&b.getProductByID(this.product.id)){this.element.css({"background-color":j})}if(a.id!=this.product.id){this.element.css({"background-color":k})}},productDidntHighlighted:function(a){if(a.id==this.product.id){this.element.css({"background-color":i})}else{if(a.id==this.product.id)this.element.css({"background-color":k})}}})},updatedSavedSearchModel:function(){},productDidntHighlighted:function(){},compile:function(a,i){var j=this;return{pre:function(a,b,c){},post:function(a,i,k){var l=function(){};angular.element(h).bind("resize",l);j.savedSearchModelSubscription(a.product,i,a);a.hoverIn=function(){if(a.product){b.highlightProduct({id:a.product.id,sender:"searchItem"});a.visibleItemButton=true}};a.hoverOut=function(){if(a.product){b.nohighlightProduct({id:a.product.id,sender:"searchItem"});a.visibleItemButton=false}};a.executeSavedSearch=function(){e.setOffset(0);e.setTextQuery(a.product.complete);e.search(a.product.complete);f.hide();c.hide();g.model.textQuery=a.product.complete;window.location.href="#/home"};a.updateNotificationStatus=function(){d.updateNotificationStatus(a.product.uuid,!a.product.notify).success(function(){a.product.notify=!a.product.notify;ToastManager.success("Notification status update successful")}).error(function(){ToastManager.error("Notification status update failed")})};a.removeSavedSearch=function(){d.removeSavedSearch(a.product.uuid).success(function(a){d.getSavedSearches(d.offset,d.limit);ToastManager.success("User search deletion successful")}).error(function(a){ToastManager.error("User search deletion failed")})}}}}};return l}]);"use strict";angular.module("DHuS-webclient").directive("searchesList",["SavedSearchModel",function(a){return{restrict:"AE",replace:true,templateUrl:"components/saved-searches/searches-list/view.html",scope:{text:"="},compile:function(b,c){var d=this;return{pre:function(b,c,e){b.model=a.model.list;a.sub(d)},post:function(b,c,e){d.createdSavedSearchModel=function(){b.model=[];b.model=a.model.list}}}}}}]);angular.module("DHuS-webclient").directive("requestDone",["$window","$document","ConfigurationService","SearchService","SearchModel",function(a,b,c,d,e){return{restrict:"AE",replace:true,templateUrl:"components/request-done/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,f){a.title=ApplicationService.settings.querytitle;if(!c.isLoaded()){c.getConfiguration().then(function(b){if(b){ApplicationService=b;a.title=ApplicationService.settings.querytitle}else{}},function(a){})}e.sub(self);self.createdSearchModel=function(){a.doneRequest=d.doneRequest}}}}}}]);"use strict";angular.module("DHuS-webclient").directive("managementUsers",["UIUtils","$document","$window","UserModel","AdminUserService",function(a,b,c,d,e){var f="#page-label-id",g="#page-count-id",h="#page-num-id",i=".fab-mnguser",j=".mnguser-button";var k=function(){a.responsiveLayout(function a(){$(f).css("display","none");$(h).css("display","none");$(g).css("display","none");$(i).css("display","none");$(j).css("display","inline")},function a(){$(f).css("display","none");$(h).css("display","none");$(g).css("display","none");$(j).css("display","inline");$(i).css("display","none")},function a(){$(f).css("display","inline-block");$(h).css("display","inline-block");$(g).css("display","inline-block");$(j).css("display","inline");$(i).css("display","none")},function a(){$(f).css("display","inline-block");$(h).css("display","inline-block");$(g).css("display","inline-block");$(j).css("display","inline");$(i).css("display","none")})};return{restrict:"AE",replace:true,templateUrl:"components/management-users/view.html",scope:{text:"="},createdUserModel:function(){},compile:function(a,f){var g=this;return{pre:function(a,c,e){d.sub(g);a.usersCount=0;a.currentPage=1;setTimeout(function(){angular.element(b).ready(k)},0)},post:function(a,f,h){g.usersPerPagePristine=true;g.currentPagePristine=true;a.currentPage=1;a.currentPageCache=1;a.model={};a.model.searchfilter="";e.setFilter(a.model.searchfilter);angular.element(b).ready(k);angular.element(c).bind("resize",k);function i(){a.initUsers()}var j=function(b,c){if(b<=a.pageCount&&b>0||c){a.currentPage=b;a.currentPageCache=b;e.gotoPage(b).then(function(){a.refreshCounters()})}};a.setFilter=function(){e.setFilter(a.model.searchfilter)};a.initUsers=function(){e.getUsersList();a.refreshCounters()};a.refreshCounters=function(){a.usersCount=d.model.count;a.pageCount=Math.floor(d.model.count/a.usersPerPage)+(d.model.count%a.usersPerPage?1:0)};g.createdUserModel=function(){a.model.users=d.model.list;a.usersCount=d.model.count;a.refreshCounters();a.visualizedUsersFrom=d.model.count?parseInt(e.offset)+1:0;a.visualizedUsersTo=(d.model.count?a.currentPage*a.usersPerPage:0)>a.usersCount?a.usersCount:d.model.count?a.currentPage*a.usersPerPage:0};g.updatedUserModel=function(){};a.showCreateUser=function(){AdminUserDetailsManager.getUserDetails(-1,d.model.list,true)};a.usersPerPage="25";a.$watch("usersPerPage",function(a){if(g.usersPerPagePristine){g.usersPerPagePristine=false;return}e.setLimit(a);j(1,true)});var l=function(){var b=parseInt(a.currentPage);if(isNaN(b)){a.$apply(function(){a.currentPage=a.currentPageCache});return}if(b<=0){a.$apply(function(){a.currentPage=a.currentPageCache});return}if(b>a.pageCount){a.$apply(function(){a.currentPage=a.currentPageCache});return}j(a.currentPage)};$("#mnguser-page-selector").bind("enterKey",function(a){l()});$("#mnguser-page-selector").focusout(function(a){l()});$("#mnguser-page-selector").keyup(function(a){if(a.keyCode==13){$(this).trigger("enterKey")}});$("#user-filter").bind("filterEnter",function(b){if(g.usersPerPagePristine){g.usersPerPagePristine=false;return}e.setLimit(a.usersPerPage);j(1,true)});$("#user-filter").keyup(function(a){if(a.keyCode==13){$(this).trigger("filterEnter")}});a.currentPage=1;a.gotoFirstPage=function(){j(1)};a.gotoPreviousPage=function(){j(a.currentPage-1)};a.gotoNextPage=function(){j(a.currentPage+1)};a.gotoLastPage=function(){j(a.pageCount)};a.selectPageDidClicked=function(a){};i()}}}}}]);"use strict";angular.module("DHuS-webclient").directive("usersList",["UserModel",function(a){return{restrict:"AE",replace:true,templateUrl:"components/management-users/users-list/view.html",scope:{text:"="},compile:function(b,c){var d=this;return{pre:function(b,c,e){b.model=[];b.model.users=[];b.model.users=a.model.list;a.sub(d)},post:function(b,c,e){d.createdUserModel=function(){b.model=[];b.model.users=[];b.model.users=a.model.list}}}}}}]);"use strict";angular.module("DHuS-webclient").directive("userItem",["$rootScope","UserModel","AdminUserService","ConfigurationService","$window","$document",function(a,b,c,d,e,f){var g="#eCF0F1";var h="#F5F5F5";var i="transparent";var j="";var k={restrict:"AE",replace:true,templateUrl:"components/management-users/user-item/view.html",scope:{user:"=",uuid:"="},userModelSubscription:function(a,c,d){b.sub({scope:d,id:"listItem",user:a,element:c,userDidHighlighted:function(a){if(a.uuid==this.user.uuid&&b.getUserByID(this.user.uuid)&&!b.getUserByID(this.user.uuid).selected){this.element.css({"background-color":h})}if(a.uuid!=this.user.uuid&&!b.getUserByID(this.user.uuid).selected){this.element.css({"background-color":i})}},userDidntHighlighted:function(a){if(a.uuid==this.user.uuid&&b.getUserByID(this.user.uuid).selected){this.element.css({"background-color":g})}else{if(a.uuid==this.user.uuid)this.element.css({"background-color":i})}}})},updatedUserModel:function(){},userDidntHighlighted:function(){},compile:function(a,e){var g=this;return{pre:function(a,b,c){a.show_admin_change_password=ApplicationService.settings.show_admin_change_password},post:function(a,e,h){angular.element(f).ready(function(){if(!d.isLoaded()){d.getConfiguration().then(function(b){if(b){ApplicationService=b;a.show_admin_change_password=ApplicationService.settings.show_admin_change_password}else{}},function(a){})}else{a.show_admin_change_password=ApplicationService.settings.show_admin_change_password}});g.userModelSubscription(a.user,e,a);a.hoverIn=function(){b.highlightProduct({uuid:a.user.uuid,sender:"listItem"});a.visibleItemButton=true};a.hoverOut=function(){b.nohighlightProduct({uuid:a.user.uuid,sender:"listItem"});a.visibleItemButton=false};a.showUserDetails=function(){AdminUserDetailsManager.getUserDetails(a.user.uuid,b.model.list,false)};a.showChangePassword=function(){AdminUserDetailsManager.getChangeUserPassword(a.user.username)};a.removeUser=function(){c.removeUser(a.user.uuid).then(function(b){if(b.status==200){c.getUsersList();ToastManager.success("user deletion succeeded.")}else if(b.data&&b.data.code=="email_not_sent"){c.getUsersList();var d="User "+a.user.username+" has been deleted, but there was an error while sending an email to user"+". Please contact an administrator. Cannot send email to "+a.user.email;AlertManager.error("User Deletion Error",d)}else if(b.data&&b.data.code=="unauthorized"){c.getUsersList();ToastManager.error("user deletion failed. unauthorized")}else{c.getUsersList();ToastManager.error("user deletion failed")}},function(a){c.getUsersList();ToastManager.error("user deletion failed")})}}}}};return k}]);angular.module("DHuS-webclient").directive("userDetails",["$location","$document","$window","ConfigurationService","AdminUserService",function(a,b,c,d,e){var f=null;return{restrict:"AE",replace:true,templateUrl:"components/user-details/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){a.temp={};a.user={};a.users={};a.checkFields=true;a.nextbutton={};a.prevbutton={};a.isNew=false;a.domains=["Atmosphere","Emergency","Marine","Land","Security","Climate","Other"];a.usages=["Research","Commercial","Education","Other"];function g(){a.availableRoles=ApplicationService.settings.availableRoles;if(!d.isLoaded()){d.getConfiguration().then(function(b){if(b){ApplicationService=b;a.availableRoles=ApplicationService.settings.availableRoles}},function(a){})}}AdminUserDetailsManager.setUserDetails(function(b,c,d){a.getUserDetails(b,c,d)});function h(b,c,d){if(d){a.user={};a.resetFields()}l(b,c,d)}function i(){var b="";if(a.availableRoles){a.availableRoles.forEach(function(a){b="#userRole_"+a.id;$(b).prop("checked",false)})}}function j(){var b="";if(a.availableRoles){a.availableRoles.forEach(function(a){b="#userRole_"+a.id;$(b).prop("checked",true)})}}function k(a){var b="";if(a){a.forEach(function(a){b="#userRole_"+a;$(b).prop("checked",true)})}}function l(b,c,d){if(!a.countries){e.getCountries().then(function(e){if(e.status==200){f=e.data;a.countries=f;a.loadUserInfo(b,c,d)}else{ToastManager.error("error getting countries list");a.loadUserInfo(b,c,d)}},function(e){ToastManager.error("error getting countries list");a.loadUserInfo(b,c,d)})}else a.loadUserInfo(b,c,d)}a.selectUnselectAll=function(){if(a.selected){j()}else{i()}};a.loadUserInfo=function(b,c,d){if(d){a.nextbutton.disabled=true;a.prevbutton.disabled=true;return}a.currentUuid=b;if(c){a.currentList=c;a.users.list=c}if(a.currentList){for(var e=0;e<a.currentList.length;e++){if(a.currentList[e].uuid==b){var f=a.currentList[e];a.user=f;a.temp=_.clone(a.user);if(a.user.lockedReason)a.isLocked=true;else a.isLocked=false;k(a.user.roles);if(e+1<a.currentList.length){a.nextUuid=a.currentList[e+1].uuid;a.nextbutton.disabled=false}else{a.nextbutton.disabled=true}if(e-1>=0){a.prevbutton.disabled=false;a.prevUuid=a.currentList[e-1].uuid}else{a.prevbutton.disabled=true}}}}a.checkUsage();a.checkDomain()};a.showNextUser=function(){a.getUserDetails(a.nextUuid,null,false)};a.showPrevUser=function(){a.getUserDetails(a.prevUuid,null,false)};a.getUserDetails=function(b,c,d){i();a.isNew=d;h(b,c,d);if(!$("#userView").hasClass("in"))$("#userView").modal("show")};a.checkUsage=function(){var b=true;if(!a.user.usage||a.user.usage=="unknown"||a.user.usage.trim()==""){$("#admincheckUsage").css("display","inline-block");$("#adminusageLbl").css("display","none");b=false}else{$("#admincheckUsage").css("display","none");$("#adminusageLbl").css("display","inline-block")}if(a.user.usage=="Other"){$("#adminusageDesc").show()}else{$("#adminusageLabel").hide();$("#adminusageDesc").hide();$("#admincheckSubUsage").hide()}a.checkFields=a.checkFields&&b};a.checkDomain=function(){var b=true;if(!a.user.domain||a.user.domain=="unknown"||a.user.domain.trim()==""){$("#admincheckDomain").css("display","inline-block");$("#admindomainLbl").css("display","none");b=false}else{$("#admincheckDomain").css("display","none");$("#admindomainLbl").css("display","inline-block")}if(a.user.domain=="Other"){$("#admindomainDesc").show()}else{$("#admindomainLabel").hide();$("#admindomainDesc").hide();$("#admincheckSubDomain").hide()}a.checkFields=a.checkFields&&b};a.checkUsername=function(){var b=true;if(!a.user.username||a.user.username.trim()==""){$("#admincheckUsername").css("display","inline-block");$("#adminusernameLbl").css("display","none");b=false}else{$("#admincheckUsername").css("display","none");$("#adminusernameLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkName=function(){var b=true;if(!a.user.firstname||a.user.firstname.trim()==""){$("#admincheckName").css("display","inline-block");$("#adminfirstnameLbl").css("display","none");b=false}else{$("#admincheckName").css("display","none");$("#adminfirstnameLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkLastname=function(){var b=true;if(!a.user.lastname||a.user.lastname.trim()==""){$("#admincheckLastname").css("display","inline-block");$("#adminlastnameLbl").css("display","none");b=false}else{$("#admincheckLastname").css("display","none");$("#adminlastnameLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkEmail=function(){var b=true;var c=new RegExp("^[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}$");var d=$("#adminemail").val();if(!a.user.email||a.user.email.trim()==""){$("#admincheckEmail").css("display","inline-block");$("#adminemailLbl").css("display","none");b=false}else if(!c.test(d.toUpperCase())){$("#admincheckEmail").css("display","inline-block");$("#adminemailLbl").css("display","inline-block");b=false}else{$("#admincheckEmail").css("display","none");$("#adminemailLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkSubDomain=function(){var b=true;if($("#admindomainDesc").is(":visible")){if(!a.user.subDomain||a.user.subDomain=="unknown"){$("#admincheckSubDomain").css("display","inline-block");$("#admindomailLabel").css("display","none");b=false}else{$("#admincheckSubDomain").css("display","none");$("#admindomailLabel").css("display","inline-block")}}a.checkFields=a.checkFields&&b};a.checkSubUsage=function(){var b=true;if($("#adminusageDesc").is(":visible")){if(!a.user.subUsage||a.user.subUsage=="unknown"){$("#admincheckSubUsage").css("display","inline-block");$("#adminusageLabel").css("display","none");b=false}else{$("#admincheckSubUsage").css("display","none");$("#adminusageLabel").css("display","inline-block")}}a.checkFields=a.checkFields&&b};a.checkCountry=function(){var b=true;if(!a.user.country||a.user.country=="unknown"||a.user.country==""||a.user.country=="Select your country"){$("#admincheckCountry").css("display","inline-block");$("#admincountryLbl").css("display","none");b=false}else{$("#checkCountry").css("display","none");$("#countryLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.clearReason=function(){if(!a.isLocked){a.user.lockedReason=""}};a.checkIsLocked=function(){if(a.user.lockedReason!=null)a.isLocked=true;else a.isLocked=false};a.checkAndUpdateUserInfo=function(){a.checkFields=true;a.checkUsername();a.checkName();a.checkLastname();a.checkEmail();a.checkDomain();a.checkSubDomain();a.checkUsage();a.checkSubUsage();a.checkCountry();if(!a.isLocked){delete a.user["lockedReason"]}else{if(a.user.lockedReason==null)a.user.lockedReason=""}};a.save=function(){a.checkAndUpdateUserInfo();if(a.checkFields){m();a.user.country=n().toString();if(a.isNew)a.createUser();else a.updateUser()}};function m(){var b="";var c;a.user.roles=[];if(a.availableRoles){a.availableRoles.forEach(function(d){b="#userRole_"+d.id;c=$(b).prop("checked");if(c)a.user.roles.push(d.id)})}}a.createUser=function(){e.createUser(a.user).then(function(b){if(b.status==200){e.getUsersList();ToastManager.success("user creation succeeded.");a.close()}else if(b.data&&b.data.code=="email_not_sent"){e.getUsersList();var c="User "+a.user.username+" has been created, but there was an error while sending an email to user"+". Please contact an administrator. Cannot send email to "+a.user.email;AlertManager.error("User Creation Error",c);a.close()}else if(b.data&&b.data.code=="unauthorized"){e.getUsersList();ToastManager.error("user creation failed. unauthorized")}else{e.getUsersList();ToastManager.error("user creation failed")}},function(a){e.getUsersList();ToastManager.error("user creation failed")})};a.updateUser=function(){e.updateUser(a.user).then(function(b){if(b.status==200){e.getUsersList();ToastManager.success("user update succeeded.");a.close()}else if(b.data&&b.data.code=="email_not_sent"){e.getUsersList();var c="User "+a.user.username+" has been updated, but there was an error while sending an email to user"+". Please contact an administrator. Cannot send email to "+a.user.email;AlertManager.error("User Update Error",c);a.close()}else if(b.data&&b.data.code=="unauthorized"){e.getUsersList();ToastManager.error("user update failed. unauthorized")}else{e.getUsersList();ToastManager.error("user update failed")}},function(a){e.getUsersList();ToastManager.error("user update failed")})};function n(){var b=_.findIndex(a.countries,function(b){return b.name==a.user.country});return a.countries[b]?a.countries[b].id:-1}a.resetFields=function(){a.user.usage="unknown";a.user.domain="unknown";a.user.country="unknown";a.user.username="";a.user.firstname="";a.user.lastname="";a.user.email="";a.user.subDomain="";a.user.subUsage="";a.user.lockedReason="";a.isLocked=false;a.selected=false;i()};a.close=function(){if(a.currentList){for(var b=0;b<a.currentList.length;b++){if(a.currentList[b].uuid==a.currentUuid){a.currentList[b]=a.temp}}}$("#userView").modal("hide")};g()}}}}}]);angular.module("DHuS-webclient").directive("userPassword",["$location","$document","$window","ConfigurationService","AdminUserService",function(a,b,c,d,e){return{restrict:"AE",replace:true,templateUrl:"components/user-password/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){a.username="";a.checkFields=true;AdminUserDetailsManager.setChangeUserPassword(function(b){a.getChangeUserPassword(b)});b.bind("keypress",function(b){if(b.which===13){a.save()}});a.getChangeUserPassword=function(b){a.username=b;a.userpwd="";if(!$("#adminUserPwd").hasClass("in"))$("#adminUserPwd").modal("show")};a.checkPassword=function(){var b=true;var c=/^[a-zA-Z0-9!@#\$%\^\&*\)\(+=._-]+$/g;if(!a.userpwd||a.userpwd.trim()==""){$("#admincheckPwdToChange").css("display","inline-block");$("#admincheckPwdLength").css("display","none");$("#admincheckPasswordNonLatin").css("display","none");b=false}else if(!c.test(a.userpwd)){$("#admincheckPwdToChange").css("display","none");$("#admincheckPwdLength").css("display","none");$("#admincheckPasswordNonLatin").css("display","inline-block");b=false}else if(a.userpwd.trim().length<8){$("#admincheckPwdToChange").css("display","none");$("#admincheckPwdLength").css("display","inline-block");$("#admincheckPasswordNonLatin").css("display","none");b=false}else{$("#admincheckPwdToChange").css("display","none");$("#admincheckPwdLength").css("display","none");$("#admincheckPasswordNonLatin").css("display","none")}a.checkFields=a.checkFields&&b};a.checkAndUpdateUserInfo=function(){a.checkFields=true;a.checkPassword()};a.save=function(){a.checkAndUpdateUserInfo();if(a.checkFields){a.updateUserPassword()}};a.updateUserPassword=function(){e.updateUserPassword(a.username,a.userpwd).then(function(b){if(b.status>=200&&b.status<300){ToastManager.success("user password update succeeded.")}else{ToastManager.error("user password update failed")}a.close()},function(b){ToastManager.error("user password update failed");a.close()})};a.close=function(){$("#adminUserPwd").modal("hide")}}}}}}]);angular.module("DHuS-webclient").directive("synchronizerDetails",["$location","$document","$window","ConfigurationService","ODataSynchronizerService","OdataSynchDetailsManager","OdataModel",function(a,b,c,d,e,f,g){var h=null;return{restrict:"AE",replace:true,templateUrl:"components/synchronizer-details/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){a.synch={};a.checkFields=true;a.isNew=false;a.synch.request="false";f.setOdataSynchDetails(function(b,c){a.getSynchronizerDetails(b,c)});function d(b,c){$("#serviceConfirmPwd").css("display","none");$("#servicePwd").css("display","none");if(c){a.synch={};a.resetFields()}else{h(b)}}function h(b){e.readSynchronizer(b).then(function(b){if(b.status==200){if(b.data&&b.data.d){a.synch.id=b.data.d.Id;a.synch.label=b.data.d.Label;a.synch.serviceUrl=b.data.d.ServiceUrl;a.synch.serviceLoginUsername=b.data.d.ServiceLogin;a.synch.serviceLoginPassword=null;a.confirmPwd=null;a.synch.schedule=b.data.d.Schedule;a.synch.remoteIncoming=b.data.d.RemoteIncoming;a.synch.request=b.data.d.Request;a.synch.pageSize=b.data.d.PageSize;a.synch.copyProduct=b.data.d.CopyProduct;a.synch.filterParam=b.data.d.FilterParam;a.synch.geoFilter=b.data.d.GeoFilter;a.synch.sourceCollection=b.data.d.SourceCollection;if(b.data.d.LastCreationDate)a.synch.lastCreationDate=moment(b.data.d.LastCreationDate).utc().format("YYYY-MM-DDTHH:mm:ss.SSS");a.synch.collections=b.collections;a.synchOld=angular.copy(a.synch)}}else{ToastManager.error("error reading synchronizer details")}},function(a){ToastManager.error("error reading synchronizer details")})}a.getSynchronizerDetails=function(b,c){a.isNew=c;e.collections().then(function(e){var f=[];for(var g=0;g<e.data.d.results.length;g++){f.push(e.data.d.results[g].Name)}a.collectionsName=f;d(b,c);if(!$("#synchDetails").hasClass("in"))$("#synchDetails").modal("show")},function(){d(b,c);if(!$("#synchDetails").hasClass("in"))$("#synchDetails").modal("show")})};a.checkPassword=function(){$("#serviceConfirmPwd").css("display","none");var b=true;if(!a.synch.serviceLoginPassword||a.synch.serviceLoginPassword.trim()==""){if(a.isNew){$("#servicePwd").css("display","inline-block");b=false}}else{$("#servicePwd").css("display","none")}a.checkFields=a.checkFields&&b};a.checkConfirmPassword=function(){var b=true;if(!a.confirmPwd||a.confirmPwd.trim()==""){if(a.synch.serviceLoginPassword!=a.confirmPwd){$("#serviceConfirmPwd").css("display","inline-block");b=false}else{$("#serviceConfirmPwd").css("display","none")}}else{if(a.synch.serviceLoginPassword!=a.confirmPwd){$("#serviceConfirmPwd").css("display","inline-block");b=false}else{$("#serviceConfirmPwd").css("display","none")}}a.checkFields=a.checkFields&&b};a.checkSynchFields=function(){a.checkFields=true;a.checkPassword();a.checkConfirmPassword()};a.save=function(){a.checkSynchFields();if(a.isNew){a.createSynchronizer()}else{a.updateSynchronizer()}};a.createSynchronizer=function(){e.createSynchronizer(a.synch).then(function(b){if(b.status==200||b.status==201||b.status==202||b.status==203||b.status==204){e.synchronizers().then(function(b){var c=b.data.d.results;g.createModel(c,c.length);ToastManager.success("odata synchronizer created");a.close()})}else{ToastManager.error("synchronizer creation failed")}},function(a){ToastManager.error("synchronizer creation failed")})};a.updateSynchronizer=function(){var b=false;if(a.synchOld.collections!=""&&a.synch.collections==""){b=true}e.updateSynchronizer(a.synch.id,a.synch,b).then(function(b){if(b.status==200||b.status==201||b.status==202||b.status==203||b.status==204){e.synchronizers().then(function(b){var c=b.data.d.results;g.createModel(c,c.length);ToastManager.success("odata synchronizer updated");a.close()})}else{ToastManager.error("synchronizer update failed")}},function(a){ToastManager.error("synchronizer update failed")})};a.resetFields=function(){a.synch.label="";a.synch.serviceUrl="";a.synch.serviceLoginUsername="";a.synch.serviceLoginPassword="";a.synch.schedule="";a.synch.remoteIncoming="";a.synch.request="stop";a.synch.collections="";a.synch.pageSize="";a.synch.copyProduct="";a.synch.filterParam="";a.synch.geoFilter="";a.synch.sourceCollection="";a.synch.lastCreationDate="";a.confirmPwd="";$("#serviceConfirmPwd").css("display","none");$("#serviceCPwd").css("display","none")};a.close=function(){$("#synchDetails").modal("hide")}}}}}}]);angular.module("DHuS-webclient").directive("collectionUpload",["$location","$document","$http","AdminCollectionManager",function(a,b,c,d){var e={};$.fn.CollectionUploadTree=function(a,b){var c={selectable:true,deletable:false,editable:false,addable:false,i18n:{deleteNull:"Select a node to delete",deleteConfirmation:"Delete this node?",confirmButtonLabel:"Okay",editNull:"Select a node to edit",editMultiple:"Only one node can be edited at one time",addMultiple:"Select a node to add a new node",collapseTip:"collapse",expandTip:"expand",selectTip:"select",unselectTip:"unselet",editTip:"edit",addTip:"add",deleteTip:"delete",cancelButtonLabel:"cancle"}};var d=$('<div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span> </div> ');var f=$('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span> </div> ');var g=$('<div class="input-group"><input type="text" class="form-control"><span class="input-group-btn"><button type="button" class="btn btn-default btn-success confirm"></button> </span><span class="input-group-btn"><button type="button" class="btn btn-default cancel"></button> </span> </div> ');a=$.extend(c,a);this.each(function(){var b=$(this);if(a.selectable){$(b).find("li > span > a").click(function(d){var e=$(this).parent().parent();if(e.hasClass("li_selected"))$(e).removeClass("li_selected");else{$(b).find("li.li_selected").removeClass("li_selected");$(e).addClass("li_selected")}if(a.deletable||a.editable||a.addable){var f=c(d)}d.stopPropagation()});$(".collection_checkbox").click(function(){this.setAttribute("checked",this.checked)})}var c=function(c){var f=$(b).find("li.li_selected");var h=$(f).firstChild;var i=$(b).find("li.li_selected").attr("nodeid");console.log("nodeid:  ",i);if($(f).attr("loaded")=="false"&&!$(f).find(" span > span").first().hasClass("glyphicon-file")){AdminCollectionTree.getODataCollections(i).then(function(h){if(h.data&&h.data.d&&h.data.d.results){$(f).attr("loaded","true");for(var i=0;i<h.data.d.results.length;i++){var j=h.data.d.results[i];var k="";if(_.indexOf(e,""+j.Name)>=0){k="checked='true'"}var l;if(j.hasChildren){l=$('<li loaded="false" nodeid="'+j.uuid+'"><span nodeid="'+j.uuid+'"><input type="checkbox" '+k+' class="collection_checkbox" ><span class="glyphicon glyphicon-folder-close"></span><a href="javascript: void(0);">'+j.name+"</a></span></li>")}else{l=$('<li loaded="false" nodeid="'+j.uuid+'"><span nodeid="'+j.uuid+'"><input type="checkbox" '+k+' class="collection_checkbox"><span class="glyphicon glyphicon-file"></span><a href="javascript: void(0);">'+j.name+"</a></span></li>")}if(f.length<=0){$(b).find(" > ul").append($(l))}else if(f.length>1){$(b).prepend(d);$(b).find(".alert .alert-content").text(a.i18n.addMultiple)}else{if($(f).hasClass("parent_li")){var m=$(f).find(" > ul > li").attr("nodeid");var n=$(f).find(" > ul > li").map(function(){return $(this).attr("nodeid")}).get();if(_.indexOf(n,""+j.uuid)==-1)$(f).find(" > ul").append(l)}else{var m=$(f).find(" > ul > li").attr("nodeid");var n=$(f).find(" > ul > li").map(function(){return $(this).attr("nodeid")}).get();if(_.indexOf(n,""+j.uuid)==-1){$(f).addClass("parent_li").find(" > span > span").addClass("glyphicon-folder-open").removeClass("glyphicon-folder-close");$(f).append($("<ul></ul>")).find(" > ul").append(l)}}}$(g).find("input").val("");if(a.selectable){$(".collection_checkbox").click(function(){this.setAttribute("checked",this.checked)});c.stopPropagation()}$(g).remove()}}})}else{var j=$(f).find("li");if($(j).is(":visible")){j.hide();var k=$(f).find(" span > span");if(!$(f).find(" span > span").first().hasClass("glyphicon-file")){$(f).find(" span > span").first().addClass("glyphicon-folder-close");$(f).find(" span > span").first().removeClass("glyphicon-folder-open")}}else{j.show();var k=$(f).find(" span > span");if(!$(f).find(" span > span").first().hasClass("glyphicon-file")){$(f).find(" span > span").first().addClass("glyphicon-folder-open");$(f).find(" span > span").first().removeClass("glyphicon-folder-close")}}}return $(b).find("li.li_selected")}})};return{restrict:"AE",replace:true,templateUrl:"components/collection-upload/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){a.collections={};a.isAllSelected=false;d.setSelectedCollectionsIds(function(){return a.getSelectedCollectionsIds()});d.setSelectedCollectionsUUID(function(){return a.getSelectedCollectionsUUID()});c.$observe("collectionsIds",function(b){e=JSON.parse(b);var c=$("#collection-upload-tree");var d=$(c).find("ul > li ");var f=$(d).map(function(){return $(this).attr("nodeid")}).get();var g="";$.each($(c).find("ul > li > span > input"),function(){$($(c).find("ul > li > span > input")).remove();$($(c).find("ul > li > span ")).prepend("<input type='checkbox' class='collection_checkbox' >")});for(var h=0;h<e.length;h++){var i="li[nodeid='"+e[h]+"']";var j=$(i);$($(j).find("> span > input")).remove();$($(j).find("> span ")).prepend("<input type='checkbox' class='collection_checkbox' checked='true' >");$(".collection_checkbox").click(function(){this.setAttribute("checked",this.checked)})}a.isAllSelected=false});a.clearTree=function(){var a=$("#collection-upload-tree");$.each($(a).find("ul > li"),function(){$($(a).find("ul > li")).remove()})};a.getCollections=function(){var b=this;AdminCollectionTree.getODataCollections().then(function(b){a.clearTree();if(b.data&&b.data.d&&b.data.d.results){a.collections=b.data.d.results;if(!b.data.d.results||b.data.d.results.length<=0)return null;for(var c=0;c<b.data.d.results.length;c++){var d=b.data.d.results[c]
;if(d.hasChildren)$("#collection-upload-tree").append("<ul><li loaded='false' nodeuuid='"+d.UUID+"' nodeid='"+d.Name+"'><span nodeuuid='"+d.UUID+"' nodeid='"+d.Name+"'><input type='checkbox' class='collection_checkbox'><span class='glyphicon glyphicon-folder-close'></span><a href='javascript: void(0);''> "+d.Name+"</a></span></li></ul>");else $("#collection-upload-tree").append("<ul><li loaded='false' nodeuuid='"+d.UUID+"' nodeid='"+d.Name+"'><span nodeuuid='"+d.UUID+"' nodeid='"+d.Name+"'><input type='checkbox' class='collection_checkbox'><span class='glyphicon glyphicon-file'></span><a href='javascript: void(0);''> "+d.Name+"</a></span></li></ul>");$("#collection-upload-tree").CollectionUploadTree({addable:true,editable:false,deletable:false},d)}}})};a.node={};a.clearTree();a.getCollections();a.selectDeselectAll=function(b){var c=$("#collection-upload-tree");var d="";a.isAllSelected=b;if(a.isAllSelected)d="checked='true'";$.each($(c).find("ul > li > span > input"),function(){$($(c).find("ul > li > span > input")).remove();$($(c).find("ul > li > span ")).prepend("<input type='checkbox' class='collection_checkbox' "+d+" >");$(".collection_checkbox").click(function(){this.setAttribute("checked",this.checked)})})};a.getSelectedCollectionsIds=function(){var a=[];$(".collection_checkbox").each(function(){if($(this).prop("checked")==true){a.push($(this).parent().attr("nodeid"))}});return a};a.getSelectedCollectionsUUID=function(){var a=[];$(".collection_checkbox").each(function(){if($(this).prop("checked")==true){a.push($(this).parent().attr("nodeuuid"))}});return a}}}}}}]);"use strict";angular.module("DHuS-webclient").directive("systemPanelContainer",["UIUtils","$document","$window","SystemPanelService",function(a,b,c,d){return{restrict:"AE",replace:true,templateUrl:"components/system-panel-container/view.html",model:{},scope:{text:"="},pristineModel:{},compile:function(a,b){var c=this;return{pre:function(a,b,c){},post:function(a,b,c){d.getSystem().then(function(b){a.model.basic=angular.copy(b)});d.getDumpedDatabases().then(function(b){var c=[];for(var d=0;d<b.length;d++){c.push({key:moment.utc(b[d]),value:b[d]})}a.dumpedDatabases=c});a.basicSave=function(){d.basicSave(a.model.basic).success(function(){ToastManager.success("Saved data successfully")}).error(function(){ToastManager.error("Saved data failed")})};a.rootConfigSave=function(){if(!a.model.rootConfig.newPassword||a.model.rootConfig.newPassword==""){a.newPasswordError=true;ToastManager.error("Wrong data");return}else a.newPasswordError=false;if(!a.model.rootConfig.confirmPassword||a.model.rootConfig.confirmPassword==""){a.confirmPasswordError=true;ToastManager.error("Wrong data");return}else a.confirmPasswordError=false;if(a.model.rootConfig.newPassword!=a.model.rootConfig.confirmPassword){a.passwordDoNotMatchError=true;ToastManager.error("Wrong data");return}else a.passwordDoNotMatchError=false;d.rootConfigSave(a.model.rootConfig).success(function(){ToastManager.success("Saved data successfully")}).error(function(a){ToastManager.error("Saved data failed - "+a.code)})};a.checkOldPassword=function(){a.oldPasswordError=a.model.rootConfig.oldPassword==""||a.model.rootConfig.oldPassword==null};a.checkConfirmPassword=function(){a.confirmPasswordError=a.model.rootConfig.confirmPassword==""||a.model.rootConfig.confirmPassword==null;if(a.model.rootConfig.newPassword!=a.model.rootConfig.confirmPassword)a.passwordDoNotMatchError=true;else a.passwordDoNotMatchError=false};a.checkNewPassword=function(){a.newPasswordError=a.model.rootConfig.newPassword==""||a.model.rootConfig.newPassword==null;if(a.model.rootConfig.newPassword!=a.model.rootConfig.confirmPassword)a.passwordDoNotMatchError=true;else a.passwordDoNotMatchError=false};a.rootConfigReset=function(){d.restoreDefaultConfig().then(function(b){a.model.basic=angular.copy(b)})};a.restoreDatabase=function(a){d.restoreDatabase(a).success(function(){ToastManager.success("Restored database successfully")}).error(function(a){ToastManager.error("Restored database failed")})};a.test=function(a){return moment.utc(a)}}}}}}]);angular.module("DHuS-webclient").directive("collectionManagement",["$location","$document","$http","AdminCollectionManager",function(a,b,c,d){var e={};var f={};$.fn.CollectionTree=function(a,b){var c={selectable:true,deletable:false,editable:false,addable:false,i18n:{deleteNull:"Select a node to delete",deleteConfirmation:"Delete this node?",confirmButtonLabel:"Okay",editNull:"Select a node to edit",editMultiple:"Only one node can be edited at one time",addMultiple:"Select a node to add a new node",collapseTip:"collapse",expandTip:"expand",selectTip:"select",unselectTip:"unselet",editTip:"edit",addTip:"add",deleteTip:"delete",cancelButtonLabel:"cancle"}};var d=$('<div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span> </div> ');var e=$('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span> </div> ');var g=$('<div class="input-group"><input type="text" class="form-control"><span class="input-group-btn"><button type="button" class="btn btn-default btn-success confirm"></button> </span><span class="input-group-btn"><button type="button" class="btn btn-default cancel"></button> </span> </div> ');a=$.extend(c,a);this.each(function(){var b=$(this);if(a.selectable){$(b).find("li > span >  a").unbind().click(function(d){var e=$(this).parent().parent();if(e.hasClass("li_selected"))$(e).removeClass("li_selected");else{$(b).find("li.li_selected").removeClass("li_selected");$(e).addClass("li_selected")}if(a.deletable||a.editable||a.addable){var f=c(d);d.stopPropagation()}d.stopPropagation()});$(b).find("li > span > span > a").unbind().click(function(a){var c=$(this).parent().parent().parent();var d=f[$(this).parent().parent().attr("nodeid")];if($(c).hasClass("li_selected")){$(c).removeClass("li_selected");AdminCollectionTree.getCollectionDetails(null)}else{$(b).find("li.li_selected").removeClass("li_selected");$(c).addClass("li_selected");AdminCollectionTree.getCollectionDetails(d)}a.stopPropagation()})}var c=function(e){var h=$(b).find("li.li_selected");var i=$(h).firstChild;var j=$(b).find("li.li_selected").attr("nodeid");if($(h).attr("loaded")=="false"&&!$(h).find(" span > a > span").first().hasClass("glyphicon-file")){AdminCollectionTree.getCollections(j).then(function(i){$(h).attr("loaded","true");for(var j=0;j<i.data.length;j++){var k=i.data[j];f[k.uuid]=k;var l;if(k.hasChildren){l=$('<li loaded="false" nodeid="'+k.uuid+'"><span nodeid="'+k.uuid+'"><span class="glyphicon glyphicon-folder-close"></span>&nbsp;<span><a href="javascript: void(0);" class="collname"> '+k.name+"</a></span></span></li>")}else{l=$('<li loaded="false" nodeid="'+k.uuid+'"><span nodeid="'+k.uuid+'"><span class="glyphicon glyphicon-file"></span>&nbsp;<span><a href="javascript: void(0);" class="collname"> '+k.name+"</a></span></span></li>")}if(h.length<=0){$(b).find(" > ul").append($(l))}else if(h.length>1){$(b).prepend(d);$(b).find(".alert .alert-content").text(a.i18n.addMultiple)}else{if($(h).hasClass("parent_li")){var m=$(h).find(" > ul > li").attr("nodeid");var n=$(h).find(" > ul > li").map(function(){return $(this).attr("nodeid")}).get();if(_.indexOf(n,""+k.uuid)==-1)$(h).find(" > ul").append(l)}else{var m=$(h).find(" > ul > li").attr("nodeid");var n=$(h).find(" > ul > li").map(function(){return $(this).attr("nodeid")}).get();if(_.indexOf(n,""+k.uuid)==-1){$(h).addClass("parent_li").find("span > a > span").addClass("glyphicon-folder-open").removeClass("glyphicon-folder-close");$(h).append($("<ul></ul>")).find(" > ul").append(l)}}}$(g).find("input").val("");if(a.selectable){$(l).find(" > span >  a").unbind().click(function(d){var e=$(this).parent().parent();if($(e).hasClass("li_selected")){$(e).removeClass("li_selected")}else{$(b).find("li.li_selected").removeClass("li_selected");$(e).addClass("li_selected")}if(a.deletable||a.editable||a.addable){var f=c(d);d.stopPropagation()}d.stopPropagation()});$(l).find(" > span > span > a").unbind().click(function(a){var c=$(this).parent().parent().parent();var d=f[$(this).parent().parent().attr("nodeid")];if(c.hasClass("li_selected")){$(c).removeClass("li_selected");AdminCollectionTree.getCollectionDetails(null)}else{$(b).find("li.li_selected").removeClass("li_selected");$(c).addClass("li_selected");AdminCollectionTree.getCollectionDetails(d)}a.stopPropagation()});e.stopPropagation()}$(g).remove()}})}else{var k=$(h).find("li");if($(k).is(":visible")){k.hide();var l=$(h).find(" span > a > span");if(!$(h).find(" span > a > span").first().hasClass("glyphicon-file")){$(h).find(" span > a > span").first().addClass("glyphicon-folder-close");$(h).find(" span > a > span").first().removeClass("glyphicon-folder-open")}}else{k.show();var l=$(h).find(" span > a > span");if(!$(h).find(" span > a > span").first().hasClass("glyphicon-file")){$(h).find(" span > a > span").first().addClass("glyphicon-folder-open");$(h).find(" span > a > span").first().removeClass("glyphicon-folder-close")}}}return $(b).find("li.li_selected")}})};return{restrict:"AE",replace:true,templateUrl:"components/collection-management/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){d.setCollectionTree(function(){a.getCollections()});a.clearTree=function(){var a=$("#collection-management-tree");$.each($(a).find("ul > li"),function(){$($(a).find("ul > li")).remove()})};a.getCollections=function(){var b=this;AdminCollectionTree.getCollections().then(function(b){a.clearTree();if(!b.data||b.data.length<=0)return null;for(var c=0;c<b.data.length;c++){var d=b.data[c];f[d.uuid]=d;if(d.hasChildren)$("#collection-management-tree").append("<ul><li loaded='false' nodeid='"+d.uuid+"'><span nodeid='"+d.uuid+"'><span class='glyphicon glyphicon-folder-close'></span>&nbsp;<span><a href='javascript: void(0);' class='collname'> "+d.name+"</a></span></span></li></ul>");else $("#collection-management-tree").append("<ul><li loaded='false' nodeid='"+d.uuid+"'><span nodeid='"+d.uuid+"'><span class='glyphicon glyphicon-file'></span>&nbsp;<span><a href='javascript: void(0);' class='collname'> "+d.name+"</a></span></span></li></ul>");$("#collection-management-tree").CollectionTree({addable:true,editable:false,deletable:false},d)}$("#collection-management-tree").hide().fadeIn("fast")})};a.node={};a.clearTree();a.getCollections()}}}}}]);"use strict";angular.module("DHuS-webclient").directive("managementCollections",["UIUtils","$document","$window","AdminCollectionManager","$route",function(a,b,c,d,e){var f="#coll-page-label-id",g="#coll-page-count-id",h="#coll-page-num-id",i="#btn-create-collection",j="#btn-createchild-collection",k="#btn-reset-collection",l="#btn-save-collection",m="#btn-update-collection",n="#btn-delete-collection",o="#btn-cancel-collection";var p=function(){a.responsiveLayout(function a(){$(f).css("display","none");$(h).css("display","none");$(g).css("display","none")},function a(){$(f).css("display","none");$(h).css("display","none");$(g).css("display","none")},function a(){$(f).css("display","inline-block");$(h).css("display","inline-block");$(g).css("display","inline-block")},function a(){$(f).css("display","inline-block");$(h).css("display","inline-block");$(g).css("display","inline-block")})};var q=function(a){$(i).show();$(k).hide();if(a){$(m).show();$(l).hide();$(n).show();$(o).show()}else{$(m).hide();$(l).hide();$(n).hide();$(o).hide()}};return{restrict:"AE",replace:true,templateUrl:"components/management-collections/view.html",scope:{text:"="},compile:function(a,e){var f=this;return{pre:function(a,c,d){setTimeout(function(){angular.element(b).ready(p)},0)},post:function(a,e,f){angular.element(b).ready(p);angular.element(c).bind("resize",p);a.collectionCount=0;a.details={};AdminCollectionTree.setCollectionDetails(function(b){a.getCollectionDetails(b)});a.getCollectionDetails=function(b){if(b){q(true);a.details=angular.copy(b)}else{}d.getCollectionDetails(a.details);d.getCollectionProducts(a.details)};a.create=function(b){d.resetProductIds();if(b){var c={};c.parent={};c.parent.uuid=a.details.uuid;c.parent.name=a.details.name;c.parent.description=a.details.description;c.parent.deep=a.details.deep;c.parent.hasChildren=a.details.hasChildren;d.getCollectionDetails(c,true);d.getCollectionProducts(c,true)}else{d.getCollectionDetails({},true);d.getCollectionProducts({},true)}a.resetButton(true)};a.addCollection=function(){a.create()};a.resetButton=function(a){if(a){$(n).hide();$(k).show();$(i).hide();$(j).hide();$(l).show();$(m).hide();$(o).show()}else{q()}};a.updateCollection=function(){a.details=d.getDetailsFromComponent();a.details.addedIds=d.getAddedIdsFromComponent();a.details.removedIds=d.getRemovedIdsFromComponent();d.updateCollection(a.details).then(function(b){var c=parseInt(b.status);if(c>=200&&c<300){ToastManager.success("Collection Update Succeeded");a.details={};d.getCollectionTree()}else{ToastManager.error("Collection Update Failed")}a.resetButton();AdminCollectionTree.getCollectionDetails(null)},function(b){ToastManager.error("Collection Update Failed");a.resetButton();AdminCollectionTree.getCollectionDetails(null)});a.details.addedIds.splice(0,a.details.addedIds.length)};a.saveCollection=function(){a.details={};a.details.addedIds=[];a.details=d.getDetailsFromComponent(true);a.details.addedIds=d.getAddedIdsFromComponent();d.createCollection(a.details).then(function(b){var c=parseInt(b.status);if(c>=200&&c<300){a.details.addedIds.splice(0,a.details.addedIds.length);ToastManager.success("Collection Creation Succeeded");d.getCollectionTree();a.details={}}else{ToastManager.error("Collection Creation Failed")}a.resetButton();AdminCollectionTree.getCollectionDetails(null)},function(b){ToastManager.error("Collection Creation Failed");a.resetButton();AdminCollectionTree.getCollectionDetails(null)});a.details.addedIds.splice(0,a.details.addedIds.length)};a.reset=function(){q();AdminCollectionTree.getCollectionDetails(null)};a.resetFields=function(){var a=d.getDetailsFromComponent();a.name="";a.description="";d.getCollectionDetails(a,true)};a.deleteCollection=function(){var b=a.details=d.getDetailsFromComponent();var c=confirm("Delete "+b.name+" collection?");if(c){d.removeCollection(b.uuid).then(function(b){var c=parseInt(b.status);if(c>=200&&c<300){ToastManager.success("Collection Deletion Succeeded");d.getCollectionTree()}else{ToastManager.error("Collection Deletion Failed")}a.resetButton();AdminCollectionTree.getCollectionDetails(null)},function(b){ToastManager.error("Collection Deletion Failed");a.resetButton();AdminCollectionTree.getCollectionDetails(null)})}else{$(o).focus()}};function g(){q()}g()}}}}}]);angular.module("DHuS-webclient").directive("collectionDetails",["$location","$document","$window","AdminCollectionManager",function(a,b,c,d){var e=null;return{restrict:"AE",replace:true,templateUrl:"components/collection-details/view.html",scope:{text:"="},compile:function(a,b){return{pre:function(a,b,c){},post:function(a,b,c){a.collection={};a.details={};a.disableField=true;a.performSearch=true;d.setCollectionDetails(function(b,c){a.getCollectionDetails(b,c)});d.setDetailsFromComponent(function(b){return a.getDetailsFromComponent(b)});function e(){}function f(){}a.getCollectionDetails=function(b,c){a.collection=b;a.details=b;if(b&&b.name||c){a.disableField=false}else{a.disableField=true}a.performSearch=false;$("#coll-detail-name").blur()};a.getDetailsFromComponent=function(b){var c={};c.name=a.collection.name;c.description=a.collection.description;c.hasChildren=false;c.addedIds=a.collection.addedIds;if(b){if(!a.collection.parent){c.deep=1}else{c.parent=a.collection.parent;c.deep=a.collection.parent.deep+1}}else{c.deep=a.collection.deep;c.uuid=a.collection.uuid;c.parent=a.collection.parent}return c};a.checkName=function(){if(!a.performSearch){a.performSearch=true;return}var b=true;if(!a.collection.name||a.collection.name.trim()==""){$("#collcheckName").css("display","inline-block");$("#collNameLbl").css("display","none");b=false}else{$("#collcheckName").css("display","none");$("#collNameLbl").css("display","inline-block")}a.checkFields=a.checkFields&&b};a.checkAndUpdateCollectionInfo=function(){a.checkFields=true;a.checkName()};a.save=function(){a.checkAndUpdateCollectionInfo();if(a.checkFields){}};a.resetFields=function(){a.collection.name="";a.collection.description="";a.collection.uuid=""};f()}}}}}]);"use strict";angular.module("DHuS-webclient").directive("collectionProducts",["UIUtils","$document","$window","SearchService","AdminCollectionManager","$q",function(a,b,c,d,e,f){var g="#coll-product-per-page-label",h="#coll-page-label-id";var i=function(){a.responsiveLayout(function a(){$(g).css("display","none");$(h).css("display","none")},function a(){$(g).css("display","none");$(h).css("display","none")},function a(){$(g).css("display","inline-block");$(h).css("display","inline-block")},function a(){$(g).css("display","inline-block");$(h).css("display","inline-block")})};return{showList:false,restrict:"AE",replace:true,templateUrl:"components/collection-products/view.html",scope:{text:"="},compile:function(a,g){var h=this;return{pre:function(a,c,d){a.products={};setTimeout(function(){angular.element(b).ready(i)},0)},post:function(a,g,j){angular.element(b).ready(i);angular.element(c).bind("resize",i);a.details={};a.details.productIds=[];var k=[];var l=[];a.currentPageCache=1;h.productsPerPagePristine=true;h.currentPagePristine=true;h.visibleListPristine=true;a.productCount=0;a.currentPage=1;a.productsPerPage="25";a.offset=0;a.filter="";a.disableField=true;a.performSearch=true;a.selectedAll=false;e.setCollectionProducts(function(b,c){a.getCollectionProducts(b,c)});e.setAddedIdsFromComponent(function(){return a.getAddedIdsFromComponent()});e.setRemovedIdsFromComponent(function(){return a.getRemovedIdsFromComponent()});e.resetProductIds(function(){return a.resetProductIds()});a.getCollectionProducts=function(b,c){a.details=b;a.$apply();a.selectedAll=false;$("#product-list-all-checkbox").prop("checked",false);if(b&&b.name||c){a.disableField=false}else{a.disableField=true}if(a.details&&a.details.productIds&&a.details.productIds.length==a.productCount){$("#product-list-all-checkbox").prop("checked",true);a.selectedAll=true}a.performSearch=false;$("#coll-product-search").blur()};a.isChecked=function(b){if(a.details&&a.details.productIds&&_.indexOf(a.details.productIds,b.id)>=0){return true}else{return false}};a.resetProductIds=function(){k.splice(0,k.length)};a.checkUncheckAll=function(){a.details.productIds=[];k=[];l=[];var b="*";a.selectedAll=!a.selectedAll;if(a.filter.trim()!=""){b=a.filter}d.getAllCollectionProducts(b,a.offset,a.productCount).then(function(){angular.forEach(d.collectionAllProductsModel.list,function(b){if(a.selectedAll){a.details.productIds.push(b.id);k.push(b.id)}else{l.push(b.id)}})})};a.getAddedIdsFromComponent=function(){return k};a.getRemovedIdsFromComponent=function(){return l};a.goToPage=function(b,c){var e="*";if(b<=a.pageCount&&b>0||c){a.currentPage=b;a.offset=b*a.productsPerPage-a.productsPerPage;if(a.filter.trim()!=""){e=a.filter}return d.getCollectionProductsList(e,a.offset,a.productsPerPage).then(function(){k=[];l=[];a.refreshCounters();a.currentPageCache=b;a.currentPage=b;a.products=d.collectionProductsModel.list;if(a.details&&a.details.productIds&&a.details.productIds.length==a.productCount){$("#product-list-all-checkbox").prop("checked",true);a.selectedAll=true}else{a.selectedAll=false;$("#product-list-all-checkbox").prop("checked",false)}})}else{var g=f.defer();return g.promise}};a.refreshCounters=function(){a.productCount=d.collectionProductsModel.count;a.pageCount=Math.floor(d.collectionProductsModel.count/a.productsPerPage)+(d.collectionProductsModel.count%a.productsPerPage?1:0);a.visualizedProductsFrom=d.collectionProductsModel.count?a.offset+1:0;a.visualizedProductsTo=(d.collectionProductsModel.count?a.currentPage*a.productsPerPage:1)>a.productCount?a.productCount:d.collectionProductsModel.count?a.currentPage*a.productsPerPage:1};a.updateValue=function(){if(this.productsPerPagePristine){this.productsPerPagePristine=false;return}a.goToPage(1,true)};a.addRemoveProduct=function(b){if(a.isChecked(b)){var c=a.details.productIds.indexOf(b.id);if(c>=0)a.details.productIds.splice(c,1);c=k.indexOf(b.id);if(c>=0)k.splice(c,1);l.push(b.id)}else{k.push(b.id);if(!a.details.productIds)a.details.productIds=[];a.details.productIds.push(b.id);var c=l.indexOf(b.id);if(c>=0)l.splice(c,1)}};var m=function(){var b=parseInt(a.currentPage);if(isNaN(b)||!/^\d+$/.test(a.currentPage)){a.$apply(function(){a.currentPage=a.currentPageCache});return}if(b<=0){a.$apply(function(){a.currentPage=a.currentPageCache});return}if(b>a.pageCount){a.$apply(function(){a.currentPage=a.currentPageCache});return}a.goToPage(a.currentPage,true)};$("#coll-product-page-selector").bind("enterKey",function(a){m()});$("#coll-product-page-selector").focusout(function(a){m()});$("#coll-product-page-selector").keyup(function(a){if(a.keyCode==13){$(this).trigger("enterKey")}});$("#coll-product-search").bind("enterKey",function(b){a.goToPage(1,true)});$("#coll-product-search").keyup(function(a){if(a.keyCode==13){$(this).trigger("enterKey")}});a.currentPage=1;a.gotoFirstPage=function(){a.goToPage(1,false)};a.gotoPreviousPage=function(){a.goToPage(a.currentPageCache-1,false)};a.gotoNextPage=function(){a.goToPage(a.currentPageCache+1,false)};a.gotoLastPage=function(){a.goToPage(a.pageCount,false)};a.selectPageDidClicked=function(a){};a.goToPage(1,true)}}}}}]);"use strict";angular.module("DHuS-webclient").factory("ODataEvictionService",["$http","$q",function(a,b){var c={model:null,evictionsUrl:"odata/v2/Evictions",evictionUrl:"odata/v2/Evictions(':name')",collectionsUrl:"odata/v1/Collections",formatParameter:"$format=json",requestHeaders:{"Content-Type":"application/json",Accept:"application/json"},getEvictionList:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.evictionsUrl+"?"+b.formatParameter,method:"GET",headers:b.requestHeaders})},collections:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.collectionsUrl+"?$select=Name&"+b.formatParameter,method:"GET",headers:b.requestHeaders})},updateEviction:function(b,c){var d=this;return a({url:ApplicationConfig.baseUrl+d.evictionUrl.replace(":name",b),method:"PATCH",data:c,headers:d.requestHeaders})},stopEviction:function(b,c){var d=this;return a({url:ApplicationConfig.baseUrl+d.evictionUrl.replace(":name",b),method:"PATCH",data:c,headers:d.requestHeaders})},startEviction:function(b,c){var d=this;return a({url:ApplicationConfig.baseUrl+d.evictionUrl.replace(":name",b),method:"PATCH",data:c,headers:d.requestHeaders})},deleteEviction:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.evictionUrl.replace(":name",b),method:"DELETE"})},createEviction:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.evictionsUrl,method:"POST",data:b})},readEviction:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.evictionUrl.replace(":name",b)+"?"+c.formatParameter,method:"GET"})}};return c}]);"use strict";angular.module("DHuS-webclient").factory("EvictionModel",function(){return{model:{list:[]},evictionsCount:0,createModel:function(a,b){if(a)this.model.list=a;else this.model.list=[];this.evictionsCount=a.length}}});"use strict";var AlertManager={success:function(){},error:function(){},warning:function(){},forceLogout:function(){},setSuccess:function(a){this.success=a},setError:function(a){this.error=a},setWarn:function(a){this.warn=a},setInfo:function(a){this.info=a},setForceLogout:function(a){this.forceLogout=a}};"use strict";angular.module("DHuS-webclient").factory("AuthenticationService",["$q","$injector","SearchModel","UserService","AdvancedFilterService","AdvancedSearchService",function(a,b,c,d,e,f){var d=b.get("UserService");return{logged:false,basicAuth:"",loginUrl:"/login",logoutUrl:"/logout",odataAuthTest:function(){var a=this;http({url:ApplicationConfig.baseUrl+"odata/v1/",headers:{Authorization:"Basic "+a.basicAuth}})},login:function(a,b,c){var d=this;return http({url:ApplicationConfig.baseUrl+d.loginUrl,method:"POST",contentType:"application/x-www-form-urlencoded",data:$.param({login_username:a,login_password:b}),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+window.btoa(a+":"+b)}})},showLogin:function(){},setLoginMethod:function(a){this.showLogin=a},clearSearchFilters:function(){var a=b.get("SearchService");a.clearSearchInput();a.clearGeoSelection();e.clearAdvancedFilter();f.clearAdvFilter()},logout:function(){var a=b.get("Session");var d=this;d.basicAuth="";d.logged=false;a.removeSession();c.createModel([]);d.clearSearchFilters();$(document).trigger("closeSession");return http({url:ApplicationConfig.baseUrl+d.logoutUrl,method:"POST"})},refresh:function(){window.location.reload(true)}}}]);"use strict";angular.module("DHuS-webclient").factory("Session",["$q","$http","UserService","AuthenticationService","UserInfoService","$rootScope",function(a,b,c,d,e,f){var g={expiration_date:"",username:""};var h=300;var i="ajs-session";var j=function(){var a="test";try{localStorage.setItem(a,a);localStorage.removeItem(a);return true}catch(a){return false}};var k=j();var l={getSessionDurationMinutes:function(){return session_duration_minutes},getSessionUsername:function(){if(k)var a=localStorage.getItem(i);if(a&&JSON.parse(a).username){return JSON.parse(a).username}return null},setSessionUsername:function(a){if(k){var b=localStorage.getItem(i);if(b==null||b==undefined)b=_.clone(g);else b=JSON.parse(b);b.username=a;localStorage.setItem(i,JSON.stringify(b))}},loadUserModel:function(){var a=this.getSessionUsername();c.getODataUser(a).then(function(a){c.setUserModel(a);c.setUserRolesModel(a)})},updateSession:function(){if(k){var a=moment();var b=a.add(h,"minutes");var c=localStorage.getItem(i);if(c==null||c==undefined)c=_.clone(g);else c=JSON.parse(c);c.expiration_date=b.format("YYYY-MM-DDTHH:mm:ss");localStorage.setItem(i,JSON.stringify(c))}},isSessionExpired:function(){if(k){var a=localStorage.getItem(i);if(a==null||a==undefined)a=_.clone(g);else a=JSON.parse(a);var b=moment(a.expiration_date);var c=moment();return c.isAfter(b)}return true},isSessionPresent:function(){if(!k){return false}var a=localStorage.getItem(i)!=null;return a},removeSession:function(){c.model=null;if(k){localStorage.removeItem(i)}},serverLogout:function(){d.logout()},isUserLoggedOnServer:function(){var a=this.getSessionUsername();return b({url:ApplicationConfig.baseUrl+"odata/v1",method:"HEAD",bypassCheck:true}).then(function(a){if(a.status==200)return true;else return false})},setUserLoggedIn:function(){d.logged=true},setUserLoggedOut:function(){setTimeout(function(){d.logged=false;window.location.replace("#/home")})},checkSession:function(){var b=this;if(!this.isSessionPresent()){var c=a.defer();c.resolve(false);b.removeSession();return c.promise}if(this.isSessionExpired()){this.serverLogout();this.removeSession();var c=a.defer();c.resolve(false);return c.promise}this.updateSession();return this.isUserLoggedOnServer().then(function(a){if(a){b.setUserLoggedIn();b.loadUserModel();e.userInfo.isLogged=true;return true}else{d.logged=false;b.removeSession();return false}})}};return l}]);"use strict";angular.module("DHuS-webclient").factory("AdvancedSearchService",["$q","$injector",function(a,b){return{model:{hidden:true},advFilter:"",setAdvancedSearchFilter:function(a,b){var c="";if(b.sensingPeriodFrom&&b.sensingPeriodTo){c+="( beginPosition:["+this.formatDateFrom_(a.sensingPeriodFrom)+" TO "+this.formatToDate(a.sensingPeriodTo)+"] AND endPosition:["+this.formatDateFrom_(a.sensingPeriodFrom)+" TO "+this.formatDateTo_(a.sensingPeriodTo)+"] )"}else if(b.sensingPeriodFrom){c+="( beginPosition:["+this.formatDateFrom_(a.sensingPeriodFrom)+" TO NOW] AND endPosition:["+this.formatDateFrom_(a.sensingPeriodFrom)+" TO NOW] )"}else if(b.sensingPeriodTo){c+="( beginPosition:[ * TO "+this.formatDateTo_(a.sensingPeriodTo)+"] AND endPosition:[* TO "+this.formatToDate(a.sensingPeriodTo)+" ] )"}if(b.ingestionFrom&&b.ingestionTo){c+=(c?" AND":"")+"( ingestionDate:["+this.formatDateFrom_(a.ingestionFrom)+" TO "+this.formatDateTo_(a.ingestionTo)+" ] )"}else if(b.ingestionFrom){c+=(c?" AND":"")+"( ingestionDate:["+this.formatDateFrom_(a.ingestionFrom)+" TO NOW] )"}else if(b.ingestionTo){c+=(c?" AND":"")+"( ingestionDate:[ * TO "+this.formatDateTo_(a.ingestionTo)+" ] )"}if(b.sortFilter){c+=(c?" AND ":"")+a.sortFilter}this.advFilter=c},getAdvancedSearchFilter:function(){return this.advFilter},getAdvancedSearchForSave:function(a){var b={};if(a.sensingFrom){b["sensingDate"]=a.sensingFrom}if(a.sensingTo){b["sensingDateEnd"]=a.sensingTo}if(a.ingestionFrom){b["ingestionDate"]=a.ingestionFrom}if(a.ingestionTo){b["ingestionDateEnd"]=a.ingestionTo}return b},formatDateFrom_:function(a){var b=new Date(a);var c=b.toISOString();return c},formatDateTo_:function(a){var b=new Date(a);b.setUTCHours(23);b.setUTCMinutes(59);b.setUTCSeconds(59);b.setUTCMilliseconds(999);return b.toISOString()},formatDate:function(a){var b=new Date(a);var c=b.toISOString();return c},formatToDate:function(a){var b=new Date(a);b.setUTCHours(23);b.setUTCMinutes(59);b.setUTCSeconds(59);b.setUTCMilliseconds(999);return b.toISOString()},show:function(){},hide:function(){},setShow:function(a){this.show=a},setHide:function(a){this.hide=a},clearAdvFilter:function(){},setClearAdvFilter:function(a){this.clearAdvFilter=a}}}]);"use strict";angular.module("DHuS-webclient").factory("AdvancedFilterService",function(){return{missionFilter:"",setAdvancedFilter:function(a){var b="";for(var c=0;c<a.length;c++){if(a[c].selected){b=b+" OR ("+a[c].indexname+":"+a[c].indexvalue;for(var d=0;d<a[c].filters.length;d++){if(a[c].filters[d].indexvalue&&a[c].filters[d].indexvalue.trim()!=""){if(a[c].filters[d].indexname&&a[c].filters[d].indexname.trim()!=""){b=b+" AND "+a[c].filters[d].indexname+":"+a[c].filters[d].indexvalue}else{b=b+" AND "+a[c].filters[d].indexvalue}}}b=b+")"}}b=b.replace("OR","");this.missionFilter=b},getAdvancedFilter:function(){return this.missionFilter},clearAdvancedFilter:function(){},setClearAdvancedFilter:function(a){this.clearAdvancedFilter=a}}});(function(){"use strict"})();angular.module("DHuS-webclient").factory("CartMenuService",["$q","$injector",function(a,b){return{model:{hidden:true},show:function(){},hide:function(){},setShow:function(a){this.show=a},setHide:function(a){this.hide=a}}}]);"use strict";angular.module("DHuS-webclient").factory("SearchService",["$q","$http","SearchModel","ProductCartService","AuthenticationService",function(a,b,c,d,e){return{textQuery:"",geoselection:"",advancedFilter:"",missionFilter:"",sortedby:"",sortedName:"",order:"",orderName:"",offset:0,limit:25,filterContext:{doneRequest:"",sensingPeriodFrom:"",sensingPeriodTo:"",ingestionFrom:"",ingestionTo:"",sortFilter:""},collectionProductsModel:{list:[],count:0},collectionAllProductsModel:{list:[]},search_max_length:5e3,goToPage:function(){},getTextQuery:function(){return this.textQuery},setTextQuery:function(a){this.textQuery=a},setSortedBy:function(a){this.sortedby=a},getSortedBy:function(){return this.sortedby},setSortedName:function(a){this.sortedName=a},getSortedName:function(a){return this.sortedName},setOrder:function(a){this.order=a},getOrder:function(){return this.order},setOrderName:function(a){this.orderName=a},getOrderName:function(a){return this.orderName},setGeoselection:function(a){this.geoselection=a},setAdvancedFilter:function(a){this.advancedFilter=a},setMissionFilter:function(a){this.missionFilter=a},setOffset:function(a){this.offset=a},setLimit:function(a){this.limit=a},setErrorMessage:function(a){this.error_message=a},setErrorTitle:function(a){
this.error_title=a},setSearchMaxLength:function(a){this.search_max_length=a},setInvalidGeometryMessage:function(a){this.invalid_geometry_message=a?a:"This geometry is not yet supported. Please try with a different one."},getGeoQueryByCoordsOld:function(a){if(!a)return;var b='(footprint:"Intersects(POLYGON((';for(var c=0;c<a.length;c++)b+=a[c].lon+" "+a[c].lat+(c!=a.length-1?",":"");b+=')))")';return b},createSearchRequest:function(a,b,c,d,e){var f="api/stub/products?filter=:filter&offset=:offset&limit=:limit&sortedby=:sortedby&order=:order";f=f.replace(":filter",a?a:"*");f=f.replace(":offset",b?b:"0");f=f.replace(":limit",c?c:"10");f=f.replace(":sortedby",d?d:"ingestiondate");f=f.replace(":order",e?e:"desc");this.doneRequest=a;return f},createSearchFilter:function(a,b,c,d){var e="";if(a)e+=a;if(b)e+=(a?" AND ":"")+this.getGeoQueryByCoords(b);if(c)e+=(a||b?" AND ":"")+c;if(d)e+=(a||b||c?" AND ":"")+"("+d+")";return e},saveUserSearch:function(b,c,d,f){var g="",h=this;g=this.createSearchFilter(b,c,d,f);var i="api/stub/users/0/searches?complete=:complete";i=i.replace(":complete",g?g:"*");return http({url:ApplicationConfig.baseUrl+i,method:"POST"}).then(function(a){return a.status==200?a:[]},function(b){if(b.status==401){e.refresh();var c=a.defer();c.resolve(false)}else ToastManager.error("Save user search operation failed")})},clearSearchInput:function(){},setClearSearchInput:function(a){this.clearSearchInput=a},clearGeoSelection:function(){},setClearGeoSelection:function(a){this.clearGeoSelection=a},search:function(f){var g=this;var h="";if(f)h=g.createSearchFilter(f,"","","");else h=g.createSearchFilter(g.textQuery,g.geoselection,g.advancedFilter,g.missionFilter);var i=ApplicationConfig.baseUrl+g.createSearchRequest(h,g.offset,g.limit,g.sortedby,g.order);if(i.length>g.search_max_length){AlertManager.error("Error processing request","Your request cannot be processed by the server because exceeds the allowed length of "+g.search_max_length+" characters.");return}return b({url:i,method:"GET"}).then(function(a){c.model.count=a.data.totalresults;c.model.list=a.data.products;d.getIdsInCart().success(function(a){c.model.cartids=a;c.createModel(c.model)}).error(function(){AlertManager.error("Error while retrieving cart");c.createModel(c.model)})},function(b){switch(b.status){case 401:e.refresh();var c=a.defer();c.resolve(false);break;case 400:var d=g.error_title?g.error_title:"Invalid request";var f=g.error_message?g.error_message:"Your request cannot be processed by the server. Please check the request's parameters.";AlertManager.error(d,f);break;case 412:var d=g.error_title?g.error_title:"Invalid request";var f=g.invalid_geometry_message?g.invalid_geometry_message:"This geometry is not yet supported. Please try with a different one.";AlertManager.error(d,f);break;default:AlertManager.error("Error retrieving products","Your request cannot be processed by the server. Please check the request's parameters.")}})},gotoPage:function(a){this.setOffset(a*this.limit-this.limit);return this.search()},getSuggestions:function(a){var b="search/suggest/"+a;return http({url:ApplicationConfig.baseUrl+b,method:"GET"}).then(function(a){return a.status==200?a.data:[]})},getGeoQueryByCoords:function(a){return a},getCollectionProductsList:function(c,d,e){var f=this;return b({url:ApplicationConfig.baseUrl+f.createSearchRequest(c,d,e),method:"GET"}).then(function(a){f.collectionProductsModel.list=a.data.products;f.collectionProductsModel.count=a.data.totalresults},function(b){switch(b.status){case 401:var c=a.defer();c.resolve(false);break;case 400:var d=f.error_title?f.error_title:"Invalid request";var e=f.error_message?f.error_message:"Your request cannot be processed by the server. Please check the request's parameters.";AlertManager.error(d,e);break;default:AlertManager.error("Error retrieving products","Your request cannot be processed by the server. Please check the request's parameters.")}})},getAllCollectionProducts:function(a,c,d){var e=this;return b({url:ApplicationConfig.baseUrl+e.createSearchRequest(a,c,d),method:"GET"}).then(function(a){e.collectionAllProductsModel.list=a.data})}}}]);"use strict";angular.module("DHuS-webclient").factory("SavedSearchModel",["Logger",function(a){var b={create:"createdSavedSearchModel",delete:"deletedSavedSearchModel",update:"updatedSavedSearchModel",hilight:"productDidHighlighted",nohilight:"productDidntHighlighted"};return{model:{list:[],count:0},subscribers:[],createModel:function(a){this.model.list=a.list;this.model.count=a.count;var b=[];for(var c=0;c<this.subscribers.length;c++){b.push(this.subscribers[c])}for(var d=0;d<b.length;d++){if(b[d].id&&b[d].id=="listItem"){this.unsub(b[d])}}b=null;this.pub("create")},readModel:function(){a.log("saved-search-model-service","readModel()");return this.model},updateModel:function(b){a.log("saved-search-model-service","updateModel()")},deleteModel:function(){a.log("saved-search-model-service","deleteModel()")},getProductIndexByID:function(a){var b=this;var c=_.findIndex(b.model.list,function(b){return b.id==a});return c},getProductByIndex:function(a){var b=this.model.list[a];return b},getProductByID:function(a){var b=this.getProductIndexByID(a);var c=this.getProductByIndex(b);return c},highlightProduct:function(a){var b=this.getProductIndexByID(a.id);this.model.list[b].highlight=true;this.pub("hilight",a)},nohighlightProduct:function(a){var b=this.getProductIndexByID(a.id);this.model.list[b].highlight=false;this.pub("nohilight",a)},sub:function(a){this.subscribers.push(a)},unsub:function(a){this.subscribers.splice(this.subscribers.indexOf(a),1)},pub:function(a,c){var d=this;for(var e=0;e<d.subscribers.length;e++){if(typeof d.subscribers[e][b[a]]=="function")d.subscribers[e][b[a]](c)}}}}]);"use strict";angular.module("DHuS-webclient").factory("SavedSearchService",["$http","SavedSearchModel",function(a,b){return{textQuery:"",geoselection:"",advancedFilter:"",offset:0,limit:25,setOffset:function(a){this.offset=a},setLimit:function(a){this.limit=a},gotoPage:function(a){this.setOffset(a*this.limit-this.limit);return this.getSavedSearches(this.offset,this.limit)},getSavedSearches:function(a,c){var d=this;return d.getUserSearchCount().then(function(e){b.model.count=e.data;return d.getUserSearches(c,a).then(function(a){b.model.list=a.data;b.createModel(b.model)})})},getUserSearchCount:function(){var a=this;return http({url:ApplicationConfig.baseUrl+"api/stub/users/0/searches/count",method:"GET"})},getUserSearches:function(a,b){var c="api/stub/users/0/searches?offset=:offset&count=:count";c=c.replace(":offset",b?b:"0");c=c.replace(":count",a?a:"25");var d=this;return http({url:ApplicationConfig.baseUrl+c,method:"GET"})},clearUserSearches:function(){var a=this;return http({url:ApplicationConfig.baseUrl+"api/stub/users/0/searches",method:"DELETE"})},removeSavedSearch:function(a){var b=this;return http({url:ApplicationConfig.baseUrl+"api/stub/users/0/searches/0?id="+a,method:"DELETE"})},updateNotificationStatus:function(a,b){var c=this;return http({url:ApplicationConfig.baseUrl+"api/stub/users/0/searches/0?id="+a+"&notify="+b,method:"POST"})}}}]);"use strict";var SpinnerManager={counter:0,on:function(){},off:function(){},setOn:function(a){this.on=a},setOff:function(a){this.off=a}};"use strict";var ToastManager={success:function(){},error:function(){},warning:function(){},info:function(){},setSuccess:function(a){this.success=a},setError:function(a){this.error=a},setWarn:function(a){this.warn=a},setInfo:function(a){this.info=a}};"use strict";angular.module("DHuS-webclient").factory("UserService",["$http","$q",function(a,b){return{model:null,signUpUrl:"api/stub/signup",userRequestUrl:"api/stub/users/0",signup:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.signUpUrl,method:"POST",contentType:"application/json",data:JSON.stringify(b)})},getUser:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.userRequestUrl,method:"GET"}).then(function(a){b.model=a.data;return a.data},function(a){switch(a.status){case 401:location.reload();return{};break;default:AlertManager.error("ERROR")}})},getCollectionProductsList:function(c,d,e){var f=this;return a({url:ApplicationConfig.baseUrl+f.createSearchRequest(c,d,e),method:"GET"}).then(function(a){f.collectionProductsModel.list=a.data.products;f.collectionProductsModel.count=a.data.totalresults},function(a){switch(a.status){case 401:var c=b.defer();c.resolve(false);break;case 400:var d=f.error_title?f.error_title:"Invalid request";var e=f.error_message?f.error_message:"Your request cannot be processed by the server. Please check the request's parameters.";AlertManager.error(d,e);break;default:AlertManager.error("Error retrieving products","Your request cannot be processed by the server. Please check the request's parameters.")}})},getODataUser:function(c){var d=this;if(d.model){var e=b.defer();e.resolve(d.model);return e.promise}else{return a({url:ApplicationConfig.baseUrl+"odata/v1/Users('"+c+"')?$format=json&$expand=SystemRoles",method:"GET"}).then(function(a){if(a.status==200){return a.data}else return{}})}},getODataUserRoles:function(c){var d=this;if(d.model&&d.model.roles){var e=b.defer();e.resolve(d.model.roles);return e.promise}else{return a({url:ApplicationConfig.baseUrl+"odata/v1/Users('"+c+"')/SystemRoles?$format=json",method:"GET"}).then(function(a){if(a.status==200){return a.data}else return{}})}},setUserModel:function(a){var b=this;if(a&&a.d){b.model={};b.model.username=a.d.Username;b.model.password=a.d.Password;b.model.firstname=a.d.FirstName;b.model.lastname=a.d.LastName;b.model.email=a.d.Email;b.model.domain=a.d.Domain;b.model.subDomain=a.d.SubDomain;b.model.usage=a.d.Usage;b.model.subUsage=a.d.SubUsage;b.model.country=a.d.Country}},setUserRolesModel:function(a){var b=this;if(a&&a.d&&a.d.SystemRoles&&a.d.SystemRoles.results){if(b.model){var c=[];for(var d=0;d<a.d.SystemRoles.results.length;d++){c.push(a.d.SystemRoles.results[d].Name)}b.model.roles=c}}},getUserModel:function(){return this.model},refreshModel:function(){var a=this;this.getUser().then(function(b){a.model=b})},updateUser:function(b,c,d){var e=this;e.model=b;return a({url:ApplicationConfig.baseUrl+e.userRequestUrl,method:"PUT",contentType:"application/json",data:{user:b,pm:c},headers:{"Content-Type":"application/json",Accept:"application/json"}})},retrievePassword:function(b,c){var d=this;return a({url:ApplicationConfig.baseUrl+"api/stub/forgotpwd",method:"POST",contentType:"application/json",data:JSON.stringify(b),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(a){return a.data})},checkUserCodeForPasswordReset:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+"api/stub/usercode?code="+b,method:"GET"})},resetPassword:function(b,c){var d=this;var e=encodeURIComponent(c).replace(/[!'()]/g,escape).replace(/\*/g,"%2A");return a({url:ApplicationConfig.baseUrl+"api/stub/resetpwd?code="+b+"&password="+e,method:"POST"})}}}]);"use strict";angular.module("DHuS-webclient").factory("SearchModel",["Logger","StyleService",function(a,b){var c={create:"createdSearchModel",delete:"deletedSearchModel",update:"updatedSearchModel","product-selected":"productDidSelected","product-deselected":"productDidDeSelected",hilight:"productDidHighlighted",nohilight:"productDidntHighlighted","single-product-selected":"singleProductDidSelected","clear-map":"clearMap"};var d=null;var e={default_style:"",selected_style:"",highlighted_style:""};var f={model:{list:[],cartids:[],count:0,isMultiselectionEnabled:false},subscribers:[],init:function(){var a=this;var b=17;$(document).on("keydown",function(c){if(c.keyCode==b){a.model.isMultiselectionEnabled=true}});$(document).on("keyup",function(c){if(c.keyCode==b){a.model.isMultiselectionEnabled=false}})},createModel:function(a){if(!d)d=b.getDHuSStyles();this.model.list=a.list;this.model.count=a.count;this.model.cartids=a.cartids;var c=this&&this.model&&this.model.list&&this.model.list.length;for(var e=0;e<c;e++){if(_.contains(this.model.cartids,this.model.list[e].id))this.model.list[e].isincart=true;else this.model.list[e].isincart=false;var f=b.getStyleFromProduct(this.model.list[e]);this.model.list[e].default_style=f.default_style;this.model.list[e].selected_style=f.selected_style;this.model.list[e].highlighted_style=f.highlighted_style;this.model.list[e].label_style=f.label_style;this.model.list[e].instrlabel_style=f.instrlabel_style}var g=[];for(var h=0;h<this.subscribers.length;h++){g.push(this.subscribers[h])}for(var i=0;i<g.length;i++){if(g[i].id&&g[i].id=="listItem"){this.unsub(g[i])}}g=null;this.pub("create")},readModel:function(){a.log("search-model-service","readModel()");return this.model},OnSelectionChange:function(){var a=this;return a.counterSelected()},setOnSelectionChange:function(a){this.OnSelectionChange=a},countSelected:function(){var a=this;var b=0;if(a.model.list!=undefined){for(var c=0;c<a.model.list.length;c++){if(a.model.list[c].selected){b=b+1}}return b}},updateModel:function(b){a.log("search-model-service","updateModel()")},deleteModel:function(){a.log("search-model-service","deleteModel()")},getProductIndexByUUID:function(a){var b=this;var c=_.findIndex(b.model.list,function(b){return b.uuid==a});return c},getProductByIndex:function(a){var b=this.model.list[a];return b},getProductByUUID:function(a){var b=this.getProductIndexByUUID(a);var c=this.getProductByIndex(b);return c},selectSingleProduct:function(a){console.warn("160 searchModelService WARNING! DELETED selectSingleProduct, reactivate if you see this message",a)},selectProduct:function(a){var b=this;var c=this.getProductIndexByUUID(a.uuid);b.model.list[c].selected=true;this.pub("product-selected",a)},deselectProduct:function(a){var b=this;var c=this.getProductIndexByUUID(a.uuid);if(b.model.list!=undefined&&b.model.list[c]!=undefined){b.model.list[c].selected=false;this.pub("product-deselected",a)}},deselectAll:function(a){var b=this;for(var c=0;b.model.list&&c<b.model.list.length;c++)b.model.list[c].selected=false;b.pub("product-selected",a)},highlightProduct:function(a){var b=this;var c=this.getProductIndexByUUID(a.uuid);if(b.model.list!=undefined&&b.model.list[c]!=undefined){b.model.list[c].highlight=true;this.pub("hilight",a)}},nohighlightProduct:function(a){var b=this;var c=this.getProductIndexByUUID(a.uuid);if(b.model.list!=undefined&&b.model.list[c]!=undefined){b.model.list[c].highlight=false;this.pub("hilight",a)}},getSelectedStyle:function(a){var b;var c=a;var d=c.getFill();var e=d.getColor();e[3]=.6;d.setColor(e);b=new ol.style.Style({fill:new ol.style.Fill({color:e}),stroke:c.getStroke()});return b},getHighlightedStyle:function(a){var b;var c=a;var d=c.getFill();var e=d.getColor();e[3]=.6;d.setColor(e);b=new ol.style.Style({fill:d,stroke:c.getStroke()});return b},clearMap:function(){this.pub("clear-map")},sub:function(a){this.subscribers.push(a)},unsub:function(a){this.subscribers.splice(this.subscribers.indexOf(a),1)},pub:function(a,b){var d=this;for(var e=0;e<d.subscribers.length;e++){if(typeof d.subscribers[e][c[a]]=="function")d.subscribers[e][c[a]](b)}}};f.init();return f}]);(function(){"use strict"})();angular.module("DHuS-webclient").factory("CartModel",["CartStatusService","StyleService",function(a,b){var c={"clear-map":"clearMap",create:"createdCartModel",update:"updatedCartModel",delete:"deletedCartModel",EventHighlight:"OnHighlight",EventResetUi:"OnResetUi",EventSelectProduct:"OnSelectProduct",EventDeselectCurrentProduct:"OnDeselectCurrentProduct"};var d=null;var e={default_style:"",selected_style:"",highlighted_style:""};return{model:{list:[],count:0},subscribers:[],createModel:function(a,c,e){if(!d)d=b.getDHuSStyles();this.model.list=a;this.model.count=c;this.model.hasProducts=e>0?true:false;for(var f=0;f<this.model.list.length;f++){var g=b.getStyleFromProduct(this.model.list[f]);this.model.list[f].default_style=g.default_style;this.model.list[f].selected_style=g.selected_style;this.model.list[f].highlighted_style=g.highlighted_style;this.model.list[f].label_style=g.label_style;this.model.list[f].instrlabel_style=g.instrlabel_style}var h=[];for(var i=0;i<this.subscribers.length;i++)h.push(this.subscribers[i]);for(var j=0;j<h.length;j++)if(h[j].id&&h[j].id=="cartItem")this.unsub(h[j]);h=null;this.pub("create")},readModel:function(){return this.model},updateModel:function(a){},deleteModel:function(){},getProductIndexByUUID:function(a){var b=this;return _.findIndex(b.model.list,function(b){return b.uuid==a})},getProductByIndex:function(a){return this.model.list[a]},getProductByUUID:function(a){return this.getProductByIndex(this.getProductIndexByUUID(a))},callEventHighlightProduct:function(a){var b=this;var c=b.getProductIndexByUUID(a.uuid);b.model.list[c].highlight=true;b.pub("EventHighlight",a)},callEventSelectProduct:function(b){var c=this;if(a.getCartFootprints()==true){var d=c.getProductIndexByUUID(b.uuid);if(c.model.list[d].selected==true)return;for(var e=0;e<c.model.list.length;e++)c.model.list[e].selected=false;c.model.list[d].selected=true;c.pub("EventSelectProduct",b)}else{}},callEventDeselectCurrentProduct:function(a){var b=this;var c=b.getProductIndexByUUID(a.uuid);b.model.list[c].selected=false;b.pub("EventDeselectCurrentProduct",a)},callEventResetUi:function(a){var b=this;var c=b.getProductIndexByUUID(a.uuid);b.model.list[c].highlight=false;b.pub("EventResetUi",a)},deselectAll:function(a){var b=this;for(var c=0;b.model.list&&c<b.model.list.length;c++)b.model.list[c].selected=false;b.pub("EventSelectProduct",a)},sub:function(a){this.subscribers.push(a)},unsub:function(a){this.subscribers.splice(this.subscribers.indexOf(a),1)},pub:function(a,b){var d=this;for(var e=0;e<d.subscribers.length;e++)if(typeof d.subscribers[e][c[a]]=="function")d.subscribers[e][c[a]](b)}}}]);"use strict";angular.module("DHuS-webclient").factory("ProductListService",function(){return{scrollToItem:function(a){var b=angular.element(a).position().top+$("#product-list").scrollTop();$("#product-list").animate({scrollTop:b})}}});"use strict";var ProductService={getNode:function(a){var b=this;return http({url:a.replace(new RegExp("'","g"),"%27")+"Nodes",method:"GET"})},getElement:function(a){return http({url:a,type:"GET"})},removeProduct:function(a,b){var c=b?"?cause="+b:"";return http({url:ApplicationConfig.baseUrl+"odata/v1/Products('"+a+"')"+c,method:"DELETE"})},getGranule:function(a){return http({url:ApplicationConfig.baseUrl+a,method:"GET"})},getTCI:function(a){return http({url:ApplicationConfig.baseUrl+a,method:"HEAD"})},getProductHeader:function(a){return http({url:a,method:"HEAD"})},getProduct:function(a){return http({url:a,method:"GET"})},getLTAProduct:function(a){return http({url:a,method:"POST"})},getOrder:function(a){var b={};b.id=a.Id;b.status=a.Status;b.estimatedTime=a.EstimatedTime;b.submissionTime=a.SubmissionTime;b.statusMessage=a.StatusMessage;return b},submitOnDemandRequest:function(a){return http({url:ApplicationConfig.baseUrl+"odata/v2/Products('"+a+"')/OData.DHuS.TransformProduct",method:"POST",contentType:"application/json",data:JSON.stringify({TransformerName:"L2AOnDemand"}),headers:{"Content-Type":"application/json",Accept:"application/json"}})},getProductOut:function(a){return http({url:ApplicationConfig.baseUrl+"odata/v2/Transformations('"+a+"')/Product?$select=Id,Name",method:"GET",contentType:"application/json",headers:{"Content-Type":"application/json",Accept:"application/json"}})}};"use strict";"use strict";angular.module("DHuS-webclient").factory("ProductCartService",["$http","CartModel","Logger","AuthenticationService",function(a,b,c,d){return{cartRequestUrl:"api/stub/users/0/carts/0?offset=:offset&count=:count",removeProductUrl:"api/stub/users/0/cart/0/removeproduct?productId=:productId",clearCartUrl:"api/stub/users/0/cart/0/clear",addProductToCartUrl:"api/stub/users/0/cart/0/addproduct?productId=:productId",getCartsIdsUrl:"api/stub/users/0/cart/0/getcartids",odataReqUrl:"odata/v1/",removeTransformationFromCartUrl:"api/stub/users/0/transformations/:transformationId",offset:0,limit:25,setOffset:function(a){this.offset=a},setLimit:function(a){this.limit=a},gotoPage:function(a){this.setOffset(a*this.limit-this.limit);return this.getCart()},createCartRequest:function(a,b){var c=this;a=a?a:"0";b=b?b:"25";var d=angular.copy(c.cartRequestUrl);d=d.replace(":offset",a);d=d.replace(":count",b);return d},getCart:function(){c.log("cart","sent ajax request to get cart");var e=this;return a({url:ApplicationConfig.baseUrl+e.createCartRequest(e.offset,e.limit),method:"GET"}).then(function(a){b.model.count=a.data.totalresults;b.createModel(a.data.products,b.model.count,a.data.totalproducts)},function(a){if(a.status==401){d.refresh();var c=$q.defer();c.resolve(false);return}else b.createModel([],0,0)})},removeProductFromCart:function(b){var c=this;return a({url:(ApplicationConfig.baseUrl+c.removeProductUrl).replace(":productId",b),method:"POST"})},clearCart:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.clearCartUrl,method:"POST"})},addProductToCart:function(b){var c=this;return a({url:(ApplicationConfig.baseUrl+c.addProductToCartUrl).replace(":productId",b),method:"POST"})},getIdsInCart:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.getCartsIdsUrl})},removeTransformationFromCart:function(b){var c=this;return a({url:(ApplicationConfig.baseUrl+c.removeTransformationFromCartUrl).replace(":transformationId",b),method:"POST"})}}}]);"use strict";var UserDetailsManager={getUserDetails:function(){},setUserDetails:function(a){this.getUserDetails=a}};"use strict";angular.module("DHuS-webclient").factory("ODataSynchronizerService",["$http","$timeout","$q",function(a,b,c){return{url:"odata/v1/Synchronizers",collectionsUrl:"odata/v1/Collections",jsonParameter:"$format=json",requestHeaders:{"Content-Type":"application/atom+xml",Accept:"application/json"},_generateBodyFromModel:function(a){return'<entry xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://www.w3.org/2005/Atom">         <title type="text">Synchronizer</title>         <category term="DHuS.Synchronizer" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" /> '+(a.collections&&a.collections!=""?'<link rel="http://schemas.microsoft.com/ado/2007/08/dataservices/related/TargetCollection" type="application/atom+xml;type=entry" title="TargetCollection" href="Collections(\''+a.collections+"')\" />":"")+'<content type="application/xml">             <m:properties>                 <d:Label>'+a.label+"</d:Label>                 <d:ServiceUrl>"+a.serviceUrl+"</d:ServiceUrl>                 <d:ServiceLogin>"+a.serviceLoginUsername+"</d:ServiceLogin> "+(a.serviceLoginPassword&&a.serviceLoginPassword!=""?"<d:ServicePassword>"+a.serviceLoginPassword+"</d:ServicePassword> ":"")+"<d:Schedule>"+a.schedule+"</d:Schedule> "+(a.remoteIncoming&&a.remoteIncoming!=""?"<d:RemoteIncoming>"+a.remoteIncoming+"</d:RemoteIncoming> ":"")+"<d:Request>"+a.request+"</d:Request> "+(a.copyProduct&&a.copyProduct!=""?"<d:CopyProduct>"+a.copyProduct+"</d:CopyProduct> ":"")+(a.filterParam&&a.filterParam!=""?"<d:FilterParam>"+a.filterParam+"</d:FilterParam> ":'<d:FilterParam m:null="true" />')+(a.geoFilter&&a.geoFilter!=""?"<d:GeoFilter>"+a.geoFilter+"</d:GeoFilter> ":'<d:GeoFilter m:null="true" />')+(a.sourceCollection&&a.sourceCollection!=""?"<d:SourceCollection>"+a.sourceCollection+"</d:SourceCollection> ":'<d:SourceCollection m:null="true" />')+(a.lastCreationDate&&a.lastCreationDate!=""?"<d:LastCreationDate>"+a.lastCreationDate+"</d:LastCreationDate> ":"")+(a.pageSize&&a.pageSize!=""?"<d:PageSize>"+a.pageSize+"</d:PageSize> ":"")+"</m:properties>         </content>       </entry>"},collections:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.collectionsUrl+"?$select=Name&"+b.jsonParameter,method:"GET",headers:b.requestHeaders})},synchronizers:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.url+"?"+b.jsonParameter,method:"GET",headers:b.requestHeaders})},createSynchronizer:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.url,method:"POST",data:c._generateBodyFromModel(b),headers:c.requestHeaders})},readSynchronizer:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.url+"("+b+"L)?"+c.jsonParameter,method:"GET",headers:c.requestHeaders}).then(function(d){d.collections="";return a({url:ApplicationConfig.baseUrl+c.url+"("+b+"L)/TargetCollection",method:"GET",headers:c.requestHeaders}).then(function(a){d.collections=a.data.d["Name"];return d},function(){return d})})},updateSynchronizer:function(b,c,d){var e=this;return a({url:ApplicationConfig.baseUrl+e.url+"("+b+"L)",method:"PUT",data:e._generateBodyFromModel(c),headers:e.requestHeaders}).then(function(d){if(false){var f=ApplicationConfig.baseUrl+e.url+"("+b+"L)/TargetCollection";return a({url:f,method:"DELETE",data:e._generateBodyFromModel(c),headers:e.requestHeaders}).then(function(a){return a})}else{return d}})},deleteSynchronizer:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.url+"("+b+"L)",method:"DELETE",headers:c.requestHeaders})}}}]);"use strict";angular.module("DHuS-webclient").factory("UserModel",["Logger",function(a){var b={create:"createdUserModel",delete:"deletedUserModel",update:"updatedUserModel",hilight:"productDidHighlighted",nohilight:"productDidntHighlighted"};return{model:{list:[],count:0},subscribers:[],createModel:function(a,b){this.model.list=a;this.model.count=b;var c=[];for(var d=0;d<this.subscribers.length;d++){c.push(this.subscribers[d])}for(var e=0;e<c.length;e++){if(c[e].id&&c[e].id=="listItem"){this.unsub(c[e])}}c=null;this.pub("create")},readModel:function(){return this.model},updateModel:function(a){},deleteModel:function(){},getUserIndexByID:function(a){var b=this;var c=_.findIndex(b.model.list,function(b){return b.uuid==a});return c},getUserByIndex:function(a){var b=this.model.list[a];return b},getUserByID:function(a){var b=this.getUserIndexByID(a);var c=this.getUserByIndex(b);return c},highlightProduct:function(a){var b=this.getUserIndexByID(a.uuid);this.model.list[b].highlight=true;this.pub("hilight",a)},nohighlightProduct:function(a){var b=this.getUserIndexByID(a.uuid);this.model.list[b].highlight=false;this.pub("nohilight",a)},sub:function(a){this.subscribers.push(a)},unsub:function(a){this.subscribers.splice(this.subscribers.indexOf(a),1)},pub:function(a,c){var d=this;for(var e=0;e<d.subscribers.length;e++){if(typeof d.subscribers[e][b[a]]=="function")d.subscribers[e][b[a]](c)}}}}]);"use strict";angular.module("DHuS-webclient").factory("OdataModel",function(){return{model:{list:[]},synchronizerCount:0,createModel:function(a,b){var c=[],d=this;if(a&&a.length)for(var e=0;e<a.length;e++)c.push({id:a[e].Id,label:a[e].Label,date:moment(a[e].CreationDate).utc().format("YYYY-MM-DD HH.mm.ss"),status:a[e].Status,serviceUrl:a[e].ServiceUrl,serviceLoginUsername:a[e].ServiceLogin,serviceLoginPassword:a[e].ServicePassword,schedule:a[e].Schedule,remoteIncoming:a[e].RemoteIncoming,copyProduct:a[e].CopyProduct,lastCreationDate:moment(a[e].LastCreationDate).utc().format("YYYY-MM-DD HH.mm.ss"),filterParam:a[e].FilterParam,geoFilter:a[e].GeoFilter,sourceCollection:a[e].SourceCollection});this.model.list=c;this.synchronizerCount=c.length}}});"use strict";"use strict";angular.module("DHuS-webclient").factory("AdminUserService",["$http","UserModel","Logger",function(a,b,c){return{userlistRequestUrl:"api/stub/admin/users?filter=:filter&offset=:offset&limit=:count",usersCountRequestUrl:"api/stub/admin/users/count?filter=:filter",editRemoveUserRequestUrl:"api/stub/admin/users/:userid",createUserRequestUrl:"api/stub/admin/users",getCountriesUrl:"api/stub/countries",updatePasswordUrl:"odata/v1/Users(':username')",jsonParameter:"$format=json",requestHeaders:{"Content-Type":"application/atom+xml",Accept:"application/json"},filter:"",offset:0,limit:25,setOffset:function(a){this.offset=a},setLimit:function(a){this.limit=a},setFilter:function(a){this.filter=a},gotoPage:function(a){this.setOffset(a*this.limit-this.limit);return this.getUsersList()},createUserListRequest:function(a,b,c){var d=this;d.offset=b?b:"0";d.count=c?c:"25";d.filter=a?a:"";var e=angular.copy(d.userlistRequestUrl);e=e.replace(":offset",d.offset);e=e.replace(":count",d.count);e=e.replace(":filter",d.filter);return e},getUsersList:function(){var c=this;return c.getUsersCount().then(function(d){if(d.data){b.model.count=d.data.count?d.data.count:0;return a({url:ApplicationConfig.baseUrl+c.createUserListRequest(c.filter,c.offset,c.limit),method:"GET"}).then(function(a){b.createModel(a.data,b.model.count)})}})},removeUser:function(b){var c=this;return a({url:(ApplicationConfig.baseUrl+c.editRemoveUserRequestUrl).replace(":userid",b),method:"DELETE"}).then(function(a){return a},function(a){return a})},getUsersCount:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.usersCountRequestUrl.replace(":filter",b.filter),method:"GET"})},createUser:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.createUserRequestUrl,method:"POST",contentType:"application/json",data:JSON.stringify(b),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(a){return a},function(a){return a})},updateUser:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.editRemoveUserRequestUrl.replace(":userid",b.uuid),method:"PUT",contentType:"application/json",data:JSON.stringify(b),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(a){return a},function(a){return a})},getCountries:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.getCountriesUrl,method:"GET"})},_generateBodyFromModel:function(a){return'<entry xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://www.w3.org/2005/Atom">         <title type="text">User</title>         <category term="DHuS.User" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"/>         <content type="application/xml">             <m:properties>                 <d:Password>'+a+"</d:Password>"+"</m:properties>         </content>       </entry>"},updateUserPassword:function(b,c){var d=this;return a({url:ApplicationConfig.baseUrl+d.updatePasswordUrl.replace(":username",b),method:"PUT",data:d._generateBodyFromModel(c),headers:d.requestHeaders}).then(function(a){return a})}}}]);var AdminUserDetailsManager={getUserDetails:function(){},setUserDetails:function(a){this.getUserDetails=a},getChangeUserPassword:function(){},setChangeUserPassword:function(a){this.getChangeUserPassword=a}};angular.module("DHuS-webclient").factory("OdataSynchDetailsManager",["Logger",function(a){return{getOdataSynchDetails:function(){},setOdataSynchDetails:function(a){this.getOdataSynchDetails=a}}}]);var EvictionDetailsManager={getEvictionDetails:function(){},setEvictionDetails:function(a){this.getEvictionDetails=a}};ol.control.LayerSwitcher=function(a){var b=a||{};var c=b.tipLabel?b.tipLabel:"Legend";this.mapListeners=[];this.hiddenClassName="ol-unselectable ol-control layer-switcher";this.shownClassName=this.hiddenClassName+" shown";var d=document.createElement("div");d.className=this.hiddenClassName;var e=document.createElement("span");e.setAttribute("title",c);e.setAttribute("class","fab-layer toggle-layers-button dhus-button");var f='<svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;">';var g='<g id="layers"><path d="M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"/></g>';var h="</svg>";e.innerHTML=f+g+h;d.appendChild(e);this.panel=document.createElement("div");this.panel.className="panel2";d.appendChild(this.panel);var i=this;e.onclick=function(a){i.showPanel()};this.panel.onblur=function(a){a=a||window.event;if(!d.contains(a.toElement)){
i.hidePanel()}};ol.control.Control.call(this,{element:d,target:b.target})};ol.inherits(ol.control.LayerSwitcher,ol.control.Control);ol.control.LayerSwitcher.prototype.showPanel=function(){if(this.element.className!=this.shownClassName){this.element.className=this.shownClassName;this.renderPanel()}};ol.control.LayerSwitcher.prototype.hidePanel=function(){if(this.element.className!=this.hiddenClassName){this.element.className=this.hiddenClassName}};ol.control.LayerSwitcher.prototype.renderPanel=function(){this.ensureTopVisibleBaseLayerShown_();while(this.panel.firstChild){this.panel.removeChild(this.panel.firstChild)}var a=document.createElement("ul");this.panel.appendChild(a);this.renderLayers_(this.getMap(),a)};ol.control.LayerSwitcher.prototype.setMap=function(a){for(var b=0,c;b<this.mapListeners.length;b++){this.getMap().unByKey(this.mapListeners[b])}this.mapListeners.length=0;ol.control.Control.prototype.setMap.call(this,a);if(a){var d=this;this.mapListeners.push(a.on("pointerdown",function(){d.hidePanel()}));this.renderPanel()}};ol.control.LayerSwitcher.prototype.ensureTopVisibleBaseLayerShown_=function(){var a;ol.control.LayerSwitcher.forEachRecursive(this.getMap(),function(b,c,d){if(b.get("type")==="base"&&b.getVisible()){a=b}});if(a)this.setVisible_(a,true)};ol.control.LayerSwitcher.prototype.setVisible_=function(a,b){var c=this.getMap();a.setVisible(b);if(b&&a.get("type")==="base"){ol.control.LayerSwitcher.forEachRecursive(c,function(b,c,d){if(b!=a&&b.get("type")==="base"){b.setVisible(false)}})}};ol.control.LayerSwitcher.prototype.renderLayer_=function(a,b){var c=this;var d=document.createElement("li");var e=a.get("title");var f=a.get("title").replace(" ","-")+"_"+b;var g=document.createElement("label");var h=document.createElement("input");if(a.get("type")==="base"){h.type="radio";h.name="base"}else{h.type="checkbox"}h.id=f;h.checked=a.get("visible");h.onchange=function(b){c.setVisible_(a,b.target.checked)};d.appendChild(h);g.htmlFor=f;g.innerHTML=e;d.appendChild(g);return d};ol.control.LayerSwitcher.prototype.renderLayers_=function(a,b){var c=a.getLayers().getArray().slice().reverse();for(var d=0,e;d<c.length;d++){e=c[d];if(e.get("title")){b.appendChild(this.renderLayer_(e,d))}}};ol.control.LayerSwitcher.forEachRecursive=function(a,b){a.getLayers().forEach(function(a,c,d){b(a,c,d);if(a.getLayers){ol.control.LayerSwitcher.forEachRecursive(a,b)}})};var AdminCollectionTree={getCollections:function(a){if(!a){return http({url:ApplicationConfig.baseUrl+"api/stub/admin/collections",method:"GET"})}else{return http({url:ApplicationConfig.baseUrl+"api/stub/admin/collections/"+a+"/collections",method:"GET"})}},getODataCollections:function(a){if(!a){return http({url:ApplicationConfig.baseUrl+"odata/v1/Collections?$format=json",method:"GET"})}else{return http({url:ApplicationConfig.baseUrl+"odata/v1/Collections("+a+")/Collections?$format=json",method:"GET"})}},getCollectionDetails:function(){},setCollectionDetails:function(a){this.getCollectionDetails=a}};angular.module("DHuS-webclient").factory("AdminCollectionManager",["$http",function(a){return{collectionCreateUrl:"api/stub/admin/collections",collectionUpdateDeleteUrl:"api/stub/admin/collections/:id",collectionProductsUrl:"api/stub/admin/collections/:id/products",getSelectedCollectionsIds:function(){},setSelectedCollectionsIds:function(a){this.getSelectedCollectionsIds=a},getSelectedCollectionsUUID:function(){},setSelectedCollectionsUUID:function(a){this.getSelectedCollectionsUUID=a},getCollectionDetails:function(){},setCollectionDetails:function(a){this.getCollectionDetails=a},getCollectionProducts:function(){},setCollectionProducts:function(a){this.getCollectionProducts=a},getDetailsFromComponent:function(){},setDetailsFromComponent:function(a){this.getDetailsFromComponent=a},getAddedIdsFromComponent:function(){},setAddedIdsFromComponent:function(a){this.getAddedIdsFromComponent=a},getRemovedIdsFromComponent:function(){},setRemovedIdsFromComponent:function(a){this.getRemovedIdsFromComponent=a},getCollectionTree:function(){},setCollectionTree:function(a){this.getCollectionTree=a},resetProductIds:function(a){this.resetProductIds=a},createCollection:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.collectionCreateUrl,method:"POST",contentType:"application/json",data:JSON.stringify(b),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(a){return a},function(a){return a})},updateCollection:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.collectionUpdateDeleteUrl.replace(":id",b.uuid),method:"PUT",contentType:"application/json",data:JSON.stringify(b),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(a){return a},function(a){return a})},removeCollection:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.collectionUpdateDeleteUrl.replace(":id",b),method:"DELETE"}).then(function(a){return a},function(a){return a})}}}]);"use strict";angular.module("DHuS-webclient").factory("AdminUploadService",["$http","Logger",function(a,b){return{filescannerRequestUrl:"odata/v2/Scanners?$expand=Collections",filescannerCreateRequestUrl:"odata/v2/Scanners",scannerUrl:"odata/v2/Scanners(:fsid)",linkCollectionUrl:"odata/v2/Scanners(:fsid)/Collections/$ref",filescannerUpdateDeleteRequestUrl:"odata/v2/Scanners(:fsid)",filescannerStarStoptUrl:"odata/v2/Scanners(:fsid)",fsCollectionUpdate:"odata/v1/Scanners(:fsid)/$links/Collections",fsCollectionDelete2:"odata/v2/Scanners(:fsid)/Collections(':coll')/$ref",collectionsUrl:"odata/v2/Collections",defaultHeaders:{"Content-Type":"application/json",Accept:"application/json"},getFileScanners:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.filescannerRequestUrl,contentType:"application/json",method:"GET",headers:b.defaultHeaders})},getOneFileScanner:function(b){var c=this;return a({url:(ApplicationConfig.baseUrl+c.scannerUrl).replace(":fsid",b),contentType:"application/json",method:"GET",headers:c.defaultHeaders})},createFileScanner:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.filescannerCreateRequestUrl,method:"POST",data:b,headers:c.defaultHeaders}).then(function(a){return a},function(a){return a})},updateFileScanner:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.filescannerUpdateDeleteRequestUrl.replace(":fsid",b.Id),method:"PUT",contentType:"application/json",data:JSON.stringify(b),headers:c.defaultHeaders}).then(function(a){return a},function(a){return a})},removeFileScanner:function(b){var c=this;return a({url:(ApplicationConfig.baseUrl+c.filescannerUpdateDeleteRequestUrl).replace(":fsid",b),method:"DELETE"}).then(function(a){return a},function(a){return a})},startFileScanner:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.filescannerStarStoptUrl.replace(":fsid",b)+"/OData.DHuS.StartScanner",method:"POST",contentType:"application/json",data:JSON.stringify({}),headers:c.defaultHeaders}).then(function(a){console.log("startFileScanner response",a);return a},function(a){console.log("startFileScanner response: ",a);return a})},stopFileScanner:function(b,c){console.log("stopFileScanner",b);var d=this;return a({url:ApplicationConfig.baseUrl+d.filescannerStarStoptUrl.replace(":fsid",b)+"/OData.DHuS.StopScanner",method:"POST",contentType:"application/json",data:JSON.stringify({}),headers:d.defaultHeaders}).then(function(a){console.log("stopFileScanner response",a);return a},function(a){console.log("stopFileScanner response: ",a);return a})},getAllCollections:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.collectionsUrl,contentType:"application/json",method:"GET",headers:b.defaultHeaders})},addCollectionsToFS:function(b,c){var d=this;return a({url:ApplicationConfig.baseUrl+d.linkCollectionUrl.replace(":fsid",b),method:"POST",contentType:"application/json",data:JSON.stringify(c),headers:d.defaultHeaders}).then(function(a){return a},function(a){return a})},removeCollectionsToFS:function(b,c){var d=this;return a({url:(ApplicationConfig.baseUrl+d.fsCollectionDelete2).replace(":fsid",b).replace(":coll",c),method:"DELETE",contentType:"application/json",headers:d.defaultHeaders}).then(function(a){return a},function(a){return a})},uploadProduct:function(b,c){var d=new FormData;d.append("product",b);d.append("collections",c);return a({url:ApplicationConfig.baseUrl+"/api/upload",method:"POST",data:d,transformRequest:angular.identity,headers:{"Content-Type":undefined}}).then(function(a){return a},function(a){return a})},getFileScannersCount:function(){console.log("getting file scanner count");var b=this;return a({url:ApplicationConfig.baseUrl+b.filescannerCountRequestUrl,method:"GET"})}}}]);"use strict";angular.module("DHuS-webclient").factory("SystemPanelService",["$http","$q",function(a,b){var c={model:null,systemUrl:"api/stub/admin/system/configurations",basicConfigUrl:"api/stub/admin/system/configurations",defaultConfigUrl:"api/stub/admin/system/defaultconfigurations",rootConfigUrl:"api/stub/admin/system/rootpassword",dumpedDatabasesUrl:"api/stub/admin/system/dumpdatabases",restoreDatabaseUrl:"api/stub/admin/system/database",getSystem:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.systemUrl,method:"GET"}).then(function(a){return a.status==200?a.data:[]})},basicSave:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.basicConfigUrl,method:"PUT",data:b}).success(function(a){c.model.basic=angular.copy(b)}).error(function(){})},rootConfigSave:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.rootConfigUrl,method:"PUT",data:b}).success(function(a){return a}).error(function(a){return a.code})},restoreDatabase:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.restoreDatabaseUrl,method:"POST",data:{date:b}})},restoreDefaultConfig:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.defaultConfigUrl,method:"POST"}).then(function(a){return a.data})},getDumpedDatabases:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.dumpedDatabasesUrl,method:"GET"}).then(function(a){return a.data})},init:function(){var a=this;this.getSystem().then(function(b){a.model=b})}};c.init();return c}]);var BinaryFile=function(a,b,c){var d=a;var e=b||0;var f=0;this.getRawData=function(){return d};if(typeof a=="string"){f=c||d.length;this.getByteAt=function(a){return d.charCodeAt(a+e)&255}}else if(typeof a=="unknown"){f=c||IEBinary_getLength(d);this.getByteAt=function(a){return IEBinary_getByteAt(d,a+e)}}this.getLength=function(){return f};this.getSByteAt=function(a){var b=this.getByteAt(a);if(b>127)return b-256;else return b};this.getShortAt=function(a,b){var c=b?(this.getByteAt(a)<<8)+this.getByteAt(a+1):(this.getByteAt(a+1)<<8)+this.getByteAt(a);if(c<0)c+=65536;return c};this.getSShortAt=function(a,b){var c=this.getShortAt(a,b);if(c>32767)return c-65536;else return c};this.getLongAt=function(a,b){var c=this.getByteAt(a),d=this.getByteAt(a+1),e=this.getByteAt(a+2),f=this.getByteAt(a+3);var g=b?(((c<<8)+d<<8)+e<<8)+f:(((f<<8)+e<<8)+d<<8)+c;if(g<0)g+=4294967296;return g};this.getSLongAt=function(a,b){var c=this.getLongAt(a,b);if(c>2147483647)return c-4294967296;else return c};this.getStringAt=function(a,b){var c=[];for(var d=a,e=0;d<a+b;d++,e++){c[e]=String.fromCharCode(this.getByteAt(d))}return c.join("")};this.getCharAt=function(a){return String.fromCharCode(this.getByteAt(a))};this.toBase64=function(){return window.btoa(d)};this.fromBase64=function(a){d=window.atob(a)}};document.write("<script type='text/vbscript'>\r\n"+"Function IEBinary_getByteAt(strBinary, iOffset)\r\n"+"\tIEBinary_getByteAt = AscB(MidB(strBinary,iOffset+1,1))\r\n"+"End Function\r\n"+"Function IEBinary_getLength(strBinary)\r\n"+"\tIEBinary_getLength = LenB(strBinary)\r\n"+"End Function\r\n"+"<\/script>\r\n");function BinaryFileWrapper(a){this.position=0;this.bigEndian=true;this.getByte=function(){var b=a.getByteAt(this.position);this.position++;return b};this.getLength=function(){return a.getLength()};this.getSByte=function(){var b=a.getSByteAt(this.position);this.position++;return b};this.getShort=function(){var b=a.getShortAt(this.position,this.bigEndian);this.position+=2;return b};this.getSShort=function(){var b=a.getSShortAt(this.position,this.bigEndian);this.position+=2;return b};this.getLong=function(){var b=a.getLongAt(this.position,this.bigEndian);this.position+=4;return b};this.getSLong=function(){var b=a.getSLongAt(this.position,this.bigEndian);this.position+=4;return b};this.getString=function(b){var c=a.getStringAt(this.position,b);this.position+=b;return c};this.getDoubleAt=function(b,c){var d=a.getLongAt(b+(c?0:4),c);var e=a.getLongAt(b+(c?4:0),c);var f=d>>31?-1:1;var g=(d>>52-32&2047)-1023;return f*(d&1048575|1048576)*1/Math.pow(2,52-32)*Math.pow(2,g)+e*1/Math.pow(2,52)*Math.pow(2,g)};this.getDouble=function(){var a=this.getDoubleAt(this.position,this.bigEndian);this.position+=8;return a};this.getChar=function(){var b=a.getCharAt(this.position);this.position++;return b}}function ShpFile(a){var b=new BinaryFileWrapper(a);var c=(new Date).getTime();this.header=new ShpHeader(b);var d=(new Date).getTime();if(window.console&&window.console.log)console.log("parsed header in "+(d-c)+" ms");if(window.console&&window.console.log)console.log("got header, parsing records");c=(new Date).getTime();this.records=[];while(true){try{this.records.push(new ShpRecord(b))}catch(a){if(a.id!==ShpError.ERROR_NODATA){console.warn(a)}break}}d=(new Date).getTime();if(window.console&&window.console.log)console.log("parsed records in "+(d-c)+" ms")}var ShpType={SHAPE_UNKNOWN:-1,SHAPE_NULL:0,SHAPE_POINT:1,SHAPE_POLYLINE:3,SHAPE_POLYGON:5,SHAPE_MULTIPOINT:8,SHAPE_POINTZ:11,SHAPE_POLYLINEZ:13,SHAPE_POLYGONZ:15,SHAPE_MULTIPOINTZ:18,SHAPE_POINTM:21,SHAPE_POLYLINEM:23,SHAPE_POLYGONM:25,SHAPE_MULTIPOINTM:28,SHAPE_MULTIPATCH:31};function ShpHeader(a){if(a.getLength()<100)console.warn("Not a valid shape file header (too small)");if(a.getSLong()!=9994)console.warn("Not a valid signature. Expected 9994");a.position+=5*4;this.fileLength=a.getSLong();a.bigEndian=false;this.version=a.getSLong();this.shapeType=a.getSLong();this.boundsXY={x:a.getDouble(),y:a.getDouble(),width:a.getDouble(),height:a.getDouble()};this.boundsZ={x:a.getDouble(),y:a.getDouble()};this.boundsM={x:a.getDouble(),y:a.getDouble()}}function ShpRecord(a){var b=a.getLength()-a.position;if(b==0)throw new ShpError("No Data",ShpError.ERROR_NODATA);if(b<8)throw new ShpError("Not a valid record header (too small)");a.bigEndian=true;this.number=a.getSLong();this.contentLength=a.getSLong();this.contentLengthBytes=this.contentLength*2-4;a.bigEndian=false;var c=a.position;this.shapeType=a.getSLong();switch(this.shapeType){case ShpType.SHAPE_POINT:this.shape=new ShpPoint(a,this.contentLengthBytes);break;case ShpType.SHAPE_POINTZ:this.shape=new ShpPointZ(a,this.contentLengthBytes);break;case ShpType.SHAPE_POLYGON:this.shape=new ShpPolygon(a,this.contentLengthBytes);break;case ShpType.SHAPE_POLYLINE:this.shape=new ShpPolyline(a,this.contentLengthBytes);break;case ShpType.SHAPE_MULTIPATCH:case ShpType.SHAPE_MULTIPOINT:case ShpType.SHAPE_MULTIPOINTM:case ShpType.SHAPE_MULTIPOINTZ:case ShpType.SHAPE_POINTM:case ShpType.SHAPE_POLYGONM:case ShpType.SHAPE_POLYGONZ:case ShpType.SHAPE_POLYLINEZ:case ShpType.SHAPE_POLYLINEM:throw new ShpError(this.shapeType+" Shape type is currently unsupported by this library");break;default:throw new ShpError("Encountered unknown shape type ("+this.shapeType+")");break}}function ShpPoint(a,b){this.type=ShpType.SHAPE_POINT;if(a){if(a.getLength()-a.position<b)throw new ShpError("Not a Point record (too small)");this.x=b>0?a.getDouble():NaN;this.y=b>0?a.getDouble():NaN}}function ShpPointZ(a,b){this.type=ShpType.SHAPE_POINTZ;if(a){if(a.getLength()-a.position<b)throw new ShpError("Not a Point record (too small)");this.x=b>0?a.getDouble():NaN;this.y=b>0?a.getDouble():NaN;this.z=b>16?a.getDouble():NaN;this.m=b>24?a.getDouble():NaN}}function ShpPolygon(a,b){ShpPolyline.apply(this,[a,b]);this.type=ShpType.SHAPE_POLYGON}function ShpPolyline(a,b){this.type=ShpType.SHAPE_POLYLINE;this.rings=[];if(a){if(a.getLength()-a.position<b)throw new ShpError("Not a Polygon record (too small)");a.bigEndian=false;this.box={x:a.getDouble(),y:a.getDouble(),width:a.getDouble(),height:a.getDouble()};var c=a.getSLong();var d=a.getSLong();var e=[];while(c--){var f=a.getSLong();e.push(f)}var g=[];while(d--){g.push(new ShpPoint(a,16))}var h=0;var i;e.shift();while(e.length){i=e.shift();this.rings.push(g.splice(0,i-h));h=i}this.rings.push(g)}}function ShpError(a,b){this.msg=a;this.id=b;this.toString=function(){return this.msg}}ShpError.ERROR_UNDEFINED=0;ShpError.ERROR_NODATA=1;function DbfFile(a){this.src=new BinaryFileWrapper(a);var b=(new Date).getTime();this.header=new DbfHeader(this.src);var c=(new Date).getTime();if(window.console&&window.console.log)console.log("parsed dbf header in "+(c-b)+" ms");b=(new Date).getTime();this.records=[];for(var d=0;d<this.header.recordCount;d++){var e=this.getRecord(d);this.records.push(e)}c=(new Date).getTime();if(window.console&&window.console.log)console.log("parsed dbf records in "+(c-b)+" ms")}DbfFile.prototype.getRecord=function(a){if(a>this.header.recordCount){throw new DbfError("",DbfError.ERROR_OUTOFBOUNDS)}this.src.position=this.header.recordsOffset+a*this.header.recordSize;this.src.bigEndian=false;return new DbfRecord(this.src,this.header)};function DbfHeader(a){a.bigEndian=false;this.version=a.getSByte();this.updateYear=1900+a.getByte();this.updateMonth=a.getByte();this.updateDay=a.getByte();this.recordCount=a.getLong();this.headerSize=a.getShort();this.recordSize=a.getShort();a.position+=2;this.incompleteTransaction=a.getByte();this.encrypted=a.getByte();a.position+=12;this.mdx=a.getByte();this.language=a.getByte();a.position+=2;this.fields=[];var b=0;while(a.getSByte()!=13){a.position-=1;this.fields.push(new DbfField(a));if(b>1e3)break;b++}this.recordsOffset=this.headerSize+1}function DbfField(a){this.name=this.readZeroTermANSIString(a);a.position+=10-this.name.length;this.type=a.getByte();this.address=a.getLong();this.length=a.getByte();this.decimals=a.getByte();a.position+=2;this.id=a.getByte();a.position+=2;this.setFlag=a.getByte();a.position+=7;this.indexFlag=a.getByte()}DbfField.prototype.readZeroTermANSIString=function(a){var b=[];var c;while(c=a.getByte()){b[b.length]=String.fromCharCode(c)}return b.join("")};function DbfRecord(a,b){this.offset=a.position;this.values={};for(var c=0;c<b.fields.length;c++){var d=b.fields[c];this.values[d.name]=a.getString(d.length)}}function getOpenLayersFeatures(a,b,c){var d={};d.callback=c;d.filename=a;d.binaryFile=b;var e=d;var f={data:null,message:""};var g=function(){if(!(e.dbfFile&&e.shpFile)){f.message="Shapefiles are limited to one record of type POLYGON.";f.data=null;d.callback(f);return}var a=[];var b;try{var c=e.shpFile.records.length;if(c==0){f.message="Your shapefile doesn't contain any record. Shapefiles are limited to one record of type POLYGON.";f.data=null}else if(c>1){f.message="Shapefiles containing more than one record are not supported. Shapefiles are limited to one record of type POLYGON.";f.data=null}else{var g=e.shpFile.records[0];var h=e.dbfFile.records[0];if(e.shpFile.header.shapeType==ShpType.SHAPE_POINT){f.message="Unsupported shapefile type. Shapefiles are limited to one record of type POLYGON.";f.data=null}else if(e.shpFile.header.shapeType==ShpType.SHAPE_POLYLINE){f.message="Unsupported shapefile type. Shapefiles are limited to one record of type POLYGON.";f.data=null}else if(e.shpFile.header.shapeType==ShpType.SHAPE_POLYGON){var i=Number(g.shape.rings.length);var j=[];for(var k=0;k<i;k++){var l=g.shape.rings[k];if(Number(l.length)<1)continue;var m=[];var n=Number(l.length);for(var o=0;o<n;o++){m.push(Number(l[o].x)+" "+Number(l[o].y))}j.push("("+m.join(", ")+")")}b="POLYGON("+j.join(", ")+")"}else{f.message="Unsupported shapefile type. Shapefiles are limited to one record of type POLYGON."}a=b;f.data=a}d.callback(f)}catch(a){if(!f.message)f.message="Unsupported shapefile type. Shapefiles are limited to one record of type POLYGON.";d.callback(f)}};var h=function(){console.warn("failed to load "+e.filename)};var i=function(){console.warn("failed to load "+e.filename)};var j=function(a){var b=a.binaryResponse;e.shpFile=new ShpFile(b);e.dbfFile=new DbfFile(b);if(e.dbfFile)g()};var k=function(a){var b=a.binaryResponse;e.dbfFile=new DbfFile(b);if(e.shpFile)g()};var l=new BinaryFile(e.binaryFile,0,0);e.shpFile=new ShpFile(l);if(!e.shpFile||!e.shpFile.records||e.shpFile.records.length==0){f.message="Unsupported shapefile type. Shapefiles are limited to one record of type POLYGON.";d.callback(f)}else{e.dbfFile=new DbfFile(l);if(e.dbfFile){g()}else{f.message="Unsupported shapefile type. Shapefiles are limited to one record of type POLYGON.";d.callback(f)}}}!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.jsts=a.jsts||{})}(this,function(a){"use strict";function b(){}function c(){}function d(){}function e(){}function f(){}function g(){}function h(){}function i(a){this.name="RuntimeException",this.message=a,this.stack=(new Error).stack,Error.call(this,a)}function j(){if(0===arguments.length)i.call(this);else if(1===arguments.length){var a=arguments[0];i.call(this,a)}}function k(){}function l(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)l.call(this,0,0);else if(1===arguments.length){var a=arguments[0];l.call(this,a.x,a.y,a.z)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];l.call(this,b,c,l.NULL_ORDINATE)}else if(3===arguments.length){var d=arguments[0],e=arguments[1],f=arguments[2];this.x=d,this.y=e,this.z=f}}function m(){if(this.dimensionsToTest=2,0===arguments.length)m.call(this,2);else if(1===arguments.length){var a=arguments[0];if(2!==a&&3!==a)throw new c("only 2 or 3 dimensions may be specified");this.dimensionsToTest=a}}function n(){}function o(){}function p(a){this.message=a||""}function q(){}function r(a){this.message=a||""}function s(a){this.message=a||""}function t(){this.array_=[],arguments[0]instanceof o&&this.addAll(arguments[0])}function u(){if(t.apply(this),0===arguments.length);else if(1===arguments.length){var a=arguments[0];this.ensureCapacity(a.length),this.add(a,!0)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.ensureCapacity(b.length),this.add(b,c)}}function v(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof l){var a=arguments[0];this.init(a.x,a.x,a.y,a.y)}else if(arguments[0]instanceof v){var b=arguments[0];this.init(b)}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];this.init(c.x,d.x,c.y,d.y)}else if(4===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2],h=arguments[3];this.init(e,f,g,h)}}function w(){}function x(){w.call(this,"Projective point not representable on the Cartesian plane.")}function y(){}function z(){}function A(a){this.str=a}function B(a){this.value=a}function C(){}function D(){if(this.hi=0,this.lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var a=arguments[0];this.init(a)}else if(arguments[0]instanceof D){var b=arguments[0];this.init(b)}else if("string"==typeof arguments[0]){var c=arguments[0];D.call(this,D.parse(c))}}else if(2===arguments.length){var d=arguments[0],e=arguments[1];this.init(d,e)}}function E(){}function F(){}function G(){}function H(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var a=arguments[0];this.x=a.x,this.y=a.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var b=arguments[0],c=arguments[1];this.x=b,this.y=c,this.w=1}else if(arguments[0]instanceof H&&arguments[1]instanceof H){var d=arguments[0],e=arguments[1];this.x=d.y*e.w-e.y*d.w,this.y=e.x*d.w-d.x*e.w,this.w=d.x*e.y-e.x*d.y}else if(arguments[0]instanceof l&&arguments[1]instanceof l){var f=arguments[0],g=arguments[1];this.x=f.y-g.y,this.y=g.x-f.x,this.w=f.x*g.y-g.x*f.y}}else if(3===arguments.length){var h=arguments[0],i=arguments[1],j=arguments[2];this.x=h,this.y=i,this.w=j}else if(4===arguments.length){var k=arguments[0],m=arguments[1],n=arguments[2],o=arguments[3],p=k.y-m.y,q=m.x-k.x,r=k.x*m.y-m.x*k.y,s=n.y-o.y,t=o.x-n.x,u=n.x*o.y-o.x*n.y;this.x=q*u-t*r,this.y=s*r-p*u,this.w=p*t-s*q}}function I(){}function J(){}function K(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var a=arguments[0];this.factory=a,this.SRID=a.getSRID()}function L(){}function M(){}function N(){}function O(){}function P(){}function Q(){}function R(){}function S(){}function T(){}function U(){}function V(){}function W(){}function X(){this.array_=[],arguments[0]instanceof o&&this.addAll(arguments[0])}function Y(a){return null==a?_f:a.color}function Z(a){return null==a?null:a.parent}function $(a,b){null!==a&&(a.color=b)}function _(a){return null==a?null:a.left}function aa(a){return null==a?null:a.right}function ba(){this.root_=null,this.size_=0}function ca(){}function da(){}function ea(){this.array_=[],arguments[0]instanceof o&&this.addAll(arguments[0])}function fa(){}function ga(){}function ha(){}function ia(){}function ja(){this.geometries=null;var a=arguments[0],b=arguments[1];if(K.call(this,b),null===a&&(a=[]),K.hasNullElements(a))throw new c("geometries must not contain null elements");this.geometries=a}function ka(){var a=arguments[0],b=arguments[1];ja.call(this,a,b)}function la(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var a=arguments[0];la.call(this,a,M.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.geom=b,this.geomFact=b.getFactory(),this.bnRule=c}}function ma(){this.count=null}function na(){}function oa(){}function pa(){}function qa(){}function ra(){}function sa(){}function ta(){}function ua(){}function va(){this.points=null;var a=arguments[0],b=arguments[1];K.call(this,b),this.init(a)}function wa(){}function xa(){this.coordinates=null;var a=arguments[0],b=arguments[1];K.call(this,b),this.init(a)}function ya(){}function za(){this.shell=null,this.holes=null;var a=arguments[0],b=arguments[1],d=arguments[2];if(K.call(this,d),null===a&&(a=this.getFactory().createLinearRing()),null===b&&(b=[]),K.hasNullElements(b))throw new c("holes must not contain null elements");if(a.isEmpty()&&K.hasNonEmptyElements(b))throw new c("shell is empty but holes are not");this.shell=a,this.holes=b}function Aa(){var a=arguments[0],b=arguments[1];ja.call(this,a,b)}function Ba(){if(arguments[0]instanceof l&&arguments[1]instanceof ab){var a=arguments[0],b=arguments[1];Ba.call(this,b.getCoordinateSequenceFactory().create(a),b)}else if(Zf(arguments[0],F)&&arguments[1]instanceof ab){var c=arguments[0],d=arguments[1];va.call(this,c,d),this.validateConstruction()}}function Ca(){var a=arguments[0],b=arguments[1];ja.call(this,a,b)}function Da(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var a=arguments[0];this.factory=a}}function Ea(){}function Fa(){}function Ga(){}function Ha(){}function Ia(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var a=arguments[0];Ia.call(this,a,3)}else if(Number.isInteger(arguments[0])){var b=arguments[0];this.coordinates=new Array(b).fill(null);for(var c=0;c<b;c++)this.coordinates[c]=new l}else if(Zf(arguments[0],F)){var d=arguments[0];if(null===d)return this.coordinates=new Array(0).fill(null),null;this.dimension=d.getDimension(),this.coordinates=new Array(d.size()).fill(null);for(var c=0;c<this.coordinates.length;c++)this.coordinates[c]=d.getCoordinateCopy(c)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var e=arguments[0],f=arguments[1];this.coordinates=e,this.dimension=f,null===e&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var g=arguments[0],h=arguments[1];this.coordinates=new Array(g).fill(null),this.dimension=h;for(var c=0;c<g;c++)this.coordinates[c]=new l}}function Ja(){}function Ka(a,b){return a===b||a!==a&&b!==b}function La(a,b){function c(a){return this&&this.constructor===c?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=b,void(a&&Ma.call(this,a))):new c(a)}return b||dg(a,"size",{get:Xa}),a.constructor=c,c.prototype=a,c}function Ma(a){this.add?a.forEach(this.add,this):a.forEach(function(a){this.set(a[0],a[1])},this)}function Na(a){return this.has(a)&&(this._keys.splice(cg,1),this._values.splice(cg,1),this._itp.forEach(function(a){cg<a[0]&&a[0]--})),cg>-1}function Oa(a){return this.has(a)?this._values[cg]:void 0}function Pa(a,b){if(this.objectOnly&&b!==Object(b))throw new TypeError("Invalid value used as weak collection key");if(b!==b||0===b)for(cg=a.length;cg--&&!Ka(a[cg],b););else cg=a.indexOf(b);return cg>-1}function Qa(a){return Pa.call(this,this._keys,a)}function Ra(a,b){return this.has(a)?this._values[cg]=b:this._values[this._keys.push(a)-1]=b,this}function Sa(){(this._keys||0).length=this._values.length=0}function Ta(){return Wa(this._itp,this._keys)}function Ua(){return Wa(this._itp,this._values)}function Va(){return Wa(this._itp,this._keys,this._values)}function Wa(a,b,c){var d=[0],e=!1;return a.push(d),{next:function(){var f,g=d[0];return!e&&g<b.length?(f=c?[b[g],c[g]]:b[g],d[0]++):(e=!0,a.splice(a.indexOf(d),1)),{done:e,value:f}}}}function Xa(){return this._values.length}function Ya(a,b){for(var c=this.entries();;){var d=c.next();if(d.done)break;a.call(b,d.value[1],d.value[0],this)}}function Za(){this.map_=new fg}function $a(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=$a.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof _a){var a=arguments[0];this.modelType=a,a===$a.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var b=arguments[0];this.modelType=$a.FIXED,this.setScale(b)}else if(arguments[0]instanceof $a){var c=arguments[0];this.modelType=c.modelType,this.scale=c.scale}}function _a(){this.name=null;var a=arguments[0];this.name=a,_a.nameToTypeMap.put(a,this)}function ab(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)ab.call(this,new $a,0);else if(1===arguments.length){if(Zf(arguments[0],I)){var a=arguments[0];ab.call(this,new $a,0,a)}else if(arguments[0]instanceof $a){var b=arguments[0];ab.call(this,b,0,ab.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];ab.call(this,c,d,ab.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2];this.precisionModel=e,this.coordinateSequenceFactory=g,this.SRID=f}}function bb(a){this.geometryFactory=a||new ab}function cb(a){this.parser=new bb(a)}function db(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new l,this.intPt[1]=new l,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function eb(){db.apply(this)}function fb(){}function gb(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var a=arguments[0];this.p=a}function hb(){}function ib(){if(this.p0=null,this.p1=null,0===arguments.length)ib.call(this,new l,new l);else if(1===arguments.length){var a=arguments[0];ib.call(this,a.p0,a.p1)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.p0=b,this.p1=c}else if(4===arguments.length){var d=arguments[0],e=arguments[1],f=arguments[2],g=arguments[3];ib.call(this,new l(d,e),new l(f,g))}}function jb(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){
return Array(3)}),this.setAll(ga.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var a=arguments[0];jb.call(this),this.set(a)}else if(arguments[0]instanceof jb){var b=arguments[0];jb.call(this),this.matrix[y.INTERIOR][y.INTERIOR]=b.matrix[y.INTERIOR][y.INTERIOR],this.matrix[y.INTERIOR][y.BOUNDARY]=b.matrix[y.INTERIOR][y.BOUNDARY],this.matrix[y.INTERIOR][y.EXTERIOR]=b.matrix[y.INTERIOR][y.EXTERIOR],this.matrix[y.BOUNDARY][y.INTERIOR]=b.matrix[y.BOUNDARY][y.INTERIOR],this.matrix[y.BOUNDARY][y.BOUNDARY]=b.matrix[y.BOUNDARY][y.BOUNDARY],this.matrix[y.BOUNDARY][y.EXTERIOR]=b.matrix[y.BOUNDARY][y.EXTERIOR],this.matrix[y.EXTERIOR][y.INTERIOR]=b.matrix[y.EXTERIOR][y.INTERIOR],this.matrix[y.EXTERIOR][y.BOUNDARY]=b.matrix[y.EXTERIOR][y.BOUNDARY],this.matrix[y.EXTERIOR][y.EXTERIOR]=b.matrix[y.EXTERIOR][y.EXTERIOR]}}function kb(){this.areaBasePt=null,this.triangleCent3=new l,this.areasum2=0,this.cg3=new l,this.lineCentSum=new l,this.totalLength=0,this.ptCount=0,this.ptCentSum=new l;var a=arguments[0];this.areaBasePt=null,this.add(a)}function lb(a){this.message=a||""}function mb(){this.array_=[]}function nb(){this.treeSet=new ea,this.list=new t}function ob(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var a=arguments[0];ob.call(this,ob.extractCoordinates(a),a.getFactory())}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.inputPts=nb.filterCoordinates(b),this.geomFactory=c}}function pb(){this.origin=null;var a=arguments[0];this.origin=a}function qb(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function rb(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new ib,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof va&&"number"==typeof arguments[1]){var a=arguments[0],b=arguments[1];rb.call(this,a.getCoordinates(),b)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var c=arguments[0],d=arguments[1];this.srcPts=c,this._isClosed=rb.isClosed(c),this.snapTolerance=d}}function sb(){this.srcGeom=null;var a=arguments[0];this.srcGeom=a}function tb(){if(qb.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var a=arguments[0],b=arguments[1];this.snapTolerance=a,this.snapPts=b}else if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];this.snapTolerance=c,this.snapPts=d,this.isSelfSnap=e}}function ub(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function vb(){this.commonCoord=null,this.ccFilter=new wb}function wb(){this.commonBitsX=new ub,this.commonBitsY=new ub}function xb(){this.trans=null;var a=arguments[0];this.trans=a}function yb(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var a=arguments[0];this.parent=a,this.atStart=!0,this.index=0,this.max=a.getNumGeometries()}function zb(){if(this.boundaryRule=M.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var a=arguments[0];if(null===a)throw new c("Rule must be non-null");this.boundaryRule=a}}function Ab(){}function Bb(){}function Cb(){this.pts=null,this.data=null;var a=arguments[0],b=arguments[1];this.pts=a,this.data=b}function Db(){}function Eb(){this.bounds=null,this.item=null;var a=arguments[0],b=arguments[1];this.bounds=a,this.item=b}function Fb(){this._size=null,this.items=null,this._size=0,this.items=new t,this.items.add(null)}function Gb(){}function Hb(){}function Ib(){if(this.childBoundables=new t,this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var a=arguments[0];this.level=a}}function Jb(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var a=arguments[0],b=arguments[1],c=arguments[2];this.boundable1=a,this.boundable2=b,this.itemDistance=c,this._distance=this.distance()}function Kb(){if(this.root=null,this.built=!1,this.itemBoundables=new t,this.nodeCapacity=null,0===arguments.length)Kb.call(this,Kb.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var a=arguments[0];k.isTrue(a>1,"Node capacity must be greater than 1"),this.nodeCapacity=a}}function Lb(){}function Mb(){}function Nb(){if(0===arguments.length)Nb.call(this,Nb.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var a=arguments[0];Kb.call(this,a)}}function Ob(){var a=arguments[0];Ib.call(this,a)}function Pb(){}function Qb(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3];this.segString=a,this.coord=new l(b),this.segmentIndex=c,this.segmentOctant=d,this._isInterior=!b.equals2D(a.getCoordinate(c))}function Rb(){this.nodeMap=new ba,this.edge=null;var a=arguments[0];this.edge=a}function Sb(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var a=arguments[0];this.nodeList=a,this.edge=a.getEdge(),this.nodeIt=a.iterator(),this.readNextNode()}function Tb(){}function Ub(){this.nodeList=new Rb(this),this.pts=null,this.data=null;var a=arguments[0],b=arguments[1];this.pts=a,this.data=b}function Vb(){this.tempEnv1=new v,this.tempEnv2=new v,this.overlapSeg1=new ib,this.overlapSeg2=new ib}function Wb(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3];this.pts=a,this.start=b,this.end=c,this.context=d}function Xb(){}function Yb(){}function Zb(){}function $b(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var a=arguments[0];this.setSegmentIntersector(a)}}function _b(){if(this.monoChains=new t,this.index=new Nb,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,0===arguments.length);else if(1===arguments.length){var a=arguments[0];$b.call(this,a)}}function ac(){Vb.apply(this),this.si=null;var a=arguments[0];this.si=a}function bc(){if(this.pt=null,1===arguments.length){var a=arguments[0];i.call(this,a)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];i.call(this,bc.msgWithCoord(b,c)),this.name="TopologyException",this.pt=new l(c)}}function cc(){}function dc(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new t,this.intersectionCount=0,this.keepIntersections=!0;var a=arguments[0];this.li=a,this.interiorIntersection=null}function ec(){this.li=new eb,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var a=arguments[0];this.segStrings=a}function fc(){this.nv=null;var a=arguments[0];this.nv=new ec(fc.toSegmentStrings(a))}function gc(){this.mapOp=null;var a=arguments[0];this.mapOp=a}function hc(){}function ic(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var a=arguments[0];this.init(a.length)}else if(Number.isInteger(arguments[0])){var b=arguments[0];this.init(1),this.location[hc.ON]=b}else if(arguments[0]instanceof ic){var c=arguments[0];if(this.init(c.location.length),null!==c)for(var d=0;d<this.location.length;d++)this.location[d]=c.location[d]}}else if(3===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2];this.init(3),this.location[hc.ON]=e,this.location[hc.LEFT]=f,this.location[hc.RIGHT]=g}}function jc(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var a=arguments[0];this.elt[0]=new ic(a),this.elt[1]=new ic(a)}else if(arguments[0]instanceof jc){var b=arguments[0];this.elt[0]=new ic(b.elt[0]),this.elt[1]=new ic(b.elt[1])}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];this.elt[0]=new ic(y.NONE),this.elt[1]=new ic(y.NONE),this.elt[c].setLocation(d)}else if(3===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2];this.elt[0]=new ic(e,f,g),this.elt[1]=new ic(e,f,g)}else if(4===arguments.length){var h=arguments[0],i=arguments[1],j=arguments[2],k=arguments[3];this.elt[0]=new ic(y.NONE,y.NONE,y.NONE),this.elt[1]=new ic(y.NONE,y.NONE,y.NONE),this.elt[h].setLocations(i,j,k)}}function kc(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new t,this.pts=new t,this.label=new jc(y.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new t,this.geometryFactory=null;var a=arguments[0],b=arguments[1];this.geometryFactory=b,this.computePoints(a),this.computeRing()}function lc(){var a=arguments[0],b=arguments[1];kc.call(this,a,b)}function mc(){var a=arguments[0],b=arguments[1];kc.call(this,a,b)}function nc(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var a=arguments[0];this.label=a}}function oc(){nc.apply(this),this.coord=null,this.edges=null;var a=arguments[0],b=arguments[1];this.coord=a,this.edges=b,this.label=new jc(0,y.NONE)}function pc(){this.nodeMap=new ba,this.nodeFact=null;var a=arguments[0];this.nodeFact=a}function qc(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var a=arguments[0];this.edge=a}else if(3===arguments.length){var b=arguments[0],c=arguments[1],d=arguments[2];qc.call(this,b,c,d,null)}else if(4===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2],h=arguments[3];qc.call(this,e),this.init(f,g),this.label=h}}function rc(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var a=arguments[0],b=arguments[1];if(qc.call(this,a),this._isForward=b,b)this.init(a.getCoordinate(0),a.getCoordinate(1));else{var c=a.getNumPoints()-1;this.init(a.getCoordinate(c),a.getCoordinate(c-1))}this.computeDirectedLabel()}function sc(){}function tc(){if(this.edges=new t,this.nodes=null,this.edgeEndList=new t,0===arguments.length)this.nodes=new pc(new sc);else if(1===arguments.length){var a=arguments[0];this.nodes=new pc(a)}}function uc(){this.geometryFactory=null,this.shellList=new t;var a=arguments[0];this.geometryFactory=a}function vc(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new t,this.resultLineList=new t;var a=arguments[0],b=arguments[1],c=arguments[2];this.op=a,this.geometryFactory=b,this.ptLocator=c}function wc(){this.op=null,this.geometryFactory=null,this.resultPointList=new t;var a=arguments[0],b=arguments[1];arguments[2];this.op=a,this.geometryFactory=b}function xc(){}function yc(){this.geom=null;var a=arguments[0];this.geom=a}function zc(){this.edgeMap=new ba,this.edgeList=null,this.ptInAreaLocation=[y.NONE,y.NONE]}function Ac(){zc.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function Bc(){sc.apply(this)}function Cc(){this.mce=null,this.chainIndex=null;var a=arguments[0],b=arguments[1];this.mce=a,this.chainIndex=b}function Dc(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var a=arguments[0],b=arguments[1];this.eventType=Dc.DELETE,this.xValue=a,this.insertEvent=b}else if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];this.eventType=Dc.INSERT,this.label=c,this.xValue=d,this.obj=e}}function Ec(){}function Fc(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var a=arguments[0],b=arguments[1],c=arguments[2];this.li=a,this.includeProper=b,this.recordIsolated=c}function Gc(){Ec.apply(this),this.events=new t,this.nOverlaps=null}function Hc(){this.min=d.POSITIVE_INFINITY,this.max=d.NEGATIVE_INFINITY}function Ic(){}function Jc(){Hc.apply(this),this.item=null;var a=arguments[0],b=arguments[1],c=arguments[2];this.min=a,this.max=b,this.item=c}function Kc(){Hc.apply(this),this.node1=null,this.node2=null;var a=arguments[0],b=arguments[1];this.node1=a,this.node2=b,this.buildExtent(this.node1,this.node2)}function Lc(){this.leaves=new t,this.root=null,this.level=0}function Mc(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var a=arguments[0];this.lines=a}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.lines=b,this.isForcedToLineString=c}}function Nc(){this.items=new t}function Oc(){this.index=null;var a=arguments[0];if(!Zf(a,ya))throw new c("Argument must be Polygonal");this.index=new Qc(a)}function Pc(){this.counter=null;var a=arguments[0];this.counter=a}function Qc(){this.index=new Lc;var a=arguments[0];this.init(a)}function Rc(){this.coord=null,this.segmentIndex=null,this.dist=null;var a=arguments[0],b=arguments[1],c=arguments[2];this.coord=new l(a),this.segmentIndex=b,this.dist=c}function Sc(){this.nodeMap=new ba,this.edge=null;var a=arguments[0];this.edge=a}function Tc(){}function Uc(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new v,this.env2=new v;var a=arguments[0];this.e=a,this.pts=a.getCoordinates();var b=new Tc;this.startIndex=b.getChainStartIndices(this.pts)}function Vc(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var a=0;a<2;a++)for(var b=0;b<3;b++)this.depth[a][b]=Vc.NULL_VALUE}function Wc(){if(nc.apply(this),this.pts=null,this.env=null,this.eiList=new Sc(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Vc,this.depthDelta=0,1===arguments.length){var a=arguments[0];Wc.call(this,a,null)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.pts=b,this.label=c}}function Xc(){if(tc.apply(this),this.parentGeom=null,this.lineEdgeMap=new Za,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new zb,2===arguments.length){var a=arguments[0],b=arguments[1];Xc.call(this,a,b,M.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];this.argIndex=c,this.parentGeom=d,this.boundaryNodeRule=e,null!==d&&this.add(d)}}function Yc(){if(this.li=new eb,this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var a=arguments[0];this.setComputationPrecision(a.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new Xc(0,a)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];Yc.call(this,b,c,M.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var d=arguments[0],e=arguments[1],f=arguments[2];d.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(d.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new Xc(0,d,f),this.arg[1]=new Xc(1,e,f)}}function Zc(){this.pts=null,this._orientation=null;var a=arguments[0];this.pts=a,this._orientation=Zc.orientation(a)}function $c(){this.edges=new t,this.ocaMap=new ba}function _c(){this.ptLocator=new zb,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new $c,this.resultPolyList=new t,this.resultLineList=new t,this.resultPointList=new t;var a=arguments[0],b=arguments[1];Yc.call(this,a,b),this.graph=new tc(new Bc),this.geomFact=a.getFactory()}function ad(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var a=arguments[0],b=arguments[1];this.geom[0]=a,this.geom[1]=b,this.computeSnapTolerance()}function bd(){this.geom=new Array(2).fill(null);var a=arguments[0],b=arguments[1];this.geom[0]=a,this.geom[1]=b}function cd(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var a=arguments[0];this.factory=a.getFactory(),this.add(a)}function dd(){this.poly=null,this.centreY=null,this.hiY=d.MAX_VALUE,this.loY=-d.MAX_VALUE;var a=arguments[0];this.poly=a,this.hiY=a.getEnvelopeInternal().getMaxY(),this.loY=a.getEnvelopeInternal().getMinY(),this.centreY=cd.avg(this.loY,this.hiY)}function ed(){this.centroid=null,this.minDistance=d.MAX_VALUE,this.interiorPoint=null;var a=arguments[0];this.centroid=a.getCentroid().getCoordinate(),this.addInterior(a),null===this.interiorPoint&&this.addEndpoints(a)}function fd(){this.centroid=null,this.minDistance=d.MAX_VALUE,this.interiorPoint=null;var a=arguments[0];this.centroid=a.getCentroid().getCoordinate(),this.add(a)}function gd(){this.tempEnv1=new v,this.selectedSegment=new ib}function hd(){this.items=new t,this.subnode=[null,null]}function id(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var a=arguments[0];this.init(a.min,a.max)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.init(b,c)}}function jd(){}function kd(a,b){var c,d,e,f,g={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},h={32:8,64:11}[a];if(f||(c=b<0||1/b<0,isFinite(b)||(f=g[a],c&&(f.d+=1<<a/4-1),d=Math.pow(2,h)-1,e=0)),!f){for(d={32:127,64:1023}[a],e=Math.abs(b);e>=2;)d++,e/=2;for(;e<1&&d>0;)d--,e*=2;d<=0&&(e/=2),32===a&&d>254&&(f={d:c?255:127,c:128,b:0,a:0},d=Math.pow(2,h)-1,e=0)}return d}function ld(){this.pt=0,this.level=0,this.interval=null;var a=arguments[0];this.computeKey(a)}function md(){hd.apply(this),this.interval=null,this.centre=null,this.level=null;var a=arguments[0],b=arguments[1];this.interval=a,this.level=b,this.centre=(a.getMin()+a.getMax())/2}function nd(){}function od(){hd.apply(this)}function pd(){this.root=null,this.minExtent=1,this.root=new od}function qd(){}function rd(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new id;var a=arguments[0];this.ring=a,this.buildIndex()}function sd(){gd.apply(this),this.mcp=null,this.p=null;var a=arguments[0],b=arguments[1];this.mcp=a,this.p=b}function td(){}function ud(){this.p0=null,this.p1=null,this.p2=null;var a=arguments[0],b=arguments[1],c=arguments[2];this.p0=a,this.p1=b,this.p2=c}function vd(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var a=arguments[0];this.input=a}function wd(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new ib,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length){var a=arguments[0];wd.call(this,a,!1)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.inputGeom=b,this.isConvex=c}}function xd(){this.inputGeom=null,this.distanceTolerance=null;var a=arguments[0];this.inputGeom=a}function yd(){qb.apply(this),this.distanceTolerance=null;var a=arguments[0];this.distanceTolerance=a}function zd(){this._orig=null,this._sym=null,this._next=null;var a=arguments[0];this._orig=a}function Ad(){this._isMarked=!1;var a=arguments[0];zd.call(this,a)}function Bd(){this.vertexMap=new Za}function Cd(){this._isStart=!1;var a=arguments[0];Ad.call(this,a)}function Dd(){Bd.apply(this)}function Ed(){this.result=null,this.factory=null,this.graph=null,this.lines=new t,this.nodeEdgeStack=new mb,this.ringStartEdge=null,this.graph=new Dd}function Fd(){this.items=new t,this.subnode=new Array(4).fill(null)}function Gd(){this.pt=new l,this.level=0,this.env=null;var a=arguments[0];this.computeKey(a)}function Hd(){Fd.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var a=arguments[0],b=arguments[1];this.env=a,this.level=b,this.centrex=(a.getMinX()+a.getMaxX())/2,this.centrey=(a.getMinY()+a.getMaxY())/2}function Id(){Fd.apply(this)}function Jd(){this.root=null,this.minExtent=1,this.root=new Id}function Kd(a){this.geometryFactory=a||new ab}function Ld(a){this.geometryFactory=a||new ab,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Kd(this.geometryFactory)}function Md(){this.parser=new Kd(this.geometryFactory)}function Nd(a){this.geometryFactory=a||new ab,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new bb(this.geometryFactory)}function Od(a){return[a.x,a.y]}function Pd(a,b){this.geometryFactory=a||new ab,this.ol=b||"undefined"!=typeof ol&&ol}function Qd(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var a=arguments[0],b=arguments[1];Qd.call(this,a,b,0,0)}else if(4===arguments.length){var c=arguments[0],d=arguments[1];arguments[2],arguments[3];this.noder=c,this.scaleFactor=d,this.isScaled=!this.isIntegerPrecision()}}function Rd(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var a=arguments[0];this.inputGeom=a}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.inputGeom=b,this.isClosedEndpointsInInterior=!c.isInBoundary(2)}}function Sd(){this.pt=null,this.isClosed=null,this.degree=null;var a=arguments[0];this.pt=a,this.isClosed=!1,this.degree=0}function Td(){if(this.quadrantSegments=Td.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Td.CAP_ROUND,this.joinStyle=Td.JOIN_ROUND,this.mitreLimit=Td.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Td.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var a=arguments[0];this.setQuadrantSegments(a)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.setQuadrantSegments(b),this.setEndCapStyle(c)}else if(4===arguments.length){var d=arguments[0],e=arguments[1],f=arguments[2],g=arguments[3];this.setQuadrantSegments(d),this.setEndCapStyle(e),this.setJoinStyle(f),this.setMitreLimit(g)}}function Ud(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function Vd(){this.array_=[]}function Wd(){this.finder=null,this.dirEdgeList=new t,this.nodes=new t,this.rightMostCoord=null,this.env=null,this.finder=new Ud}function Xd(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=hb.COUNTERCLOCKWISE;var a=arguments[0];this.inputLine=a}function Yd(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new t}function Zd(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new ib,this.seg1=new ib,this.offset0=new ib,this.offset1=new ib,this.side=0,this._hasNarrowConcaveAngle=!1;var a=arguments[0],b=arguments[1],c=arguments[2];this.precisionModel=a,this.bufParams=b,this.li=new eb,this.filletAngleQuantum=Math.PI/2/b.getQuadrantSegments(),b.getQuadrantSegments()>=8&&b.getJoinStyle()===Td.JOIN_ROUND&&(this.closingSegLengthFactor=Zd.MAX_CLOSING_SEG_LEN_FACTOR),this.init(c)}function $d(){this.distance=0,this.precisionModel=null,this.bufParams=null;var a=arguments[0],b=arguments[1];this.precisionModel=a,this.bufParams=b}function _d(){this.subgraphs=null,this.seg=new ib,this.cga=new hb;var a=arguments[0];this.subgraphs=a}function ae(){this.upwardSeg=null,this.leftDepth=null;var a=arguments[0],b=arguments[1];this.upwardSeg=new ib(a),this.leftDepth=b}function be(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new t;var a=arguments[0],b=arguments[1],c=arguments[2];this.inputGeom=a,this.distance=b,this.curveBuilder=c}function ce(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var a=arguments[0];this.li=a}function de(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new $c;var a=arguments[0];this.bufParams=a}function ee(){this.li=new eb,this.segStrings=null;var a=arguments[0];this.segStrings=a}function fe(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var a=arguments[0],b=arguments[1],d=arguments[2];if(this.originalPt=a,this.pt=a,this.scaleFactor=b,this.li=d,b<=0)throw new c("Scale factor must be non-zero");1!==b&&(this.pt=new l(this.scale(a.x),this.scale(a.y)),this.p0Scaled=new l,this.p1Scaled=new l),this.initCorners(this.pt)}function ge(){this.index=null;var a=arguments[0];this.index=a}function he(){gd.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var a=arguments[0],b=arguments[1],c=arguments[2];this.hotPixel=a,this.parentEdge=b,this.hotPixelVertexIndex=c}function ie(){this.li=null,this.interiorIntersections=null;var a=arguments[0];this.li=a,this.interiorIntersections=new t}function je(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var a=arguments[0];this.pm=a,this.li=new eb,this.li.setPrecisionModel(a),this.scaleFactor=a.getScale()}function ke(){if(this.argGeom=null,this.distance=null,this.bufParams=new Td,this.resultGeometry=null,this.saveException=null,1===arguments.length){var a=arguments[0];this.argGeom=a}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.argGeom=b,this.bufParams=c}}function le(){this.comps=null;var a=arguments[0];this.comps=a}function me(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var a=arguments[0],b=arguments[1];me.call(this,a,me.INSIDE_AREA,b)}else if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];this.component=c,this.segIndex=d,this.pt=e}}function ne(){this.pts=null;var a=arguments[0];this.pts=a}function oe(){this.locations=null;var a=arguments[0];this.locations=a}function pe(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new zb,this.minDistanceLocation=null,this.minDistance=d.MAX_VALUE,2===arguments.length){var a=arguments[0],b=arguments[1];pe.call(this,a,b,0)}else if(3===arguments.length){var c=arguments[0],e=arguments[1],f=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=c,this.geom[1]=e,this.terminateDistance=f}}function qe(){this.factory=null,this.directedEdges=new t,this.coordinates=null;var a=arguments[0];this.factory=a}function re(){this._isMarked=!1,this._isVisited=!1,this.data=null}function se(){re.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3];this.from=a,this.to=b,this.edgeDirection=d,this.p0=a.getCoordinate(),this.p1=c;var e=this.p1.x-this.p0.x,f=this.p1.y-this.p0.y;this.quadrant=Xb.quadrant(e,f),this.angle=Math.atan2(f,e)}function te(){var a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3];se.call(this,a,b,c,d)}function ue(){if(re.apply(this),this.dirEdge=null,0===arguments.length);else if(2===arguments.length){var a=arguments[0],b=arguments[1];this.setDirectedEdges(a,b)}}function ve(){this.outEdges=new t,this.sorted=!1}function we(){if(re.apply(this),this.pt=null,this.deStar=null,1===arguments.length){var a=arguments[0];we.call(this,a,new ve)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.pt=b,this.deStar=c}}function xe(){ue.apply(this),this.line=null;var a=arguments[0];this.line=a}function ye(){this.nodeMap=new ba}function ze(){this.edges=new X,this.dirEdges=new X,this.nodeMap=new ye}function Ae(){ze.apply(this)}function Be(){this.graph=new Ae,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function Ce(){this.edgeRing=null,this.next=null,this.label=-1;var a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3];se.call(this,a,b,c,d)}function De(){ue.apply(this),this.line=null;var a=arguments[0];this.line=a}function Ee(){this.geometryFactory=new ab,this.geomGraph=null,this.disconnectedRingcoord=null;var a=arguments[0];this.geomGraph=a}function Fe(){}function Ge(){if(this.edgeEnds=new t,1===arguments.length){var a=arguments[0];Ge.call(this,null,a)}else if(2===arguments.length){var b=(arguments[0],arguments[1]);qc.call(this,b.getEdge(),b.getCoordinate(),b.getDirectedCoordinate(),new jc(b.getLabel())),this.insert(b)}}function He(){zc.apply(this)}function Ie(){var a=arguments[0],b=arguments[1];oc.call(this,a,b)}function Je(){sc.apply(this)}function Ke(){this.nodes=new pc(new Je)}function Le(){this.li=new eb,this.geomGraph=null,this.nodeGraph=new Ke,this.invalidPoint=null;var a=arguments[0];this.geomGraph=a}function Me(){this.graph=null,this.rings=new t,this.totalEnv=new v,this.index=null,this.nestedPt=null;var a=arguments[0];this.graph=a}function Ne(){if(this.errorType=null,this.pt=null,1===arguments.length){var a=arguments[0];Ne.call(this,a,null)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.errorType=b,null!==c&&(this.pt=c.copy())}}function Oe(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var a=arguments[0];this.parentGeometry=a}function Pe(){this.factory=null,this.deList=new t,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var a=arguments[0];this.factory=a}function Qe(){}function Re(){ze.apply(this),this.factory=null;var a=arguments[0];this.factory=a}function Se(){if(this.lineStringAdder=new Te(this),this.graph=null,this.dangles=new t,this.cutEdges=new t,this.invalidRingLines=new t,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length)Se.call(this,!1);else if(1===arguments.length){var a=arguments[0];this.extractOnlyPolygonal=a}}function Te(){this.p=null;var a=arguments[0];this.p=a}function Ue(){this.li=new eb,this.ptLocator=new zb,this.arg=null,this.nodes=new pc(new Je),this.im=null,this.isolatedEdges=new t,this.invalidPoint=null;var a=arguments[0];this.arg=a}function Ve(){this.rectEnv=null;var a=arguments[0];this.rectEnv=a.getEnvelopeInternal()}function We(){this.li=new eb,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var a=arguments[0];this.rectEnv=a,this.diagUp0=new l(a.getMinX(),a.getMinY()),this.diagUp1=new l(a.getMaxX(),a.getMaxY()),this.diagDown0=new l(a.getMinX(),a.getMaxY()),this.diagDown1=new l(a.getMaxX(),a.getMinY())}function Xe(){this._isDone=!1}function Ye(){this.rectangle=null,this.rectEnv=null;var a=arguments[0];this.rectangle=a,this.rectEnv=a.getEnvelopeInternal()}function Ze(){Xe.apply(this),this.rectEnv=null,this._intersects=!1;var a=arguments[0];this.rectEnv=a}function $e(){Xe.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var a=arguments[0];this.rectSeq=a.getExteriorRing().getCoordinateSequence(),this.rectEnv=a.getEnvelopeInternal()}function _e(){Xe.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new l,this.p1=new l;var a=arguments[0];this.rectEnv=a.getEnvelopeInternal(),this.rectIntersector=new We(this.rectEnv)}function af(){if(this._relate=null,2===arguments.length){var a=arguments[0],b=arguments[1];Yc.call(this,a,b),this._relate=new Ue(this.arg)}else if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];Yc.call(this,c,d,e),this._relate=new Ue(this.arg)}}function bf(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var a=arguments[0];this.geomFactory=bf.extractFactory(a),this.inputGeoms=a}function cf(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var a=arguments[0],b=arguments[1];this.pointGeom=a,this.otherGeom=b,this.geomFact=b.getFactory()}function df(){this.sortIndex=-1,this.comps=null;var a=arguments[0],b=arguments[1];this.sortIndex=a,this.comps=b}function ef(){this.inputPolys=null,this.geomFactory=null;var a=arguments[0];this.inputPolys=a,null===this.inputPolys&&(this.inputPolys=new t)}function ff(){if(this.polygons=new t,this.lines=new t,
this.points=new t,this.geomFact=null,1===arguments.length){if(Zf(arguments[0],o)){var a=arguments[0];this.extract(a)}else if(arguments[0]instanceof K){var b=arguments[0];this.extract(b)}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];this.geomFact=d,this.extract(c)}}function gf(){Da.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var a=arguments[0],b=arguments[1];this.targetPM=a,this.removeCollapsed=b}function hf(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var a=arguments[0];this.targetPM=a}function jf(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new ib;var a=arguments[0];this.pts=a}function kf(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var a=arguments[0];this.inputGeom=a}function lf(){qb.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var a=arguments[0],b=arguments[1];this.isEnsureValidTopology=a,this.distanceTolerance=b}function mf(){if(this.parent=null,this.index=null,2===arguments.length){var a=arguments[0],b=arguments[1];mf.call(this,a,b,null,-1)}else if(4===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2],f=arguments[3];ib.call(this,c,d),this.parent=e,this.index=f}}function nf(){if(this.parentLine=null,this.segs=null,this.resultSegs=new t,this.minimumSize=null,1===arguments.length){var a=arguments[0];nf.call(this,a,2)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.parentLine=b,this.minimumSize=c,this.init()}}function of(){this.index=new Jd}function pf(){this.querySeg=null,this.items=new t;var a=arguments[0];this.querySeg=a}function qf(){this.li=new eb,this.inputIndex=new of,this.outputIndex=new of,this.line=null,this.linePts=null,this.distanceTolerance=0;var a=arguments[0],b=arguments[1];this.inputIndex=a,this.outputIndex=b}function rf(){this.inputIndex=new of,this.outputIndex=new of,this.distanceTolerance=0}function sf(){this.inputGeom=null,this.lineSimplifier=new rf,this.linestringMap=null;var a=arguments[0];this.inputGeom=a}function tf(){qb.apply(this),this.linestringMap=null;var a=arguments[0];this.linestringMap=a}function uf(){this.tps=null;var a=arguments[0];this.tps=a}function vf(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var a=arguments[0];this.seg=a,this.segLen=a.getLength()}function wf(){}function xf(){}function yf(){}function zf(){if(this.p=null,1===arguments.length){var a=arguments[0];this.p=new l(a)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.p=new l(b,c)}else if(3===arguments.length){var d=arguments[0],e=arguments[1],f=arguments[2];this.p=new l(d,e,f)}}function Af(){this._isOnConstraint=null,this.constraint=null;var a=arguments[0];zf.call(this,a)}function Bf(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function Cf(){this.subdiv=null,this.isUsingTolerance=!1;var a=arguments[0];this.subdiv=a,this.isUsingTolerance=a.getTolerance()>0}function Df(){}function Ef(){this.subdiv=null,this.lastEdge=null;var a=arguments[0];this.subdiv=a,this.init()}function Ff(){if(this.seg=null,1===arguments.length){if("string"==typeof arguments[0]){var a=arguments[0];i.call(this,a)}else if(arguments[0]instanceof ib){var b=arguments[0];i.call(this,"Locate failed to converge (at edge: "+b+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new ib(b)}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];i.call(this,Ff.msgWithSpatial(c,d)),this.seg=new ib(d)}}function Gf(){}function Hf(){this.visitedKey=0,this.quadEdges=new t,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new ib,this.triEdges=new Array(3).fill(null);var a=arguments[0],b=arguments[1];this.tolerance=b,this.edgeCoincidenceTolerance=b/Hf.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(a),this.startingEdge=this.initSubdiv(),this.locator=new Ef(this)}function If(){}function Jf(){this.triList=new t}function Kf(){this.triList=new t}function Lf(){this.coordList=new u,this.triCoords=new t}function Mf(){if(this.ls=null,this.data=null,2===arguments.length){var a=arguments[0],b=arguments[1];this.ls=new ib(a,b)}else if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];this.ls=new ib(c,d),this.data=e}else if(6===arguments.length){var f=arguments[0],g=arguments[1],h=arguments[2],i=arguments[3],j=arguments[4],k=arguments[5];Mf.call(this,new l(f,g,h),new l(i,j,k))}else if(7===arguments.length){var m=arguments[0],n=arguments[1],o=arguments[2],p=arguments[3],q=arguments[4],r=arguments[5],s=arguments[6];Mf.call(this,new l(m,n,o),new l(p,q,r),s)}}function Nf(){}function Of(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length){var a=arguments[0],b=arguments[1];this.p=new l(a),this.left=null,this.right=null,this.count=1,this.data=b}else if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];this.p=new l(c,d),this.left=null,this.right=null,this.count=1,this.data=e}}function Pf(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length)Pf.call(this,0);else if(1===arguments.length){var a=arguments[0];this.tolerance=a}}function Qf(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var a=arguments[0],b=arguments[1];this.p=a,this.tolerance=b}function Rf(){this.initialVertices=null,this.segVertices=null,this.segments=new t,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new xf,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var a=arguments[0],b=arguments[1];this.initialVertices=new t(a),this.tolerance=b,this.kdt=new Pf(b)}function Sf(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Tf(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new ba}function Uf(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Vf(){}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(a){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var b=Object(this),c=Math.max(Math.min(b.length,9007199254740991),0)||0,d=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;d=d<0?Math.max(c+d,0):Math.min(d,c);var e=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:c;for(e=e<0?Math.max(c+arguments[2],0):Math.min(e,c);d<e;)b[d]=a,++d;return b},writable:!0}),Number.isFinite=Number.isFinite||function(a){return"number"==typeof a&&isFinite(a)},Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(a){return a!==a},Math.trunc=Math.trunc||function(a){return a<0?Math.ceil(a):Math.floor(a)};var Wf=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};Wf(b.prototype,{interfaces_:function(){return[]},getClass:function(){return b}}),b.equalsWithTolerance=function(a,b,c){return Math.abs(a-b)<=c},d.isNaN=function(a){return Number.isNaN(a)},d.doubleToLongBits=function(a){return a},d.longBitsToDouble=function(a){return a},d.isInfinite=function(a){return!Number.isFinite(a)},d.MAX_VALUE=Number.MAX_VALUE,i.prototype=Object.create(Error.prototype),i.prototype.constructor=Error;var Xf=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a};Xf(j,i),Wf(j.prototype,{interfaces_:function(){return[]},getClass:function(){return j}}),Wf(k.prototype,{interfaces_:function(){return[]},getClass:function(){return k}}),k.shouldNeverReachHere=function(){if(0===arguments.length)k.shouldNeverReachHere(null);else if(1===arguments.length){var a=arguments[0];throw new j("Should never reach here"+(null!==a?": "+a:""))}},k.isTrue=function(){if(1===arguments.length){var a=arguments[0];k.isTrue(a,null)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];if(!b)throw null===c?new j:new j(c)}},k.equals=function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];k.equals(a,b,null)}else if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];if(!d.equals(c))throw new j("Expected "+c+" but encountered "+d+(null!==e?": "+e:""))}},Wf(l.prototype,{setOrdinate:function(a,b){switch(a){case l.X:this.x=b;break;case l.Y:this.y=b;break;case l.Z:this.z=b;break;default:throw new c("Invalid ordinate index: "+a)}},equals2D:function(){if(1===arguments.length){var a=arguments[0];return this.x===a.x&&this.y===a.y}if(2===arguments.length){var c=arguments[0],d=arguments[1];return!!b.equalsWithTolerance(this.x,c.x,d)&&!!b.equalsWithTolerance(this.y,c.y,d)}},getOrdinate:function(a){switch(a){case l.X:return this.x;case l.Y:return this.y;case l.Z:return this.z}throw new c("Invalid ordinate index: "+a)},equals3D:function(a){return this.x===a.x&&this.y===a.y&&(this.z===a.z||d.isNaN(this.z)&&d.isNaN(a.z))},equals:function(a){return a instanceof l&&this.equals2D(a)},equalInZ:function(a,c){return b.equalsWithTolerance(this.z,a.z,c)},compareTo:function(a){var b=a;return this.x<b.x?-1:this.x>b.x?1:this.y<b.y?-1:this.y>b.y?1:0},clone:function(){try{var a=null;return a}catch(a){if(a instanceof CloneNotSupportedException)return k.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw a}finally{}},copy:function(){return new l(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return Math.sqrt(b*b+c*c+d*d)},distance:function(a){var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},hashCode:function(){var a=17;return a=37*a+l.hashCode(this.x),a=37*a+l.hashCode(this.y)},setCoordinate:function(a){this.x=a.x,this.y=a.y,this.z=a.z},interfaces_:function(){return[e,f,h]},getClass:function(){return l}}),l.hashCode=function(){if(1===arguments.length){var a=arguments[0],b=d.doubleToLongBits(a);return Math.trunc(b^b>>>32)}},Wf(m.prototype,{compare:function(a,b){var c=a,d=b,e=m.compare(c.x,d.x);if(0!==e)return e;var f=m.compare(c.y,d.y);if(0!==f)return f;if(this.dimensionsToTest<=2)return 0;var g=m.compare(c.z,d.z);return g},interfaces_:function(){return[g]},getClass:function(){return m}}),m.compare=function(a,b){return a<b?-1:a>b?1:d.isNaN(a)?d.isNaN(b)?0:-1:d.isNaN(b)?1:0},l.DimensionalComparator=m,l.serialVersionUID=0x5cbf2c235c7e5800,l.NULL_ORDINATE=d.NaN,l.X=0,l.Y=1,l.Z=2,n.prototype.hasNext=function(){},n.prototype.next=function(){},n.prototype.remove=function(){},o.prototype.add=function(){},o.prototype.addAll=function(){},o.prototype.isEmpty=function(){},o.prototype.iterator=function(){},o.prototype.size=function(){},o.prototype.toArray=function(){},o.prototype.remove=function(){},p.prototype=new Error,p.prototype.name="IndexOutOfBoundsException",q.prototype=Object.create(o.prototype),q.prototype.constructor=q,q.prototype.get=function(){},q.prototype.set=function(){},q.prototype.isEmpty=function(){},r.prototype=new Error,r.prototype.name="NoSuchElementException",s.prototype=new Error,s.prototype.name="OperationNotSupported",t.prototype=Object.create(q.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[q,o]},t.prototype.add=function(a){return 1===arguments.length?this.array_.push(a):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(a){for(var b=a.iterator();b.hasNext();)this.add(b.next());return!0},t.prototype.set=function(a,b){var c=this.array_[a];return this.array_[a]=b,c},t.prototype.iterator=function(){return new Yf(this)},t.prototype.get=function(a){if(a<0||a>=this.size())throw new p;return this.array_[a]},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var a=[],b=0,c=this.array_.length;b<c;b++)a.push(this.array_[b]);return a},t.prototype.remove=function(a){for(var b=!1,c=0,d=this.array_.length;c<d;c++)if(this.array_[c]===a){this.array_.splice(c,1),b=!0;break}return b};var Yf=function(a){this.arrayList_=a,this.position_=0};Yf.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},Yf.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Yf.prototype.set=function(a){return this.arrayList_.set(this.position_-1,a)},Yf.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},Xf(u,t),Wf(u.prototype,{getCoordinate:function(a){return this.get(a)},addAll:function(){if(2===arguments.length){for(var a=arguments[0],b=arguments[1],c=!1,d=a.iterator();d.hasNext();)this.add(d.next(),b),c=!0;return c}return t.prototype.addAll.apply(this,arguments)},clone:function a(){for(var a=t.prototype.clone.call(this),b=0;b<this.size();b++)a.add(b,this.get(b).copy());return a},toCoordinateArray:function(){return this.toArray(u.coordArrayType)},add:function(){if(1===arguments.length){var a=arguments[0];t.prototype.add.call(this,a)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var b=arguments[0],c=arguments[1];return this.add(b,c,!0),!0}if(arguments[0]instanceof l&&"boolean"==typeof arguments[1]){var d=arguments[0],e=arguments[1];if(!e&&this.size()>=1){var f=this.get(this.size()-1);if(f.equals2D(d))return null}t.prototype.add.call(this,d)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var g=arguments[0],h=arguments[1];return this.add(g,h),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],j=arguments[1],k=arguments[2];if(k)for(var m=0;m<i.length;m++)this.add(i[m],j);else for(var m=i.length-1;m>=0;m--)this.add(i[m],j);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof l){var n=arguments[0],o=arguments[1],p=arguments[2];if(!p){var q=this.size();if(q>0){if(n>0){var r=this.get(n-1);if(r.equals2D(o))return null}if(n<q){var s=this.get(n);if(s.equals2D(o))return null}}}t.prototype.add.call(this,n,o)}}else if(4===arguments.length){var u=arguments[0],v=arguments[1],w=arguments[2],x=arguments[3],y=1;w>x&&(y=-1);for(var m=w;m!==x;m+=y)this.add(u[m],v);return!0}},closeRing:function(){this.size()>0&&this.add(new l(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return u}}),u.coordArrayType=new Array(0).fill(null),Wf(v.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(a){if(!(a instanceof v))return!1;var b=a;return this.isNull()?b.isNull():this.maxx===b.getMaxX()&&this.maxy===b.getMaxY()&&this.minx===b.getMinX()&&this.miny===b.getMinY()},intersection:function(a){if(this.isNull()||a.isNull()||!this.intersects(a))return new v;var b=this.minx>a.minx?this.minx:a.minx,c=this.miny>a.miny?this.miny:a.miny,d=this.maxx<a.maxx?this.maxx:a.maxx,e=this.maxy<a.maxy?this.maxy:a.maxy;return new v(b,d,c,e)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof l){var a=arguments[0];return this.covers(a.x,a.y)}if(arguments[0]instanceof v){var b=arguments[0];return!this.isNull()&&!b.isNull()&&(b.getMinX()>=this.minx&&b.getMaxX()<=this.maxx&&b.getMinY()>=this.miny&&b.getMaxY()<=this.maxy)}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];return!this.isNull()&&(c>=this.minx&&c<=this.maxx&&d>=this.miny&&d<=this.maxy)}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof v){var a=arguments[0];return!this.isNull()&&!a.isNull()&&!(a.minx>this.maxx||a.maxx<this.minx||a.miny>this.maxy||a.maxy<this.miny)}if(arguments[0]instanceof l){var b=arguments[0];return this.intersects(b.x,b.y)}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];return!this.isNull()&&!(c>this.maxx||c<this.minx||d>this.maxy||d<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof l){var a=arguments[0];this.expandToInclude(a.x,a.y)}else if(arguments[0]instanceof v){var b=arguments[0];if(b.isNull())return null;this.isNull()?(this.minx=b.getMinX(),this.maxx=b.getMaxX(),this.miny=b.getMinY(),this.maxy=b.getMaxY()):(b.minx<this.minx&&(this.minx=b.minx),b.maxx>this.maxx&&(this.maxx=b.maxx),b.miny<this.miny&&(this.miny=b.miny),b.maxy>this.maxy&&(this.maxy=b.maxy))}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];this.isNull()?(this.minx=c,this.maxx=c,this.miny=d,this.maxy=d):(c<this.minx&&(this.minx=c),c>this.maxx&&(this.maxx=c),d<this.miny&&(this.miny=d),d>this.maxy&&(this.maxy=d))}},minExtent:function(){if(this.isNull())return 0;var a=this.getWidth(),b=this.getHeight();return a<b?a:b},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(a){var b=a;return this.isNull()?b.isNull()?0:-1:b.isNull()?1:this.minx<b.minx?-1:this.minx>b.minx?1:this.miny<b.miny?-1:this.miny>b.miny?1:this.maxx<b.maxx?-1:this.maxx>b.maxx?1:this.maxy<b.maxy?-1:this.maxy>b.maxy?1:0},translate:function(a,b){return this.isNull()?null:void this.init(this.getMinX()+a,this.getMaxX()+a,this.getMinY()+b,this.getMaxY()+b)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var a=this.getWidth(),b=this.getHeight();return a>b?a:b},expandBy:function(){if(1===arguments.length){var a=arguments[0];this.expandBy(a,a)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];if(this.isNull())return null;this.minx-=b,this.maxx+=b,this.miny-=c,this.maxy+=c,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof v){var a=arguments[0];return this.covers(a)}if(arguments[0]instanceof l){var b=arguments[0];return this.covers(b)}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];return this.covers(c,d)}},centre:function(){return this.isNull()?null:new l((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof l){var a=arguments[0];this.init(a.x,a.x,a.y,a.y)}else if(arguments[0]instanceof v){var b=arguments[0];this.minx=b.minx,this.maxx=b.maxx,this.miny=b.miny,this.maxy=b.maxy}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];this.init(c.x,d.x,c.y,d.y)}else if(4===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2],h=arguments[3];e<f?(this.minx=e,this.maxx=f):(this.minx=f,this.maxx=e),g<h?(this.miny=g,this.maxy=h):(this.miny=h,this.maxy=g)}},getMaxY:function(){return this.maxy},distance:function(a){if(this.intersects(a))return 0;var b=0;this.maxx<a.minx?b=a.minx-this.maxx:this.minx>a.maxx&&(b=this.minx-a.maxx);var c=0;return this.maxy<a.miny?c=a.miny-this.maxy:this.miny>a.maxy&&(c=this.miny-a.maxy),0===b?c:0===c?b:Math.sqrt(b*b+c*c)},hashCode:function(){var a=17;return a=37*a+l.hashCode(this.minx),a=37*a+l.hashCode(this.maxx),a=37*a+l.hashCode(this.miny),a=37*a+l.hashCode(this.maxy)},interfaces_:function(){return[e,h]},getClass:function(){return v}}),v.intersects=function(){if(3===arguments.length){var a=arguments[0],b=arguments[1],c=arguments[2];return c.x>=(a.x<b.x?a.x:b.x)&&c.x<=(a.x>b.x?a.x:b.x)&&c.y>=(a.y<b.y?a.y:b.y)&&c.y<=(a.y>b.y?a.y:b.y)}if(4===arguments.length){var d=arguments[0],e=arguments[1],f=arguments[2],g=arguments[3],h=Math.min(f.x,g.x),i=Math.max(f.x,g.x),j=Math.min(d.x,e.x),k=Math.max(d.x,e.x);return!(j>i)&&(!(k<h)&&(h=Math.min(f.y,g.y),i=Math.max(f.y,g.y),j=Math.min(d.y,e.y),k=Math.max(d.y,e.y),!(j>i)&&!(k<h)))}},v.serialVersionUID=0x51845cd552189800,Xf(x,w),Wf(x.prototype,{interfaces_:function(){return[]},getClass:function(){return x}}),Wf(y.prototype,{interfaces_:function(){return[]},getClass:function(){return y}}),y.toLocationSymbol=function(a){switch(a){case y.EXTERIOR:return"e";case y.BOUNDARY:return"b";case y.INTERIOR:return"i";case y.NONE:return"-"}throw new c("Unknown location value: "+a)},y.INTERIOR=0,y.BOUNDARY=1,y.EXTERIOR=2,y.NONE=-1;var Zf=function(a,b){return a.interfaces_&&a.interfaces_().indexOf(b)>-1};Wf(z.prototype,{interfaces_:function(){return[]},getClass:function(){return z}}),z.log10=function(a){var b=Math.log(a);return d.isInfinite(b)?b:d.isNaN(b)?b:b/z.LOG_10},z.min=function(a,b,c,d){var e=a;return b<e&&(e=b),c<e&&(e=c),d<e&&(e=d),e},z.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var a=arguments[0],b=arguments[1],c=arguments[2];return a<b?b:a>c?c:a}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var d=arguments[0],e=arguments[1],f=arguments[2];return d<e?e:d>f?f:d}},z.wrap=function(a,b){return a<0?b- -a%b:a%b},z.max=function(){if(3===arguments.length){var a=arguments[0],b=arguments[1],c=arguments[2],d=a;return b>d&&(d=b),c>d&&(d=c),d}if(4===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2],h=arguments[3],d=e;return f>d&&(d=f),g>d&&(d=g),h>d&&(d=h),d}},z.average=function(a,b){return(a+b)/2},z.LOG_10=Math.log(10),A.prototype.append=function(a){this.str+=a},A.prototype.setCharAt=function(a,b){this.str=this.str.substr(0,a)+b+this.str.substr(a+1)},A.prototype.toString=function(a){return this.str},B.prototype.intValue=function(){return this.value},B.prototype.compareTo=function(a){return this.value<a?-1:this.value>a?1:0},B.isNaN=function(a){return Number.isNaN(a)},C.isWhitespace=function(a){return a<=32&&a>=0||127==a},C.toUpperCase=function(a){return a.toUpperCase()},Wf(D.prototype,{le:function(a){return this.hi<a.hi||this.hi===a.hi&&this.lo<=a.lo},extractSignificantDigits:function(a,b){var c=this.abs(),d=D.magnitude(c.hi),e=D.TEN.pow(d);c=c.divide(e),c.gt(D.TEN)?(c=c.divide(D.TEN),d+=1):c.lt(D.ONE)&&(c=c.multiply(D.TEN),d-=1);for(var f=d+1,g=new A,h=D.MAX_PRINT_DIGITS-1,i=0;i<=h;i++){a&&i===f&&g.append(".");var j=Math.trunc(c.hi);if(j<0)break;var k=!1,l=0;j>9?(k=!0,l="9"):l="0"+j,g.append(l),c=c.subtract(D.valueOf(j)).multiply(D.TEN),k&&c.selfAdd(D.TEN);var m=!0,n=D.magnitude(c.hi);if(n<0&&Math.abs(n)>=h-i&&(m=!1),!m)break}return b[0]=d,g.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof D){var a=arguments[0];return this.add(a.negate())}if("number"==typeof arguments[0]){var b=arguments[0];return this.add(-b)}},equals:function(){if(1===arguments.length){var a=arguments[0];return this.hi===a.hi&&this.lo===a.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof D){var a=arguments[0];return this.isNaN()?this:this.selfAdd(-a.hi,-a.lo)}if("number"==typeof arguments[0]){var b=arguments[0];return this.isNaN()?this:this.selfAdd(-b,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(a){return this.le(a)?this:a},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof D){var a=arguments[0];return this.selfDivide(a.hi,a.lo)}if("number"==typeof arguments[0]){var b=arguments[0];return this.selfDivide(b,0)}}else if(2===arguments.length){var c=arguments[0],d=arguments[1],e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null;return i=this.hi/c,j=D.SPLIT*i,e=j-i,l=D.SPLIT*c,e=j-e,f=i-e,g=l-c,k=i*c,g=l-g,h=c-g,l=e*g-k+e*h+f*g+f*h,j=(this.hi-k-l+this.lo-i*d)/c,l=i+j,this.hi=l,this.lo=i-l+j,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof D){var a=arguments[0],b=null,c=null,e=null,f=null,g=null,h=null,i=null,j=null;g=this.hi/a.hi,h=D.SPLIT*g,b=h-g,j=D.SPLIT*a.hi,b=h-b,c=g-b,e=j-a.hi,i=g*a.hi,e=j-e,f=a.hi-e,j=b*e-i+b*f+c*e+c*f,h=(this.hi-i-j+this.lo-g*a.lo)/a.hi,j=g+h;var k=j,l=g-j+h;return new D(k,l)}if("number"==typeof arguments[0]){var m=arguments[0];return d.isNaN(m)?D.createNaN():D.copy(this).selfDivide(m,0)}},ge:function(a){return this.hi>a.hi||this.hi===a.hi&&this.lo>=a.lo},pow:function(a){if(0===a)return D.valueOf(1);var b=new D(this),c=D.valueOf(1),d=Math.abs(a);if(d>1)for(;d>0;)d%2===1&&c.selfMultiply(b),d/=2,d>0&&(b=b.sqr());else c=b;return a<0?c.reciprocal():c},ceil:function(){if(this.isNaN())return D.NaN;var a=Math.ceil(this.hi),b=0;return a===this.hi&&(b=Math.ceil(this.lo)),new D(a,b)},compareTo:function(a){var b=a;return this.hi<b.hi?-1:this.hi>b.hi?1:this.lo<b.lo?-1:this.lo>b.lo?1:0},rint:function(){if(this.isNaN())return this;var a=this.add(.5);return a.floor()},setValue:function(){if(arguments[0]instanceof D){var a=arguments[0];return this.init(a),this}if("number"==typeof arguments[0]){var b=arguments[0];return this.init(b),this}},max:function(a){return this.ge(a)?this:a},sqrt:function(){if(this.isZero())return D.valueOf(0);if(this.isNegative())return D.NaN;var a=1/Math.sqrt(this.hi),b=this.hi*a,c=D.valueOf(b),d=this.subtract(c.sqr()),e=d.hi*(.5*a);return c.add(e)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof D){var a=arguments[0];return this.selfAdd(a.hi,a.lo)}if("number"==typeof arguments[0]){var b=arguments[0],c=null,d=null,e=null,f=null,g=null,h=null;return e=this.hi+b,g=e-this.hi,f=e-g,f=b-g+(this.hi-f),h=f+this.lo,c=e+h,d=h+(e-c),this.hi=c+d,this.lo=d+(c-this.hi),this}}else if(2===arguments.length){var i=arguments[0],j=arguments[1],c=null,d=null,k=null,l=null,e=null,f=null,g=null,h=null;e=this.hi+i,k=this.lo+j,g=e-this.hi,h=k-this.lo,f=e-g,l=k-h,f=i-g+(this.hi-f),l=j-h+(this.lo-l),g=f+k,c=e+g,d=g+(e-c),g=l+d;var m=c+g,n=g+(c-m);return this.hi=m,this.lo=n,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof D){var a=arguments[0];return this.selfMultiply(a.hi,a.lo)}if("number"==typeof arguments[0]){var b=arguments[0];return this.selfMultiply(b,0)}}else if(2===arguments.length){var c=arguments[0],d=arguments[1],e=null,f=null,g=null,h=null,i=null,j=null;i=D.SPLIT*this.hi,e=i-this.hi,j=D.SPLIT*c,e=i-e,f=this.hi-e,g=j-c,i=this.hi*c,g=j-g,h=c-g,j=e*g-i+e*h+f*g+f*h+(this.hi*d+this.lo*c);var k=i+j;e=i-k;var l=j+e;return this.hi=k,this.lo=l,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return D.NaN;var a=Math.floor(this.hi),b=0;return a===this.hi&&(b=Math.floor(this.lo)),new D(a,b)},negate:function(){return this.isNaN()?this:new D(-this.hi,-this.lo)},clone:function(){try{return null}catch(a){if(a instanceof CloneNotSupportedException)return null;throw a}finally{}},multiply:function(){if(arguments[0]instanceof D){var a=arguments[0];return a.isNaN()?D.createNaN():D.copy(this).selfMultiply(a)}if("number"==typeof arguments[0]){var b=arguments[0];return d.isNaN(b)?D.createNaN():D.copy(this).selfMultiply(b,0)}},isNaN:function(){return d.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var a=D.magnitude(this.hi);return a>=-3&&a<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var a=this.getSpecialNumberString();if(null!==a)return a;var b=new Array(1).fill(null),c=this.extractSignificantDigits(!0,b),d=b[0]+1,e=c;if("."===c.charAt(0))e="0"+c;else if(d<0)e="0."+D.stringOfChar("0",-d)+c;else if(c.indexOf(".")===-1){var f=d-c.length,g=D.stringOfChar("0",f);e=c+g+".0"}return this.isNegative()?"-"+e:e},reciprocal:function(){var a=null,b=null,c=null,d=null,e=null,f=null,g=null,h=null;e=1/this.hi,f=D.SPLIT*e,a=f-e,h=D.SPLIT*this.hi,a=f-a,b=e-a,c=h-this.hi,g=e*this.hi,c=h-c,d=this.hi-c,h=a*c-g+a*d+b*c+b*d,f=(1-g-h-e*this.lo)/this.hi;var i=e+f,j=e-i+f;return new D(i,j)},toSciNotation:function(){if(this.isZero())return D.SCI_NOT_ZERO;var a=this.getSpecialNumberString();if(null!==a)return a;var b=new Array(1).fill(null),c=this.extractSignificantDigits(!1,b),d=D.SCI_NOT_EXPONENT_CHAR+b[0];if("0"===c.charAt(0))throw new IllegalStateException("Found leading zero: "+c);var e="";c.length>1&&(e=c.substring(1));var f=c.charAt(0)+"."+e;return this.isNegative()?"-"+f+d:f+d},abs:function(){return this.isNaN()?D.NaN:this.isNegative()?this.negate():new D(this)},isPositive:function(){return this.hi>0||0===this.hi&&this.lo>0},lt:function(a){return this.hi<a.hi||this.hi===a.hi&&this.lo<a.lo},add:function(){if(arguments[0]instanceof D){var a=arguments[0];return D.copy(this).selfAdd(a)}if("number"==typeof arguments[0]){var b=arguments[0];return D.copy(this).selfAdd(b)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var a=arguments[0];this.hi=a,this.lo=0}else if(arguments[0]instanceof D){var b=arguments[0];this.hi=b.hi,this.lo=b.lo}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];this.hi=c,this.lo=d}},gt:function(a){return this.hi>a.hi||this.hi===a.hi&&this.lo>a.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?D.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[h,e,f]},getClass:function(){return D}}),D.sqr=function(a){return D.valueOf(a).selfMultiply(a)},D.valueOf=function(){if("string"==typeof arguments[0]){var a=arguments[0];return D.parse(a)}if("number"==typeof arguments[0]){var b=arguments[0];return new D(b)}},D.sqrt=function(a){return D.valueOf(a).sqrt()},D.parse=function(a){for(var b=0,c=a.length;C.isWhitespace(a.charAt(b));)b++;var d=!1;if(b<c){var e=a.charAt(b);"-"!==e&&"+"!==e||(b++,"-"===e&&(d=!0))}for(var f=new D,g=0,h=0,i=0;;){if(b>=c)break;var j=a.charAt(b);if(b++,C.isDigit(j)){var k=j-"0";f.selfMultiply(D.TEN),f.selfAdd(k),g++}else{if("."!==j){if("e"===j||"E"===j){var l=a.substring(b);try{i=B.parseInt(l)}catch(b){throw b instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+l+" in string "+a):b}finally{}break}throw new NumberFormatException("Unexpected character '"+j+"' at position "+b+" in string "+a)}h=g}}var m=f,n=g-h-i;if(0===n)m=f;else if(n>0){var o=D.TEN.pow(n);m=f.divide(o)}else if(n<0){var o=D.TEN.pow(-n);m=f.multiply(o)}return d?m.negate():m},D.createNaN=function(){return new D(d.NaN,d.NaN)},D.copy=function(a){return new D(a)},D.magnitude=function(a){var b=Math.abs(a),c=Math.log(b)/Math.log(10),d=Math.trunc(Math.floor(c)),e=Math.pow(10,d);return 10*e<=b&&(d+=1),d},D.stringOfChar=function(a,b){for(var c=new A,d=0;d<b;d++)c.append(a);return c.toString()},D.PI=new D(3.141592653589793,1.2246467991473532e-16),D.TWO_PI=new D(6.283185307179586,2.4492935982947064e-16),D.PI_2=new D(1.5707963267948966,6.123233995736766e-17),D.E=new D(2.718281828459045,1.4456468917292502e-16),D.NaN=new D(d.NaN,d.NaN),D.EPS=1.23259516440783e-32,D.SPLIT=134217729,D.MAX_PRINT_DIGITS=32,D.TEN=D.valueOf(10),D.ONE=D.valueOf(1),D.SCI_NOT_EXPONENT_CHAR="E",D.SCI_NOT_ZERO="0.0E0",Wf(E.prototype,{interfaces_:function(){return[]},getClass:function(){return E}}),E.orientationIndex=function(a,b,c){var d=E.orientationIndexFilter(a,b,c);if(d<=1)return d;var e=D.valueOf(b.x).selfAdd(-a.x),f=D.valueOf(b.y).selfAdd(-a.y),g=D.valueOf(c.x).selfAdd(-b.x),h=D.valueOf(c.y).selfAdd(-b.y);return e.selfMultiply(h).selfSubtract(f.selfMultiply(g)).signum()},E.signOfDet2x2=function(a,b,c,d){var e=a.multiply(d).selfSubtract(b.multiply(c));return e.signum()},E.intersection=function(a,b,c,d){
var e=D.valueOf(d.y).selfSubtract(c.y).selfMultiply(D.valueOf(b.x).selfSubtract(a.x)),f=D.valueOf(d.x).selfSubtract(c.x).selfMultiply(D.valueOf(b.y).selfSubtract(a.y)),g=e.subtract(f),h=D.valueOf(d.x).selfSubtract(c.x).selfMultiply(D.valueOf(a.y).selfSubtract(c.y)),i=D.valueOf(d.y).selfSubtract(c.y).selfMultiply(D.valueOf(a.x).selfSubtract(c.x)),j=h.subtract(i),k=j.selfDivide(g).doubleValue(),m=D.valueOf(a.x).selfAdd(D.valueOf(b.x).selfSubtract(a.x).selfMultiply(k)).doubleValue(),n=D.valueOf(b.x).selfSubtract(a.x).selfMultiply(D.valueOf(a.y).selfSubtract(c.y)),o=D.valueOf(b.y).selfSubtract(a.y).selfMultiply(D.valueOf(a.x).selfSubtract(c.x)),p=n.subtract(o),q=p.selfDivide(g).doubleValue(),r=D.valueOf(c.y).selfAdd(D.valueOf(d.y).selfSubtract(c.y).selfMultiply(q)).doubleValue();return new l(m,r)},E.orientationIndexFilter=function(a,b,c){var d=null,e=(a.x-c.x)*(b.y-c.y),f=(a.y-c.y)*(b.x-c.x),g=e-f;if(e>0){if(f<=0)return E.signum(g);d=e+f}else{if(!(e<0))return E.signum(g);if(f>=0)return E.signum(g);d=-e-f}var h=E.DP_SAFE_EPSILON*d;return g>=h||-g>=h?E.signum(g):2},E.signum=function(a){return a>0?1:a<0?-1:0},E.DP_SAFE_EPSILON=1e-15,Wf(F.prototype,{setOrdinate:function(a,b,c){},size:function(){},getOrdinate:function(a,b){},getCoordinate:function(){if(1===arguments.length){arguments[0]}else if(2===arguments.length){arguments[0],arguments[1]}},getCoordinateCopy:function(a){},getDimension:function(){},getX:function(a){},clone:function(){},expandEnvelope:function(a){},copy:function(){},getY:function(a){},toCoordinateArray:function(){},interfaces_:function(){return[f]},getClass:function(){return F}}),F.X=0,F.Y=1,F.Z=2,F.M=3,G.arraycopy=function(a,b,c,d,e){for(var f=0,g=b;g<b+e;g++)c[d+f]=a[g],f++},G.getProperty=function(a){return{"line.separator":"\n"}[a]},Wf(H.prototype,{getY:function(){var a=this.y/this.w;if(d.isNaN(a)||d.isInfinite(a))throw new x;return a},getX:function(){var a=this.x/this.w;if(d.isNaN(a)||d.isInfinite(a))throw new x;return a},getCoordinate:function(){var a=new l;return a.x=this.getX(),a.y=this.getY(),a},interfaces_:function(){return[]},getClass:function(){return H}}),H.intersection=function(a,b,c,e){var f=a.y-b.y,g=b.x-a.x,h=a.x*b.y-b.x*a.y,i=c.y-e.y,j=e.x-c.x,k=c.x*e.y-e.x*c.y,m=g*k-j*h,n=i*h-f*k,o=f*j-i*g,p=m/o,q=n/o;if(d.isNaN(p)||d.isInfinite(p)||d.isNaN(q)||d.isInfinite(q))throw new x;return new l(p,q)},Wf(I.prototype,{create:function(){if(1===arguments.length){if(arguments[0]instanceof Array){arguments[0]}else if(Zf(arguments[0],F)){arguments[0]}}else if(2===arguments.length){arguments[0],arguments[1]}},interfaces_:function(){return[]},getClass:function(){return I}}),Wf(J.prototype,{filter:function(a){},interfaces_:function(){return[]},getClass:function(){return J}}),Wf(K.prototype,{isGeometryCollection:function(){return this.getSortIndex()===K.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(a){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof K){var a=arguments[0];return null!==a&&this.equalsTopo(a)}if(arguments[0]instanceof Object){var b=arguments[0];if(!(b instanceof K))return!1;var c=b;return this.equalsExact(c)}}},equalsExact:function(a){return this===a||this.equalsExact(a,0)},geometryChanged:function(){this.apply(K.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(a){return null!==a&&this.norm().equalsExact(a.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var a=arguments[0],b=a;return this.getSortIndex()!==b.getSortIndex()?this.getSortIndex()-b.getSortIndex():this.isEmpty()&&b.isEmpty()?0:this.isEmpty()?-1:b.isEmpty()?1:this.compareToSameClass(a)}if(2===arguments.length){var c=arguments[0],d=arguments[1],b=c;return this.getSortIndex()!==b.getSortIndex()?this.getSortIndex()-b.getSortIndex():this.isEmpty()&&b.isEmpty()?0:this.isEmpty()?-1:b.isEmpty()?1:this.compareToSameClass(c,d)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(a){if(a.getSortIndex()===K.SORTINDEX_GEOMETRYCOLLECTION)throw new c("This method does not support GeometryCollection arguments")},equal:function(a,b,c){return 0===c?a.equals(b):a.distance(b)<=c},norm:function(){var a=this.copy();return a.normalize(),a},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new v(this.envelope)},setSRID:function(a){this.SRID=a},setUserData:function(a){this.userData=a},compare:function(a,b){for(var c=a.iterator(),d=b.iterator();c.hasNext()&&d.hasNext();){var e=c.next(),f=d.next(),g=e.compareTo(f);if(0!==g)return g}return c.hasNext()?1:d.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===K.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===K.SORTINDEX_MULTIPOINT||this.getSortIndex()===K.SORTINDEX_MULTILINESTRING||this.getSortIndex()===K.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[f,e,h]},getClass:function(){return K}}),K.hasNonEmptyElements=function(a){for(var b=0;b<a.length;b++)if(!a[b].isEmpty())return!0;return!1},K.hasNullElements=function(a){for(var b=0;b<a.length;b++)if(null===a[b])return!0;return!1},K.serialVersionUID=0x799ea46522854c00,K.SORTINDEX_POINT=0,K.SORTINDEX_MULTIPOINT=1,K.SORTINDEX_LINESTRING=2,K.SORTINDEX_LINEARRING=3,K.SORTINDEX_MULTILINESTRING=4,K.SORTINDEX_POLYGON=5,K.SORTINDEX_MULTIPOLYGON=6,K.SORTINDEX_GEOMETRYCOLLECTION=7,K.geometryChangedFilter={interfaces_:function(){return[J]},filter:function(a){a.geometryChangedAction()}},Wf(L.prototype,{filter:function(a){},interfaces_:function(){return[]},getClass:function(){return L}}),Wf(M.prototype,{isInBoundary:function(a){},interfaces_:function(){return[]},getClass:function(){return M}}),Wf(N.prototype,{isInBoundary:function(a){return a%2===1},interfaces_:function(){return[M]},getClass:function(){return N}}),Wf(O.prototype,{isInBoundary:function(a){return a>0},interfaces_:function(){return[M]},getClass:function(){return O}}),Wf(P.prototype,{isInBoundary:function(a){return a>1},interfaces_:function(){return[M]},getClass:function(){return P}}),Wf(Q.prototype,{isInBoundary:function(a){return 1===a},interfaces_:function(){return[M]},getClass:function(){return Q}}),M.Mod2BoundaryNodeRule=N,M.EndPointBoundaryNodeRule=O,M.MultiValentEndPointBoundaryNodeRule=P,M.MonoValentEndPointBoundaryNodeRule=Q,M.MOD2_BOUNDARY_RULE=new N,M.ENDPOINT_BOUNDARY_RULE=new O,M.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new P,M.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new Q,M.OGC_SFS_BOUNDARY_RULE=M.MOD2_BOUNDARY_RULE,Wf(R.prototype,{interfaces_:function(){return[]},getClass:function(){return R}}),R.isRing=function(a){return!(a.length<4)&&!!a[0].equals2D(a[a.length-1])},R.ptNotInList=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(R.indexOf(d,b)<0)return d}return null},R.scroll=function(a,b){var c=R.indexOf(b,a);if(c<0)return null;var d=new Array(a.length).fill(null);G.arraycopy(a,c,d,0,a.length-c),G.arraycopy(a,0,d,a.length-c,c),G.arraycopy(d,0,a,0,a.length)},R.equals=function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];if(a===b)return!0;if(null===a||null===b)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(!a[c].equals(b[c]))return!1;return!0}if(3===arguments.length){var d=arguments[0],e=arguments[1],f=arguments[2];if(d===e)return!0;if(null===d||null===e)return!1;if(d.length!==e.length)return!1;for(var c=0;c<d.length;c++)if(0!==f.compare(d[c],e[c]))return!1;return!0}},R.intersection=function(a,b){for(var c=new u,d=0;d<a.length;d++)b.intersects(a[d])&&c.add(a[d],!0);return c.toCoordinateArray()},R.hasRepeatedPoints=function(a){for(var b=1;b<a.length;b++)if(a[b-1].equals(a[b]))return!0;return!1},R.removeRepeatedPoints=function(a){if(!R.hasRepeatedPoints(a))return a;var b=new u(a,!1);return b.toCoordinateArray()},R.reverse=function(a){for(var b=a.length-1,c=Math.trunc(b/2),d=0;d<=c;d++){var e=a[d];a[d]=a[b-d],a[b-d]=e}},R.removeNull=function(a){for(var b=0,c=0;c<a.length;c++)null!==a[c]&&b++;var d=new Array(b).fill(null);if(0===b)return d;for(var e=0,c=0;c<a.length;c++)null!==a[c]&&(d[e++]=a[c]);return d},R.copyDeep=function(){if(1===arguments.length){for(var a=arguments[0],b=new Array(a.length).fill(null),c=0;c<a.length;c++)b[c]=new l(a[c]);return b}if(5===arguments.length)for(var d=arguments[0],e=arguments[1],f=arguments[2],g=arguments[3],h=arguments[4],c=0;c<h;c++)f[g+c]=new l(d[e+c])},R.isEqualReversed=function(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=b[a.length-c-1];if(0!==d.compareTo(e))return!1}return!0},R.envelope=function(a){for(var b=new v,c=0;c<a.length;c++)b.expandToInclude(a[c]);return b},R.toCoordinateArray=function(a){return a.toArray(R.coordArrayType)},R.atLeastNCoordinatesOrNothing=function(a,b){return b.length>=a?b:[]},R.indexOf=function(a,b){for(var c=0;c<b.length;c++)if(a.equals(b[c]))return c;return-1},R.increasingDirection=function(a){for(var b=0;b<Math.trunc(a.length/2);b++){var c=a.length-1-b,d=a[b].compareTo(a[c]);if(0!==d)return d}return 1},R.compare=function(a,b){for(var c=0;c<a.length&&c<b.length;){var d=a[c].compareTo(b[c]);if(0!==d)return d;c++}return c<b.length?-1:c<a.length?1:0},R.minCoordinate=function(a){for(var b=null,c=0;c<a.length;c++)(null===b||b.compareTo(a[c])>0)&&(b=a[c]);return b},R.extract=function(a,b,c){b=z.clamp(b,0,a.length),c=z.clamp(c,-1,a.length);var d=c-b+1;c<0&&(d=0),b>=a.length&&(d=0),c<b&&(d=0);var e=new Array(d).fill(null);if(0===d)return e;for(var f=0,g=b;g<=c;g++)e[f++]=a[g];return e},Wf(S.prototype,{compare:function(a,b){var c=a,d=b;return R.compare(c,d)},interfaces_:function(){return[g]},getClass:function(){return S}}),Wf(T.prototype,{compare:function(a,b){var c=a,d=b;if(c.length<d.length)return-1;if(c.length>d.length)return 1;if(0===c.length)return 0;var e=R.compare(c,d),f=R.isEqualReversed(c,d);return f?0:e},OLDcompare:function(a,b){var c=a,d=b;if(c.length<d.length)return-1;if(c.length>d.length)return 1;if(0===c.length)return 0;for(var e=R.increasingDirection(c),f=R.increasingDirection(d),g=e>0?0:c.length-1,h=f>0?0:c.length-1,i=0;i<c.length;i++){var j=c[g].compareTo(d[h]);if(0!==j)return j;g+=e,h+=f}return 0},interfaces_:function(){return[g]},getClass:function(){return T}}),R.ForwardComparator=S,R.BidirectionalComparator=T,R.coordArrayType=new Array(0).fill(null),U.prototype.get=function(){},U.prototype.put=function(){},U.prototype.size=function(){},U.prototype.values=function(){},U.prototype.entrySet=function(){},V.prototype=new U,W.prototype=new o,W.prototype.contains=function(){},X.prototype=new W,X.prototype.contains=function(a){for(var b=0,c=this.array_.length;b<c;b++){var d=this.array_[b];if(d===a)return!0}return!1},X.prototype.add=function(a){return!this.contains(a)&&(this.array_.push(a),!0)},X.prototype.addAll=function(a){for(var b=a.iterator();b.hasNext();)this.add(b.next());return!0},X.prototype.remove=function(a){throw new javascript.util.OperationNotSupported},X.prototype.size=function(){return this.array_.length},X.prototype.isEmpty=function(){return 0===this.array_.length},X.prototype.toArray=function(){for(var a=[],b=0,c=this.array_.length;b<c;b++)a.push(this.array_[b]);return a},X.prototype.iterator=function(){return new $f(this)};var $f=function(a){this.hashSet_=a,this.position_=0};$f.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},$f.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},$f.prototype.remove=function(){throw new s};var _f=0,ag=1;ba.prototype=new V,ba.prototype.get=function(a){for(var b=this.root_;null!==b;){var c=a.compareTo(b.key);if(c<0)b=b.left;else{if(!(c>0))return b.value;b=b.right}}return null},ba.prototype.put=function(a,b){if(null===this.root_)return this.root_={key:a,value:b,left:null,right:null,parent:null,color:_f,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var c,d,e=this.root_;do{if(c=e,d=a.compareTo(e.key),d<0)e=e.left;else{if(!(d>0)){var f=e.value;return e.value=b,f}e=e.right}}while(null!==e);var g={key:a,left:null,right:null,value:b,parent:c,color:_f,getValue:function(){return this.value},getKey:function(){return this.key}};return d<0?c.left=g:c.right=g,this.fixAfterInsertion(g),this.size_++,null},ba.prototype.fixAfterInsertion=function(a){for(a.color=ag;null!=a&&a!=this.root_&&a.parent.color==ag;)if(Z(a)==_(Z(Z(a)))){var b=aa(Z(Z(a)));Y(b)==ag?($(Z(a),_f),$(b,_f),$(Z(Z(a)),ag),a=Z(Z(a))):(a==aa(Z(a))&&(a=Z(a),this.rotateLeft(a)),$(Z(a),_f),$(Z(Z(a)),ag),this.rotateRight(Z(Z(a))))}else{var b=_(Z(Z(a)));Y(b)==ag?($(Z(a),_f),$(b,_f),$(Z(Z(a)),ag),a=Z(Z(a))):(a==_(Z(a))&&(a=Z(a),this.rotateRight(a)),$(Z(a),_f),$(Z(Z(a)),ag),this.rotateLeft(Z(Z(a))))}this.root_.color=_f},ba.prototype.values=function(){var a=new t,b=this.getFirstEntry();if(null!==b)for(a.add(b.value);null!==(b=ba.successor(b));)a.add(b.value);return a},ba.prototype.entrySet=function(){var a=new X,b=this.getFirstEntry();if(null!==b)for(a.add(b);null!==(b=ba.successor(b));)a.add(b);return a},ba.prototype.rotateLeft=function(a){if(null!=a){var b=a.right;a.right=b.left,null!=b.left&&(b.left.parent=a),b.parent=a.parent,null==a.parent?this.root_=b:a.parent.left==a?a.parent.left=b:a.parent.right=b,b.left=a,a.parent=b}},ba.prototype.rotateRight=function(a){if(null!=a){var b=a.left;a.left=b.right,null!=b.right&&(b.right.parent=a),b.parent=a.parent,null==a.parent?this.root_=b:a.parent.right==a?a.parent.right=b:a.parent.left=b,b.right=a,a.parent=b}},ba.prototype.getFirstEntry=function(){var a=this.root_;if(null!=a)for(;null!=a.left;)a=a.left;return a},ba.successor=function(a){if(null===a)return null;if(null!==a.right){for(var b=a.right;null!==b.left;)b=b.left;return b}for(var b=a.parent,c=a;null!==b&&c===b.right;)c=b,b=b.parent;return b},ba.prototype.size=function(){return this.size_},Wf(ca.prototype,{interfaces_:function(){return[]},getClass:function(){return ca}}),da.prototype=new W,ea.prototype=new da,ea.prototype.contains=function(a){for(var b=0,c=this.array_.length;b<c;b++){var d=this.array_[b];if(0===d.compareTo(a))return!0}return!1},ea.prototype.add=function(a){if(this.contains(a))return!1;for(var b=0,c=this.array_.length;b<c;b++){var d=this.array_[b];if(1===d.compareTo(a))return this.array_.splice(b,0,a),!0}return this.array_.push(a),!0},ea.prototype.addAll=function(a){for(var b=a.iterator();b.hasNext();)this.add(b.next());return!0},ea.prototype.remove=function(a){throw new s},ea.prototype.size=function(){return this.array_.length},ea.prototype.isEmpty=function(){return 0===this.array_.length},ea.prototype.toArray=function(){for(var a=[],b=0,c=this.array_.length;b<c;b++)a.push(this.array_[b]);return a},ea.prototype.iterator=function(){return new bg(this)};var bg=function(a){this.treeSet_=a,this.position_=0};bg.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},bg.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},bg.prototype.remove=function(){throw new s},fa.sort=function(){var a,b,c,d,e=arguments[0];if(1===arguments.length)return d=function(a,b){return a.compareTo(b)},void e.sort(d);if(2===arguments.length)c=arguments[1],d=function(a,b){return c.compare(a,b)},e.sort(d);else{if(3===arguments.length){b=e.slice(arguments[1],arguments[2]),b.sort();var f=e.slice(0,arguments[1]).concat(b,e.slice(arguments[2],e.length));for(e.splice(0,e.length),a=0;a<f.length;a++)e.push(f[a]);return}if(4===arguments.length){for(b=e.slice(arguments[1],arguments[2]),c=arguments[3],d=function(a,b){return c.compare(a,b)},b.sort(d),f=e.slice(0,arguments[1]).concat(b,e.slice(arguments[2],e.length)),e.splice(0,e.length),a=0;a<f.length;a++)e.push(f[a]);return}}},fa.asList=function(a){for(var b=new t,c=0,d=a.length;c<d;c++)b.add(a[c]);return b},Wf(ga.prototype,{interfaces_:function(){return[]},getClass:function(){return ga}}),ga.toDimensionSymbol=function(a){switch(a){case ga.FALSE:return ga.SYM_FALSE;case ga.TRUE:return ga.SYM_TRUE;case ga.DONTCARE:return ga.SYM_DONTCARE;case ga.P:return ga.SYM_P;case ga.L:return ga.SYM_L;case ga.A:return ga.SYM_A}throw new c("Unknown dimension value: "+a)},ga.toDimensionValue=function(a){switch(C.toUpperCase(a)){case ga.SYM_FALSE:return ga.FALSE;case ga.SYM_TRUE:return ga.TRUE;case ga.SYM_DONTCARE:return ga.DONTCARE;case ga.SYM_P:return ga.P;case ga.SYM_L:return ga.L;case ga.SYM_A:return ga.A}throw new c("Unknown dimension symbol: "+a)},ga.P=0,ga.L=1,ga.A=2,ga.FALSE=-1,ga.TRUE=-2,ga.DONTCARE=-3,ga.SYM_FALSE="F",ga.SYM_TRUE="T",ga.SYM_DONTCARE="*",ga.SYM_P="0",ga.SYM_L="1",ga.SYM_A="2",Wf(ha.prototype,{filter:function(a){},interfaces_:function(){return[]},getClass:function(){return ha}}),Wf(ia.prototype,{filter:function(a,b){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ia}}),Xf(ja,K),Wf(ja.prototype,{computeEnvelopeInternal:function(){for(var a=new v,b=0;b<this.geometries.length;b++)a.expandToInclude(this.geometries[b].getEnvelopeInternal());return a},getGeometryN:function(a){return this.geometries[a]},getSortIndex:function(){return K.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var a=new Array(this.getNumPoints()).fill(null),b=-1,c=0;c<this.geometries.length;c++)for(var d=this.geometries[c].getCoordinates(),e=0;e<d.length;e++)b++,a[b]=d[e];return a},getArea:function(){for(var a=0,b=0;b<this.geometries.length;b++)a+=this.geometries[b].getArea();return a},equalsExact:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];if(!this.isEquivalentClass(a))return!1;var c=a;if(this.geometries.length!==c.geometries.length)return!1;for(var d=0;d<this.geometries.length;d++)if(!this.geometries[d].equalsExact(c.geometries[d],b))return!1;return!0}return K.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var a=0;a<this.geometries.length;a++)this.geometries[a].normalize();fa.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var a=ga.FALSE,b=0;b<this.geometries.length;b++)a=Math.max(a,this.geometries[b].getBoundaryDimension());return a},getDimension:function(){for(var a=ga.FALSE,b=0;b<this.geometries.length;b++)a=Math.max(a,this.geometries[b].getDimension());return a},getLength:function(){for(var a=0,b=0;b<this.geometries.length;b++)a+=this.geometries[b].getLength();return a},getNumPoints:function(){for(var a=0,b=0;b<this.geometries.length;b++)a+=this.geometries[b].getNumPoints();return a},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var a=this.geometries.length,b=new Array(a).fill(null),c=0;c<this.geometries.length;c++)b[c]=this.geometries[c].reverse();return this.getFactory().createGeometryCollection(b)},compareToSameClass:function(){if(1===arguments.length){var a=arguments[0],b=new ea(fa.asList(this.geometries)),c=new ea(fa.asList(a.geometries));return this.compare(b,c)}if(2===arguments.length){for(var d=arguments[0],e=arguments[1],f=d,g=this.getNumGeometries(),h=f.getNumGeometries(),i=0;i<g&&i<h;){var j=this.getGeometryN(i),k=f.getGeometryN(i),l=j.compareToSameClass(k,e);if(0!==l)return l;i++}return i<g?1:i<h?-1:0}},apply:function(){if(Zf(arguments[0],L))for(var a=arguments[0],b=0;b<this.geometries.length;b++)this.geometries[b].apply(a);else if(Zf(arguments[0],ia)){var c=arguments[0];if(0===this.geometries.length)return null;for(var b=0;b<this.geometries.length&&(this.geometries[b].apply(c),!c.isDone());b++);c.isGeometryChanged()&&this.geometryChanged()}else if(Zf(arguments[0],ha)){var d=arguments[0];d.filter(this);for(var b=0;b<this.geometries.length;b++)this.geometries[b].apply(d)}else if(Zf(arguments[0],J)){var e=arguments[0];e.filter(this);for(var b=0;b<this.geometries.length;b++)this.geometries[b].apply(e)}},getBoundary:function(){return this.checkNotGeometryCollection(this),k.shouldNeverReachHere(),null},clone:function(){var a=K.prototype.clone.call(this);a.geometries=new Array(this.geometries.length).fill(null);for(var b=0;b<this.geometries.length;b++)a.geometries[b]=this.geometries[b].clone();return a},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var a=new Array(this.geometries.length).fill(null),b=0;b<a.length;b++)a[b]=this.geometries[b].copy();return new ja(a,this.factory)},isEmpty:function(){for(var a=0;a<this.geometries.length;a++)if(!this.geometries[a].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ja}}),ja.serialVersionUID=-0x4f07bcb1f857d800,Xf(ka,ja),Wf(ka.prototype,{getSortIndex:function(){return K.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];return!!this.isEquivalentClass(a)&&ja.prototype.equalsExact.call(this,a,b)}return ja.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?ga.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var a=0;a<this.geometries.length;a++)if(!this.geometries[a].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var a=this.geometries.length,b=new Array(a).fill(null),c=0;c<this.geometries.length;c++)b[a-1-c]=this.geometries[c].reverse();return this.getFactory().createMultiLineString(b)},getBoundary:function(){return new la(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var a=new Array(this.geometries.length).fill(null),b=0;b<a.length;b++)a[b]=this.geometries[b].copy();return new ka(a,this.factory)},interfaces_:function(){return[ca]},getClass:function(){return ka}}),ka.serialVersionUID=0x7155d2ab4afa8000,Wf(la.prototype,{boundaryMultiLineString:function(a){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var b=this.computeBoundaryCoordinates(a);return 1===b.length?this.geomFact.createPoint(b[0]):this.geomFact.createMultiPointFromCoords(b)},getBoundary:function(){return this.geom instanceof va?this.boundaryLineString(this.geom):this.geom instanceof ka?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(a){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(a.isClosed()){var b=this.bnRule.isInBoundary(2);return b?a.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([a.getStartPoint(),a.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(a){var b=new t;this.endpointMap=new ba;for(var c=0;c<a.getNumGeometries();c++){var d=a.getGeometryN(c);0!==d.getNumPoints()&&(this.addEndpoint(d.getCoordinateN(0)),this.addEndpoint(d.getCoordinateN(d.getNumPoints()-1)))}for(var e=this.endpointMap.entrySet().iterator();e.hasNext();){var f=e.next(),g=f.getValue(),h=g.count;this.bnRule.isInBoundary(h)&&b.add(f.getKey())}return R.toCoordinateArray(b)},addEndpoint:function(a){var b=this.endpointMap.get(a);null===b&&(b=new ma,this.endpointMap.put(a,b)),b.count++},interfaces_:function(){return[]},getClass:function(){return la}}),la.getBoundary=function(){if(1===arguments.length){var a=arguments[0],b=new la(a);return b.getBoundary()}if(2===arguments.length){var c=arguments[0],d=arguments[1],b=new la(c,d);return b.getBoundary()}},Wf(ma.prototype,{interfaces_:function(){return[]},getClass:function(){return ma}}),Wf(ta.prototype,{interfaces_:function(){return[]},getClass:function(){return ta}}),ta.chars=function(a,b){for(var c=new Array(b).fill(null),d=0;d<b;d++)c[d]=a;return new String(c)},ta.getStackTrace=function(){if(1===arguments.length){var a=arguments[0],b=new qa,c=new na(b);return a.printStackTrace(c),b.toString()}if(2===arguments.length){for(var d=arguments[0],e=arguments[1],f="",g=new oa(ta.getStackTrace(d)),h=new sa(g),i=0;i<e;i++)try{f+=h.readLine()+ta.NEWLINE}catch(a){if(!(a instanceof ra))throw a;k.shouldNeverReachHere()}finally{}return f}},ta.split=function(a,b){for(var c=b.length,d=new t,e=""+a,f=e.indexOf(b);f>=0;){var g=e.substring(0,f);d.add(g),e=e.substring(f+c),f=e.indexOf(b)}e.length>0&&d.add(e);for(var h=new Array(d.size()).fill(null),i=0;i<h.length;i++)h[i]=d.get(i);return h},ta.toString=function(){if(1===arguments.length){var a=arguments[0];return ta.SIMPLE_ORDINATE_FORMAT.format(a)}},ta.spaces=function(a){return ta.chars(" ",a)},ta.NEWLINE=G.getProperty("line.separator"),ta.SIMPLE_ORDINATE_FORMAT=new pa("0.#"),Wf(ua.prototype,{interfaces_:function(){return[]},getClass:function(){return ua}}),ua.copyCoord=function(a,b,c,d){for(var e=Math.min(a.getDimension(),c.getDimension()),f=0;f<e;f++)c.setOrdinate(d,f,a.getOrdinate(b,f))},ua.isRing=function(a){var b=a.size();return 0===b||!(b<=3)&&(a.getOrdinate(0,F.X)===a.getOrdinate(b-1,F.X)&&a.getOrdinate(0,F.Y)===a.getOrdinate(b-1,F.Y))},ua.isEqual=function(a,b){var c=a.size(),e=b.size();if(c!==e)return!1;for(var f=Math.min(a.getDimension(),b.getDimension()),g=0;g<c;g++)for(var h=0;h<f;h++){var i=a.getOrdinate(g,h),j=b.getOrdinate(g,h);if(!(a.getOrdinate(g,h)===b.getOrdinate(g,h)||d.isNaN(i)&&d.isNaN(j)))return!1}return!0},ua.extend=function(a,b,c){var d=a.create(c,b.getDimension()),e=b.size();if(ua.copy(b,0,d,0,e),e>0)for(var f=e;f<c;f++)ua.copy(b,e-1,d,f,1);return d},ua.reverse=function(a){for(var b=a.size()-1,c=Math.trunc(b/2),d=0;d<=c;d++)ua.swap(a,d,b-d)},ua.swap=function(a,b,c){if(b===c)return null;for(var d=0;d<a.getDimension();d++){var e=a.getOrdinate(b,d);a.setOrdinate(b,d,a.getOrdinate(c,d)),a.setOrdinate(c,d,e)}},ua.copy=function(a,b,c,d,e){for(var f=0;f<e;f++)ua.copyCoord(a,b+f,c,d+f)},ua.toString=function(){if(1===arguments.length){var a=arguments[0],b=a.size();if(0===b)return"()";var c=a.getDimension(),d=new A;d.append("(");for(var e=0;e<b;e++){e>0&&d.append(" ");for(var f=0;f<c;f++)f>0&&d.append(","),d.append(ta.toString(a.getOrdinate(e,f)))}return d.append(")"),d.toString()}},ua.ensureValidRing=function(a,b){var c=b.size();if(0===c)return b;if(c<=3)return ua.createClosedRing(a,b,4);var d=b.getOrdinate(0,F.X)===b.getOrdinate(c-1,F.X)&&b.getOrdinate(0,F.Y)===b.getOrdinate(c-1,F.Y);return d?b:ua.createClosedRing(a,b,c+1)},ua.createClosedRing=function(a,b,c){var d=a.create(c,b.getDimension()),e=b.size();ua.copy(b,0,d,0,e);for(var f=e;f<c;f++)ua.copy(b,0,d,f,1);return d},Xf(va,K),Wf(va.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new v:this.points.expandEnvelope(new v)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return K.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];if(!this.isEquivalentClass(a))return!1;var c=a;if(this.points.size()!==c.points.size())return!1;for(var d=0;d<this.points.size();d++)if(!this.equal(this.points.getCoordinate(d),c.points.getCoordinate(d),b))return!1;return!0}return K.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var a=0;a<Math.trunc(this.points.size()/2);a++){var b=this.points.size()-1-a;if(!this.points.getCoordinate(a).equals(this.points.getCoordinate(b)))return this.points.getCoordinate(a).compareTo(this.points.getCoordinate(b))>0&&ua.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?ga.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return hb.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var a=this.points.copy();ua.reverse(a);var b=this.getFactory().createLineString(a);return b},compareToSameClass:function(){if(1===arguments.length){for(var a=arguments[0],b=a,c=0,d=0;c<this.points.size()&&d<b.points.size();){var e=this.points.getCoordinate(c).compareTo(b.points.getCoordinate(d));if(0!==e)return e;c++,d++}return c<this.points.size()?1:d<b.points.size()?-1:0}if(2===arguments.length){var f=arguments[0],g=arguments[1],b=f;return g.compare(this.points,b.points)}},apply:function(){if(Zf(arguments[0],L))for(var a=arguments[0],b=0;b<this.points.size();b++)a.filter(this.points.getCoordinate(b));else if(Zf(arguments[0],ia)){var c=arguments[0];if(0===this.points.size())return null;for(var b=0;b<this.points.size()&&(c.filter(this.points,b),!c.isDone());b++);c.isGeometryChanged()&&this.geometryChanged()}else if(Zf(arguments[0],ha)){var d=arguments[0];d.filter(this)}else if(Zf(arguments[0],J)){var e=arguments[0];e.filter(this)}},getBoundary:function(){return new la(this).getBoundary()},isEquivalentClass:function(a){return a instanceof va},clone:function(){var a=K.prototype.clone.call(this);return a.points=this.points.clone(),a},getCoordinateN:function(a){return this.points.getCoordinate(a)},getGeometryType:function(){return"LineString"},copy:function(){return new va(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(a){if(null===a&&(a=this.getFactory().getCoordinateSequenceFactory().create([])),1===a.size())throw new c("Invalid number of points in LineString (found "+a.size()+" - must be 0 or >= 2)");this.points=a},isCoordinate:function(a){for(var b=0;b<this.points.size();b++)if(this.points.getCoordinate(b).equals(a))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(a){return this.getFactory().createPoint(this.points.getCoordinate(a))},interfaces_:function(){return[ca]},getClass:function(){return va}}),va.serialVersionUID=0x2b2b51ba435c8e00,Wf(wa.prototype,{interfaces_:function(){return[]},getClass:function(){return wa}}),Xf(xa,K),Wf(xa.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new v;var a=new v;return a.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),a},getSortIndex:function(){return K.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];return!!this.isEquivalentClass(a)&&(!(!this.isEmpty()||!a.isEmpty())||this.isEmpty()===a.isEmpty()&&this.equal(a.getCoordinate(),this.getCoordinate(),b))}return K.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return ga.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var a=arguments[0],b=a;return this.getCoordinate().compareTo(b.getCoordinate())}if(2===arguments.length){var c=arguments[0],d=arguments[1],b=c;return d.compare(this.coordinates,b.coordinates)}},apply:function(){if(Zf(arguments[0],L)){var a=arguments[0];if(this.isEmpty())return null;a.filter(this.getCoordinate())}else if(Zf(arguments[0],ia)){var b=arguments[0];if(this.isEmpty())return null;b.filter(this.coordinates,0),b.isGeometryChanged()&&this.geometryChanged()}else if(Zf(arguments[0],ha)){var c=arguments[0];c.filter(this)}else if(Zf(arguments[0],J)){var d=arguments[0];d.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var a=K.prototype.clone.call(this);return a.coordinates=this.coordinates.clone(),a},
getGeometryType:function(){return"Point"},copy:function(){return new xa(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(a){null===a&&(a=this.getFactory().getCoordinateSequenceFactory().create([])),k.isTrue(a.size()<=1),this.coordinates=a},isSimple:function(){return!0},interfaces_:function(){return[wa]},getClass:function(){return xa}}),xa.serialVersionUID=0x44077bad161cbc00,Wf(ya.prototype,{interfaces_:function(){return[]},getClass:function(){return ya}}),Xf(za,K),Wf(za.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return K.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var a=new Array(this.getNumPoints()).fill(null),b=-1,c=this.shell.getCoordinates(),d=0;d<c.length;d++)b++,a[b]=c[d];for(var e=0;e<this.holes.length;e++)for(var f=this.holes[e].getCoordinates(),g=0;g<f.length;g++)b++,a[b]=f[g];return a},getArea:function(){var a=0;a+=Math.abs(hb.signedArea(this.shell.getCoordinateSequence()));for(var b=0;b<this.holes.length;b++)a-=Math.abs(hb.signedArea(this.holes[b].getCoordinateSequence()));return a},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var a=this.shell.getCoordinateSequence(),b=this.getEnvelopeInternal(),c=0;c<5;c++){var d=a.getX(c);if(d!==b.getMinX()&&d!==b.getMaxX())return!1;var e=a.getY(c);if(e!==b.getMinY()&&e!==b.getMaxY())return!1}for(var f=a.getX(0),g=a.getY(0),c=1;c<=4;c++){var d=a.getX(c),e=a.getY(c),h=d!==f,i=e!==g;if(h===i)return!1;f=d,g=e}return!0},equalsExact:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];if(!this.isEquivalentClass(a))return!1;var c=a,d=this.shell,e=c.shell;if(!d.equalsExact(e,b))return!1;if(this.holes.length!==c.holes.length)return!1;for(var f=0;f<this.holes.length;f++)if(!this.holes[f].equalsExact(c.holes[f],b))return!1;return!0}return K.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var a=0;a<this.holes.length;a++)this.normalize(this.holes[a],!1);fa.sort(this.holes)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];if(b.isEmpty())return null;var d=new Array(b.getCoordinates().length-1).fill(null);G.arraycopy(b.getCoordinates(),0,d,0,d.length);var e=R.minCoordinate(b.getCoordinates());R.scroll(d,e),G.arraycopy(d,0,b.getCoordinates(),0,d.length),b.getCoordinates()[d.length]=d[0],hb.isCCW(b.getCoordinates())===c&&R.reverse(b.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var a=0;a+=this.shell.getLength();for(var b=0;b<this.holes.length;b++)a+=this.holes[b].getLength();return a},getNumPoints:function(){for(var a=this.shell.getNumPoints(),b=0;b<this.holes.length;b++)a+=this.holes[b].getNumPoints();return a},reverse:function(){var a=this.copy();a.shell=this.shell.copy().reverse(),a.holes=new Array(this.holes.length).fill(null);for(var b=0;b<this.holes.length;b++)a.holes[b]=this.holes[b].copy().reverse();return a},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var a=arguments[0],b=this.shell,c=a.shell;return b.compareToSameClass(c)}if(2===arguments.length){var d=arguments[0],e=arguments[1],f=d,b=this.shell,c=f.shell,g=b.compareToSameClass(c,e);if(0!==g)return g;for(var h=this.getNumInteriorRing(),i=f.getNumInteriorRing(),j=0;j<h&&j<i;){var k=this.getInteriorRingN(j),l=f.getInteriorRingN(j),m=k.compareToSameClass(l,e);if(0!==m)return m;j++}return j<h?1:j<i?-1:0}},apply:function(){if(Zf(arguments[0],L)){var a=arguments[0];this.shell.apply(a);for(var b=0;b<this.holes.length;b++)this.holes[b].apply(a)}else if(Zf(arguments[0],ia)){var c=arguments[0];if(this.shell.apply(c),!c.isDone())for(var b=0;b<this.holes.length&&(this.holes[b].apply(c),!c.isDone());b++);c.isGeometryChanged()&&this.geometryChanged()}else if(Zf(arguments[0],ha)){var d=arguments[0];d.filter(this)}else if(Zf(arguments[0],J)){var e=arguments[0];e.filter(this),this.shell.apply(e);for(var b=0;b<this.holes.length;b++)this.holes[b].apply(e)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var a=new Array(this.holes.length+1).fill(null);a[0]=this.shell;for(var b=0;b<this.holes.length;b++)a[b+1]=this.holes[b];return a.length<=1?this.getFactory().createLinearRing(a[0].getCoordinateSequence()):this.getFactory().createMultiLineString(a)},clone:function(){var a=K.prototype.clone.call(this);a.shell=this.shell.clone(),a.holes=new Array(this.holes.length).fill(null);for(var b=0;b<this.holes.length;b++)a.holes[b]=this.holes[b].clone();return a},getGeometryType:function(){return"Polygon"},copy:function(){for(var a=this.shell.copy(),b=new Array(this.holes.length).fill(null),c=0;c<b.length;c++)b[c]=this.holes[c].copy();return new za(a,b,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(a){return this.holes[a]},interfaces_:function(){return[ya]},getClass:function(){return za}}),za.serialVersionUID=-0x307ffefd8dc97200,Xf(Aa,ja),Wf(Aa.prototype,{getSortIndex:function(){return K.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];return!!this.isEquivalentClass(a)&&ja.prototype.equalsExact.call(this,a,b)}return ja.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length){var a=arguments[0];return this.geometries[a].getCoordinate()}return ja.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return ga.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var a=new Array(this.geometries.length).fill(null),b=0;b<a.length;b++)a[b]=this.geometries[b].copy();return new Aa(a,this.factory)},interfaces_:function(){return[wa]},getClass:function(){return Aa}}),Aa.serialVersionUID=-0x6fb1ed4162e0fc00,Xf(Ba,va),Wf(Ba.prototype,{getSortIndex:function(){return K.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return ga.FALSE},isClosed:function(){return!!this.isEmpty()||va.prototype.isClosed.call(this)},reverse:function(){var a=this.points.copy();ua.reverse(a);var b=this.getFactory().createLinearRing(a);return b},validateConstruction:function(){if(!this.isEmpty()&&!va.prototype.isClosed.call(this))throw new c("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Ba.MINIMUM_VALID_SIZE)throw new c("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Ba(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Ba}}),Ba.MINIMUM_VALID_SIZE=4,Ba.serialVersionUID=-0x3b229e262367a600,Xf(Ca,ja),Wf(Ca.prototype,{getSortIndex:function(){return K.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];return!!this.isEquivalentClass(a)&&ja.prototype.equalsExact.call(this,a,b)}return ja.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var a=this.geometries.length,b=new Array(a).fill(null),c=0;c<this.geometries.length;c++)b[c]=this.geometries[c].reverse();return this.getFactory().createMultiPolygon(b)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var a=new t,b=0;b<this.geometries.length;b++)for(var c=this.geometries[b],d=c.getBoundary(),e=0;e<d.getNumGeometries();e++)a.add(d.getGeometryN(e));var f=new Array(a.size()).fill(null);return this.getFactory().createMultiLineString(a.toArray(f))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var a=new Array(this.geometries.length).fill(null),b=0;b<a.length;b++)a[b]=this.geometries[b].copy();return new Ca(a,this.factory)},interfaces_:function(){return[ya]},getClass:function(){return Ca}}),Ca.serialVersionUID=-0x7a5aa1369171980,Wf(Da.prototype,{setCopyUserData:function(a){this.isUserDataCopied=a},edit:function(a,b){if(null===a)return null;var c=this.editInternal(a,b);return this.isUserDataCopied&&c.setUserData(a.getUserData()),c},editInternal:function(a,b){return null===this.factory&&(this.factory=a.getFactory()),a instanceof ja?this.editGeometryCollection(a,b):a instanceof za?this.editPolygon(a,b):a instanceof xa?b.edit(a,this.factory):a instanceof va?b.edit(a,this.factory):(k.shouldNeverReachHere("Unsupported Geometry class: "+a.getClass().getName()),null)},editGeometryCollection:function(a,b){for(var c=b.edit(a,this.factory),d=new t,e=0;e<c.getNumGeometries();e++){var f=this.edit(c.getGeometryN(e),b);null===f||f.isEmpty()||d.add(f)}return c.getClass()===Aa?this.factory.createMultiPoint(d.toArray([])):c.getClass()===ka?this.factory.createMultiLineString(d.toArray([])):c.getClass()===Ca?this.factory.createMultiPolygon(d.toArray([])):this.factory.createGeometryCollection(d.toArray([]))},editPolygon:function(a,b){var c=b.edit(a,this.factory);if(null===c&&(c=this.factory.createPolygon(null)),c.isEmpty())return c;var d=this.edit(c.getExteriorRing(),b);if(null===d||d.isEmpty())return this.factory.createPolygon();for(var e=new t,f=0;f<c.getNumInteriorRing();f++){var g=this.edit(c.getInteriorRingN(f),b);null===g||g.isEmpty()||e.add(g)}return this.factory.createPolygon(d,e.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Da}}),Da.GeometryEditorOperation=Ea,Wf(Fa.prototype,{edit:function(a,b){return a},interfaces_:function(){return[Ea]},getClass:function(){return Fa}}),Wf(Ga.prototype,{edit:function(a,b){var c=this.editCoordinates(a.getCoordinates(),a);return null===c?a:a instanceof Ba?b.createLinearRing(c):a instanceof va?b.createLineString(c):a instanceof xa?c.length>0?b.createPoint(c[0]):b.createPoint():a},interfaces_:function(){return[Ea]},getClass:function(){return Ga}}),Wf(Ha.prototype,{edit:function(a,b){return a instanceof Ba?b.createLinearRing(this.edit(a.getCoordinateSequence(),a)):a instanceof va?b.createLineString(this.edit(a.getCoordinateSequence(),a)):a instanceof xa?b.createPoint(this.edit(a.getCoordinateSequence(),a)):a},interfaces_:function(){return[Ea]},getClass:function(){return Ha}}),Da.NoOpGeometryOperation=Fa,Da.CoordinateOperation=Ga,Da.CoordinateSequenceOperation=Ha,Wf(Ia.prototype,{setOrdinate:function(a,b,d){switch(b){case F.X:this.coordinates[a].x=d;break;case F.Y:this.coordinates[a].y=d;break;case F.Z:this.coordinates[a].z=d;break;default:throw new c("invalid ordinateIndex")}},size:function(){return this.coordinates.length},getOrdinate:function(a,b){switch(b){case F.X:return this.coordinates[a].x;case F.Y:return this.coordinates[a].y;case F.Z:return this.coordinates[a].z}return d.NaN},getCoordinate:function(){if(1===arguments.length){var a=arguments[0];return this.coordinates[a]}if(2===arguments.length){var b=arguments[0],c=arguments[1];c.x=this.coordinates[b].x,c.y=this.coordinates[b].y,c.z=this.coordinates[b].z}},getCoordinateCopy:function(a){return new l(this.coordinates[a])},getDimension:function(){return this.dimension},getX:function(a){return this.coordinates[a].x},clone:function(){for(var a=new Array(this.size()).fill(null),b=0;b<this.coordinates.length;b++)a[b]=this.coordinates[b].clone();return new Ia(a,this.dimension)},expandEnvelope:function(a){for(var b=0;b<this.coordinates.length;b++)a.expandToInclude(this.coordinates[b]);return a},copy:function(){for(var a=new Array(this.size()).fill(null),b=0;b<this.coordinates.length;b++)a[b]=this.coordinates[b].copy();return new Ia(a,this.dimension)},toString:function(){if(this.coordinates.length>0){var a=new A(17*this.coordinates.length);a.append("("),a.append(this.coordinates[0]);for(var b=1;b<this.coordinates.length;b++)a.append(", "),a.append(this.coordinates[b]);return a.append(")"),a.toString()}return"()"},getY:function(a){return this.coordinates[a].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[F,h]},getClass:function(){return Ia}}),Ia.serialVersionUID=-0xcb44a778db18e00,Wf(Ja.prototype,{readResolve:function(){return Ja.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array){var a=arguments[0];return new Ia(a)}if(Zf(arguments[0],F)){var b=arguments[0];return new Ia(b)}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];return d>3&&(d=3),d<2?new Ia(c):new Ia(c,d)}},interfaces_:function(){return[I,h]},getClass:function(){return Ja}}),Ja.instance=function(){return Ja.instanceObject},Ja.serialVersionUID=-0x38e49fa6cf6f2e00,Ja.instanceObject=new Ja;var cg,dg=Object.defineProperty,eg=La({delete:Na,has:Qa,get:Oa,set:Ra,keys:Ta,values:Ua,entries:Va,forEach:Ya,clear:Sa}),fg="undefined"!=typeof Map&&Map.prototype.values?Map:eg;Za.prototype=new U,Za.prototype.get=function(a){return this.map_.get(a)||null},Za.prototype.put=function(a,b){return this.map_.set(a,b),b},Za.prototype.values=function(){for(var a=new t,b=this.map_.values(),c=b.next();!c.done;)a.add(c.value),c=b.next();return a},Za.prototype.entrySet=function(){var a=new X;return this.map_.entries().forEach(function(b){return a.add(b)}),a},Za.prototype.size=function(){return this.map_.size()},Wf($a.prototype,{equals:function(a){if(!(a instanceof $a))return!1;var b=a;return this.modelType===b.modelType&&this.scale===b.scale},compareTo:function(a){var b=a,c=this.getMaximumSignificantDigits(),d=b.getMaximumSignificantDigits();return new B(c).compareTo(new B(d))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===$a.FLOATING||this.modelType===$a.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var a="UNKNOWN";return this.modelType===$a.FLOATING?a="Floating":this.modelType===$a.FLOATING_SINGLE?a="Floating-Single":this.modelType===$a.FIXED&&(a="Fixed (Scale="+this.getScale()+")"),a},makePrecise:function(){if("number"==typeof arguments[0]){var a=arguments[0];if(d.isNaN(a))return a;if(this.modelType===$a.FLOATING_SINGLE){var b=a;return b}return this.modelType===$a.FIXED?Math.round(a*this.scale)/this.scale:a}if(arguments[0]instanceof l){var c=arguments[0];if(this.modelType===$a.FLOATING)return null;c.x=this.makePrecise(c.x),c.y=this.makePrecise(c.y)}},getMaximumSignificantDigits:function(){var a=16;return this.modelType===$a.FLOATING?a=16:this.modelType===$a.FLOATING_SINGLE?a=6:this.modelType===$a.FIXED&&(a=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),a},setScale:function(a){this.scale=Math.abs(a)},interfaces_:function(){return[h,e]},getClass:function(){return $a}}),$a.mostPrecise=function(a,b){return a.compareTo(b)>=0?a:b},Wf(_a.prototype,{readResolve:function(){return _a.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[h]},getClass:function(){return _a}}),_a.serialVersionUID=-552860263173159e4,_a.nameToTypeMap=new Za,$a.Type=_a,$a.serialVersionUID=0x6bee6404e9a25c00,$a.FIXED=new _a("FIXED"),$a.FLOATING=new _a("FLOATING"),$a.FLOATING_SINGLE=new _a("FLOATING SINGLE"),$a.maximumPreciseValue=9007199254740992,Wf(ab.prototype,{toGeometry:function(a){return a.isNull()?this.createPoint(null):a.getMinX()===a.getMaxX()&&a.getMinY()===a.getMaxY()?this.createPoint(new l(a.getMinX(),a.getMinY())):a.getMinX()===a.getMaxX()||a.getMinY()===a.getMaxY()?this.createLineString([new l(a.getMinX(),a.getMinY()),new l(a.getMaxX(),a.getMaxY())]):this.createPolygon(this.createLinearRing([new l(a.getMinX(),a.getMinY()),new l(a.getMinX(),a.getMaxY()),new l(a.getMaxX(),a.getMaxY()),new l(a.getMaxX(),a.getMinY()),new l(a.getMinX(),a.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var a=arguments[0];return this.createLineString(null!==a?this.getCoordinateSequenceFactory().create(a):null)}if(Zf(arguments[0],F)){var b=arguments[0];return new va(b,this)}}},createMultiLineString:function(){if(0===arguments.length)return new ka(null,this);if(1===arguments.length){var a=arguments[0];return new ka(a,this)}},buildGeometry:function(a){for(var b=null,c=!1,d=!1,e=a.iterator();e.hasNext();){var f=e.next(),g=f.getClass();null===b&&(b=g),g!==b&&(c=!0),f.isGeometryCollectionOrDerived()&&(d=!0)}if(null===b)return this.createGeometryCollection();if(c||d)return this.createGeometryCollection(ab.toGeometryArray(a));var h=a.iterator().next(),i=a.size()>1;if(i){if(h instanceof za)return this.createMultiPolygon(ab.toPolygonArray(a));if(h instanceof va)return this.createMultiLineString(ab.toLineStringArray(a));if(h instanceof xa)return this.createMultiPoint(ab.toPointArray(a));k.shouldNeverReachHere("Unhandled class: "+h.getClass().getName())}return h},createMultiPointFromCoords:function(a){return this.createMultiPoint(null!==a?this.getCoordinateSequenceFactory().create(a):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof l){var a=arguments[0];return this.createPoint(null!==a?this.getCoordinateSequenceFactory().create([a]):null)}if(Zf(arguments[0],F)){var b=arguments[0];return new xa(b,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new za(null,null,this);if(1===arguments.length){if(Zf(arguments[0],F)){var a=arguments[0];return this.createPolygon(this.createLinearRing(a))}if(arguments[0]instanceof Array){var b=arguments[0];return this.createPolygon(this.createLinearRing(b))}if(arguments[0]instanceof Ba){var c=arguments[0];return this.createPolygon(c,null)}}else if(2===arguments.length){var d=arguments[0],e=arguments[1];return new za(d,e,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(0===arguments.length)return new ja(null,this);if(1===arguments.length){var a=arguments[0];return new ja(a,this)}},createGeometry:function(a){var b=new Da(this);return b.edit(a,{edit:function(){if(2===arguments.length){var a=arguments[0];arguments[1];return this.coordinateSequenceFactory.create(a)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var a=arguments[0];return this.createLinearRing(null!==a?this.getCoordinateSequenceFactory().create(a):null)}if(Zf(arguments[0],F)){var b=arguments[0];return new Ba(b,this)}}},createMultiPolygon:function(){if(0===arguments.length)return new Ca(null,this);if(1===arguments.length){var a=arguments[0];return new Ca(a,this)}},createMultiPoint:function(){if(0===arguments.length)return new Aa(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var a=arguments[0];return new Aa(a,this)}if(arguments[0]instanceof Array){var b=arguments[0];return this.createMultiPoint(null!==b?this.getCoordinateSequenceFactory().create(b):null)}if(Zf(arguments[0],F)){var c=arguments[0];if(null===c)return this.createMultiPoint(new Array(0).fill(null));for(var d=new Array(c.size()).fill(null),e=0;e<c.size();e++){var f=this.getCoordinateSequenceFactory().create(1,c.getDimension());ua.copy(c,e,f,0,1),d[e]=this.createPoint(f)}return this.createMultiPoint(d)}}},interfaces_:function(){return[h]},getClass:function(){return ab}}),ab.toMultiPolygonArray=function(a){var b=new Array(a.size()).fill(null);return a.toArray(b)},ab.toGeometryArray=function(a){if(null===a)return null;var b=new Array(a.size()).fill(null);return a.toArray(b)},ab.getDefaultCoordinateSequenceFactory=function(){return Ja.instance()},ab.toMultiLineStringArray=function(a){var b=new Array(a.size()).fill(null);return a.toArray(b)},ab.toLineStringArray=function(a){var b=new Array(a.size()).fill(null);return a.toArray(b)},ab.toMultiPointArray=function(a){var b=new Array(a.size()).fill(null);return a.toArray(b)},ab.toLinearRingArray=function(a){var b=new Array(a.size()).fill(null);return a.toArray(b)},ab.toPointArray=function(a){var b=new Array(a.size()).fill(null);return a.toArray(b)},ab.toPolygonArray=function(a){var b=new Array(a.size()).fill(null);return a.toArray(b)},ab.createPointFromInternalCoord=function(a,b){return b.getPrecisionModel().makePrecise(a),b.getFactory().createPoint(a)},ab.serialVersionUID=-0x5ea75f2051eeb400;var gg={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};Wf(bb.prototype,{read:function(a){var b,c,d;a=a.replace(/[\n\r]/g," ");var e=gg.typeStr.exec(a);if(a.search("EMPTY")!==-1&&(e=gg.emptyTypeStr.exec(a),e[2]=void 0),e&&(c=e[1].toLowerCase(),d=e[2],ig[c]&&(b=ig[c].apply(this,[d]))),void 0===b)throw new Error("Could not parse WKT "+a);return b},write:function(a){return this.extractGeometry(a)},extractGeometry:function(a){var b=a.getGeometryType().toLowerCase();if(!hg[b])return null;var c,d=b.toUpperCase();return c=a.isEmpty()?d+" EMPTY":d+"("+hg[b].apply(this,[a])+")"}});var hg={coordinate:function(a){return a.x+" "+a.y},point:function(a){return hg.coordinate.call(this,a.coordinates.coordinates[0])},multipoint:function(a){for(var b=[],c=0,d=a.geometries.length;c<d;++c)b.push("("+hg.point.apply(this,[a.geometries[c]])+")");return b.join(",")},linestring:function(a){for(var b=[],c=0,d=a.points.coordinates.length;c<d;++c)b.push(hg.coordinate.apply(this,[a.points.coordinates[c]]));return b.join(",")},linearring:function(a){for(var b=[],c=0,d=a.points.coordinates.length;c<d;++c)b.push(hg.coordinate.apply(this,[a.points.coordinates[c]]));return b.join(",")},multilinestring:function(a){for(var b=[],c=0,d=a.geometries.length;c<d;++c)b.push("("+hg.linestring.apply(this,[a.geometries[c]])+")");return b.join(",")},polygon:function(a){var b=[];b.push("("+hg.linestring.apply(this,[a.shell])+")");for(var c=0,d=a.holes.length;c<d;++c)b.push("("+hg.linestring.apply(this,[a.holes[c]])+")");return b.join(",")},multipolygon:function(a){for(var b=[],c=0,d=a.geometries.length;c<d;++c)b.push("("+hg.polygon.apply(this,[a.geometries[c]])+")");return b.join(",")},geometrycollection:function(a){for(var b=[],c=0,d=a.geometries.length;c<d;++c)b.push(this.extractGeometry(a.geometries[c]));return b.join(",")}},ig={point:function(a){if(void 0===a)return this.geometryFactory.createPoint();var b=a.trim().split(gg.spaces);return this.geometryFactory.createPoint(new l(Number.parseFloat(b[0]),Number.parseFloat(b[1])))},multipoint:function(a){if(void 0===a)return this.geometryFactory.createMultiPoint();for(var b,c=a.trim().split(","),d=[],e=0,f=c.length;e<f;++e)b=c[e].replace(gg.trimParens,"$1"),d.push(ig.point.apply(this,[b]));return this.geometryFactory.createMultiPoint(d)},linestring:function(a){if(void 0===a)return this.geometryFactory.createLineString();for(var b,c=a.trim().split(","),d=[],e=0,f=c.length;e<f;++e)b=c[e].trim().split(gg.spaces),d.push(new l(Number.parseFloat(b[0]),Number.parseFloat(b[1])));return this.geometryFactory.createLineString(d)},linearring:function(a){if(void 0===a)return this.geometryFactory.createLinearRing();for(var b,c=a.trim().split(","),d=[],e=0,f=c.length;e<f;++e)b=c[e].trim().split(gg.spaces),d.push(new l(Number.parseFloat(b[0]),Number.parseFloat(b[1])));return this.geometryFactory.createLinearRing(d)},multilinestring:function(a){if(void 0===a)return this.geometryFactory.createMultiLineString();for(var b,c=a.trim().split(gg.parenComma),d=[],e=0,f=c.length;e<f;++e)b=c[e].replace(gg.trimParens,"$1"),d.push(ig.linestring.apply(this,[b]));return this.geometryFactory.createMultiLineString(d)},polygon:function(a){if(void 0===a)return this.geometryFactory.createPolygon();for(var b,c,d,e,f=a.trim().split(gg.parenComma),g=[],h=0,i=f.length;h<i;++h)b=f[h].replace(gg.trimParens,"$1"),c=ig.linestring.apply(this,[b]),d=this.geometryFactory.createLinearRing(c.points),0===h?e=d:g.push(d);return this.geometryFactory.createPolygon(e,g)},multipolygon:function(a){if(void 0===a)return this.geometryFactory.createMultiPolygon();for(var b,c=a.trim().split(gg.doubleParenComma),d=[],e=0,f=c.length;e<f;++e)b=c[e].replace(gg.trimParens,"$1"),d.push(ig.polygon.apply(this,[b]));return this.geometryFactory.createMultiPolygon(d)},geometrycollection:function(a){if(void 0===a)return this.geometryFactory.createGeometryCollection();a=a.replace(/,\s*([A-Za-z])/g,"|$1");for(var b=a.trim().split("|"),c=[],d=0,e=b.length;d<e;++d)c.push(this.read(b[d]));return this.geometryFactory.createGeometryCollection(c)}};Wf(cb.prototype,{write:function(a){return this.parser.write(a)}}),Wf(cb,{toLineString:function(a,b){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+a.x+" "+a.y+", "+b.x+" "+b.y+" )"}}),Wf(db.prototype,{getIndexAlongSegment:function(a,b){return this.computeIntLineIndex(),this.intLineIndex[a][b]},getTopologySummary:function(){var a=new A;return this.isEndPoint()&&a.append(" endpoint"),this._isProper&&a.append(" proper"),this.isCollinear()&&a.append(" collinear"),a.toString()},computeIntersection:function(a,b,c,d){this.inputLines[0][0]=a,this.inputLines[0][1]=b,this.inputLines[1][0]=c,this.inputLines[1][1]=d,this.result=this.computeIntersect(a,b,c,d)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var a=arguments[0],b=this.getEdgeDistance(a,0),c=this.getEdgeDistance(a,1);b>c?(this.intLineIndex[a][0]=0,this.intLineIndex[a][1]=1):(this.intLineIndex[a][0]=1,this.intLineIndex[a][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(a){this.precisionModel=a},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var a=arguments[0],b=0;b<this.result;b++)if(!this.intPt[b].equals2D(this.inputLines[a][0])&&!this.intPt[b].equals2D(this.inputLines[a][1]))return!0;return!1}},getIntersection:function(a){return this.intPt[a]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==db.NO_INTERSECTION},getEdgeDistance:function(a,b){var c=db.computeEdgeDistance(this.intPt[b],this.inputLines[a][0],this.inputLines[a][1]);return c},isCollinear:function(){return this.result===db.COLLINEAR_INTERSECTION},toString:function(){return cb.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+cb.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(a,b){return this.inputLines[a][b]},isIntersection:function(a){for(var b=0;b<this.result;b++)if(this.intPt[b].equals2D(a))return!0;return!1},getIntersectionAlongSegment:function(a,b){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[a][b]]},interfaces_:function(){return[]},getClass:function(){return db}}),db.computeEdgeDistance=function(a,b,c){var d=Math.abs(c.x-b.x),e=Math.abs(c.y-b.y),f=-1;if(a.equals(b))f=0;else if(a.equals(c))f=d>e?d:e;else{var g=Math.abs(a.x-b.x),h=Math.abs(a.y-b.y);f=d>e?g:h,0!==f||a.equals(b)||(f=Math.max(g,h))}return k.isTrue(!(0===f&&!a.equals(b)),"Bad distance calculation"),f},db.nonRobustComputeEdgeDistance=function(a,b,c){var d=a.x-b.x,e=a.y-b.y,f=Math.sqrt(d*d+e*e);return k.isTrue(!(0===f&&!a.equals(b)),"Invalid distance calculation"),f},db.DONT_INTERSECT=0,db.DO_INTERSECT=1,db.COLLINEAR=2,db.NO_INTERSECTION=0,db.POINT_INTERSECTION=1,db.COLLINEAR_INTERSECTION=2,Xf(eb,db),Wf(eb.prototype,{isInSegmentEnvelopes:function(a){var b=new v(this.inputLines[0][0],this.inputLines[0][1]),c=new v(this.inputLines[1][0],this.inputLines[1][1]);return b.contains(a)&&c.contains(a)},computeIntersection:function(){if(3!==arguments.length)return db.prototype.computeIntersection.apply(this,arguments);var a=arguments[0],b=arguments[1],c=arguments[2];return this._isProper=!1,v.intersects(b,c,a)&&0===hb.orientationIndex(b,c,a)&&0===hb.orientationIndex(c,b,a)?(this._isProper=!0,(a.equals(b)||a.equals(c))&&(this._isProper=!1),this.result=db.POINT_INTERSECTION,null):void(this.result=db.NO_INTERSECTION)},normalizeToMinimum:function(a,b,c,d,e){e.x=this.smallestInAbsValue(a.x,b.x,c.x,d.x),e.y=this.smallestInAbsValue(a.y,b.y,c.y,d.y),a.x-=e.x,a.y-=e.y,b.x-=e.x,b.y-=e.y,c.x-=e.x,c.y-=e.y,d.x-=e.x,d.y-=e.y},safeHCoordinateIntersection:function(a,b,c,d){var e=null;try{e=H.intersection(a,b,c,d)}catch(f){if(!(f instanceof x))throw f;e=eb.nearestEndpoint(a,b,c,d)}finally{}return e},intersection:function(a,b,c,d){var e=this.intersectionWithNormalization(a,b,c,d);return this.isInSegmentEnvelopes(e)||(e=new l(eb.nearestEndpoint(a,b,c,d))),null!==this.precisionModel&&this.precisionModel.makePrecise(e),e},smallestInAbsValue:function(a,b,c,d){var e=a,f=Math.abs(e);return Math.abs(b)<f&&(e=b,f=Math.abs(b)),Math.abs(c)<f&&(e=c,f=Math.abs(c)),Math.abs(d)<f&&(e=d),e},checkDD:function(a,b,c,d,e){var f=E.intersection(a,b,c,d),g=this.isInSegmentEnvelopes(f);G.out.println("DD in env = "+g+"  --------------------- "+f),e.distance(f)>1e-4&&G.out.println("Distance = "+e.distance(f))},intersectionWithNormalization:function(a,b,c,d){var e=new l(a),f=new l(b),g=new l(c),h=new l(d),i=new l;this.normalizeToEnvCentre(e,f,g,h,i);var j=this.safeHCoordinateIntersection(e,f,g,h);return j.x+=i.x,j.y+=i.y,j},computeCollinearIntersection:function(a,b,c,d){var e=v.intersects(a,b,c),f=v.intersects(a,b,d),g=v.intersects(c,d,a),h=v.intersects(c,d,b);return e&&f?(this.intPt[0]=c,this.intPt[1]=d,db.COLLINEAR_INTERSECTION):g&&h?(this.intPt[0]=a,this.intPt[1]=b,db.COLLINEAR_INTERSECTION):e&&g?(this.intPt[0]=c,this.intPt[1]=a,!c.equals(a)||f||h?db.COLLINEAR_INTERSECTION:db.POINT_INTERSECTION):e&&h?(this.intPt[0]=c,this.intPt[1]=b,!c.equals(b)||f||g?db.COLLINEAR_INTERSECTION:db.POINT_INTERSECTION):f&&g?(this.intPt[0]=d,this.intPt[1]=a,!d.equals(a)||e||h?db.COLLINEAR_INTERSECTION:db.POINT_INTERSECTION):f&&h?(this.intPt[0]=d,this.intPt[1]=b,!d.equals(b)||e||g?db.COLLINEAR_INTERSECTION:db.POINT_INTERSECTION):db.NO_INTERSECTION},normalizeToEnvCentre:function(a,b,c,d,e){var f=a.x<b.x?a.x:b.x,g=a.y<b.y?a.y:b.y,h=a.x>b.x?a.x:b.x,i=a.y>b.y?a.y:b.y,j=c.x<d.x?c.x:d.x,k=c.y<d.y?c.y:d.y,l=c.x>d.x?c.x:d.x,m=c.y>d.y?c.y:d.y,n=f>j?f:j,o=h<l?h:l,p=g>k?g:k,q=i<m?i:m,r=(n+o)/2,s=(p+q)/2;e.x=r,e.y=s,a.x-=e.x,a.y-=e.y,b.x-=e.x,b.y-=e.y,c.x-=e.x,c.y-=e.y,d.x-=e.x,d.y-=e.y},computeIntersect:function(a,b,c,d){if(this._isProper=!1,!v.intersects(a,b,c,d))return db.NO_INTERSECTION;var e=hb.orientationIndex(a,b,c),f=hb.orientationIndex(a,b,d);if(e>0&&f>0||e<0&&f<0)return db.NO_INTERSECTION;var g=hb.orientationIndex(c,d,a),h=hb.orientationIndex(c,d,b);if(g>0&&h>0||g<0&&h<0)return db.NO_INTERSECTION;var i=0===e&&0===f&&0===g&&0===h;return i?this.computeCollinearIntersection(a,b,c,d):(0===e||0===f||0===g||0===h?(this._isProper=!1,a.equals2D(c)||a.equals2D(d)?this.intPt[0]=a:b.equals2D(c)||b.equals2D(d)?this.intPt[0]=b:0===e?this.intPt[0]=new l(c):0===f?this.intPt[0]=new l(d):0===g?this.intPt[0]=new l(a):0===h&&(this.intPt[0]=new l(b))):(this._isProper=!0,this.intPt[0]=this.intersection(a,b,c,d)),db.POINT_INTERSECTION)},
interfaces_:function(){return[]},getClass:function(){return eb}}),eb.nearestEndpoint=function(a,b,c,d){var e=a,f=hb.distancePointLine(a,c,d),g=hb.distancePointLine(b,c,d);return g<f&&(f=g,e=b),g=hb.distancePointLine(c,a,b),g<f&&(f=g,e=c),g=hb.distancePointLine(d,a,b),g<f&&(f=g,e=d),e},Wf(fb.prototype,{interfaces_:function(){return[]},getClass:function(){return fb}}),fb.orientationIndex=function(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=c.x-b.x,g=c.y-b.y;return fb.signOfDet2x2(d,e,f,g)},fb.signOfDet2x2=function(a,b,c,d){var e=null,f=null,g=null,h=0;if(e=1,0===a||0===d)return 0===b||0===c?0:b>0?c>0?-e:e:c>0?e:-e;if(0===b||0===c)return d>0?a>0?e:-e:a>0?-e:e;if(0<b?0<d?b<=d||(e=-e,f=a,a=c,c=f,f=b,b=d,d=f):b<=-d?(e=-e,c=-c,d=-d):(f=a,a=-c,c=f,f=b,b=-d,d=f):0<d?-b<=d?(e=-e,a=-a,b=-b):(f=-a,a=c,c=f,f=-b,b=d,d=f):b>=d?(a=-a,b=-b,c=-c,d=-d):(e=-e,f=-a,a=-c,c=f,f=-b,b=-d,d=f),0<a){if(!(0<c))return e;if(!(a<=c))return e}else{if(0<c)return-e;if(!(a>=c))return-e;e=-e,a=-a,c=-c}for(;;){if(h+=1,g=Math.floor(c/a),c-=g*a,d-=g*b,d<0)return-e;if(d>b)return e;if(a>c+c){if(b<d+d)return e}else{if(b>d+d)return-e;c=a-c,d=b-d,e=-e}if(0===d)return 0===c?0:-e;if(0===c)return e;if(g=Math.floor(a/c),a-=g*c,b-=g*d,b<0)return e;if(b>d)return-e;if(c>a+a){if(d<b+b)return-e}else{if(d>b+b)return e;a=c-a,b=d-b,e=-e}if(0===b)return 0===a?0:e;if(0===a)return-e}},Wf(gb.prototype,{countSegment:function(a,b){if(a.x<this.p.x&&b.x<this.p.x)return null;if(this.p.x===b.x&&this.p.y===b.y)return this.isPointOnSegment=!0,null;if(a.y===this.p.y&&b.y===this.p.y){var c=a.x,d=b.x;return c>d&&(c=b.x,d=a.x),this.p.x>=c&&this.p.x<=d&&(this.isPointOnSegment=!0),null}if(a.y>this.p.y&&b.y<=this.p.y||b.y>this.p.y&&a.y<=this.p.y){var e=a.x-this.p.x,f=a.y-this.p.y,g=b.x-this.p.x,h=b.y-this.p.y,i=fb.signOfDet2x2(e,f,g,h);if(0===i)return this.isPointOnSegment=!0,null;h<f&&(i=-i),i>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==y.EXTERIOR},getLocation:function(){return this.isPointOnSegment?y.BOUNDARY:this.crossingCount%2===1?y.INTERIOR:y.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return gb}}),gb.locatePointInRing=function(){if(arguments[0]instanceof l&&Zf(arguments[1],F)){for(var a=arguments[0],b=arguments[1],c=new gb(a),d=new l,e=new l,f=1;f<b.size();f++)if(b.getCoordinate(f,d),b.getCoordinate(f-1,e),c.countSegment(d,e),c.isOnSegment())return c.getLocation();return c.getLocation()}if(arguments[0]instanceof l&&arguments[1]instanceof Array){for(var g=arguments[0],h=arguments[1],c=new gb(g),f=1;f<h.length;f++){var d=h[f],e=h[f-1];if(c.countSegment(d,e),c.isOnSegment())return c.getLocation()}return c.getLocation()}},Wf(hb.prototype,{interfaces_:function(){return[]},getClass:function(){return hb}}),hb.orientationIndex=function(a,b,c){return E.orientationIndex(a,b,c)},hb.signedArea=function(){if(arguments[0]instanceof Array){var a=arguments[0];if(a.length<3)return 0;for(var b=0,c=a[0].x,d=1;d<a.length-1;d++){var e=a[d].x-c,f=a[d+1].y,g=a[d-1].y;b+=e*(g-f)}return b/2}if(Zf(arguments[0],F)){var h=arguments[0],i=h.size();if(i<3)return 0;var j=new l,k=new l,m=new l;h.getCoordinate(0,k),h.getCoordinate(1,m);var c=k.x;m.x-=c;for(var b=0,d=1;d<i-1;d++)j.y=k.y,k.x=m.x,k.y=m.y,h.getCoordinate(d+1,m),m.x-=c,b+=k.x*(j.y-m.y);return b/2}},hb.distanceLineLine=function(a,b,c,d){if(a.equals(b))return hb.distancePointLine(a,c,d);if(c.equals(d))return hb.distancePointLine(d,a,b);var e=!1;if(v.intersects(a,b,c,d)){var f=(b.x-a.x)*(d.y-c.y)-(b.y-a.y)*(d.x-c.x);if(0===f)e=!0;else{var g=(a.y-c.y)*(d.x-c.x)-(a.x-c.x)*(d.y-c.y),h=(a.y-c.y)*(b.x-a.x)-(a.x-c.x)*(b.y-a.y),i=h/f,j=g/f;(j<0||j>1||i<0||i>1)&&(e=!0)}}else e=!0;return e?z.min(hb.distancePointLine(a,c,d),hb.distancePointLine(b,c,d),hb.distancePointLine(c,a,b),hb.distancePointLine(d,a,b)):0},hb.isPointInRing=function(a,b){return hb.locatePointInRing(a,b)!==y.EXTERIOR},hb.computeLength=function(a){var b=a.size();if(b<=1)return 0;var c=0,d=new l;a.getCoordinate(0,d);for(var e=d.x,f=d.y,g=1;g<b;g++){a.getCoordinate(g,d);var h=d.x,i=d.y,j=h-e,k=i-f;c+=Math.sqrt(j*j+k*k),e=h,f=i}return c},hb.isCCW=function(a){var b=a.length-1;if(b<3)throw new c("Ring has fewer than 4 points, so orientation cannot be determined");for(var d=a[0],e=0,f=1;f<=b;f++){var g=a[f];g.y>d.y&&(d=g,e=f)}var h=e;do{h-=1,h<0&&(h=b)}while(a[h].equals2D(d)&&h!==e);var i=e;do{i=(i+1)%b}while(a[i].equals2D(d)&&i!==e);var j=a[h],k=a[i];if(j.equals2D(d)||k.equals2D(d)||j.equals2D(k))return!1;var l=hb.computeOrientation(j,d,k),m=!1;return m=0===l?j.x>k.x:l>0},hb.locatePointInRing=function(a,b){return gb.locatePointInRing(a,b)},hb.distancePointLinePerpendicular=function(a,b,c){var d=(c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y),e=((b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y))/d;return Math.abs(e)*Math.sqrt(d)},hb.computeOrientation=function(a,b,c){return hb.orientationIndex(a,b,c)},hb.distancePointLine=function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];if(0===b.length)throw new c("Line array must contain at least one vertex");for(var d=a.distance(b[0]),e=0;e<b.length-1;e++){var f=hb.distancePointLine(a,b[e],b[e+1]);f<d&&(d=f)}return d}if(3===arguments.length){var g=arguments[0],h=arguments[1],i=arguments[2];if(h.x===i.x&&h.y===i.y)return g.distance(h);var j=(i.x-h.x)*(i.x-h.x)+(i.y-h.y)*(i.y-h.y),k=((g.x-h.x)*(i.x-h.x)+(g.y-h.y)*(i.y-h.y))/j;if(k<=0)return g.distance(h);if(k>=1)return g.distance(i);var l=((h.y-g.y)*(i.x-h.x)-(h.x-g.x)*(i.y-h.y))/j;return Math.abs(l)*Math.sqrt(j)}},hb.isOnLine=function(a,b){for(var c=new eb,d=1;d<b.length;d++){var e=b[d-1],f=b[d];if(c.computeIntersection(a,e,f),c.hasIntersection())return!0}return!1},hb.CLOCKWISE=-1,hb.RIGHT=hb.CLOCKWISE,hb.COUNTERCLOCKWISE=1,hb.LEFT=hb.COUNTERCLOCKWISE,hb.COLLINEAR=0,hb.STRAIGHT=hb.COLLINEAR,Wf(ib.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof ib){var a=arguments[0],b=hb.orientationIndex(this.p0,this.p1,a.p0),c=hb.orientationIndex(this.p0,this.p1,a.p1);return b>=0&&c>=0?Math.max(b,c):b<=0&&c<=0?Math.max(b,c):0}if(arguments[0]instanceof l){var d=arguments[0];return hb.orientationIndex(this.p0,this.p1,d)}},toGeometry:function(a){return a.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(a){if(!(a instanceof ib))return!1;var b=a;return this.p0.equals(b.p0)&&this.p1.equals(b.p1)},intersection:function(a){var b=new eb;return b.computeIntersection(this.p0,this.p1,a.p0,a.p1),b.hasIntersection()?b.getIntersection(0):null},project:function(){if(arguments[0]instanceof l){var a=arguments[0];if(a.equals(this.p0)||a.equals(this.p1))return new l(a);var b=this.projectionFactor(a),c=new l;return c.x=this.p0.x+b*(this.p1.x-this.p0.x),c.y=this.p0.y+b*(this.p1.y-this.p0.y),c}if(arguments[0]instanceof ib){var d=arguments[0],e=this.projectionFactor(d.p0),f=this.projectionFactor(d.p1);if(e>=1&&f>=1)return null;if(e<=0&&f<=0)return null;var g=this.project(d.p0);e<0&&(g=this.p0),e>1&&(g=this.p1);var h=this.project(d.p1);return f<0&&(h=this.p0),f>1&&(h=this.p1),new ib(g,h)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(a){return 0===a?this.p0:this.p1},distancePerpendicular:function(a){return hb.distancePointLinePerpendicular(a,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return ib.midPoint(this.p0,this.p1)},projectionFactor:function(a){if(a.equals(this.p0))return 0;if(a.equals(this.p1))return 1;var b=this.p1.x-this.p0.x,c=this.p1.y-this.p0.y,e=b*b+c*c;if(e<=0)return d.NaN;var f=((a.x-this.p0.x)*b+(a.y-this.p0.y)*c)/e;return f},closestPoints:function(a){var b=this.intersection(a);if(null!==b)return[b,b];var c=new Array(2).fill(null),e=d.MAX_VALUE,f=null,g=this.closestPoint(a.p0);e=g.distance(a.p0),c[0]=g,c[1]=a.p0;var h=this.closestPoint(a.p1);f=h.distance(a.p1),f<e&&(e=f,c[0]=h,c[1]=a.p1);var i=a.closestPoint(this.p0);f=i.distance(this.p0),f<e&&(e=f,c[0]=this.p0,c[1]=i);var j=a.closestPoint(this.p1);return f=j.distance(this.p1),f<e&&(e=f,c[0]=this.p1,c[1]=j),c},closestPoint:function(a){var b=this.projectionFactor(a);if(b>0&&b<1)return this.project(a);var c=this.p0.distance(a),d=this.p1.distance(a);return c<d?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(a){var b=a,c=this.p0.compareTo(b.p0);return 0!==c?c:this.p1.compareTo(b.p1)},reverse:function(){var a=this.p0;this.p0=this.p1,this.p1=a},equalsTopo:function(a){return this.p0.equals(a.p0)&&this.p1.equals(a.p1)||this.p0.equals(a.p1)&&this.p1.equals(a.p0)},lineIntersection:function(a){try{var b=H.intersection(this.p0,this.p1,a.p0,a.p1);return b}catch(a){if(!(a instanceof x))throw a}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(a,b){var c=this.p0.x+a*(this.p1.x-this.p0.x),d=this.p0.y+a*(this.p1.y-this.p0.y),e=this.p1.x-this.p0.x,f=this.p1.y-this.p0.y,g=Math.sqrt(e*e+f*f),h=0,i=0;if(0!==b){if(g<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");h=b*e/g,i=b*f/g}var j=c-i,k=d+h,m=new l(j,k);return m},setCoordinates:function(){if(1===arguments.length){var a=arguments[0];this.setCoordinates(a.p0,a.p1)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.p0.x=b.x,this.p0.y=b.y,this.p1.x=c.x,this.p1.y=c.y}},segmentFraction:function(a){var b=this.projectionFactor(a);return b<0?b=0:(b>1||d.isNaN(b))&&(b=1),b},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof ib){var a=arguments[0];return hb.distanceLineLine(this.p0,this.p1,a.p0,a.p1)}if(arguments[0]instanceof l){var b=arguments[0];return hb.distancePointLine(b,this.p0,this.p1)}},pointAlong:function(a){var b=new l;return b.x=this.p0.x+a*(this.p1.x-this.p0.x),b.y=this.p0.y+a*(this.p1.y-this.p0.y),b},hashCode:function(){var a=java.lang.Double.doubleToLongBits(this.p0.x);a^=31*java.lang.Double.doubleToLongBits(this.p0.y);var b=Math.trunc(a)^Math.trunc(a>>32),c=java.lang.Double.doubleToLongBits(this.p1.x);c^=31*java.lang.Double.doubleToLongBits(this.p1.y);var d=Math.trunc(c)^Math.trunc(c>>32);return b^d},interfaces_:function(){return[e,h]},getClass:function(){return ib}}),ib.midPoint=function(a,b){return new l((a.x+b.x)/2,(a.y+b.y)/2)},ib.serialVersionUID=0x2d2172135f411c00,Wf(jb.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var a=jb.isTrue(this.matrix[y.INTERIOR][y.INTERIOR])||jb.isTrue(this.matrix[y.INTERIOR][y.BOUNDARY])||jb.isTrue(this.matrix[y.BOUNDARY][y.INTERIOR])||jb.isTrue(this.matrix[y.BOUNDARY][y.BOUNDARY]);return a&&this.matrix[y.EXTERIOR][y.INTERIOR]===ga.FALSE&&this.matrix[y.EXTERIOR][y.BOUNDARY]===ga.FALSE},isCoveredBy:function(){var a=jb.isTrue(this.matrix[y.INTERIOR][y.INTERIOR])||jb.isTrue(this.matrix[y.INTERIOR][y.BOUNDARY])||jb.isTrue(this.matrix[y.BOUNDARY][y.INTERIOR])||jb.isTrue(this.matrix[y.BOUNDARY][y.BOUNDARY]);return a&&this.matrix[y.INTERIOR][y.EXTERIOR]===ga.FALSE&&this.matrix[y.BOUNDARY][y.EXTERIOR]===ga.FALSE},set:function(){if(1===arguments.length)for(var a=arguments[0],b=0;b<a.length;b++){var c=Math.trunc(b/3),d=b%3;this.matrix[c][d]=ga.toDimensionValue(a.charAt(b))}else if(3===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2];this.matrix[e][f]=g}},isContains:function(){return jb.isTrue(this.matrix[y.INTERIOR][y.INTERIOR])&&this.matrix[y.EXTERIOR][y.INTERIOR]===ga.FALSE&&this.matrix[y.EXTERIOR][y.BOUNDARY]===ga.FALSE},setAtLeast:function(){if(1===arguments.length)for(var a=arguments[0],b=0;b<a.length;b++){var c=Math.trunc(b/3),d=b%3;this.setAtLeast(c,d,ga.toDimensionValue(a.charAt(b)))}else if(3===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2];this.matrix[e][f]<g&&(this.matrix[e][f]=g)}},setAtLeastIfValid:function(a,b,c){a>=0&&b>=0&&this.setAtLeast(a,b,c)},isWithin:function(){return jb.isTrue(this.matrix[y.INTERIOR][y.INTERIOR])&&this.matrix[y.INTERIOR][y.EXTERIOR]===ga.FALSE&&this.matrix[y.BOUNDARY][y.EXTERIOR]===ga.FALSE},isTouches:function(a,b){return a>b?this.isTouches(b,a):(a===ga.A&&b===ga.A||a===ga.L&&b===ga.L||a===ga.L&&b===ga.A||a===ga.P&&b===ga.A||a===ga.P&&b===ga.L)&&(this.matrix[y.INTERIOR][y.INTERIOR]===ga.FALSE&&(jb.isTrue(this.matrix[y.INTERIOR][y.BOUNDARY])||jb.isTrue(this.matrix[y.BOUNDARY][y.INTERIOR])||jb.isTrue(this.matrix[y.BOUNDARY][y.BOUNDARY])))},isOverlaps:function(a,b){return a===ga.P&&b===ga.P||a===ga.A&&b===ga.A?jb.isTrue(this.matrix[y.INTERIOR][y.INTERIOR])&&jb.isTrue(this.matrix[y.INTERIOR][y.EXTERIOR])&&jb.isTrue(this.matrix[y.EXTERIOR][y.INTERIOR]):a===ga.L&&b===ga.L&&(1===this.matrix[y.INTERIOR][y.INTERIOR]&&jb.isTrue(this.matrix[y.INTERIOR][y.EXTERIOR])&&jb.isTrue(this.matrix[y.EXTERIOR][y.INTERIOR]))},isEquals:function(a,b){return a===b&&(jb.isTrue(this.matrix[y.INTERIOR][y.INTERIOR])&&this.matrix[y.INTERIOR][y.EXTERIOR]===ga.FALSE&&this.matrix[y.BOUNDARY][y.EXTERIOR]===ga.FALSE&&this.matrix[y.EXTERIOR][y.INTERIOR]===ga.FALSE&&this.matrix[y.EXTERIOR][y.BOUNDARY]===ga.FALSE)},toString:function(){for(var a=new A("123456789"),b=0;b<3;b++)for(var c=0;c<3;c++)a.setCharAt(3*b+c,ga.toDimensionSymbol(this.matrix[b][c]));return a.toString()},setAll:function(a){for(var b=0;b<3;b++)for(var c=0;c<3;c++)this.matrix[b][c]=a},get:function(a,b){return this.matrix[a][b]},transpose:function(){var a=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=a,a=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=a,a=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=a,this},matches:function(a){if(9!==a.length)throw new c("Should be length 9: "+a);for(var b=0;b<3;b++)for(var d=0;d<3;d++)if(!jb.matches(this.matrix[b][d],a.charAt(3*b+d)))return!1;return!0},add:function(a){for(var b=0;b<3;b++)for(var c=0;c<3;c++)this.setAtLeast(b,c,a.get(b,c))},isDisjoint:function(){return this.matrix[y.INTERIOR][y.INTERIOR]===ga.FALSE&&this.matrix[y.INTERIOR][y.BOUNDARY]===ga.FALSE&&this.matrix[y.BOUNDARY][y.INTERIOR]===ga.FALSE&&this.matrix[y.BOUNDARY][y.BOUNDARY]===ga.FALSE},isCrosses:function(a,b){return a===ga.P&&b===ga.L||a===ga.P&&b===ga.A||a===ga.L&&b===ga.A?jb.isTrue(this.matrix[y.INTERIOR][y.INTERIOR])&&jb.isTrue(this.matrix[y.INTERIOR][y.EXTERIOR]):a===ga.L&&b===ga.P||a===ga.A&&b===ga.P||a===ga.A&&b===ga.L?jb.isTrue(this.matrix[y.INTERIOR][y.INTERIOR])&&jb.isTrue(this.matrix[y.EXTERIOR][y.INTERIOR]):a===ga.L&&b===ga.L&&0===this.matrix[y.INTERIOR][y.INTERIOR]},interfaces_:function(){return[f]},getClass:function(){return jb}}),jb.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var a=arguments[0],b=arguments[1];return b===ga.SYM_DONTCARE||(b===ga.SYM_TRUE&&(a>=0||a===ga.TRUE)||(b===ga.SYM_FALSE&&a===ga.FALSE||(b===ga.SYM_P&&a===ga.P||(b===ga.SYM_L&&a===ga.L||b===ga.SYM_A&&a===ga.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var c=arguments[0],d=arguments[1],e=new jb(c);return e.matches(d)}},jb.isTrue=function(a){return a>=0||a===ga.TRUE};var jg=Object.freeze({Coordinate:l,CoordinateList:u,Envelope:v,LineSegment:ib,GeometryFactory:ab,Geometry:K,Point:xa,LineString:va,LinearRing:Ba,Polygon:za,GeometryCollection:ja,MultiPoint:Aa,MultiLineString:ka,MultiPolygon:Ca,Dimension:ga,IntersectionMatrix:jb,PrecisionModel:$a});Wf(kb.prototype,{addPoint:function(a){this.ptCount+=1,this.ptCentSum.x+=a.x,this.ptCentSum.y+=a.y},setBasePoint:function(a){null===this.areaBasePt&&(this.areaBasePt=a)},addLineSegments:function(a){for(var b=0,c=0;c<a.length-1;c++){var d=a[c].distance(a[c+1]);if(0!==d){b+=d;var e=(a[c].x+a[c+1].x)/2;this.lineCentSum.x+=d*e;var f=(a[c].y+a[c+1].y)/2;this.lineCentSum.y+=d*f}}this.totalLength+=b,0===b&&a.length>0&&this.addPoint(a[0])},addHole:function(a){for(var b=hb.isCCW(a),c=0;c<a.length-1;c++)this.addTriangle(this.areaBasePt,a[c],a[c+1],b);this.addLineSegments(a)},getCentroid:function(){var a=new l;if(Math.abs(this.areasum2)>0)a.x=this.cg3.x/3/this.areasum2,a.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)a.x=this.lineCentSum.x/this.totalLength,a.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;a.x=this.ptCentSum.x/this.ptCount,a.y=this.ptCentSum.y/this.ptCount}return a},addShell:function(a){a.length>0&&this.setBasePoint(a[0]);for(var b=!hb.isCCW(a),c=0;c<a.length-1;c++)this.addTriangle(this.areaBasePt,a[c],a[c+1],b);this.addLineSegments(a)},addTriangle:function(a,b,c,d){var e=d?1:-1;kb.centroid3(a,b,c,this.triangleCent3);var f=kb.area2(a,b,c);this.cg3.x+=e*f*this.triangleCent3.x,this.cg3.y+=e*f*this.triangleCent3.y,this.areasum2+=e*f},add:function(){if(arguments[0]instanceof za){var a=arguments[0];this.addShell(a.getExteriorRing().getCoordinates());for(var b=0;b<a.getNumInteriorRing();b++)this.addHole(a.getInteriorRingN(b).getCoordinates())}else if(arguments[0]instanceof K){var c=arguments[0];if(c.isEmpty())return null;if(c instanceof xa)this.addPoint(c.getCoordinate());else if(c instanceof va)this.addLineSegments(c.getCoordinates());else if(c instanceof za){var d=c;this.add(d)}else if(c instanceof ja)for(var e=c,b=0;b<e.getNumGeometries();b++)this.add(e.getGeometryN(b))}},interfaces_:function(){return[]},getClass:function(){return kb}}),kb.area2=function(a,b,c){return(b.x-a.x)*(c.y-a.y)-(c.x-a.x)*(b.y-a.y)},kb.centroid3=function(a,b,c,d){return d.x=a.x+b.x+c.x,d.y=a.y+b.y+c.y,null},kb.getCentroid=function(a){var b=new kb(a);return b.getCentroid()},lb.prototype=new Error,lb.prototype.name="EmptyStackException",mb.prototype=new q,mb.prototype.add=function(a){return this.array_.push(a),!0},mb.prototype.get=function(a){if(a<0||a>=this.size())throw new IndexOutOfBoundsException;return this.array_[a]},mb.prototype.push=function(a){return this.array_.push(a),a},mb.prototype.pop=function(a){if(0===this.array_.length)throw new lb;return this.array_.pop()},mb.prototype.peek=function(){if(0===this.array_.length)throw new lb;return this.array_[this.array_.length-1]},mb.prototype.empty=function(){return 0===this.array_.length},mb.prototype.isEmpty=function(){return this.empty()},mb.prototype.search=function(a){return this.array_.indexOf(a)},mb.prototype.size=function(){return this.array_.length},mb.prototype.toArray=function(){for(var a=[],b=0,c=this.array_.length;b<c;b++)a.push(this.array_[b]);return a},Wf(nb.prototype,{filter:function(a){this.treeSet.contains(a)||(this.list.add(a),this.treeSet.add(a))},getCoordinates:function(){var a=new Array(this.list.size()).fill(null);return this.list.toArray(a)},interfaces_:function(){return[L]},getClass:function(){return nb}}),nb.filterCoordinates=function(a){for(var b=new nb,c=0;c<a.length;c++)b.filter(a[c]);return b.getCoordinates()},Wf(ob.prototype,{preSort:function(a){for(var b=null,c=1;c<a.length;c++)(a[c].y<a[0].y||a[c].y===a[0].y&&a[c].x<a[0].x)&&(b=a[0],a[0]=a[c],a[c]=b);return fa.sort(a,1,a.length,new pb(a[0])),a},computeOctRing:function(a){var b=this.computeOctPts(a),c=new u;return c.add(b,!1),c.size()<3?null:(c.closeRing(),c.toCoordinateArray())},lineOrPolygon:function(a){if(a=this.cleanRing(a),3===a.length)return this.geomFactory.createLineString([a[0],a[1]]);var b=this.geomFactory.createLinearRing(a);return this.geomFactory.createPolygon(b,null)},cleanRing:function(a){k.equals(a[0],a[a.length-1]);for(var b=new t,c=null,d=0;d<=a.length-2;d++){var e=a[d],f=a[d+1];e.equals(f)||null!==c&&this.isBetween(c,e,f)||(b.add(e),c=e)}b.add(a[a.length-1]);var g=new Array(b.size()).fill(null);return b.toArray(g)},isBetween:function(a,b,c){if(0!==hb.computeOrientation(a,b,c))return!1;if(a.x!==c.x){if(a.x<=b.x&&b.x<=c.x)return!0;if(c.x<=b.x&&b.x<=a.x)return!0}if(a.y!==c.y){if(a.y<=b.y&&b.y<=c.y)return!0;if(c.y<=b.y&&b.y<=a.y)return!0}return!1},reduce:function(a){var b=this.computeOctRing(a);if(null===b)return a;for(var c=new ea,d=0;d<b.length;d++)c.add(b[d]);for(var d=0;d<a.length;d++)hb.isPointInRing(a[d],b)||c.add(a[d]);var e=R.toCoordinateArray(c);return e.length<3?this.padArray3(e):e},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var a=this.inputPts;this.inputPts.length>50&&(a=this.reduce(this.inputPts));var b=this.preSort(a),c=this.grahamScan(b),d=this.toCoordinateArray(c);return this.lineOrPolygon(d)},padArray3:function(a){for(var b=new Array(3).fill(null),c=0;c<b.length;c++)c<a.length?b[c]=a[c]:b[c]=a[0];return b},computeOctPts:function(a){for(var b=new Array(8).fill(null),c=0;c<b.length;c++)b[c]=a[0];for(var d=1;d<a.length;d++)a[d].x<b[0].x&&(b[0]=a[d]),a[d].x-a[d].y<b[1].x-b[1].y&&(b[1]=a[d]),a[d].y>b[2].y&&(b[2]=a[d]),a[d].x+a[d].y>b[3].x+b[3].y&&(b[3]=a[d]),a[d].x>b[4].x&&(b[4]=a[d]),a[d].x-a[d].y>b[5].x-b[5].y&&(b[5]=a[d]),a[d].y<b[6].y&&(b[6]=a[d]),a[d].x+a[d].y<b[7].x+b[7].y&&(b[7]=a[d]);return b},toCoordinateArray:function(a){for(var b=new Array(a.size()).fill(null),c=0;c<a.size();c++){var d=a.get(c);b[c]=d}return b},grahamScan:function(a){var b=null,c=new mb;b=c.push(a[0]),b=c.push(a[1]),b=c.push(a[2]);for(var d=3;d<a.length;d++){for(b=c.pop();!c.empty()&&hb.computeOrientation(c.peek(),b,a[d])>0;)b=c.pop();b=c.push(b),b=c.push(a[d])}return b=c.push(a[0]),c},interfaces_:function(){return[]},getClass:function(){return ob}}),ob.extractCoordinates=function(a){var b=new nb;return a.apply(b),b.getCoordinates()},Wf(pb.prototype,{compare:function(a,b){var c=a,d=b;return pb.polarCompare(this.origin,c,d)},interfaces_:function(){return[g]},getClass:function(){return pb}}),pb.polarCompare=function(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=c.x-a.x,g=c.y-a.y,h=hb.computeOrientation(a,b,c);if(h===hb.COUNTERCLOCKWISE)return 1;if(h===hb.CLOCKWISE)return-1;var i=d*d+e*e,j=f*f+g*g;return i<j?-1:i>j?1:0},ob.RadialComparator=pb,Wf(qb.prototype,{transformPoint:function(a,b){return this.factory.createPoint(this.transformCoordinates(a.getCoordinateSequence(),a))},transformPolygon:function(a,b){var c=!0,d=this.transformLinearRing(a.getExteriorRing(),a);null!==d&&d instanceof Ba&&!d.isEmpty()||(c=!1);for(var e=new t,f=0;f<a.getNumInteriorRing();f++){var g=this.transformLinearRing(a.getInteriorRingN(f),a);null===g||g.isEmpty()||(g instanceof Ba||(c=!1),e.add(g))}if(c)return this.factory.createPolygon(d,e.toArray([]));var h=new t;return null!==d&&h.add(d),h.addAll(e),this.factory.buildGeometry(h)},createCoordinateSequence:function(a){return this.factory.getCoordinateSequenceFactory().create(a)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(a,b){for(var c=new t,d=0;d<a.getNumGeometries();d++){var e=this.transformLineString(a.getGeometryN(d),a);null!==e&&(e.isEmpty()||c.add(e))}return this.factory.buildGeometry(c)},transformCoordinates:function(a,b){return this.copy(a)},transformLineString:function(a,b){return this.factory.createLineString(this.transformCoordinates(a.getCoordinateSequence(),a))},transformMultiPoint:function(a,b){for(var c=new t,d=0;d<a.getNumGeometries();d++){var e=this.transformPoint(a.getGeometryN(d),a);null!==e&&(e.isEmpty()||c.add(e))}return this.factory.buildGeometry(c)},transformMultiPolygon:function(a,b){for(var c=new t,d=0;d<a.getNumGeometries();d++){var e=this.transformPolygon(a.getGeometryN(d),a);null!==e&&(e.isEmpty()||c.add(e))}return this.factory.buildGeometry(c)},copy:function(a){return a.copy()},transformGeometryCollection:function(a,b){for(var c=new t,d=0;d<a.getNumGeometries();d++){var e=this.transform(a.getGeometryN(d));null!==e&&(this.pruneEmptyGeometry&&e.isEmpty()||c.add(e))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(ab.toGeometryArray(c)):this.factory.buildGeometry(c)},transform:function(a){if(this.inputGeom=a,this.factory=a.getFactory(),a instanceof xa)return this.transformPoint(a,null);if(a instanceof Aa)return this.transformMultiPoint(a,null);if(a instanceof Ba)return this.transformLinearRing(a,null);if(a instanceof va)return this.transformLineString(a,null);if(a instanceof ka)return this.transformMultiLineString(a,null);if(a instanceof za)return this.transformPolygon(a,null);if(a instanceof Ca)return this.transformMultiPolygon(a,null);if(a instanceof ja)return this.transformGeometryCollection(a,null);throw new c("Unknown Geometry subtype: "+a.getClass().getName())},transformLinearRing:function(a,b){var c=this.transformCoordinates(a.getCoordinateSequence(),a);if(null===c)return this.factory.createLinearRing(null);var d=c.size();return d>0&&d<4&&!this.preserveType?this.factory.createLineString(c):this.factory.createLinearRing(c)},interfaces_:function(){return[]},getClass:function(){return qb}}),Wf(rb.prototype,{snapVertices:function(a,b){for(var c=this._isClosed?a.size()-1:a.size(),d=0;d<c;d++){var e=a.get(d),f=this.findSnapForVertex(e,b);null!==f&&(a.set(d,new l(f)),0===d&&this._isClosed&&a.set(a.size()-1,new l(f)))}},findSnapForVertex:function(a,b){for(var c=0;c<b.length;c++){if(a.equals2D(b[c]))return null;if(a.distance(b[c])<this.snapTolerance)return b[c]}return null},snapTo:function(a){var b=new u(this.srcPts);this.snapVertices(b,a),this.snapSegments(b,a);var c=b.toCoordinateArray();return c},snapSegments:function(a,b){if(0===b.length)return null;var c=b.length;b[0].equals2D(b[b.length-1])&&(c=b.length-1);for(var d=0;d<c;d++){var e=b[d],f=this.findSegmentIndexToSnap(e,a);f>=0&&a.add(f+1,new l(e),!1)}},findSegmentIndexToSnap:function(a,b){for(var c=d.MAX_VALUE,e=-1,f=0;f<b.size()-1;f++){if(this.seg.p0=b.get(f),this.seg.p1=b.get(f+1),this.seg.p0.equals2D(a)||this.seg.p1.equals2D(a)){if(this.allowSnappingToSourceVertices)continue;return-1}var g=this.seg.distance(a);g<this.snapTolerance&&g<c&&(c=g,e=f)}return e},setAllowSnappingToSourceVertices:function(a){this.allowSnappingToSourceVertices=a},interfaces_:function(){return[]},getClass:function(){return rb}}),rb.isClosed=function(a){return!(a.length<=1)&&a[0].equals2D(a[a.length-1])},Wf(sb.prototype,{snapTo:function(a,b){var c=this.extractTargetCoordinates(a),d=new tb(b,c);return d.transform(this.srcGeom)},snapToSelf:function(a,b){var c=this.extractTargetCoordinates(this.srcGeom),d=new tb(a,c,!0),e=d.transform(this.srcGeom),f=e;return b&&Zf(f,ya)&&(f=e.buffer(0)),f},computeSnapTolerance:function(a){var b=this.computeMinimumSegmentLength(a),c=b/10;return c},extractTargetCoordinates:function(a){for(var b=new ea,c=a.getCoordinates(),d=0;d<c.length;d++)b.add(c[d]);return b.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(a){for(var b=d.MAX_VALUE,c=0;c<a.length-1;c++){var e=a[c].distance(a[c+1]);e<b&&(b=e)}return b},interfaces_:function(){return[]},getClass:function(){return sb}}),sb.snap=function(a,b,c){var d=new Array(2).fill(null),e=new sb(a);d[0]=e.snapTo(b,c);var f=new sb(b);return d[1]=f.snapTo(d[0],c),d},sb.computeOverlaySnapTolerance=function(){if(1===arguments.length){var a=arguments[0],b=sb.computeSizeBasedSnapTolerance(a),c=a.getPrecisionModel();if(c.getType()===$a.FIXED){var d=1/c.getScale()*2/1.415;d>b&&(b=d)}return b}if(2===arguments.length){var e=arguments[0],f=arguments[1];return Math.min(sb.computeOverlaySnapTolerance(e),sb.computeOverlaySnapTolerance(f))}},sb.computeSizeBasedSnapTolerance=function(a){var b=a.getEnvelopeInternal(),c=Math.min(b.getHeight(),b.getWidth()),d=c*sb.SNAP_PRECISION_FACTOR;return d},sb.snapToSelf=function(a,b,c){var d=new sb(a);return d.snapToSelf(b,c)},sb.SNAP_PRECISION_FACTOR=1e-9,Xf(tb,qb),Wf(tb.prototype,{snapLine:function(a,b){var c=new rb(a,this.snapTolerance);return c.setAllowSnappingToSourceVertices(this.isSelfSnap),c.snapTo(b)},transformCoordinates:function(a,b){var c=a.toCoordinateArray(),d=this.snapLine(c,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(d)},interfaces_:function(){return[]},getClass:function(){return tb}}),Wf(ub.prototype,{getCommon:function(){return d.longBitsToDouble(this.commonBits)},add:function(a){var b=d.doubleToLongBits(a);if(this.isFirst)return this.commonBits=b,this.commonSignExp=ub.signExpBits(this.commonBits),this.isFirst=!1,null;var c=ub.signExpBits(b);return c!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=ub.numCommonMostSigMantissaBits(this.commonBits,b),void(this.commonBits=ub.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var a=arguments[0],b=d.longBitsToDouble(a),c=Long.toBinaryString(a),e="0000000000000000000000000000000000000000000000000000000000000000"+c,f=e.substring(e.length-64),g=f.substring(0,1)+"  "+f.substring(1,12)+"(exp) "+f.substring(12)+" [ "+b+" ]";return g}},interfaces_:function(){return[]},getClass:function(){return ub}}),ub.getBit=function(a,b){var c=1<<b;return 0!==(a&c)?1:0},ub.signExpBits=function(a){return a>>52},ub.zeroLowerBits=function(a,b){var c=(1<<b)-1,d=~c,e=a&d;return e},ub.numCommonMostSigMantissaBits=function(a,b){for(var c=0,d=52;d>=0;d--){if(ub.getBit(a,d)!==ub.getBit(b,d))return c;c++}return 52},Wf(vb.prototype,{addCommonBits:function(a){var b=new xb(this.commonCoord);a.apply(b),a.geometryChanged()},removeCommonBits:function(a){if(0===this.commonCoord.x&&0===this.commonCoord.y)return a;var b=new l(this.commonCoord);b.x=-b.x,b.y=-b.y;var c=new xb(b);return a.apply(c),a.geometryChanged(),a},getCommonCoordinate:function(){return this.commonCoord},add:function(a){a.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return vb}}),Wf(wb.prototype,{filter:function(a){this.commonBitsX.add(a.x),this.commonBitsY.add(a.y)},getCommonCoordinate:function(){return new l(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[L]},getClass:function(){return wb}}),Wf(xb.prototype,{filter:function(a,b){var c=a.getOrdinate(b,0)+this.trans.x,d=a.getOrdinate(b,1)+this.trans.y;a.setOrdinate(b,0,c),a.setOrdinate(b,1,d)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ia]},getClass:function(){return xb}}),vb.CommonCoordinateFilter=wb,vb.Translater=xb,Wf(yb.prototype,{next:function(){if(this.atStart)return this.atStart=!1,yb.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new r;var a=this.parent.getGeometryN(this.index++);return a instanceof ja?(this.subcollectionIterator=new yb(a),this.subcollectionIterator.next()):a},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[n]},getClass:function(){return yb}}),yb.isAtomic=function(a){return!(a instanceof ja)},Wf(zb.prototype,{locateInternal:function(){if(arguments[0]instanceof l&&arguments[1]instanceof za){var a=arguments[0],b=arguments[1];if(b.isEmpty())return y.EXTERIOR;var c=b.getExteriorRing(),d=this.locateInPolygonRing(a,c);if(d===y.EXTERIOR)return y.EXTERIOR;if(d===y.BOUNDARY)return y.BOUNDARY;for(var e=0;e<b.getNumInteriorRing();e++){var f=b.getInteriorRingN(e),g=this.locateInPolygonRing(a,f);if(g===y.INTERIOR)return y.EXTERIOR;if(g===y.BOUNDARY)return y.BOUNDARY}return y.INTERIOR}if(arguments[0]instanceof l&&arguments[1]instanceof va){var h=arguments[0],i=arguments[1];if(!i.getEnvelopeInternal().intersects(h))return y.EXTERIOR;var j=i.getCoordinates();return i.isClosed()||!h.equals(j[0])&&!h.equals(j[j.length-1])?hb.isOnLine(h,j)?y.INTERIOR:y.EXTERIOR:y.BOUNDARY}if(arguments[0]instanceof l&&arguments[1]instanceof xa){
var k=arguments[0],m=arguments[1],n=m.getCoordinate();return n.equals2D(k)?y.INTERIOR:y.EXTERIOR}},locateInPolygonRing:function(a,b){return b.getEnvelopeInternal().intersects(a)?hb.locatePointInRing(a,b.getCoordinates()):y.EXTERIOR},intersects:function(a,b){return this.locate(a,b)!==y.EXTERIOR},updateLocationInfo:function(a){a===y.INTERIOR&&(this.isIn=!0),a===y.BOUNDARY&&this.numBoundaries++},computeLocation:function(a,b){if(b instanceof xa&&this.updateLocationInfo(this.locateInternal(a,b)),b instanceof va)this.updateLocationInfo(this.locateInternal(a,b));else if(b instanceof za)this.updateLocationInfo(this.locateInternal(a,b));else if(b instanceof ka)for(var c=b,d=0;d<c.getNumGeometries();d++){var e=c.getGeometryN(d);this.updateLocationInfo(this.locateInternal(a,e))}else if(b instanceof Ca)for(var f=b,d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);this.updateLocationInfo(this.locateInternal(a,g))}else if(b instanceof ja)for(var h=new yb(b);h.hasNext();){var i=h.next();i!==b&&this.computeLocation(a,i)}},locate:function(a,b){return b.isEmpty()?y.EXTERIOR:b instanceof va?this.locateInternal(a,b):b instanceof za?this.locateInternal(a,b):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(a,b),this.boundaryRule.isInBoundary(this.numBoundaries)?y.BOUNDARY:this.numBoundaries>0||this.isIn?y.INTERIOR:y.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return zb}}),Wf(Ab.prototype,{interfaces_:function(){return[]},getClass:function(){return Ab}}),Ab.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var a=arguments[0],b=arguments[1];if(0===a&&0===b)throw new c("Cannot compute the octant for point ( "+a+", "+b+" )");var d=Math.abs(a),e=Math.abs(b);return a>=0?b>=0?d>=e?0:1:d>=e?7:6:b>=0?d>=e?3:2:d>=e?4:5}if(arguments[0]instanceof l&&arguments[1]instanceof l){var f=arguments[0],g=arguments[1],h=g.x-f.x,i=g.y-f.y;if(0===h&&0===i)throw new c("Cannot compute the octant for two identical points "+f);return Ab.octant(h,i)}},Wf(Bb.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(a){},isClosed:function(){},setData:function(a){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return Bb}}),Wf(Cb.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(a){return this.pts[a]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(a){return a===this.pts.length-1?-1:Ab.octant(this.getCoordinate(a),this.getCoordinate(a+1))},setData:function(a){this.data=a},getData:function(){return this.data},toString:function(){return cb.toLineString(new Ia(this.pts))},interfaces_:function(){return[Bb]},getClass:function(){return Cb}}),Wf(Db.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return Db}}),Wf(Eb.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[Db,h]},getClass:function(){return Eb}}),Wf(Fb.prototype,{poll:function(){if(this.isEmpty())return null;var a=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),a},size:function(){return this._size},reorder:function(a){for(var b=null,c=this.items.get(a);2*a<=this._size&&(b=2*a,b!==this._size&&this.items.get(b+1).compareTo(this.items.get(b))<0&&b++,this.items.get(b).compareTo(c)<0);a=b)this.items.set(a,this.items.get(b));this.items.set(a,c)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(a){this.items.add(null),this._size+=1;var b=this._size;for(this.items.set(0,a);a.compareTo(this.items.get(Math.trunc(b/2)))<0;b/=2)this.items.set(b,this.items.get(Math.trunc(b/2)));this.items.set(b,a)},interfaces_:function(){return[]},getClass:function(){return Fb}}),Wf(Gb.prototype,{visitItem:function(a){},interfaces_:function(){return[]},getClass:function(){return Gb}}),Wf(Hb.prototype,{insert:function(a,b){},remove:function(a,b){},query:function(){if(1===arguments.length){arguments[0]}else if(2===arguments.length){arguments[0],arguments[1]}},interfaces_:function(){return[]},getClass:function(){return Hb}}),Wf(Ib.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(a){k.isTrue(null===this.bounds),this.childBoundables.add(a)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[Db,h]},getClass:function(){return Ib}}),Ib.serialVersionUID=0x5a1e55ec41369800;var kg={reverseOrder:function(){return{compare:function(a,b){return b.compareTo(a)}}},min:function(a){return kg.sort(a),a.get(0)},sort:function(a,b){var c=a.toArray();b?fa.sort(c,b):fa.sort(c);for(var d=a.iterator(),e=0,f=c.length;e<f;e++)d.next(),d.set(c[e])},singletonList:function(a){var b=new t;return b.add(a),b}};Wf(Jb.prototype,{expandToQueue:function(a,b){var d=Jb.isComposite(this.boundable1),e=Jb.isComposite(this.boundable2);if(d&&e)return Jb.area(this.boundable1)>Jb.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,a,b),null):(this.expand(this.boundable2,this.boundable1,a,b),null);if(d)return this.expand(this.boundable1,this.boundable2,a,b),null;if(e)return this.expand(this.boundable2,this.boundable1,a,b),null;throw new c("neither boundable is composite")},isLeaves:function(){return!(Jb.isComposite(this.boundable1)||Jb.isComposite(this.boundable2))},compareTo:function(a){var b=a;return this._distance<b._distance?-1:this._distance>b._distance?1:0},expand:function(a,b,c,d){for(var e=a.getChildBoundables(),f=e.iterator();f.hasNext();){var g=f.next(),h=new Jb(g,b,this.itemDistance);h.getDistance()<d&&c.add(h)}},getBoundable:function(a){return 0===a?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[e]},getClass:function(){return Jb}}),Jb.area=function(a){return a.getBounds().getArea()},Jb.isComposite=function(a){return a instanceof Ib},Wf(Kb.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(a){return a.get(a.size()-1)},size:function a(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var b=arguments[0],a=0,c=b.getChildBoundables().iterator();c.hasNext();){var d=c.next();d instanceof Ib?a+=this.size(d):d instanceof Eb&&(a+=1)}return a}},removeItem:function(a,b){for(var c=null,d=a.getChildBoundables().iterator();d.hasNext();){var e=d.next();e instanceof Eb&&e.getItem()===b&&(c=e)}return null!==c&&(a.getChildBoundables().remove(c),!0)},itemsTree:function(){if(0===arguments.length){this.build();var a=this.itemsTree(this.root);return null===a?new t:a}if(1===arguments.length){for(var b=arguments[0],c=new t,d=b.getChildBoundables().iterator();d.hasNext();){var e=d.next();if(e instanceof Ib){var f=this.itemsTree(e);null!==f&&c.add(f)}else e instanceof Eb?c.add(e.getItem()):k.shouldNeverReachHere()}return c.size()<=0?null:c}},insert:function(a,b){k.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new Eb(a,b))},boundablesAtLevel:function(){if(1===arguments.length){var a=arguments[0],b=new t;return this.boundablesAtLevel(a,this.root,b),b}if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];if(k.isTrue(c>-2),d.getLevel()===c)return e.add(d),null;for(var f=d.getChildBoundables().iterator();f.hasNext();){var g=f.next();g instanceof Ib?this.boundablesAtLevel(c,g,e):(k.isTrue(g instanceof Eb),c===-1&&e.add(g))}return null}},query:function(){if(1===arguments.length){var a=arguments[0];this.build();var b=new t;return this.isEmpty()?b:(this.getIntersectsOp().intersects(this.root.getBounds(),a)&&this.query(a,this.root,b),b)}if(2===arguments.length){var c=arguments[0],d=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),c)&&this.query(c,this.root,d)}else if(3===arguments.length)if(Zf(arguments[2],Gb)&&arguments[0]instanceof Object&&arguments[1]instanceof Ib)for(var e=arguments[0],f=arguments[1],g=arguments[2],h=f.getChildBoundables(),i=0;i<h.size();i++){var j=h.get(i);this.getIntersectsOp().intersects(j.getBounds(),e)&&(j instanceof Ib?this.query(e,j,g):j instanceof Eb?g.visitItem(j.getItem()):k.shouldNeverReachHere())}else if(Zf(arguments[2],q)&&arguments[0]instanceof Object&&arguments[1]instanceof Ib)for(var l=arguments[0],m=arguments[1],n=arguments[2],h=m.getChildBoundables(),i=0;i<h.size();i++){var j=h.get(i);this.getIntersectsOp().intersects(j.getBounds(),l)&&(j instanceof Ib?this.query(l,j,n):j instanceof Eb?n.add(j.getItem()):k.shouldNeverReachHere())}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),a)&&this.remove(a,this.root,b)}if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2],f=this.removeItem(d,e);if(f)return!0;for(var g=null,h=d.getChildBoundables().iterator();h.hasNext();){var i=h.next();if(this.getIntersectsOp().intersects(i.getBounds(),c)&&i instanceof Ib&&(f=this.remove(c,i,e))){g=i;break}}return null!==g&&g.getChildBoundables().isEmpty()&&d.getChildBoundables().remove(g),f}},createHigherLevels:function(a,b){k.isTrue(!a.isEmpty());var c=this.createParentBoundables(a,b+1);return 1===c.size()?c.get(0):this.createHigherLevels(c,b+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var a=arguments[0],b=0,c=a.getChildBoundables().iterator();c.hasNext();){var d=c.next();if(d instanceof Ib){var e=this.depth(d);e>b&&(b=e)}}return b+1}},createParentBoundables:function(a,b){k.isTrue(!a.isEmpty());var c=new t;c.add(this.createNode(b));var d=new t(a);kg.sort(d,this.getComparator());for(var e=d.iterator();e.hasNext();){var f=e.next();this.lastNode(c).getChildBoundables().size()===this.getNodeCapacity()&&c.add(this.createNode(b)),this.lastNode(c).addChildBoundable(f)}return c},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[h]},getClass:function(){return Kb}}),Kb.compareDoubles=function(a,b){return a>b?1:a<b?-1:0},Kb.IntersectsOp=Lb,Kb.serialVersionUID=-0x35ef64c82d4c5400,Kb.DEFAULT_NODE_CAPACITY=10,Wf(Mb.prototype,{distance:function(a,b){},interfaces_:function(){return[]},getClass:function(){return Mb}}),Xf(Nb,Kb),Wf(Nb.prototype,{createParentBoundablesFromVerticalSlices:function(a,b){k.isTrue(a.length>0);for(var c=new t,d=0;d<a.length;d++)c.addAll(this.createParentBoundablesFromVerticalSlice(a[d],b));return c},createNode:function(a){return new Ob(a)},size:function(){return 0===arguments.length?Kb.prototype.size.call(this):Kb.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return Kb.prototype.insert.apply(this,arguments);var a=arguments[0],b=arguments[1];return a.isNull()?null:void Kb.prototype.insert.call(this,a,b)},getIntersectsOp:function(){return Nb.intersectsOp},verticalSlices:function(a,b){for(var c=Math.trunc(Math.ceil(a.size()/b)),d=new Array(b).fill(null),e=a.iterator(),f=0;f<b;f++){d[f]=new t;for(var g=0;e.hasNext()&&g<c;){var h=e.next();d[f].add(h),g++}}return d},query:function(){if(1===arguments.length){var a=arguments[0];return Kb.prototype.query.call(this,a)}if(2===arguments.length){var b=arguments[0],c=arguments[1];Kb.prototype.query.call(this,b,c)}else if(3===arguments.length)if(Zf(arguments[2],Gb)&&arguments[0]instanceof Object&&arguments[1]instanceof Ib){var d=arguments[0],e=arguments[1],f=arguments[2];Kb.prototype.query.call(this,d,e,f)}else if(Zf(arguments[2],q)&&arguments[0]instanceof Object&&arguments[1]instanceof Ib){var g=arguments[0],h=arguments[1],i=arguments[2];Kb.prototype.query.call(this,g,h,i)}},getComparator:function(){return Nb.yComparator},createParentBoundablesFromVerticalSlice:function(a,b){return Kb.prototype.createParentBoundables.call(this,a,b)},remove:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];return Kb.prototype.remove.call(this,a,b)}return Kb.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?Kb.prototype.depth.call(this):Kb.prototype.depth.apply(this,arguments)},createParentBoundables:function(a,b){k.isTrue(!a.isEmpty());var c=Math.trunc(Math.ceil(a.size()/this.getNodeCapacity())),d=new t(a);kg.sort(d,Nb.xComparator);var e=this.verticalSlices(d,Math.trunc(Math.ceil(Math.sqrt(c))));return this.createParentBoundablesFromVerticalSlices(e,b)},nearestNeighbour:function(){if(1===arguments.length){if(Zf(arguments[0],Mb)){var a=arguments[0],b=new Jb(this.getRoot(),this.getRoot(),a);return this.nearestNeighbour(b)}if(arguments[0]instanceof Jb){var c=arguments[0];return this.nearestNeighbour(c,d.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof Nb&&Zf(arguments[1],Mb)){var e=arguments[0],f=arguments[1],b=new Jb(this.getRoot(),e.getRoot(),f);return this.nearestNeighbour(b)}if(arguments[0]instanceof Jb&&"number"==typeof arguments[1]){var g=arguments[0],h=arguments[1],i=h,j=null,k=new Fb;for(k.add(g);!k.isEmpty()&&i>0;){var l=k.poll(),m=l.getDistance();if(m>=i)break;l.isLeaves()?(i=m,j=l):l.expandToQueue(k,i)}return[j.getBoundable(0).getItem(),j.getBoundable(1).getItem()]}}else if(3===arguments.length){var n=arguments[0],o=arguments[1],p=arguments[2],q=new Eb(n,o),b=new Jb(this.getRoot(),q,p);return this.nearestNeighbour(b)[0]}},interfaces_:function(){return[Hb,h]},getClass:function(){return Nb}}),Nb.centreX=function(a){return Nb.avg(a.getMinX(),a.getMaxX())},Nb.avg=function(a,b){return(a+b)/2},Nb.centreY=function(a){return Nb.avg(a.getMinY(),a.getMaxY())},Xf(Ob,Ib),Wf(Ob.prototype,{computeBounds:function(){for(var a=null,b=this.getChildBoundables().iterator();b.hasNext();){var c=b.next();null===a?a=new v(c.getBounds()):a.expandToInclude(c.getBounds())}return a},interfaces_:function(){return[]},getClass:function(){return Ob}}),Nb.STRtreeNode=Ob,Nb.serialVersionUID=0x39920f7d5f261e0,Nb.xComparator={interfaces_:function(){return[g]},compare:function(a,b){return Kb.compareDoubles(Nb.centreX(a.getBounds()),Nb.centreX(b.getBounds()))}},Nb.yComparator={interfaces_:function(){return[g]},compare:function(a,b){return Kb.compareDoubles(Nb.centreY(a.getBounds()),Nb.centreY(b.getBounds()))}},Nb.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(a,b){return a.intersects(b)}},Nb.DEFAULT_NODE_CAPACITY=10,Wf(Pb.prototype,{interfaces_:function(){return[]},getClass:function(){return Pb}}),Pb.relativeSign=function(a,b){return a<b?-1:a>b?1:0},Pb.compare=function(a,b,c){if(b.equals2D(c))return 0;var d=Pb.relativeSign(b.x,c.x),e=Pb.relativeSign(b.y,c.y);switch(a){case 0:return Pb.compareValue(d,e);case 1:return Pb.compareValue(e,d);case 2:return Pb.compareValue(e,-d);case 3:return Pb.compareValue(-d,e);case 4:return Pb.compareValue(-d,-e);case 5:return Pb.compareValue(-e,-d);case 6:return Pb.compareValue(-e,d);case 7:return Pb.compareValue(d,-e)}return k.shouldNeverReachHere("invalid octant value"),0},Pb.compareValue=function(a,b){return a<0?-1:a>0?1:b<0?-1:b>0?1:0},Wf(Qb.prototype,{getCoordinate:function(){return this.coord},print:function(a){a.print(this.coord),a.print(" seg # = "+this.segmentIndex)},compareTo:function(a){var b=a;return this.segmentIndex<b.segmentIndex?-1:this.segmentIndex>b.segmentIndex?1:this.coord.equals2D(b.coord)?0:Pb.compare(this.segmentOctant,this.coord,b.coord)},isEndPoint:function(a){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===a},isInterior:function(){return this._isInterior},interfaces_:function(){return[e]},getClass:function(){return Qb}}),Wf(Rb.prototype,{getSplitCoordinates:function(){var a=new u;this.addEndpoints();for(var b=this.iterator(),c=b.next();b.hasNext();){var d=b.next();this.addEdgeCoordinates(c,d,a),c=d}return a.toCoordinateArray()},addCollapsedNodes:function(){var a=new t;this.findCollapsesFromInsertedNodes(a),this.findCollapsesFromExistingVertices(a);for(var b=a.iterator();b.hasNext();){var c=b.next().intValue();this.add(this.edge.getCoordinate(c),c)}},print:function(a){a.println("Intersections:");for(var b=this.iterator();b.hasNext();){var c=b.next();c.print(a)}},findCollapsesFromExistingVertices:function(a){for(var b=0;b<this.edge.size()-2;b++){var c=this.edge.getCoordinate(b),d=(this.edge.getCoordinate(b+1),this.edge.getCoordinate(b+2));c.equals2D(d)&&a.add(new B(b+1))}},addEdgeCoordinates:function(a,b,c){var d=b.segmentIndex-a.segmentIndex+2,e=this.edge.getCoordinate(b.segmentIndex),f=b.isInterior()||!b.coord.equals2D(e);f||d--;c.add(new l(a.coord),!1);for(var g=a.segmentIndex+1;g<=b.segmentIndex;g++)c.add(this.edge.getCoordinate(g));f&&c.add(new l(b.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(a){this.addEndpoints(),this.addCollapsedNodes();for(var b=this.iterator(),c=b.next();b.hasNext();){var d=b.next(),e=this.createSplitEdge(c,d);a.add(e),c=d}},findCollapseIndex:function(a,b,c){if(!a.coord.equals2D(b.coord))return!1;var d=b.segmentIndex-a.segmentIndex;return b.isInterior()||d--,1===d&&(c[0]=a.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(a){for(var b=new Array(1).fill(null),c=this.iterator(),d=c.next();c.hasNext();){var e=c.next(),f=this.findCollapseIndex(d,e,b);f&&a.add(new B(b[0])),d=e}},getEdge:function(){return this.edge},addEndpoints:function(){var a=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(a),a)},createSplitEdge:function(a,b){var c=b.segmentIndex-a.segmentIndex+2,d=this.edge.getCoordinate(b.segmentIndex),e=b.isInterior()||!b.coord.equals2D(d);e||c--;var f=new Array(c).fill(null),g=0;f[g++]=new l(a.coord);for(var h=a.segmentIndex+1;h<=b.segmentIndex;h++)f[g++]=this.edge.getCoordinate(h);return e&&(f[g]=new l(b.coord)),new Ub(f,this.edge.getData())},add:function(a,b){var c=new Qb(this.edge,a,b,this.edge.getSegmentOctant(b)),d=this.nodeMap.get(c);return null!==d?(k.isTrue(d.coord.equals2D(a),"Found equal nodes with different coordinates"),d):(this.nodeMap.put(c,c),c)},checkSplitEdgesCorrectness:function(a){var b=this.edge.getCoordinates(),c=a.get(0),d=c.getCoordinate(0);if(!d.equals2D(b[0]))throw new i("bad split edge start point at "+d);var e=a.get(a.size()-1),f=e.getCoordinates(),g=f[f.length-1];if(!g.equals2D(b[b.length-1]))throw new i("bad split edge end point at "+g)},interfaces_:function(){return[]},getClass:function(){return Rb}}),Wf(Sb.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[n]},getClass:function(){return Sb}}),Wf(Tb.prototype,{addIntersection:function(a,b){},interfaces_:function(){return[Bb]},getClass:function(){return Tb}}),Wf(Ub.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(a){return this.pts[a]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(a){return a===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(a),this.getCoordinate(a+1))},setData:function(a){this.data=a},safeOctant:function(a,b){return a.equals2D(b)?0:Ab.octant(a,b)},getData:function(){return this.data},addIntersection:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];this.addIntersectionNode(a,b)}else if(4===arguments.length){var c=arguments[0],d=arguments[1],e=(arguments[2],arguments[3]),f=new l(c.getIntersection(e));this.addIntersection(f,d)}},toString:function(){return cb.toLineString(new Ia(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(a,b){var c=b,d=c+1;if(d<this.pts.length){var e=this.pts[d];a.equals2D(e)&&(c=d)}var f=this.nodeList.add(a,c);return f},addIntersections:function(a,b,c){for(var d=0;d<a.getIntersectionNum();d++)this.addIntersection(a,b,c,d)},interfaces_:function(){return[Tb]},getClass:function(){return Ub}}),Ub.getNodedSubstrings=function(){if(1===arguments.length){var a=arguments[0],b=new t;return Ub.getNodedSubstrings(a,b),b}if(2===arguments.length)for(var c=arguments[0],d=arguments[1],e=c.iterator();e.hasNext();){var f=e.next();f.getNodeList().addSplitEdges(d)}},Wf(Vb.prototype,{overlap:function(){if(2===arguments.length){arguments[0],arguments[1]}else if(4===arguments.length){var a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3];a.getLineSegment(b,this.overlapSeg1),c.getLineSegment(d,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return Vb}}),Wf(Wb.prototype,{getLineSegment:function(a,b){b.p0=this.pts[a],b.p1=this.pts[a+1]},computeSelect:function(a,b,c,d){var e=this.pts[b],f=this.pts[c];if(d.tempEnv1.init(e,f),c-b===1)return d.select(this,b),null;if(!a.intersects(d.tempEnv1))return null;var g=Math.trunc((b+c)/2);b<g&&this.computeSelect(a,b,g,d),g<c&&this.computeSelect(a,g,c,d)},getCoordinates:function(){for(var a=new Array(this.end-this.start+1).fill(null),b=0,c=this.start;c<=this.end;c++)a[b++]=this.pts[c];return a},computeOverlaps:function(a,b){this.computeOverlapsInternal(this.start,this.end,a,a.start,a.end,b)},setId:function(a){this.id=a},select:function(a,b){this.computeSelect(a,this.start,this.end,b)},getEnvelope:function(){if(null===this.env){var a=this.pts[this.start],b=this.pts[this.end];this.env=new v(a,b)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(a,b,c,d,e,f){var g=this.pts[a],h=this.pts[b],i=c.pts[d],j=c.pts[e];if(b-a===1&&e-d===1)return f.overlap(this,a,c,d),null;if(f.tempEnv1.init(g,h),f.tempEnv2.init(i,j),!f.tempEnv1.intersects(f.tempEnv2))return null;var k=Math.trunc((a+b)/2),l=Math.trunc((d+e)/2);a<k&&(d<l&&this.computeOverlapsInternal(a,k,c,d,l,f),l<e&&this.computeOverlapsInternal(a,k,c,l,e,f)),k<b&&(d<l&&this.computeOverlapsInternal(k,b,c,d,l,f),l<e&&this.computeOverlapsInternal(k,b,c,l,e,f))},interfaces_:function(){return[]},getClass:function(){return Wb}}),Wf(Xb.prototype,{interfaces_:function(){return[]},getClass:function(){return Xb}}),Xb.isNorthern=function(a){return a===Xb.NE||a===Xb.NW},Xb.isOpposite=function(a,b){if(a===b)return!1;var c=(a-b+4)%4;return 2===c},Xb.commonHalfPlane=function(a,b){if(a===b)return a;var c=(a-b+4)%4;if(2===c)return-1;var d=a<b?a:b,e=a>b?a:b;return 0===d&&3===e?3:d},Xb.isInHalfPlane=function(a,b){return b===Xb.SE?a===Xb.SE||a===Xb.SW:a===b||a===b+1},Xb.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var a=arguments[0],b=arguments[1];if(0===a&&0===b)throw new c("Cannot compute the quadrant for point ( "+a+", "+b+" )");return a>=0?b>=0?Xb.NE:Xb.SE:b>=0?Xb.NW:Xb.SW}if(arguments[0]instanceof l&&arguments[1]instanceof l){var d=arguments[0],e=arguments[1];if(e.x===d.x&&e.y===d.y)throw new c("Cannot compute the quadrant for two identical points "+d);return e.x>=d.x?e.y>=d.y?Xb.NE:Xb.SE:e.y>=d.y?Xb.NW:Xb.SW}},Xb.NE=0,Xb.NW=1,Xb.SW=2,Xb.SE=3,Wf(Yb.prototype,{interfaces_:function(){return[]},getClass:function(){return Yb}}),Yb.getChainStartIndices=function(a){var b=0,c=new t;c.add(new B(b));do{var d=Yb.findChainEnd(a,b);c.add(new B(d)),b=d}while(b<a.length-1);var e=Yb.toIntArray(c);return e},Yb.findChainEnd=function(a,b){for(var c=b;c<a.length-1&&a[c].equals2D(a[c+1]);)c++;if(c>=a.length-1)return a.length-1;for(var d=Xb.quadrant(a[c],a[c+1]),e=b+1;e<a.length;){if(!a[e-1].equals2D(a[e])){var f=Xb.quadrant(a[e-1],a[e]);if(f!==d)break}e++}return e-1},Yb.getChains=function(){if(1===arguments.length){var a=arguments[0];return Yb.getChains(a,null)}if(2===arguments.length){for(var b=arguments[0],c=arguments[1],d=new t,e=Yb.getChainStartIndices(b),f=0;f<e.length-1;f++){var g=new Wb(b,e[f],e[f+1],c);d.add(g)}return d}},Yb.toIntArray=function(a){for(var b=new Array(a.size()).fill(null),c=0;c<b.length;c++)b[c]=a.get(c).intValue();return b},Wf(Zb.prototype,{computeNodes:function(a){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Zb}}),Wf($b.prototype,{setSegmentIntersector:function(a){this.segInt=a},interfaces_:function(){return[Zb]},getClass:function(){return $b}}),Xf(_b,$b),Wf(_b.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Ub.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(a){for(var b=Yb.getChains(a.getCoordinates(),a),c=b.iterator();c.hasNext();){var d=c.next();d.setId(this.idCounter++),this.index.insert(d.getEnvelope(),d),this.monoChains.add(d)}},computeNodes:function(a){this.nodedSegStrings=a;for(var b=a.iterator();b.hasNext();)this.add(b.next());this.intersectChains()},intersectChains:function(){for(var a=new ac(this.segInt),b=this.monoChains.iterator();b.hasNext();)for(var c=b.next(),d=this.index.query(c.getEnvelope()),e=d.iterator();e.hasNext();){var f=e.next();if(f.getId()>c.getId()&&(c.computeOverlaps(f,a),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return _b}}),Xf(ac,Vb),Wf(ac.prototype,{overlap:function(){if(4!==arguments.length)return Vb.prototype.overlap.apply(this,arguments);var a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3],e=a.getContext(),f=c.getContext();this.si.processIntersections(e,b,f,d)},interfaces_:function(){return[]},getClass:function(){return ac}}),_b.SegmentOverlapAction=ac,Xf(bc,i),Wf(bc.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return bc}}),bc.msgWithCoord=function(a,b){return null!==b?a+" [ "+b+" ]":a},Wf(cc.prototype,{processIntersections:function(a,b,c,d){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return cc}}),Wf(dc.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(a){this.isCheckEndSegmentsOnly=a},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(a){this.findAllIntersections=a},setKeepIntersections:function(a){this.keepIntersections=a},processIntersections:function(a,b,c,d){if(!this.findAllIntersections&&this.hasIntersection())return null;if(a===c&&b===d)return null;if(this.isCheckEndSegmentsOnly){var e=this.isEndSegment(a,b)||this.isEndSegment(c,d);if(!e)return null}var f=a.getCoordinates()[b],g=a.getCoordinates()[b+1],h=c.getCoordinates()[d],i=c.getCoordinates()[d+1];this.li.computeIntersection(f,g,h,i),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=f,this.intSegments[1]=g,this.intSegments[2]=h,this.intSegments[3]=i,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(a,b){return 0===b||b>=a.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[cc]},getClass:function(){return dc}}),dc.createAllIntersectionsFinder=function(a){var b=new dc(a);return b.setFindAllIntersections(!0),b},dc.createAnyIntersectionFinder=function(a){return new dc(a)},dc.createIntersectionCounter=function(a){var b=new dc(a);return b.setFindAllIntersections(!0),b.setKeepIntersections(!1),b},Wf(ec.prototype,{execute:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(a){this.findAllIntersections=a},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new dc(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var a=new _b;if(a.setSegmentIntersector(this.segInt),a.computeNodes(this.segStrings),this.segInt.hasIntersection())return this._isValid=!1,null},checkValid:function(){if(this.execute(),!this._isValid)throw new bc(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var a=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+cb.toLineString(a[0],a[1])+" and "+cb.toLineString(a[2],a[3])},interfaces_:function(){return[]},getClass:function(){return ec}}),ec.computeIntersections=function(a){var b=new ec(a);return b.setFindAllIntersections(!0),b.isValid(),b.getIntersections()},Wf(fc.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return fc}}),fc.toSegmentStrings=function(a){for(var b=new t,c=a.iterator();c.hasNext();){var d=c.next();b.add(new Cb(d.getCoordinates(),d))}return b},fc.checkValid=function(a){var b=new fc(a);b.checkValid()},Wf(gc.prototype,{map:function(a){for(var b=new t,c=0;c<a.getNumGeometries();c++){var d=this.mapOp.map(a.getGeometryN(c));d.isEmpty()||b.add(d)}return a.getFactory().createGeometryCollection(ab.toGeometryArray(b))},interfaces_:function(){return[]},getClass:function(){return gc}}),gc.map=function(a,b){var c=new gc(b);return c.map(a)},Wf(hc.prototype,{interfaces_:function(){return[]},getClass:function(){return hc}}),hc.opposite=function(a){return a===hc.LEFT?hc.RIGHT:a===hc.RIGHT?hc.LEFT:a},hc.ON=0,hc.LEFT=1,hc.RIGHT=2,Wf(ic.prototype,{setAllLocations:function(a){for(var b=0;b<this.location.length;b++)this.location[b]=a},isNull:function(){for(var a=0;a<this.location.length;a++)if(this.location[a]!==y.NONE)return!1;return!0},setAllLocationsIfNull:function(a){for(var b=0;b<this.location.length;b++)this.location[b]===y.NONE&&(this.location[b]=a)},isLine:function(){return 1===this.location.length},merge:function(a){if(a.location.length>this.location.length){var b=new Array(3).fill(null);b[hc.ON]=this.location[hc.ON],b[hc.LEFT]=y.NONE,b[hc.RIGHT]=y.NONE,this.location=b}for(var c=0;c<this.location.length;c++)this.location[c]===y.NONE&&c<a.location.length&&(this.location[c]=a.location[c])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var a=this.location[hc.LEFT];this.location[hc.LEFT]=this.location[hc.RIGHT],this.location[hc.RIGHT]=a},toString:function(){var a=new A;return this.location.length>1&&a.append(y.toLocationSymbol(this.location[hc.LEFT])),a.append(y.toLocationSymbol(this.location[hc.ON])),this.location.length>1&&a.append(y.toLocationSymbol(this.location[hc.RIGHT])),a.toString()},setLocations:function(a,b,c){this.location[hc.ON]=a,this.location[hc.LEFT]=b,this.location[hc.RIGHT]=c},get:function(a){return a<this.location.length?this.location[a]:y.NONE},
isArea:function(){return this.location.length>1},isAnyNull:function(){for(var a=0;a<this.location.length;a++)if(this.location[a]===y.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var a=arguments[0];this.setLocation(hc.ON,a)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.location[b]=c}},init:function(a){this.location=new Array(a).fill(null),this.setAllLocations(y.NONE)},isEqualOnSide:function(a,b){return this.location[b]===a.location[b]},allPositionsEqual:function(a){for(var b=0;b<this.location.length;b++)if(this.location[b]!==a)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ic}}),Wf(jc.prototype,{getGeometryCount:function(){var a=0;return this.elt[0].isNull()||a++,this.elt[1].isNull()||a++,a},setAllLocations:function(a,b){this.elt[a].setAllLocations(b)},isNull:function(a){return this.elt[a].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var a=arguments[0];this.setAllLocationsIfNull(0,a),this.setAllLocationsIfNull(1,a)}else if(2===arguments.length){var b=arguments[0],c=arguments[1];this.elt[b].setAllLocationsIfNull(c)}},isLine:function(a){return this.elt[a].isLine()},merge:function(a){for(var b=0;b<2;b++)null===this.elt[b]&&null!==a.elt[b]?this.elt[b]=new ic(a.elt[b]):this.elt[b].merge(a.elt[b])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var a=arguments[0];return this.elt[a].get(hc.ON)}if(2===arguments.length){var b=arguments[0],c=arguments[1];return this.elt[b].get(c)}},toString:function(){var a=new A;return null!==this.elt[0]&&(a.append("A:"),a.append(this.elt[0].toString())),null!==this.elt[1]&&(a.append(" B:"),a.append(this.elt[1].toString())),a.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var a=arguments[0];return this.elt[a].isArea()}},isAnyNull:function(a){return this.elt[a].isAnyNull()},setLocation:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];this.elt[a].setLocation(hc.ON,b)}else if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];this.elt[c].setLocation(d,e)}},isEqualOnSide:function(a,b){return this.elt[0].isEqualOnSide(a.elt[0],b)&&this.elt[1].isEqualOnSide(a.elt[1],b)},allPositionsEqual:function(a,b){return this.elt[a].allPositionsEqual(b)},toLine:function(a){this.elt[a].isArea()&&(this.elt[a]=new ic(this.elt[a].location[0]))},interfaces_:function(){return[]},getClass:function(){return jc}}),jc.toLineLabel=function(a){for(var b=new jc(y.NONE),c=0;c<2;c++)b.setLocation(c,a.getLocation(c));return b},Wf(kc.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var a=new Array(this.pts.size()).fill(null),b=0;b<this.pts.size();b++)a[b]=this.pts.get(b);this.ring=this.geometryFactory.createLinearRing(a),this._isHole=hb.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(a){this.startDe=a;var b=a,c=!0;do{if(null===b)throw new bc("Found null DirectedEdge");if(b.getEdgeRing()===this)throw new bc("Directed Edge visited twice during ring-building at "+b.getCoordinate());this.edges.add(b);var d=b.getLabel();k.isTrue(d.isArea()),this.mergeLabel(d),this.addPoints(b.getEdge(),b.isForward(),c),c=!1,this.setEdgeRing(b,this),b=this.getNext(b)}while(b!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(a){return this.pts.get(a)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var a=this.startDe;do{var b=a.getNode(),c=b.getEdges().getOutgoingDegree(this);c>this.maxNodeDegree&&(this.maxNodeDegree=c),a=this.getNext(a)}while(a!==this.startDe);this.maxNodeDegree*=2},addPoints:function(a,b,c){var d=a.getCoordinates();if(b){var e=1;c&&(e=0);for(var f=e;f<d.length;f++)this.pts.add(d[f])}else{var e=d.length-2;c&&(e=d.length-1);for(var f=e;f>=0;f--)this.pts.add(d[f])}},isHole:function(){return this._isHole},setInResult:function(){var a=this.startDe;do{a.getEdge().setInResult(!0),a=a.getNext()}while(a!==this.startDe)},containsPoint:function(a){var b=this.getLinearRing(),c=b.getEnvelopeInternal();if(!c.contains(a))return!1;if(!hb.isPointInRing(a,b.getCoordinates()))return!1;for(var d=this.holes.iterator();d.hasNext();){var e=d.next();if(e.containsPoint(a))return!1}return!0},addHole:function(a){this.holes.add(a)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var a=arguments[0];this.mergeLabel(a,0),this.mergeLabel(a,1)}else if(2===arguments.length){var b=arguments[0],c=arguments[1],d=b.getLocation(c,hc.RIGHT);if(d===y.NONE)return null;if(this.label.getLocation(c)===y.NONE)return this.label.setLocation(c,d),null}},setShell:function(a){this.shell=a,null!==a&&a.addHole(this)},toPolygon:function(a){for(var b=new Array(this.holes.size()).fill(null),c=0;c<this.holes.size();c++)b[c]=this.holes.get(c).getLinearRing();var d=a.createPolygon(this.getLinearRing(),b);return d},interfaces_:function(){return[]},getClass:function(){return kc}}),Xf(lc,kc),Wf(lc.prototype,{setEdgeRing:function(a,b){a.setMinEdgeRing(b)},getNext:function(a){return a.getNextMin()},interfaces_:function(){return[]},getClass:function(){return lc}}),Xf(mc,kc),Wf(mc.prototype,{buildMinimalRings:function(){var a=new t,b=this.startDe;do{if(null===b.getMinEdgeRing()){var c=new lc(b,this.geometryFactory);a.add(c)}b=b.getNext()}while(b!==this.startDe);return a},setEdgeRing:function(a,b){a.setEdgeRing(b)},linkDirectedEdgesForMinimalEdgeRings:function(){var a=this.startDe;do{var b=a.getNode();b.getEdges().linkMinimalDirectedEdges(this),a=a.getNext()}while(a!==this.startDe)},getNext:function(a){return a.getNext()},interfaces_:function(){return[]},getClass:function(){return mc}}),Wf(nc.prototype,{setVisited:function(a){this._isVisited=a},setInResult:function(a){this._isInResult=a},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(a){this.label=a},getLabel:function(){return this.label},setCovered:function(a){this._isCovered=a,this._isCoveredSet=!0},updateIM:function(a){k.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(a)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return nc}}),Xf(oc,nc),Wf(oc.prototype,{isIncidentEdgeInResult:function(){for(var a=this.getEdges().getEdges().iterator();a.hasNext();){var b=a.next();if(b.getEdge().isInResult())return!0}return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(a){a.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(a){},computeMergedLocation:function(a,b){var c=y.NONE;if(c=this.label.getLocation(b),!a.isNull(b)){var d=a.getLocation(b);c!==y.BOUNDARY&&(c=d)}return c},setLabel:function(){if(2!==arguments.length)return nc.prototype.setLabel.apply(this,arguments);var a=arguments[0],b=arguments[1];null===this.label?this.label=new jc(a,b):this.label.setLocation(a,b)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof oc){var a=arguments[0];this.mergeLabel(a.label)}else if(arguments[0]instanceof jc)for(var b=arguments[0],c=0;c<2;c++){var d=this.computeMergedLocation(b,c),e=this.label.getLocation(c);e===y.NONE&&this.label.setLocation(c,d)}},add:function(a){this.edges.insert(a),a.setNode(this)},setLabelBoundary:function(a){if(null===this.label)return null;var b=y.NONE;null!==this.label&&(b=this.label.getLocation(a));var c=null;switch(b){case y.BOUNDARY:c=y.INTERIOR;break;case y.INTERIOR:c=y.BOUNDARY;break;default:c=y.BOUNDARY}this.label.setLocation(a,c)},interfaces_:function(){return[]},getClass:function(){return oc}}),Wf(pc.prototype,{find:function(a){return this.nodeMap.get(a)},addNode:function(){if(arguments[0]instanceof l){var a=arguments[0],b=this.nodeMap.get(a);return null===b&&(b=this.nodeFact.createNode(a),this.nodeMap.put(a,b)),b}if(arguments[0]instanceof oc){var c=arguments[0],b=this.nodeMap.get(c.getCoordinate());return null===b?(this.nodeMap.put(c.getCoordinate(),c),c):(b.mergeLabel(c),b)}},print:function(a){for(var b=this.iterator();b.hasNext();){var c=b.next();c.print(a)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(a){for(var b=new t,c=this.iterator();c.hasNext();){var d=c.next();d.getLabel().getLocation(a)===y.BOUNDARY&&b.add(d)}return b},add:function(a){var b=a.getCoordinate(),c=this.addNode(b);c.add(a)},interfaces_:function(){return[]},getClass:function(){return pc}}),Wf(qc.prototype,{compareDirection:function(a){return this.dx===a.dx&&this.dy===a.dy?0:this.quadrant>a.quadrant?1:this.quadrant<a.quadrant?-1:hb.computeOrientation(a.p0,a.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(a){this.node=a},print:function(a){var b=Math.atan2(this.dy,this.dx),c=this.getClass().getName(),d=c.lastIndexOf("."),e=c.substring(d+1);a.print("  "+e+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+b+"   "+this.label)},compareTo:function(a){var b=a;return this.compareDirection(b)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var a=Math.atan2(this.dy,this.dx),b=this.getClass().getName(),c=b.lastIndexOf("."),d=b.substring(c+1);return"  "+d+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+a+"   "+this.label},computeLabel:function(a){},init:function(a,b){this.p0=a,this.p1=b,this.dx=b.x-a.x,this.dy=b.y-a.y,this.quadrant=Xb.quadrant(this.dx,this.dy),k.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[e]},getClass:function(){return qc}}),Xf(rc,qc),Wf(rc.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(a){return this.depth[a]},setVisited:function(a){this._isVisited=a},computeDirectedLabel:function(){this.label=new jc(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(a,b){if(this.depth[a]!==-999&&this.depth[a]!==b)throw new bc("assigned depths do not match",this.getCoordinate());this.depth[a]=b},isInteriorAreaEdge:function a(){for(var a=!0,b=0;b<2;b++)this.label.isArea(b)&&this.label.getLocation(b,hc.LEFT)===y.INTERIOR&&this.label.getLocation(b,hc.RIGHT)===y.INTERIOR||(a=!1);return a},setNextMin:function(a){this.nextMin=a},print:function(a){qc.prototype.print.call(this,a),a.print(" "+this.depth[hc.LEFT]+"/"+this.depth[hc.RIGHT]),a.print(" ("+this.getDepthDelta()+")"),this._isInResult&&a.print(" inResult")},setMinEdgeRing:function(a){this.minEdgeRing=a},isLineEdge:function(){var a=this.label.isLine(0)||this.label.isLine(1),b=!this.label.isArea(0)||this.label.allPositionsEqual(0,y.EXTERIOR),c=!this.label.isArea(1)||this.label.allPositionsEqual(1,y.EXTERIOR);return a&&b&&c},setEdgeRing:function(a){this.edgeRing=a},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var a=this.edge.getDepthDelta();return this._isForward||(a=-a),a},setInResult:function(a){this._isInResult=a},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(a){this.print(a),a.print(" "),this._isForward?this.edge.print(a):this.edge.printReverse(a)},setSym:function(a){this.sym=a},setVisitedEdge:function(a){this.setVisited(a),this.sym.setVisited(a)},setEdgeDepths:function(a,b){var c=this.getEdge().getDepthDelta();this._isForward||(c=-c);var d=1;a===hc.LEFT&&(d=-1);var e=hc.opposite(a),f=c*d,g=b+f;this.setDepth(a,b),this.setDepth(e,g)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(a){this.next=a},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return rc}}),rc.depthFactor=function(a,b){return a===y.EXTERIOR&&b===y.INTERIOR?1:a===y.INTERIOR&&b===y.EXTERIOR?-1:0},Wf(sc.prototype,{createNode:function(a){return new oc(a,null)},interfaces_:function(){return[]},getClass:function(){return sc}}),Wf(tc.prototype,{printEdges:function(a){a.println("Edges:");for(var b=0;b<this.edges.size();b++){a.println("edge "+b+":");var c=this.edges.get(b);c.print(a),c.eiList.print(a)}},find:function(a){return this.nodes.find(a)},addNode:function(){if(arguments[0]instanceof oc){var a=arguments[0];return this.nodes.addNode(a)}if(arguments[0]instanceof l){var b=arguments[0];return this.nodes.addNode(b)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var a=this.nodes.iterator();a.hasNext();){var b=a.next();b.getEdges().linkResultDirectedEdges()}},debugPrintln:function(a){G.out.println(a)},isBoundaryNode:function(a,b){var c=this.nodes.find(b);if(null===c)return!1;var d=c.getLabel();return null!==d&&d.getLocation(a)===y.BOUNDARY},linkAllDirectedEdges:function(){for(var a=this.nodes.iterator();a.hasNext();){var b=a.next();b.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(a,b,c,d){return!!a.equals(c)&&(hb.computeOrientation(a,b,d)===hb.COLLINEAR&&Xb.quadrant(a,b)===Xb.quadrant(c,d))},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(a){G.out.print(a)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(a,b){for(var c=0;c<this.edges.size();c++){var d=this.edges.get(c),e=d.getCoordinates();if(this.matchInSameDirection(a,b,e[0],e[1]))return d;if(this.matchInSameDirection(a,b,e[e.length-1],e[e.length-2]))return d}return null},insertEdge:function(a){this.edges.add(a)},findEdgeEnd:function(a){for(var b=this.getEdgeEnds().iterator();b.hasNext();){var c=b.next();if(c.getEdge()===a)return c}return null},addEdges:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next();this.edges.add(c);var d=new rc(c,!0),e=new rc(c,!1);d.setSym(e),e.setSym(d),this.add(d),this.add(e)}},add:function(a){this.nodes.add(a),this.edgeEndList.add(a)},getNodes:function(){return this.nodes.values()},findEdge:function(a,b){for(var c=0;c<this.edges.size();c++){var d=this.edges.get(c),e=d.getCoordinates();if(a.equals(e[0])&&b.equals(e[1]))return d}return null},interfaces_:function(){return[]},getClass:function(){return tc}}),tc.linkResultDirectedEdges=function(a){for(var b=a.iterator();b.hasNext();){var c=b.next();c.getEdges().linkResultDirectedEdges()}},Wf(uc.prototype,{sortShellsAndHoles:function(a,b,c){for(var d=a.iterator();d.hasNext();){var e=d.next();e.isHole()?c.add(e):b.add(e)}},computePolygons:function(a){for(var b=new t,c=a.iterator();c.hasNext();){var d=c.next(),e=d.toPolygon(this.geometryFactory);b.add(e)}return b},placeFreeHoles:function(a,b){for(var c=b.iterator();c.hasNext();){var d=c.next();if(null===d.getShell()){var e=this.findEdgeRingContaining(d,a);if(null===e)throw new bc("unable to assign hole to a shell",d.getCoordinate(0));d.setShell(e)}}},buildMinimalEdgeRings:function(a,b,c){for(var d=new t,e=a.iterator();e.hasNext();){var f=e.next();if(f.getMaxNodeDegree()>2){f.linkDirectedEdgesForMinimalEdgeRings();var g=f.buildMinimalRings(),h=this.findShell(g);null!==h?(this.placePolygonHoles(h,g),b.add(h)):c.addAll(g)}else d.add(f)}return d},containsPoint:function(a){for(var b=this.shellList.iterator();b.hasNext();){var c=b.next();if(c.containsPoint(a))return!0}return!1},buildMaximalEdgeRings:function(a){for(var b=new t,c=a.iterator();c.hasNext();){var d=c.next();if(d.isInResult()&&d.getLabel().isArea()&&null===d.getEdgeRing()){var e=new mc(d,this.geometryFactory);b.add(e),e.setInResult()}}return b},placePolygonHoles:function(a,b){for(var c=b.iterator();c.hasNext();){var d=c.next();d.isHole()&&d.setShell(a)}},getPolygons:function(){var a=this.computePolygons(this.shellList);return a},findEdgeRingContaining:function(a,b){for(var c=a.getLinearRing(),d=c.getEnvelopeInternal(),e=c.getCoordinateN(0),f=null,g=null,h=b.iterator();h.hasNext();){var i=h.next(),j=i.getLinearRing(),k=j.getEnvelopeInternal();null!==f&&(g=f.getLinearRing().getEnvelopeInternal());var l=!1;k.contains(d)&&hb.isPointInRing(e,j.getCoordinates())&&(l=!0),l&&(null===f||g.contains(k))&&(f=i)}return f},findShell:function(a){for(var b=0,c=null,d=a.iterator();d.hasNext();){var e=d.next();e.isHole()||(c=e,b++)}return k.isTrue(b<=1,"found two shells in MinimalEdgeRing list"),c},add:function(){if(1===arguments.length){var a=arguments[0];this.add(a.getEdgeEnds(),a.getNodes())}else if(2===arguments.length){var b=arguments[0],c=arguments[1];tc.linkResultDirectedEdges(c);var d=this.buildMaximalEdgeRings(b),e=new t,f=this.buildMinimalEdgeRings(d,this.shellList,e);this.sortShellsAndHoles(f,this.shellList,e),this.placeFreeHoles(this.shellList,e)}},interfaces_:function(){return[]},getClass:function(){return uc}}),Wf(vc.prototype,{collectLines:function(a){for(var b=this.op.getGraph().getEdgeEnds().iterator();b.hasNext();){var c=b.next();this.collectLineEdge(c,a,this.lineEdgesList),this.collectBoundaryTouchEdge(c,a,this.lineEdgesList)}},labelIsolatedLine:function(a,b){var c=this.ptLocator.locate(a.getCoordinate(),this.op.getArgGeometry(b));a.getLabel().setLocation(b,c)},build:function(a){return this.findCoveredLineEdges(),this.collectLines(a),this.buildLines(a),this.resultLineList},collectLineEdge:function(a,b,c){var d=a.getLabel(),e=a.getEdge();a.isLineEdge()&&(a.isVisited()||!_c.isResultOfOp(d,b)||e.isCovered()||(c.add(e),a.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var a=this.op.getGraph().getNodes().iterator();a.hasNext();){var b=a.next();b.getEdges().findCoveredLineEdges()}for(var c=this.op.getGraph().getEdgeEnds().iterator();c.hasNext();){var d=c.next(),e=d.getEdge();if(d.isLineEdge()&&!e.isCoveredSet()){var f=this.op.isCoveredByA(d.getCoordinate());e.setCovered(f)}}},labelIsolatedLines:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next(),d=c.getLabel();c.isIsolated()&&(d.isNull(0)?this.labelIsolatedLine(c,0):this.labelIsolatedLine(c,1))}},buildLines:function(a){for(var b=this.lineEdgesList.iterator();b.hasNext();){var c=b.next(),d=(c.getLabel(),this.geometryFactory.createLineString(c.getCoordinates()));this.resultLineList.add(d),c.setInResult(!0)}},collectBoundaryTouchEdge:function(a,b,c){var d=a.getLabel();return a.isLineEdge()?null:a.isVisited()?null:a.isInteriorAreaEdge()?null:a.getEdge().isInResult()?null:(k.isTrue(!(a.isInResult()||a.getSym().isInResult())||!a.getEdge().isInResult()),void(_c.isResultOfOp(d,b)&&b===_c.INTERSECTION&&(c.add(a.getEdge()),a.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return vc}}),Wf(wc.prototype,{filterCoveredNodeToPoint:function(a){var b=a.getCoordinate();if(!this.op.isCoveredByLA(b)){var c=this.geometryFactory.createPoint(b);this.resultPointList.add(c)}},extractNonCoveredResultNodes:function(a){for(var b=this.op.getGraph().getNodes().iterator();b.hasNext();){var c=b.next();if(!(c.isInResult()||c.isIncidentEdgeInResult()||0!==c.getEdges().getDegree()&&a!==_c.INTERSECTION)){var d=c.getLabel();_c.isResultOfOp(d,a)&&this.filterCoveredNodeToPoint(c)}}},build:function(a){return this.extractNonCoveredResultNodes(a),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return wc}}),Wf(xc.prototype,{locate:function(a){},interfaces_:function(){return[]},getClass:function(){return xc}}),Wf(yc.prototype,{locate:function(a){return yc.locate(a,this.geom)},interfaces_:function(){return[xc]},getClass:function(){return yc}}),yc.isPointInRing=function(a,b){return!!b.getEnvelopeInternal().intersects(a)&&hb.isPointInRing(a,b.getCoordinates())},yc.containsPointInPolygon=function(a,b){if(b.isEmpty())return!1;var c=b.getExteriorRing();if(!yc.isPointInRing(a,c))return!1;for(var d=0;d<b.getNumInteriorRing();d++){var e=b.getInteriorRingN(d);if(yc.isPointInRing(a,e))return!1}return!0},yc.containsPoint=function(a,b){if(b instanceof za)return yc.containsPointInPolygon(a,b);if(b instanceof ja)for(var c=new yb(b);c.hasNext();){var d=c.next();if(d!==b&&yc.containsPoint(a,d))return!0}return!1},yc.locate=function(a,b){return b.isEmpty()?y.EXTERIOR:yc.containsPoint(a,b)?y.INTERIOR:y.EXTERIOR},Wf(zc.prototype,{getNextCW:function(a){this.getEdges();var b=this.edgeList.indexOf(a),c=b-1;return 0===b&&(c=this.edgeList.size()-1),this.edgeList.get(c)},propagateSideLabels:function(a){for(var b=y.NONE,c=this.iterator();c.hasNext();){var d=c.next(),e=d.getLabel();e.isArea(a)&&e.getLocation(a,hc.LEFT)!==y.NONE&&(b=e.getLocation(a,hc.LEFT))}if(b===y.NONE)return null;for(var f=b,c=this.iterator();c.hasNext();){var d=c.next(),e=d.getLabel();if(e.getLocation(a,hc.ON)===y.NONE&&e.setLocation(a,hc.ON,f),e.isArea(a)){var g=e.getLocation(a,hc.LEFT),h=e.getLocation(a,hc.RIGHT);if(h!==y.NONE){if(h!==f)throw new bc("side location conflict",d.getCoordinate());g===y.NONE&&k.shouldNeverReachHere("found single null side (at "+d.getCoordinate()+")"),f=g}else k.isTrue(e.getLocation(a,hc.LEFT)===y.NONE,"found single null side"),e.setLocation(a,hc.RIGHT,f),e.setLocation(a,hc.LEFT,f)}}},getCoordinate:function(){var a=this.iterator();if(!a.hasNext())return null;var b=a.next();return b.getCoordinate()},print:function(a){G.out.println("EdgeEndStar:   "+this.getCoordinate());for(var b=this.iterator();b.hasNext();){var c=b.next();c.print(a)}},isAreaLabelsConsistent:function(a){return this.computeEdgeEndLabels(a.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(a){var b=this.getEdges();if(b.size()<=0)return!0;var c=b.size()-1,d=b.get(c).getLabel(),e=d.getLocation(a,hc.LEFT);k.isTrue(e!==y.NONE,"Found unlabelled area edge");for(var f=e,g=this.iterator();g.hasNext();){var h=g.next(),i=h.getLabel();k.isTrue(i.isArea(a),"Found non-area edge");var j=i.getLocation(a,hc.LEFT),l=i.getLocation(a,hc.RIGHT);if(j===l)return!1;if(l!==f)return!1;f=j}return!0},findIndex:function(a){this.iterator();for(var b=0;b<this.edgeList.size();b++){var c=this.edgeList.get(b);if(c===a)return b}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new t(this.edgeMap.values())),this.edgeList},getLocation:function(a,b,c){return this.ptInAreaLocation[a]===y.NONE&&(this.ptInAreaLocation[a]=yc.locate(b,c[a].getGeometry())),this.ptInAreaLocation[a]},toString:function(){var a=new A;a.append("EdgeEndStar:   "+this.getCoordinate()),a.append("\n");for(var b=this.iterator();b.hasNext();){var c=b.next();a.append(c),a.append("\n")}return a.toString()},computeEdgeEndLabels:function(a){for(var b=this.iterator();b.hasNext();){var c=b.next();c.computeLabel(a)}},computeLabelling:function(a){this.computeEdgeEndLabels(a[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var b=[!1,!1],c=this.iterator();c.hasNext();)for(var d=c.next(),e=d.getLabel(),f=0;f<2;f++)e.isLine(f)&&e.getLocation(f)===y.BOUNDARY&&(b[f]=!0);for(var c=this.iterator();c.hasNext();)for(var d=c.next(),e=d.getLabel(),f=0;f<2;f++)if(e.isAnyNull(f)){var g=y.NONE;if(b[f])g=y.EXTERIOR;else{var h=d.getCoordinate();g=this.getLocation(f,h,a)}e.setAllLocationsIfNull(f,g)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(a,b){this.edgeMap.put(a,b),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return zc}}),Xf(Ac,zc),Wf(Ac.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var a=null,b=null,c=this.SCANNING_FOR_INCOMING,d=0;d<this.resultAreaEdgeList.size();d++){var e=this.resultAreaEdgeList.get(d),f=e.getSym();if(e.getLabel().isArea())switch(null===a&&e.isInResult()&&(a=e),c){case this.SCANNING_FOR_INCOMING:if(!f.isInResult())continue;b=f,c=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!e.isInResult())continue;b.setNext(e),c=this.SCANNING_FOR_INCOMING}}if(c===this.LINKING_TO_OUTGOING){if(null===a)throw new bc("no outgoing dirEdge found",this.getCoordinate());k.isTrue(a.isInResult(),"unable to link last incoming dirEdge"),b.setNext(a)}},insert:function(a){var b=a;this.insertEdgeEnd(b,b)},getRightmostEdge:function(){var a=this.getEdges(),b=a.size();if(b<1)return null;var c=a.get(0);if(1===b)return c;var d=a.get(b-1),e=c.getQuadrant(),f=d.getQuadrant();if(Xb.isNorthern(e)&&Xb.isNorthern(f))return c;if(!Xb.isNorthern(e)&&!Xb.isNorthern(f))return d;return 0!==c.getDy()?c:0!==d.getDy()?d:(k.shouldNeverReachHere("found two horizontal edges incident on node"),null)},print:function(a){G.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var b=this.iterator();b.hasNext();){var c=b.next();a.print("out "),c.print(a),a.println(),a.print("in "),c.getSym().print(a),a.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new t;for(var a=this.iterator();a.hasNext();){var b=a.next();(b.isInResult()||b.getSym().isInResult())&&this.resultAreaEdgeList.add(b)}return this.resultAreaEdgeList},updateLabelling:function(a){for(var b=this.iterator();b.hasNext();){var c=b.next(),d=c.getLabel();d.setAllLocationsIfNull(0,a.getLocation(0)),d.setAllLocationsIfNull(1,a.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var a=null,b=null,c=this.edgeList.size()-1;c>=0;c--){var d=this.edgeList.get(c),e=d.getSym();null===b&&(b=e),null!==a&&e.setNext(a),a=d}b.setNext(a)},computeDepths:function(){if(1===arguments.length){var a=arguments[0],b=this.findIndex(a),c=(a.getLabel(),a.getDepth(hc.LEFT)),d=a.getDepth(hc.RIGHT),e=this.computeDepths(b+1,this.edgeList.size(),c),f=this.computeDepths(0,b,e);if(f!==d)throw new bc("depth mismatch at "+a.getCoordinate())}else if(3===arguments.length){for(var g=arguments[0],h=arguments[1],i=arguments[2],j=i,k=g;k<h;k++){var l=this.edgeList.get(k);l.getLabel();l.setEdgeDepths(hc.RIGHT,j),j=l.getDepth(hc.LEFT)}return j}},mergeSymLabels:function(){for(var a=this.iterator();a.hasNext();){var b=a.next(),c=b.getLabel();c.merge(b.getSym().getLabel())}},linkMinimalDirectedEdges:function(a){for(var b=null,c=null,d=this.SCANNING_FOR_INCOMING,e=this.resultAreaEdgeList.size()-1;e>=0;e--){var f=this.resultAreaEdgeList.get(e),g=f.getSym();switch(null===b&&f.getEdgeRing()===a&&(b=f),d){case this.SCANNING_FOR_INCOMING:if(g.getEdgeRing()!==a)continue;c=g,d=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(f.getEdgeRing()!==a)continue;c.setNextMin(f),d=this.SCANNING_FOR_INCOMING}}d===this.LINKING_TO_OUTGOING&&(k.isTrue(null!==b,"found null for first outgoing dirEdge"),k.isTrue(b.getEdgeRing()===a,"unable to link last incoming dirEdge"),c.setNextMin(b))},getOutgoingDegree:function(){if(0===arguments.length){for(var a=0,b=this.iterator();b.hasNext();){var c=b.next();c.isInResult()&&a++}return a}if(1===arguments.length){for(var d=arguments[0],a=0,b=this.iterator();b.hasNext();){var c=b.next();c.getEdgeRing()===d&&a++}return a}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var a=y.NONE,b=this.iterator();b.hasNext();){var c=b.next(),d=c.getSym();if(!c.isLineEdge()){if(c.isInResult()){a=y.INTERIOR;break}if(d.isInResult()){a=y.EXTERIOR;break}}}if(a===y.NONE)return null;for(var e=a,b=this.iterator();b.hasNext();){var c=b.next(),d=c.getSym();c.isLineEdge()?c.getEdge().setCovered(e===y.INTERIOR):(c.isInResult()&&(e=y.EXTERIOR),d.isInResult()&&(e=y.INTERIOR))}},computeLabelling:function(a){zc.prototype.computeLabelling.call(this,a),this.label=new jc(y.NONE);for(var b=this.iterator();b.hasNext();)for(var c=b.next(),d=c.getEdge(),e=d.getLabel(),f=0;f<2;f++){var g=e.getLocation(f);g!==y.INTERIOR&&g!==y.BOUNDARY||this.label.setLocation(f,y.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Ac}}),Xf(Bc,sc),Wf(Bc.prototype,{createNode:function(a){return new oc(a,new Ac)},interfaces_:function(){return[]},getClass:function(){return Bc}}),Wf(Cc.prototype,{computeIntersections:function(a,b){this.mce.computeIntersectsForChain(this.chainIndex,a.mce,a.chainIndex,b)},interfaces_:function(){return[]},getClass:function(){return Cc}}),Wf(Dc.prototype,{isDelete:function(){return this.eventType===Dc.DELETE},setDeleteEventIndex:function(a){this.deleteEventIndex=a},getObject:function(){return this.obj},compareTo:function(a){var b=a;return this.xValue<b.xValue?-1:this.xValue>b.xValue?1:this.eventType<b.eventType?-1:this.eventType>b.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===Dc.INSERT},isSameLabel:function(a){return null!==this.label&&this.label===a.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[e]},getClass:function(){return Dc}}),Dc.INSERT=1,Dc.DELETE=2,Wf(Ec.prototype,{interfaces_:function(){return[]},getClass:function(){return Ec}}),Wf(Fc.prototype,{isTrivialIntersection:function(a,b,c,d){if(a===c&&1===this.li.getIntersectionNum()){if(Fc.isAdjacentSegments(b,d))return!0;if(a.isClosed()){var e=a.getNumPoints()-1;if(0===b&&d===e||0===d&&b===e)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(a){this.isDoneWhenProperInt=a},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(a,b){for(var c=b.iterator();c.hasNext();){var d=c.next(),e=d.getCoordinate();if(a.isIntersection(e))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(a,b){return null!==b&&(!!this.isBoundaryPointInternal(a,b[0])||!!this.isBoundaryPointInternal(a,b[1]))},setBoundaryNodes:function(a,b){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=a,this.bdyNodes[1]=b},addIntersections:function(a,b,c,d){if(a===c&&b===d)return null;this.numTests++;var e=a.getCoordinates()[b],f=a.getCoordinates()[b+1],g=c.getCoordinates()[d],h=c.getCoordinates()[d+1];this.li.computeIntersection(e,f,g,h),this.li.hasIntersection()&&(this.recordIsolated&&(a.setIsolated(!1),c.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(a,b,c,d)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(a.addIntersections(this.li,b,0),c.addIntersections(this.li,d,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return Fc}}),Fc.isAdjacentSegments=function(a,b){return 1===Math.abs(a-b)},Xf(Gc,Ec),Wf(Gc.prototype,{prepareEvents:function(){kg.sort(this.events);for(var a=0;a<this.events.size();a++){var b=this.events.get(a);b.isDelete()&&b.getInsertEvent().setDeleteEventIndex(a)}},computeIntersections:function(){if(1===arguments.length){var a=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var b=0;b<this.events.size();b++){var c=this.events.get(b);if(c.isInsert()&&this.processOverlaps(b,c.getDeleteEventIndex(),c,a),a.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Fc&&Zf(arguments[0],q)&&Zf(arguments[1],q)){var d=arguments[0],e=arguments[1],f=arguments[2];this.addEdges(d,d),this.addEdges(e,e),this.computeIntersections(f)}else if("boolean"==typeof arguments[2]&&Zf(arguments[0],q)&&arguments[1]instanceof Fc){var g=arguments[0],h=arguments[1],i=arguments[2];i?this.addEdges(g,null):this.addEdges(g),this.computeIntersections(h)}},addEdge:function(a,b){for(var c=a.getMonotoneChainEdge(),d=c.getStartIndexes(),e=0;e<d.length-1;e++){var f=new Cc(c,e),g=new Dc(b,c.getMinX(e),f);this.events.add(g),this.events.add(new Dc(c.getMaxX(e),g))}},
processOverlaps:function(a,b,c,d){for(var e=c.getObject(),f=a;f<b;f++){var g=this.events.get(f);if(g.isInsert()){var h=g.getObject();c.isSameLabel(g)||(e.computeIntersections(h,d),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var a=arguments[0],b=a.iterator();b.hasNext();){var c=b.next();this.addEdge(c,c)}else if(2===arguments.length)for(var d=arguments[0],e=arguments[1],b=d.iterator();b.hasNext();){var c=b.next();this.addEdge(c,e)}},interfaces_:function(){return[]},getClass:function(){return Gc}}),Wf(Hc.prototype,{getMin:function(){return this.min},intersects:function(a,b){return!(this.min>b||this.max<a)},getMax:function(){return this.max},toString:function(){return cb.toLineString(new l(this.min,0),new l(this.max,0))},interfaces_:function(){return[]},getClass:function(){return Hc}}),Wf(Ic.prototype,{compare:function(a,b){var c=a,d=b,e=(c.min+c.max)/2,f=(d.min+d.max)/2;return e<f?-1:e>f?1:0},interfaces_:function(){return[g]},getClass:function(){return Ic}}),Hc.NodeComparator=Ic,Xf(Jc,Hc),Wf(Jc.prototype,{query:function(a,b,c){return this.intersects(a,b)?void c.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return Jc}}),Xf(Kc,Hc),Wf(Kc.prototype,{buildExtent:function(a,b){this.min=Math.min(a.min,b.min),this.max=Math.max(a.max,b.max)},query:function(a,b,c){return this.intersects(a,b)?(null!==this.node1&&this.node1.query(a,b,c),void(null!==this.node2&&this.node2.query(a,b,c))):null},interfaces_:function(){return[]},getClass:function(){return Kc}}),Wf(Lc.prototype,{buildTree:function(){kg.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var a=this.leaves,b=null,c=new t;;){if(this.buildLevel(a,c),1===c.size())return c.get(0);b=a,a=c,c=b}},insert:function(a,b,c){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new Jc(a,b,c))},query:function(a,b,c){this.init(),this.root.query(a,b,c)},buildRoot:function(){return null!==this.root?null:void(this.root=this.buildTree())},printNode:function(a){G.out.println(cb.toLineString(new l(a.min,this.level),new l(a.max,this.level)))},init:function(){return null!==this.root?null:void this.buildRoot()},buildLevel:function(a,b){this.level++,b.clear();for(var c=0;c<a.size();c+=2){var d=a.get(c),e=c+1<a.size()?a.get(c):null;if(null===e)b.add(d);else{var f=new Kc(a.get(c),a.get(c+1));b.add(f)}}},interfaces_:function(){return[]},getClass:function(){return Lc}}),Wf(Mc.prototype,{filter:function(a){if(this.isForcedToLineString&&a instanceof Ba){var b=a.getFactory().createLineString(a.getCoordinateSequence());return this.lines.add(b),null}a instanceof va&&this.lines.add(a)},setForceToLineString:function(a){this.isForcedToLineString=a},interfaces_:function(){return[J]},getClass:function(){return Mc}}),Mc.getGeometry=function(){if(1===arguments.length){var a=arguments[0];return a.getFactory().buildGeometry(Mc.getLines(a))}if(2===arguments.length){var b=arguments[0],c=arguments[1];return b.getFactory().buildGeometry(Mc.getLines(b,c))}},Mc.getLines=function(){if(1===arguments.length){var a=arguments[0];return Mc.getLines(a,!1)}if(2===arguments.length){if(Zf(arguments[0],o)&&Zf(arguments[1],o)){for(var b=arguments[0],c=arguments[1],d=b.iterator();d.hasNext();){var e=d.next();Mc.getLines(e,c)}return c}if(arguments[0]instanceof K&&"boolean"==typeof arguments[1]){var f=arguments[0],g=arguments[1],h=new t;return f.apply(new Mc(h,g)),h}if(arguments[0]instanceof K&&Zf(arguments[1],o)){var i=arguments[0],j=arguments[1];return i instanceof va?j.add(i):i.apply(new Mc(j)),j}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Zf(arguments[0],o)&&Zf(arguments[1],o)){for(var k=arguments[0],l=arguments[1],m=arguments[2],d=k.iterator();d.hasNext();){var e=d.next();Mc.getLines(e,l,m)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof K&&Zf(arguments[1],o)){var n=arguments[0],p=arguments[1],q=arguments[2];return n.apply(new Mc(p,q)),p}}},Wf(Nc.prototype,{visitItem:function(a){this.items.add(a)},getItems:function(){return this.items},interfaces_:function(){return[Gb]},getClass:function(){return Nc}}),Wf(Oc.prototype,{locate:function(a){var b=new gb(a),c=new Pc(b);return this.index.query(a.y,a.y,c),b.getLocation()},interfaces_:function(){return[xc]},getClass:function(){return Oc}}),Wf(Pc.prototype,{visitItem:function(a){var b=a;this.counter.countSegment(b.getCoordinate(0),b.getCoordinate(1))},interfaces_:function(){return[Gb]},getClass:function(){return Pc}}),Wf(Qc.prototype,{init:function(a){for(var b=Mc.getLines(a),c=b.iterator();c.hasNext();){var d=c.next(),e=d.getCoordinates();this.addLine(e)}},addLine:function(a){for(var b=1;b<a.length;b++){var c=new ib(a[b-1],a[b]),d=Math.min(c.p0.y,c.p1.y),e=Math.max(c.p0.y,c.p1.y);this.index.insert(d,e,c)}},query:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1],c=new Nc;return this.index.query(a,b,c),c.getItems()}if(3===arguments.length){var d=arguments[0],e=arguments[1],f=arguments[2];this.index.query(d,e,f)}},interfaces_:function(){return[]},getClass:function(){return Qc}}),Oc.SegmentVisitor=Pc,Oc.IntervalIndexedGeometry=Qc,Wf(Rc.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(a){a.print(this.coord),a.print(" seg # = "+this.segmentIndex),a.println(" dist = "+this.dist)},compareTo:function(a){var b=a;return this.compare(b.segmentIndex,b.dist)},isEndPoint:function(a){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===a},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(a,b){return this.segmentIndex<a?-1:this.segmentIndex>a?1:this.dist<b?-1:this.dist>b?1:0},interfaces_:function(){return[e]},getClass:function(){return Rc}}),Wf(Sc.prototype,{print:function(a){a.println("Intersections:");for(var b=this.iterator();b.hasNext();){var c=b.next();c.print(a)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(a){this.addEndpoints();for(var b=this.iterator(),c=b.next();b.hasNext();){var d=b.next(),e=this.createSplitEdge(c,d);a.add(e),c=d}},addEndpoints:function(){var a=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[a],a,0)},createSplitEdge:function(a,b){var c=b.segmentIndex-a.segmentIndex+2,d=this.edge.pts[b.segmentIndex],e=b.dist>0||!b.coord.equals2D(d);e||c--;var f=new Array(c).fill(null),g=0;f[g++]=new l(a.coord);for(var h=a.segmentIndex+1;h<=b.segmentIndex;h++)f[g++]=this.edge.pts[h];return e&&(f[g]=b.coord),new Wc(f,new jc(this.edge.label))},add:function(a,b,c){var d=new Rc(a,b,c),e=this.nodeMap.get(d);return null!==e?e:(this.nodeMap.put(d,d),d)},isIntersection:function(a){for(var b=this.iterator();b.hasNext();){var c=b.next();if(c.coord.equals(a))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Sc}}),Wf(Tc.prototype,{getChainStartIndices:function(a){var b=0,c=new t;c.add(new B(b));do{var d=this.findChainEnd(a,b);c.add(new B(d)),b=d}while(b<a.length-1);var e=Tc.toIntArray(c);return e},findChainEnd:function(a,b){for(var c=Xb.quadrant(a[b],a[b+1]),d=b+1;d<a.length;){var e=Xb.quadrant(a[d-1],a[d]);if(e!==c)break;d++}return d-1},interfaces_:function(){return[]},getClass:function(){return Tc}}),Tc.toIntArray=function(a){for(var b=new Array(a.size()).fill(null),c=0;c<b.length;c++)b[c]=a.get(c).intValue();return b},Wf(Uc.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(a){var b=this.pts[this.startIndex[a]].x,c=this.pts[this.startIndex[a+1]].x;return b>c?b:c},getMinX:function(a){var b=this.pts[this.startIndex[a]].x,c=this.pts[this.startIndex[a+1]].x;return b<c?b:c},computeIntersectsForChain:function(){if(4===arguments.length){var a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3];this.computeIntersectsForChain(this.startIndex[a],this.startIndex[a+1],b,b.startIndex[c],b.startIndex[c+1],d)}else if(6===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2],h=arguments[3],i=arguments[4],j=arguments[5],k=this.pts[e],l=this.pts[f],m=g.pts[h],n=g.pts[i];if(f-e===1&&i-h===1)return j.addIntersections(this.e,e,g.e,h),null;if(this.env1.init(k,l),this.env2.init(m,n),!this.env1.intersects(this.env2))return null;var o=Math.trunc((e+f)/2),p=Math.trunc((h+i)/2);e<o&&(h<p&&this.computeIntersectsForChain(e,o,g,h,p,j),p<i&&this.computeIntersectsForChain(e,o,g,p,i,j)),o<f&&(h<p&&this.computeIntersectsForChain(o,f,g,h,p,j),p<i&&this.computeIntersectsForChain(o,f,g,p,i,j))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(a,b){for(var c=0;c<this.startIndex.length-1;c++)for(var d=0;d<a.startIndex.length-1;d++)this.computeIntersectsForChain(c,a,d,b)},interfaces_:function(){return[]},getClass:function(){return Uc}}),Wf(Vc.prototype,{getDepth:function(a,b){return this.depth[a][b]},setDepth:function(a,b,c){this.depth[a][b]=c},isNull:function(){if(0===arguments.length){for(var a=0;a<2;a++)for(var b=0;b<3;b++)if(this.depth[a][b]!==Vc.NULL_VALUE)return!1;return!0}if(1===arguments.length){var c=arguments[0];return this.depth[c][1]===Vc.NULL_VALUE}if(2===arguments.length){var d=arguments[0],e=arguments[1];return this.depth[d][e]===Vc.NULL_VALUE}},normalize:function(){for(var a=0;a<2;a++)if(!this.isNull(a)){var b=this.depth[a][1];this.depth[a][2]<b&&(b=this.depth[a][2]),b<0&&(b=0);for(var c=1;c<3;c++){var d=0;this.depth[a][c]>b&&(d=1),this.depth[a][c]=d}}},getDelta:function(a){return this.depth[a][hc.RIGHT]-this.depth[a][hc.LEFT]},getLocation:function(a,b){return this.depth[a][b]<=0?y.EXTERIOR:y.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(1===arguments.length)for(var a=arguments[0],b=0;b<2;b++)for(var c=1;c<3;c++){var d=a.getLocation(b,c);d!==y.EXTERIOR&&d!==y.INTERIOR||(this.isNull(b,c)?this.depth[b][c]=Vc.depthAtLocation(d):this.depth[b][c]+=Vc.depthAtLocation(d))}else if(3===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2];g===y.INTERIOR&&this.depth[e][f]++}},interfaces_:function(){return[]},getClass:function(){return Vc}}),Vc.depthAtLocation=function(a){return a===y.EXTERIOR?0:a===y.INTERIOR?1:Vc.NULL_VALUE},Vc.NULL_VALUE=-1,Xf(Wc,nc),Wf(Wc.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var a=new Array(2).fill(null);a[0]=this.pts[0],a[1]=this.pts[1];var b=new Wc(a,jc.toLineLabel(this.label));return b},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(a){this._isIsolated=a},setName:function(a){this.name=a},equals:function(a){if(!(a instanceof Wc))return!1;var b=a;if(this.pts.length!==b.pts.length)return!1;for(var c=!0,d=!0,e=this.pts.length,f=0;f<this.pts.length;f++)if(this.pts[f].equals2D(b.pts[f])||(c=!1),this.pts[f].equals2D(b.pts[--e])||(d=!1),!c&&!d)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var a=arguments[0];return this.pts[a]}},print:function(a){a.print("edge "+this.name+": "),a.print("LINESTRING (");for(var b=0;b<this.pts.length;b++)b>0&&a.print(","),a.print(this.pts[b].x+" "+this.pts[b].y);a.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(a){Wc.updateIM(this.label,a)},isCollapsed:function(){return!!this.label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(a){a.print("edge "+this.name+": ");for(var b=this.pts.length-1;b>=0;b--)a.print(this.pts[b]+" ");a.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new Uc(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new v;for(var a=0;a<this.pts.length;a++)this.env.expandToInclude(this.pts[a])}return this.env},addIntersection:function(a,b,c,d){var e=new l(a.getIntersection(d)),f=b,g=a.getEdgeDistance(c,d),h=f+1;if(h<this.pts.length){var i=this.pts[h];e.equals2D(i)&&(f=h,g=0)}this.eiList.add(e,f,g)},toString:function(){var a=new A;a.append("edge "+this.name+": "),a.append("LINESTRING (");for(var b=0;b<this.pts.length;b++)b>0&&a.append(","),a.append(this.pts[b].x+" "+this.pts[b].y);return a.append(")  "+this.label+" "+this.depthDelta),a.toString()},isPointwiseEqual:function(a){if(this.pts.length!==a.pts.length)return!1;for(var b=0;b<this.pts.length;b++)if(!this.pts[b].equals2D(a.pts[b]))return!1;return!0},setDepthDelta:function(a){this.depthDelta=a},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(a,b,c){for(var d=0;d<a.getIntersectionNum();d++)this.addIntersection(a,b,c,d)},interfaces_:function(){return[]},getClass:function(){return Wc}}),Wc.updateIM=function(){if(2!==arguments.length)return nc.prototype.updateIM.apply(this,arguments);var a=arguments[0],b=arguments[1];b.setAtLeastIfValid(a.getLocation(0,hc.ON),a.getLocation(1,hc.ON),1),a.isArea()&&(b.setAtLeastIfValid(a.getLocation(0,hc.LEFT),a.getLocation(1,hc.LEFT),2),b.setAtLeastIfValid(a.getLocation(0,hc.RIGHT),a.getLocation(1,hc.RIGHT),2))},Xf(Xc,tc),Wf(Xc.prototype,{insertBoundaryPoint:function(a,b){var c=this.nodes.addNode(b),d=c.getLabel(),e=1,f=y.NONE;f=d.getLocation(a,hc.ON),f===y.BOUNDARY&&e++;var g=Xc.determineBoundary(this.boundaryNodeRule,e);d.setLocation(a,g)},computeSelfNodes:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];return this.computeSelfNodes(a,b,!1)}if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2],f=new Fc(c,!0,!1);f.setIsDoneIfProperInt(e);var g=this.createEdgeSetIntersector(),h=this.parentGeom instanceof Ba||this.parentGeom instanceof za||this.parentGeom instanceof Ca,i=d||!h;return g.computeIntersections(this.edges,f,i),this.addSelfIntersectionNodes(this.argIndex),f}},computeSplitEdges:function(a){for(var b=this.edges.iterator();b.hasNext();){var c=b.next();c.eiList.addSplitEdges(a)}},computeEdgeIntersections:function(a,b,c){var d=new Fc(b,c,!0);d.setBoundaryNodes(this.getBoundaryNodes(),a.getBoundaryNodes());var e=this.createEdgeSetIntersector();return e.computeIntersections(this.edges,a.edges,d),d},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof xa){var a=arguments[0],b=a.getCoordinate();this.insertPoint(this.argIndex,b,y.INTERIOR)}else if(arguments[0]instanceof l){var c=arguments[0];this.insertPoint(this.argIndex,c,y.INTERIOR)}},addPolygon:function(a){this.addPolygonRing(a.getExteriorRing(),y.EXTERIOR,y.INTERIOR);for(var b=0;b<a.getNumInteriorRing();b++){var c=a.getInteriorRingN(b);this.addPolygonRing(c,y.INTERIOR,y.EXTERIOR)}},addEdge:function(a){this.insertEdge(a);var b=a.getCoordinates();this.insertPoint(this.argIndex,b[0],y.BOUNDARY),this.insertPoint(this.argIndex,b[b.length-1],y.BOUNDARY)},addLineString:function(a){var b=R.removeRepeatedPoints(a.getCoordinates());if(b.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=b[0],null;var c=new Wc(b,new jc(this.argIndex,y.INTERIOR));this.lineEdgeMap.put(a,c),this.insertEdge(c),k.isTrue(b.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,b[0]),this.insertBoundaryPoint(this.argIndex,b[b.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var a=this.getBoundaryNodes(),b=new Array(a.size()).fill(null),c=0,d=a.iterator();d.hasNext();){var e=d.next();b[c++]=e.getCoordinate().copy()}return b},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(a,b,c){return this.isBoundaryNode(a,b)?null:void(c===y.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(a,b):this.insertPoint(a,b,c))},addPolygonRing:function(a,b,c){if(a.isEmpty())return null;var d=R.removeRepeatedPoints(a.getCoordinates());if(d.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=d[0],null;var e=b,f=c;hb.isCCW(d)&&(e=c,f=b);var g=new Wc(d,new jc(this.argIndex,y.BOUNDARY,e,f));this.lineEdgeMap.put(a,g),this.insertEdge(g),this.insertPoint(this.argIndex,d[0],y.BOUNDARY)},insertPoint:function(a,b,c){var d=this.nodes.addNode(b),e=d.getLabel();null===e?d.label=new jc(a,c):e.setLocation(a,c)},createEdgeSetIntersector:function(){return new Gc},addSelfIntersectionNodes:function(a){for(var b=this.edges.iterator();b.hasNext();)for(var c=b.next(),d=c.getLabel().getLocation(a),e=c.eiList.iterator();e.hasNext();){var f=e.next();this.addSelfIntersectionNode(a,f.coord,d)}},add:function(){if(1!==arguments.length)return tc.prototype.add.apply(this,arguments);var a=arguments[0];if(a.isEmpty())return null;if(a instanceof Ca&&(this.useBoundaryDeterminationRule=!1),a instanceof za)this.addPolygon(a);else if(a instanceof va)this.addLineString(a);else if(a instanceof xa)this.addPoint(a);else if(a instanceof Aa)this.addCollection(a);else if(a instanceof ka)this.addCollection(a);else if(a instanceof Ca)this.addCollection(a);else{if(!(a instanceof ja))throw new UnsupportedOperationException(a.getClass().getName());this.addCollection(a)}},addCollection:function(a){for(var b=0;b<a.getNumGeometries();b++){var c=a.getGeometryN(b);this.add(c)}},locate:function(a){return Zf(this.parentGeom,ya)&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new Oc(this.parentGeom)),this.areaPtLocator.locate(a)):this.ptLocator.locate(a,this.parentGeom)},findEdge:function(){if(1===arguments.length){var a=arguments[0];return this.lineEdgeMap.get(a)}return tc.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return Xc}}),Xc.determineBoundary=function(a,b){return a.isInBoundary(b)?y.BOUNDARY:y.INTERIOR},Wf(Yc.prototype,{getArgGeometry:function(a){return this.arg[a].getGeometry()},setComputationPrecision:function(a){this.resultPrecisionModel=a,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Yc}}),Wf(Zc.prototype,{compareTo:function(a){var b=a,c=Zc.compareOriented(this.pts,this._orientation,b.pts,b._orientation);return c},interfaces_:function(){return[e]},getClass:function(){return Zc}}),Zc.orientation=function(a){return 1===R.increasingDirection(a)},Zc.compareOriented=function(a,b,c,d){for(var e=b?1:-1,f=d?1:-1,g=b?a.length:-1,h=d?c.length:-1,i=b?0:a.length-1,j=d?0:c.length-1;;){var k=a[i].compareTo(c[j]);if(0!==k)return k;i+=e,j+=f;var l=i===g,m=j===h;if(l&&!m)return-1;if(!l&&m)return 1;if(l&&m)return 0}},Wf($c.prototype,{print:function(a){a.print("MULTILINESTRING ( ");for(var b=0;b<this.edges.size();b++){var c=this.edges.get(b);b>0&&a.print(","),a.print("(");for(var d=c.getCoordinates(),e=0;e<d.length;e++)e>0&&a.print(","),a.print(d[e].x+" "+d[e].y);a.println(")")}a.print(")  ")},addAll:function(a){for(var b=a.iterator();b.hasNext();)this.add(b.next())},findEdgeIndex:function(a){for(var b=0;b<this.edges.size();b++)if(this.edges.get(b).equals(a))return b;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(a){return this.edges.get(a)},findEqualEdge:function(a){var b=new Zc(a.getCoordinates()),c=this.ocaMap.get(b);return c},add:function(a){this.edges.add(a);var b=new Zc(a.getCoordinates());this.ocaMap.put(b,a)},interfaces_:function(){return[]},getClass:function(){return $c}}),Xf(_c,Yc),Wf(_c.prototype,{insertUniqueEdge:function(a){var b=this.edgeList.findEqualEdge(a);if(null!==b){var c=b.getLabel(),d=a.getLabel();b.isPointwiseEqual(a)||(d=new jc(a.getLabel()),d.flip());var e=b.getDepth();e.isNull()&&e.add(c),e.add(d),c.merge(d)}else this.edgeList.add(a)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var a=this.graph.getEdgeEnds().iterator();a.hasNext();){var b=a.next(),c=b.getSym();b.isInResult()&&c.isInResult()&&(b.setInResult(!1),c.setInResult(!1))}},isCoveredByLA:function(a){return!!this.isCovered(a,this.resultLineList)||!!this.isCovered(a,this.resultPolyList)},computeGeometry:function(a,b,c,d){var e=new t;return e.addAll(a),e.addAll(b),e.addAll(c),e.isEmpty()?_c.createEmptyResult(d,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(e)},mergeSymLabels:function(){for(var a=this.graph.getNodes().iterator();a.hasNext();){var b=a.next();b.getEdges().mergeSymLabels()}},isCovered:function(a,b){for(var c=b.iterator();c.hasNext();){var d=c.next(),e=this.ptLocator.locate(a,d);if(e!==y.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var a=new t,b=this.edgeList.iterator();b.hasNext();){var c=b.next();c.isCollapsed()&&(b.remove(),a.add(c.getCollapsedEdge()))}this.edgeList.addAll(a)},updateNodeLabelling:function(){for(var a=this.graph.getNodes().iterator();a.hasNext();){var b=a.next(),c=b.getEdges().getLabel();b.getLabel().merge(c)}},getResultGeometry:function(a){return this.computeOverlay(a),this.resultGeom},insertUniqueEdges:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next();this.insertUniqueEdge(c)}},computeOverlay:function(a){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var b=new t;this.arg[0].computeSplitEdges(b),this.arg[1].computeSplitEdges(b);this.insertUniqueEdges(b),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),fc.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(a),this.cancelDuplicateResultEdges();var c=new uc(this.geomFact);c.add(this.graph),this.resultPolyList=c.getPolygons();var d=new vc(this,this.geomFact,this.ptLocator);this.resultLineList=d.build(a);var e=new wc(this,this.geomFact,this.ptLocator);this.resultPointList=e.build(a),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,a)},labelIncompleteNode:function(a,b){var c=this.ptLocator.locate(a.getCoordinate(),this.arg[b].getGeometry());a.getLabel().setLocation(b,c)},copyPoints:function(a){for(var b=this.arg[a].getNodeIterator();b.hasNext();){var c=b.next(),d=this.graph.addNode(c.getCoordinate());d.setLabel(a,c.getLabel().getLocation(a))}},findResultAreaEdges:function(a){for(var b=this.graph.getEdgeEnds().iterator();b.hasNext();){var c=b.next(),d=c.getLabel();d.isArea()&&!c.isInteriorAreaEdge()&&_c.isResultOfOp(d.getLocation(0,hc.RIGHT),d.getLocation(1,hc.RIGHT),a)&&c.setInResult(!0)}},computeLabelsFromDepths:function(){for(var a=this.edgeList.iterator();a.hasNext();){var b=a.next(),c=b.getLabel(),d=b.getDepth();if(!d.isNull()){d.normalize();for(var e=0;e<2;e++)c.isNull(e)||!c.isArea()||d.isNull(e)||(0===d.getDelta(e)?c.toLine(e):(k.isTrue(!d.isNull(e,hc.LEFT),"depth of LEFT side has not been initialized"),c.setLocation(e,hc.LEFT,d.getLocation(e,hc.LEFT)),k.isTrue(!d.isNull(e,hc.RIGHT),"depth of RIGHT side has not been initialized"),c.setLocation(e,hc.RIGHT,d.getLocation(e,hc.RIGHT))))}}},computeLabelling:function(){for(var a=this.graph.getNodes().iterator();a.hasNext();){var b=a.next();b.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var a=0,b=this.graph.getNodes().iterator();b.hasNext();){var c=b.next(),d=c.getLabel();c.isIsolated()&&(a++,d.isNull(0)?this.labelIncompleteNode(c,0):this.labelIncompleteNode(c,1)),c.getEdges().updateLabelling(d)}},isCoveredByA:function(a){return!!this.isCovered(a,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return _c}}),_c.overlayOp=function(a,b,c){var d=new _c(a,b),e=d.getResultGeometry(c);return e},_c.intersection=function(a,b){if(a.isEmpty()||b.isEmpty())return _c.createEmptyResult(_c.INTERSECTION,a,b,a.getFactory());if(a.isGeometryCollection()){var c=b;return gc.map(a,{interfaces_:function(){return[MapOp]},map:function(a){return a.intersection(c)}})}return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(b),bd.overlayOp(a,b,_c.INTERSECTION)},_c.symDifference=function(a,b){if(a.isEmpty()||b.isEmpty()){if(a.isEmpty()&&b.isEmpty())return _c.createEmptyResult(_c.SYMDIFFERENCE,a,b,a.getFactory());if(a.isEmpty())return b.copy();if(b.isEmpty())return a.copy()}return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(b),bd.overlayOp(a,b,_c.SYMDIFFERENCE)},_c.resultDimension=function(a,b,c){var d=b.getDimension(),e=c.getDimension(),f=-1;switch(a){case _c.INTERSECTION:f=Math.min(d,e);break;case _c.UNION:f=Math.max(d,e);break;case _c.DIFFERENCE:f=d;break;case _c.SYMDIFFERENCE:f=Math.max(d,e)}return f},_c.createEmptyResult=function(a,b,c,d){var e=null;switch(_c.resultDimension(a,b,c)){case-1:e=d.createGeometryCollection(new Array(0).fill(null));break;case 0:e=d.createPoint();break;case 1:e=d.createLineString();break;case 2:e=d.createPolygon()}return e},_c.difference=function(a,b){return a.isEmpty()?_c.createEmptyResult(_c.DIFFERENCE,a,b,a.getFactory()):b.isEmpty()?a.copy():(a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(b),bd.overlayOp(a,b,_c.DIFFERENCE))},_c.isResultOfOp=function(){if(2===arguments.length){var a=arguments[0],b=arguments[1],c=a.getLocation(0),d=a.getLocation(1);return _c.isResultOfOp(c,d,b)}if(3===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2];switch(e===y.BOUNDARY&&(e=y.INTERIOR),f===y.BOUNDARY&&(f=y.INTERIOR),g){case _c.INTERSECTION:return e===y.INTERIOR&&f===y.INTERIOR;case _c.UNION:return e===y.INTERIOR||f===y.INTERIOR;case _c.DIFFERENCE:return e===y.INTERIOR&&f!==y.INTERIOR;case _c.SYMDIFFERENCE:return e===y.INTERIOR&&f!==y.INTERIOR||e!==y.INTERIOR&&f===y.INTERIOR}return!1}},_c.INTERSECTION=1,_c.UNION=2,_c.DIFFERENCE=3,_c.SYMDIFFERENCE=4,Wf(ad.prototype,{selfSnap:function(a){var b=new sb(a),c=b.snapTo(a,this.snapTolerance);return c},removeCommonBits:function(a){this.cbr=new vb,this.cbr.add(a[0]),this.cbr.add(a[1]);var b=new Array(2).fill(null);return b[0]=this.cbr.removeCommonBits(a[0].copy()),b[1]=this.cbr.removeCommonBits(a[1].copy()),b},prepareResult:function(a){return this.cbr.addCommonBits(a),a},getResultGeometry:function(a){var b=this.snap(this.geom),c=_c.overlayOp(b[0],b[1],a);return this.prepareResult(c)},checkValid:function(a){a.isValid()||G.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=sb.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(a){var b=this.removeCommonBits(a),c=sb.snap(b[0],b[1],this.snapTolerance);return c},interfaces_:function(){return[]},getClass:function(){return ad}}),ad.overlayOp=function(a,b,c){var d=new ad(a,b);return d.getResultGeometry(c)},ad.union=function(a,b){return ad.overlayOp(a,b,_c.UNION)},ad.intersection=function(a,b){return ad.overlayOp(a,b,_c.INTERSECTION)},ad.symDifference=function(a,b){return ad.overlayOp(a,b,_c.SYMDIFFERENCE)},ad.difference=function(a,b){return ad.overlayOp(a,b,_c.DIFFERENCE)},Wf(bd.prototype,{getResultGeometry:function(a){var b=null,c=!1,d=null;try{b=_c.overlayOp(this.geom[0],this.geom[1],a);var e=!0;e&&(c=!0)}catch(a){if(!(a instanceof i))throw a;d=a}finally{}if(!c)try{b=ad.overlayOp(this.geom[0],this.geom[1],a)}catch(a){throw a instanceof i?d:a}finally{}return b},interfaces_:function(){return[]},getClass:function(){return bd}}),bd.overlayOp=function(a,b,c){var d=new bd(a,b);return d.getResultGeometry(c)},bd.union=function(a,b){return bd.overlayOp(a,b,_c.UNION)},bd.intersection=function(a,b){return bd.overlayOp(a,b,_c.INTERSECTION)},bd.symDifference=function(a,b){return bd.overlayOp(a,b,_c.SYMDIFFERENCE)},bd.difference=function(a,b){return bd.overlayOp(a,b,_c.DIFFERENCE)},Wf(cd.prototype,{addPolygon:function(a){if(a.isEmpty())return null;var b=null,c=0,d=this.horizontalBisector(a);if(0===d.getLength())c=0,b=d.getCoordinate();else{var e=bd.overlayOp(d,a,_c.INTERSECTION),f=this.widestGeometry(e);c=f.getEnvelopeInternal().getWidth(),b=cd.centre(f.getEnvelopeInternal())}(null===this.interiorPoint||c>this.maxWidth)&&(this.interiorPoint=b,this.maxWidth=c)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function a(){if(arguments[0]instanceof ja){var b=arguments[0];if(b.isEmpty())return b;for(var a=b.getGeometryN(0),c=1;c<b.getNumGeometries();c++)b.getGeometryN(c).getEnvelopeInternal().getWidth()>a.getEnvelopeInternal().getWidth()&&(a=b.getGeometryN(c));return a}if(arguments[0]instanceof K){var d=arguments[0];return d instanceof ja?this.widestGeometry(d):d}},horizontalBisector:function(a){var b=a.getEnvelopeInternal(),c=dd.getBisectorY(a);return this.factory.createLineString([new l(b.getMinX(),c),new l(b.getMaxX(),c)])},add:function(a){if(a instanceof za)this.addPolygon(a);else if(a instanceof ja)for(var b=a,c=0;c<b.getNumGeometries();c++)this.add(b.getGeometryN(c))},interfaces_:function(){return[]},getClass:function(){return cd}}),cd.centre=function(a){return new l(cd.avg(a.getMinX(),a.getMaxX()),cd.avg(a.getMinY(),a.getMaxY()))},cd.avg=function(a,b){return(a+b)/2},Wf(dd.prototype,{updateInterval:function(a){a<=this.centreY?a>this.loY&&(this.loY=a):a>this.centreY&&a<this.hiY&&(this.hiY=a)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var a=0;a<this.poly.getNumInteriorRing();a++)this.process(this.poly.getInteriorRingN(a));var b=cd.avg(this.hiY,this.loY);return b},process:function(a){for(var b=a.getCoordinateSequence(),c=0;c<b.size();c++){var d=b.getY(c);this.updateInterval(d)}},interfaces_:function(){return[]},getClass:function(){return dd}}),dd.getBisectorY=function(a){var b=new dd(a);return b.getBisectorY()},cd.SafeBisectorFinder=dd,Wf(ed.prototype,{addEndpoints:function(){if(arguments[0]instanceof K){var a=arguments[0];if(a instanceof va)this.addEndpoints(a.getCoordinates());else if(a instanceof ja)for(var b=a,c=0;c<b.getNumGeometries();c++)this.addEndpoints(b.getGeometryN(c))}else if(arguments[0]instanceof Array){var d=arguments[0];this.add(d[0]),this.add(d[d.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof K){var a=arguments[0];if(a instanceof va)this.addInterior(a.getCoordinates());else if(a instanceof ja)for(var b=a,c=0;c<b.getNumGeometries();c++)this.addInterior(b.getGeometryN(c))}else if(arguments[0]instanceof Array)for(var d=arguments[0],c=1;c<d.length-1;c++)this.add(d[c])},add:function(a){var b=a.distance(this.centroid);b<this.minDistance&&(this.interiorPoint=new l(a),this.minDistance=b)},interfaces_:function(){return[]},getClass:function(){return ed}}),Wf(fd.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof K){var a=arguments[0];if(a instanceof xa)this.add(a.getCoordinate());else if(a instanceof ja)for(var b=a,c=0;c<b.getNumGeometries();c++)this.add(b.getGeometryN(c))}else if(arguments[0]instanceof l){var d=arguments[0],e=d.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new l(d),this.minDistance=e)}},interfaces_:function(){return[]},getClass:function(){return fd}}),Wf(gd.prototype,{select:function(){if(1===arguments.length){arguments[0]}else if(2===arguments.length){var a=arguments[0],b=arguments[1];a.getLineSegment(b,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return gd}}),Wf(hd.prototype,{hasChildren:function(){for(var a=0;a<2;a++)if(null!==this.subnode[a])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(a){a.addAll(this.items);for(var b=0;b<2;b++)null!==this.subnode[b]&&this.subnode[b].addAllItems(a);return a},size:function(){for(var a=0,b=0;b<2;b++)null!==this.subnode[b]&&(a+=this.subnode[b].size());return a+this.items.size()},
addAllItemsFromOverlapping:function(a,b){return null===a||this.isSearchMatch(a)?(b.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(a,b),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(a,b))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(a,b){if(!this.isSearchMatch(a))return!1;for(var c=!1,d=0;d<2;d++)if(null!==this.subnode[d]&&(c=this.subnode[d].remove(a,b))){this.subnode[d].isPrunable()&&(this.subnode[d]=null);break}return c?c:c=this.items.remove(b)},getItems:function(){return this.items},depth:function(){for(var a=0,b=0;b<2;b++)if(null!==this.subnode[b]){var c=this.subnode[b].depth();c>a&&(a=c)}return a+1},nodeSize:function(){for(var a=0,b=0;b<2;b++)null!==this.subnode[b]&&(a+=this.subnode[b].nodeSize());return a+1},add:function(a){this.items.add(a)},interfaces_:function(){return[]},getClass:function(){return hd}}),hd.getSubnodeIndex=function(a,b){var c=-1;return a.min>=b&&(c=1),a.max<=b&&(c=0),c},Wf(id.prototype,{expandToInclude:function(a){a.max>this.max&&(this.max=a.max),a.min<this.min&&(this.min=a.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var a=arguments[0];return this.overlaps(a.min,a.max)}if(2===arguments.length){var b=arguments[0],c=arguments[1];return!(this.min>c||this.max<b)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof id){var a=arguments[0];return this.contains(a.min,a.max)}if("number"==typeof arguments[0]){var b=arguments[0];return b>=this.min&&b<=this.max}}else if(2===arguments.length){var c=arguments[0],d=arguments[1];return c>=this.min&&d<=this.max}},init:function(a,b){this.min=a,this.max=b,a>b&&(this.min=b,this.max=a)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return id}}),jd.exponent=function(a){return kd(64,a)-1023},jd.powerOf2=function(a){return Math.pow(2,a)},Wf(ld.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(a){for(this.level=ld.computeLevel(a),this.interval=new id,this.computeInterval(this.level,a);!this.interval.contains(a);)this.level+=1,this.computeInterval(this.level,a)},computeInterval:function(a,b){var c=jd.powerOf2(a);this.pt=Math.floor(b.getMin()/c)*c,this.interval.init(this.pt,this.pt+c)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return ld}}),ld.computeLevel=function(a){var b=a.getWidth(),c=jd.exponent(b)+1;return c},Xf(md,hd),Wf(md.prototype,{getInterval:function(){return this.interval},find:function(a){var b=hd.getSubnodeIndex(a,this.centre);if(b===-1)return this;if(null!==this.subnode[b]){var c=this.subnode[b];return c.find(a)}return this},insert:function(a){k.isTrue(null===this.interval||this.interval.contains(a.interval));var b=hd.getSubnodeIndex(a.interval,this.centre);if(a.level===this.level-1)this.subnode[b]=a;else{var c=this.createSubnode(b);c.insert(a),this.subnode[b]=c}},isSearchMatch:function(a){return a.overlaps(this.interval)},getSubnode:function(a){return null===this.subnode[a]&&(this.subnode[a]=this.createSubnode(a)),this.subnode[a]},getNode:function(a){var b=hd.getSubnodeIndex(a,this.centre);if(b!==-1){var c=this.getSubnode(b);return c.getNode(a)}return this},createSubnode:function(a){var b=0,c=0;switch(a){case 0:b=this.interval.getMin(),c=this.centre;break;case 1:b=this.centre,c=this.interval.getMax()}var d=new id(b,c),e=new md(d,this.level-1);return e},interfaces_:function(){return[]},getClass:function(){return md}}),md.createNode=function(a){var b=new ld(a),c=new md(b.getInterval(),b.getLevel());return c},md.createExpanded=function(a,b){var c=new id(b);null!==a&&c.expandToInclude(a.interval);var d=md.createNode(c);return null!==a&&d.insert(a),d},Wf(nd.prototype,{interfaces_:function(){return[]},getClass:function(){return nd}});nd.isZeroWidth=function(a,b){var c=b-a;if(0===c)return!0;var d=Math.max(Math.abs(a),Math.abs(b)),e=c/d,f=jd.exponent(e);return f<=nd.MIN_BINARY_EXPONENT};nd.MIN_BINARY_EXPONENT=-50,Xf(od,hd),Wf(od.prototype,{insert:function(a,b){var c=hd.getSubnodeIndex(a,od.origin);if(c===-1)return this.add(b),null;var d=this.subnode[c];if(null===d||!d.getInterval().contains(a)){var e=md.createExpanded(d,a);this.subnode[c]=e}this.insertContained(this.subnode[c],a,b)},isSearchMatch:function(a){return!0},insertContained:function(a,b,c){k.isTrue(a.getInterval().contains(b));var d=nd.isZeroWidth(b.getMin(),b.getMax()),e=null;e=d?a.find(b):a.getNode(b),e.add(c)},interfaces_:function(){return[]},getClass:function(){return od}}),od.origin=0,Wf(pd.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(a,b){this.collectStats(a);var c=pd.ensureExtent(a,this.minExtent);this.root.insert(c,b)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var a=arguments[0];return this.query(new id(a,a))}if(arguments[0]instanceof id){var b=arguments[0],c=new t;return this.query(b,c),c}}else if(2===arguments.length){var d=arguments[0],e=arguments[1];this.root.addAllItemsFromOverlapping(d,e)}},iterator:function(){var a=new t;return this.root.addAllItems(a),a.iterator()},remove:function(a,b){var c=pd.ensureExtent(a,this.minExtent);return this.root.remove(c,b)},collectStats:function(a){var b=a.getWidth();b<this.minExtent&&b>0&&(this.minExtent=b)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return pd}}),pd.ensureExtent=function(a,b){var c=a.getMin(),d=a.getMax();return c!==d?a:(c===d&&(c-=b/2,d=c+b/2),new id(c,d))},Wf(qd.prototype,{isInside:function(a){},interfaces_:function(){return[]},getClass:function(){return qd}}),Wf(rd.prototype,{testLineSegment:function(a,b){var c=null,d=null,e=null,f=null,g=null,h=b.p0,i=b.p1;d=h.x-a.x,e=h.y-a.y,f=i.x-a.x,g=i.y-a.y,(e>0&&g<=0||g>0&&e<=0)&&(c=fb.signOfDet2x2(d,e,f,g)/(g-e),0<c&&this.crossings++)},buildIndex:function(){this.tree=new pd;for(var a=R.removeRepeatedPoints(this.ring.getCoordinates()),b=Yb.getChains(a),c=0;c<b.size();c++){var d=b.get(c),e=d.getEnvelope();this.interval.min=e.getMinY(),this.interval.max=e.getMaxY(),this.tree.insert(this.interval,d)}},testMonotoneChain:function(a,b,c){c.select(a,b)},isInside:function(a){this.crossings=0;var b=new v(d.NEGATIVE_INFINITY,d.POSITIVE_INFINITY,a.y,a.y);this.interval.min=a.y,this.interval.max=a.y;for(var c=this.tree.query(this.interval),e=new sd(this,a),f=c.iterator();f.hasNext();){var g=f.next();this.testMonotoneChain(b,e,g)}return this.crossings%2===1},interfaces_:function(){return[qd]},getClass:function(){return rd}}),Xf(sd,gd),Wf(sd.prototype,{select:function(){if(1!==arguments.length)return gd.prototype.select.apply(this,arguments);var a=arguments[0];this.mcp.testLineSegment(this.p,a)},interfaces_:function(){return[]},getClass:function(){return sd}}),rd.MCSelecter=sd,Wf(td.prototype,{interfaces_:function(){return[]},getClass:function(){return td}}),td.toDegrees=function(a){return 180*a/Math.PI},td.normalize=function(a){for(;a>Math.PI;)a-=td.PI_TIMES_2;for(;a<=-Math.PI;)a+=td.PI_TIMES_2;return a},td.angle=function(){if(1===arguments.length){var a=arguments[0];return Math.atan2(a.y,a.x)}if(2===arguments.length){var b=arguments[0],c=arguments[1],d=c.x-b.x,e=c.y-b.y;return Math.atan2(e,d)}},td.isAcute=function(a,b,c){var d=a.x-b.x,e=a.y-b.y,f=c.x-b.x,g=c.y-b.y,h=d*f+e*g;return h>0},td.isObtuse=function(a,b,c){var d=a.x-b.x,e=a.y-b.y,f=c.x-b.x,g=c.y-b.y,h=d*f+e*g;return h<0},td.interiorAngle=function(a,b,c){var d=td.angle(b,a),e=td.angle(b,c);return Math.abs(e-d)},td.normalizePositive=function(a){if(a<0){for(;a<0;)a+=td.PI_TIMES_2;a>=td.PI_TIMES_2&&(a=0)}else{for(;a>=td.PI_TIMES_2;)a-=td.PI_TIMES_2;a<0&&(a=0)}return a},td.angleBetween=function(a,b,c){var d=td.angle(b,a),e=td.angle(b,c);return td.diff(d,e)},td.diff=function(a,b){var c=null;return c=a<b?b-a:a-b,c>Math.PI&&(c=2*Math.PI-c),c},td.toRadians=function(a){return a*Math.PI/180},td.getTurn=function(a,b){var c=Math.sin(b-a);return c>0?td.COUNTERCLOCKWISE:c<0?td.CLOCKWISE:td.NONE},td.angleBetweenOriented=function(a,b,c){var d=td.angle(b,a),e=td.angle(b,c),f=e-d;return f<=-Math.PI?f+td.PI_TIMES_2:f>Math.PI?f-td.PI_TIMES_2:f},td.PI_TIMES_2=2*Math.PI,td.PI_OVER_2=Math.PI/2,td.PI_OVER_4=Math.PI/4,td.COUNTERCLOCKWISE=hb.COUNTERCLOCKWISE,td.CLOCKWISE=hb.CLOCKWISE,td.NONE=hb.COLLINEAR,Wf(ud.prototype,{area:function(){return ud.area(this.p0,this.p1,this.p2)},signedArea:function(){return ud.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(a){if(null===a)throw new c("Supplied point is null.");return ud.interpolateZ(a,this.p0,this.p1,this.p2)},longestSideLength:function(){return ud.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return ud.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return ud.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return ud.area3D(this.p0,this.p1,this.p2)},centroid:function(){return ud.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return ud.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return ud}}),ud.area=function(a,b,c){return Math.abs(((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))/2)},ud.signedArea=function(a,b,c){return((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))/2},ud.det=function(a,b,c,d){return a*d-b*c},ud.interpolateZ=function(a,b,c,d){var e=b.x,f=b.y,g=c.x-e,h=d.x-e,i=c.y-f,j=d.y-f,k=g*j-h*i,l=a.x-e,m=a.y-f,n=(j*l-h*m)/k,o=(-i*l+g*m)/k,p=b.z+n*(c.z-b.z)+o*(d.z-b.z);return p},ud.longestSideLength=function(a,b,c){var d=a.distance(b),e=b.distance(c),f=c.distance(a),g=d;return e>g&&(g=e),f>g&&(g=f),g},ud.isAcute=function(a,b,c){return!!td.isAcute(a,b,c)&&(!!td.isAcute(b,c,a)&&!!td.isAcute(c,a,b))},ud.circumcentre=function(a,b,c){var d=c.x,e=c.y,f=a.x-d,g=a.y-e,h=b.x-d,i=b.y-e,j=2*ud.det(f,g,h,i),k=ud.det(g,f*f+g*g,i,h*h+i*i),m=ud.det(f,f*f+g*g,h,h*h+i*i),n=d-k/j,o=e+m/j;return new l(n,o)},ud.perpendicularBisector=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=new H(a.x+c/2,a.y+d/2,1),f=new H(a.x-d+c/2,a.y+c+d/2,1);return new H(e,f)},ud.angleBisector=function(a,b,c){var d=b.distance(a),e=b.distance(c),f=d/(d+e),g=c.x-a.x,h=c.y-a.y,i=new l(a.x+f*g,a.y+f*h);return i},ud.area3D=function(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=b.z-a.z,g=c.x-a.x,h=c.y-a.y,i=c.z-a.z,j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=j*j+k*k+l*l,n=Math.sqrt(m)/2;return n},ud.centroid=function(a,b,c){var d=(a.x+b.x+c.x)/3,e=(a.y+b.y+c.y)/3;return new l(d,e)},ud.inCentre=function(a,b,c){var d=b.distance(c),e=a.distance(c),f=a.distance(b),g=d+e+f,h=(d*a.x+e*b.x+f*c.x)/g,i=(d*a.y+e*b.y+f*c.y)/g;return new l(h,i)},Wf(vd.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var a=this.extremalPts[0],b=this.extremalPts[1];return this.input.getFactory().createLineString([a,b])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){var a=this.input.getCoordinates();return this.extremalPts=[new l(a[0])],null}var b=this.input.convexHull(),c=b.getCoordinates(),a=c;if(c[0].equals2D(c[c.length-1])&&(a=new Array(c.length-1).fill(null),R.copyDeep(c,0,a,0,c.length-1)),a.length<=2)return this.extremalPts=R.copyDeep(a),null;for(var d=vd.lowestPoint(a),e=vd.pointWitMinAngleWithX(a,d),f=0;f<a.length;f++){var g=vd.pointWithMinAngleWithSegment(a,d,e);if(td.isObtuse(d,g,e))return this.extremalPts=[new l(d),new l(e)],null;if(td.isObtuse(g,d,e))d=g;else{if(!td.isObtuse(g,e,d))return this.extremalPts=[new l(d),new l(e),new l(g)],null;e=g}}k.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return null!==this.extremalPts?null:(this.computeCirclePoints(),this.computeCentre(),void(null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var a=this.extremalPts[0],b=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([a,b])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var a=this.input.getFactory().createPoint(this.centre);return 0===this.radius?a:a.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new l((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=ud.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return vd}}),vd.pointWitMinAngleWithX=function(a,b){for(var c=d.MAX_VALUE,e=null,f=0;f<a.length;f++){var g=a[f];if(g!==b){var h=g.x-b.x,i=g.y-b.y;i<0&&(i=-i);var j=Math.sqrt(h*h+i*i),k=i/j;k<c&&(c=k,e=g)}}return e},vd.lowestPoint=function(a){for(var b=a[0],c=1;c<a.length;c++)a[c].y<b.y&&(b=a[c]);return b},vd.pointWithMinAngleWithSegment=function(a,b,c){for(var e=d.MAX_VALUE,f=null,g=0;g<a.length;g++){var h=a[g];if(h!==b&&h!==c){var i=td.angleBetween(b,h,c);i<e&&(e=i,f=h)}}return f},Wf(wd.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var a=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([a,this.minWidthPt])},computeWidthConvex:function(a){a instanceof za?this.convexHullPts=a.getExteriorRing().getCoordinates():this.convexHullPts=a.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(a){this.minWidth=d.MAX_VALUE;for(var b=1,c=new ib,e=0;e<a.length-1;e++)c.p0=a[e],c.p1=a[e+1],b=this.findMaxPerpDistance(a,c,b)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var a=new ob(this.inputGeom).getConvexHull();this.computeWidthConvex(a)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(a,b,c){for(var d=b.distancePerpendicular(a[c]),e=d,f=c,g=f;e>=d;)d=e,f=g,g=wd.nextIndex(a,f),e=b.distancePerpendicular(a[g]);return d<this.minWidth&&(this.minPtIndex=f,this.minWidth=d,this.minWidthPt=a[this.minPtIndex],this.minBaseSeg=new ib(b)),f},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var a=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,b=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,c=d.MAX_VALUE,e=-d.MAX_VALUE,f=d.MAX_VALUE,g=-d.MAX_VALUE,h=0;h<this.convexHullPts.length;h++){var i=wd.computeC(a,b,this.convexHullPts[h]);i>e&&(e=i),i<c&&(c=i);var j=wd.computeC(-b,a,this.convexHullPts[h]);j>g&&(g=j),j<f&&(f=j)}var k=wd.computeSegmentForLine(-a,-b,g),l=wd.computeSegmentForLine(-a,-b,f),m=wd.computeSegmentForLine(-b,a,e),n=wd.computeSegmentForLine(-b,a,c),o=m.lineIntersection(k),p=n.lineIntersection(k),q=n.lineIntersection(l),r=m.lineIntersection(l),s=this.inputGeom.getFactory().createLinearRing([o,p,q,r,o]);return this.inputGeom.getFactory().createPolygon(s,null)},interfaces_:function(){return[]},getClass:function(){return wd}}),wd.nextIndex=function(a,b){return b++,b>=a.length&&(b=0),b},wd.computeC=function(a,b,c){return a*c.y-b*c.x},wd.getMinimumDiameter=function(a){return new wd(a).getDiameter()},wd.getMinimumRectangle=function(a){return new wd(a).getMinimumRectangle()},wd.computeSegmentForLine=function(a,b,c){var d=null,e=null;return Math.abs(b)>Math.abs(a)?(d=new l(0,c/b),e=new l(1,c/b-a/b)):(d=new l(c/a,0),e=new l(c/a-b/a,1)),new ib(d,e)};var lg=Object.freeze({Centroid:kb,CGAlgorithms:hb,ConvexHull:ob,InteriorPointArea:cd,InteriorPointLine:ed,InteriorPointPoint:fd,RobustLineIntersector:eb,MCPointInRing:rd,MinimumBoundingCircle:vd,MinimumDiameter:wd});Wf(xd.prototype,{getResultGeometry:function(){return new yd(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(a){if(a<=0)throw new c("Tolerance must be positive");this.distanceTolerance=a},interfaces_:function(){return[]},getClass:function(){return xd}}),xd.densifyPoints=function(a,b,c){for(var d=new ib,e=new u,f=0;f<a.length-1;f++){d.p0=a[f],d.p1=a[f+1],e.add(d.p0,!1);var g=d.getLength(),h=Math.trunc(g/b)+1;if(h>1)for(var i=g/h,j=1;j<h;j++){var k=j*i/g,l=d.pointAlong(k);c.makePrecise(l),e.add(l,!1)}}return e.add(a[a.length-1],!1),e.toCoordinateArray()},xd.densify=function(a,b){var c=new xd(a);return c.setDistanceTolerance(b),c.getResultGeometry()},Xf(yd,qb),Wf(yd.prototype,{transformMultiPolygon:function(a,b){var c=qb.prototype.transformMultiPolygon.call(this,a,b);return this.createValidArea(c)},transformPolygon:function(a,b){var c=qb.prototype.transformPolygon.call(this,a,b);return b instanceof Ca?c:this.createValidArea(c)},transformCoordinates:function(a,b){var c=a.toCoordinateArray(),d=xd.densifyPoints(c,this.distanceTolerance,b.getPrecisionModel());return b instanceof va&&1===d.length&&(d=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(d)},createValidArea:function(a){return a.buffer(0)},interfaces_:function(){return[]},getClass:function(){return yd}}),xd.DensifyTransformer=yd;var mg=Object.freeze({Densifier:xd});Wf(zd.prototype,{find:function(a){var b=this;do{if(null===b)return null;if(b.dest().equals2D(a))return b;b=b.oNext()}while(b!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(a){if(this.oNext()===this)return this.insertAfter(a),null;var b=this.compareTo(a),c=this;do{var d=c.oNext(),e=d.compareTo(a);if(e!==b||d===this)return c.insertAfter(a),null;c=d}while(c!==this);k.shouldNeverReachHere()},insertAfter:function(a){k.equals(this._orig,a.orig());var b=this.oNext();this._sym.setNext(a),a.sym().setNext(b)},degree:function a(){var a=0,b=this;do{a++,b=b.oNext()}while(b!==this);return a},equals:function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];return this._orig.equals2D(a)&&this._sym._orig.equals(b)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(a){var b=this.deltaX(),c=this.deltaY(),d=a.deltaX(),e=a.deltaY();if(b===d&&c===e)return 0;var f=Xb.quadrant(b,c),g=Xb.quadrant(d,e);return f>g?1:f<g?-1:hb.computeOrientation(a._orig,a.dest(),this.dest())},prevNode:function(){for(var a=this;2===a.degree();)if(a=a.prev(),a===this)return null;return a},compareTo:function(a){var b=a,c=this.compareAngularDirection(b);return c},next:function(){return this._next},setSym:function(a){this._sym=a},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(a){this._next=a},init:function(a){this.setSym(a),a.setSym(this),this.setNext(a),a.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return zd}}),zd.init=function(a,b){if(null!==a._sym||null!==b._sym||null!==a._next||null!==b._next)throw new IllegalStateException("Edges are already initialized");return a.init(b),a},zd.create=function(a,b){var c=new zd(a),d=new zd(b);return c.init(d),c},Xf(Ad,zd),Wf(Ad.prototype,{mark:function(){this._isMarked=!0},setMark:function(a){this._isMarked=a},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return Ad}}),Ad.setMarkBoth=function(a,b){a.setMark(b),a.sym().setMark(b)},Ad.isMarked=function(a){return a.isMarked()},Ad.setMark=function(a,b){a.setMark(b)},Ad.markBoth=function(a){a.mark(),a.sym().mark()},Ad.mark=function(a){a.mark()},Wf(Bd.prototype,{insert:function(a,b,c){var d=this.create(a,b);null!==c?c.insert(d):this.vertexMap.put(a,d);var e=this.vertexMap.get(b);return null!==e?e.insert(d.sym()):this.vertexMap.put(b,d.sym()),d},create:function(a,b){var c=this.createEdge(a),d=this.createEdge(b);return zd.init(c,d),c},createEdge:function(a){return new zd(a)},addEdge:function(a,b){if(!Bd.isValidEdge(a,b))return null;var c=this.vertexMap.get(a),d=null;if(null!==c&&(d=c.find(b)),null!==d)return d;var e=this.insert(a,b,c);return e},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(a,b){var c=this.vertexMap.get(a);return null===c?null:c.find(b)},interfaces_:function(){return[]},getClass:function(){return Bd}}),Bd.isValidEdge=function(a,b){var c=b.compareTo(a);return 0!==c},Xf(Cd,Ad),Wf(Cd.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return Cd}}),Xf(Dd,Bd),Wf(Dd.prototype,{createEdge:function(a){return new Cd(a)},interfaces_:function(){return[]},getClass:function(){return Dd}}),Wf(Ed.prototype,{addLine:function(a){this.lines.add(this.factory.createLineString(a.toCoordinateArray()))},updateRingStartEdge:function(a){return a.isStart()||(a=a.sym(),a.isStart())?null===this.ringStartEdge?(this.ringStartEdge=a,null):void(a.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=a)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(a){var b=a.prevNode();null===b&&(b=a),this.stackEdges(b),this.buildLines()},buildRing:function(a){var b=new u,c=a;for(b.add(c.orig().copy(),!1);2===c.sym().degree();){var d=c.next();if(d===a)break;b.add(d.orig().copy(),!1),c=d}b.add(c.dest().copy(),!1),this.addLine(b)},buildLine:function(a){var b=new u,c=a;for(this.ringStartEdge=null,Ad.markBoth(c),b.add(c.orig().copy(),!1);2===c.sym().degree();){this.updateRingStartEdge(c);var d=c.next();if(d===a)return this.buildRing(this.ringStartEdge),null;b.add(d.orig().copy(),!1),c=d,Ad.markBoth(c)}b.add(c.dest().copy(),!1),this.stackEdges(c.sym()),this.addLine(b)},stackEdges:function(a){var b=a;do{Ad.isMarked(b)||this.nodeEdgeStack.add(b),b=b.oNext()}while(b!==a)},computeResult:function(){for(var a=this.graph.getVertexEdges(),b=a.iterator();b.hasNext();){var c=b.next();Ad.isMarked(c)||this.process(c)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var a=this.nodeEdgeStack.pop();Ad.isMarked(a)||this.buildLine(a)}},add:function(){if(arguments[0]instanceof K){var a=arguments[0];a.apply({interfaces_:function(){return[J]},filter:function(a){a instanceof va&&this.add(a)}})}else if(Zf(arguments[0],o))for(var b=arguments[0],c=b.iterator();c.hasNext();){var d=c.next();this.add(d)}else if(arguments[0]instanceof va){var e=arguments[0];null===this.factory&&(this.factory=e.getFactory());for(var f=e.getCoordinateSequence(),g=!1,c=1;c<f.size();c++){var h=this.graph.addEdge(f.getCoordinate(c-1),f.getCoordinate(c));null!==h&&(g||(h.setStart(),g=!0))}}},interfaces_:function(){return[]},getClass:function(){return Ed}}),Ed.dissolve=function(a){var b=new Ed;return b.add(a),b.getResult()};var ng=Object.freeze({LineDissolver:Ed}),og=Object.freeze({GeometryGraph:Xc});Wf(Fd.prototype,{hasChildren:function(){for(var a=0;a<4;a++)if(null!==this.subnode[a])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(a){a.addAll(this.items);for(var b=0;b<4;b++)null!==this.subnode[b]&&this.subnode[b].addAllItems(a);return a},getNodeCount:function(){for(var a=0,b=0;b<4;b++)null!==this.subnode[b]&&(a+=this.subnode[b].size());return a+1},size:function(){for(var a=0,b=0;b<4;b++)null!==this.subnode[b]&&(a+=this.subnode[b].size());return a+this.items.size()},addAllItemsFromOverlapping:function(a,b){if(!this.isSearchMatch(a))return null;b.addAll(this.items);for(var c=0;c<4;c++)null!==this.subnode[c]&&this.subnode[c].addAllItemsFromOverlapping(a,b)},visitItems:function(a,b){for(var c=this.items.iterator();c.hasNext();)b.visitItem(c.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(a,b){if(!this.isSearchMatch(a))return!1;for(var c=!1,d=0;d<4;d++)if(null!==this.subnode[d]&&(c=this.subnode[d].remove(a,b))){this.subnode[d].isPrunable()&&(this.subnode[d]=null);break}return c?c:c=this.items.remove(b)},visit:function(a,b){if(!this.isSearchMatch(a))return null;this.visitItems(a,b);for(var c=0;c<4;c++)null!==this.subnode[c]&&this.subnode[c].visit(a,b)},getItems:function(){return this.items},depth:function(){for(var a=0,b=0;b<4;b++)if(null!==this.subnode[b]){var c=this.subnode[b].depth();c>a&&(a=c)}return a+1},isEmpty:function a(){var a=!0;this.items.isEmpty()||(a=!1);for(var b=0;b<4;b++)null!==this.subnode[b]&&(this.subnode[b].isEmpty()||(a=!1));return a},add:function(a){this.items.add(a)},interfaces_:function(){return[h]},getClass:function(){return Fd}}),Fd.getSubnodeIndex=function(a,b,c){var d=-1;return a.getMinX()>=b&&(a.getMinY()>=c&&(d=3),a.getMaxY()<=c&&(d=1)),a.getMaxX()<=b&&(a.getMinY()>=c&&(d=2),a.getMaxY()<=c&&(d=0)),d},Wf(Gd.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var a=arguments[0];for(this.level=Gd.computeQuadLevel(a),this.env=new v,this.computeKey(this.level,a);!this.env.contains(a);)this.level+=1,this.computeKey(this.level,a)}else if(2===arguments.length){var b=arguments[0],c=arguments[1],d=jd.powerOf2(b);this.pt.x=Math.floor(c.getMinX()/d)*d,this.pt.y=Math.floor(c.getMinY()/d)*d,this.env.init(this.pt.x,this.pt.x+d,this.pt.y,this.pt.y+d)}},getEnvelope:function(){return this.env},getCentre:function(){return new l((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Gd}}),Gd.computeQuadLevel=function(a){var b=a.getWidth(),c=a.getHeight(),d=b>c?b:c,e=jd.exponent(d)+1;return e},Xf(Hd,Fd),Wf(Hd.prototype,{find:function(a){var b=Fd.getSubnodeIndex(a,this.centrex,this.centrey);if(b===-1)return this;if(null!==this.subnode[b]){var c=this.subnode[b];return c.find(a)}return this},isSearchMatch:function(a){return this.env.intersects(a)},getSubnode:function(a){return null===this.subnode[a]&&(this.subnode[a]=this.createSubnode(a)),this.subnode[a]},getEnvelope:function(){return this.env},getNode:function(a){var b=Fd.getSubnodeIndex(a,this.centrex,this.centrey);if(b!==-1){var c=this.getSubnode(b);return c.getNode(a)}return this},createSubnode:function(a){var b=0,c=0,d=0,e=0;switch(a){case 0:b=this.env.getMinX(),c=this.centrex,d=this.env.getMinY(),e=this.centrey;break;case 1:b=this.centrex,c=this.env.getMaxX(),d=this.env.getMinY(),e=this.centrey;break;case 2:b=this.env.getMinX(),c=this.centrex,d=this.centrey,e=this.env.getMaxY();break;case 3:b=this.centrex,c=this.env.getMaxX(),d=this.centrey,e=this.env.getMaxY()}var f=new v(b,c,d,e),g=new Hd(f,this.level-1);return g},insertNode:function(a){k.isTrue(null===this.env||this.env.contains(a.env));var b=Fd.getSubnodeIndex(a.env,this.centrex,this.centrey);if(a.level===this.level-1)this.subnode[b]=a;else{var c=this.createSubnode(b);c.insertNode(a),this.subnode[b]=c}},interfaces_:function(){return[]},getClass:function(){return Hd}}),Hd.createNode=function(a){var b=new Gd(a),c=new Hd(b.getEnvelope(),b.getLevel());return c},Hd.createExpanded=function(a,b){var c=new v(b);null!==a&&c.expandToInclude(a.env);var d=Hd.createNode(c);return null!==a&&d.insertNode(a),d},Xf(Id,Fd),Wf(Id.prototype,{insert:function(a,b){var c=Fd.getSubnodeIndex(a,Id.origin.x,Id.origin.y);if(c===-1)return this.add(b),null;var d=this.subnode[c];if(null===d||!d.getEnvelope().contains(a)){var e=Hd.createExpanded(d,a);this.subnode[c]=e}this.insertContained(this.subnode[c],a,b)},isSearchMatch:function(a){return!0},insertContained:function(a,b,c){k.isTrue(a.getEnvelope().contains(b));var d=nd.isZeroWidth(b.getMinX(),b.getMaxX()),e=nd.isZeroWidth(b.getMinY(),b.getMaxY()),f=null;f=d||e?a.find(b):a.getNode(b),f.add(c)},interfaces_:function(){return[]},getClass:function(){return Id}}),Id.origin=new l(0,0),Wf(Jd.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(a,b){this.collectStats(a);var c=Jd.ensureExtent(a,this.minExtent);this.root.insert(c,b)},query:function(){if(1===arguments.length){var a=arguments[0],b=new Nc;return this.query(a,b),b.getItems()}if(2===arguments.length){var c=arguments[0],d=arguments[1];this.root.visit(c,d)}},queryAll:function(){var a=new t;return this.root.addAllItems(a),a},remove:function(a,b){var c=Jd.ensureExtent(a,this.minExtent);return this.root.remove(c,b)},collectStats:function(a){var b=a.getWidth();b<this.minExtent&&b>0&&(this.minExtent=b);var c=a.getHeight();c<this.minExtent&&c>0&&(this.minExtent=c)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[Hb,h]},getClass:function(){return Jd}}),Jd.ensureExtent=function(a,b){var c=a.getMinX(),d=a.getMaxX(),e=a.getMinY(),f=a.getMaxY();return c!==d&&e!==f?a:(c===d&&(c-=b/2,d=c+b/2),e===f&&(e-=b/2,f=e+b/2),new v(c,d,e,f))},Jd.serialVersionUID=-0x678b60c967a25400;var pg=Object.freeze({Quadtree:Jd}),qg=Object.freeze({STRtree:Nb}),rg=Object.freeze({quadtree:pg,strtree:qg}),sg=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];Wf(Kd.prototype,{read:function(a){var b=void 0;b="string"==typeof a?JSON.parse(a):a;var c=b.type;if(!tg[c])throw new Error("Unknown GeoJSON type: "+b.type);return sg.indexOf(c)!==-1?tg[c].apply(this,[b.coordinates]):"GeometryCollection"===c?tg[c].apply(this,[b.geometries]):tg[c].apply(this,[b])},write:function(a){var b=a.getGeometryType();if(!ug[b])throw new Error("Geometry is not supported");return ug[b].apply(this,[a])}});var tg={Feature:function(a){var b={};for(var c in a)b[c]=a[c];if(a.geometry){var d=a.geometry.type;if(!tg[d])throw new Error("Unknown GeoJSON type: "+a.type);b.geometry=this.read(a.geometry)}return a.bbox&&(b.bbox=tg.bbox.apply(this,[a.bbox])),b},FeatureCollection:function(a){var b={};if(a.features){b.features=[];for(var c=0;c<a.features.length;++c)b.features.push(this.read(a.features[c]))}return a.bbox&&(b.bbox=this.parse.bbox.apply(this,[a.bbox])),b},coordinates:function a(b){for(var a=[],c=0;c<b.length;++c){var d=b[c];a.push(new l(d[0],d[1]))}return a},bbox:function(a){return this.geometryFactory.createLinearRing([new l(a[0],a[1]),new l(a[2],a[1]),new l(a[2],a[3]),new l(a[0],a[3]),new l(a[0],a[1])])},Point:function(a){var b=new l(a[0],a[1]);return this.geometryFactory.createPoint(b)},MultiPoint:function(a){for(var b=[],c=0;c<a.length;++c)b.push(tg.Point.apply(this,[a[c]]));return this.geometryFactory.createMultiPoint(b)},LineString:function(a){var b=tg.coordinates.apply(this,[a]);return this.geometryFactory.createLineString(b)},MultiLineString:function(a){
for(var b=[],c=0;c<a.length;++c)b.push(tg.LineString.apply(this,[a[c]]));return this.geometryFactory.createMultiLineString(b)},Polygon:function(a){for(var b=tg.coordinates.apply(this,[a[0]]),c=this.geometryFactory.createLinearRing(b),d=[],e=1;e<a.length;++e){var f=a[e],g=tg.coordinates.apply(this,[f]),h=this.geometryFactory.createLinearRing(g);d.push(h)}return this.geometryFactory.createPolygon(c,d)},MultiPolygon:function(a){for(var b=[],c=0;c<a.length;++c){var d=a[c];b.push(tg.Polygon.apply(this,[d]))}return this.geometryFactory.createMultiPolygon(b)},GeometryCollection:function(a){for(var b=[],c=0;c<a.length;++c){var d=a[c];b.push(this.read(d))}return this.geometryFactory.createGeometryCollection(b)}},ug={coordinate:function(a){return[a.x,a.y]},Point:function(a){var b=ug.coordinate.apply(this,[a.getCoordinate()]);return{type:"Point",coordinates:b}},MultiPoint:function(a){for(var b=[],c=0;c<a.geometries.length;++c){var d=a.geometries[c],e=ug.Point.apply(this,[d]);b.push(e.coordinates)}return{type:"MultiPoint",coordinates:b}},LineString:function(a){for(var b=[],c=a.getCoordinates(),d=0;d<c.length;++d){var e=c[d];b.push(ug.coordinate.apply(this,[e]))}return{type:"LineString",coordinates:b}},MultiLineString:function(a){for(var b=[],c=0;c<a.geometries.length;++c){var d=a.geometries[c],e=ug.LineString.apply(this,[d]);b.push(e.coordinates)}return{type:"MultiLineString",coordinates:b}},Polygon:function(a){var b=[],c=ug.LineString.apply(this,[a.shell]);b.push(c.coordinates);for(var d=0;d<a.holes.length;++d){var e=a.holes[d],f=ug.LineString.apply(this,[e]);b.push(f.coordinates)}return{type:"Polygon",coordinates:b}},MultiPolygon:function(a){for(var b=[],c=0;c<a.geometries.length;++c){var d=a.geometries[c],e=ug.Polygon.apply(this,[d]);b.push(e.coordinates)}return{type:"MultiPolygon",coordinates:b}},GeometryCollection:function(a){for(var b=[],c=0;c<a.geometries.length;++c){var d=a.geometries[c],e=d.getGeometryType();b.push(ug[e].apply(this,[d]))}return{type:"GeometryCollection",geometries:b}}};Wf(Ld.prototype,{read:function(a){var b=this.parser.read(a);return this.precisionModel.getType()===$a.FIXED&&this.reducePrecision(b),b},reducePrecision:function(a){var b,c;if(a.coordinate)this.precisionModel.makePrecise(a.coordinate);else if(a.points)for(b=0,c=a.points.length;b<c;b++)this.precisionModel.makePrecise(a.points[b]);else if(a.geometries)for(b=0,c=a.geometries.length;b<c;b++)this.reducePrecision(a.geometries[b])}}),Wf(Md.prototype,{write:function(a){return this.parser.write(a)}}),Wf(Nd.prototype,{read:function(a){var b=this.parser.read(a);return this.precisionModel.getType()===$a.FIXED&&this.reducePrecision(b),b},reducePrecision:function(a){if(a.coordinate)this.precisionModel.makePrecise(a.coordinate);else if(a.points)for(var b=0,c=a.points.coordinates.length;b<c;b++)this.precisionModel.makePrecise(a.points.coordinates[b]);else if(a.geometries)for(var d=0,e=a.geometries.length;d<e;d++)this.reducePrecision(a.geometries[d])}}),Wf(Pd.prototype,{read:function(a){var b=this.ol;return a instanceof b.geom.Point?this.convertFromPoint(a):a instanceof b.geom.LineString?this.convertFromLineString(a):a instanceof b.geom.LinearRing?this.convertFromLinearRing(a):a instanceof b.geom.Polygon?this.convertFromPolygon(a):a instanceof b.geom.MultiPoint?this.convertFromMultiPoint(a):a instanceof b.geom.MultiLineString?this.convertFromMultiLineString(a):a instanceof b.geom.MultiPolygon?this.convertFromMultiPolygon(a):a instanceof b.geom.GeometryCollection?this.convertFromCollection(a):void 0},convertFromPoint:function(a){var b=a.getCoordinates();return this.geometryFactory.createPoint(new l(b[0],b[1]))},convertFromLineString:function(a){return this.geometryFactory.createLineString(a.getCoordinates().map(function(a){return new l(a[0],a[1])}))},convertFromLinearRing:function(a){return this.geometryFactory.createLinearRing(a.getCoordinates().map(function(a){return new l(a[0],a[1])}))},convertFromPolygon:function(a){for(var b=a.getLinearRings(),c=null,d=[],e=0;e<b.length;e++){var f=this.convertFromLinearRing(b[e]);0===e?c=f:d.push(f)}return this.geometryFactory.createPolygon(c,d)},convertFromMultiPoint:function(a){var b=a.getPoints().map(function(a){return this.convertFromPoint(a)},this);return this.geometryFactory.createMultiPoint(b)},convertFromMultiLineString:function(a){var b=a.getLineStrings().map(function(a){return this.convertFromLineString(a)},this);return this.geometryFactory.createMultiLineString(b)},convertFromMultiPolygon:function(a){var b=a.getPolygons().map(function(a){return this.convertFromPolygon(a)},this);return this.geometryFactory.createMultiPolygon(b)},convertFromCollection:function(a){var b=a.getGeometries().map(function(a){return this.read(a)},this);return this.geometryFactory.createGeometryCollection(b)},write:function(a){return"Point"===a.getGeometryType()?this.convertToPoint(a.getCoordinate()):"LineString"===a.getGeometryType()?this.convertToLineString(a):"LinearRing"===a.getGeometryType()?this.convertToLinearRing(a):"Polygon"===a.getGeometryType()?this.convertToPolygon(a):"MultiPoint"===a.getGeometryType()?this.convertToMultiPoint(a):"MultiLineString"===a.getGeometryType()?this.convertToMultiLineString(a):"MultiPolygon"===a.getGeometryType()?this.convertToMultiPolygon(a):"GeometryCollection"===a.getGeometryType()?this.convertToCollection(a):void 0},convertToPoint:function(a){return new this.ol.geom.Point([a.x,a.y])},convertToLineString:function(a){var b=a.points.coordinates.map(Od);return new this.ol.geom.LineString(b)},convertToLinearRing:function(a){var b=a.points.coordinates.map(Od);return new this.ol.geom.LinearRing(b)},convertToPolygon:function(a){for(var b=[a.shell.points.coordinates.map(Od)],c=0;c<a.holes.length;c++)b.push(a.holes[c].points.coordinates.map(Od));return new this.ol.geom.Polygon(b)},convertToMultiPoint:function(a){return new this.ol.geom.MultiPoint(a.getCoordinates().map(Od))},convertToMultiLineString:function(a){for(var b=[],c=0;c<a.geometries.length;c++)b.push(this.convertToLineString(a.geometries[c]).getCoordinates());return new this.ol.geom.MultiLineString(b)},convertToMultiPolygon:function(a){for(var b=[],c=0;c<a.geometries.length;c++)b.push(this.convertToPolygon(a.geometries[c]).getCoordinates());return new this.ol.geom.MultiPolygon(b)},convertToCollection:function(a){for(var b=[],c=0;c<a.geometries.length;c++){var d=a.geometries[c];b.push(this.write(d))}return new this.ol.geom.GeometryCollection(b)}});var vg=Object.freeze({GeoJSONReader:Ld,GeoJSONWriter:Md,OL3Parser:Pd,WKTReader:Nd,WKTWriter:cb});Wf(Qd.prototype,{rescale:function(){if(Zf(arguments[0],o))for(var a=arguments[0],b=a.iterator();b.hasNext();){var c=b.next();this.rescale(c.getCoordinates())}else if(arguments[0]instanceof Array){var d=arguments[0],e=null,f=null;2===d.length&&(e=new l(d[0]),f=new l(d[1]));for(var b=0;b<d.length;b++)d[b].x=d[b].x/this.scaleFactor+this.offsetX,d[b].y=d[b].y/this.scaleFactor+this.offsetY;2===d.length&&d[0].equals2D(d[1])&&G.out.println(d)}},scale:function(){if(Zf(arguments[0],o)){for(var a=arguments[0],b=new t,c=a.iterator();c.hasNext();){var d=c.next();b.add(new Ub(this.scale(d.getCoordinates()),d.getData()))}return b}if(arguments[0]instanceof Array){for(var e=arguments[0],f=new Array(e.length).fill(null),c=0;c<e.length;c++)f[c]=new l(Math.round((e[c].x-this.offsetX)*this.scaleFactor),Math.round((e[c].y-this.offsetY)*this.scaleFactor),e[c].z);var g=R.removeRepeatedPoints(f);return g}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var a=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(a),a},computeNodes:function(a){var b=a;this.isScaled&&(b=this.scale(a)),this.noder.computeNodes(b)},interfaces_:function(){return[Zb]},getClass:function(){return Qd}});var wg=Object.freeze({MCIndexNoder:_b,ScaledNoder:Qd,SegmentString:Bb});Wf(Rd.prototype,{isSimpleMultiPoint:function(a){if(a.isEmpty())return!0;for(var b=new ea,c=0;c<a.getNumGeometries();c++){var d=a.getGeometryN(c),e=d.getCoordinate();if(b.contains(e))return this.nonSimpleLocation=e,!1;b.add(e)}return!0},isSimplePolygonal:function(a){for(var b=Mc.getLines(a),c=b.iterator();c.hasNext();){var d=c.next();if(!this.isSimpleLinearGeometry(d))return!1}return!0},hasClosedEndpointIntersection:function(a){for(var b=new ba,c=a.getEdgeIterator();c.hasNext();){var d=c.next(),e=(d.getMaximumSegmentIndex(),d.isClosed()),f=d.getCoordinate(0);this.addEndpoint(b,f,e);var g=d.getCoordinate(d.getNumPoints()-1);this.addEndpoint(b,g,e)}for(var c=b.values().iterator();c.hasNext();){var h=c.next();if(h.isClosed&&2!==h.degree)return this.nonSimpleLocation=h.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(a){if(a.isEmpty())return!0;var b=new Xc(0,a),c=new eb,d=b.computeSelfNodes(c,!0);return!d.hasIntersection()||(d.hasProperIntersection()?(this.nonSimpleLocation=d.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(b)&&(!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(b)))},hasNonEndpointIntersection:function(a){for(var b=a.getEdgeIterator();b.hasNext();)for(var c=b.next(),d=c.getMaximumSegmentIndex(),e=c.getEdgeIntersectionList().iterator();e.hasNext();){var f=e.next();if(!f.isEndPoint(d))return this.nonSimpleLocation=f.getCoordinate(),!0}return!1},addEndpoint:function(a,b,c){var d=a.get(b);null===d&&(d=new Sd(b),a.put(b,d)),d.addEndpoint(c)},computeSimple:function(a){return this.nonSimpleLocation=null,!!a.isEmpty()||(a instanceof va?this.isSimpleLinearGeometry(a):a instanceof ka?this.isSimpleLinearGeometry(a):a instanceof Aa?this.isSimpleMultiPoint(a):Zf(a,ya)?this.isSimplePolygonal(a):!(a instanceof ja)||this.isSimpleGeometryCollection(a))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(a){for(var b=0;b<a.getNumGeometries();b++){var c=a.getGeometryN(b);if(!this.computeSimple(c))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Rd}}),Wf(Sd.prototype,{addEndpoint:function(a){this.degree++,this.isClosed|=a},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Sd}}),Rd.EndpointInfo=Sd,Wf(Td.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(a){this.quadrantSegments=a,0===this.quadrantSegments&&(this.joinStyle=Td.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Td.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),a<=0&&(this.quadrantSegments=1),this.joinStyle!==Td.JOIN_ROUND&&(this.quadrantSegments=Td.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(a){this.joinStyle=a},setSimplifyFactor:function(a){this.simplifyFactor=a<0?0:a},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(a){this.endCapStyle=a},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(a){this.mitreLimit=a},setSingleSided:function(a){this._isSingleSided=a},interfaces_:function(){return[]},getClass:function(){return Td}}),Td.bufferDistanceError=function(a){var b=Math.PI/2/a;return 1-Math.cos(b/2)},Td.CAP_ROUND=1,Td.CAP_FLAT=2,Td.CAP_SQUARE=3,Td.JOIN_ROUND=1,Td.JOIN_MITRE=2,Td.JOIN_BEVEL=3,Td.DEFAULT_QUADRANT_SEGMENTS=8,Td.DEFAULT_MITRE_LIMIT=5,Td.DEFAULT_SIMPLIFY_FACTOR=.01,Wf(Ud.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(a,b){var c=this.getRightmostSideOfSegment(a,b);return c<0&&(c=this.getRightmostSideOfSegment(a,b-1)),c<0&&(this.minCoord=null,this.checkForRightmostCoordinate(a)),c},findRightmostEdgeAtVertex:function(){var a=this.minDe.getEdge().getCoordinates();k.isTrue(this.minIndex>0&&this.minIndex<a.length,"rightmost point expected to be interior vertex of edge");var b=a[this.minIndex-1],c=a[this.minIndex+1],d=hb.computeOrientation(this.minCoord,c,b),e=!1;b.y<this.minCoord.y&&c.y<this.minCoord.y&&d===hb.COUNTERCLOCKWISE?e=!0:b.y>this.minCoord.y&&c.y>this.minCoord.y&&d===hb.CLOCKWISE&&(e=!0),e&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(a,b){var c=a.getEdge(),d=c.getCoordinates();if(b<0||b+1>=d.length)return-1;if(d[b].y===d[b+1].y)return-1;var e=hc.LEFT;return d[b].y<d[b+1].y&&(e=hc.RIGHT),e},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(a){for(var b=a.getEdge().getCoordinates(),c=0;c<b.length-1;c++)(null===this.minCoord||b[c].x>this.minCoord.x)&&(this.minDe=a,this.minIndex=c,this.minCoord=b[c])},findRightmostEdgeAtNode:function(){var a=this.minDe.getNode(),b=a.getEdges();this.minDe=b.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next();c.isForward()&&this.checkForRightmostCoordinate(c)}k.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var d=this.getRightmostSide(this.minDe,this.minIndex);d===hc.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Ud}}),Vd.prototype.addLast=function(a){this.array_.push(a)},Vd.prototype.removeFirst=function(){return this.array_.shift()},Vd.prototype.isEmpty=function(){return 0===this.array_.length},Wf(Wd.prototype,{clearVisitedEdges:function(){for(var a=this.dirEdgeList.iterator();a.hasNext();){var b=a.next();b.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(a){for(var b=null,c=a.getEdges().iterator();c.hasNext();){var d=c.next();if(d.isVisited()||d.getSym().isVisited()){b=d;break}}if(null===b)throw new bc("unable to find edge to compute depths at "+a.getCoordinate());a.getEdges().computeDepths(b);for(var c=a.getEdges().iterator();c.hasNext();){var d=c.next();d.setVisited(!0),this.copySymDepths(d)}},computeDepth:function(a){this.clearVisitedEdges();var b=this.finder.getEdge();b.getNode(),b.getLabel();b.setEdgeDepths(hc.RIGHT,a),this.copySymDepths(b),this.computeDepths(b)},create:function(a){this.addReachable(a),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var a=this.dirEdgeList.iterator();a.hasNext();){var b=a.next();b.getDepth(hc.RIGHT)>=1&&b.getDepth(hc.LEFT)<=0&&!b.isInteriorAreaEdge()&&b.setInResult(!0)}},computeDepths:function(a){var b=new X,c=new Vd,d=a.getNode();for(c.addLast(d),b.add(d),a.setVisited(!0);!c.isEmpty();){var e=c.removeFirst();b.add(e),this.computeNodeDepth(e);for(var f=e.getEdges().iterator();f.hasNext();){var g=f.next(),h=g.getSym();if(!h.isVisited()){var i=h.getNode();b.contains(i)||(c.addLast(i),b.add(i))}}}},compareTo:function(a){var b=a;return this.rightMostCoord.x<b.rightMostCoord.x?-1:this.rightMostCoord.x>b.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var a=new v,b=this.dirEdgeList.iterator();b.hasNext();)for(var c=b.next(),d=c.getEdge().getCoordinates(),e=0;e<d.length-1;e++)a.expandToInclude(d[e]);this.env=a}return this.env},addReachable:function(a){var b=new mb;for(b.add(a);!b.empty();){var c=b.pop();this.add(c,b)}},copySymDepths:function(a){var b=a.getSym();b.setDepth(hc.LEFT,a.getDepth(hc.RIGHT)),b.setDepth(hc.RIGHT,a.getDepth(hc.LEFT))},add:function(a,b){a.setVisited(!0),this.nodes.add(a);for(var c=a.getEdges().iterator();c.hasNext();){var d=c.next();this.dirEdgeList.add(d);var e=d.getSym(),f=e.getNode();f.isVisited()||b.push(f)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[e]},getClass:function(){return Wd}}),Wf(Xd.prototype,{isDeletable:function(a,b,c,d){var e=this.inputLine[a],f=this.inputLine[b],g=this.inputLine[c];return!!this.isConcave(e,f,g)&&(!!this.isShallow(e,f,g,d)&&this.isShallowSampled(e,f,a,c,d))},deleteShallowConcavities:function(){for(var a=1,b=(this.inputLine.length-1,this.findNextNonDeletedIndex(a)),c=this.findNextNonDeletedIndex(b),d=!1;c<this.inputLine.length;){var e=!1;this.isDeletable(a,b,c,this.distanceTol)&&(this.isDeleted[b]=Xd.DELETE,e=!0,d=!0),a=e?c:b,b=this.findNextNonDeletedIndex(a),c=this.findNextNonDeletedIndex(b)}return d},isShallowConcavity:function(a,b,c,d){var e=hb.computeOrientation(a,b,c),f=e===this.angleOrientation;if(!f)return!1;var g=hb.distancePointLine(b,a,c);return g<d},isShallowSampled:function(a,b,c,d,e){var f=Math.trunc((d-c)/Xd.NUM_PTS_TO_CHECK);f<=0&&(f=1);for(var g=c;g<d;g+=f)if(!this.isShallow(a,b,this.inputLine[g],e))return!1;return!0},isConcave:function a(b,c,d){var e=hb.computeOrientation(b,c,d),a=e===this.angleOrientation;return a},simplify:function(a){this.distanceTol=Math.abs(a),a<0&&(this.angleOrientation=hb.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var b=!1;do{b=this.deleteShallowConcavities()}while(b);return this.collapseLine()},findNextNonDeletedIndex:function(a){for(var b=a+1;b<this.inputLine.length&&this.isDeleted[b]===Xd.DELETE;)b++;return b},isShallow:function(a,b,c,d){var e=hb.distancePointLine(b,a,c);return e<d},collapseLine:function(){for(var a=new u,b=0;b<this.inputLine.length;b++)this.isDeleted[b]!==Xd.DELETE&&a.add(this.inputLine[b]);return a.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Xd}}),Xd.simplify=function(a,b){var c=new Xd(a);return c.simplify(b)},Xd.INIT=0,Xd.DELETE=1,Xd.KEEP=1,Xd.NUM_PTS_TO_CHECK=10,Wf(Yd.prototype,{getCoordinates:function(){var a=this.ptList.toArray(Yd.COORDINATE_ARRAY_TYPE);return a},setPrecisionModel:function(a){this.precisionModel=a},addPt:function(a){var b=new l(a);return this.precisionModel.makePrecise(b),this.isRedundant(b)?null:void this.ptList.add(b)},reverse:function(){},addPts:function(a,b){if(b)for(var c=0;c<a.length;c++)this.addPt(a[c]);else for(var c=a.length-1;c>=0;c--)this.addPt(a[c])},isRedundant:function(a){if(this.ptList.size()<1)return!1;var b=this.ptList.get(this.ptList.size()-1),c=a.distance(b);return c<this.minimimVertexDistance},toString:function(){var a=new ab,b=a.createLineString(this.getCoordinates());return b.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var a=new l(this.ptList.get(0)),b=this.ptList.get(this.ptList.size()-1),c=null;return this.ptList.size()>=2&&(c=this.ptList.get(this.ptList.size()-2)),a.equals(b)?null:void this.ptList.add(a)},setMinimumVertexDistance:function(a){this.minimimVertexDistance=a},interfaces_:function(){return[]},getClass:function(){return Yd}}),Yd.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),Wf(Zd.prototype,{addNextSegment:function(a,b){if(this.s0=this.s1,this.s1=this.s2,this.s2=a,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var c=hb.computeOrientation(this.s0,this.s1,this.s2),d=c===hb.CLOCKWISE&&this.side===hc.LEFT||c===hb.COUNTERCLOCKWISE&&this.side===hc.RIGHT;0===c?this.addCollinear(b):d?this.addOutsideTurn(c,b):this.addInsideTurn(c,b)},addLineEndCap:function(a,b){var c=new ib(a,b),d=new ib;this.computeOffsetSegment(c,hc.LEFT,this.distance,d);var e=new ib;this.computeOffsetSegment(c,hc.RIGHT,this.distance,e);var f=b.x-a.x,g=b.y-a.y,h=Math.atan2(g,f);switch(this.bufParams.getEndCapStyle()){case Td.CAP_ROUND:this.segList.addPt(d.p1),this.addFilletArc(b,h+Math.PI/2,h-Math.PI/2,hb.CLOCKWISE,this.distance),this.segList.addPt(e.p1);break;case Td.CAP_FLAT:this.segList.addPt(d.p1),this.segList.addPt(e.p1);break;case Td.CAP_SQUARE:var i=new l;i.x=Math.abs(this.distance)*Math.cos(h),i.y=Math.abs(this.distance)*Math.sin(h);var j=new l(d.p1.x+i.x,d.p1.y+i.y),k=new l(e.p1.x+i.x,e.p1.y+i.y);this.segList.addPt(j),this.segList.addPt(k)}},getCoordinates:function(){var a=this.segList.getCoordinates();return a},addMitreJoin:function(a,b,c,d){var e=!0,f=null;try{f=H.intersection(b.p0,b.p1,c.p0,c.p1);var g=d<=0?1:f.distance(a)/Math.abs(d);g>this.bufParams.getMitreLimit()&&(e=!1)}catch(a){if(!(a instanceof x))throw a;f=new l(0,0),e=!1}finally{}e?this.segList.addPt(f):this.addLimitedMitreJoin(b,c,d,this.bufParams.getMitreLimit())},addFilletCorner:function(a,b,c,d,e){var f=b.x-a.x,g=b.y-a.y,h=Math.atan2(g,f),i=c.x-a.x,j=c.y-a.y,k=Math.atan2(j,i);d===hb.CLOCKWISE?h<=k&&(h+=2*Math.PI):h>=k&&(h-=2*Math.PI),this.segList.addPt(b),this.addFilletArc(a,h,k,d,e),this.segList.addPt(c)},addOutsideTurn:function(a,b){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Zd.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Td.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Td.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(b&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,a,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(a){this.segList.addPt(new l(a.x+this.distance,a.y+this.distance)),this.segList.addPt(new l(a.x+this.distance,a.y-this.distance)),this.segList.addPt(new l(a.x-this.distance,a.y-this.distance)),this.segList.addPt(new l(a.x-this.distance,a.y+this.distance)),this.segList.closeRing()},addSegments:function(a,b){this.segList.addPts(a,b)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(a,b,c){this.s1=a,this.s2=b,this.side=c,this.seg1.setCoordinates(a,b),this.computeOffsetSegment(this.seg1,c,this.distance,this.offset1)},addLimitedMitreJoin:function(a,b,c,d){var e=this.seg0.p1,f=td.angle(e,this.seg0.p0),g=(td.angle(e,this.seg1.p1),td.angleBetweenOriented(this.seg0.p0,e,this.seg1.p1)),h=g/2,i=td.normalize(f+h),j=td.normalize(i+Math.PI),k=d*c,m=k*Math.abs(Math.sin(h)),n=c-m,o=e.x+k*Math.cos(j),p=e.y+k*Math.sin(j),q=new l(o,p),r=new ib(e,q),s=r.pointAlongOffset(1,n),t=r.pointAlongOffset(1,-n);this.side===hc.LEFT?(this.segList.addPt(s),this.segList.addPt(t)):(this.segList.addPt(t),this.segList.addPt(s))},computeOffsetSegment:function(a,b,c,d){var e=b===hc.LEFT?1:-1,f=a.p1.x-a.p0.x,g=a.p1.y-a.p0.y,h=Math.sqrt(f*f+g*g),i=e*c*f/h,j=e*c*g/h;d.p0.x=a.p0.x-j,d.p0.y=a.p0.y+i,d.p1.x=a.p1.x-j,d.p1.y=a.p1.y+i},addFilletArc:function(a,b,c,d,e){var f=d===hb.CLOCKWISE?-1:1,g=Math.abs(b-c),h=Math.trunc(g/this.filletAngleQuantum+.5);if(h<1)return null;var i=null,j=null;i=0,j=g/h;for(var k=i,m=new l;k<g;){var n=b+f*k;m.x=a.x+e*Math.cos(n),m.y=a.y+e*Math.sin(n),this.segList.addPt(m),k+=j}},addInsideTurn:function(a,b){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Zd.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var c=new l((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(c);var d=new l((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(d)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(a){var b=new l(a.x+this.distance,a.y);this.segList.addPt(b),this.addFilletArc(a,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(a,b){this.segList.addPt(a.p1),this.segList.addPt(b.p0)},init:function(a){this.distance=a,this.maxCurveSegmentError=a*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Yd,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(a*Zd.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(a){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var b=this.li.getIntersectionNum();b>=2&&(this.bufParams.getJoinStyle()===Td.JOIN_BEVEL||this.bufParams.getJoinStyle()===Td.JOIN_MITRE?(a&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,hb.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Zd}}),Zd.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Zd.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Zd.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Zd.MAX_CLOSING_SEG_LEN_FACTOR=80,Wf($d.prototype,{getOffsetCurve:function(a,b){if(this.distance=b,0===b)return null;var c=b<0,d=Math.abs(b),e=this.getSegGen(d);a.length<=1?this.computePointCurve(a[0],e):this.computeOffsetCurve(a,c,e);var f=e.getCoordinates();return c&&R.reverse(f),f},computeSingleSidedBufferCurve:function(a,b,c){var d=this.simplifyTolerance(this.distance);if(b){c.addSegments(a,!0);var e=Xd.simplify(a,-d),f=e.length-1;c.initSideSegments(e[f],e[f-1],hc.LEFT),c.addFirstSegment();for(var g=f-2;g>=0;g--)c.addNextSegment(e[g],!0)}else{c.addSegments(a,!1);var h=Xd.simplify(a,d),i=h.length-1;c.initSideSegments(h[0],h[1],hc.LEFT),c.addFirstSegment();for(var g=2;g<=i;g++)c.addNextSegment(h[g],!0)}c.addLastSegment(),c.closeRing()},computeRingBufferCurve:function(a,b,c){var d=this.simplifyTolerance(this.distance);b===hc.RIGHT&&(d=-d);var e=Xd.simplify(a,d),f=e.length-1;c.initSideSegments(e[f-1],e[0],b);for(var g=1;g<=f;g++){var h=1!==g;c.addNextSegment(e[g],h)}c.closeRing()},computeLineBufferCurve:function(a,b){var c=this.simplifyTolerance(this.distance),d=Xd.simplify(a,c),e=d.length-1;b.initSideSegments(d[0],d[1],hc.LEFT);for(var f=2;f<=e;f++)b.addNextSegment(d[f],!0);b.addLastSegment(),b.addLineEndCap(d[e-1],d[e]);var g=Xd.simplify(a,-c),h=g.length-1;b.initSideSegments(g[h],g[h-1],hc.LEFT);for(var f=h-2;f>=0;f--)b.addNextSegment(g[f],!0);b.addLastSegment(),b.addLineEndCap(g[1],g[0]),b.closeRing()},computePointCurve:function(a,b){switch(this.bufParams.getEndCapStyle()){case Td.CAP_ROUND:b.createCircle(a);break;case Td.CAP_SQUARE:b.createSquare(a)}},getLineCurve:function(a,b){if(this.distance=b,b<0&&!this.bufParams.isSingleSided())return null;if(0===b)return null;var c=Math.abs(b),d=this.getSegGen(c);if(a.length<=1)this.computePointCurve(a[0],d);else if(this.bufParams.isSingleSided()){var e=b<0;this.computeSingleSidedBufferCurve(a,e,d)}else this.computeLineBufferCurve(a,d);var f=d.getCoordinates();return f},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(a){return a*this.bufParams.getSimplifyFactor()},getRingCurve:function(a,b,c){if(this.distance=c,a.length<=2)return this.getLineCurve(a,c);if(0===c)return $d.copyCoordinates(a);var d=this.getSegGen(c);return this.computeRingBufferCurve(a,b,d),d.getCoordinates()},computeOffsetCurve:function(a,b,c){var d=this.simplifyTolerance(this.distance);if(b){var e=Xd.simplify(a,-d),f=e.length-1;c.initSideSegments(e[f],e[f-1],hc.LEFT),c.addFirstSegment();for(var g=f-2;g>=0;g--)c.addNextSegment(e[g],!0)}else{var h=Xd.simplify(a,d),i=h.length-1;c.initSideSegments(h[0],h[1],hc.LEFT),c.addFirstSegment();for(var g=2;g<=i;g++)c.addNextSegment(h[g],!0)}c.addLastSegment()},getSegGen:function(a){return new Zd(this.precisionModel,this.bufParams,a)},interfaces_:function(){return[]},getClass:function(){return $d}}),$d.copyCoordinates=function(a){for(var b=new Array(a.length).fill(null),c=0;c<b.length;c++)b[c]=new l(a[c]);return b},Wf(_d.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var a=arguments[0],b=new t,c=this.subgraphs.iterator();c.hasNext();){var d=c.next(),e=d.getEnvelope();a.y<e.getMinY()||a.y>e.getMaxY()||this.findStabbedSegments(a,d.getDirectedEdges(),b)}return b}if(3===arguments.length)if(Zf(arguments[2],q)&&arguments[0]instanceof l&&arguments[1]instanceof rc)for(var f=arguments[0],g=arguments[1],h=arguments[2],i=g.getEdge().getCoordinates(),c=0;c<i.length-1;c++){this.seg.p0=i[c],this.seg.p1=i[c+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var j=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(j<f.x||this.seg.isHorizontal()||f.y<this.seg.p0.y||f.y>this.seg.p1.y||hb.computeOrientation(this.seg.p0,this.seg.p1,f)===hb.RIGHT)){var k=g.getDepth(hc.LEFT);this.seg.p0.equals(i[c])||(k=g.getDepth(hc.RIGHT));var m=new ae(this.seg,k);h.add(m)}}else if(Zf(arguments[2],q)&&arguments[0]instanceof l&&Zf(arguments[1],q))for(var n=arguments[0],o=arguments[1],p=arguments[2],c=o.iterator();c.hasNext();){var r=c.next();r.isForward()&&this.findStabbedSegments(n,r,p)}},getDepth:function(a){var b=this.findStabbedSegments(a);if(0===b.size())return 0;var c=kg.min(b);return c.leftDepth},interfaces_:function(){return[]},getClass:function(){return _d}}),Wf(ae.prototype,{compareTo:function(a){var b=a;if(this.upwardSeg.minX()>=b.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=b.upwardSeg.minX())return-1;var c=this.upwardSeg.orientationIndex(b.upwardSeg);return 0!==c?c:(c=-1*b.upwardSeg.orientationIndex(this.upwardSeg),0!==c?c:this.upwardSeg.compareTo(b.upwardSeg))},compareX:function(a,b){var c=a.p0.compareTo(b.p0);return 0!==c?c:a.p1.compareTo(b.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[e]},getClass:function(){return ae}}),_d.DepthSegment=ae,Wf(be.prototype,{addPoint:function(a){if(this.distance<=0)return null;var b=a.getCoordinates(),c=this.curveBuilder.getLineCurve(b,this.distance);this.addCurve(c,y.EXTERIOR,y.INTERIOR)},addPolygon:function(a){var b=this.distance,c=hc.LEFT;this.distance<0&&(b=-this.distance,c=hc.RIGHT);var d=a.getExteriorRing(),e=R.removeRepeatedPoints(d.getCoordinates());if(this.distance<0&&this.isErodedCompletely(d,this.distance))return null;if(this.distance<=0&&e.length<3)return null;this.addPolygonRing(e,b,c,y.EXTERIOR,y.INTERIOR);for(var f=0;f<a.getNumInteriorRing();f++){var g=a.getInteriorRingN(f),h=R.removeRepeatedPoints(g.getCoordinates());this.distance>0&&this.isErodedCompletely(g,-this.distance)||this.addPolygonRing(h,b,hc.opposite(c),y.INTERIOR,y.EXTERIOR)}},isTriangleErodedCompletely:function(a,b){var c=new ud(a[0],a[1],a[2]),d=c.inCentre(),e=hb.distancePointLine(d,c.p0,c.p1);return e<Math.abs(b)},addLineString:function(a){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var b=R.removeRepeatedPoints(a.getCoordinates()),c=this.curveBuilder.getLineCurve(b,this.distance);this.addCurve(c,y.EXTERIOR,y.INTERIOR)},addCurve:function(a,b,c){if(null===a||a.length<2)return null;var d=new Ub(a,new jc(0,y.BOUNDARY,b,c));this.curveList.add(d)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(a,b,c,d,e){if(0===b&&a.length<Ba.MINIMUM_VALID_SIZE)return null;var f=d,g=e;a.length>=Ba.MINIMUM_VALID_SIZE&&hb.isCCW(a)&&(f=e,g=d,c=hc.opposite(c));var h=this.curveBuilder.getRingCurve(a,c,b);this.addCurve(h,f,g)},add:function(a){if(a.isEmpty())return null;if(a instanceof za)this.addPolygon(a);else if(a instanceof va)this.addLineString(a);else if(a instanceof xa)this.addPoint(a);else if(a instanceof Aa)this.addCollection(a);else if(a instanceof ka)this.addCollection(a);else if(a instanceof Ca)this.addCollection(a);else{if(!(a instanceof ja))throw new UnsupportedOperationException(a.getClass().getName());this.addCollection(a)}},isErodedCompletely:function(a,b){var c=a.getCoordinates();if(c.length<4)return b<0;if(4===c.length)return this.isTriangleErodedCompletely(c,b);var d=a.getEnvelopeInternal(),e=Math.min(d.getHeight(),d.getWidth());return b<0&&2*Math.abs(b)>e},addCollection:function(a){
for(var b=0;b<a.getNumGeometries();b++){var c=a.getGeometryN(b);this.add(c)}},interfaces_:function(){return[]},getClass:function(){return be}}),Wf(ce.prototype,{isTrivialIntersection:function(a,b,c,d){if(a===c&&1===this.li.getIntersectionNum()){if(ce.isAdjacentSegments(b,d))return!0;if(a.isClosed()){var e=a.size()-1;if(0===b&&d===e||0===d&&b===e)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(a,b,c,d){if(a===c&&b===d)return null;this.numTests++;var e=a.getCoordinates()[b],f=a.getCoordinates()[b+1],g=c.getCoordinates()[d],h=c.getCoordinates()[d+1];this.li.computeIntersection(e,f,g,h),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(a,b,c,d)||(this._hasIntersection=!0,a.addIntersections(this.li,b,0),c.addIntersections(this.li,d,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[cc]},getClass:function(){return ce}}),ce.isAdjacentSegments=function(a,b){return 1===Math.abs(a-b)},Wf(de.prototype,{setWorkingPrecisionModel:function(a){this.workingPrecisionModel=a},insertUniqueEdge:function(a){var b=this.edgeList.findEqualEdge(a);if(null!==b){var c=b.getLabel(),d=a.getLabel();b.isPointwiseEqual(a)||(d=new jc(a.getLabel()),d.flip()),c.merge(d);var e=de.depthDelta(d),f=b.getDepthDelta(),g=f+e;b.setDepthDelta(g)}else this.edgeList.add(a),a.setDepthDelta(de.depthDelta(a.getLabel()))},buildSubgraphs:function(a,b){for(var c=new t,d=a.iterator();d.hasNext();){var e=d.next(),f=e.getRightmostCoordinate(),g=new _d(c),h=g.getDepth(f);e.computeDepth(h),e.findResultEdges(),c.add(e),b.add(e.getDirectedEdges(),e.getNodes())}},createSubgraphs:function(a){for(var b=new t,c=a.getNodes().iterator();c.hasNext();){var d=c.next();if(!d.isVisited()){var e=new Wd;e.create(d),b.add(e)}}return kg.sort(b,kg.reverseOrder()),b},createEmptyResultGeometry:function(){var a=this.geomFact.createPolygon();return a},getNoder:function(a){if(null!==this.workingNoder)return this.workingNoder;var b=new _b,c=new eb;return c.setPrecisionModel(a),b.setSegmentIntersector(new ce(c)),b},buffer:function(a,b){var c=this.workingPrecisionModel;null===c&&(c=a.getPrecisionModel()),this.geomFact=a.getFactory();var d=new $d(c,this.bufParams),e=new be(a,b,d),f=e.getCurves();if(f.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(f,c),this.graph=new tc(new Bc),this.graph.addEdges(this.edgeList.getEdges());var g=this.createSubgraphs(this.graph),h=new uc(this.geomFact);this.buildSubgraphs(g,h);var i=h.getPolygons();if(i.size()<=0)return this.createEmptyResultGeometry();var j=this.geomFact.buildGeometry(i);return j},computeNodedEdges:function(a,b){var c=this.getNoder(b);c.computeNodes(a);for(var d=c.getNodedSubstrings(),e=d.iterator();e.hasNext();){var f=e.next(),g=f.getCoordinates();if(2!==g.length||!g[0].equals2D(g[1])){var h=f.getData(),i=new Wc(f.getCoordinates(),new jc(h));this.insertUniqueEdge(i)}}},setNoder:function(a){this.workingNoder=a},interfaces_:function(){return[]},getClass:function(){return de}}),de.depthDelta=function(a){var b=a.getLocation(0,hc.LEFT),c=a.getLocation(0,hc.RIGHT);return b===y.INTERIOR&&c===y.EXTERIOR?1:b===y.EXTERIOR&&c===y.INTERIOR?-1:0},de.convertSegStrings=function(a){for(var b=new ab,c=new t;a.hasNext();){var d=a.next(),e=b.createLineString(d.getCoordinates());c.add(e)}return b.buildGeometry(c)},Wf(ee.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(var a=this.segStrings.iterator();a.hasNext();){var b=a.next(),c=b.getCoordinates();this.checkEndPtVertexIntersections(c[0],this.segStrings),this.checkEndPtVertexIntersections(c[c.length-1],this.segStrings)}else if(2===arguments.length)for(var d=arguments[0],e=arguments[1],a=e.iterator();a.hasNext();)for(var b=a.next(),c=b.getCoordinates(),f=1;f<c.length-1;f++)if(c[f].equals(d))throw new i("found endpt/interior pt intersection at index "+f+" :pt "+d)},checkInteriorIntersections:function(){if(0===arguments.length)for(var a=this.segStrings.iterator();a.hasNext();)for(var b=a.next(),c=this.segStrings.iterator();c.hasNext();){var d=c.next();this.checkInteriorIntersections(b,d)}else if(2===arguments.length)for(var e=arguments[0],f=arguments[1],g=e.getCoordinates(),h=f.getCoordinates(),j=0;j<g.length-1;j++)for(var k=0;k<h.length-1;k++)this.checkInteriorIntersections(e,j,f,k);else if(4===arguments.length){var l=arguments[0],m=arguments[1],n=arguments[2],o=arguments[3];if(l===n&&m===o)return null;var p=l.getCoordinates()[m],q=l.getCoordinates()[m+1],r=n.getCoordinates()[o],s=n.getCoordinates()[o+1];if(this.li.computeIntersection(p,q,r,s),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,p,q)||this.hasInteriorIntersection(this.li,r,s)))throw new i("found non-noded intersection at "+p+"-"+q+" and "+r+"-"+s)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(var a=this.segStrings.iterator();a.hasNext();){var b=a.next();this.checkCollapses(b)}else if(1===arguments.length)for(var c=arguments[0],d=c.getCoordinates(),a=0;a<d.length-2;a++)this.checkCollapse(d[a],d[a+1],d[a+2])},hasInteriorIntersection:function(a,b,c){for(var d=0;d<a.getIntersectionNum();d++){var e=a.getIntersection(d);if(!e.equals(b)&&!e.equals(c))return!0}return!1},checkCollapse:function(a,b,c){if(a.equals(c))throw new i("found non-noded collapse at "+ee.fact.createLineString([a,b,c]))},interfaces_:function(){return[]},getClass:function(){return ee}}),ee.fact=new ab,Wf(fe.prototype,{intersectsScaled:function(a,b){var c=Math.min(a.x,b.x),d=Math.max(a.x,b.x),e=Math.min(a.y,b.y),f=Math.max(a.y,b.y),g=this.maxx<c||this.minx>d||this.maxy<e||this.miny>f;if(g)return!1;var h=this.intersectsToleranceSquare(a,b);return k.isTrue(!(g&&h),"Found bad envelope test"),h},initCorners:function(a){var b=.5;this.minx=a.x-b,this.maxx=a.x+b,this.miny=a.y-b,this.maxy=a.y+b,this.corner[0]=new l(this.maxx,this.maxy),this.corner[1]=new l(this.minx,this.maxy),this.corner[2]=new l(this.minx,this.miny),this.corner[3]=new l(this.maxx,this.miny)},intersects:function(a,b){return 1===this.scaleFactor?this.intersectsScaled(a,b):(this.copyScaled(a,this.p0Scaled),this.copyScaled(b,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(a){return Math.round(a*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(a,b){b.x=this.scale(a.x),b.y=this.scale(a.y)},getSafeEnvelope:function(){if(null===this.safeEnv){var a=fe.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new v(this.originalPt.x-a,this.originalPt.x+a,this.originalPt.y-a,this.originalPt.y+a)}return this.safeEnv},intersectsPixelClosure:function(a,b){return this.li.computeIntersection(a,b,this.corner[0],this.corner[1]),!!this.li.hasIntersection()||(this.li.computeIntersection(a,b,this.corner[1],this.corner[2]),!!this.li.hasIntersection()||(this.li.computeIntersection(a,b,this.corner[2],this.corner[3]),!!this.li.hasIntersection()||(this.li.computeIntersection(a,b,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(a,b){var c=!1,d=!1;return this.li.computeIntersection(a,b,this.corner[0],this.corner[1]),!!this.li.isProper()||(this.li.computeIntersection(a,b,this.corner[1],this.corner[2]),!!this.li.isProper()||(this.li.hasIntersection()&&(c=!0),this.li.computeIntersection(a,b,this.corner[2],this.corner[3]),!!this.li.isProper()||(this.li.hasIntersection()&&(d=!0),this.li.computeIntersection(a,b,this.corner[3],this.corner[0]),!!this.li.isProper()||(!(!c||!d)||(!!a.equals(this.pt)||!!b.equals(this.pt))))))},addSnappedNode:function(a,b){var c=a.getCoordinate(b),d=a.getCoordinate(b+1);return!!this.intersects(c,d)&&(a.addIntersection(this.getCoordinate(),b),!0)},interfaces_:function(){return[]},getClass:function(){return fe}}),fe.SAFE_ENV_EXPANSION_FACTOR=.75,Wf(ge.prototype,{snap:function(){if(1===arguments.length){var a=arguments[0];return this.snap(a,null,-1)}if(3===arguments.length){var b=arguments[0],c=arguments[1],d=arguments[2],e=b.getSafeEnvelope(),f=new he(b,c,d);return this.index.query(e,{interfaces_:function(){return[Gb]},visitItem:function(a){var b=a;b.select(e,f)}}),f.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return ge}}),Xf(he,gd),Wf(he.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return gd.prototype.select.apply(this,arguments);var a=arguments[0],b=arguments[1],c=a.getContext();return null!==this.parentEdge&&c===this.parentEdge&&b===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(c,b))},interfaces_:function(){return[]},getClass:function(){return he}}),ge.HotPixelSnapAction=he,Wf(ie.prototype,{processIntersections:function(a,b,c,d){if(a===c&&b===d)return null;var e=a.getCoordinates()[b],f=a.getCoordinates()[b+1],g=c.getCoordinates()[d],h=c.getCoordinates()[d+1];if(this.li.computeIntersection(e,f,g,h),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var i=0;i<this.li.getIntersectionNum();i++)this.interiorIntersections.add(this.li.getIntersection(i));a.addIntersections(this.li,b,0),c.addIntersections(this.li,d,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[cc]},getClass:function(){return ie}}),Wf(je.prototype,{checkCorrectness:function(a){var b=Ub.getNodedSubstrings(a),c=new ee(b);try{c.checkValid()}catch(a){if(!(a instanceof w))throw a;a.printStackTrace()}finally{}},getNodedSubstrings:function(){return Ub.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(a,b){var c=this.findInteriorIntersections(a,b);this.computeIntersectionSnaps(c),this.computeVertexSnaps(a)},findInteriorIntersections:function(a,b){var c=new ie(b);return this.noder.setSegmentIntersector(c),this.noder.computeNodes(a),c.getInteriorIntersections()},computeVertexSnaps:function(){if(Zf(arguments[0],o))for(var a=arguments[0],b=a.iterator();b.hasNext();){var c=b.next();this.computeVertexSnaps(c)}else if(arguments[0]instanceof Ub)for(var d=arguments[0],e=d.getCoordinates(),f=0;f<e.length;f++){var g=new fe(e[f],this.scaleFactor,this.li),h=this.pointSnapper.snap(g,d,f);h&&d.addIntersection(e[f],f)}},computeNodes:function(a){this.nodedSegStrings=a,this.noder=new _b,this.pointSnapper=new ge(this.noder.getIndex()),this.snapRound(a,this.li)},computeIntersectionSnaps:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next(),d=new fe(c,this.scaleFactor,this.li);this.pointSnapper.snap(d)}},interfaces_:function(){return[Zb]},getClass:function(){return je}}),Wf(ke.prototype,{bufferFixedPrecision:function(a){var b=new Qd(new je(new $a(1)),a.getScale()),c=new de(this.bufParams);c.setWorkingPrecisionModel(a),c.setNoder(b),this.resultGeometry=c.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var a=ke.MAX_PRECISION_DIGITS;a>=0;a--){try{this.bufferReducedPrecision(a)}catch(a){if(!(a instanceof bc))throw a;this.saveException=a}finally{}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===arguments.length){var b=arguments[0],c=ke.precisionScaleFactor(this.argGeom,this.distance,b),d=new $a(c);this.bufferFixedPrecision(d)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var a=this.argGeom.getFactory().getPrecisionModel();a.getType()===$a.FIXED?this.bufferFixedPrecision(a):this.bufferReducedPrecision()},setQuadrantSegments:function(a){this.bufParams.setQuadrantSegments(a)},bufferOriginalPrecision:function(){try{var a=new de(this.bufParams);this.resultGeometry=a.buffer(this.argGeom,this.distance)}catch(a){if(!(a instanceof i))throw a;this.saveException=a}finally{}},getResultGeometry:function(a){return this.distance=a,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(a){this.bufParams.setEndCapStyle(a)},interfaces_:function(){return[]},getClass:function(){return ke}}),ke.bufferOp=function(){if(2===arguments.length){var a=arguments[0],b=arguments[1],c=new ke(a),d=c.getResultGeometry(b);return d}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof K&&"number"==typeof arguments[1]){var e=arguments[0],f=arguments[1],g=arguments[2],h=new ke(e);h.setQuadrantSegments(g);var d=h.getResultGeometry(f);return d}if(arguments[2]instanceof Td&&arguments[0]instanceof K&&"number"==typeof arguments[1]){var i=arguments[0],j=arguments[1],k=arguments[2],h=new ke(i,k),d=h.getResultGeometry(j);return d}}else if(4===arguments.length){var l=arguments[0],m=arguments[1],n=arguments[2],o=arguments[3],h=new ke(l);h.setQuadrantSegments(n),h.setEndCapStyle(o);var d=h.getResultGeometry(m);return d}},ke.precisionScaleFactor=function(a,b,c){var d=a.getEnvelopeInternal(),e=z.max(Math.abs(d.getMaxX()),Math.abs(d.getMaxY()),Math.abs(d.getMinX()),Math.abs(d.getMinY())),f=b>0?b:0,g=e+2*f,h=Math.trunc(Math.log(g)/Math.log(10)+1),i=c-h,j=Math.pow(10,i);return j},ke.CAP_ROUND=Td.CAP_ROUND,ke.CAP_BUTT=Td.CAP_FLAT,ke.CAP_FLAT=Td.CAP_FLAT,ke.CAP_SQUARE=Td.CAP_SQUARE,ke.MAX_PRECISION_DIGITS=12;var xg=Object.freeze({BufferOp:ke,BufferParameters:Td});Wf(le.prototype,{filter:function(a){a instanceof za&&this.comps.add(a)},interfaces_:function(){return[ha]},getClass:function(){return le}}),le.getPolygons=function(){if(1===arguments.length){var a=arguments[0];return le.getPolygons(a,new t)}if(2===arguments.length){var b=arguments[0],c=arguments[1];return b instanceof za?c.add(b):b instanceof ja&&b.apply(new le(c)),c}},Wf(me.prototype,{isInsideArea:function(){return this.segIndex===me.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return me}}),me.INSIDE_AREA=-1,Wf(ne.prototype,{filter:function(a){a instanceof xa&&this.pts.add(a)},interfaces_:function(){return[ha]},getClass:function(){return ne}}),ne.getPoints=function(){if(1===arguments.length){var a=arguments[0];return a instanceof xa?kg.singletonList(a):ne.getPoints(a,new t)}if(2===arguments.length){var b=arguments[0],c=arguments[1];return b instanceof xa?c.add(b):b instanceof ja&&b.apply(new ne(c)),c}},Wf(oe.prototype,{filter:function(a){(a instanceof xa||a instanceof va||a instanceof za)&&this.locations.add(new me(a,0,a.getCoordinate()))},interfaces_:function(){return[ha]},getClass:function(){return oe}}),oe.getLocations=function(a){var b=new t;return a.apply(new oe(b)),b},Wf(pe.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var a=new Array(2).fill(null);if(this.computeContainmentDistance(0,a),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,a)}else if(2===arguments.length){var b=arguments[0],c=arguments[1],d=1-b,e=le.getPolygons(this.geom[b]);if(e.size()>0){var f=oe.getLocations(this.geom[d]);if(this.computeContainmentDistance(f,e,c),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[d]=c[0],this.minDistanceLocation[b]=c[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Zf(arguments[0],q)&&Zf(arguments[1],q)){for(var g=arguments[0],h=arguments[1],i=arguments[2],j=0;j<g.size();j++)for(var k=g.get(j),l=0;l<h.size();l++)if(this.computeContainmentDistance(k,h.get(l),i),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof me&&arguments[1]instanceof za){var m=arguments[0],n=arguments[1],o=arguments[2],p=m.getCoordinate();if(y.EXTERIOR!==this.ptLocator.locate(p,n))return this.minDistance=0,o[0]=m,o[1]=new me(n,p),null}},computeMinDistanceLinesPoints:function(a,b,c){for(var d=0;d<a.size();d++)for(var e=a.get(d),f=0;f<b.size();f++){var g=b.get(f);if(this.computeMinDistance(e,g,c),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var a=new Array(2).fill(null),b=Mc.getLines(this.geom[0]),c=Mc.getLines(this.geom[1]),d=ne.getPoints(this.geom[0]),e=ne.getPoints(this.geom[1]);return this.computeMinDistanceLines(b,c,a),this.updateMinDistance(a,!1),this.minDistance<=this.terminateDistance?null:(a[0]=null,a[1]=null,this.computeMinDistanceLinesPoints(b,e,a),this.updateMinDistance(a,!1),this.minDistance<=this.terminateDistance?null:(a[0]=null,a[1]=null,this.computeMinDistanceLinesPoints(c,d,a),this.updateMinDistance(a,!0),this.minDistance<=this.terminateDistance?null:(a[0]=null,a[1]=null,this.computeMinDistancePoints(d,e,a),void this.updateMinDistance(a,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(a,b){return null===a[0]?null:void(b?(this.minDistanceLocation[0]=a[1],this.minDistanceLocation[1]=a[0]):(this.minDistanceLocation[0]=a[0],this.minDistanceLocation[1]=a[1]))},nearestPoints:function(){this.computeMinDistance();var a=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return a},computeMinDistance:function(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof va&&arguments[1]instanceof xa){var a=arguments[0],b=arguments[1],c=arguments[2];if(a.getEnvelopeInternal().distance(b.getEnvelopeInternal())>this.minDistance)return null;for(var d=a.getCoordinates(),e=b.getCoordinate(),f=0;f<d.length-1;f++){var g=hb.distancePointLine(e,d[f],d[f+1]);if(g<this.minDistance){this.minDistance=g;var h=new ib(d[f],d[f+1]),i=h.closestPoint(e);c[0]=new me(a,f,i),c[1]=new me(b,0,e)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof va&&arguments[1]instanceof va){var j=arguments[0],k=arguments[1],l=arguments[2];if(j.getEnvelopeInternal().distance(k.getEnvelopeInternal())>this.minDistance)return null;for(var d=j.getCoordinates(),m=k.getCoordinates(),f=0;f<d.length-1;f++)for(var n=0;n<m.length-1;n++){var g=hb.distanceLineLine(d[f],d[f+1],m[n],m[n+1]);if(g<this.minDistance){this.minDistance=g;var o=new ib(d[f],d[f+1]),p=new ib(m[n],m[n+1]),q=o.closestPoints(p);l[0]=new me(j,f,q[0]),l[1]=new me(k,n,q[1])}if(this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(a,b,c){for(var d=0;d<a.size();d++)for(var e=a.get(d),f=0;f<b.size();f++){var g=b.get(f),h=e.getCoordinate().distance(g.getCoordinate());if(h<this.minDistance&&(this.minDistance=h,c[0]=new me(e,0,e.getCoordinate()),c[1]=new me(g,0,g.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new c("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(a,b,c){for(var d=0;d<a.size();d++)for(var e=a.get(d),f=0;f<b.size();f++){var g=b.get(f);if(this.computeMinDistance(e,g,c),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return pe}}),pe.distance=function(a,b){var c=new pe(a,b);return c.distance()},pe.isWithinDistance=function(a,b,c){var d=new pe(a,b,c);return d.distance()<=c},pe.nearestPoints=function(a,b){var c=new pe(a,b);return c.nearestPoints()};var yg=Object.freeze({DistanceOp:pe});Wf(qe.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var a=0,b=0,c=new u,d=this.directedEdges.iterator();d.hasNext();){var e=d.next();e.getEdgeDirection()?a++:b++,c.add(e.getEdge().getLine().getCoordinates(),!1,e.getEdgeDirection())}this.coordinates=c.toCoordinateArray(),b>a&&R.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(a){this.directedEdges.add(a)},interfaces_:function(){return[]},getClass:function(){return qe}}),Wf(re.prototype,{setVisited:function(a){this._isVisited=a},isMarked:function(){return this._isMarked},setData:function(a){this.data=a},getData:function(){return this.data},setMarked:function(a){this._isMarked=a},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(a){this.data=a},interfaces_:function(){return[]},getClass:function(){return re}}),re.getComponentWithVisitedState=function(a,b){for(;a.hasNext();){var c=a.next();if(c.isVisited()===b)return c}return null},re.setVisited=function(a,b){for(;a.hasNext();){var c=a.next();c.setVisited(b)}},re.setMarked=function(a,b){for(;a.hasNext();){var c=a.next();c.setMarked(b)}},Xf(se,re),Wf(se.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(a){return this.quadrant>a.quadrant?1:this.quadrant<a.quadrant?-1:hb.computeOrientation(a.p0,a.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(a){var b=this.getClass().getName(),c=b.lastIndexOf("."),d=b.substring(c+1);a.print("  "+d+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(a){var b=a;return this.compareDirection(b)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(a){this.parentEdge=a},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(a){this.sym=a},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[e]},getClass:function(){return se}}),se.toEdges=function(a){for(var b=new t,c=a.iterator();c.hasNext();)b.add(c.next().parentEdge);return b},Xf(te,se),Wf(te.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(k.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return te}}),Xf(ue,re),Wf(ue.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(a,b){this.dirEdge=[a,b],a.setEdge(this),b.setEdge(this),a.setSym(b),b.setSym(a),a.getFromNode().addOutEdge(a),b.getFromNode().addOutEdge(b)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var a=arguments[0];return this.dirEdge[a]}if(arguments[0]instanceof we){var b=arguments[0];return this.dirEdge[0].getFromNode()===b?this.dirEdge[0]:this.dirEdge[1].getFromNode()===b?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(a){return this.dirEdge[0].getFromNode()===a?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===a?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return ue}}),Wf(ve.prototype,{getNextEdge:function(a){var b=this.getIndex(a);return this.outEdges.get(this.getIndex(b+1))},getCoordinate:function(){var a=this.iterator();if(!a.hasNext())return null;var b=a.next();return b.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(kg.sort(this.outEdges),this.sorted=!0)},remove:function(a){this.outEdges.remove(a)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(a){var b=this.getIndex(a);return this.outEdges.get(this.getIndex(b-1))},getIndex:function(){if(arguments[0]instanceof ue){var a=arguments[0];this.sortEdges();for(var b=0;b<this.outEdges.size();b++){var c=this.outEdges.get(b);if(c.getEdge()===a)return b}return-1}if(arguments[0]instanceof se){var d=arguments[0];this.sortEdges();for(var b=0;b<this.outEdges.size();b++){var c=this.outEdges.get(b);if(c===d)return b}return-1}if(Number.isInteger(arguments[0])){var e=arguments[0],f=e%this.outEdges.size();return f<0&&(f+=this.outEdges.size()),f}},add:function(a){this.outEdges.add(a),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return ve}}),Xf(we,re),Wf(we.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(a){this.deStar.add(a)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(0===arguments.length)this.pt=null;else if(1===arguments.length){var a=arguments[0];this.deStar.remove(a)}},getIndex:function(a){return this.deStar.getIndex(a)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return we}}),we.getEdgesBetween=function(a,b){var c=se.toEdges(a.getOutEdges().getEdges()),d=new X(c),e=se.toEdges(b.getOutEdges().getEdges());return d.retainAll(e),d},Xf(xe,ue),Wf(xe.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return xe}}),Wf(ye.prototype,{find:function(a){return this.nodeMap.get(a)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(a){return this.nodeMap.remove(a)},values:function(){return this.nodeMap.values()},add:function(a){return this.nodeMap.put(a.getCoordinate(),a),a},interfaces_:function(){return[]},getClass:function(){return ye}}),Wf(ze.prototype,{findNodesOfDegree:function(a){for(var b=new t,c=this.nodeIterator();c.hasNext();){var d=c.next();d.getDegree()===a&&b.add(d)}return b},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof ue){var a=arguments[0];this.remove(a.getDirEdge(0)),this.remove(a.getDirEdge(1)),this.edges.remove(a),a.remove()}else if(arguments[0]instanceof se){var b=arguments[0],c=b.getSym();null!==c&&c.setSym(null),b.getFromNode().remove(b),b.remove(),this.dirEdges.remove(b)}else if(arguments[0]instanceof we){for(var d=arguments[0],e=d.getOutEdges().getEdges(),f=e.iterator();f.hasNext();){var g=f.next(),c=g.getSym();null!==c&&this.remove(c),this.dirEdges.remove(g);var h=g.getEdge();null!==h&&this.edges.remove(h)}this.nodeMap.remove(d.getCoordinate()),d.remove()}},findNode:function(a){return this.nodeMap.find(a)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof ue){var a=arguments[0];return this.edges.contains(a)}if(arguments[0]instanceof se){var b=arguments[0];return this.dirEdges.contains(b)}},add:function(){if(arguments[0]instanceof we){var a=arguments[0];this.nodeMap.add(a)}else if(arguments[0]instanceof ue){var b=arguments[0];this.edges.add(b),this.add(b.getDirEdge(0)),this.add(b.getDirEdge(1))}else if(arguments[0]instanceof se){var c=arguments[0];this.dirEdges.add(c)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return ze}}),Xf(Ae,ze),Wf(Ae.prototype,{addEdge:function(a){if(a.isEmpty())return null;var b=R.removeRepeatedPoints(a.getCoordinates());if(b.length<=1)return null;var c=b[0],d=b[b.length-1],e=this.getNode(c),f=this.getNode(d),g=new te(e,f,b[1],!0),h=new te(f,e,b[b.length-2],!1),i=new xe(a);i.setDirectedEdges(g,h),this.add(i)},getNode:function(a){var b=this.findNode(a);return null===b&&(b=new we(a),this.add(b)),b},interfaces_:function(){return[]},getClass:function(){return Ae}}),Wf(Be.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var a=this.graph.getNodes().iterator();a.hasNext();){var b=a.next();b.isMarked()||(k.isTrue(2===b.getDegree()),this.buildEdgeStringsStartingAt(b),b.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var a=this.graph.getNodes().iterator();a.hasNext();){var b=a.next();2!==b.getDegree()&&(this.buildEdgeStringsStartingAt(b),b.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(a){for(var b=a.getOutEdges().iterator();b.hasNext();){var c=b.next();c.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(c))}},merge:function(){if(null!==this.mergedLineStrings)return null;re.setMarked(this.graph.nodeIterator(),!1),re.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new t,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new t;for(var a=this.edgeStrings.iterator();a.hasNext();){var b=a.next();this.mergedLineStrings.add(b.toLineString())}},buildEdgeStringStartingWith:function(a){var b=new qe(this.factory),c=a;do{b.add(c),c.getEdge().setMarked(!0),c=c.getNext()}while(null!==c&&c!==a);return b},add:function(){if(arguments[0]instanceof K){var a=arguments[0];a.apply({interfaces_:function(){return[J]},filter:function(a){a instanceof va&&this.add(a)}})}else if(Zf(arguments[0],o)){var b=arguments[0];this.mergedLineStrings=null;for(var c=b.iterator();c.hasNext();){var d=c.next();this.add(d)}}else if(arguments[0]instanceof va){var e=arguments[0];null===this.factory&&(this.factory=e.getFactory()),this.graph.addEdge(e)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return Be}});var zg=Object.freeze({LineMerger:Be}),Ag=Object.freeze({OverlayOp:_c});Xf(Ce,se),Wf(Ce.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(a){this.edgeRing=a},setLabel:function(a){this.label=a},getLabel:function(){return this.label},setNext:function(a){this.next=a},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return Ce}}),Xf(De,ue),Wf(De.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return De}}),Wf(Ee.prototype,{visitInteriorRing:function(a,b){var c=a.getCoordinates(),d=c[0],e=Ee.findDifferentPoint(c,d),f=b.findEdgeInSameDirection(d,e),g=b.findEdgeEnd(f),h=null;g.getLabel().getLocation(0,hc.RIGHT)===y.INTERIOR?h=g:g.getSym().getLabel().getLocation(0,hc.RIGHT)===y.INTERIOR&&(h=g.getSym()),k.isTrue(null!==h,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(h)},visitShellInteriors:function(a,b){if(a instanceof za){var c=a;this.visitInteriorRing(c.getExteriorRing(),b)}if(a instanceof Ca)for(var d=a,e=0;e<d.getNumGeometries();e++){var c=d.getGeometryN(e);this.visitInteriorRing(c.getExteriorRing(),b)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(a){for(var b=a.getEdgeEnds().iterator();b.hasNext();){var c=b.next();c.getLabel().getLocation(0,hc.RIGHT)===y.INTERIOR&&c.setInResult(!0)}},visitLinkedDirectedEdges:function(a){var b=a,c=a;do{k.isTrue(null!==c,"found null Directed Edge"),c.setVisited(!0),c=c.getNext()}while(c!==b)},buildEdgeRings:function(a){for(var b=new t,c=a.iterator();c.hasNext();){var d=c.next();if(d.isInResult()&&null===d.getEdgeRing()){var e=new mc(d,this.geometryFactory);e.linkDirectedEdgesForMinimalEdgeRings();var f=e.buildMinimalRings();b.addAll(f)}}return b},hasUnvisitedShellEdge:function(a){for(var b=0;b<a.size();b++){var c=a.get(b);if(!c.isHole()){var d=c.getEdges(),e=d.get(0);if(e.getLabel().getLocation(0,hc.RIGHT)===y.INTERIOR)for(var f=0;f<d.size();f++)if(e=d.get(f),!e.isVisited())return this.disconnectedRingcoord=e.getCoordinate(),!0
}}return!1},isInteriorsConnected:function(){var a=new t;this.geomGraph.computeSplitEdges(a);var b=new tc(new Bc);b.addEdges(a),this.setInteriorEdgesInResult(b),b.linkResultDirectedEdges();var c=this.buildEdgeRings(b.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),b),!this.hasUnvisitedShellEdge(c)},interfaces_:function(){return[]},getClass:function(){return Ee}}),Ee.findDifferentPoint=function(a,b){for(var c=0;c<a.length;c++)if(!a[c].equals(b))return a[c];return null},Wf(Fe.prototype,{createEdgeEndForNext:function(a,b,c,d){var e=c.segmentIndex+1;if(e>=a.getNumPoints()&&null===d)return null;var f=a.getCoordinate(e);null!==d&&d.segmentIndex===c.segmentIndex&&(f=d.coord);var g=new qc(a,c.coord,f,new jc(a.getLabel()));b.add(g)},createEdgeEndForPrev:function(a,b,c,d){var e=c.segmentIndex;if(0===c.dist){if(0===e)return null;e--}var f=a.getCoordinate(e);null!==d&&d.segmentIndex>=e&&(f=d.coord);var g=new jc(a.getLabel());g.flip();var h=new qc(a,c.coord,f,g);b.add(h)},computeEdgeEnds:function(){if(1===arguments.length){for(var a=arguments[0],b=new t,c=a;c.hasNext();){var d=c.next();this.computeEdgeEnds(d,b)}return b}if(2===arguments.length){var e=arguments[0],f=arguments[1],g=e.getEdgeIntersectionList();g.addEndpoints();var h=g.iterator(),i=null,j=null;if(!h.hasNext())return null;var k=h.next();do{i=j,j=k,k=null,h.hasNext()&&(k=h.next()),null!==j&&(this.createEdgeEndForPrev(e,f,j,i),this.createEdgeEndForNext(e,f,j,k))}while(null!==j)}},interfaces_:function(){return[]},getClass:function(){return Fe}}),Xf(Ge,qc),Wf(Ge.prototype,{insert:function(a){this.edgeEnds.add(a)},print:function(a){a.println("EdgeEndBundle--\x3e Label: "+this.label);for(var b=this.iterator();b.hasNext();){var c=b.next();c.print(a),a.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(a,b){for(var c=0,d=!1,e=this.iterator();e.hasNext();){var f=e.next(),g=f.getLabel().getLocation(a);g===y.BOUNDARY&&c++,g===y.INTERIOR&&(d=!0)}var g=y.NONE;d&&(g=y.INTERIOR),c>0&&(g=Xc.determineBoundary(b,c)),this.label.setLocation(a,g)},computeLabelSide:function(a,b){for(var c=this.iterator();c.hasNext();){var d=c.next();if(d.getLabel().isArea()){var e=d.getLabel().getLocation(a,b);if(e===y.INTERIOR)return this.label.setLocation(a,b,y.INTERIOR),null;e===y.EXTERIOR&&this.label.setLocation(a,b,y.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(a){this.computeLabelSide(a,hc.LEFT),this.computeLabelSide(a,hc.RIGHT)},updateIM:function(a){Wc.updateIM(this.label,a)},computeLabel:function(a){for(var b=!1,c=this.iterator();c.hasNext();){var d=c.next();d.getLabel().isArea()&&(b=!0)}b?this.label=new jc(y.NONE,y.NONE,y.NONE):this.label=new jc(y.NONE);for(var e=0;e<2;e++)this.computeLabelOn(e,a),b&&this.computeLabelSides(e)},interfaces_:function(){return[]},getClass:function(){return Ge}}),Xf(He,zc),Wf(He.prototype,{updateIM:function(a){for(var b=this.iterator();b.hasNext();){var c=b.next();c.updateIM(a)}},insert:function(a){var b=this.edgeMap.get(a);null===b?(b=new Ge(a),this.insertEdgeEnd(a,b)):b.insert(a)},interfaces_:function(){return[]},getClass:function(){return He}}),Xf(Ie,oc),Wf(Ie.prototype,{updateIMFromEdges:function(a){this.edges.updateIM(a)},computeIM:function(a){a.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return Ie}}),Xf(Je,sc),Wf(Je.prototype,{createNode:function(a){return new Ie(a,new He)},interfaces_:function(){return[]},getClass:function(){return Je}}),Wf(Ke.prototype,{insertEdgeEnds:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next();this.nodes.add(c)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(a,b){for(var c=a.getNodeIterator();c.hasNext();){var d=c.next(),e=this.nodes.addNode(d.getCoordinate());e.setLabel(b,d.getLabel().getLocation(b))}},build:function(a){this.computeIntersectionNodes(a,0),this.copyNodesAndLabels(a,0);var b=new Fe,c=b.computeEdgeEnds(a.getEdgeIterator());this.insertEdgeEnds(c)},computeIntersectionNodes:function(a,b){for(var c=a.getEdgeIterator();c.hasNext();)for(var d=c.next(),e=d.getLabel().getLocation(b),f=d.getEdgeIntersectionList().iterator();f.hasNext();){var g=f.next(),h=this.nodes.addNode(g.coord);e===y.BOUNDARY?h.setLabelBoundary(b):h.getLabel().isNull(b)&&h.setLabel(b,y.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Ke}}),Wf(Le.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var a=this.nodeGraph.getNodeIterator();a.hasNext();){var b=a.next();if(!b.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=b.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var a=this.nodeGraph.getNodeIterator();a.hasNext();)for(var b=a.next(),c=b.getEdges().iterator();c.hasNext();){var d=c.next();if(d.getEdgeEnds().size()>1)return this.invalidPoint=d.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var a=this.geomGraph.computeSelfNodes(this.li,!0,!0);return a.hasProperIntersection()?(this.invalidPoint=a.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Le}}),Wf(Me.prototype,{buildIndex:function(){this.index=new Nb;for(var a=0;a<this.rings.size();a++){var b=this.rings.get(a),c=b.getEnvelopeInternal();this.index.insert(c,b)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var a=0;a<this.rings.size();a++)for(var b=this.rings.get(a),c=b.getCoordinates(),d=this.index.query(b.getEnvelopeInternal()),e=0;e<d.size();e++){var f=d.get(e),g=f.getCoordinates();if(b!==f&&b.getEnvelopeInternal().intersects(f.getEnvelopeInternal())){var h=Oe.findPtNotNode(c,f,this.graph);if(null!==h){var i=hb.isPointInRing(h,g);if(i)return this.nestedPt=h,!1}}}return!0},add:function(a){this.rings.add(a),this.totalEnv.expandToInclude(a.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Me}}),Wf(Ne.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Ne.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var a="";return null!==this.pt&&(a=" at or near point "+this.pt),this.getMessage()+a},interfaces_:function(){return[]},getClass:function(){return Ne}}),Ne.ERROR=0,Ne.REPEATED_POINT=1,Ne.HOLE_OUTSIDE_SHELL=2,Ne.NESTED_HOLES=3,Ne.DISCONNECTED_INTERIOR=4,Ne.SELF_INTERSECTION=5,Ne.RING_SELF_INTERSECTION=6,Ne.NESTED_SHELLS=7,Ne.DUPLICATE_RINGS=8,Ne.TOO_FEW_POINTS=9,Ne.INVALID_COORDINATE=10,Ne.RING_NOT_CLOSED=11,Ne.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],Wf(Oe.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var a=arguments[0],b=0;b<a.length;b++)if(!Oe.isValid(a[b]))return this.validErr=new Ne(Ne.INVALID_COORDINATE,a[b]),null}else if(arguments[0]instanceof za){var c=arguments[0];if(this.checkInvalidCoordinates(c.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(var b=0;b<c.getNumInteriorRing();b++)if(this.checkInvalidCoordinates(c.getInteriorRingN(b).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(a,b){for(var c=new Me(b),d=0;d<a.getNumInteriorRing();d++){var e=a.getInteriorRingN(d);c.add(e)}var f=c.isNonNested();f||(this.validErr=new Ne(Ne.NESTED_HOLES,c.getNestedPoint()))},checkConsistentArea:function(a){var b=new Le(a),c=b.isNodeConsistentArea();return c?void(b.hasDuplicateRings()&&(this.validErr=new Ne(Ne.DUPLICATE_RINGS,b.getInvalidPoint()))):(this.validErr=new Ne(Ne.SELF_INTERSECTION,b.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(a,b,c){var d=a.getCoordinates(),e=b.getCoordinates(),f=Oe.findPtNotNode(d,b,c);if(null!==f){var g=hb.isPointInRing(f,e);if(!g)return f}var h=Oe.findPtNotNode(e,a,c);if(null!==h){var i=hb.isPointInRing(h,d);return i?h:null}return k.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(a){for(var b=a.getEdgeIterator();b.hasNext();){var c=b.next();if(this.checkNoSelfIntersectingRing(c.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(a){var b=new Ee(a);b.isInteriorsConnected()||(this.validErr=new Ne(Ne.DISCONNECTED_INTERIOR,b.getCoordinate()))},checkNoSelfIntersectingRing:function(a){for(var b=new ea,c=!0,d=a.iterator();d.hasNext();){var e=d.next();if(c)c=!1;else{if(b.contains(e.coord))return this.validErr=new Ne(Ne.RING_SELF_INTERSECTION,e.coord),null;b.add(e.coord)}}},checkHolesInShell:function(a,b){for(var c=a.getExteriorRing(),d=new rd(c),e=0;e<a.getNumInteriorRing();e++){var f=a.getInteriorRingN(e),g=Oe.findPtNotNode(f.getCoordinates(),c,b);if(null===g)return null;var h=!d.isInside(g);if(h)return this.validErr=new Ne(Ne.HOLE_OUTSIDE_SHELL,g),null}},checkTooFewPoints:function(a){if(a.hasTooFewPoints())return this.validErr=new Ne(Ne.TOO_FEW_POINTS,a.getInvalidPoint()),null},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof xa){var a=arguments[0];this.checkInvalidCoordinates(a.getCoordinates())}else if(arguments[0]instanceof Aa){var b=arguments[0];this.checkInvalidCoordinates(b.getCoordinates())}else if(arguments[0]instanceof Ba){var c=arguments[0];if(this.checkInvalidCoordinates(c.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(c),null!==this.validErr)return null;var d=new Xc(0,c);if(this.checkTooFewPoints(d),null!==this.validErr)return null;var e=new eb;d.computeSelfNodes(e,!0,!0),this.checkNoSelfIntersectingRings(d)}else if(arguments[0]instanceof va){var f=arguments[0];if(this.checkInvalidCoordinates(f.getCoordinates()),null!==this.validErr)return null;var d=new Xc(0,f);this.checkTooFewPoints(d)}else if(arguments[0]instanceof za){var g=arguments[0];if(this.checkInvalidCoordinates(g),null!==this.validErr)return null;if(this.checkClosedRings(g),null!==this.validErr)return null;var d=new Xc(0,g);if(this.checkTooFewPoints(d),null!==this.validErr)return null;if(this.checkConsistentArea(d),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(d),null!==this.validErr))return null;if(this.checkHolesInShell(g,d),null!==this.validErr)return null;if(this.checkHolesNotNested(g,d),null!==this.validErr)return null;this.checkConnectedInteriors(d)}else if(arguments[0]instanceof Ca){for(var h=arguments[0],i=0;i<h.getNumGeometries();i++){var j=h.getGeometryN(i);if(this.checkInvalidCoordinates(j),null!==this.validErr)return null;if(this.checkClosedRings(j),null!==this.validErr)return null}var d=new Xc(0,h);if(this.checkTooFewPoints(d),null!==this.validErr)return null;if(this.checkConsistentArea(d),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(d),null!==this.validErr))return null;for(var i=0;i<h.getNumGeometries();i++){var j=h.getGeometryN(i);if(this.checkHolesInShell(j,d),null!==this.validErr)return null}for(var i=0;i<h.getNumGeometries();i++){var j=h.getGeometryN(i);if(this.checkHolesNotNested(j,d),null!==this.validErr)return null}if(this.checkShellsNotNested(h,d),null!==this.validErr)return null;this.checkConnectedInteriors(d)}else if(arguments[0]instanceof ja)for(var k=arguments[0],i=0;i<k.getNumGeometries();i++){var l=k.getGeometryN(i);if(this.checkValid(l),null!==this.validErr)return null}else if(arguments[0]instanceof K){var m=arguments[0];if(this.validErr=null,m.isEmpty())return null;if(m instanceof xa)this.checkValid(m);else if(m instanceof Aa)this.checkValid(m);else if(m instanceof Ba)this.checkValid(m);else if(m instanceof va)this.checkValid(m);else if(m instanceof za)this.checkValid(m);else if(m instanceof Ca)this.checkValid(m);else{if(!(m instanceof ja))throw new UnsupportedOperationException(m.getClass().getName());this.checkValid(m)}}},setSelfTouchingRingFormingHoleValid:function(a){this.isSelfTouchingRingFormingHoleValid=a},checkShellNotNested:function(a,b,c){var d=a.getCoordinates(),e=b.getExteriorRing(),f=e.getCoordinates(),g=Oe.findPtNotNode(d,e,c);if(null===g)return null;var h=hb.isPointInRing(g,f);if(!h)return null;if(b.getNumInteriorRing()<=0)return this.validErr=new Ne(Ne.NESTED_SHELLS,g),null;for(var i=null,j=0;j<b.getNumInteriorRing();j++){var k=b.getInteriorRingN(j);if(i=this.checkShellInsideHole(a,k,c),null===i)return null}this.validErr=new Ne(Ne.NESTED_SHELLS,i)},checkClosedRings:function(a){if(this.checkClosedRing(a.getExteriorRing()),null!==this.validErr)return null;for(var b=0;b<a.getNumInteriorRing();b++)if(this.checkClosedRing(a.getInteriorRingN(b)),null!==this.validErr)return null},checkClosedRing:function(a){if(!a.isClosed()){var b=null;a.getNumPoints()>=1&&(b=a.getCoordinateN(0)),this.validErr=new Ne(Ne.RING_NOT_CLOSED,b)}},checkShellsNotNested:function(a,b){for(var c=0;c<a.getNumGeometries();c++)for(var d=a.getGeometryN(c),e=d.getExteriorRing(),f=0;f<a.getNumGeometries();f++)if(c!==f){var g=a.getGeometryN(f);if(this.checkShellNotNested(e,g,b),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return Oe}}),Oe.findPtNotNode=function(a,b,c){for(var d=c.findEdge(b),e=d.getEdgeIntersectionList(),f=0;f<a.length;f++){var g=a[f];if(!e.isIntersection(g))return g}return null},Oe.isValid=function(){if(arguments[0]instanceof K){var a=arguments[0],b=new Oe(a);return b.isValid()}if(arguments[0]instanceof l){var c=arguments[0];return!d.isNaN(c.x)&&(!d.isInfinite(c.x)&&(!d.isNaN(c.y)&&!d.isInfinite(c.y)))}},Wf(Pe.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var a=new u,b=this.deList.iterator();b.hasNext();){var c=b.next(),d=c.getEdge();Pe.addEdge(d.getLine().getCoordinates(),c.getEdgeDirection(),a)}this.ringPts=a.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),Oe.isValid(this.ring))},build:function(a){var b=a;do{this.add(b),b.setRing(this),b=b.getNext(),k.isTrue(null!==b,"found null DE in ring"),k.isTrue(b===a||!b.isInRing(),"found DE already in ring")}while(b!==a)},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var a=null;if(null!==this.holes){a=new Array(this.holes.size()).fill(null);for(var b=0;b<this.holes.size();b++)a[b]=this.holes.get(b)}var c=this.factory.createPolygon(this.ring,a);return c},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Ba){var a=arguments[0];null===this.holes&&(this.holes=new t),this.holes.add(a)}else if(arguments[0]instanceof Pe){var b=arguments[0];b.setShell(this);var c=b.getRing();null===this.holes&&(this.holes=new t),this.holes.add(c)}},setIncluded:function(a){this._isIncluded=a,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var a=0;a<this.deList.size();a++){var b=this.deList.get(a),c=b.getSym().getRing();if(c.isOuterHole())return c}return null},computeHole:function(){var a=this.getRing();this._isHole=hb.isCCW(a.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return cb.toLineString(new Ia(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(a){this.deList.add(a)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&G.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(a){if(!(a instanceof w))throw a;G.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var a=0;a<this.deList.size();a++){var b=this.deList.get(a),c=b.getSym().getRing().getShell();if(null!==c&&c.isIncludedSet())return this.setIncluded(!c.isIncluded()),null}},setShell:function(a){this.shell=a},setProcessed:function(a){this._isProcessed=a},interfaces_:function(){return[]},getClass:function(){return Pe}}),Pe.findDirEdgesInRing=function(a){var b=a,c=new t;do{c.add(b),b=b.getNext(),k.isTrue(null!==b,"found null DE in ring"),k.isTrue(b===a||!b.isInRing(),"found DE already in ring")}while(b!==a);return c},Pe.addEdge=function(a,b,c){if(b)for(var d=0;d<a.length;d++)c.add(a[d],!1);else for(var d=a.length-1;d>=0;d--)c.add(a[d],!1)},Pe.findEdgeRingContaining=function(a,b){for(var c=a.getRing(),d=c.getEnvelopeInternal(),e=c.getCoordinateN(0),f=null,g=null,h=b.iterator();h.hasNext();){var i=h.next(),j=i.getRing(),k=j.getEnvelopeInternal();if(!k.equals(d)&&k.contains(d)){e=R.ptNotInList(c.getCoordinates(),j.getCoordinates());var l=!1;hb.isPointInRing(e,j.getCoordinates())&&(l=!0),l&&(null===f||g.contains(k))&&(f=i,g=f.getRing().getEnvelopeInternal())}}return f},Wf(Qe.prototype,{compare:function(a,b){var c=a,d=b;return c.getRing().getEnvelope().compareTo(d.getRing().getEnvelope())},interfaces_:function(){return[g]},getClass:function(){return Qe}}),Pe.EnvelopeComparator=Qe,Xf(Re,ze),Wf(Re.prototype,{findEdgeRing:function(a){var b=new Pe(this.factory);return b.build(a),b},computeDepthParity:function(){if(0===arguments.length)for(;;){var a=null;if(null===a)return null;this.computeDepthParity(a)}else if(1===arguments.length){arguments[0]}},computeNextCWEdges:function(){for(var a=this.nodeIterator();a.hasNext();){var b=a.next();Re.computeNextCWEdges(b)}},addEdge:function(a){if(a.isEmpty())return null;var b=R.removeRepeatedPoints(a.getCoordinates());if(b.length<2)return null;var c=b[0],d=b[b.length-1],e=this.getNode(c),f=this.getNode(d),g=new Ce(e,f,b[1],!0),h=new Ce(f,e,b[b.length-2],!1),i=new De(a);i.setDirectedEdges(g,h),this.add(i)},deleteCutEdges:function(){this.computeNextCWEdges(),Re.findLabeledEdgeRings(this.dirEdges);for(var a=new t,b=this.dirEdges.iterator();b.hasNext();){var c=b.next();if(!c.isMarked()){var d=c.getSym();if(c.getLabel()===d.getLabel()){c.setMarked(!0),d.setMarked(!0);var e=c.getEdge();a.add(e.getLine())}}}return a},getEdgeRings:function(){this.computeNextCWEdges(),Re.label(this.dirEdges,-1);var a=Re.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(a);for(var b=new t,c=this.dirEdges.iterator();c.hasNext();){var d=c.next();if(!d.isMarked()&&!d.isInRing()){var e=this.findEdgeRing(d);b.add(e)}}return b},getNode:function(a){var b=this.findNode(a);return null===b&&(b=new we(a),this.add(b)),b},convertMaximalToMinimalEdgeRings:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next(),d=c.getLabel(),e=Re.findIntersectionNodes(c,d);if(null!==e)for(var f=e.iterator();f.hasNext();){var g=f.next();Re.computeNextCCWEdges(g,d)}}},deleteDangles:function(){for(var a=this.findNodesOfDegree(1),b=new X,c=new mb,d=a.iterator();d.hasNext();)c.push(d.next());for(;!c.isEmpty();){var e=c.pop();Re.deleteAllEdges(e);for(var f=e.getOutEdges().getEdges(),d=f.iterator();d.hasNext();){var g=d.next();g.setMarked(!0);var h=g.getSym();null!==h&&h.setMarked(!0);var i=g.getEdge();b.add(i.getLine());var j=g.getToNode();1===Re.getDegreeNonDeleted(j)&&c.push(j)}}return b},interfaces_:function(){return[]},getClass:function(){return Re}}),Re.findLabeledEdgeRings=function(a){for(var b=new t,c=1,d=a.iterator();d.hasNext();){var e=d.next();if(!(e.isMarked()||e.getLabel()>=0)){b.add(e);var f=Pe.findDirEdgesInRing(e);Re.label(f,c),c++}}return b},Re.getDegreeNonDeleted=function(a){for(var b=a.getOutEdges().getEdges(),c=0,d=b.iterator();d.hasNext();){var e=d.next();e.isMarked()||c++}return c},Re.deleteAllEdges=function(a){for(var b=a.getOutEdges().getEdges(),c=b.iterator();c.hasNext();){var d=c.next();d.setMarked(!0);var e=d.getSym();null!==e&&e.setMarked(!0)}},Re.label=function(a,b){for(var c=a.iterator();c.hasNext();){var d=c.next();d.setLabel(b)}},Re.computeNextCWEdges=function(a){for(var b=a.getOutEdges(),c=null,d=null,e=b.getEdges().iterator();e.hasNext();){var f=e.next();if(!f.isMarked()){if(null===c&&(c=f),null!==d){var g=d.getSym();g.setNext(f)}d=f}}if(null!==d){var g=d.getSym();g.setNext(c)}},Re.computeNextCCWEdges=function(a,b){for(var c=a.getOutEdges(),d=null,e=null,f=c.getEdges(),g=f.size()-1;g>=0;g--){var h=f.get(g),i=h.getSym(),j=null;h.getLabel()===b&&(j=h);var l=null;i.getLabel()===b&&(l=i),null===j&&null===l||(null!==l&&(e=l),null!==j&&(null!==e&&(e.setNext(j),e=null),null===d&&(d=j)))}null!==e&&(k.isTrue(null!==d),e.setNext(d))},Re.getDegree=function(a,b){for(var c=a.getOutEdges().getEdges(),d=0,e=c.iterator();e.hasNext();){var f=e.next();f.getLabel()===b&&d++}return d},Re.findIntersectionNodes=function(a,b){var c=a,d=null;do{var e=c.getFromNode();Re.getDegree(e,b)>1&&(null===d&&(d=new t),d.add(e)),c=c.getNext(),k.isTrue(null!==c,"found null DE in ring"),k.isTrue(c===a||!c.isInRing(),"found DE already in ring")}while(c!==a);return d},Wf(Se.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new ab),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(ab.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(a,b,c){for(var d=a.iterator();d.hasNext();){var e=d.next();e.isValid()?b.add(e):c.add(e.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new t,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var a=this.graph.getEdgeRings(),b=new t;this.invalidRingLines=new t,this.isCheckingRingsValid?this.findValidRings(a,b,this.invalidRingLines):b=a,this.findShellsAndHoles(b),Se.assignHolesToShells(this.holeList,this.shellList),kg.sort(this.shellList,new Pe.EnvelopeComparator);var c=!0;this.extractOnlyPolygonal&&(Se.findDisjointShells(this.shellList),c=!1),this.polyList=Se.extractPolygons(this.shellList,c)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(Zf(arguments[0],o))for(var a=arguments[0],b=a.iterator();b.hasNext();){var c=b.next();this.add(c)}else if(arguments[0]instanceof va){var d=arguments[0];this.geomFactory=d.getFactory(),null===this.graph&&(this.graph=new Re(this.geomFactory)),this.graph.addEdge(d)}else if(arguments[0]instanceof K){var e=arguments[0];e.apply(this.lineStringAdder)}},setCheckRingsValid:function(a){this.isCheckingRingsValid=a},findShellsAndHoles:function(a){this.holeList=new t,this.shellList=new t;for(var b=a.iterator();b.hasNext();){var c=b.next();c.computeHole(),c.isHole()?this.holeList.add(c):this.shellList.add(c)}},interfaces_:function(){return[]},getClass:function(){return Se}}),Se.findOuterShells=function(a){for(var b=a.iterator();b.hasNext();){var c=b.next(),d=c.getOuterHole();null===d||d.isProcessed()||(c.setIncluded(!0),d.setProcessed(!0))}},Se.extractPolygons=function(a,b){for(var c=new t,d=a.iterator();d.hasNext();){var e=d.next();(b||e.isIncluded())&&c.add(e.getPolygon())}return c},Se.assignHolesToShells=function(a,b){for(var c=a.iterator();c.hasNext();){var d=c.next();Se.assignHoleToShell(d,b)}},Se.assignHoleToShell=function(a,b){var c=Pe.findEdgeRingContaining(a,b);null!==c&&c.addHole(a)},Se.findDisjointShells=function(a){Se.findOuterShells(a);var b=null;do{b=!1;for(var c=a.iterator();c.hasNext();){var d=c.next();d.isIncludedSet()||(d.updateIncluded(),d.isIncludedSet()||(b=!0))}}while(b)},Wf(Te.prototype,{filter:function(a){a instanceof va&&this.p.add(a)},interfaces_:function(){return[J]},getClass:function(){return Te}}),Se.LineStringAdder=Te;var Bg=Object.freeze({Polygonizer:Se});Wf(Ue.prototype,{insertEdgeEnds:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next();this.nodes.add(c)}},computeProperIntersectionIM:function(a,b){var c=this.arg[0].getGeometry().getDimension(),d=this.arg[1].getGeometry().getDimension(),e=a.hasProperIntersection(),f=a.hasProperInteriorIntersection();2===c&&2===d?e&&b.setAtLeast("212101212"):2===c&&1===d?(e&&b.setAtLeast("FFF0FFFF2"),f&&b.setAtLeast("1FFFFF1FF")):1===c&&2===d?(e&&b.setAtLeast("F0FFFFFF2"),f&&b.setAtLeast("1F1FFFFFF")):1===c&&1===d&&f&&b.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(a,b){for(var c=this.arg[a].getEdgeIterator();c.hasNext();){var d=c.next();d.isIsolated()&&(this.labelIsolatedEdge(d,b,this.arg[b].getGeometry()),this.isolatedEdges.add(d))}},labelIsolatedEdge:function(a,b,c){if(c.getDimension()>0){var d=this.ptLocator.locate(a.getCoordinate(),c);a.getLabel().setAllLocations(b,d)}else a.getLabel().setAllLocations(b,y.EXTERIOR)},computeIM:function(){var a=new jb;if(a.set(y.EXTERIOR,y.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(a),a;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var b=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(b,a);var c=new Fe,d=c.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(d);var e=c.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(e),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(a),a},labelNodeEdges:function(){for(var a=this.nodes.iterator();a.hasNext();){var b=a.next();b.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(a){for(var b=this.arg[a].getNodeIterator();b.hasNext();){var c=b.next(),d=this.nodes.addNode(c.getCoordinate());d.setLabel(a,c.getLabel().getLocation(a))}},labelIntersectionNodes:function(a){for(var b=this.arg[a].getEdgeIterator();b.hasNext();)for(var c=b.next(),d=c.getLabel().getLocation(a),e=c.getEdgeIntersectionList().iterator();e.hasNext();){var f=e.next(),g=this.nodes.find(f.coord);g.getLabel().isNull(a)&&(d===y.BOUNDARY?g.setLabelBoundary(a):g.setLabel(a,y.INTERIOR))}},labelIsolatedNode:function(a,b){var c=this.ptLocator.locate(a.getCoordinate(),this.arg[b].getGeometry());a.getLabel().setAllLocations(b,c)},computeIntersectionNodes:function(a){for(var b=this.arg[a].getEdgeIterator();b.hasNext();)for(var c=b.next(),d=c.getLabel().getLocation(a),e=c.getEdgeIntersectionList().iterator();e.hasNext();){var f=e.next(),g=this.nodes.addNode(f.coord);d===y.BOUNDARY?g.setLabelBoundary(a):g.getLabel().isNull(a)&&g.setLabel(a,y.INTERIOR)}},labelIsolatedNodes:function(){for(var a=this.nodes.iterator();a.hasNext();){var b=a.next(),c=b.getLabel();k.isTrue(c.getGeometryCount()>0,"node with empty label found"),b.isIsolated()&&(c.isNull(0)?this.labelIsolatedNode(b,0):this.labelIsolatedNode(b,1))}},updateIM:function(a){for(var b=this.isolatedEdges.iterator();b.hasNext();){var c=b.next();c.updateIM(a)}for(var d=this.nodes.iterator();d.hasNext();){var e=d.next();e.updateIM(a),e.updateIMFromEdges(a)}},computeDisjointIM:function(a){var b=this.arg[0].getGeometry();b.isEmpty()||(a.set(y.INTERIOR,y.EXTERIOR,b.getDimension()),a.set(y.BOUNDARY,y.EXTERIOR,b.getBoundaryDimension()));var c=this.arg[1].getGeometry();c.isEmpty()||(a.set(y.EXTERIOR,y.INTERIOR,c.getDimension()),a.set(y.EXTERIOR,y.BOUNDARY,c.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Ue}}),Wf(Ve.prototype,{isContainedInBoundary:function(a){if(a instanceof za)return!1;if(a instanceof xa)return this.isPointContainedInBoundary(a);if(a instanceof va)return this.isLineStringContainedInBoundary(a);for(var b=0;b<a.getNumGeometries();b++){var c=a.getGeometryN(b);if(!this.isContainedInBoundary(c))return!1}return!0},isLineSegmentContainedInBoundary:function(a,b){if(a.equals(b))return this.isPointContainedInBoundary(a);if(a.x===b.x){if(a.x===this.rectEnv.getMinX()||a.x===this.rectEnv.getMaxX())return!0}else if(a.y===b.y&&(a.y===this.rectEnv.getMinY()||a.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(a){for(var b=a.getCoordinateSequence(),c=new l,d=new l,e=0;e<b.size()-1;e++)if(b.getCoordinate(e,c),b.getCoordinate(e+1,d),!this.isLineSegmentContainedInBoundary(c,d))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof xa){var a=arguments[0];return this.isPointContainedInBoundary(a.getCoordinate())}if(arguments[0]instanceof l){var b=arguments[0];return b.x===this.rectEnv.getMinX()||b.x===this.rectEnv.getMaxX()||b.y===this.rectEnv.getMinY()||b.y===this.rectEnv.getMaxY()}},contains:function(a){return!!this.rectEnv.contains(a.getEnvelopeInternal())&&!this.isContainedInBoundary(a)},interfaces_:function(){return[]},getClass:function(){return Ve}}),Ve.contains=function(a,b){var c=new Ve(a);return c.contains(b)},Wf(We.prototype,{intersects:function(a,b){var c=new v(a,b);if(!this.rectEnv.intersects(c))return!1;if(this.rectEnv.intersects(a))return!0;if(this.rectEnv.intersects(b))return!0;if(a.compareTo(b)>0){var d=a;a=b,b=d}var e=!1;return b.y>a.y&&(e=!0),e?this.li.computeIntersection(a,b,this.diagDown0,this.diagDown1):this.li.computeIntersection(a,b,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return We}}),Wf(Xe.prototype,{applyTo:function(a){for(var b=0;b<a.getNumGeometries()&&!this._isDone;b++){var c=a.getGeometryN(b);if(c instanceof ja)this.applyTo(c);else if(this.visit(c),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return Xe}}),Wf(Ye.prototype,{intersects:function(a){if(!this.rectEnv.intersects(a.getEnvelopeInternal()))return!1;var b=new Ze(this.rectEnv);if(b.applyTo(a),b.intersects())return!0;var c=new $e(this.rectangle);if(c.applyTo(a),c.containsPoint())return!0;var d=new _e(this.rectangle);return d.applyTo(a),!!d.intersects()},interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.intersects=function(a,b){var c=new Ye(a);return c.intersects(b)},Xf(Ze,Xe),Wf(Ze.prototype,{isDone:function(){return this._intersects===!0},visit:function(a){var b=a.getEnvelopeInternal();return this.rectEnv.intersects(b)?this.rectEnv.contains(b)?(this._intersects=!0,null):b.getMinX()>=this.rectEnv.getMinX()&&b.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):b.getMinY()>=this.rectEnv.getMinY()&&b.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Ze}}),Xf($e,Xe),Wf($e.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(a){if(!(a instanceof za))return null;var b=a.getEnvelopeInternal();if(!this.rectEnv.intersects(b))return null;for(var c=new l,d=0;d<4;d++)if(this.rectSeq.getCoordinate(d,c),b.contains(c)&&yc.containsPointInPolygon(c,a))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return $e}}),Xf(_e,Xe),Wf(_e.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(a){var b=a.getEnvelopeInternal();if(!this.rectEnv.intersects(b))return null;var c=Mc.getLines(a);this.checkIntersectionWithLineStrings(c)},checkIntersectionWithLineStrings:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next()
;if(this.checkIntersectionWithSegments(c),this.hasIntersection)return null}},checkIntersectionWithSegments:function(a){for(var b=a.getCoordinateSequence(),c=1;c<b.size();c++)if(b.getCoordinate(c-1,this.p0),b.getCoordinate(c,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return _e}}),Xf(af,Yc),Wf(af.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return af}}),af.covers=function(a,b){return!!a.getEnvelopeInternal().covers(b.getEnvelopeInternal())&&(!!a.isRectangle()||af.relate(a,b).isCovers())},af.intersects=function(a,b){return!!a.getEnvelopeInternal().intersects(b.getEnvelopeInternal())&&(a.isRectangle()?Ye.intersects(a,b):b.isRectangle()?Ye.intersects(b,a):af.relate(a,b).isIntersects())},af.touches=function(a,b){return!!a.getEnvelopeInternal().intersects(b.getEnvelopeInternal())&&af.relate(a,b).isTouches(a.getDimension(),b.getDimension())},af.within=function(a,b){return b.contains(a)},af.coveredBy=function(a,b){return af.covers(b,a)},af.relate=function(){if(2===arguments.length){var a=arguments[0],b=arguments[1],c=new af(a,b),d=c.getIntersectionMatrix();return d}if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof K&&arguments[1]instanceof K){var e=arguments[0],f=arguments[1],g=arguments[2];return af.relateWithCheck(e,f).matches(g)}if(Zf(arguments[2],M)&&arguments[0]instanceof K&&arguments[1]instanceof K){var h=arguments[0],i=arguments[1],j=arguments[2],c=new af(h,i,j),d=c.getIntersectionMatrix();return d}}},af.overlaps=function(a,b){return!!a.getEnvelopeInternal().intersects(b.getEnvelopeInternal())&&af.relate(a,b).isOverlaps(a.getDimension(),b.getDimension())},af.disjoint=function(a,b){return!a.intersects(b)},af.relateWithCheck=function(a,b){return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(b),af.relate(a,b)},af.crosses=function(a,b){return!!a.getEnvelopeInternal().intersects(b.getEnvelopeInternal())&&af.relate(a,b).isCrosses(a.getDimension(),b.getDimension())},af.contains=function(a,b){return!!a.getEnvelopeInternal().contains(b.getEnvelopeInternal())&&(a.isRectangle()?Ve.contains(a,b):af.relate(a,b).isContains())};var Cg=Object.freeze({RelateOp:af});Wf(bf.prototype,{extractElements:function(a,b){if(null===a)return null;for(var c=0;c<a.getNumGeometries();c++){var d=a.getGeometryN(c);this.skipEmpty&&d.isEmpty()||b.add(d)}},combine:function(){for(var a=new t,b=this.inputGeoms.iterator();b.hasNext();){var c=b.next();this.extractElements(c,a)}return 0===a.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(a)},interfaces_:function(){return[]},getClass:function(){return bf}}),bf.combine=function(){if(1===arguments.length){var a=arguments[0],b=new bf(a);return b.combine()}if(2===arguments.length){var c=arguments[0],d=arguments[1],b=new bf(bf.createList(c,d));return b.combine()}if(3===arguments.length){var e=arguments[0],f=arguments[1],g=arguments[2],b=new bf(bf.createList(e,f,g));return b.combine()}},bf.extractFactory=function(a){return a.isEmpty()?null:a.iterator().next().getFactory()},bf.createList=function(){if(2===arguments.length){var a=arguments[0],b=arguments[1],c=new t;return c.add(a),c.add(b),c}if(3===arguments.length){var d=arguments[0],e=arguments[1],f=arguments[2],c=new t;return c.add(d),c.add(e),c.add(f),c}},Wf(cf.prototype,{union:function(){for(var a=new zb,b=new ea,c=0;c<this.pointGeom.getNumGeometries();c++){var d=this.pointGeom.getGeometryN(c),e=d.getCoordinate(),f=a.locate(e,this.otherGeom);f===y.EXTERIOR&&b.add(e)}if(0===b.size())return this.otherGeom;var g=null,h=R.toCoordinateArray(b);return g=1===h.length?this.geomFact.createPoint(h[0]):this.geomFact.createMultiPointFromCoords(h),bf.combine(g,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return cf}}),cf.union=function(a,b){var c=new cf(a,b);return c.union()},Wf(df.prototype,{filter:function(a){this.sortIndex!==-1&&a.getSortIndex()!==this.sortIndex||this.comps.add(a)},interfaces_:function(){return[ha]},getClass:function(){return df}}),df.extract=function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];return df.extract(a,b,new t)}if(3===arguments.length){var c=arguments[0],d=arguments[1],e=arguments[2];return c.getSortIndex()===d?e.add(c):c instanceof ja&&c.apply(new df(d,e)),e}},Wf(ef.prototype,{reduceToGeometries:function(a){for(var b=new t,c=a.iterator();c.hasNext();){var d=c.next(),e=null;Zf(d,q)?e=this.unionTree(d):d instanceof K&&(e=d),b.add(e)}return b},extractByEnvelope:function(a,b,c){for(var d=new t,e=0;e<b.getNumGeometries();e++){var f=b.getGeometryN(e);f.getEnvelopeInternal().intersects(a)?d.add(f):c.add(f)}return this.geomFactory.buildGeometry(d)},unionOptimized:function(a,b){var c=a.getEnvelopeInternal(),d=b.getEnvelopeInternal();if(!c.intersects(d)){var e=bf.combine(a,b);return e}if(a.getNumGeometries()<=1&&b.getNumGeometries()<=1)return this.unionActual(a,b);var f=c.intersection(d);return this.unionUsingEnvelopeIntersection(a,b,f)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var a=new Nb(ef.STRTREE_NODE_CAPACITY),b=this.inputPolys.iterator();b.hasNext();){var c=b.next();a.insert(c.getEnvelopeInternal(),c)}this.inputPolys=null;var d=a.itemsTree(),e=this.unionTree(d);return e},binaryUnion:function(){if(1===arguments.length){var a=arguments[0];return this.binaryUnion(a,0,a.size())}if(3===arguments.length){var b=arguments[0],c=arguments[1],d=arguments[2];if(d-c<=1){var e=ef.getGeometry(b,c);return this.unionSafe(e,null)}if(d-c===2)return this.unionSafe(ef.getGeometry(b,c),ef.getGeometry(b,c+1));var f=Math.trunc((d+c)/2),e=this.binaryUnion(b,c,f),g=this.binaryUnion(b,f,d);return this.unionSafe(e,g)}},repeatedUnion:function(a){for(var b=null,c=a.iterator();c.hasNext();){var d=c.next();b=null===b?d.copy():b.union(d)}return b},unionSafe:function(a,b){return null===a&&null===b?null:null===a?b.copy():null===b?a.copy():this.unionOptimized(a,b)},unionActual:function(a,b){return ef.restrictToPolygons(a.union(b))},unionTree:function(a){var b=this.reduceToGeometries(a),c=this.binaryUnion(b);return c},unionUsingEnvelopeIntersection:function(a,b,c){var d=new t,e=this.extractByEnvelope(c,a,d),f=this.extractByEnvelope(c,b,d),g=this.unionActual(e,f);d.add(g);var h=bf.combine(d);return h},bufferUnion:function(){if(1===arguments.length){var a=arguments[0],b=a.get(0).getFactory(),c=b.buildGeometry(a),d=c.buffer(0);return d}if(2===arguments.length){var e=arguments[0],f=arguments[1],b=e.getFactory(),c=b.createGeometryCollection([e,f]),d=c.buffer(0);return d}},interfaces_:function(){return[]},getClass:function(){return ef}}),ef.restrictToPolygons=function(a){if(Zf(a,ya))return a;var b=le.getPolygons(a);return 1===b.size()?b.get(0):a.getFactory().createMultiPolygon(ab.toPolygonArray(b))},ef.getGeometry=function(a,b){return b>=a.size()?null:a.get(b)},ef.union=function(a){var b=new ef(a);return b.union()},ef.STRTREE_NODE_CAPACITY=4,Wf(ff.prototype,{unionNoOpt:function(a){var b=this.geomFact.createPoint();return bd.overlayOp(a,b,_c.UNION)},unionWithNull:function(a,b){return null===a&&null===b?null:null===b?a:null===a?b:a.union(b)},extract:function(){if(Zf(arguments[0],o))for(var a=arguments[0],b=a.iterator();b.hasNext();){var c=b.next();this.extract(c)}else if(arguments[0]instanceof K){var d=arguments[0];null===this.geomFact&&(this.geomFact=d.getFactory()),df.extract(d,K.SORTINDEX_POLYGON,this.polygons),df.extract(d,K.SORTINDEX_LINESTRING,this.lines),df.extract(d,K.SORTINDEX_POINT,this.points)}},union:function a(){if(null===this.geomFact)return null;var b=null;if(this.points.size()>0){var c=this.geomFact.buildGeometry(this.points);b=this.unionNoOpt(c)}var d=null;if(this.lines.size()>0){var e=this.geomFact.buildGeometry(this.lines);d=this.unionNoOpt(e)}var f=null;this.polygons.size()>0&&(f=ef.union(this.polygons));var g=this.unionWithNull(d,f),a=null;return a=null===b?g:null===g?b:cf.union(b,g),null===a?this.geomFact.createGeometryCollection():a},interfaces_:function(){return[]},getClass:function(){return ff}}),ff.union=function(){if(1===arguments.length){if(Zf(arguments[0],o)){var a=arguments[0],b=new ff(a);return b.union()}if(arguments[0]instanceof K){var c=arguments[0],b=new ff(c);return b.union()}}else if(2===arguments.length){var d=arguments[0],e=arguments[1],b=new ff(d,e);return b.union()}};var Dg=Object.freeze({UnaryUnionOp:ff}),Eg=Object.freeze({IsValidOp:Oe,ConsistentAreaTester:Le}),Fg=Object.freeze({BoundaryOp:la,IsSimpleOp:Rd,buffer:xg,distance:yg,linemerge:zg,overlay:Ag,polygonize:Bg,relate:Cg,union:Dg,valid:Eg});Xf(gf,Da.CoordinateOperation),Wf(gf.prototype,{editCoordinates:function(a,b){if(0===a.length)return null;for(var c=new Array(a.length).fill(null),d=0;d<a.length;d++){var e=new l(a[d]);this.targetPM.makePrecise(e),c[d]=e}var f=new u(c,!1),g=f.toCoordinateArray(),h=0;b instanceof va&&(h=2),b instanceof Ba&&(h=4);var i=c;return this.removeCollapsed&&(i=null),g.length<h?i:g},interfaces_:function(){return[]},getClass:function(){return gf}}),Wf(hf.prototype,{fixPolygonalTopology:function(a){var b=a;this.changePrecisionModel||(b=this.changePM(a,this.targetPM));var c=b.buffer(0),d=c;return this.changePrecisionModel||(d=this.changePM(c,a.getPrecisionModel())),d},reducePointwise:function(a){var b=null;if(this.changePrecisionModel){var c=this.createFactory(a.getFactory(),this.targetPM);b=new Da(c)}else b=new Da;var d=this.removeCollapsed;a.getDimension()>=2&&(d=!0);var e=b.edit(a,new gf(this.targetPM,d));return e},changePM:function(a,b){var c=this.createEditor(a.getFactory(),b);return c.edit(a,new Da.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(a){this.removeCollapsed=a},createFactory:function(a,b){var c=new ab(b,a.getSRID(),a.getCoordinateSequenceFactory());return c},setChangePrecisionModel:function(a){this.changePrecisionModel=a},reduce:function(a){var b=this.reducePointwise(a);return this.isPointwise?b:Zf(b,ya)?b.isValid()?b:this.fixPolygonalTopology(b):b},setPointwise:function(a){this.isPointwise=a},createEditor:function(a,b){if(a.getPrecisionModel()===b)return new Da;var c=this.createFactory(a,b),d=new Da(c);return d},interfaces_:function(){return[]},getClass:function(){return hf}}),hf.reduce=function(a,b){var c=new hf(b);return c.reduce(a)},hf.reducePointwise=function(a,b){var c=new hf(b);return c.setPointwise(!0),c.reduce(a)};var Gg=Object.freeze({GeometryPrecisionReducer:hf});Wf(jf.prototype,{simplifySection:function(a,b){if(a+1===b)return null;this.seg.p0=this.pts[a],this.seg.p1=this.pts[b];for(var c=-1,d=a,e=a+1;e<b;e++){var f=this.seg.distance(this.pts[e]);f>c&&(c=f,d=e)}if(c<=this.distanceTolerance)for(var e=a+1;e<b;e++)this.usePt[e]=!1;else this.simplifySection(a,d),this.simplifySection(d,b)},setDistanceTolerance:function(a){this.distanceTolerance=a},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var a=0;a<this.pts.length;a++)this.usePt[a]=!0;this.simplifySection(0,this.pts.length-1);for(var b=new u,a=0;a<this.pts.length;a++)this.usePt[a]&&b.add(new l(this.pts[a]));return b.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return jf}}),jf.simplify=function(a,b){var c=new jf(a);return c.setDistanceTolerance(b),c.simplify()},Wf(kf.prototype,{setEnsureValid:function(a){this.isEnsureValidTopology=a},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new lf(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(a){if(a<0)throw new c("Tolerance must be non-negative");this.distanceTolerance=a},interfaces_:function(){return[]},getClass:function(){return kf}}),kf.simplify=function(a,b){var c=new kf(a);return c.setDistanceTolerance(b),c.getResultGeometry()},Xf(lf,qb),Wf(lf.prototype,{transformPolygon:function(a,b){if(a.isEmpty())return null;var c=qb.prototype.transformPolygon.call(this,a,b);return b instanceof Ca?c:this.createValidArea(c)},createValidArea:function(a){return this.isEnsureValidTopology?a.buffer(0):a},transformCoordinates:function(a,b){var c=a.toCoordinateArray(),d=null;return d=0===c.length?new Array(0).fill(null):jf.simplify(c,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(d)},transformMultiPolygon:function(a,b){var c=qb.prototype.transformMultiPolygon.call(this,a,b);return this.createValidArea(c)},transformLinearRing:function(a,b){var c=b instanceof za,d=qb.prototype.transformLinearRing.call(this,a,b);return!c||d instanceof Ba?d:null},interfaces_:function(){return[]},getClass:function(){return lf}}),kf.DPTransformer=lf,Xf(mf,ib),Wf(mf.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return mf}}),Wf(nf.prototype,{addToResult:function(a){this.resultSegs.add(a)},asLineString:function(){return this.parentLine.getFactory().createLineString(nf.extractCoordinates(this.resultSegs))},getResultSize:function(){var a=this.resultSegs.size();return 0===a?0:a+1},getParent:function(){return this.parentLine},getSegment:function(a){return this.segs[a]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(nf.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var a=this.parentLine.getCoordinates();this.segs=new Array(a.length-1).fill(null);for(var b=0;b<a.length-1;b++){var c=new mf(a[b],a[b+1],this.parentLine,b);this.segs[b]=c}},getResultCoordinates:function(){return nf.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return nf}}),nf.extractCoordinates=function(a){for(var b=new Array(a.size()+1).fill(null),c=null,d=0;d<a.size();d++)c=a.get(d),b[d]=c.p0;return b[b.length-1]=c.p1,b},Wf(of.prototype,{remove:function(a){this.index.remove(new v(a.p0,a.p1),a)},add:function(){if(arguments[0]instanceof nf)for(var a=arguments[0],b=a.getSegments(),c=0;c<b.length;c++){var d=b[c];this.add(d)}else if(arguments[0]instanceof ib){var e=arguments[0];this.index.insert(new v(e.p0,e.p1),e)}},query:function(a){var b=new v(a.p0,a.p1),c=new pf(a);this.index.query(b,c);var d=c.getItems();return d},interfaces_:function(){return[]},getClass:function(){return of}}),Wf(pf.prototype,{visitItem:function(a){var b=a;v.intersects(b.p0,b.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(a)},getItems:function(){return this.items},interfaces_:function(){return[Gb]},getClass:function(){return pf}}),Wf(qf.prototype,{flatten:function(a,b){var c=this.linePts[a],d=this.linePts[b],e=new ib(c,d);return this.remove(this.line,a,b),this.outputIndex.add(e),e},hasBadIntersection:function(a,b,c){return!!this.hasBadOutputIntersection(c)||!!this.hasBadInputIntersection(a,b,c)},setDistanceTolerance:function(a){this.distanceTolerance=a},simplifySection:function(a,b,c){c+=1;var d=new Array(2).fill(null);if(a+1===b){var e=this.line.getSegment(a);return this.line.addToResult(e),null}var f=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var g=c+1;g<this.line.getMinimumSize()&&(f=!1)}var h=new Array(1).fill(null),i=this.findFurthestPoint(this.linePts,a,b,h);h[0]>this.distanceTolerance&&(f=!1);var j=new ib;if(j.p0=this.linePts[a],j.p1=this.linePts[b],d[0]=a,d[1]=b,this.hasBadIntersection(this.line,d,j)&&(f=!1),f){var e=this.flatten(a,b);return this.line.addToResult(e),null}this.simplifySection(a,i,c),this.simplifySection(i,b,c)},hasBadOutputIntersection:function(a){for(var b=this.outputIndex.query(a),c=b.iterator();c.hasNext();){var d=c.next();if(this.hasInteriorIntersection(d,a))return!0}return!1},findFurthestPoint:function(a,b,c,d){var e=new ib;e.p0=a[b],e.p1=a[c];for(var f=-1,g=b,h=b+1;h<c;h++){var i=a[h],j=e.distance(i);j>f&&(f=j,g=h)}return d[0]=f,g},simplify:function(a){this.line=a,this.linePts=a.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(a,b,c){for(var d=b;d<c;d++){var e=a.getSegment(d);this.inputIndex.remove(e)}},hasInteriorIntersection:function(a,b){return this.li.computeIntersection(a.p0,a.p1,b.p0,b.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(a,b,c){for(var d=this.inputIndex.query(c),e=d.iterator();e.hasNext();){var f=e.next();if(this.hasInteriorIntersection(f,c)){if(qf.isInLineSection(a,b,f))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return qf}}),qf.isInLineSection=function(a,b,c){if(c.getParent()!==a.getParent())return!1;var d=c.getIndex();return d>=b[0]&&d<b[1]},Wf(rf.prototype,{setDistanceTolerance:function(a){this.distanceTolerance=a},simplify:function(a){for(var b=a.iterator();b.hasNext();)this.inputIndex.add(b.next());for(var b=a.iterator();b.hasNext();){var c=new qf(this.inputIndex,this.outputIndex);c.setDistanceTolerance(this.distanceTolerance),c.simplify(b.next())}},interfaces_:function(){return[]},getClass:function(){return rf}}),Wf(sf.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new Za,this.inputGeom.apply(new uf(this)),this.lineSimplifier.simplify(this.linestringMap.values());var a=new tf(this.linestringMap).transform(this.inputGeom);return a},setDistanceTolerance:function(a){if(a<0)throw new c("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(a)},interfaces_:function(){return[]},getClass:function(){return sf}}),sf.simplify=function(a,b){var c=new sf(a);return c.setDistanceTolerance(b),c.getResultGeometry()},Xf(tf,qb),Wf(tf.prototype,{transformCoordinates:function(a,b){if(0===a.size())return null;if(b instanceof va){var c=this.linestringMap.get(b);return this.createCoordinateSequence(c.getResultCoordinates())}return qb.prototype.transformCoordinates.call(this,a,b)},interfaces_:function(){return[]},getClass:function(){return tf}}),Wf(uf.prototype,{filter:function(a){if(a instanceof va){var b=a;if(b.isEmpty())return null;var c=b.isClosed()?4:2,d=new nf(b,c);this.tps.linestringMap.put(b,d)}},interfaces_:function(){return[J]},getClass:function(){return uf}}),sf.LineStringTransformer=tf,sf.LineStringMapBuilderFilter=uf;var Hg=Object.freeze({DouglasPeuckerSimplifier:kf,TopologyPreservingSimplifier:sf});Wf(vf.prototype,{splitAt:function(){if(1===arguments.length){var a=arguments[0],b=this.minimumLen/this.segLen;if(a.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(b),null;if(a.distance(this.seg.p1)<this.minimumLen)return this.splitPt=vf.pointAlongReverse(this.seg,b),null;this.splitPt=a}else if(2===arguments.length){var c=arguments[0],d=arguments[1],e=this.getConstrainedLength(c),f=e/this.segLen;d.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(f):this.splitPt=vf.pointAlongReverse(this.seg,f)}},setMinimumLength:function(a){this.minimumLen=a},getConstrainedLength:function(a){return a<this.minimumLen?this.minimumLen:a},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return vf}}),vf.pointAlongReverse=function(a,b){var c=new l;return c.x=a.p1.x-b*(a.p1.x-a.p0.x),c.y=a.p1.y-b*(a.p1.y-a.p0.y),c},Wf(wf.prototype,{findSplitPoint:function(a,b){},interfaces_:function(){return[]},getClass:function(){return wf}}),Wf(xf.prototype,{findSplitPoint:function(a,b){var c=a.getLineSegment(),d=c.getLength(),e=d/2,f=new vf(c),g=xf.projectedSplitPoint(a,b),h=2*g.distance(b)*.8,i=h;return i>e&&(i=e),f.setMinimumLength(i),f.splitAt(g),f.getSplitPoint()},interfaces_:function(){return[wf]},getClass:function(){return xf}}),xf.projectedSplitPoint=function(a,b){var c=a.getLineSegment(),d=c.project(b);return d},Wf(yf.prototype,{interfaces_:function(){return[]},getClass:function(){return yf}}),yf.triArea=function(a,b,c){return(b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x)},yf.isInCircleDDNormalized=function(a,b,c,d){var e=D.valueOf(a.x).selfSubtract(d.x),f=D.valueOf(a.y).selfSubtract(d.y),g=D.valueOf(b.x).selfSubtract(d.x),h=D.valueOf(b.y).selfSubtract(d.y),i=D.valueOf(c.x).selfSubtract(d.x),j=D.valueOf(c.y).selfSubtract(d.y),k=e.multiply(h).selfSubtract(g.multiply(f)),l=g.multiply(j).selfSubtract(i.multiply(h)),m=i.multiply(f).selfSubtract(e.multiply(j)),n=e.multiply(e).selfAdd(f.multiply(f)),o=g.multiply(g).selfAdd(h.multiply(h)),p=i.multiply(i).selfAdd(j.multiply(j)),q=n.selfMultiply(l).selfAdd(o.selfMultiply(m)).selfAdd(p.selfMultiply(k)),r=q.doubleValue()>0;return r},yf.checkRobustInCircle=function(a,b,c,d){var e=yf.isInCircleNonRobust(a,b,c,d),f=yf.isInCircleDDSlow(a,b,c,d),g=yf.isInCircleCC(a,b,c,d),h=ud.circumcentre(a,b,c);G.out.println("p radius diff a = "+Math.abs(d.distance(h)-a.distance(h))/a.distance(h)),e===f&&e===g||(G.out.println("inCircle robustness failure (double result = "+e+", DD result = "+f+", CC result = "+g+")"),G.out.println(cb.toLineString(new Ia([a,b,c,d]))),G.out.println("Circumcentre = "+cb.toPoint(h)+" radius = "+a.distance(h)),G.out.println("p radius diff a = "+Math.abs(d.distance(h)/a.distance(h)-1)),G.out.println("p radius diff b = "+Math.abs(d.distance(h)/b.distance(h)-1)),G.out.println("p radius diff c = "+Math.abs(d.distance(h)/c.distance(h)-1)),G.out.println())},yf.isInCircleDDFast=function(a,b,c,d){var e=D.sqr(a.x).selfAdd(D.sqr(a.y)).selfMultiply(yf.triAreaDDFast(b,c,d)),f=D.sqr(b.x).selfAdd(D.sqr(b.y)).selfMultiply(yf.triAreaDDFast(a,c,d)),g=D.sqr(c.x).selfAdd(D.sqr(c.y)).selfMultiply(yf.triAreaDDFast(a,b,d)),h=D.sqr(d.x).selfAdd(D.sqr(d.y)).selfMultiply(yf.triAreaDDFast(a,b,c)),i=e.selfSubtract(f).selfAdd(g).selfSubtract(h),j=i.doubleValue()>0;return j},yf.isInCircleCC=function(a,b,c,d){var e=ud.circumcentre(a,b,c),f=a.distance(e),g=d.distance(e)-f;return g<=0},yf.isInCircleNormalized=function(a,b,c,d){var e=a.x-d.x,f=a.y-d.y,g=b.x-d.x,h=b.y-d.y,i=c.x-d.x,j=c.y-d.y,k=e*h-g*f,l=g*j-i*h,m=i*f-e*j,n=e*e+f*f,o=g*g+h*h,p=i*i+j*j,q=n*l+o*m+p*k;return q>0},yf.isInCircleDDSlow=function(a,b,c,d){var e=D.valueOf(d.x),f=D.valueOf(d.y),g=D.valueOf(a.x),h=D.valueOf(a.y),i=D.valueOf(b.x),j=D.valueOf(b.y),k=D.valueOf(c.x),l=D.valueOf(c.y),m=g.multiply(g).add(h.multiply(h)).multiply(yf.triAreaDDSlow(i,j,k,l,e,f)),n=i.multiply(i).add(j.multiply(j)).multiply(yf.triAreaDDSlow(g,h,k,l,e,f)),o=k.multiply(k).add(l.multiply(l)).multiply(yf.triAreaDDSlow(g,h,i,j,e,f)),p=e.multiply(e).add(f.multiply(f)).multiply(yf.triAreaDDSlow(g,h,i,j,k,l)),q=m.subtract(n).add(o).subtract(p),r=q.doubleValue()>0;return r},yf.isInCircleNonRobust=function(a,b,c,d){var e=(a.x*a.x+a.y*a.y)*yf.triArea(b,c,d)-(b.x*b.x+b.y*b.y)*yf.triArea(a,c,d)+(c.x*c.x+c.y*c.y)*yf.triArea(a,b,d)-(d.x*d.x+d.y*d.y)*yf.triArea(a,b,c)>0;return e},yf.isInCircleRobust=function(a,b,c,d){return yf.isInCircleNormalized(a,b,c,d)},yf.triAreaDDSlow=function(a,b,c,d,e,f){return c.subtract(a).multiply(f.subtract(b)).subtract(d.subtract(b).multiply(e.subtract(a)))},yf.triAreaDDFast=function(a,b,c){var d=D.valueOf(b.x).selfSubtract(a.x).selfMultiply(D.valueOf(c.y).selfSubtract(a.y)),e=D.valueOf(b.y).selfSubtract(a.y).selfMultiply(D.valueOf(c.x).selfSubtract(a.x));return d.selfSubtract(e)},Wf(zf.prototype,{circleCenter:function(a,b){var c=new zf(this.getX(),this.getY()),d=this.bisector(c,a),e=this.bisector(a,b),f=new H(d,e),g=null;try{g=new zf(f.getX(),f.getY())}catch(d){if(!(d instanceof x))throw d;G.err.println("a: "+c+"  b: "+a+"  c: "+b),G.err.println(d)}finally{}return g},dot:function(a){return this.p.x*a.getX()+this.p.y*a.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(a,b){var c=b.getX()-a.getX(),d=b.getY()-a.getY(),e=new H(a.getX()+c/2,a.getY()+d/2,1),f=new H(a.getX()-d+c/2,a.getY()+c+d/2,1);return new H(e,f)},equals:function(){if(1===arguments.length){var a=arguments[0];return this.p.x===a.getX()&&this.p.y===a.getY()}if(2===arguments.length){var b=arguments[0],c=arguments[1];return this.p.distance(b.getCoordinate())<c}},getCoordinate:function(){return this.p},isInCircle:function(a,b,c){return yf.isInCircleRobust(a.p,b.p,c.p,this.p)},interpolateZValue:function(a,b,c){var d=a.getX(),e=a.getY(),f=b.getX()-d,g=c.getX()-d,h=b.getY()-e,i=c.getY()-e,j=f*i-g*h,k=this.getX()-d,l=this.getY()-e,m=(i*k-g*l)/j,n=(-h*k+f*l)/j,o=a.getZ()+m*(b.getZ()-a.getZ())+n*(c.getZ()-a.getZ());return o},midPoint:function(a){var b=(this.p.x+a.getX())/2,c=(this.p.y+a.getY())/2,d=(this.p.z+a.getZ())/2;return new zf(b,c,d)},rightOf:function(a){return this.isCCW(a.dest(),a.orig())},isCCW:function(a,b){return(a.p.x-this.p.x)*(b.p.y-this.p.y)-(a.p.y-this.p.y)*(b.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(a){return this.p.x*a.getY()-this.p.y*a.getX()},setZ:function(a){this.p.z=a},times:function(a){return new zf(a*this.p.x,a*this.p.y)},cross:function(){return new zf(this.p.y,-this.p.x)},leftOf:function(a){return this.isCCW(a.orig(),a.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(a){return new zf(this.p.x-a.getX(),this.p.y-a.getY())},getY:function(){return this.p.y},classify:function(a,b){var c=this,d=b.sub(a),e=c.sub(a),f=d.crossProduct(e);return f>0?zf.LEFT:f<0?zf.RIGHT:d.getX()*e.getX()<0||d.getY()*e.getY()<0?zf.BEHIND:d.magn()<e.magn()?zf.BEYOND:a.equals(c)?zf.ORIGIN:b.equals(c)?zf.DESTINATION:zf.BETWEEN},sum:function(a){return new zf(this.p.x+a.getX(),this.p.y+a.getY())},distance:function(a,b){return Math.sqrt(Math.pow(b.getX()-a.getX(),2)+Math.pow(b.getY()-a.getY(),2))},circumRadiusRatio:function(a,b){var c=this.circleCenter(a,b),d=this.distance(c,a),e=this.distance(this,a),f=this.distance(a,b);return f<e&&(e=f),f=this.distance(b,this),f<e&&(e=f),d/e},interfaces_:function(){return[]},getClass:function(){return zf}}),zf.interpolateZ=function(){if(3===arguments.length){var a=arguments[0],b=arguments[1],c=arguments[2],d=b.distance(c),e=a.distance(b),f=c.z-b.z,g=b.z+f*(e/d);return g}if(4===arguments.length){var h=arguments[0],i=arguments[1],j=arguments[2],k=arguments[3],l=i.x,m=i.y,n=j.x-l,o=k.x-l,p=j.y-m,q=k.y-m,r=n*q-o*p,s=h.x-l,t=h.y-m,u=(q*s-o*t)/r,v=(-p*s+n*t)/r,w=i.z+u*(j.z-i.z)+v*(k.z-i.z);return w}},zf.LEFT=0,zf.RIGHT=1,zf.BEYOND=2,zf.BEHIND=3,zf.BETWEEN=4,zf.ORIGIN=5,zf.DESTINATION=6,Xf(Af,zf),Wf(Af.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(a){this._isOnConstraint=a},merge:function(a){a._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=a.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(a){this._isOnConstraint=!0,this.constraint=a},interfaces_:function(){return[]},getClass:function(){return Af}}),Wf(Bf.prototype,{equalsNonOriented:function(a){return!!this.equalsOriented(a)||!!this.equalsOriented(a.sym())},toLineSegment:function(){return new ib(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(a){return!(!this.orig().getCoordinate().equals2D(a.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(a.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(a){this.vertex=a},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(a){this.sym().setOrig(a)},setData:function(a){this.data=a},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var a=this.vertex.getCoordinate(),b=this.dest().getCoordinate();return cb.toLineString(a,b)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(a){this.next=a},interfaces_:function(){return[]},getClass:function(){return Bf}}),Bf.makeEdge=function(a,b){var c=new Bf,d=new Bf,e=new Bf,f=new Bf;c._rot=d,d._rot=e,e._rot=f,f._rot=c,c.setNext(c),d.setNext(f),e.setNext(e),f.setNext(d);var g=c;return g.setOrig(a),g.setDest(b),g},Bf.swap=function(a){var b=a.oPrev(),c=a.sym().oPrev();Bf.splice(a,b),Bf.splice(a.sym(),c),Bf.splice(a,b.lNext()),Bf.splice(a.sym(),c.lNext()),a.setOrig(b.dest()),a.setDest(c.dest())},Bf.splice=function(a,b){var c=a.oNext().rot(),d=b.oNext().rot(),e=b.oNext(),f=a.oNext(),g=d.oNext(),h=c.oNext();a.setNext(e),b.setNext(f),c.setNext(g),d.setNext(h)},Bf.connect=function(a,b){var c=Bf.makeEdge(a.dest(),b.orig());return Bf.splice(c,a.lNext()),Bf.splice(c.sym(),b),c},Wf(Cf.prototype,{insertSite:function(a){var b=this.subdiv.locate(a);if(this.subdiv.isVertexOfEdge(b,a))return b;this.subdiv.isOnEdge(b,a.getCoordinate())&&(b=b.oPrev(),this.subdiv.delete(b.oNext()));var c=this.subdiv.makeEdge(b.orig(),a);Bf.splice(c,b);var d=c;do{c=this.subdiv.connect(b,c.sym()),b=c.oPrev()}while(b.lNext()!==d);for(;;){var e=b.oPrev();if(e.dest().rightOf(b)&&a.isInCircle(b.orig(),e.dest(),b.dest()))Bf.swap(b),b=b.oPrev();else{if(b.oNext()===d)return c;b=b.oNext().lPrev()}}},insertSites:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next();this.insertSite(c)}},interfaces_:function(){return[]},getClass:function(){return Cf}}),Wf(Df.prototype,{locate:function(a){},interfaces_:function(){return[]},getClass:function(){return Df}}),Wf(Ef.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(a){this.lastEdge.isLive()||this.init();var b=this.subdiv.locateFromEdge(a,this.lastEdge);return this.lastEdge=b,b},findEdge:function(){var a=this.subdiv.getEdges();return a.iterator().next()},interfaces_:function(){return[Df]},getClass:function(){return Ef}}),Xf(Ff,i),Wf(Ff.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Ff}}),Ff.msgWithSpatial=function(a,b){return null!==b?a+" [ "+b+" ]":a},Wf(Gf.prototype,{visit:function(a){},interfaces_:function(){return[]},getClass:function(){return Gf}}),Wf(Hf.prototype,{getTriangleVertices:function(a){var b=new Kf;return this.visitTriangles(b,a),b.getTriangleVertices()},isFrameVertex:function(a){return!!a.equals(this.frameVertex[0])||(!!a.equals(this.frameVertex[1])||!!a.equals(this.frameVertex[2]))},isVertexOfEdge:function(a,b){return!(!b.equals(a.orig(),this.tolerance)&&!b.equals(a.dest(),this.tolerance))},connect:function(a,b){var c=Bf.connect(a,b);return this.quadEdges.add(c),c},getVoronoiCellPolygon:function(a,b){var c=new t,d=a;do{var e=a.rot().orig().getCoordinate();c.add(e),a=a.oPrev()}while(a!==d);var f=new u;f.addAll(c,!1),f.closeRing(),f.size()<4&&(G.out.println(f),f.add(f.get(f.size()-1),!0));var g=f.toCoordinateArray(),h=b.createPolygon(b.createLinearRing(g),null),i=d.orig();return h.setUserData(i.getCoordinate()),h},setLocator:function(a){this.locator=a},initSubdiv:function(){var a=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),b=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);Bf.splice(a.sym(),b);var c=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return Bf.splice(b.sym(),c),Bf.splice(c.sym(),a),a},isFrameBorderEdge:function(a){var b=new Array(3).fill(null);Hf.getTriangleEdges(a,b);var c=new Array(3).fill(null);Hf.getTriangleEdges(a.sym(),c);var d=a.lNext().dest();if(this.isFrameVertex(d))return!0;var e=a.sym().lNext().dest();return!!this.isFrameVertex(e)},makeEdge:function(a,b){var c=Bf.makeEdge(a,b);return this.quadEdges.add(c),c},visitTriangles:function(a,b){this.visitedKey++;var c=new mb;c.push(this.startingEdge);for(var d=new X;!c.empty();){
var e=c.pop();if(!d.contains(e)){var f=this.fetchTriangleToVisit(e,c,b,d);null!==f&&a.visit(f)}}},isFrameEdge:function(a){return!(!this.isFrameVertex(a.orig())&&!this.isFrameVertex(a.dest()))},isOnEdge:function(a,b){this.seg.setCoordinates(a.orig().getCoordinate(),a.dest().getCoordinate());var c=this.seg.distance(b);return c<this.edgeCoincidenceTolerance},getEnvelope:function(){return new v(this.frameEnv)},createFrame:function(a){var b=a.getWidth(),c=a.getHeight(),d=0;d=b>c?10*b:10*c,this.frameVertex[0]=new zf((a.getMaxX()+a.getMinX())/2,a.getMaxY()+d),this.frameVertex[1]=new zf(a.getMinX()-d,a.getMinY()-d),this.frameVertex[2]=new zf(a.getMaxX()+d,a.getMinY()-d),this.frameEnv=new v(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(a){var b=new Lf;return this.visitTriangles(b,a),b.getTriangles()},getVertices:function(a){for(var b=new X,c=this.quadEdges.iterator();c.hasNext();){var d=c.next(),e=d.orig();!a&&this.isFrameVertex(e)||b.add(e);var f=d.dest();!a&&this.isFrameVertex(f)||b.add(f)}return b},fetchTriangleToVisit:function(a,b,c,d){var e=a,f=0,g=!1;do{this.triEdges[f]=e,this.isFrameEdge(e)&&(g=!0);var h=e.sym();d.contains(h)||b.push(h),d.add(e),f++,e=e.lNext()}while(e!==a);return g&&!c?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var a=arguments[0],b=this.getPrimaryEdges(!1),c=new Array(b.size()).fill(null),d=0,e=b.iterator();e.hasNext();){var f=e.next();c[d++]=a.createLineString([f.orig().getCoordinate(),f.dest().getCoordinate()])}return a.createMultiLineString(c)}},getVertexUniqueEdges:function(a){for(var b=new t,c=new X,d=this.quadEdges.iterator();d.hasNext();){var e=d.next(),f=e.orig();c.contains(f)||(c.add(f),!a&&this.isFrameVertex(f)||b.add(e));var g=e.sym(),h=g.orig();c.contains(h)||(c.add(h),!a&&this.isFrameVertex(h)||b.add(g))}return b},getTriangleEdges:function(a){var b=new Jf;return this.visitTriangles(b,a),b.getTriangleEdges()},getPrimaryEdges:function(a){this.visitedKey++;var b=new t,c=new mb;c.push(this.startingEdge);for(var d=new X;!c.empty();){var e=c.pop();if(!d.contains(e)){var f=e.getPrimary();!a&&this.isFrameEdge(f)||b.add(f),c.push(e.oNext()),c.push(e.sym().oNext()),d.add(e),d.add(e.sym())}}return b},delete:function(a){Bf.splice(a,a.oPrev()),Bf.splice(a.sym(),a.sym().oPrev());var b=a.sym(),c=a.rot(),d=a.rot().sym();this.quadEdges.remove(a),this.quadEdges.remove(b),this.quadEdges.remove(c),this.quadEdges.remove(d),a.delete(),b.delete(),c.delete(),d.delete()},locateFromEdge:function(a,b){for(var c=0,d=this.quadEdges.size(),e=b;;){if(c++,c>d)throw new Ff(e.toLineSegment());if(a.equals(e.orig())||a.equals(e.dest()))break;if(a.rightOf(e))e=e.sym();else if(a.rightOf(e.oNext())){if(a.rightOf(e.dPrev()))break;e=e.dPrev()}else e=e.oNext()}return e},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(a){this.visitTriangles(new If,!0);for(var b=new t,c=this.getVertexUniqueEdges(!1),d=c.iterator();d.hasNext();){var e=d.next();b.add(this.getVoronoiCellPolygon(e,a))}return b},getVoronoiDiagram:function(a){var b=this.getVoronoiCellPolygons(a);return a.createGeometryCollection(ab.toGeometryArray(b))},getTriangles:function(a){for(var b=this.getTriangleCoordinates(!1),c=new Array(b.size()).fill(null),d=0,e=b.iterator();e.hasNext();){var f=e.next();c[d++]=a.createPolygon(a.createLinearRing(f),null)}return a.createGeometryCollection(c)},insertSite:function(a){var b=this.locate(a);if(a.equals(b.orig(),this.tolerance)||a.equals(b.dest(),this.tolerance))return b;var c=this.makeEdge(b.orig(),a);Bf.splice(c,b);var d=c;do{c=this.connect(b,c.sym()),b=c.oPrev()}while(b.lNext()!==d);return d},locate:function(){if(1===arguments.length){if(arguments[0]instanceof zf){var a=arguments[0];return this.locator.locate(a)}if(arguments[0]instanceof l){var b=arguments[0];return this.locator.locate(new zf(b))}}else if(2===arguments.length){var c=arguments[0],d=arguments[1],e=this.locator.locate(new zf(c));if(null===e)return null;var f=e;e.dest().getCoordinate().equals2D(c)&&(f=e.sym());var g=f;do{if(g.dest().getCoordinate().equals2D(d))return g;g=g.oNext()}while(g!==f);return null}},interfaces_:function(){return[]},getClass:function(){return Hf}}),Hf.getTriangleEdges=function(a,b){if(b[0]=a,b[1]=b[0].lNext(),b[2]=b[1].lNext(),b[2].lNext()!==b[0])throw new c("Edges do not form a triangle")},Wf(If.prototype,{visit:function(a){for(var b=a[0].orig().getCoordinate(),c=a[1].orig().getCoordinate(),d=a[2].orig().getCoordinate(),e=ud.circumcentre(b,c,d),f=new zf(e),g=0;g<3;g++)a[g].rot().setOrig(f)},interfaces_:function(){return[Gf]},getClass:function(){return If}}),Wf(Jf.prototype,{getTriangleEdges:function(){return this.triList},visit:function(a){this.triList.add(a.clone())},interfaces_:function(){return[Gf]},getClass:function(){return Jf}}),Wf(Kf.prototype,{visit:function(a){this.triList.add([a[0].orig(),a[1].orig(),a[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Gf]},getClass:function(){return Kf}}),Wf(Lf.prototype,{checkTriangleSize:function(a){var b="";a.length>=2?b=cb.toLineString(a[0],a[1]):a.length>=1&&(b=cb.toPoint(a[0]))},visit:function(a){this.coordList.clear();for(var b=0;b<3;b++){var c=a[b].orig();this.coordList.add(c.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var d=this.coordList.toCoordinateArray();if(4!==d.length)return null;this.triCoords.add(d)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Gf]},getClass:function(){return Lf}}),Hf.TriangleCircumcentreVisitor=If,Hf.TriangleEdgesListVisitor=Jf,Hf.TriangleVertexListVisitor=Kf,Hf.TriangleCoordinatesVisitor=Lf,Hf.EDGE_COINCIDENCE_TOL_FACTOR=1e3,Wf(Mf.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var a=this.ls.getCoordinate(1);return a.z},getStartZ:function(){var a=this.ls.getCoordinate(0);return a.z},intersection:function(a){return this.ls.intersection(a.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var a=this.ls.getCoordinate(1);return a.y},getStartX:function(){var a=this.ls.getCoordinate(0);return a.x},equalsTopo:function(a){return this.ls.equalsTopo(a.getLineSegment())},getStartY:function(){var a=this.ls.getCoordinate(0);return a.y},setData:function(a){this.data=a},getData:function(){return this.data},getEndX:function(){var a=this.ls.getCoordinate(1);return a.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Mf}}),Wf(Nf.prototype,{visit:function(a){},interfaces_:function(){return[]},getClass:function(){return Nf}}),Wf(Of.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(a){this.left=a},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(a){this.right=a},interfaces_:function(){return[]},getClass:function(){return Of}}),Wf(Pf.prototype,{insert:function(){if(1===arguments.length){var a=arguments[0];return this.insert(a,null)}if(2===arguments.length){var b=arguments[0],c=arguments[1];if(null===this.root)return this.root=new Of(b,c),this.root;if(this.tolerance>0){var d=this.findBestMatchNode(b);if(null!==d)return d.increment(),d}return this.insertExact(b,c)}},query:function(){var a=arguments,b=this;if(1===arguments.length){var c=arguments[0],d=new t;return this.query(c,d),d}if(2===arguments.length)if(arguments[0]instanceof v&&Zf(arguments[1],q))!function(){var c=a[0],d=a[1];b.queryNode(b.root,c,!0,{interfaces_:function(){return[Nf]},visit:function(a){d.add(a)}})}();else if(arguments[0]instanceof v&&Zf(arguments[1],Nf)){var e=arguments[0],f=arguments[1];this.queryNode(this.root,e,!0,f)}},queryNode:function(a,b,c,d){if(null===a)return null;var e=null,f=null,g=null;c?(e=b.getMinX(),f=b.getMaxX(),g=a.getX()):(e=b.getMinY(),f=b.getMaxY(),g=a.getY());var h=e<g,i=g<=f;h&&this.queryNode(a.getLeft(),b,!c,d),b.contains(a.getCoordinate())&&d.visit(a),i&&this.queryNode(a.getRight(),b,!c,d)},findBestMatchNode:function(a){var b=new Qf(a,this.tolerance);return this.query(b.queryEnvelope(),b),b.getNode()},isEmpty:function(){return null===this.root},insertExact:function(a,b){for(var c=this.root,d=this.root,e=!0,f=!0;null!==c;){if(null!==c){var g=a.distance(c.getCoordinate())<=this.tolerance;if(g)return c.increment(),c}f=e?a.x<c.getX():a.y<c.getY(),d=c,c=f?c.getLeft():c.getRight(),e=!e}this.numberOfNodes=this.numberOfNodes+1;var h=new Of(a,b);return f?d.setLeft(h):d.setRight(h),h},interfaces_:function(){return[]},getClass:function(){return Pf}}),Pf.toCoordinates=function(){if(1===arguments.length){var a=arguments[0];return Pf.toCoordinates(a,!1)}if(2===arguments.length){for(var b=arguments[0],c=arguments[1],d=new u,e=b.iterator();e.hasNext();)for(var f=e.next(),g=c?f.getCount():1,h=0;h<g;h++)d.add(f.getCoordinate(),!0);return d.toCoordinateArray()}},Wf(Qf.prototype,{visit:function(a){var b=this.p.distance(a.getCoordinate()),c=b<=this.tolerance;if(!c)return null;var d=!1;(null===this.matchNode||b<this.matchDist||null!==this.matchNode&&b===this.matchDist&&a.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(d=!0),d&&(this.matchNode=a,this.matchDist=b)},queryEnvelope:function(){var a=new v(this.p);return a.expandBy(this.tolerance),a},getNode:function(){return this.matchNode},interfaces_:function(){return[Nf]},getClass:function(){return Qf}}),Pf.BestMatchVisitor=Qf,Wf(Rf.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var a=0,b=0;do{b=this.enforceGabriel(this.segments),a++}while(b>0&&a<Rf.MAX_SPLIT_ITER)},insertSites:function(a){for(var b=a.iterator();b.hasNext();){var c=b.next();this.insertSite(c)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var a=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),b=0,c=this.initialVertices.iterator();c.hasNext();){var d=c.next();a[b++]=d.getCoordinate()}for(var e=this.segVertices.iterator();e.hasNext();){var d=e.next();a[b++]=d.getCoordinate()}return a},setConstraints:function(a,b){this.segments=a,this.segVertices=b},computeConvexHull:function(){var a=new ab,b=this.getPointArray(),c=new ob(b,a);this.convexHull=c.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(a){var b=a.getStart(),c=a.getEnd(),e=new l((b.x+c.x)/2,(b.y+c.y)/2),f=b.distance(e),g=new v(e);g.expandBy(f);for(var h=this.kdt.query(g),i=null,j=d.MAX_VALUE,k=h.iterator();k.hasNext();){var m=k.next(),n=m.getCoordinate();if(!n.equals2D(b)&&!n.equals2D(c)){var o=e.distance(n);if(o<f){var p=o;(null===i||p<j)&&(i=n,j=p)}}}return i},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(a){this.splitFinder=a},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(a){for(var b=new t,c=0,d=new t,e=a.iterator();e.hasNext();){var f=e.next(),g=this.findNonGabrielPoint(f);if(null!==g){this.splitPt=this.splitFinder.findSplitPoint(f,g);var h=this.createVertex(this.splitPt,f),i=(this.insertSite(h),new Mf(f.getStartX(),f.getStartY(),f.getStartZ(),h.getX(),h.getY(),h.getZ(),f.getData())),j=new Mf(h.getX(),h.getY(),h.getZ(),f.getEndX(),f.getEndY(),f.getEndZ(),f.getData());b.add(i),b.add(j),d.add(f),c+=1}}return a.removeAll(d),a.addAll(b),c},createVertex:function(){if(1===arguments.length){var a=arguments[0],b=null;return b=null!==this.vertexFactory?this.vertexFactory.createVertex(a,null):new Af(a)}if(2===arguments.length){var c=arguments[0],d=arguments[1],b=null;return b=null!==this.vertexFactory?this.vertexFactory.createVertex(c,d):new Af(c),b.setOnConstraint(!0),b}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var a=Rf.computeVertexEnvelope(this.initialVertices),b=Rf.computeVertexEnvelope(this.segVertices),c=new v(a);c.expandToInclude(b);var d=.2*c.getWidth(),e=.2*c.getHeight(),f=Math.max(d,e);this.computeAreaEnv=new v(c),this.computeAreaEnv.expandBy(f)},setVertexFactory:function(a){this.vertexFactory=a},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new Hf(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new Ef(this.subdiv)),this.incDel=new Cf(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof Af){var a=arguments[0],b=this.kdt.insert(a.getCoordinate(),a);if(b.isRepeated()){var c=b.getData();return c.merge(a),c}return this.incDel.insertSite(a),a}if(arguments[0]instanceof l){var d=arguments[0];this.insertSite(this.createVertex(d))}},interfaces_:function(){return[]},getClass:function(){return Rf}}),Rf.computeVertexEnvelope=function(a){for(var b=new v,c=a.iterator();c.hasNext();){var d=c.next();b.expandToInclude(d.getCoordinate())}return b},Rf.MAX_SPLIT_ITER=99,Wf(Sf.prototype,{create:function(){if(null!==this.subdiv)return null;var a=Sf.envelope(this.siteCoords),b=Sf.toVertices(this.siteCoords);this.subdiv=new Hf(a,this.tolerance);var c=new Cf(this.subdiv);c.insertSites(b)},setTolerance:function(a){this.tolerance=a},setSites:function(){if(arguments[0]instanceof K){var a=arguments[0];this.siteCoords=Sf.extractUniqueCoordinates(a)}else if(Zf(arguments[0],o)){var b=arguments[0];this.siteCoords=Sf.unique(R.toCoordinateArray(b))}},getEdges:function(a){return this.create(),this.subdiv.getEdges(a)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(a){return this.create(),this.subdiv.getTriangles(a)},interfaces_:function(){return[]},getClass:function(){return Sf}}),Sf.extractUniqueCoordinates=function(a){if(null===a)return new u;var b=a.getCoordinates();return Sf.unique(b)},Sf.envelope=function(a){for(var b=new v,c=a.iterator();c.hasNext();){var d=c.next();b.expandToInclude(d)}return b},Sf.unique=function(a){var b=R.copyDeep(a);fa.sort(b);var c=new u(b,!1);return c},Sf.toVertices=function(a){for(var b=new t,c=a.iterator();c.hasNext();){var d=c.next();b.add(new zf(d))}return b},Wf(Tf.prototype,{createSiteVertices:function(a){for(var b=new t,c=a.iterator();c.hasNext();){var d=c.next();this.constraintVertexMap.containsKey(d)||b.add(new Af(d))}return b},create:function(){if(null!==this.subdiv)return null;var a=Sf.envelope(this.siteCoords),b=new t;null!==this.constraintLines&&(a.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),b=Tf.createConstraintSegments(this.constraintLines));var c=this.createSiteVertices(this.siteCoords),d=new Rf(c,this.tolerance);d.setConstraints(b,new t(this.constraintVertexMap.values())),d.formInitialDelaunay(),d.enforceConstraints(),this.subdiv=d.getSubdivision()},setTolerance:function(a){this.tolerance=a},setConstraints:function(a){this.constraintLines=a},setSites:function(a){this.siteCoords=Sf.extractUniqueCoordinates(a)},getEdges:function(a){return this.create(),this.subdiv.getEdges(a)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(a){return this.create(),this.subdiv.getTriangles(a)},createVertices:function(a){for(var b=a.getCoordinates(),c=0;c<b.length;c++){var d=new Af(b[c]);this.constraintVertexMap.put(b[c],d)}},interfaces_:function(){return[]},getClass:function(){return Tf}}),Tf.createConstraintSegments=function(){if(1===arguments.length){for(var a=arguments[0],b=Mc.getLines(a),c=new t,d=b.iterator();d.hasNext();){var e=d.next();Tf.createConstraintSegments(e,c)}return c}if(2===arguments.length)for(var f=arguments[0],g=arguments[1],h=f.getCoordinates(),d=1;d<h.length;d++)g.add(new Mf(h[d-1],h[d]))},Wf(Uf.prototype,{create:function(){if(null!==this.subdiv)return null;var a=Sf.envelope(this.siteCoords);this.diagramEnv=a;var b=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(b),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);var c=Sf.toVertices(this.siteCoords);this.subdiv=new Hf(a,this.tolerance);var d=new Cf(this.subdiv);d.insertSites(c)},getDiagram:function(a){this.create();var b=this.subdiv.getVoronoiDiagram(a);return Uf.clipGeometryCollection(b,this.diagramEnv)},setTolerance:function(a){this.tolerance=a},setSites:function(){if(arguments[0]instanceof K){var a=arguments[0];this.siteCoords=Sf.extractUniqueCoordinates(a)}else if(Zf(arguments[0],o)){var b=arguments[0];this.siteCoords=Sf.unique(R.toCoordinateArray(b))}},setClipEnvelope:function(a){this.clipEnv=a},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Uf}}),Uf.clipGeometryCollection=function(a,b){for(var c=a.getFactory().toGeometry(b),d=new t,e=0;e<a.getNumGeometries();e++){var f=a.getGeometryN(e),g=null;b.contains(f.getEnvelopeInternal())?g=f:b.intersects(f.getEnvelopeInternal())&&(g=c.intersection(f),g.setUserData(f.getUserData())),null===g||g.isEmpty()||d.add(g)}return a.getFactory().createGeometryCollection(ab.toGeometryArray(d))};var Ig=Object.freeze({Vertex:zf}),Jg=Object.freeze({ConformingDelaunayTriangulationBuilder:Tf,DelaunayTriangulationBuilder:Sf,VoronoiDiagramBuilder:Uf,quadedge:Ig});Wf(Vf.prototype,{interfaces_:function(){return[]},getClass:function(){return Vf}}),Vf.union=function(a,b){if(a.isEmpty()||b.isEmpty()){if(a.isEmpty()&&b.isEmpty())return _c.createEmptyResult(_c.UNION,a,b,a.getFactory());if(a.isEmpty())return b.copy();if(b.isEmpty())return a.copy()}return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(b),bd.overlayOp(a,b,_c.UNION)},Wf(K.prototype,{equalsTopo:function(a){return!!this.getEnvelopeInternal().equals(a.getEnvelopeInternal())&&af.relate(this,a).isEquals(this.getDimension(),a.getDimension())},union:function(){if(0===arguments.length)return ff.union(this);if(1===arguments.length){var a=arguments[0];return Vf.union(this,a)}},isValid:function(){return Oe.isValid(this)},intersection:function(a){if(this.isEmpty()||a.isEmpty())return _c.createEmptyResult(_c.INTERSECTION,this,a,this.factory);if(this.isGeometryCollection()){var b=a;return gc.map(this,{interfaces_:function(){return[MapOp]},map:function(a){return a.intersection(b)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(a),bd.overlayOp(this,a,_c.INTERSECTION)},covers:function(a){return af.covers(this,a)},coveredBy:function(a){return af.coveredBy(this,a)},touches:function(a){return af.touches(this,a)},intersects:function(a){return af.intersects(this,a)},within:function(a){return af.within(this,a)},overlaps:function(a){return af.overlaps(this,a)},disjoint:function(a){return af.disjoint(this,a)},crosses:function(a){return af.crosses(this,a)},buffer:function(){if(1===arguments.length){var a=arguments[0];return ke.bufferOp(this,a)}if(2===arguments.length){var b=arguments[0],c=arguments[1];return ke.bufferOp(this,b,c)}if(3===arguments.length){var d=arguments[0],e=arguments[1],f=arguments[2];return ke.bufferOp(this,d,e,f)}},convexHull:function(){return new ob(this).getConvexHull()},relate:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return af.relate.apply(af,[this].concat(b))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var a=kb.getCentroid(this);return this.createPointFromInternalCoord(a,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var a=null,b=this.getDimension();if(0===b){var c=new fd(this);a=c.getInteriorPoint()}else if(1===b){var c=new ed(this);a=c.getInteriorPoint()}else{var c=new cd(this);a=c.getInteriorPoint()}return this.createPointFromInternalCoord(a,this)},symDifference:function(a){if(this.isEmpty()||a.isEmpty()){if(this.isEmpty()&&a.isEmpty())return _c.createEmptyResult(_c.SYMDIFFERENCE,this,a,this.factory);if(this.isEmpty())return a.copy();if(a.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(a),bd.overlayOp(this,a,_c.SYMDIFFERENCE)},createPointFromInternalCoord:function(a,b){return b.getPrecisionModel().makePrecise(a),b.getFactory().createPoint(a)},toText:function(){var a=new cb;return a.write(this)},toString:function(){this.toText()},contains:function(a){return af.contains(this,a)},difference:function(a){return this.isEmpty()?_c.createEmptyResult(_c.DIFFERENCE,this,a,this.factory):a.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(a),bd.overlayOp(this,a,_c.DIFFERENCE))},isSimple:function(){var a=new Rd(this);return a.isSimple()},isWithinDistance:function(a,b){var c=this.getEnvelopeInternal().distance(a.getEnvelopeInternal());return!(c>b)&&pe.isWithinDistance(this,a,b)},distance:function(a){return pe.distance(this,a)},isEquivalentClass:function(a){return this.getClass()===a.getClass()}});var Kg="1.3.0 (0897fbe)";a.version=Kg,a.algorithm=lg,a.densify=mg,a.dissolve=ng,a.geom=jg,a.geomgraph=og,a.index=rg,a.io=vg,a.noding=wg,a.operation=Fg,a.precision=Gg,a.simplify=Hg,a.triangulate=Jg,Object.defineProperty(a,"__esModule",{value:!0})});ol.control.LayerSwitcher=function(a){var b=a||{};var c=this;var d=b.tipLabel?b.tipLabel:"Legend";this.dcount=0;this.show_progress=b.show_progress;this.oninfo=typeof b.oninfo=="function"?b.oninfo:null;this.onextent=typeof b.onextent=="function"?b.onextent:null;this.hasextent=b.extent||b.onextent;this.hastrash=b.trash;this.reordering=b.reordering!==false;var e;if(b.target){e=$("<div>").addClass(b.switcherClass||"ol-layerswitcher layer-switcher")}else{e=$("<div>").addClass((b.switcherClass||"ol-layerswitcher layer-switcher")+" ol-unselectable ol-control ol-collapsed");var f='<svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;">';var g='<g id="layers"><path d="M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"/></g>';var h="</svg>";this.button=$("<span>").attr("title",d).attr("class","fab-layer toggle-layers-button").html(f+g+h).click(function(a){e.toggleClass("ol-forceopen").addClass("ol-collapsed");resizeLayerSwitcher();c.overflow()}).appendTo(e);this.topv=$("<div>").addClass("ol-switchertopdiv").click(function(){c.overflow("+50%")}).appendTo(e);this.botv=$("<div>").addClass("ol-switcherbottomdiv").click(function(){c.overflow("-50%")}).appendTo(e)}this.panel_=$("<ul>").addClass("panel").appendTo(e);this.panel_.on("mousewheel DOMMouseScroll onmousewheel",function(a){if(c.overflow(Math.max(-1,Math.min(1,a.originalEvent.wheelDelta||-a.originalEvent.detail)))){a.stopPropagation();a.preventDefault()}});this.header_=$("<li>").addClass("ol-header").appendTo(this.panel_);ol.control.Control.call(this,{element:e.get(0),target:b.target});this.target=b.target};ol.inherits(ol.control.LayerSwitcher,ol.control.Control);ol.control.LayerSwitcher.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"};ol.control.LayerSwitcher.prototype.setMap=function(a){ol.control.Control.prototype.setMap.call(this,a);this.drawPanel();var b=this;if(this.map_){this.map_.getLayerGroup().un("change",this.drawPanel,this);this.map_.un("moveend",this.viewChange,this);this.map_.un("change:size",this.overflow,this)}this.map_=a;if(a){a.getLayerGroup().on("change",this.drawPanel,this);a.on("moveend",this.viewChange,this);a.on("change:size",this.overflow,this);a.on("pointerdown",function(){if($(".ol-layerswitcher-image").hasClass("ol-forceopen")){$(".ol-layerswitcher-image").toggleClass("ol-forceopen").addClass("ol-collapsed");b.overflow()}})}};ol.control.LayerSwitcher.prototype.setHeader=function(a){this.header_.html(a)};ol.control.LayerSwitcher.prototype.overflow=function(a){if(this.button){if(this.panel_.css("display")=="none"){$(this.element).css("height","auto");return}var b=$(this.element).outerHeight();var c=this.panel_.outerHeight();var d=this.button.position().top+this.button.outerHeight(true);var e=this.panel_.position().top-d;if(c>b-d){$(this.element).css("height","100%");switch(a){case 1:e+=2*$("li.visible .li-content",this.panel_).height();break;case-1:e-=2*$("li.visible .li-content",this.panel_).height();break;case"+50%":e+=Math.round(b/2);break;case"-50%":e-=Math.round(b/2);break;default:break}if(e+c<=b-3*d/2){e=b-3*d/2-c;this.botv.hide()}else{this.botv.css("display","")}if(e>=0){e=0;this.topv.hide()}else{this.topv.css("display","")}this.panel_.css("top",e+"px");return true}else{$(this.element).css("height","auto");this.panel_.css("top","0px");this.botv.hide();this.topv.hide();return false}}else return false};ol.control.LayerSwitcher.prototype.viewChange=function(a){var b=this.map_;var c=this.map_.getView().getResolution();$("li",this.panel_).each(function(){var a=$(this).data("layer");if(a){if(a.getMaxResolution()<=c||a.getMinResolution()>=c)$(this).addClass("ol-layer-hidden");else{var d=a.getExtent();if(d){var e=b.getView().calculateExtent(b.getSize());if(!ol.extent.intersects(e,d)){$(this).addClass("ol-layer-hidden")}else $(this).removeClass("ol-layer-hidden")}else $(this).removeClass("ol-layer-hidden")}}})};ol.control.LayerSwitcher.prototype.drawPanel=function(a){if(!this.getMap())return;var b=this;this.dcount++;setTimeout(function(){b.drawPanel_()},0)};ol.control.LayerSwitcher.prototype.drawPanel_=function(a){if(--this.dcount||this.dragging_)return;$("li",this.panel_).not(".ol-header").remove();this.drawList(this.panel_,this.getMap().getLayers())};ol.control.LayerSwitcher.prototype.switchLayerVisibility=function(a,b){a.setVisible(true);b.forEach(function(b){if(a!==b&&b.get("type")==="base")b.setVisible(false)})};ol.control.LayerSwitcher.prototype.testLayerVisibility=function(a){if(this.map_){var b=this.map_.getView().getResolution();if(a.getMaxResolution()<=b||a.getMinResolution()>=b)return false;else{var c=a.getExtent();if(c){var d=this.map_.getView().calculateExtent(this.map_.getSize());return ol.extent.intersects(d,c)}return true}}return true};ol.control.LayerSwitcher.prototype.dragOrdering_=function(a){var b=a.data;switch(a.type){case"mousedown":case"touchstart":{a.stopPropagation();a.preventDefault();var c=a.pageY||a.originalEvent.touches&&a.originalEvent.touches.length&&a.originalEvent.touches[0].pageY||a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length&&a.originalEvent.changedTouches[0].pageY;b={self:b.self,elt:$(a.currentTarget).closest("li"),start:true,element:b.self.element,panel:b.self.panel_,pageY:c};b.elt.parent().addClass("drag");$(document).on("mouseup mousemove touchend touchcancel touchmove",b,b.self.dragOrdering_);break}case"touchcancel":case"touchend":case"mouseup":{if(b.target){var d=b.layer;var e=b.target;if(d&&e){var f;if(b.group)f=b.group.getLayers();else f=b.self.getMap().getLayers();var g=f.getArray();for(var h=0;h<g.length;h++){if(g[h]==d){f.removeAt(h);break}}for(var i=0;i<g.length;i++){if(g[i]==e){if(h>i)f.insertAt(i,d);else f.insertAt(i+1,d);break}}}}$("li",b.elt.parent()).removeClass("dropover dropover-after dropover-before");b.elt.removeClass("drag");b.elt.parent().removeClass("drag");$(b.element).removeClass("drag");if(b.div)b.div.remove();$(document).off("mouseup mousemove touchend touchcancel touchmove",b.self.dragOrdering_);break}case"mousemove":case"touchmove":{var c=a.pageY||a.originalEvent.touches&&a.originalEvent.touches.length&&a.originalEvent.touches[0].pageY||a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length&&a.originalEvent.changedTouches[0].pageY;if(b.start&&Math.abs(b.pageY-c)>2){b.start=false;b.elt.addClass("drag");b.layer=b.elt.data("layer");b.target=false;b.group=b.elt.parent().parent().data("layer");b.div=$("<li>").appendTo(b.panel);b.div.css({position:"absolute","z-index":1e4,left:b.elt.position().left,opacity:.5}).html($(b.elt).html()).addClass("ol-dragover").width(b.elt.outerWidth()).height(b.elt.height());$(b.element).addClass("drag")}if(!b.start){a.preventDefault();a.stopPropagation();b.div.css({top:c-b.panel.offset().top+b.panel.scrollTop()+5});var j;if(a.pageX)j=$(a.target);else j=$(document.elementFromPoint(a.originalEvent.touches[0].clientX,a.originalEvent.touches[0].clientY));if(j.hasClass("ol-switcherbottomdiv")){b.self.overflow(-1);console.log("bottom")}else if(j.hasClass("ol-switchertopdiv")){b.self.overflow(1)}if(!j.is("li"))j=j.closest("li");if(!j.hasClass("dropover"))$("li",b.elt.parent()).removeClass("dropover dropover-after dropover-before");if(j.parent().hasClass("drag")&&j.get(0)!==b.elt.get(0)){var e=j.data("layer");if(e&&!e.get("allwaysOnTop")==!b.layer.get("allwaysOnTop")){j.addClass("dropover");j.addClass(b.elt.position().top<j.position().top?"dropover-after":"dropover-before");b.target=e}else{b.target=false}b.div.show()}else{b.target=false;if(j.get(0)===b.elt.get(0))b.div.hide();else b.div.show()}if(!b.target)b.div.addClass("forbidden");else b.div.removeClass("forbidden")}break}default:break}};ol.control.LayerSwitcher.prototype.dragOpacity_=function(a){var b=a.data;switch(a.type){case"mousedown":case"touchstart":{a.stopPropagation();a.preventDefault();b.start=a.pageX||a.originalEvent.touches&&a.originalEvent.touches.length&&a.originalEvent.touches[0].pageX||a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length&&a.originalEvent.changedTouches[0].pageX;b.elt=$(a.target);b.layer=b.elt.closest("li").data("layer");b.self.dragging_=true;$(document).on("mouseup touchend mousemove touchmove touchcancel",b,b.self.dragOpacity_);break}case"touchcancel":case"touchend":case"mouseup":{$(document).off("mouseup touchend mousemove touchmove touchcancel",b.self.dragOpacity_);b.layer.setOpacity(b.opacity);b.elt.parent().next().text(Math.round(b.opacity*100));b.self.dragging_=false;b=false;break}default:{var c=a.pageX||a.originalEvent.touches&&a.originalEvent.touches.length&&a.originalEvent.touches[0].pageX||a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length&&a.originalEvent.changedTouches[0].pageX;var d=Math.max(0,Math.min(1,(c-b.elt.parent().offset().left)/b.elt.parent().width()));b.elt.css("left",d*100+"%");b.elt.parent().next().text(Math.round(b.opacity*100));b.opacity=d;b.layer.setOpacity(d);break}}};ol.control.LayerSwitcher.prototype.drawList=function(a,b){var c=this;var d=b.getArray();var e=function(a){a.stopPropagation();a.preventDefault();var d=$(this).parent().parent().data("layer");c.switchLayerVisibility(d,b)};function f(a,b,c){for(var d=0;d<b.getLength();d++){if(b.item(d)===a){b.remove(a);b.insertAt(d+c,a);return true}if(b.item(d).getLayers&&f(a,b.item(d).getLayers(),c))return true}return false}function g(a){a.stopPropagation();a.preventDefault();f($(this).closest("li").data("layer"),c.map_.getLayers(),+1)}function h(a){a.stopPropagation();a.preventDefault();f($(this).closest("li").data("layer"),c.map_.getLayers(),-1)}function i(a){a.stopPropagation();a.preventDefault();c.oninfo($(this).closest("li").data("layer"))}function j(a){a.stopPropagation();a.preventDefault();if(c.onextent)c.onextent($(this).closest("li").data("layer"));else c.map_.getView().fit($(this).closest("li").data("layer").getExtent(),c.map_.getSize())}function k(a){a.stopPropagation();a.preventDefault();var b=$(this).closest("ul").parent();if(b.data("layer")){b.data("layer").getLayers().remove($(this).closest("li").data("layer"));if(b.data("layer").getLayers().getLength()==0&&!b.data("layer").get("noSwitcherDelete")){k.call($(".layerTrash",b),a)}}else c.map_.removeLayer($(this).closest("li").data("layer"))}for(var l=d.length-1;l>=0;l--){var m=d[l];if(m.get("displayInLayerSwitcher")===false)continue;var n=$("<li>").addClass((m.getVisible()?"visible ":" ")+(m.get("baseLayer")?"baselayer":"")).data("layer",m).appendTo(a)
;var o=$("<div>").addClass("ol-layerswitcher-buttons").appendTo(n);var p=$("<div>").addClass("li-content").appendTo(n);if(!this.testLayerVisibility(m))p.addClass("ol-layer-hidden");$("<input>").attr("type",m.get("baseLayer")?"radio":"checkbox").attr("checked",m.getVisible()).on("click",e).appendTo(p);$("<label>").text(m.get("title")||m.get("name")).attr("title",m.get("title")||m.get("name")).on("click",e).attr("unselectable","on").css("user-select","none").on("selectstart",false).appendTo(p);if(this.reordering){if(l<d.length-1&&(m.get("allwaysOnTop")||!d[l+1].get("allwaysOnTop"))||l>0&&(!m.get("allwaysOnTop")||d[l-1].get("allwaysOnTop"))){$("<div>").addClass("layerup").on("mousedown touchstart",{self:this},this.dragOrdering_).attr("title",this.tip.up).appendTo(o)}}if(m.getLayers){var q=0;m.getLayers().forEach(function(a){if(a.get("displayInLayerSwitcher")!==false)q++});if(q){$("<div>").addClass(m.get("openInLayerSwitcher")?"collapse-layers":"expend-layers").click(function(){var a=$(this).closest("li").data("layer");a.set("openInLayerSwitcher",!a.get("openInLayerSwitcher"))}).attr("title",this.tip.plus).appendTo(o)}}if(this.oninfo){$("<div>").addClass("layerInfo").on("click",i).attr("title",this.tip.info).appendTo(o)}if(this.hastrash&&!m.get("noSwitcherDelete")){$("<div>").addClass("layerTrash").on("click",k).attr("title",this.tip.trash).appendTo(o)}if(this.hasextent&&d[l].getExtent()){var r=d[l].getExtent();if(r.length==4&&r[0]<r[2]&&r[1]<r[3]){$("<div>").addClass("layerExtent").on("click",j).attr("title",this.tip.extent).appendTo(o)}}if(this.show_progress&&m instanceof ol.layer.Tile){var s=$("<div>").addClass("layerswitcher-progress").appendTo(p);this.setprogress_(m);m.layerswitcher_progress=$("<div>").appendTo(s)}var t=$("<div>").addClass("layerswitcher-opacity").on("click",function(a){a.stopPropagation();a.preventDefault();var b=a.pageX||a.originalEvent.touches&&a.originalEvent.touches.length&&a.originalEvent.touches[0].pageX||a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length&&a.originalEvent.changedTouches[0].pageX;var c=Math.max(0,Math.min(1,(b-$(this).offset().left)/$(this).width()));$(this).closest("li").data("layer").setOpacity(c)}).appendTo(p);$("<div>").addClass("layerswitcher-opacity-cursor").on("mousedown touchstart",{self:this},c.dragOpacity_).css("left",m.getOpacity()*100+"%").appendTo(t);$("<div>").addClass("layerswitcher-opacity-label").text(Math.round(m.getOpacity()*100)).appendTo(p);if(m.getLayers){n.addClass("ol-layer-group");if(m.get("openInLayerSwitcher")===true){this.drawList($("<ul>").appendTo(n),m.getLayers())}}else if(m instanceof ol.layer.Vector)n.addClass("ol-layer-vector");else if(m instanceof ol.layer.VectorTile)n.addClass("ol-layer-vector");else if(m instanceof ol.layer.Tile)n.addClass("ol-layer-tile");else if(m instanceof ol.layer.Image)n.addClass("ol-layer-image");else if(m instanceof ol.layer.Heatmap)n.addClass("ol-layer-heatmap")}if(a==this.panel_)this.overflow()};ol.control.LayerSwitcher.prototype.setprogress_=function(a){if(!a.layerswitcher_progress){var b=0;var c=0;function d(){if(c===b){c=b=0;a.layerswitcher_progress.width(0)}else{a.layerswitcher_progress.css("width",(b/c*100).toFixed(1)+"%")}}a.getSource().on("tileloadstart",function(){c++;d()});a.getSource().on("tileloadend",function(){b++;d()});a.getSource().on("tileloaderror",function(){b++;d()})}};ol.control.Button=function(a){a=a||{};var b=$("<div>").addClass((a.className||"")+" ol-button ol-unselectable ol-control");var c=this;var d=$("<button>").html(a.html||"").attr("type","button").attr("title",a.title).on("click",function(b){if(b&&b.preventDefault){b.preventDefault();b.stopPropagation()}if(a.handleClick)a.handleClick.call(c,b)}).appendTo(b);if(!a.title)d.attr("title",d.children().first().attr("title"));ol.control.Control.call(this,{element:b.get(0),target:a.target});if(a.title)this.set("title",a.title)};ol.inherits(ol.control.Button,ol.control.Control);ol.control.TextButton=function(a){a=a||{};a.className=(a.className||"")+" ol-text-button";ol.control.Button.call(this,a)};ol.inherits(ol.control.TextButton,ol.control.Button);ol.control.CanvasAttribution=function(a){if(!a)a={};ol.control.Attribution.call(this,a);this.isCanvas_=!!a.canvas;if(!a)a={};if(!a.style)a.style=new ol.style.Style;this.setStyle(a.style)};ol.inherits(ol.control.CanvasAttribution,ol.control.Attribution);ol.control.CanvasAttribution.prototype.setCanvas=function(a){this.isCanvas_=a;$(this.element).css("visibility",a?"hidden":"visible");if(this.map_)this.map_.renderSync()};ol.control.CanvasAttribution.prototype.setStyle=function(a){var b=a.getText();this.font_=b?b.getFont():"10px Arial";var c=b?b.getStroke():null;var d=b?b.getFill():null;this.fontStrokeStyle_=c?ol.color.asString(c.getColor()):"#fff";this.fontFillStyle_=d?ol.color.asString(d.getColor()):"#000";this.fontStrokeWidth_=c?c.getWidth():3;if(this.getMap())this.getMap().render()};ol.control.CanvasAttribution.prototype.setMap=function(a){var b=this.getMap();if(b)b.un("postcompose",this.drawAttribution_,this);ol.control.ScaleLine.prototype.setMap.call(this,a);if(b)b.renderSync();if(a)a.on("postcompose",this.drawAttribution_,this);this.map_=a;this.setCanvas(this.isCanvas_)};ol.control.CanvasAttribution.prototype.drawAttribution_=function(a){var b=a.context;if(!this.isCanvas_)return;var c="";$("li",this.element).each(function(){if($(this).css("display")!="none")c+=(c?" - ":"")+$(this).text()});var d=$(this.element).position();var e=a.frameState.pixelRatio;b.save();b.scale(e,e);var f=$(this.getMap().getViewport()).parent();var g=f.outerWidth()/f.get(0).getBoundingClientRect().width;var h=f.outerHeight()/f.get(0).getBoundingClientRect().height;d.left*=g;d.top*=h;d.right=d.left+$(this.element).outerWidth();d.bottom=d.top+$(this.element).outerHeight();b.beginPath();b.strokeStyle=this.fontStrokeStyle_;b.fillStyle=this.fontFillStyle_;b.lineWidth=this.fontStrokeWidth_;b.textAlign="right";b.textBaseline="bottom";b.font=this.font_;b.strokeText(c,d.right,d.bottom);b.fillText(c,d.right,d.bottom);b.closePath();b.restore()};ol.control.CanvasScaleLine=function(a){ol.control.ScaleLine.call(this,a);this.scaleHeight_=6;if(!a)a={};if(!a.style)a.style=new ol.style.Style;this.setStyle(a.style)};ol.inherits(ol.control.CanvasScaleLine,ol.control.ScaleLine);ol.control.CanvasScaleLine.prototype.setMap=function(a){var b=this.getMap();if(b)b.un("postcompose",this.drawScale_,this);ol.control.ScaleLine.prototype.setMap.call(this,a);if(b)b.renderSync();if(a)a.on("postcompose",this.drawScale_,this);this.$element=$(this.element).css("visibility","hidden");this.olscale=$(".ol-scale-line-inner",this.element)};ol.control.CanvasScaleLine.prototype.setStyle=function(a){var b=a.getStroke();this.strokeStyle_=b?ol.color.asString(b.getColor()):"#000";this.strokeWidth_=b?b.getWidth():2;var c=a.getFill();this.fillStyle_=c?ol.color.asString(c.getColor()):"#fff";var d=a.getText();this.font_=d?d.getFont():"10px Arial";b=d?d.getStroke():null;c=d?d.getFill():null;this.fontStrokeStyle_=b?ol.color.asString(b.getColor()):this.fillStyle_;this.fontStrokeWidth_=b?b.getWidth():3;this.fontFillStyle_=c?ol.color.asString(c.getColor()):this.strokeStyle_;if(this.getMap())this.getMap().render()};ol.control.CanvasScaleLine.prototype.drawScale_=function(a){if(this.$element.css("display")=="none")return;var b=a.context;var c=this.olscale.width();if(!c)return;var d=this.olscale.text();var e=this.$element.position();var f=a.frameState.pixelRatio;b.save();b.scale(f,f);var g=$(this.getMap().getViewport()).parent();var h=g.outerWidth()/g.get(0).getBoundingClientRect().width;var i=g.outerHeight()/g.get(0).getBoundingClientRect().height;e.left*=h;e.top*=i;e.top+=this.$element.height()-this.scaleHeight_;b.beginPath();b.strokeStyle=this.fontStrokeStyle_;b.fillStyle=this.fontFillStyle_;b.lineWidth=this.fontStrokeWidth_;b.textAlign="center";b.textBaseline="bottom";b.font=this.font_;b.strokeText(d,e.left+c/2,e.top);b.fillText(d,e.left+c/2,e.top);b.closePath();e.top+=2;b.lineWidth=this.strokeWidth_;b.strokeStyle=this.strokeStyle_;var j=4;var k=parseInt(d);while(k%10==0)k/=10;if(k%5==0)j=5;for(var l=0;l<j;l++){b.beginPath();b.fillStyle=l%2?this.fillStyle_:this.strokeStyle_;b.rect(e.left+l*c/j,e.top,c/j,this.scaleHeight_);b.stroke();b.fill();b.closePath()}b.restore()};ol.control.CanvasTitle=function(a){if(!a)a={};if(!a.style)a.style=new ol.style.Style;this.setStyle(a.style);var b=$("<div>").text(this.text_).addClass("ol-title ol-unselectable").css({font:this.font_,position:"absolute",top:0,left:0,right:0,display:"block",visibility:"hidden"});ol.control.Control.call(this,{element:b.get(0),target:a.target})};ol.inherits(ol.control.CanvasTitle,ol.control.Control);ol.control.CanvasTitle.prototype.setMap=function(a){var b=this.getMap();if(b)b.un("postcompose",this.drawTitle_,this);ol.control.Control.prototype.setMap.call(this,a);if(b)b.renderSync();if(a)a.on("postcompose",this.drawTitle_,this)};ol.control.CanvasTitle.prototype.setStyle=function(a){var b=a.getText();this.font_=b?b.getFont()||"20px Arial":"20px Arial";this.text_=b?b.getText():"";var c=b?b.getStroke():null;var d=b?b.getFill():null;this.strokeStyle_=c?ol.color.asString(c.getColor()):"#fff";this.fillStyle_=d?ol.color.asString(d.getColor()):"#000";if(this.element){$(this.element).text(this.text_).css({font:this.font_})}if(this.getMap())this.getMap().render()};ol.control.CanvasTitle.prototype.setTitle=function(a){this.text_=a;$(this.element).text(a);if(this.getMap())this.getMap().renderSync()};ol.control.CanvasTitle.prototype.getTitle=function(a){return this.text_};ol.control.CanvasTitle.prototype.setVisible=function(a){if(a)$(this.element).show();else $(this.element).hide();if(this.getMap())this.getMap().renderSync()};ol.control.CanvasTitle.prototype.getVisible=function(a){return $(this.element).css("display")!="none"};ol.control.CanvasTitle.prototype.drawTitle_=function(a){if(!this.getVisible())return;var b=a.context;var c=a.frameState.pixelRatio;b.save();b.scale(c,c);var d=b.canvas.width/c;var e=$(this.element).height();var f={top:0,left:d/2};b.beginPath();b.fillStyle=this.strokeStyle_;b.rect(0,0,d,e);b.fill();b.closePath();b.beginPath();b.fillStyle=this.fillStyle_;b.textAlign="center";b.textBaseline="middle";b.font=this.font_;b.fillText(this.text_,f.left,f.top+e/2);b.closePath();b.restore()};ol.control.Cloud=function(a){a=a||{};var b=document.createElement("div");b.className="ol-cloud ol-unselectable ol-control";ol.control.Control.call(this,{element:b});this.cloud=a.img;if(!this.cloud){this.cloud=new Image;this.cloud.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYRBhgFS4lkHAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAA6lBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Le70HAAAATnRSTlMAAwkMDxUXGiAiJSowMzU3Ojw/QkRGSUtOT1JUV1lbXmBiZGZoam1ucXN0d3l6fX6AgoSGh4qLjY6QkpSVl5mbnJ6foaKkpaeoqqutrrA/NNYeAAAAAWJLR0QB/wIt3gAALhJJREFUeNrtfel6azeuLAryd9//fbuFuj+IkYtLkr2902dyEseDLIkkiKFQAET+h3/gH/iL//v4Xy0w//Ul53/xJcAHq3q1WHD+/9feEbH+u3zw7+4H//Jpg++2Ctc3cvwT/gPSwX9U3PHhfvct5H8RDXE8r+/dirZ8+Mrg14AQggL252R8TfAf3oAfv+DdH2K+yvv9Zt+H3xWEv64Drq+HswDcvih36fft4N9Y+usN+HPZw+nu490rtC1Al4A/vQy3f47fXvd19Ygrn7bijfYbB94lgL+wAfsK8X1b9tHqh/Dv/7vRpGy/2y+E68XfFwP8vnJBlwB8bgSPBnCqAP6+cfxdJejiPZZ/kALmZ97dgnH4/Yvf3gJ8V/u9/D32he/2b78FtxIAXkWAf8E0+tvkDxd8v/yuBHDZiRQBvvSBt8Vf9uFv+QGvD/nenuCk/ptLEN/z+DRTBXQJIPjnUnBePX9LB1xkPxZ82JOXB44bK5Ar50E3/qetgLTj3RaNzS/wt4DL0nGjDgn25XKeP//o/DcvnT97Ipci7NYfcl3+JRwmuG1G+1VX+9Ma4BfVIf5s//KcQfRzxnQBLzEBL89bC+ZZD447QPCzHXh7rvuZfNsNRPvX/0+kdpn3/wYI4ulbXveAu2P8G4ESfkP3+S6eRf9kC187g7xoA25bcNyQ/8AGoEtAN3Qp+oRsNuH7e9AVAS9q4M0WfHgFfmZIEGeLoyEsNwvnV8IN9uWaH+4oUU5bcNWNP9Nk+JPjx77u7gPy3v7DVQHugmBej3/swCFG+KlTgD9eP2S7ATjY2NOG487tPQEiww3Yv/4TTYA/uf3t6ImuCgjh4eyH5wnB1fzxhUrgi/9+HijjJ84Tc/G7GsQ9Ajos4/pCxdRURGwsBwfP6PbQe6zAH+gB/Fj81ycKDlYAvF776w3Q+sZ2L+d4Pe5Fnz8OEvFtzVmaf9cBuwo4vET/tVaqzLcgfJsXwBBvrsCPtwAfq8ymNUsCLn4AXjz3epyaqNXqkXbdrnpgftmN/3EHtg389VigbjHm/S9P+LT+TfHrBhao1QGb78bJFG4mgHfKkX/VCnRtt/uAtzhY+0bLC/DVNx0otGkKpyHctcDZDJDf0OjfBkSwiz+OHlH7H+elbw/S/sRhBqwFh7w6CF0L4OoX/cQg4puPxTj+viNyFwutU5YRIOvlyc1Pz9T2SOiAiF1Env17yucXGz8+/yYFPeRvMZCeZO1y+G0Lhgq0HRo/40K8LP97qhBDx71+qLt7S9UhIBC0gLjQEDVdpgMDAuiHX0c9fAGCZXNMXkYBmyR8LANtqR+jwtjV/6YP60sXeVzyJSUVmwvUv7zgpHbYgT0C6Iv/pjHA99X/UQ2WMOgFAmvnPdaPWq+1z8MKLmVobXHXLBG7WWRYAv7xBlxjf5x2oPmG6O7di9uu9ZhYkm3SsJlBEwrByR9IuIgnLfAqyfvmCoR+5CXrARnrH6in+3kd+9Hz6neAiLEDdoMRsaKlg3vEtglTD/LXrgDaIa+lX9Jg8OimvGE9rr1FBGEfjZsIaHyl8Ws7+LpxStyX/60dwGcKsMt/vwilIFL80deq7W7rVCd5WyhipCFvr5qKxH8itvyDGwXPofs2Vcj3Ch4f6r+pAUfck9+E+Ovu+vGQRFuWAn6CT77Q3CZkMwZX0IQXA8B2K17bQ9wriWKV7KePif8h7DuG/6OWGnGQEsMXQPwBSeN6vxCK6XEHxHT5SjzklEPrcSrFe5eoLe4TEcAu/RgpULhmn+sfT09cLENoDZLyDEewHVpzlCxWYud1cVt2bMcnMvA+YrpKwCUK0nGzu6Ef8h/BAWRKgAlJsbEBOh2EsQOn5Nmm/yhdOf6RFYh1X86/7n77oq0+cXFu8XDlkFwJkmsHSnNr6cd+8PlVBDK8wiFs8sD3cQHeQaCXm182sDl+mKu/wOBsYcAEUvLdkib0ZLEKEAFvyUDbgXPylBcF8F4Gvjajeu8IYMd20E5fp4sH8ZVgcwDZZWf32tXKuWwP8d/536aPQH+VIBesCKqhjOD65wdXoCWL8/SRi3YB6JZfC+Vs0R/jHtB1f3iNGHBoOvCpBrBe0WSIQI9+rDvLF4CAuwDwpzpgu/fTDUZfv+4p0BXFFLscTfmhpQXhFyBd3rUD2gAC63hBrcZELfmTIzfA8c+Gkh1Yje9coFKBaFEB+u3X9Ah0IhkzMHLktECI/GSId2qirkuaUrSePNiCSMqASSm1n3yvCN9uwLYJzSdWgQjU+vpVBB3ZCzuIipIB1AWoVHcthuVBr7zZ3IK5C3bNmxBj7XwNEb2yApf1dwsA0dR+mqKAfk1baZBahsBAWEHCRCgIGLCUm7Q9kXkRuoCNjePGJPDV87VH+LpoyhfddUCqaG3XH37G6KbZDjFwdyhEBgLaw+EUEJuwoB1zabajZnnz8/xf6EF8SwOiyX+Ygbb+rtrBFtwOFg2UIijQD3WhfUMgh028bOwAUW3qe7b1v1YD+HT9KQBwJe1qUFE3PLyXOhwV08Wa6k/akFgxZYBgtjk3GdzoOPNtB/aLkPkRDkXAW0//vQtc1z89AF23IGMgnQDBcHHC9nsiWcNFHuAOMuTdT3yHT/vjrE58vwi+A6ECbkUA79bfRADhwELT/EU0hJkYnJyNIFE0f7jOfdNpWR5Bgan7/e307GoWNg1B7jvwSgvg8/U3k6DuqqQAzNRgx6p35vAeJ8OO+V8hCzDy2rp4ZmPLqDfZXyiSdN3Xd+DbG5AW4MX6h/5HMiPqAu8gkElHDsNR3thAHc4DhQRIQOiPt3DubHOGEBnm2IGuBM478PVCA/YvwslHrLcZN91Z0sQh++qaDJAtlVKxmFwLg3JHlUJ4aKGGARxYulsQqjl8vooxEZmmm7gI70zA0IPuAqM5AO4Q5TmrFQeaDQbT5uWslWoJefrwWjrOPB0XSmGDyZdB0O4h5gUKgK2fPm8y5/hg/Zse0LSAaycaPNhimHasEr8RS9QQBammdC5ryQn8YQTMiX/a9AQrqeTbk9HA3IsPr0BP9UzmDwb4h5EKuENYM3YTanAjEWxKFYMz5VAsE04nHRn/O9Aw/i58bUtmqq47sV6rdvB4Bb5eUQGwITgYYKavH5gs4QIznUJGzyUz31/Ax/RAGhk7Q8iVdh46lE5EdEswyovVDmmYoNnmw9ESa283AOPEJzMCBfpjPEKtgrhWm++xQ7vDlk70MvaeHYCIedpdBCTit25LSzocaU9lF8+79AHapqQIBPn4WxJwiQFaKKwjxlk/6Xn/YpSpw/zETI3qhXJE0RXLpuJfr8pO6vW7wUPpjVY0SVGjXwIpdO64BXrvHEBmQrBUvha84c+t23P6wauKKJrHB9b6NWxCBEoQQKHuVq6wmRFAo0OxAMY1POv1JoCYUvhSAnAgRJQBiE3T3QHYuACFks9dR6oOiVvj5tAEMFBEDSH9hau7GSa6NdsOdFBORrU0KHcigBd5oMCAUB7AsIDa9mdlerXwu3zP+Y4LC1AClUOmwwj+sGWxCcZ94GRTEBbG3WQgiT0essIDN4/4Mx0wZWGjBlbwh3mXVJA6mYM5ysUoL2WGdX1XTLRuNVxVgQ4e03e/7CDErZ91uJX5onZmObSzf58dxoDCKwhcJx7Xd3lAjR2a16LC9QiUV/zmUbCujVCIZBZUG6iFBDG4XP8WUrr/T1jHj2yXASalZAYCPIoAzlFQk/4GgoQVbOtvGXEtz9USI4bQwFB3LvoAEFdTe/zIugMjvJVqvkELSCAhIu7Qef46n2nsxWuCxOX2o7nAkQLw3WiZ8cH8qTAFWAFqpbsgXKIEESEBJ9x5fNMd19oWoiUblniYRPWgxZn3JGJGxUMLHPDRr3s/UHoisAygykaQaM4ukC69mIMk1HR91CBCqEsVAxkMGVqhW3TXudbXsNqwuFMc+j02yzFFXnkOd7m/r1snUDDqwrSFgE3+Ly6FiznXHyxRN4ABGoFaWaGAx5vFWzsAoTYe2EAaBIUfwZYKBNMIYsOPI4nI+ucTV7gyool5uRcMLOdmowOp7I0DsoBomX0VFVvr18ErZYVSK2AAhupzLhocJPLo3g9VF2ZqLmmhBEMS0NzA19nhqxvYHSJos/+BAzU+hGlvlAYBQ1wBQoVUTXEFREylKivXQ5UioJJbvU1kfZmoh2SkN3AxyzvQ5aF5TUdQ5Ot09kUIdjuo0jBwbRwZjThkT2yzvEiuHaQu+QY048I8/YwHBOuBtpNrHA4qnWEjBOCVe5xxcITgx046Xy+coCbnQE8BAIP1nM5/B8DoADg8tOvO+FpevitMeMTlAXl5BSbBvA7dSFGDzRTz7g9jZqhjx/lWCS5orZEjlvArPJbBDKNU/GzX5VWKQOXpIYyAK49Mq+xpYuQuK8x/47wnv2g5jEs9MjTlSJIN8usiG8owAfgoLwDP3dYnWSEaIqzT+IUGWUPT6Wf6uar6pIjKA4uspSLC5wI11BWYjruuvf4pQ3jptnxlUpejszhFlkmAhhBbJU8CQSt4+IIPfx28QNltXKd/TTKc9rRHevAKeQoEqqpitsQA5gpTDCsEgruOy+5l8A8mAMEsMhbz66DLGDgHxhxW6cWGSyuENswkfShA8KUSDMWzNUTSjgfOPYhdW/4Oirsj+pUwAADq8nxBi/C+LdXfmAawLdVtIb4hNtO+VRf3eCisIkZE6Xs1bMHXDRpUdIa0/xXPNk5Id2HcXidb4LFeys3n02MIo3oM7GBYODrhBokoG8l2YYHsEWPAXhRkjsT3b4EMtifcIvK42sGvCw52YYNoRsDqZr5yAuxlsiqUh7t6D/PACK4EDVR1G6+ZJWrKI/lVWjBmRFdbDxJrfuGGjtgWJA9Y8OQMf530YSMyhg+gkQNHX/8oElN3mLigS8AgX/JcCtTUFi+AucmmAfuFYyAP1n0ABGINFg1SXMDHK5jqF2BjGasNC8COEPBGCYbgaGM0tF64uLpMRDgrEACPhW4aKKaAUKjLw1MB3GJ3ZwmV9mlp4EtubaHEy3awu7lsWIGaXv2g9pS8LP/oCWLEROEEllpUv8wZKDnUQRUAut6mCB8al7GIRISpLWBgetsEQ6rY3y4k8wTSTCQKGKZ7SrZcEtvhIA6+7ntPcNRBJC8yaR7O7XkM9HXtPEQB/TILAX0s8GRFAR5A8PHvFUl5/ibeH2RofFeoDo5ZhEQWlDOb+syOlQBX6BxXY/h1Xvt6G02gZiMUDbvFZSSqFpxP/fr3ugR4qkC1AAQRCEwFcCEJT1dczYOiZKstdv9fI08OApYM2YWuJCktPOSwhvR9iktyTg9/XSCHec91EqA7DO92mysUchqsiqgaIAqCAL6IQn4BW/QqwwAQKhVSyR8HBrC8OYiApJWzTy/kJOCsg+12r/yInHpxnv2AUQYhk/0sED5S3RXHgw9b6D4d6HvqgryEIlT10Hc1DBBg5XfBpffZafMVClM7NWCJgV+HiqhGkO9ZsQsl1qaR7PnSePDXNR+CTdFrlbo1qMTfvSlV5evZ7iMVFK4IAmLTutJRs0SalvCv1C5AbaBPOYm2frmcxPUDXUxMpTqanCxTG0EhhwrYWExvkqMj3+3+UKRFk5tuqiKWDROXLQapDpvp0/WAqAeGg+wQd84JIPWiSZYHherukBJcxKm2oUGBe0WNn227G56yKUF0p4st91GyqpEWDqTCKFDn8CwhMV1BpSfAHnH8y8OlrpC5x66sWuzRgnj3CQhd3rwRKlweP4JqFUB7segOXbrv/QD0OohidfNxVoH5nABpEFFYS6GpiS1R0S23hIj609ZJGXY0u+VqX1rbqQrWVuhFDZRIRWwFUZ1hDBb5brLtjmawwKcO9ZjeIglrHZaVjgp3XIAIXHoat4DqTPr7HphHmuxoMQtCJhp+ZitCUpguX9ixD7WVmG+YEDe5fwmKMtD65v364hWR5dZO40R5MQHLFcXBgZ/oNqRN9grTXS8GD4BjV5cOXUBYB4yTbmSw8iyWQ23OjWGXfn2OreCrvACu7T8hG7NhoEeP4nZH+dPj62vlQEhkriwANhWI+eVHZkSjHaVGCNL6VFXOEOkDZ/akPEKWIUTPjgjFjh2ZpiLYrUBHHdLY2SPUkWlGZelf529X1RcgBjM8YI9lO8AHWmvdUaIQDlJb6CKKgI0YAsL6z1Y8JYQ+x9JbVAxudLVuEihvABFecj5aSOjC9AlYI4CJCOSpCOh45b8U5QUzdoDd1qBBX0uLFggtFIhle7bkDKl1+WdkZuq81dTkTJYoT0gujhBq9Ri1gO1NWe2ATYFZ4bsGfORcikgMrMQHpoptrXaoKzxwvFhG3pnlyHtVrBekRRJpfVJyxkZqm+TPkHC90BYMVTBADIQhIgVvfKR05m7mbVXLbSOS7wdRKrdIHw3ty+QXyE6tb52EkANJXArWjnnS1RmDcf0/7R2ymUEc5L8HgyW3NnoCZC4IoEGFMIW5ylb2NBJ45SAiopqgxZabL1wehDUOOsiEGCgUfaaa4t6rt7VfORdEcWeJFecLhz/DqzS64Ov/Pej1jnQoUJEEsHG1W91J/RRIWobTRxiOZNVqNrpycTiaq3rJWI/ewzetDnWTClwl4qRIzRrnnSLC55OAqgihD+gS1qgQY71zlUa9Lsyl5WP2KhX0khNpmPSiy3mQ0lOVJUdbDcdBEnRj4GzJEJyuTT3iERyi57+eoQLUQgYaxBUaS1r5FLzoIHag2VbMEjtsuZsqX1iEwdhn7Q0Kmtu+l7LgsAHcz553reB3zfBQKp+2yt9pTKJSZKIGNQwbCVFRqRbdu/EFTYQywZoswPNdVXQmd18H9xkf2KVbBxNOZhmPJs+9Cjvc6C4vzQyPx0P5pH499EF7Cs0pnhzmp3FfixwLzas6qq6LmhYKgx1SKCLqgiGHC4vPSqIKSZ6CQZGbgQArxyid/hR5ETWu9CO9RFpFCHNE08muwdpulL/lwxCarm1cHSfKZs0Qk0HQ7Acgoou50WUHuIdKD/13vw6FLoPlonK9S4pEqPlv+RJR+Zc8SDxE24HQSU8ruOlBU5UXVkU9u35oI8j84ltz4Rn5IlbFxQJaZ7mqdU7IDgQws2l7NJQ/0KlFW3+LUE8QCP/1b+pDFSuH7bos3FZbNU+7MdlebWVLRluilHzMfp0MkGjntUB4JX/jYrH3N6BTxc1sFzc/gc0BGk0F//3veOASWMAZc7KNUkFeIzbYc4kwPXwWDi3WHJN2LXClp6MTOvSq+896Qe+3qFiwaNyJqadKVhI0sFgKVCGuHbZt7l0yWgXGsFGuSrP+scOk2IPbRJhcPW9M51ZkhtGVdSjBuUMDB0C1vdpcx3VNvr5UHg+BUMyMHLob6AxdJPvfVTzzhKsyNy0p/S61guQpoVtBuo6l6LGdy1Tvekea3+v9xvAAVFNpIJKcCpqIGE2K77/Uf4trYm96hzh2t4f+MSdWIHkyHLJq1XUjKX2J5MthogXu3JrLCE7q5lTxICeW3Y8gT7rS8xRRrxq8NhwGFmoYAlEXHNNa9frnKgALgCx6V0Q+PaksEiWteO0P6PAL9rdJqSfa0SWG9AJiJlEEsfJCQHQ19OMnefVSjKnw1TcYpDOiubWVTs7z8EhMOld9rAmhEfCKHqayq/nRAM1F3165VVCYPHqM1hI1VgkQKaJ0gLBoyjZayysiGRg1j434HluzdVPwCLHKj7oCwEtAQG9jnb4Vm6r01lfxa8+MWG+8Ll5foQNhxSJ7SbdwGI3ZmPrflYN5Ms1rBQIr4NZWNaPCFzMcjluhJyO4RctoHMJRxJAqXRewuaoDWsuvPe3fiMCUVVQmQR1QSmPENF6pzeswyA4qI2yccR72gs/TFugIlqd5uQsMrRIYzBMr8ve6AsYLnlJoBtKDJdHKOLSbjkVEKSMa5RMkSNJMZhIbuikBhdxE8zjoAI6AACcwfd+B1uGDxifNHVpgWYPYoARmAA+ZvFYUHNXC/SL4ZVCEiz2zRrtOVh3oU29vcHK+WbGnjl+zgfUjoOLcsFGP4BrBOaihvBq7S8Kqe4o/Qoai7wBVQYlLNhetQ1ijBHh5lmoL1j/oD5inz/0KTC9ghgI4tPIRmmvo55O09b0X8kHkXKjHlvu7uGVs/WsDU5idnkhyzFc4Ni8ePZfe7IuerolnfJrM1y+qlovZIYE0s+eKcq3PQVi/m+0EwjVgq8cqfd6BMxvEJD2FMaGZ0x/rDS1ThQ+dts2303uwZKnl6mDottia7NMLOP3Wrg8LpQbpxtu/JXtVGvYRBCu7zp4jQOk01vUnnBbU7BI2EOTQrLzA1asjdHGTx3UgT6Nfe5GgxQPdSxB2hkJFhWzC0U8DGv2pfJUa6X1s+tysgYSsrstsiXhtGMYrjFtPdsLr3tyTs+Dguzk2k+rjImZCMQJs3hp6ABqanYkWV7BFCSoTMOc1QlUDPXAPw5HDVhuF3kKpa6gdGj2D/6crwAw/BrRMs/Yrq0NY1LVVM1wePKU3UeHop3KNut2dUj9ot6XLLW7906s2QfMlOK3RaF92owG35hAnHdAAyyi8wAr8eJoAseQDaAY/uCYc83DYRYNsFPxCgVFZEhWot+x6BDWcETPaZr6rXLRYkxdg9OQYnboPMEa+ZJ8W5/8GPiPWsuzLv2+xARwUkBKDdLOWZURvpISpxswICPQRjRRctTsnsnlFJjfO8raqWWeBOzN4N/cySnEoZpYnWT28PN/VwPw4SkLZS58rnZexxWTcmNGPWF29wWtPAzNgVKczjiU9q1OkcIL8uHVv0g0v52ZFOG0JszNPxIGNizWB3iqRdT3RKHepUONzN5JeZA6KZiHpAloAXgAr6bqn96PWnsDuAAd32GwPWLgNvpDe2rp61Vp0BIXvQLnwSSm57Gm+gcIFl8owVt6XoK6q8tC60FWz55rfTpNZSROxU/xyqJvd86mlLjkMfyvOW+rfGzhFClC6hyRR3BcahOVBrwueuBeltUBm0uKjOH0RxFRhdHvY0swpKrN3NkdrvcLv9brmm+xwa8qbQIeVnUXrbD36GFXur26yCcy8pxcHXZvsBQweJZmUe+y19kvVBt84jwSkraLBaLfhvcMoT9n9AJUD5TTtELsO2Owke0fArioocuJeZS9vLpDULZL1RmaSlZy9+euK9oEONgWy8lw0i9ZgtKuf6sXXmhM31CArshQXkPMa3vZ5DOxd2i38nvL8AurI+zgHZBuNNEeLWZ5TOWU98gwDhpZ9dbJTIGEUCp9Pm5g/yegnEZ3Zj+n/Xps2MyK8C4YwDKfNIfAcXSnmgBd/7BqIwdL06e2G89ObPiTw6UbWyFVeFhHAeoqHKi16r5LZaIWkRLhpdvbxe2yKi8V/NIY8WpCGYmN4wYLhYk73afOt5qpiXTSaQdUbRDrTAjT3JgII35jBDbHWfJ37oJ2sBEZjP3IMLyXOk3CvmOApLOIIieQ6zssicYcoad44N8j65/Zme120zUhRu+WAiNHM8plHNxQzM1riDQcc/NxGE/KaKSo37FnzRicipA7/TliVz43cnZ3wWqVvdj+Rdkg1lYDRVm6BiqKLii+wagnJU4A3zLITp92LpbyC/nXflG3W85iAZBvotI7JTm6GLVc9QZNWyS6zDUq7EwtPWWdO4GmuJO1J2lK/RkOlFI00l0EdQdExNU5eFtiuAK7j+vpts+YcO4F1Ovq9QaitJAloLYyWggu8E5jLcigaPsmnkfY0kiAeYtFqx0RMnmsGAy/YH3lI8lxb7x9l4CGdrdgbSPWfrrNsPGJWGXl0t5Pst1pMP68QpVzm0u4oLCjyNPotQG+iJDQRWzyksSpXQW59GxfDPxmr4ewFmL2Ew9zUxjbvNDf5CCN479/0mVdazApI6+LFw3RQmsA8gfpQRwJCbMznjdk2YYK1/svZN/T8SpQ8B0PcdOSY9Rp2foy5YHEarfM4XDNYS4tw4X/Fk8kPEXuupXBR/lQ9CLI1eEaell6HNSgpumpYK9ijjGuJoQ62EXucV2D6Aa2LZvb5aV9HJDcnjhBo04WixgdBpGiPzy6ijfhFERXVJT4U4/PpQSchlOcKGNJJtVYD4/xSaxnk6c82dZuOXGxM34ArYVd6HxzWTzSbrbSpM9Eepjke+b0bQGA0EnYH1Rjk8OgPAnsaF4PCWzS7rK/ap/REI/Nic9ZcTCik3PTRbJ7RcQN2EYheiGzDpWJaXOfCowVT3kLHoVXWM7IzmyKqE8s2LEaBPK3QANPlFBBb3NPkXMpjrBTzKLuvEHyGBF9Xh+fgBxGm2CYGEo1g5OTH1TCB2qdhRZKQICxKPNzRc1eYFK7GyFZkpAUTUAgjzLoZzX6BDbOyFnhtPo2MlvWbFnx0LLgdO8ZMZb/3bNO2GMyW9ACCu8x23VGdbZPNyGyRwyvLN7TtahjBpu+qNnQZuLhKS84sVmeFjvCQBhBse/CQ6x3o0zRa3+x2OzTbq5Q3HBTRUcJQdaKjZlD6yJCl/1Ujlo6ooXjnsg3dZN8oL7DhjF4zBs/MGyZ2cYwFsvYkGnT0GrrIxBafRbP4PzANmGKBue3Uo9bIW2UVSYYol2DBPg76LOtd/y42hEXv2UNnNJteRaBYdSM4f3+8AncTZSQbFaTmZyQzMIhwUQ05/MlsCdFqPhDzDyrIY+EsthoL0zztZ37BE2uMXnP5ow1pQ/N6wIH4XBynx1aM0aB7bLOlEUuPDvuQy+TJSNz4HjCLBQtXhIx0c3pGqRbi6tvCBS1dJiQRY/YBYUuAY9aJswPacrUBezjMMR6QO40+aonDNeJWsBlcuAV04GGr00EoidUFZ7VEKaXsobVDgzbzD0v9geRqpU6WTVndsgKs6HtS+dNYP3vOk/KylVbR34Ds/XGTROsJZ6LU9FKIFnrf7ym8ISYbJrwuP709lPq7M+mTogqh5/24nKEY1C56YXTkPgMiHOcdtYrY/YOgURlOspMdX3ufH0YbFXoDOCYIumyEyzeyV3YW3XAMHU2g1hPu1U4oWwadG4zveRmedECzgNxHrLVOi56mS1s46fWQrd9hEqcxBkwVraWSj1LFICkAzfV13uSlHrYczzqKkHgrTcMzLrRvwDZctbWZXi3q3RrsflIv3GgjCSv9y1nS5MAuTFpg6KGmgZZ9EBkLMQbmmNAyqscYJ7KQzRXHLAqeppBeN2DrLt5+1lrcT9xko6ChmCCtygXzolSgPBjAPoW5wE9Wpr5hwulyJrksPT7r0G2BqXcfDzndAdmjYu9ygGB0EFKNA2XnsQ4fPNjw1evaq8BWZVnaqewC/3TyaBGl6wrM7nFsABC6v1+Y86Xr3o4UXzbgtAvtiyQ/ow2ZwLwFbK1JZbajK+x4rL3cftCYoVKk4jhQqYa2Dw6tVAsVBJzfcwnVTfROBxyHLF+67WfZh3LUtbZ+sCoVPEtoRUHPWjDP1SUD6eg3tKj116+2qtzJXhhob5BHeOyx9voK9AFLHLsQNzqLlttVuJSCNK8yZaF5F5Fih+Oszcz3hYphpQM6opx5VIwSvB3vAx0fYgdXW+Lz/QbIac4ussWZ9Ir3PP9o6ZINU4HZh67NPbQcBGXz2AMHDrZhQdzgNf+5iEUouLBiI3Zei9xlR3ZXmK1hEWs6kr9p3R6MYid2uubqfUBYFIa1hskTJM7kzfCpOaZOzvmNBA/qTK21EOmuwo3KvJOAZsW3qeM13SY7okUP3bTz3i0TwRsanfMRlUAoldcmKVgWyNFD45GxL8J5F/Mxwjzni+YNsJaavARB9xswQcGRJFncJYhUN4AAubfa8O6gZZ8FsBqcbqVgT7YZiXvWhDGEaoI8G5/LZ2k5YkxpeMoWFLzagKkAdoQciXGVi6SHDcTO4woQLJac/A4HftjKQULhtUprMcTMlck26yA/M1VUEDmHCuSpicQhGgynrf8vlUBTED5bV3mZNepNf1rPTP/DnAIMNAeA3LsNOFf9VO19yXTHFLVOYbWeLu7MEL7TAdt09T1RCDJt3wBRB802i0Xa3Oo++ZQF4y3IhyzUOijVMXcbBiN4X/OQuVMmNm6ybytvp5A/jjmDPQTcxrBn1QMm6wCtM1DqzkarbOUeAmsrb3njrJNOeOFSzdL6SSBue+YNPZDaqnruq0Yex6zJzbC5FhQVSNzzJ62uIZ3BUJ0sC9crKbLyxrIIh31nTWTMcyRa4909fbm0rDmztG/oqbP+zQZcJ02jdXfbAmG0FtNab5Qxm7n48s16rZ7oKm2gkhNAeryLaJ0hAoN3cWvhaG5K0bVoGTtwp/BBzqOHjxuwjRoFZpO9lhgK5gCH/WMmFEdjfCR2tvI9qyF0FJ0w0wTddfTkKfXSRr3E20LrJxBWloV9DvNnV+Dq/6KVYIK1A2SU/FBnynHUcTa2Q1x0DLpd5z/VjR/4QbP7W7JCBoOLLXDggU/EDyWgi8A2cRJZ8V1DUCNAzkJI4gISzXYkRKJ/nUPQG3m0CVsOiIc+GKMXWBx+iRou2qyzvPGC7zagNUfYunhJabZgA0T1Q0WGUIxWF6g8Ra92QGUHAx8JDA9nXrfYAlgh1cGn8VlX2aL1V6kkA89Dh282YNMCrcdS0+01bhLlJDZPgBk1+3HCw6bl9yNnvwUUHEnPvbFzlHCxD+MWLk4lwwUgq7yjDWcbs+f5oRKU69DB2TQGJPpA0mzj0rmkOUYxrzAyG1D3gEGs97oKtDRtx34SI+bWfqcpAFsx8VMGOYly01jz7QZUFevIFXfWTF4Tji5d6i2jRuFn4aGsfgqDR18tU3rX+AuBkdLmU5mk0BuDpJwVKI3HftdM7mYDrqPnmwJoPLkJmUTjBEZv3D7/pPiyef5lAXqeYFJ7T+5brG4lD4Oo70BKzp+fseUtLHxHlWUpu9bPOfzzmHnF1u45G7dZTVRvlFAkob16xzbafzpAK01WczV6jblJa2rT6poSPI9oGKPBxAsNcC8BV2RsTGIbqeOjn4DsEZLQyKWjwiR4e9e02d2zlAcPxQDGUp9sUeBOTL2bvH4fYg0EeMp5+gkxa8QJ8Yoi33MS87MJb7ZErT4z61yzPDfsS1OvM/3ZiZoWizMvmUqEsYMtG8zymQRccgTAVoCW498GAl5z8rLIm5BOZ+0wNoHObQv+Hgv+Sbgpx24F+IiiidJ6/QY3aiovFWafbcAlGJQ+WaY7RajxglszIueOVWmL5FgwNJJcH7NWIQ5nf8PL/J0MpRdpMgWg84DYbcD3N+DKl5nOSQW82fakWuNjw+Hg0o5WRCujqi60J6S50qlwR6en4ecYY/pssUVL7F86AS83oJO+x/ChLg4UGY5iJkZguQV1nL0h1KTn01tV+6QF8FDmy4pDu5tnSZx2OJSTCPBaAF5twFT/XRX2OCdAj9mKMBjLJg3eSfokUdMJYD3E5XTDspKkmQYO9rOBZIcBOZnp79b/yQb0/3HTA+LDdAqh7ESFSoh0yY0cX+c8YWRwsEPsGRH25zN4cZp5rZp1l69lQik/0gE3HsFhB4rygk61KVoHZuK6M2gjttnaWFew0apM40nJVVtA5h0w9wLZq34pry3g+w2AnNOEkxuHNpILRRtvkY8nfwmreL+ognKqhMJG6t62aGMBW6OSNlbwGwv4gQS0VXdvb9uAav9erCA2jJbBZmKrLMuCruZoZ8PzGrWJwQRq2GgmgdlzoZQxWfSDVvOQtzvQT3ZqwuhvnG3j2oNmndl2xzMYRCvAHk1wYjZV9eCfqzFthVwBJbTGe5UpfLMNEPlMBi6MiQoLNDzjrb1r8nVQBWVSPcSqTTOTW2xZyWO922ec+pXxYIGLDhicPRHCbxAkbtTA7g11CzWVYTddZZF3HhExmn5EFz7WPW8dSbYcwYyFEggit/SAvL39n0nAOVc23YGYRt0FALI1OAPl7jj0QGIQ2Xsb9H4WOUdGqlKNMwNG+UwN4BM1sVvBMY9K0LqXamesbSPkCXJlRM4Jvkt9T+/kZpsQtLYRHEnwbQ/ebsDjsw3oTIk5khNt6uZokrdh+DkaZYd974+jHmeth2ov7Gb4ECOm6GdP+XMJkGnkhzqoYjBtiXucAKx2gGtE4YHsfLgeJfhreA5nYxMp/3rzfT46/882YJOBBprP7IeOKQXHVzHtpu7mvE8fRZNity+c5JcxYvxX/IB7f3iPDKOdMS6tu1rTd6thwBlEffJhbSq7Dc9xNjsZd/+j9X+4AZM9KQ3268mbtgXcGlhtWObeq+2T5Rf/DRvWTxluYKcg/9oGTO78NAqTXhZ7sI9WujjyHLOsTK+3IO8LmxnoMMpM//RuNvKZApCtfv1DlxBycYoHYqbHdOtOJGq99e2gEmJyaJbDsTCDGRZ1Rt24ASK/KAGH298GJjavMJ5Ubeh6bLw3zy31m6EntZdU0WPVWyskHHrg8/V/4gdcItRWHHKZyFIkker6uolaxwR6BDT8A8tZqh7tplCPSerc/CD50Pr/RALkmiaZ8Ih0Ng+4dejGhY0XknL1/axjynX6vEEDOh3iVRrwUwnAW49o24GtT9lhqFdvnMg+cHxvB4OgC2FiG7x27tqSn5NQ/PmpfuMKXG7BlRyLw4WvhOrm8RXNodUdGbeOtba5dFdhn207v3P/f7YBfWbDVQKun6XPF8RR0q5dLhrtlXuKfH6a1aP82Pz9RAdsiXOZo3aioIiHPcCp7pJFoahv+vrT6aHM5Y6vZqOM760f/P4G7CSyURtzuP/5SYe9b3OyIYe4yHZ39+L7Tp+IP1n/jyRAbiVAdnfg9JOTxR9TXvfVz6XPagvh9df8wXL4ExmY1LFZQHowCXOI0uh9KrIBKHZV5zyIweEifHv5k+jN270Ab7zCGRSOFd/4weB9X8/m/+0tzPuSb1Tht8z/1Qrg7ZW4aO0ODYEYNF7sqoBt6egokZfJWHcBeHV3eHWBsF+O7y//JzpgC32woWKXbLGIHKed3rwLymmt1wO/UYbvpfdTPwDf3YFm7g9b0AxODZqB8HoleOlEzF0n8M4c/uDj8SdCs/sBu96/tvJ9l4iajmwSq+acGdlCgRfOH368AXjtCl3WD7n6Ajh2M8bm+7eycvKKm5z62/H7x3+r4h4/1w2buO/+8DYwgd/TNpSD93dj/X8i/fjWFcDLLdiWS4jc2cZvLX+38fvJU36+/j/SAZsAjEwpcfH/ICLvZt41/HTcdnB3AqfK558uH3+wAWUNWtc08LzgPhbtIOmvf8D7G/Dn7/7xC89xHmyOXU90f3lWsezDX3rjvCb7uEbMf74Hj+/rvVtluOu9oy88in4J3krAkToz1T7/4PK+1AH4eEf2JW7Ntne0dPRilpk6ifvfmwO9NQLymxLwx/egJodRdmgER/jh9vyJPRy4Nkf8Q28fH+sAfP4yzegRR2Gas9OiV9WGFx/9vpNz8EtH96tPhZP8H8Z/orUWl9aC5eQK4HQBfvYe+TeuwL3+n/rhEA4Hi5o3XuCeDvrVw//JBuDtby6uX8uRgoP+u6361spRplv0q9L++N7f4iMhO2nAmShg8/yws0OmBJS2+JXTx9+xAm/1QcnD7R4SN3L/V2Q/3sYD8je34JQ2awgkZjOoo5O3WcTf/nh8viD8VA6IqwU4CcBoESQ3pvA/tgE/tDqX1b/bRt74A39LTh8/0nTf3oaTwfTae4K4m/JC8C/cyu9LAH7hIfjkkeeigL/68ZB/8ANz0DDv3DP+9ffxSxuAH/0eN03/r1HBX1z3f0YC9rdD/HOi/mNT9hejKMh/hw/8j3uhX3mj+O/55g/v8/8Dqd6Iqc0B7UUAAAAASUVORK5CYII="}this.bird=a.bird;if(!this.bird){this.bird=new Image;this.bird.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABDCAQAAAD+S8VaAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAAvMAAALzAdLpCioAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAG90lEQVR42uWaaVRTRxTHJ4AUUIoIiqISOArIDiIhBBfccCMoR0vVUpXjTqun4Fr1tO5i3YuodaFqRMECKm4VUHEhUvWgBYuilgpiRVZpCARI3r8fWA4hYY9AXu77+ObNzO/O8u787xDSyeYSTzSICpu+DjV0ogrze84PBneByuJv3JpbBlx6MEBbJfG/8S2RAACFXXtU0gERN1BjCc9UEN/e7I2w1gFPinv3UDkHbFiGOqOwJVjlHMALRT3LLJ7trGIOuHwFUsY7q2IOuJ0u7YB//pswWFn6/vnUcbOCAn7ctfnUrsijl85dv5pw786fd9OTsvg5/JykN3fTb6ZcTDgVvefIkqXmVvKr0NN/IUQDO7C1qwJrOwyftIZ7cmIiN21eZlB+SOUtFKNl9kF0hb9ujmyVM73FMmWv3m+2J4zxw74NDN5/5vT1qzeT7j3n5/Bz7mcmPk24cy32Ai8i9Pj2nwIX+jo4kc8UMMqeXr5bfC6N/2tUHrdsCQ4gAR/QNhNRJ8+6GklXH7xStlxW+ViLxrpjqBswJ/z4rYyCFrQnwJPCxGe/x53i+fO+XOth2xpsvQm+PkfGP3YuYIo1oInTyIJiLDFtoZfUP+AXeaW2rZHXKZ8xJ35NeU+1odVSbIIBbEQeb70Tffd6ckmj0QbDy9/zOufdILE6SN0TBkVafnn0ka/NatrrditDXpmYKw36pREwPyr+Y0V72n0CsxoedTDFrMJJyRMDZJYIx8+yYICQKbDJtcjtL9IGAcEMKN7efIy+snnTYv/tR8Ry3+eWRUYFzavRB9SWL7icXKWAVrPRr96wEqjBTjg5bop03GGi77XF85FdqVZNIQ1konOsEvx35yOCN1xMFimszjNSDqh+ektGfVG3xjyTzaqkX3uDTiaCdh0ZA/qSgWXWWfb7CYMQQsiUUANK1j8hoJf1lSFUg0u+z1xCiFuMUYWsAy7QCj9ZzhIgIDCkpi4nhBCGsafNGx2peXCQRvhlcGrEAQSOhYQQQtyTG74YCglN8CswrVF8goEVhBBCrMzdozi33OOHJmvUvQqghQtKMEUu+GDB0Cj2Q/vsUdJn0JH8+oXG4rWS46djSD0ePcr2lUuafbZlIbN0UAnngpyA0I3FumeZxxQYVlZ/ooWleKm0+FHQbTDuWnAp5F6cbNfskcDtcg9J9aMGNUxDIiglgy+CPxhypj4Ddu/cfFpxOrIqrv7QAsH4V2nwYxoEvwQEOpRlAeeG07hWnopH7FMHgTr6VmhAA1xEQNjF4bMxQwpcj2I9duVZLiVtTb7YT7T2I30JccyqrrA7ZuESRF0SvhQ/QKfByDu/VZAs5O6rXS9U6onZ+A2CLgQvwWn0l5n4TAFnjOKksR5En6i73q6/q3IRhvwugB8LBylwi6IhixxX9Wd/CoWQwTrJTuaEOSwzENcKDR7Yj4xOg4+Hq3SEXzX8fIfcObAZPizV+bGxqLZhMyxBWgdP+xi4ScGbCNnhhrodqxnrso65pLidNxMQENihqoPgS3AY5rU7krh35eCPbon2c4hap2nnxob2GQQE+zpAM4qFb53EoUWxE3t93jXyBwyXcG1KD+8/IXwBAmFYg26Vx37oHjnIlnQlGzbJvMCX+lQrPgT6dat9yAcT/S6aSOIs2rjjxLaQ9SsX83gv8uShiNuAn4mR9fZ5dizpphRpREvj1YvOhiU84OdmoghFyKH47y/GHohtLf45ITvVuLyfyKLI5RlntyJSXx2+P+gaejt5O7FNCSEkcFHTuAmPom6/qqxJqFRee33wHGc6rVLjXtym8C8nTTcnDNMh/n5BfnN8mFY18jWdbPlceeBViEsPi16xxFSL7ncjukVelTvxUzsxjOlAUzsULv8/GfdEJa7G7D7YWLCcUzbNkfb42zaXNaG2h4XTHH/n9x+bjIHKqeAdNMZf55fbrKBYLNq+lqb433lkFrUk5hNKdu6mIf5XA1KetzibR+09TLcfonrMtVYlNKk9h2gV//FCW3tCFmMXT0nOe83bxpklbdDJqrD+BC1mwUzTtOw2Sl/UFjpsh8ci2pHirFgxV8nxV/oJxO2RwR6+HNFbmfkZ15PaqwQe/VmJ+R18Aql37XTAsQ9EefUBW6NeEk34IaWN8HkIQk+Jva0SzwGXP6p1XDeEoqB1qx/L0B3dKY+VSr0JDurDFNaK2ZoYg5142sx1m3LEYxUsq+Vv8ejVSv8bdJ/UXySds9eDB4JwEnFIRS6KUIi/8RJxCEEARte74GBR6DycFpGgtZNFPkHrHgOx61miSaPDEOtEn8qWwvepZMc5Mel3ItZmHbbM12wSXV/snMHZQ6eRlzEzI9d9rnftskwERhXVNxF7ik1Krd87pbLCbWYR9Y7v0f/htaJHbsoDhwAAAABJRU5ErkJggg=="}this.set("opacity",a.opacity||.3);this.set("density",a.density||.5);this.setWind(a)};ol.inherits(ol.control.Cloud,ol.control.Control);ol.control.Cloud.prototype.setMap=function(a){if(this.getMap()){this.getMap().un("postcompose",this.drawCloud_,this)}ol.control.Control.prototype.setMap.call(this,a);if(a){a.on("postcompose",this.drawCloud_,this)}};ol.control.Cloud.prototype.setWind=function(a){a=a||{};var b=Math.random;var c=a.windAngle||b()*Math.PI;var d=a.windSpeed||b();this.wind={angle:c,cos:Math.cos(c),sin:Math.sin(c),speed:d}};ol.control.Cloud.prototype.drawCloud_=function(a){if(!this.getMap())return;var b=a.context;var c=b.canvas;var d=a.frameState.pixelRatio;if(!this.cloud.width)return;var e=this.particules;var f=Math.random;var g=this.cloud.width;var h=this.cloud.height;var i=this.cloud.width/2;var j=this.cloud.height/2;var k=this.get("density")*10*c.width*c.height/g/h<<0;function l(a,b){for(var d=0;d<a;d++){e.push({x:f()*c.width-i,y:f()*c.height-j})}}if(!e){e=this.particules=[];l(k);var m=f()*Math.PI;this.width=c.width;this.height=c.height;this.birds=[];for(var n=0;n<5;n++){var o={angle:f()*2*Math.PI,x:f()*c.width,y:f()*c.height,rot:0,fly:0};o.cos=Math.cos(o.angle);o.sin=Math.cos(o.angle);this.birds.push(o)}}else if(k!=e.length){if(this.width!=c.width||this.height!=c.height){e=this.particules=[];l(k);this.width=c.width;this.height=c.height}else if(k>e.length){l(1)}else if(k<e.length){e.splice(e.length*f()<<0,1)}}var p=this.wind.cos*this.wind.speed;var q=this.wind.sin*this.wind.speed;for(var n=0;n<e.length;n++){e[n].x+=p+f()*2-1;e[n].y+=q+f()*2-1;if(e[n].x<-g){e[n].x=c.width;e[n].y=f()*c.height-j}else if(e[n].x>c.width){e[n].x=-g;e[n].y=f()*c.height-j}if(e[n].y<-h){e[n].y=c.height;e[n].x=f()*c.width-i}else if(e[n].y>c.height){e[n].y=-h;e[n].x=f()*c.width-i}}b.globalAlpha=this.get("opacity");for(var n=0;n<e.length;n++){b.drawImage(this.cloud,e[n].x,e[n].y)}b.globalAlpha=1;var g=this.bird.width/2;var h=this.bird.height/2;var r=.5;var s=c.width+g;var t=c.height+h;for(var n=0;n<this.birds.length;n++){var u=this.birds[n];var v=0;if(u.fly){u.fly=++u.fly%5;v=-.1}else if(f()<.01)u.fly=1;if(u.rot){u.angle+=u.rot;u.cos=Math.cos(u.angle);u.sin=Math.sin(u.angle)}if(f()<.01){u.rot=u.rot?0:f()*Math.PI/200-Math.PI/400;u.cos=Math.cos(u.angle);u.sin=Math.sin(u.angle)}u.x+=u.sin;if(u.x>s)u.x=-g;if(u.x<-g)u.x=s;u.y-=u.cos;if(u.y>t)u.y=-h;if(u.y<-h)u.y=t;b.save();b.translate(u.x,u.y)
;b.rotate(u.angle);b.scale(r+v,r);b.drawImage(this.bird,-g,-h);b.restore()}this.getMap().render()};ol.control.Compass=function(a){var b=this;if(!a)a={};var c=document.createElement("div");c.className="ol-compassctrl ol-unselectable ol-hidden"+(a.className?" "+a.className:"");c.style.position="absolute";c.style.visibility="hidden";ol.control.Control.call(this,{element:c});this.set("rotateVithView",a.rotateWithView!==false);this.style=a.style;if(a.image){this.img_=a.image}else if(a.src){this.img_=new Image;this.img_.onload=function(){if(b.getMap())b.getMap().renderSync()};this.img_.src=a.src}else this.img_=this.defaultCompass_($(this.element).width(),this.style?this.style.getColor():"");this.da_=[];for(var d=0;d<8;d++)this.da_[d]=[Math.cos(Math.PI*d/8),Math.sin(Math.PI*d/8)]};ol.inherits(ol.control.Compass,ol.control.Control);ol.control.Compass.prototype.setMap=function(a){var b=this.getMap();if(b)b.un("postcompose",this.drawCompass_,this);ol.control.Control.prototype.setMap.call(this,a);if(b)b.renderSync();if(a)a.on("postcompose",this.drawCompass_,this)};ol.control.Compass.prototype.defaultCompass_=function(a,b){var c=document.createElement("canvas");var d=c.getContext("2d");var a=c.width=c.height;var e=a/2;var f=.22*e;function g(a,c){d.fillStyle=b||"#963";d.beginPath();d.moveTo(0,0);d.lineTo(a,0);d.lineTo(c,c);d.moveTo(0,0);d.lineTo(-a,0);d.lineTo(-c,-c);d.moveTo(0,0);d.lineTo(0,a);d.lineTo(-c,c);d.moveTo(0,0);d.lineTo(0,-a);d.lineTo(c,-c);d.moveTo(0,0);d.fill();d.stroke()}function h(a,b){d.globalCompositeOperation="destination-out";d.fillStyle="#fff";d.beginPath();d.moveTo(0,0);d.lineTo(a,0);d.lineTo(b,-b);d.moveTo(0,0);d.lineTo(-a,0);d.lineTo(-b,b);d.moveTo(0,0);d.lineTo(0,a);d.lineTo(b,b);d.moveTo(0,0);d.lineTo(0,-a);d.lineTo(-b,-b);d.moveTo(0,0);d.fill();d.globalCompositeOperation="source-over";d.beginPath();d.moveTo(0,0);d.lineTo(a,0);d.lineTo(b,-b);d.moveTo(0,0);d.lineTo(-a,0);d.lineTo(-b,b);d.moveTo(0,0);d.lineTo(0,a);d.lineTo(b,b);d.moveTo(0,0);d.lineTo(0,-a);d.lineTo(-b,-b);d.moveTo(0,0);d.stroke()}d.translate(e,e);d.strokeStyle=b||"#963";d.lineWidth=1.5;d.beginPath();d.arc(0,0,a*.41,0,2*Math.PI);d.arc(0,0,a*.44,0,2*Math.PI);d.stroke();d.rotate(Math.PI/4);g(e*.9,f*.8);h(e*.9,f*.8);d.rotate(-Math.PI/4);g(e,f);h(e,f);return c};ol.control.Compass.prototype.drawCompass_=function(a){var b=a.context;var c=b.canvas;var d=a.frameState.pixelRatio;b.save();b.scale(d,d);var e=$(this.element).width();var f=$(this.element).height();var g=$(this.element).position();var h=this.img_;var i=a.frameState.viewState.rotation;b.beginPath();b.translate(g.left+e/2,g.top+f/2);if(this.get("rotateVithView"))b.rotate(i);if(this.style){b.beginPath();b.strokeStyle=this.style.getColor();b.lineWidth=this.style.getWidth();var j=Math.max(c.width,c.height);for(var k=0;k<8;k++){b.moveTo(-this.da_[k][0]*j,-this.da_[k][1]*j);b.lineTo(this.da_[k][0]*j,this.da_[k][1]*j)}b.stroke()}if(h.width){b.drawImage(h,-e/2,-f/2,e,f)}b.closePath();b.restore()};ol.control.Bar=function(a){if(!a)a={};var b=$("<div>").addClass("ol-unselectable ol-control ol-bar");if(a.className)b.addClass(a.className);if(a.group)b.addClass("ol-group");ol.control.Control.call(this,{element:b.get(0),target:a.target});this.set("toggleOne",a.toggleOne);this.set("autoDeactivate",a.autoDeactivate);this.controls_=[];if(a.controls instanceof Array){for(var c=0;c<a.controls.length;c++){this.addControl(a.controls[c])}}};ol.inherits(ol.control.Bar,ol.control.Control);ol.control.Bar.prototype.setVisible=function(a){if(a)$(this.element).show();else $(this.element).hide()};ol.control.Bar.prototype.getVisible=function(){return $(this.element).css("display")!="none"};ol.control.Bar.prototype.setMap=function(a){ol.control.Control.prototype.setMap.call(this,a);for(var b=0;b<this.controls_.length;b++){var c=this.controls_[b];c.setMap(a)}};ol.control.Bar.prototype.getControls=function(){return this.controls_};ol.control.Bar.prototype.setPosition=function(a){$(this.element).removeClass("ol-left ol-top ol-bottom ol-right");a=a.split("-");for(var b=0;b<a.length;b++){switch(a[b]){case"top":case"left":case"bottom":case"right":$(this.element).addClass("ol-"+a[b]);break;default:break}}};ol.control.Bar.prototype.addControl=function(a){this.controls_.push(a);a.setTarget(this.element);if(this.getMap()){this.getMap().addControl(a)}a.on("change:active",this.onActivateControl_,this);if(a.getActive&&a.getActive()){a.dispatchEvent({type:"change:active",key:"active",oldValue:false,active:true})}};ol.control.Bar.prototype.deactivateControls=function(a){for(var b=0;b<this.controls_.length;b++){if(this.controls_[b]!==a&&this.controls_[b].setActive){this.controls_[b].setActive(false)}}};ol.control.Bar.prototype.getActiveControls=function(){var a=[];for(var b=0,c;c=this.controls_[b];b++){if(c.getActive&&c.getActive())a.push(c)}return a};ol.control.Bar.prototype.setActive=function(a){if(!a&&this.get("autoDeactivate")){this.deactivateControls()}if(a){var b=this.getControls();for(var c=0,d;d=b[c];c++){if(d.get("autoActivate"))d.setActive(true)}}};ol.control.Bar.prototype.onActivateControl_=function(a){if(this.get("toggleOne")){if(a.active){var b;var c=a.target;for(b=0;b<this.controls_.length;b++){if(this.controls_[b]===c)break}if(b==this.controls_.length)return;this.deactivateControls(this.controls_[b])}else{if(!this.getActiveControls().length){for(var d=0,e;e=this.controls_[d];d++){if(e.get("autoActivate")){e.setActive();break}}}}}};ol.control.Disable=function(a){var a=a||{};var b=$("<div>").addClass((a.calssName||"")+" ol-disable ol-unselectable ol-control");b.css({top:0,left:0,right:0,bottom:0,"z-index":1e4,background:"none",display:"none"});ol.control.Control.call(this,{element:b.get(0)})};ol.inherits(ol.control.Disable,ol.control.Control);ol.control.Disable.prototype.isOn=function(){return $(this.element).hasClass("ol-disable")};ol.control.Disable.prototype.disableMap=function(a){if(a){$(this.element).addClass("ol-enable").show()}else{$(this.element).removeClass("ol-enable").hide()}};ol.control.Gauge=function(a){a=a||{};var b=$("<div>").addClass((a.className||"")+" ol-gauge ol-unselectable ol-control");this.title_=$("<span>").appendTo(b);this.gauge_=$("<button>").attr("type","button").appendTo($("<div>").appendTo(b)).width(0);ol.control.Control.call(this,{element:b.get(0),target:a.target});this.setTitle(a.title);this.val(a.val);this.set("max",a.max||100)};ol.inherits(ol.control.Gauge,ol.control.Control);ol.control.Gauge.prototype.setTitle=function(a){this.title_.html(a||"");if(!a)this.title_.hide();else this.title_.show()};ol.control.Gauge.prototype.val=function(a){if(a!==undefined){this.val_=a;this.gauge_.css("width",a/this.get("max")*100+"%")}return this.val_};ol.control.GeoBookmark=function(a){a=a||{};var b=this;var c=document.createElement("div");if(a.target){c.className=a.className||"ol-bookmark"}else{c.className=(a.className||"ol-bookmark")+" ol-unselectable ol-control ol-collapsed";c.addEventListener("mouseleave",function(){if(f!==document.activeElement){d.style.display="none"}});this.button=document.createElement("button");this.button.setAttribute("type","button");this.button.addEventListener("click",function(a){d.style.display=d.style.display===""||d.style.display==="none"?"block":"none"});c.appendChild(this.button)}var d=document.createElement("div");c.appendChild(d);var e=document.createElement("ul");d.appendChild(e);var f=document.createElement("input");f.setAttribute("placeholder",a.placeholder||"Add a new geomark...");f.addEventListener("change",function(a){var c=this.value;if(c){b.addBookmark(c);this.value="";b.dispatchEvent({type:"add",name:c})}d.style.display="none"});f.addEventListener("blur",function(){d.style.display="none"});d.appendChild(f);ol.control.Control.call(this,{element:c,target:a.target});this.on("propertychange",function(a){if(a.key==="editable"){c.className=c.className.replace(" ol-editable","");if(this.get("editable")){c.className+=" ol-editable"}}console.log(a)}),this;this.set("namespace",a.namespace||"ol");this.set("editable",a.editable!==false);this.setBookmarks(localStorage[this.get("namespace")+"@bookmark"]?null:a.marks)};ol.inherits(ol.control.GeoBookmark,ol.control.Control);ol.control.GeoBookmark.prototype.setBookmarks=function(a){if(!a)a=JSON.parse(localStorage[this.get("namespace")+"@bookmark"]||"{}");var b=this.get("editable");var c=this.element.querySelector("ul");var d=this.element.querySelector("div");var e=this;c.innerHTML="";for(var f in a){var g=document.createElement("li");g.textContent=f;g.setAttribute("data-bookmark",JSON.stringify(a[f]));g.addEventListener("click",function(){var a=JSON.parse(this.getAttribute("data-bookmark"));e.getMap().getView().setCenter(a.pos);e.getMap().getView().setZoom(a.zoom);d.style.display="none"});c.appendChild(g);if(b&&!a[f].permanent){var h=document.createElement("button");h.setAttribute("data-name",f);h.setAttribute("title","Suppr.");h.addEventListener("click",function(a){e.removeBookmark(this.getAttribute("data-name"));e.dispatchEvent({type:"remove",name:this.getAttribute("data-name")});a.stopPropagation()});g.appendChild(h)}}localStorage[this.get("namespace")+"@bookmark"]=JSON.stringify(a)};ol.control.GeoBookmark.prototype.getBookmarks=function(){return JSON.parse(localStorage[this.get("namespace")+"@bookmark"]||"{}")};ol.control.GeoBookmark.prototype.removeBookmark=function(a){if(!a){return}var b=this.getBookmarks();delete b[a];this.setBookmarks(b)};ol.control.GeoBookmark.prototype.addBookmark=function(a,b,c,d){if(!a)return;var e=this.getBookmarks();if(e[a]&&e[a].permanent)return;e[a]={pos:b||this.getMap().getView().getCenter(),zoom:c||this.getMap().getView().getZoom(),permanent:!!d};this.setBookmarks(e)};ol.control.Globe=function(a){var b=a||{};var c=this;var d;if(b.target){d=$("<div>");this.panel_=$(b.target)}else{d=$("<div>").addClass("ol-globe ol-unselectable ol-control");if(/top/.test(b.align))d.addClass("ol-control-top");if(/right/.test(b.align))d.addClass("ol-control-right");this.panel_=$("<div>").addClass("panel").appendTo(d);this.pointer_=$("<div>").addClass("ol-pointer").appendTo(d)}ol.control.Control.call(this,{element:d.get(0),target:b.target});this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:this.panel_.get(0),view:new ol.View({zoom:0,center:[0,0]}),layers:b.layers});setTimeout(function(){c.ovmap_.updateSize()},0);this.set("follow",b.follow||false);this.extentLayer=new ol.layer.Vector({name:"Cache extent",source:new ol.source.Vector,style:b.style||[new ol.style.Style({image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,0,0, 1)"}),stroke:new ol.style.Stroke({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5})})]});this.ovmap_.addLayer(this.extentLayer)};ol.inherits(ol.control.Globe,ol.control.Control);ol.control.Globe.prototype.setMap=function(a){if(this.getMap())this.getMap().getView().un("propertychange",this.setView,this);ol.control.Control.prototype.setMap.call(this,a);if(a){a.getView().on("propertychange",this.setView,this);this.setView()}};ol.control.Globe.prototype.setView=function(){if(this.getMap()&&this.get("follow")){this.setCenter(this.getMap().getView().getCenter())}};ol.control.Globe.prototype.getGlobe=function(){return this.ovmap_};ol.control.Globe.prototype.show=function(a){if(a!==false)$(this.element).removeClass("ol-collapsed");else $(this.element).addClass("ol-collapsed");this.ovmap_.updateSize()};ol.control.Globe.prototype.setPosition=function(a){if(/top/.test(a))$(this.element).addClass("ol-control-top");else $(this.element).removeClass("ol-control-top");if(/right/.test(a))$(this.element).addClass("ol-control-right");else $(this.element).removeClass("ol-control-right")};ol.control.Globe.prototype.setCenter=function(a,b){var c=this;this.pointer_.addClass("hidden");if(a){var d=this.ovmap_;var e=d.getPixelFromCoordinate(a);var f=$(this.element).height();if(d.getView().animate){setTimeout(function(){c.pointer_.css({top:Math.min(Math.max(e[1],0),f),left:"50%"}).removeClass("hidden")},800);d.getView().animate({center:[a[0],0]})}else{var g=ol.animation.pan({duration:800,source:d.getView().getCenter()});d.beforeRender(function(a,d){var h=g(a,d);if(!h&&b!==false){c.pointer_.css({top:Math.min(Math.max(e[1],0),f),left:"50%"}).removeClass("hidden")}return h});d.getView().setCenter([a[0],0])}}};ol.control.Graticule=function(a){var b=this;if(!a)a={};var c=document.createElement("div");c.className="ol-graticule ol-unselectable ol-hidden";ol.control.Control.call(this,{element:c});this.set("projection",a.projection||"EPSG:4326");var d=new ol.proj.Projection({code:this.get("projection")});var e=d.getMetersPerUnit();this.fac=1;while(e/this.fac>10){this.fac*=10}this.fac=1e4/this.fac;this.set("maxResolution",a.maxResolution||Infinity);this.set("step",a.step||.1);this.set("stepCoord",a.stepCoord||1);this.set("spacing",a.spacing||40);this.set("margin",a.margin||0);this.set("borderWidth",a.borderWidth||5);this.set("stroke",a.stroke!==false);this.formatCoord=a.formatCoord||function(a){return a};if(a.style instanceof ol.style.Style)this.style=a.style;else this.style=new ol.style.Style({stroke:new ol.style.Stroke({color:"#000",width:1}),fill:new ol.style.Fill({color:"#fff"}),text:new ol.style.Text({stroke:new ol.style.Stroke({color:"#fff",width:2}),fill:new ol.style.Fill({color:"#000"})})})};ol.inherits(ol.control.Graticule,ol.control.Control);ol.control.Graticule.prototype.setMap=function(a){var b=this.getMap();if(b)b.un("postcompose",this.drawGraticule_,this);ol.control.Control.prototype.setMap.call(this,a);if(b)b.renderSync();if(a)a.on("postcompose",this.drawGraticule_,this)};ol.control.Graticule.prototype.setStyle=function(a){this.style=a};ol.control.Graticule.prototype.getStyle=function(a){return a};ol.control.Graticule.prototype.drawGraticule_=function(a){if(this.get("maxResolution")<a.frameState.viewState.resolution)return;var b=a.context;var c=b.canvas;var d=a.frameState.pixelRatio;var e=c.width/d;var f=c.height/d;var g=this.get("projection");var h=this.getMap();var i=[h.getCoordinateFromPixel([0,0]),h.getCoordinateFromPixel([e,0]),h.getCoordinateFromPixel([e,f]),h.getCoordinateFromPixel([0,f])];var j=-Infinity;var k=Infinity;var l=-Infinity;var m=Infinity;for(var n=0,o;o=i[n];n++){i[n]=ol.proj.transform(o,h.getView().getProjection(),g);j=Math.max(j,i[n][0]);k=Math.min(k,i[n][0]);l=Math.max(l,i[n][1]);m=Math.min(m,i[n][1])}var p=this.get("spacing");var q=this.get("step");var r=this.get("stepCoord");var s=this.get("borderWidth");var t=this.get("margin");var u=(j-k)/q*p;if(u>e){var v=Math.round((j-k)/e*p/q);q*=v;if(q>this.fac)q=Math.round(q/this.fac)*this.fac}k=Math.floor(k/q)*q-q;m=Math.floor(m/q)*q-q;j=Math.floor(j/q)*q+2*q;l=Math.floor(l/q)*q+2*q;var w=ol.proj.get(g).getExtent();if(w){if(k<w[0])k=w[0];if(m<w[1])m=w[1];if(j>w[2])j=w[2]+q;if(l>w[3])l=w[3]+q}var x=this.style.getStroke()&&this.get("stroke");var y=this.style.getText();var z=this.style.getFill();b.save();b.scale(d,d);b.beginPath();b.rect(t,t,e-2*t,f-2*t);b.clip();b.beginPath();var A={top:[],left:[],bottom:[],right:[]};for(var B=k;B<j;B+=q){var C=ol.proj.transform([B,m],g,h.getView().getProjection());C=h.getPixelFromCoordinate(C);if(x)b.moveTo(C[0],C[1]);var D=C;for(var E=m+q;E<=l;E+=q){var F=ol.proj.transform([B,E],g,h.getView().getProjection());F=h.getPixelFromCoordinate(F);if(x)b.lineTo(F[0],F[1]);if(D[1]>0&&F[1]<0)A.top.push([B,D]);if(D[1]>f&&F[1]<f)A.bottom.push([B,D]);D=F}}for(var E=m;E<l;E+=q){var C=ol.proj.transform([k,E],g,h.getView().getProjection());C=h.getPixelFromCoordinate(C);if(x)b.moveTo(C[0],C[1]);var D=C;for(var B=k+q;B<=j;B+=q){var F=ol.proj.transform([B,E],g,h.getView().getProjection());F=h.getPixelFromCoordinate(F);if(x)b.lineTo(F[0],F[1]);if(D[0]<0&&F[0]>0)A.left.push([E,D]);if(D[0]<e&&F[0]>e)A.right.push([E,D]);D=F}}if(x){b.strokeStyle=this.style.getStroke().getColor();b.lineWidth=this.style.getStroke().getWidth();b.setLineDash(this.style.getStroke().getLineDash());b.stroke()}if(y){b.fillStyle=this.style.getText().getFill().getColor();b.strokeStyle=this.style.getText().getStroke().getColor();b.lineWidth=this.style.getText().getStroke().getWidth();b.textAlign="center";b.textBaseline="hanging";var G;var H=(z?s:0)+t+2;for(var n=0,I;I=A.top[n];n++)if(!(Math.round(I[0]/this.get("step"))%r)){G=this.formatCoord(I[0]);b.strokeText(G,I[1][0],H);b.fillText(G,I[1][0],H)}b.textBaseline="alphabetic";for(var n=0,I;I=A.bottom[n];n++)if(!(Math.round(I[0]/this.get("step"))%r)){G=this.formatCoord(I[0]);b.strokeText(G,I[1][0],f-H);b.fillText(G,I[1][0],f-H)}b.textBaseline="middle";b.textAlign="left";for(var n=0,I;I=A.left[n];n++)if(!(Math.round(I[0]/this.get("step"))%r)){G=this.formatCoord(I[0]);b.strokeText(G,H,I[1][1]);b.fillText(G,H,I[1][1])}b.textAlign="right";for(var n=0,I;I=A.right[n];n++)if(!(Math.round(I[0]/this.get("step"))%r)){G=this.formatCoord(I[0]);b.strokeText(G,e-H,I[1][1]);b.fillText(G,e-H,I[1][1])}}if(z){var J=this.style.getFill().getColor();var K,L;if(L=this.style.getStroke()){K=this.style.getStroke().getColor()}else{K=J;J="#fff"}b.strokeStyle=K;b.lineWidth=L?L.getWidth():1;for(var n=1;n<A.top.length;n++){b.beginPath();b.rect(A.top[n-1][1][0],t,A.top[n][1][0]-A.top[n-1][1][0],s);b.fillStyle=Math.round(A.top[n][0]/q)%2?K:J;b.fill();b.stroke()}for(var n=1;n<A.bottom.length;n++){b.beginPath();b.rect(A.bottom[n-1][1][0],f-s-t,A.bottom[n][1][0]-A.bottom[n-1][1][0],s);b.fillStyle=Math.round(A.bottom[n][0]/q)%2?K:J;b.fill();b.stroke()}for(var n=1;n<A.left.length;n++){b.beginPath();b.rect(t,A.left[n-1][1][1],s,A.left[n][1][1]-A.left[n-1][1][1]);b.fillStyle=Math.round(A.left[n][0]/q)%2?K:J;b.fill();b.stroke()}for(var n=1;n<A.right.length;n++){b.beginPath();b.rect(e-s-t,A.right[n-1][1][1],s,A.right[n][1][1]-A.right[n-1][1][1]);b.fillStyle=Math.round(A.right[n][0]/q)%2?K:J;b.fill();b.stroke()}b.beginPath();b.fillStyle=K;b.rect(t,t,s,s);b.rect(t,f-s-t,s,s);b.rect(e-s-t,t,s,s);b.rect(e-s-t,f-s-t,s,s);b.fill()}b.restore()};ol.control.GridReference=function(a){var b=this;if(!a)a={};var c=document.createElement("div");c.className=(!a.target?"ol-control ":"")+"ol-gridreference ol-unselectable "+(a.className||"");ol.control.Control.call(this,{element:c,target:a.target});if(typeof a.property=="function")this.getFeatureName=a.property;if(typeof a.sortFeatures=="function")this.sortFeatures=a.sortFeatures;if(typeof a.indexTitle=="function")this.indexTitle=a.indexTitle;this.source_=a.source;if(a.source){this.setIndex(a.source.getFeatures(),a);a.source.once("change",function(b){if(a.source.getState()==="ready"){this.setIndex(a.source.getFeatures(),a)}},this)}this.set("maxResolution",a.maxResolution||Infinity);this.set("extent",a.extent);this.set("size",a.size);this.set("margin",a.margin||0);this.set("property",a.property||"name");this.set("filterLabel",a.filterLabel||"filter");if(a.style instanceof ol.style.Style)this.style=a.style;else this.style=new ol.style.Style({stroke:new ol.style.Stroke({color:"#000",width:1}),text:new ol.style.Text({font:"bold 14px Arial",stroke:new ol.style.Stroke({color:"#fff",width:2}),fill:new ol.style.Fill({color:"#000"})})})};ol.inherits(ol.control.GridReference,ol.control.Control);ol.control.GridReference.prototype.getFeatureName=function(a){return a.get(this.get("property")||"name")};ol.control.GridReference.prototype.sortFeatures=function(a,b){return this.getFeatureName(a)==this.getFeatureName(b)?0:this.getFeatureName(a)<this.getFeatureName(b)?-1:1};ol.control.GridReference.prototype.indexTitle=function(a){return this.getFeatureName(a).charAt(0)};ol.control.GridReference.prototype.setIndex=function(a){if(!this.getMap())return;var b=this;if(a.getArray)a=a.getArray();a.sort(function(a,c){return b.sortFeatures(a,c)});var c=$(this.element).html("");var d=$("<input>").attr("type","search").attr("placeholder",this.get("filterLabel")||"filter").on("search keyup",function(){var a=$(this).val().replace(/^\*/,"");var b=new RegExp(a,"i");$("li",e).each(function(){var a=$(this);if(a.hasClass("ol-title"))a.show();else{if(b.test($(".ol-name",a).text()))a.show();else a.hide()}});$("li.ol-title",e).each(function(){var a=$(this).nextAll("li:visible").first();if(a.length&&!a.hasClass("ol-title"))$(this).show();else $(this).hide()})}).appendTo(c);var e=$("<ul>").appendTo(c);var f,g;for(var h=0,i;i=a[h];h++){f=this.getReference(i.getGeometry().getFirstCoordinate());if(f){var j=this.getFeatureName(i);var k=this.indexTitle(i);if(k!=g){$("<li>").addClass("ol-title").text(k).appendTo(e)}g=k;$("<li>").append($("<span>").addClass("ol-name").text(j)).append($("<span>").addClass("ol-ref").text(f)).data("feature",i).click(function(){b.dispatchEvent({type:"select",feature:$(this).data("feature")})}).appendTo(e)}}};ol.control.GridReference.prototype.getReference=function(a){if(!this.getMap())return;var b=this.get("extent");var c=this.get("size");var d=Math.floor((a[0]-b[0])/(b[2]-b[0])*c[0]);if(d<0||d>=c[0])return"";var e=Math.floor((b[3]-a[1])/(b[3]-b[1])*c[1]);if(e<0||e>=c[1])return"";return String.fromCharCode(65+d)+e};ol.control.GridReference.prototype.setMap=function(a){var b=this.getMap();if(b)b.un("postcompose",this.drawGrid_,this);ol.control.Control.prototype.setMap.call(this,a);if(b)b.renderSync();if(a){a.on("postcompose",this.drawGrid_,this);if(this.source_)this.setIndex(this.source_.getFeatures())}};ol.control.GridReference.prototype.setStyle=function(a){this.style=a};ol.control.GridReference.prototype.getStyle=function(){return style};ol.control.GridReference.prototype.drawGrid_=function(a){if(this.get("maxResolution")<a.frameState.viewState.resolution)return;var b=a.context;var c=b.canvas;var d=a.frameState.pixelRatio;var e=c.width/d;var f=c.height/d;var g=this.get("extent");var h=this.get("size");var i=this.getMap();var j=ol.extent.boundingExtent([i.getPixelFromCoordinate([g[0],g[1]]),i.getPixelFromCoordinate([g[2],g[3]])]);var k=[j[0],j[1]];var l=[j[2],j[3]];var m=(l[0]-k[0])/h[0];var n=(l[1]-k[1])/h[1];b.save();var o=this.get("margin");b.scale(d,d);b.strokeStyle=this.style.getStroke().getColor();b.lineWidth=this.style.getStroke().getWidth();b.beginPath();for(var p=0;p<=h[0];p++){b.moveTo(k[0]+p*m,k[1]);b.lineTo(k[0]+p*m,l[1])}for(var p=0;p<=h[1];p++){b.moveTo(k[0],k[1]+p*n);b.lineTo(l[0],k[1]+p*n)}b.stroke();b.font=this.style.getText().getFont();b.fillStyle=this.style.getText().getFill().getColor();b.strokeStyle=this.style.getText().getStroke().getColor();var q=b.lineWidth=this.style.getText().getStroke().getWidth();var r=o+q;b.textAlign="center";var s,t,u;for(var p=0;p<h[0];p++){s=String.fromCharCode(65+p);t=k[0]+p*m+m/2;u=k[1]-r;if(u<0){u=r;b.textBaseline="hanging"}else b.textBaseline="alphabetic";b.strokeText(s,t,u);b.fillText(s,t,u);u=l[1]+r;if(u>f){u=f-r;b.textBaseline="alphabetic"}else b.textBaseline="hanging";b.strokeText(s,t,u);b.fillText(s,t,u)}b.textBaseline="middle";for(var p=0;p<h[0];p++){u=k[1]+p*n+n/2;b.textAlign="right";t=k[0]-r;if(t<0){t=r;b.textAlign="left"}else b.textAlign="right";b.strokeText(p,t,u);b.fillText(p,t,u);t=l[0]+r;if(t>e){t=e-r;b.textAlign="right"}else b.textAlign="left";b.strokeText(p,t,u);b.fillText(p,t,u)}b.restore()};ol.control.LayerPopup=function(a){a=a||{};a.switcherClass="ol-layerswitcher-popup";if(a.mouseover!==false)a.mouseover=true;ol.control.LayerSwitcher.call(this,a)};ol.inherits(ol.control.LayerPopup,ol.control.LayerSwitcher);ol.control.LayerPopup.prototype.overflow=function(){};ol.control.LayerPopup.prototype.drawList=function(a,b){var c=this;var d=function(a){a.preventDefault();var d=$(this).data("layer");c.switchLayerVisibility(d,b)};b.forEach(function(b){if(b.get("displayInLayerSwitcher")!==false){var e=$("<li>").text(b.get("title")||b.get("name")).data("layer",b).click(d).on("touchstart",d).appendTo(a);if(c.testLayerVisibility(b))e.addClass("ol-layer-hidden");if(b.getVisible())e.addClass("select")}})};ol.control.LayerSwitcherImage=function(a){a=a||{};a.switcherClass="ol-layerswitcher-image";if(a.mouseover!==false)a.mouseover=true;ol.control.LayerSwitcher.call(this,a)};ol.inherits(ol.control.LayerSwitcherImage,ol.control.LayerSwitcher);ol.control.LayerSwitcherImage.prototype.drawList=function(a,b){var c=this;var d=function(a){a.preventDefault();var d=$(this).data("layer");c.switchLayerVisibility(d,b);if(a.type=="touchstart")$(c.element).addClass("ol-collapsed")};var e=function(a){a.preventDefault();if(a.type=="mouseover")$(this).find("p").addClass("show")};var f=function(a){a.preventDefault();if(a.type=="mouseleave")$(this).find("p").removeClass("show")};a.css("overflow-y","auto");resizeLayerSwitcher();var g=ol.proj.transform([13.8428,41.8123],"EPSG:4326","EPSG:3857");b.forEach(function(b,h){if(b.get("displayInLayerSwitcher")!==false){var i=b.get("title").replace(" ","-")+"_"+h;var j=b.getPreview?b.getPreview(g,2e3):["none"];var k=$("<li>").addClass("ol-imgcontainer").addClass("shadowed").data("layer",b).click(d).on("touchstart",d).on("mouseover",e).on("mouseleave",f);if(b.getVisible())k.addClass("select");for(var l=0;l<j.length;l++){$("<img>").attr("src",j[l]).attr("draggable","false").appendTo(k)}$("<p>").text(b.get("title")||b.get("name")).appendTo(k);if(c.testLayerVisibility(b))k.addClass("ol-layer-hidden");k.appendTo(a)}});$(".ol-imgcontainer > img").error(function(){$(this).hide()})};ol.control.LayerSwitcherImage.prototype.overflow=function(){};ol.control.Overlay=function(a){if(!a)a={};var b=$("<div>").addClass("ol-unselectable ol-overlay");if(a.className)b.addClass(a.className);ol.control.Control.call(this,{element:b.get(0),target:a.target});var c=this;if(a.hideOnClick)b.click(function(){c.hide()});this.set("closeBox",a.closeBox);this._timeout=false;this.setContent(a.content)};ol.inherits(ol.control.Overlay,ol.control.Control);ol.control.Overlay.prototype.setContent=function(a){var b=this;if(a){var c=$(this.element);c.html(a);if(this.get("closeBox")){var d=$("<div>").addClass("ol-closebox").click(function(){b.hide()});c.prepend(d)}}};ol.control.Overlay.prototype.show=function(a,b){var c=this;var d=$(this.element).show();if(b){this.center_=this.getMap().getPixelFromCoordinate(b);d.css({top:this.center_[1],left:this.center_[0]})}else{this.center_=false;d.css({top:"",left:""})}this.setContent(a);if(this._timeout)clearTimeout(this._timeout);this._timeout=setTimeout(function(){d.addClass("ol-visible").css({top:"",left:""});c.dispatchEvent({type:"change:visible",visible:true,element:c.element})},10);c.dispatchEvent({type:"change:visible",visible:false,element:c.element})};ol.control.Overlay.prototype.hide=function(){var a=$(this.element).removeClass("ol-visible");if(this.center_){a.css({top:this.center_[1],left:this.center_[0]});this.center_=false}if(this._timeout)clearTimeout(this._timeout);this._timeout=setTimeout(function(){a.hide()},500);this.dispatchEvent({type:"change:visible",visible:false,element:this.element})};ol.control.Overlay.prototype.toggle=function(){if(this.getVisible())this.hide();else this.show()};ol.control.Overlay.prototype.getVisible=function(){return $(this.element).css("display")!="none"};ol.control.Overlay.prototype.setClass=function(a){var b=$(this.element).hasClass("ol-visible");$(this.element).removeClass().addClass("ol-unselectable ol-overlay"+(b?" ol-visible ":" ")+a)};ol.control.Overview=function(a){a=a||{};var b=this;this.minZoom=a.minZoom||0;this.maxZoom=a.maxZoom||18;this.rotation=a.rotation;var c;if(a.target){c=$("<div>");this.panel_=$(a.target)}else{c=$("<div>").addClass("ol-overview ol-unselectable ol-control ol-collapsed");if(/top/.test(a.align))c.addClass("ol-control-top");if(/right/.test(a.align))c.addClass("ol-control-right");$("<button>").on("touchstart",function(a){b.toggleMap();a.preventDefault()}).attr("type","button").click(function(){b.toggleMap()}).appendTo(c);this.panel_=$("<div>").addClass("panel").appendTo(c)}ol.control.Control.call(this,{element:c.get(0),target:a.target});this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:this.panel_.get(0),view:new ol.View({zoom:14,center:[270148,6247782],projection:a.projection}),layers:a.layers});this.oview_=this.ovmap_.getView();this.extentLayer=new ol.layer.Vector({name:"Cache extent",source:new ol.source.Vector,style:a.style||[new ol.style.Style({image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,0,0, 1)"}),stroke:new ol.style.Stroke({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5}),stroke:new ol.style.Stroke({width:5,color:"rgba(255,0,0,0.8)"})})]});this.ovmap_.addLayer(this.extentLayer);ol.easing.bounceFn=function(a,b){var c=(2*a+1)*Math.PI/2;var d=b>0?-1/b:-100;var e=-Math.cos(c)*Math.pow(2,d);return function(a){a=1-Math.cos(a*Math.PI/2);return 1+Math.abs(Math.cos(c*a))*Math.pow(2,d*a)+e*a}};ol.easing.elasticFn=function(a,b){var c=3*a*Math.PI/2;var d=b>0?-1/b:-100;var e=Math.cos(c)*Math.pow(2,d);return function(a){a=1-Math.cos(a*Math.PI/2);return 1-Math.cos(c*a)*Math.pow(2,d*a)+e*a}};this.ovmap_.addInteraction(new ol.interaction.Pointer({handleDownEvent:function(c){if(ol.animation){var d;if(a.panAnimation!==false){if(a.panAnimation=="elastic"||a.elasticPan){d=ol.animation.pan({duration:1e3,easing:ol.easing.elasticFn(2,.3),source:b.getMap().getView().getCenter()})}else{d=ol.animation.pan({duration:300,source:b.getMap().getView().getCenter()})}}b.getMap().beforeRender(d);b.getMap().getView().setCenter(c.coordinate)}else{if(a.panAnimation!==false){if(a.panAnimation=="elastic"||a.elasticPan){b.getMap().getView().animate({center:c.coordinate,easing:ol.easing.elasticFn(2,.3),duration:1e3})}else{b.getMap().getView().animate({center:c.coordinate,duration:300})}}else b.getMap().getView().setCenter(c.coordinate)}return false}}))};ol.inherits(ol.control.Overview,ol.control.Control);ol.control.Overview.prototype.getOverviewMap=function(){return this.ovmap_};ol.control.Overview.prototype.toggleMap=function(){$(this.element).toggleClass("ol-collapsed");this.ovmap_.updateSize()};ol.control.Overview.prototype.setPosition=function(a){if(/top/.test(a))$(this.element).addClass("ol-control-top");else $(this.element).removeClass("ol-control-top");if(/right/.test(a))$(this.element).addClass("ol-control-right");else $(this.element).removeClass("ol-control-right")};ol.control.Overview.prototype.setMap=function(a){if(this.getMap()){this.getMap().getView().un("propertychange",this.setView,this)}ol.control.Control.prototype.setMap.call(this,a);if(a){a.getView().on("propertychange",this.setView,this);this.setView()}};ol.control.Overview.prototype.calcExtent_=function(a){var b=this.getMap();if(!b)return;var c=this.extentLayer.getSource();c.clear();var d=new ol.Feature;var e=b.getSize();var f=b.getView().getResolution();var g=b.getView().getRotation();var h=b.getView().getCenter();if(!f)return;var i=f*e[0]/2;var j=f*e[1]/2;var k=this.oview_.getResolution();if(i/k>5||j/k>5){var l=Math.cos(g);var m=Math.sin(g);var n,o,p;a=[[-i,-j],[-i,j],[i,j],[i,-j]];for(n=0;n<4;++n){o=a[n][0];p=a[n][1];a[n][0]=h[0]+o*l-p*m;a[n][1]=h[1]+o*m+p*l}d.setGeometry(new ol.geom.Polygon([a]))}else{d.setGeometry(new ol.geom.Point(h))}c.addFeature(d)};ol.control.Overview.prototype.setView=function(a){if(!a){this.setView({key:"rotation"});this.setView({key:"resolution"});this.setView({key:"center"});return}switch(a.key){case"rotation":if(this.rotation)this.oview_.setRotation(this.getMap().getView().getRotation());else if(this.oview_.getRotation())this.oview_.setRotation(0);break;case"center":{var b=this.getMap().getView().calculateExtent(this.getMap().getSize());var c=this.oview_.calculateExtent(this.ovmap_.getSize());if(b[0]<c[0]||b[1]<c[1]||b[2]>c[2]||b[3]>c[3]){this.oview_.setCenter(this.getMap().getView().getCenter())}break}case"resolution":{var d=Math.round(this.getMap().getView().getZoom()/2)*2-4;d=Math.min(this.maxZoom,Math.max(this.minZoom,d));this.oview_.setZoom(d);break}default:break}this.calcExtent_()};ol.control.Permalink=function(a){var b=a||{};var c=this;var d=document.createElement("button");this.replaceState_=b.urlReplace!==false;this.fixed_=b.fixed||6;this.hash_=b.anchor?"#":"?";function e(){if(typeof b.onclick=="function")b.onclick(c.getLink());else c.setUrlReplace(!c.replaceState_)}
d.addEventListener("click",e,false);d.addEventListener("touchstart",e,false);var f=document.createElement("div");f.className=(b.className||"ol-permalink")+" ol-unselectable ol-control";f.appendChild(d);ol.control.Control.call(this,{element:f,target:b.target});this.on("change",this.viewChange_,this);this.search_={};var g=document.location.hash||document.location.search;if(g){g=g.replace(/(^#|^\?)/,"").split("&");for(var h=0;h<g.length;h++){var i=g[h].split("=");switch(i[0]){case"lon":case"lat":case"z":case"r":case"l":break;default:this.search_[i[0]]=i[1]}}}this.setPosition()};ol.inherits(ol.control.Permalink,ol.control.Control);ol.control.Permalink.prototype.setMap=function(a){if(this.getMap()){this.getMap().getLayerGroup().un("change",this.layerChange_,this);this.getMap().un("moveend",this.viewChange_,this)}ol.control.Control.prototype.setMap.call(this,a);if(a){a.getLayerGroup().on("change",this.layerChange_,this);a.on("moveend",this.viewChange_,this);this.setPosition()}};ol.control.Permalink.prototype.getLayerByLink=function(a,b){if(!b&&this.getMap())b=this.getMap().getLayers().getArray();for(var c=0;c<b.length;c++){if(b[c].get("permalink")==a)return b[c];if(b[c].getLayers){var d=this.getLayerByLink(a,b[c].getLayers().getArray());if(d)return d}}return false};ol.control.Permalink.prototype.setPosition=function(){var a=this.getMap();if(!a)return;var b=document.location.hash||document.location.search;if(!b)return;var c={};b=b.replace(/(^#|^\?)/,"").split("&");for(var d=0;d<b.length;d++){var e=b[d].split("=");c[e[0]]=e[1]}var f=ol.proj.transform([Number(c.lon),Number(c.lat)],"EPSG:4326",a.getView().getProjection());if(f[0]&&f[1])a.getView().setCenter(f);if(c.z)a.getView().setZoom(Number(c.z));if(c.r)a.getView().setRotation(Number(c.r));if(c.l){var g=c.l.split("|");function h(b){if(!b)b=a.getLayers().getArray();for(var c=0;c<b.length;c++){if(b[c].get("permalink")){b[c].setVisible(false)}if(b[c].getLayers){h(b[c].getLayers().getArray())}}}h();for(var d=0;d<g.length;d++){var e=g[d].split(":");var i=this.getLayerByLink(e[0]);var j=Number(e[1]);if(i){i.setOpacity(j);i.setVisible(true)}}}};ol.control.Permalink.prototype.getUrlParams=function(){return this.search_};ol.control.Permalink.prototype.getLink=function(){var a=this.getMap();var b=ol.proj.transform(a.getView().getCenter(),a.getView().getProjection(),"EPSG:4326");var c=a.getView().getZoom();var d=a.getView().getRotation();var e=this.layerStr_;var f="lon="+b[0].toFixed(this.fixed_)+"&lat="+b[1].toFixed(this.fixed_)+"&z="+c+(d?"&r="+Math.round(d*1e4)/1e4:"")+(e?"&l="+e:"");for(var g in this.search_)f+="&"+g+"="+this.search_[g];return document.location.protocol+"//"+document.location.host+document.location.pathname+this.hash_+f};ol.control.Permalink.prototype.setUrlReplace=function(a){try{this.replaceState_=a;if(!a){var b="";for(var c in this.search_){b+=(b==""?"?":"&")+c+"="+this.search_[c]}window.history.replaceState(null,null,document.location.origin+document.location.pathname+b)}else window.history.replaceState(null,null,this.getLink())}catch(a){}};ol.control.Permalink.prototype.viewChange_=function(){try{if(this.replaceState_)window.history.replaceState(null,null,this.getLink())}catch(a){}};ol.control.Permalink.prototype.layerChange_=function(a){var b="";function c(a){for(var d=0;d<a.length;d++){if(a[d].getVisible()&&a[d].get("permalink")){if(b)b+="|";b+=a[d].get("permalink")+":"+a[d].get("opacity")}if(a[d].getLayers)c(a[d].getLayers().getArray())}}c(this.getMap().getLayers().getArray());this.layerStr_=b;this.viewChange_()};ol.control.Profil=function(a){var b=a||{};this.info=b.info||ol.control.Profil.prototype.info;var c=this;var d;if(b.target){d=$("<div>").addClass(b.className||"ol-profil")}else{d=$("<div>").addClass((b.className||"ol-profil")+" ol-unselectable ol-control ol-collapsed");this.button=$("<button>").attr("type","button").on("click touchstart",function(a){c.toggle();a.preventDefault()}).appendTo(d)}var e=$("<div>").addClass("ol-inner").appendTo(d);e=$("<div>").css("position","relative").appendTo(e);var f=this.ratio=2;this.canvas_=document.createElement("canvas");this.canvas_.width=(b.width||300)*f;this.canvas_.height=(b.height||150)*f;$(this.canvas_).css({transform:"scale(0.5,0.5)","transform-origin":"0 0","-ms-transform":"scale(0.5,0.5)","-ms-transform-origin":"0 0","-webkit-transform":"scale(0.5,0.5)","-webkit-transform-origin":"0 0"});$("<div>").appendTo(e).width(this.canvas_.width/f).height(this.canvas_.height/f).append(this.canvas_).on("click mousemove",function(a){c.onMove(a)});ol.control.Control.call(this,{element:d.get(0),target:b.target});this.margin_={top:10*f,left:40*f,bottom:30*f,right:10*f};if(!this.info.ytitle)this.margin_.left-=20*f;if(!this.info.xtitle)this.margin_.bottom-=20*f;this.bar_=$("<div>").addClass("ol-profilbar").css({top:this.margin_.top/f+"px",height:(this.canvas_.height-this.margin_.top-this.margin_.bottom)/f+"px"}).appendTo(e);this.cursor_=$("<div>").addClass("ol-profilcursor").appendTo(e);this.popup_=$("<div>").addClass("ol-profilpopup").appendTo(this.cursor_);var g=$("<table cellpadding='0' cellspacing='0'>").appendTo(e).width(this.canvas_.width/f);var h=$("<tr>").addClass("track-info").appendTo(g);$("<td>").html((this.info.zmin||"Zmin")+': <span class="zmin">').appendTo(h);$("<td>").html((this.info.zmax||"Zmax")+': <span class="zmax">').appendTo(h);$("<td>").html((this.info.distance||"Distance")+': <span class="dist">').appendTo(h);$("<td>").html((this.info.time||"Time")+': <span class="time">').appendTo(h);h=$("<tr>").addClass("point-info").appendTo(g);$("<td>").html((this.info.altitude||"Altitude")+': <span class="z">').appendTo(h);$("<td>").html((this.info.distance||"Distance")+': <span class="dist">').appendTo(h);$("<td>").html((this.info.time||"Time")+': <span class="time">').appendTo(h);this.tab_=[];if(b.feature){this.setGeometry(b.feature)}};ol.inherits(ol.control.Profil,ol.control.Control);ol.control.Profil.prototype.info={zmin:"Zmin",zmax:"Zmax",ytitle:"Altitude (m)",xtitle:"Distance (km)",time:"Time",altitude:"Altitude",distance:"Distance"};ol.control.Profil.prototype.popup=function(a){this.popup_.html(a)};ol.control.Profil.prototype.onMove=function(a){if(!this.tab_.length)return;var b=$(this.canvas_).offset();var c=a.pageX-b.left;var d=a.pageY-b.top;var e=this.ratio;if(c>this.margin_.left/e&&c<(this.canvas_.width-this.margin_.right)/e&&d>this.margin_.top/e&&d<(this.canvas_.height-this.margin_.bottom)/e){this.bar_.css("left",c+"px").show();var f=(c*e-this.margin_.left)/this.scale_[0];var g=this.tab_[0];for(var h=1,i;i=this.tab_[h];h++){if(i[0]>=f){if(f<(i[0]+g[0])/2)i=g;break}}if(i)this.cursor_.css({left:c+"px",top:(this.canvas_.height-this.margin_.bottom+i[1]*this.scale_[1]+this.dy_)/e+"px"}).show();else this.cursor_.hide();this.bar_.parent().addClass("over");$(".point-info .z",this.element).text(i[1]+"m");$(".point-info .dist",this.element).text((i[0]/1e3).toFixed(1)+"km");$(".point-info .time",this.element).text(i[2]);if(c>this.canvas_.width/e/2)this.popup_.addClass("ol-left");else this.popup_.removeClass("ol-left");this.dispatchEvent({type:"over",click:a.type=="click",coord:i[3],time:i[2],distance:i[0]})}else{if(this.bar_.parent().hasClass("over")){this.bar_.hide();this.cursor_.hide();this.bar_.parent().removeClass("over");this.dispatchEvent({type:"out"})}}};ol.control.Profil.prototype.show=function(){$(this.element).removeClass("ol-collapsed");this.dispatchEvent({type:"show",show:true})};ol.control.Profil.prototype.hide=function(){$(this.element).addClass("ol-collapsed");this.dispatchEvent({type:"show",show:false})};ol.control.Profil.prototype.toggle=function(){var a=$(this.element).toggleClass("ol-collapsed").hasClass("ol-collapsed");this.dispatchEvent({type:"show",show:!a})};ol.control.Profil.prototype.isShown=function(){return!$(this.element).hasClass("ol-collapsed")};ol.control.Profil.prototype.setGeometry=function(a,b){if(!b)b={};if(a instanceof ol.Feature)a=a.getGeometry();var c=this.canvas_;var d=c.getContext("2d");var e=c.width;var f=c.height;d.setTransform(1,0,0,1,0,0);d.clearRect(0,0,e,f);if(!/Z/.test(a.getLayout()))return;if(/M/.test(a.getLayout()))$(".time",this.element).parent().show();else $(".time",this.element).parent().hide();var g=a.getCoordinates();switch(a.getType()){case"LineString":break;case"MultiLineString":g=g[0];break;default:return}var h=new ol.Sphere(6378137);var i=b.projection||this.getMap().getView().getProjection();function j(a,b){return h.haversineDistance(ol.proj.transform(a,i,"EPSG:4326"),ol.proj.transform(b,i,"EPSG:4326"))}function k(a,b){if(!a||!b)return"-";var c=(b-a)/60;var d=Math.trunc(c/60);var e=Math.trunc(c-d*60);return d+"h"+(e<10?"0":"")+e+"mn"}d.setTransform(1,0,0,1,this.margin_.left,f-this.margin_.bottom);var l=this.ratio;e-=this.margin_.right+this.margin_.left;f-=this.margin_.top+this.margin_.bottom;d.strokeStyle="#000";d.lineWidth=.5*l;d.beginPath();d.moveTo(0,0);d.lineTo(0,-f);d.moveTo(0,0);d.lineTo(e,0);d.stroke();var m=Infinity,n=-Infinity;var o,p,q,r=this.tab_=[];for(var s=0,t;t=g[s];s++){p=t[2];if(p<m)m=p;if(p>n)n=p;if(s==0)o=0;else o+=j(g[s-1],t);q=k(g[0][3],t[3]);r.push([o,p,q,t])}$(".track-info .zmin",this.element).text(m.toFixed(2)+"m");$(".track-info .zmax",this.element).text(n.toFixed(2)+"m");if(o>1e3){$(".track-info .dist",this.element).text((o/1e3).toFixed(1)+"km")}else{$(".track-info .dist",this.element).text(o.toFixed(1)+"m")}$(".track-info .time",this.element).text(q);var u=b.graduation||100;while(true){n=Math.ceil(n/u)*u;m=Math.floor(m/u)*u;var v=(n-m)/u;if(f/v<15*l){u*=2}else break}if(typeof b.zmin=="number"&&m>b.zmin)m=b.zmin;if(typeof b.zmax=="number"&&n<b.zmax)n=b.zmax;var w=b.amplitude;if(w){n=Math.max(m+w,n)}var x=e/o;var y=-f/(n-m);var z=this.dy_=-m*y;this.scale_=[x,y];d.font=10*l+"px arial";d.textAlign="right";d.textBaseline="middle";d.fillStyle="#000";d.beginPath();for(var s=m;s<=n;s+=u){if(b.zunit!="km")d.fillText(s,-4*l,s*y+z);else d.fillText((s/1e3).toFixed(1),-4*l,s*y+z);d.moveTo(-2*l,s*y+z);if(s!=0)d.lineTo(o*x,s*y+z);else d.lineTo(0,s*y+z)}d.textAlign="center";d.textBaseline="top";d.setLineDash([l,3*l]);var A=b.unit||"km";var B;if(o>1e3){B=Math.round(o/1e3)*100;if(B>1e3)B=Math.ceil(B/1e3)*1e3}else{A="m";if(o>100)B=Math.round(o/100)*10;else if(o>10)B=Math.round(o/10);else if(o>1)B=Math.round(o)/10;else B=o}for(var s=0;s<=o;s+=B){var C=A=="m"?s:s/1e3;d.fillText(Math.round(C*10)/10,s*x,4*l);d.moveTo(s*x,2*l);d.lineTo(s*x,0)}d.font=12*l+"px arial";d.fillText(this.info.xtitle.replace("(km)","("+A+")"),e/2,18*l);d.save();d.rotate(-Math.PI/2);d.fillText(this.info.ytitle,f/2,-this.margin_.left);d.restore();d.stroke();d.strokeStyle="#369";d.lineWidth=1;d.setLineDash([]);d.beginPath();for(var s=0,t;t=r[s];s++){if(s==0)d.moveTo(t[0]*x,t[1]*y+z);else d.lineTo(t[0]*x,t[1]*y+z)}d.stroke()};ol.control.Profil.prototype.getImage=function(a,b){if(a==="canvas")return this.canvas_;return this.canvas_.toDataURL(a,b)};ol.control.Search=function(a){var b=this;if(!a)a={};if(a.typing==undefined)a.typing=300;var c;if(a.target){c=$("<div>").addClass((a.className||"")+" ol-search")}else{c=$("<div>").addClass((a.className||"")+" ol-search ol-unselectable ol-control ol-collapsed");this.button=$("<button>").attr("type","button").attr("title",a.label||"search").click(function(){c.toggleClass("ol-collapsed");if(!c.hasClass("ol-collapsed")){$("input.search",c).focus();$("li",c).removeClass("select")}}).appendTo(c)}var d,e="";$("<input>").attr("type","search").addClass("search").attr("placeholder",a.placeholder||"Search...").on("change",function(a){b.dispatchEvent({type:"change:input",input:a,value:$(this).val()})}).on("keyup search cut paste input",function(f){var g=$("ul.autocomplete li.select",c);var h=$(this).val();if(f.key=="ArrowDown"||f.key=="ArrowUp"||f.key=="Down"||f.key=="Up"){g.removeClass("select");g=/Down/.test(f.key)?g.next():g.prev();if(g.length)g.addClass("select");else $("ul.autocomplete li",c).first().addClass("select")}else if(f.type=="input"&&!h){b.drawList_()}else if(g.length&&(f.type=="search"||f.key=="Enter")){if(c.hasClass("ol-control"))$(this).blur();g.removeClass("select");e=h;b.select(g.data("search"))}else if(f.type=="search"||f.key=="Enter"||e!=h&&a.typing>=0){e=h;if(e){if(d)clearTimeout(d);d=setTimeout(function(){if(e.length>=b.get("minLength")){var a=b.autocomplete(e,function(a){b.drawList_(a)});if(a)b.drawList_(a)}else b.drawList_()},a.typing)}else b.drawList_()}else{$("ul.autocomplete li",c).removeClass("select")}}).blur(function(){setTimeout(function(){c.addClass("ol-collapsed")},200)}).focus(function(){c.removeClass("ol-collapsed")}).appendTo(c);$("<ul>").addClass("autocomplete").appendTo(c);ol.control.Control.call(this,{element:c.get(0),target:a.target});if(typeof a.getTitle=="function")this.getTitle=a.getTitle;if(typeof a.autocomplete=="function")this.autocomplete=a.autocomplete;this.set("minLength",a.minLength||1);this.set("maxItems",a.maxItems||10)};ol.inherits(ol.control.Search,ol.control.Control);ol.control.Search.prototype.getTitle=function(a){return a.name||"No title"};ol.control.Search.prototype.search=function(){$("input.search",this.element).trigger("search")};ol.control.Search.prototype.setInput=function(a,b){$("input.search",this.element).val(a);if(b)$("input.search",this.element).trigger("keyup")};ol.control.Search.prototype.select=function(a){this.dispatchEvent({type:"select",search:a})};ol.control.Search.prototype.autocomplete=function(a,b){b([]);return false};ol.control.Search.prototype.drawList_=function(a){var b=$("ul.autocomplete",this.element).html("");if(!a)return;var c=this;var d=Math.min(c.get("maxItems"),a.length);for(var e=0;e<d;e++){$("<li>").html(c.getTitle(a[e])).data("search",a[e]).click(function(a){c.select($(this).data("search"))}).appendTo(b)}};ol.control.SearchFeature=function(a){if(!a)a={};ol.control.Search.call(this,a);if(typeof a.getSearchString=="function")this.getSearchString=a.getSearchString;this.set("property",a.property||"name");this.source_=a.source};ol.inherits(ol.control.SearchFeature,ol.control.Search);ol.control.SearchFeature.prototype.getTitle=function(a){return a.get(this.get("property")||"name")};ol.control.SearchFeature.prototype.getSearchString=function(a){return this.getTitle(a)};ol.control.SearchFeature.prototype.autocomplete=function(a,b){var c=[];a=a.replace(/^\*/,"");var d=new RegExp(a,"i");var e=this.source_.getFeatures();var f=this.get("maxItems");for(var g=0,h;h=e[g];g++){if(d.test(this.getSearchString(h))){c.push(h);if(--f<=0)break}}return c};ol.control.SearchPhoton=function(a){a=a||{};delete a.autocomplete;a.minLength=a.minLength||3;a.typing=a.typing||800;a.url=a.url||"http://photon.komoot.de/api/";ol.control.Search.call(this,a);this.set("lang",a.lang);this.set("position",a.position);this.set("url",a.url)};ol.inherits(ol.control.SearchPhoton,ol.control.Search);ol.control.SearchPhoton.prototype.getTitle=function(a){var b=a.properties;return(b.housenumber||"")+" "+(b.street||b.name||"")+"<i>"+" "+(b.postcode||"")+" "+(b.city||"")+" ("+b.country+")</i>"};ol.control.SearchPhoton.prototype.autocomplete=function(a,b){var c={q:a,lang:this.get("lang"),limit:this.get("maxItems")};if(this.get("position")){var d=this.getMap().getView();var e=new ol.geom.Point(d.getCenter());e=e.transform(d.getProjection(),"EPSG:4326").getCoordinates();c.lon=e[0];c.lat=e[1]}var f=this.get("url");if(window.location.protocol==="https:"){var g=document.createElement("a");g.href=f;g.protocol=window.location.protocol;f=g.href}$.support.cors=true;$.ajax(f,{dataType:"json",data:c,success:function(a){b(a.features)},error:function(){console.log(f,arguments)}})};ol.control.SearchPhoton.prototype.select=function(a){var b=a.geometry.coordinates;try{b=ol.proj.transform(a.geometry.coordinates,"EPSG:4326",this.getMap().getView().getProjection())}catch(a){}this.dispatchEvent({type:"select",search:a,coordinate:b})};ol.control.Swipe=function(a){var b=a||{};var c=this;var d=document.createElement("button");var e=document.createElement("div");e.className=(b.className||"ol-swipe")+" ol-unselectable ol-control";e.appendChild(d);$(e).on("mousedown touchstart",this,this.move);ol.control.Control.call(this,{element:e});this.layers=[];if(b.layers)this.addLayer(b.layers,false);if(b.rightLayers)this.addLayer(b.rightLayers,true);this.on("propertychange",function(){if(this.getMap())this.getMap().renderSync();if(this.get("orientation")==="horizontal"){$(this.element).css("top",this.get("position")*100+"%");$(this.element).css("left","")}else{if(this.get("orientation")!=="vertical")this.set("orientation","vertical");$(this.element).css("left",this.get("position")*100+"%");$(this.element).css("top","")}$(this.element).removeClass("horizontal vertical");$(this.element).addClass(this.get("orientation"))},this);this.set("position",b.position||.5);this.set("orientation",b.orientation||"vertical")};ol.inherits(ol.control.Swipe,ol.control.Control);ol.control.Swipe.prototype.setMap=function(a){if(this.getMap()){for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(c.right)c.layer.un("precompose",this.precomposeRight,this);else c.layer.un("precompose",this.precomposeLeft,this);c.layer.un("postcompose",this.postcompose,this)}this.getMap().renderSync()}ol.control.Control.prototype.setMap.call(this,a);if(a){for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(c.right)c.layer.on("precompose",this.precomposeRight,this);else c.layer.on("precompose",this.precomposeLeft,this);c.layer.on("postcompose",this.postcompose,this)}a.renderSync()}};ol.control.Swipe.prototype.isLayer_=function(a){for(k=0;k<this.layers.length;k++){if(this.layers[k].layer===a)return k}return-1};ol.control.Swipe.prototype.addLayer=function(a,b){if(!(a instanceof Array))a=[a];for(var c=0;c<a.length;c++){l=a[c];if(this.isLayer_(l)<0){this.layers.push({layer:l,right:b});if(this.getMap()){if(b)l.on("precompose",this.precomposeRight,this);else l.on("precompose",this.precomposeLeft,this);l.on("postcompose",this.postcompose,this);this.getMap().renderSync()}}}};ol.control.Swipe.prototype.removeLayer=function(a){if(!(a instanceof Array))a=[a];for(var b=0;b<a.length;b++){var c=this.isLayer_(a[b]);if(c>=0&&this.getMap()){if(this.layers[c].right)a[b].un("precompose",this.precomposeRight,this);else a[b].un("precompose",this.precomposeLeft,this);a[b].un("postcompose",this.postcompose,this);this.layers.splice(c,1);this.getMap().renderSync()}}};ol.control.Swipe.prototype.move=function(a){var b=a.data;switch(a.type){case"touchcancel":case"touchend":case"mouseup":{b.isMoving=false;$(document).off("mouseup mousemove touchend touchcancel touchmove",b.move);break}case"mousedown":case"touchstart":{b.isMoving=true;$(document).on("mouseup mousemove touchend touchcancel touchmove",b,b.move)}case"mousemove":case"touchmove":{if(b.isMoving){if(b.get("orientation")==="vertical"){var c=a.pageX||a.originalEvent.touches&&a.originalEvent.touches.length&&a.originalEvent.touches[0].pageX||a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length&&a.originalEvent.changedTouches[0].pageX;if(!c)break;c-=$(b.getMap().getTargetElement()).offset().left;var d=b.getMap().getSize()[0];d=Math.min(Math.max(0,1-(d-c)/d),1);b.set("position",d)}else{var e=a.pageY||a.originalEvent.touches&&a.originalEvent.touches.length&&a.originalEvent.touches[0].pageY||a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length&&a.originalEvent.changedTouches[0].pageY;if(!e)break;e-=$(b.getMap().getTargetElement()).offset().top;var d=b.getMap().getSize()[1];d=Math.min(Math.max(0,1-(d-e)/d),1);b.set("position",d)}}break}default:break}};ol.control.Swipe.prototype.precomposeLeft=function(a){var b=a.context;var c=b.canvas;b.save();b.beginPath();if(this.get("orientation")==="vertical")b.rect(0,0,c.width*this.get("position"),c.height);else b.rect(0,0,c.width,c.height*this.get("position"));b.clip()};ol.control.Swipe.prototype.precomposeRight=function(a){var b=a.context;var c=b.canvas;b.save();b.beginPath();if(this.get("orientation")==="vertical")b.rect(c.width*this.get("position"),0,c.width,c.height);else b.rect(0,c.height*this.get("position"),c.width,c.height);b.clip()};ol.control.Swipe.prototype.postcompose=function(a){a.context.restore()};ol.control.Target=function(a){a=a||{};this.style=a.style||[new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:true,stroke:new ol.style.Stroke({color:"#fff",width:3})})}),new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:true,stroke:new ol.style.Stroke({color:"#000",width:1})})})];if(!(this.style instanceof Array))this.style=[this.style];this.composite=a.composite||"";var b=document.createElement("div");b.className="ol-target ol-unselectable ol-control";ol.control.Control.call(this,{element:b,target:a.target});this.setVisible(a.visible!==false)};ol.inherits(ol.control.Target,ol.control.Control);ol.control.Target.prototype.setMap=function(a){if(this.getMap()){this.getMap().un("postcompose",this.drawTarget_,this);if(this.getVisible())this.getMap().renderSync()}ol.control.Control.prototype.setMap.call(this,a);if(a){a.on("postcompose",this.drawTarget_,this)}};ol.control.Target.prototype.setVisible=function(a){this.set("visible",a);if(this.getMap())this.getMap().renderSync()};ol.control.Target.prototype.getVisible=function(){return this.get("visible")};ol.control.Target.prototype.drawTarget_=function(a){if(!this.getMap()||!this.getVisible())return;var b=a.context;var c=a.frameState.pixelRatio;b.save();b.scale(c,c);var d=b.canvas.width/(2*c);var e=b.canvas.height/(2*c);var f=new ol.geom.Point(this.getMap().getCoordinateFromPixel([d,e]));if(this.composite)b.globalCompositeOperation=this.composite;for(var g=0;g<this.style.length;g++){var h=this.style[g];if(h instanceof ol.style.Style){var i=0;var j=ol.Map.prototype.getFeaturesAtPixel?false:h.getImage();if(j){i=j.getScale();j.setScale(c*i)}a.vectorContext.setStyle(h);a.vectorContext.drawGeometry(f);if(j)j.setScale(i)}}b.restore()};ol.control.Toggle=function(a){a=a||{};var b=this;this.interaction_=a.interaction;if(this.interaction_){this.interaction_.on("change:active",function(a){b.setActive(!a.oldValue)})}if(a.toggleFn)a.onToggle=a.toggleFn;a.handleClick=function(){b.toggle();if(a.onToggle)a.onToggle.call(b,b.getActive())};a.className=(a.className||"")+" ol-toggle";ol.control.Button.call(this,a);this.set("title",a.title);this.set("autoActivate",a.autoActivate);if(a.bar){this.subbar_=a.bar;this.subbar_.setTarget(this.element);$(this.subbar_.element).addClass("ol-option-bar")}this.setActive(a.active);this.setDisable(a.disable)};ol.inherits(ol.control.Toggle,ol.control.Button);ol.control.Toggle.prototype.setMap=function(a){if(!a&&this.getMap()){if(this.interaction_){this.getMap().removeInteraction(this.interaction_)}if(this.subbar_)this.getMap().removeControl(this.subbar_)}ol.control.Control.prototype.setMap.call(this,a);if(a){if(this.interaction_)a.addInteraction(this.interaction_);if(this.subbar_)a.addControl(this.subbar_)}};ol.control.Toggle.prototype.getSubBar=function(){return this.subbar_};ol.control.Toggle.prototype.getDisable=function(){return $("button",this.element).prop("disabled")};ol.control.Toggle.prototype.setDisable=function(a){if(this.getDisable()==a)return;$("button",this.element).prop("disabled",a);if(a&&this.getActive())this.setActive(false);this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!a,disable:a})};ol.control.Toggle.prototype.getActive=function(){return $(this.element).hasClass("ol-active")};ol.control.Toggle.prototype.toggle=function(){if(this.getActive())this.setActive(false);else this.setActive(true)};ol.control.Toggle.prototype.setActive=function(a){if(this.getActive()==a)return;if(a)$(this.element).addClass("ol-active");else $(this.element).removeClass("ol-active");if(this.interaction_)this.interaction_.setActive(a);if(this.subbar_)this.subbar_.setActive(a);this.dispatchEvent({type:"change:active",key:"active",oldValue:!a,active:a})};ol.control.Toggle.prototype.setInteraction=function(a){this.interaction_=a};ol.control.Toggle.prototype.getInteraction=function(){return this.interaction_};ol.featureAnimation=function(a){a=a||{};this.duration_=typeof a.duration=="number"?a.duration>=0?a.duration:0:1e3;this.fade_=typeof a.fade=="function"?a.fade:null;this.repeat_=Number(a.repeat);var b=typeof a.easing=="function"?a.easing:ol.easing.linear;if(a.revers)this.easing_=function(a){return 1-b(a)};else this.easing_=b;this.hiddenStyle=a.hiddenStyle;ol.Object.call(this)};ol.inherits(ol.featureAnimation,ol.Object);ol.featureAnimation.prototype.drawGeom_=function(a,b,c){if(this.fade_){a.context.globalAlpha=this.fade_(1-a.elapsed)}var d=a.style;for(var e=0;e<d.length;e++){var f=0;var g=ol.Map.prototype.getFeaturesAtPixel?false:d[e].getImage();if(g){f=g.getScale();g.setScale(a.frameState.pixelRatio*f)}try{a.vectorContext.setStyle(d[e]);if(d[e].getZIndex()<0)a.vectorContext.drawGeometry(c||b);else a.vectorContext.drawGeometry(b)}catch(a){}if(g)g.setScale(f)}};ol.featureAnimation.prototype.animate=function(a){return false};ol.Map.prototype.animateFeature=ol.layer.Vector.prototype.animateFeature=function(a,b){var c=this;var d;var e=a.getStyle();var f=e||(this.getStyleFunction?this.getStyleFunction()(a):null);if(!f)f=[];if(!(f instanceof Array))f=[f];a.setStyle(b.hiddenStyle||[]);var g={vectorContext:null,frameState:null,start:0,time:0,elapsed:0,extent:false,feature:a,geom:a.getGeometry(),typeGeom:a.getGeometry().getType(),bbox:a.getGeometry().getExtent(),coord:ol.extent.getCenter(a.getGeometry().getExtent()),style:f};if(!(b instanceof Array))b=[b];for(var h=b.length-1;h>=0;h--){if(b[h].duration_===0)b.splice(h,1)}var i=0,j=0;function k(c){g.vectorContext=c.vectorContext;g.frameState=c.frameState;if(!g.extent){g.extent=c.frameState.extent;g.start=c.frameState.time;g.context=c.context}g.time=c.frameState.time-g.start;g.elapsed=g.time/b[j].duration_;if(g.elapsed>1)g.elapsed=1;if(!b[j].animate(g)){i++;if(i<b[j].repeat_){g.extent=false}else if(j<b.length-1){b[j].dispatchEvent({type:"animationend",feature:a});j++;i=0;g.extent=false}else{l()}}c.frameState.animate=true}function l(f){ol.Observable.unByKey(d);d=null;a.setStyle(e);var g={type:"animationend",feature:a};if(f){for(var h in f)if(f.hasOwnProperty(h)){g[h]=f[h]}}b[j].dispatchEvent(g);c.dispatchEvent(g)}function m(e){if(b.length&&!d){d=c.on("postcompose",k,c);if(c.renderSync)c.renderSync();else c.changed();var f={type:"animationstart",feature:a};if(e){for(var g in e)if(e.hasOwnProperty(g)){f[g]=e[g]}}b[j].dispatchEvent(f);c.dispatchEvent(f)}}m();return{start:m,stop:l,isPlaying:function(){return!!d}}};ol.featureAnimation.Bounce=function(a){a=a||{};ol.featureAnimation.call(this,a);this.amplitude_=a.amplitude||40;this.bounce_=-Math.PI*(a.bounce||3)};ol.inherits(ol.featureAnimation.Bounce,ol.featureAnimation);ol.featureAnimation.Bounce.prototype.animate=function(a){var b=a.geom.clone();var c=Math.abs(Math.sin(this.bounce_*a.elapsed))*this.amplitude_*(1-this.easing_(a.elapsed))*a.frameState.viewState.resolution;b.translate(0,c);this.drawGeom_(a,b,a.geom);return a.time<=this.duration_};ol.featureAnimation.Drop=function(a){a=a||{};this.speed_=a.speed||0;ol.featureAnimation.call(this,a);this.side_=a.side||"top"};ol.inherits(ol.featureAnimation.Drop,ol.featureAnimation);ol.featureAnimation.Drop.prototype.animate=function(a){if(!a.time){var b=a.frameState.viewState.rotation;var c=a.frameState.size[1]*a.frameState.viewState.resolution;if(this.side_!="top")c*=-1;this.dx=-Math.sin(b)*c;this.dy=Math.cos(b)*c;if(this.speed_){this.duration_=c/this.speed_/a.frameState.viewState.resolution}}var d=a.geom.clone();d.translate(this.dx*(1-this.easing_(a.elapsed)),this.dy*(1-this.easing_(a.elapsed)));this.drawGeom_(a,d,a.geom);return a.time<=this.duration_};ol.featureAnimation.Fade=function(a){a=a||{};this.speed_=a.speed||0;ol.featureAnimation.call(this,a)};ol.inherits(ol.featureAnimation.Fade,ol.featureAnimation);ol.featureAnimation.Fade.prototype.animate=function(a){a.context.globalAlpha=this.easing_(a.elapsed);this.drawGeom_(a,a.geom);return a.time<=this.duration_};ol.featureAnimation.None=function(a){ol.featureAnimation.call(this,a)};ol.inherits(ol.featureAnimation.None,ol.featureAnimation);ol.featureAnimation.None.prototype.animate=function(a){return a.time<=this.duration_};ol.featureAnimation.Null=function(a){ol.featureAnimation.call(this,{duration:0})};ol.inherits(ol.featureAnimation.Null,ol.featureAnimation);ol.featureAnimation.Path=function(a){a=a||{};ol.featureAnimation.call(this,a);this.speed_=a.speed||0;this.path_=a.path;if(this.path_&&this.path_.getGeometry)this.path_=this.path_.getGeometry();if(this.path_&&this.path_.getLineString)this.path_=this.path_.getLineString();if(this.path_.getLength){this.dist_=this.path_.getLength();if(this.path_&&this.path_.getCoordinates)this.path_=this.path_.getCoordinates()}else this.dist_=0;if(this.speed_>0)this.duration_=this.dist_/this.speed_};ol.inherits(ol.featureAnimation.Path,ol.featureAnimation);ol.featureAnimation.Path.prototype.animate=function(a){if(!a.time){if(!this.dist_)return false}var b=this.dist_*this.easing_(a.elapsed);var c,d,e,f,g,h=0;d=this.path_[0];for(var i=1;i<this.path_.length;i++){c=d;d=this.path_[i];e=d[0]-c[0];f=d[1]-c[1];g=Math.sqrt(e*e+f*f);if(g&&h+g>=b){var j=(b-h)/g;d=[c[0]+(d[0]-c[0])*j,c[1]+(d[1]-c[1])*j];break}h+=g}a.geom.setCoordinates(d);this.drawGeom_(a,a.geom);return a.time<=this.duration_};ol.featureAnimation.Shake=function(a){a=a||{};ol.featureAnimation.call(this,a);this.amplitude_=a.amplitude||40;this.bounce_=-Math.PI*(a.bounce||6);this.horizontal_=a.horizontal};ol.inherits(ol.featureAnimation.Shake,ol.featureAnimation);ol.featureAnimation.Shake.prototype.animate=function(a){var b=a.geom.clone();var c=a.geom.clone();var d=this.easing_(a.elapsed);d=Math.sin(this.bounce_*d)*this.amplitude_*(1-d)*a.frameState.viewState.resolution;if(this.horizontal_){b.translate(d,0);c.translate(d,0)}else b.translate(0,d);this.drawGeom_(a,b,c);return a.time<=this.duration_};ol.featureAnimation.Show=function(a){ol.featureAnimation.call(this,a)};ol.inherits(ol.featureAnimation.Show,ol.featureAnimation);ol.featureAnimation.Show.prototype.animate=function(a){this.drawGeom_(a,a.geom);return a.time<=this.duration_};ol.featureAnimation.Slide=function(a){a=a||{};this.speed_=a.speed||0;ol.featureAnimation.call(this,a);this.side_=a.side||"left"};ol.inherits(ol.featureAnimation.Slide,ol.featureAnimation);ol.featureAnimation.Slide.prototype.animate=function(a){if(!a.time){if(this.side_=="left")this.dx=a.extent[0]-a.bbox[2];else this.dx=a.extent[2]-a.bbox[0];if(this.speed_)this.duration_=Math.abs(this.dx)/this.speed_/a.frameState.viewState.resolution}var b=a.geom.clone();b.translate(this.dx*(1-this.easing_(a.elapsed)),0);this.drawGeom_(a,b);return a.time<=this.duration_};ol.featureAnimation.Teleport=function(a){ol.featureAnimation.call(this,a)};ol.inherits(ol.featureAnimation.Teleport,ol.featureAnimation);ol.featureAnimation.Teleport.prototype.animate=function(a){var b=this.easing_(a.elapsed);if(b){a.context.save();var c=a.frameState.pixelRatio;a.context.globalAlpha=b;a.context.scale(b,1/b);var d=a.frameState.coordinateToPixelTransform;var e=(1/b-1)*c*(d[0]*a.coord[0]+d[1]*a.coord[1]+d[4]);var f=(b-1)*c*(d[2]*a.coord[0]+d[3]*a.coord[1]+d[5]);a.context.translate(e,f);this.drawGeom_(a,a.geom);a.context.restore()}return a.time<=this.duration_};ol.featureAnimation.Throw=function(a){a=a||{};ol.featureAnimation.call(this,a);this.speed_=a.speed||0;this.side_=a.side||"left"};ol.inherits(ol.featureAnimation.Throw,ol.featureAnimation);ol.featureAnimation.Throw.prototype.animate=function(a){if(!a.time&&this.speed_){var b,c;if(this.side_=="left"){b=this.dx=a.extent[0]-a.bbox[2];c=this.dy=a.extent[3]-a.bbox[1]}else{b=this.dx=a.extent[2]-a.bbox[0];c=this.dy=a.extent[3]-a.bbox[1]}this.duration_=Math.sqrt(b*b+c*c)/this.speed_/a.frameState.viewState.resolution}var d=a.geom.clone();var e=a.geom.clone()
;d.translate(this.dx*(1-this.easing_(a.elapsed)),this.dy*Math.cos(Math.PI/2*this.easing_(a.elapsed)));e.translate(this.dx*(1-this.easing_(a.elapsed)),0);this.drawGeom_(a,d,e);return a.time<=this.duration_};ol.featureAnimation.Zoom=function(a){a=a||{};ol.featureAnimation.call(this,a);this.set("zoomout",a.zoomOut)};ol.inherits(ol.featureAnimation.Zoom,ol.featureAnimation);ol.featureAnimation.ZoomOut=function(a){a=a||{};a.zoomOut=true;ol.featureAnimation.Zoom.call(this,a)};ol.inherits(ol.featureAnimation.ZoomOut,ol.featureAnimation.Zoom);ol.featureAnimation.Zoom.prototype.animate=function(a){var b=this.easing_(a.elapsed);if(b){if(this.get("zoomout"))b=1/b;var c=a.style;var d,e=[];for(var f=0;f<c.length;f++){d=c[f].getImage();if(d){e[f]=d.getScale();d.setScale(e[f]*b)}}a.context.save();var g=a.frameState.pixelRatio;var h=a.frameState.coordinateToPixelTransform;var i=(1/b-1)*g*(h[0]*a.coord[0]+h[1]*a.coord[1]+h[4]);var j=(1/b-1)*g*(h[2]*a.coord[0]+h[3]*a.coord[1]+h[5]);a.context.scale(b,b);a.context.translate(i,j);this.drawGeom_(a,a.geom);a.context.restore();for(var f=0;f<c.length;f++){d=c[f].getImage();if(d)d.setScale(e[f])}}return a.time<=this.duration_};ol.filter={};ol.filter.Base=function(a){ol.Object.call(this);if(a&&a.active===false)this.set("active",false);else this.set("active",true)};ol.inherits(ol.filter.Base,ol.Object);ol.filter.Base.prototype.setActive=function(a){this.set("active",a===true)};ol.filter.Base.prototype.getActive=function(a){return this.get("active")};(function(){function a(a){if(this.get("active"))this.precompose(a)}function b(a){if(this.get("active"))this.postcompose(a)}function c(a){if(this.renderSync)this.renderSync();else this.changed()}function d(d){if(!this.filters_)this.filters_=[];this.filters_.push(d);if(d.precompose)this.on("precompose",a,d);if(d.postcompose)this.on("postcompose",b,d);d.on("propertychange",c,this);c.call(this)}function e(d){if(!this.filters_)this.filters_=[];for(var e=this.filters_.length-1;e>=0;e--){if(this.filters_[e]===d)this.filters_.splice(e,1)}if(d.precompose)this.un("precompose",a,d);if(d.postcompose)this.un("postcompose",b,d);d.un("propertychange",c,this);c.call(this)}ol.Map.prototype.addFilter=function(a){d.call(this,a)};ol.Map.prototype.removeFilter=function(a){e.call(this,a)};ol.Map.prototype.getFilters=function(){return this.filters_};ol.layer.Base.prototype.addFilter=function(a){d.call(this,a)};ol.layer.Base.prototype.removeFilter=function(a){e.call(this,a)};ol.layer.Base.prototype.getFilters=function(){return this.filters_}})();ol.filter.Mask=function(a){a=a||{};ol.filter.Base.call(this,a);if(a.feature){switch(a.feature.getGeometry().getType()){case"Polygon":case"MultiPolygon":this.feature_=a.feature;break;default:break}}this.set("inner",a.inner);this.fillColor_=a.fill?ol.color.asString(a.fill.getColor())||"rgba(0,0,0,0.2)":"rgba(0,0,0,0.2)"};ol.inherits(ol.filter.Mask,ol.filter.Base);ol.filter.Mask.prototype.drawFeaturePath_=function(a,b){var c=a.context;var d=c.canvas;var e=a.frameState.pixelRatio;var f=a.frameState.coordinateToPixelTransform;function g(a){return[(a[0]*f[0]+a[1]*f[1]+f[4])*e,(a[0]*f[2]+a[1]*f[3]+f[5])*e]}if(!f){f=a.frameState.coordinateToPixelMatrix;g=function(a){return[(a[0]*f[0]+a[1]*f[1]+f[12])*e,(a[0]*f[4]+a[1]*f[5]+f[13])*e]}}var h=this.feature_.getGeometry().getCoordinates();if(this.feature_.getGeometry().getType()=="Polygon")h=[h];c.beginPath();if(b){c.moveTo(0,0);c.lineTo(d.width,0);c.lineTo(d.width,d.height);c.lineTo(0,d.height);c.lineTo(0,0)}for(var i=0;i<h.length;i++){var j=h[i];for(var k=0;k<j.length;k++){var l=g(j[k][0]);c.moveTo(l[0],l[1]);for(var m=1;m<j[k].length;m++){l=g(j[k][m]);c.lineTo(l[0],l[1])}}}};ol.filter.Mask.prototype.postcompose=function(a){if(!this.feature_)return;var b=a.context;b.save();this.drawFeaturePath_(a,!this.get("inner"));b.fillStyle=this.fillColor_;b.fill("evenodd");b.restore()};ol.filter.Clip=function(a){a=a||{};ol.filter.Base.call(this,a);this.set("coords",a.coords);this.set("units",a.units);this.set("keepAspectRatio",a.keepAspectRatio);this.set("extent",a.extent||[0,0,1,1]);this.set("color",a.color);if(!a.extent&&a.units!="%"&&a.coords){var b=Infinity;var c=Infinity;var d=-Infinity;var e=-Infinity;for(var f=0,g;g=a.coords[f];f++){if(b>g[0])b=g[0];if(d<g[0])d=g[0];if(c>g[1])c=g[1];if(e<g[1])e=g[1]}a.extent=[b,c,d,e]}};ol.inherits(ol.filter.Clip,ol.filter.Base);ol.filter.Clip.prototype.clipPath_=function(a){var b=a.context;var c=b.canvas;var d=this.get("coords");if(!d)return;var e=this.get("extent");var f=1,g=1;if(this.get("units")=="%"){f=c.width/(e[2]-e[0]);g=c.height/(e[3]-e[1])}if(this.get("keepAspectRatio")){f=g=Math.min(f,g)}var h=this.get("position");var i=0,j=0;if(/left/.test(h)){i=-e[0]*f}else if(/center/.test(h)){i=c.width/2-(e[2]-e[0])*f/2}else if(/right/.test(h)){i=c.width-(e[2]-e[0])*f}var k=function(a){return a*f+i};if(/top/.test(h)){j=-e[1]*g}else if(/middle/.test(h)){j=c.height/2-(e[3]-e[1])*g/2}else if(/bottom/.test(h)){j=c.height-(e[3]-e[1])*g}var l=function(a){return a*g+j};b.moveTo(k(d[0][0]),l(d[0][1]));for(var m=1;p=d[m];m++){b.lineTo(k(p[0]),l(p[1]))}b.lineTo(k(d[0][0]),l(d[0][1]))};ol.filter.Clip.prototype.precompose=function(a){if(!this.get("color")){a.context.save();a.context.beginPath();this.clipPath_(a);a.context.clip()}};ol.filter.Clip.prototype.postcompose=function(a){if(this.get("color")){var b=a.context;var c=a.context.canvas;b.save();b.beginPath();b.moveTo(0,0);b.lineTo(0,c.height);b.lineTo(c.width,c.height);b.lineTo(c.width,c.height);b.lineTo(c.width,0);b.lineTo(0,0);this.clipPath_(a);b.fillStyle=this.get("color");b.fill("evenodd")}a.context.restore()};ol.filter.Colorize=function(a){ol.filter.Base.call(this,a);this.setFilter(a)};ol.inherits(ol.filter.Colorize,ol.filter.Base);ol.filter.Colorize.prototype.setFilter=function(a){a=a||{};switch(a){case"grayscale":a={operation:"hue",red:0,green:0,blue:0,value:1};break;case"invert":a={operation:"difference",red:255,green:255,blue:255,value:1};break;case"sepia":a={operation:"color",red:153,green:102,blue:51,value:.6};break;default:break}var b=a.color?ol.color.asArray(a.color):[a.red,a.green,a.blue,a.value];this.set("color",ol.color.asString(b));this.set("value",b[3]||1);switch(a.operation){case"color":case"hue":case"difference":case"color-dodge":case"enhance":this.set("operation",a.operation);break;case"saturation":var c=255*(a.value||0);this.set("color",ol.color.asString([0,0,c,c||1]));this.set("operation",a.operation);break;case"luminosity":var c=255*(a.value||0);this.set("color",ol.color.asString([c,c,c,255]));this.set("operation","hard-light");break;case"contrast":var c=255*(a.value||0);this.set("color",ol.color.asString([c,c,c,255]));this.set("operation","soft-light");break;default:this.set("operation","color");break}};ol.filter.Colorize.prototype.setValue=function(a){this.set("value",a);var b=ol.color.asArray(this.get("color"));b[3]=a;this.set("color",ol.color.asString(b))};ol.filter.Colorize.prototype.setColor=function(a){a=ol.color.asArray(a);if(a){a[3]=this.get("value");this.set("color",ol.color.asString(a))}};ol.filter.Colorize.prototype.precompose=function(a){};ol.filter.Colorize.prototype.postcompose=function(a){var b=a.context;var c=b.canvas;b.save();if(this.get("operation")=="enhance"){var d=this.get("value");if(d){var e=c.width;var f=c.height;b.globalCompositeOperation="color-burn";b.globalAlpha=d;b.drawImage(c,0,0,e,f);b.drawImage(c,0,0,e,f);b.drawImage(c,0,0,e,f)}}else{b.globalCompositeOperation=this.get("operation");b.fillStyle=this.get("color");b.fillRect(0,0,c.width,c.height)}b.restore()};ol.filter.Composite=function(a){ol.filter.Base.call(this,a);this.set("operation",a.operation||"source-over")};ol.inherits(ol.filter.Composite,ol.filter.Base);ol.filter.Composite.prototype.setOperation=function(a){this.set("operation",a||"source-over")};ol.filter.Composite.prototype.precompose=function(a){var b=a.context;b.save();b.globalCompositeOperation=this.get("operation")};ol.filter.Composite.prototype.postcompose=function(a){a.context.restore()};ol.filter.Crop=function(a){a=a||{};ol.filter.Mask.call(this,a)};ol.inherits(ol.filter.Crop,ol.filter.Mask);ol.filter.Crop.prototype.precompose=function(a){if(!this.feature_)return;var b=a.context;b.save();this.drawFeaturePath_(a,this.get("inner"));b.clip("evenodd")};ol.filter.Crop.prototype.postcompose=function(a){if(this.feature_)a.context.restore()};ol.filter.Fold=function(a){a=a||{};ol.filter.Base.call(this,a);this.set("fold",a.fold||[8,4]);this.set("margin",a.margin||8);this.set("padding",a.padding||8);if(typeof a.fsize=="number")a.fsize=[a.fsize,a.fsize];this.set("fsize",a.fsize||[8,10])};ol.inherits(ol.filter.Fold,ol.filter.Base);ol.filter.Fold.prototype.drawLine_=function(a,b,c){var d=a.canvas;var e=this.get("fold");var f=d.width;var g=d.height;a.beginPath();a.moveTo(c,c);for(var h=1;h<=e[0];h++){x=h*f/e[0]-(h==e[0]?c:0);y=b[1]*(h%2)+c;a.lineTo(x,y)}for(var h=1;h<=e[1];h++){x=f-b[0]*(h%2)-c;y=h*g/e[1]-(h==e[1]?b[0]*(e[0]%2)+c:0);a.lineTo(x,y)}for(var h=e[0];h>0;h--){x=h*f/e[0]-(h==e[0]?b[0]*(e[1]%2)+c:0);y=g-b[1]*(h%2)-c;a.lineTo(x,y)}for(var h=e[1];h>0;h--){x=b[0]*(h%2)+c;y=h*g/e[1]-(h==e[1]?c:0);a.lineTo(x,y)}a.closePath()};ol.filter.Fold.prototype.precompose=function(a){var b=a.context;var c=b.canvas;var d=this.get("fold");var e=c.width;var f=c.height;b.save();b.shadowColor="rgba(0,0,0,0.3)";b.shadowBlur=8;b.shadowOffsetX=2;b.shadowOffsetY=3;this.drawLine_(b,this.get("fsize"),this.get("margin"));b.fillStyle="#fff";b.fill();b.strokeStyle="rgba(0,0,0,0.1)";b.stroke();b.restore();b.save();this.drawLine_(b,this.get("fsize"),this.get("margin")+this.get("padding"));b.clip()};ol.filter.Fold.prototype.postcompose=function(a){var b=a.context;var c=b.canvas;b.restore();b.save();this.drawLine_(b,this.get("fsize"),this.get("margin"));b.clip();var d=this.get("fold");var e=c.width/d[0];var f=c.height/d[1];var g=b.createRadialGradient(5*e/8,5*e/8,e/4,e/2,e/2,e);g.addColorStop(0,"transparent");g.addColorStop(1,"rgba(0,0,0,0.2)");b.fillStyle=g;b.scale(1,f/e);for(var h=0;h<d[0];h++)for(var i=0;i<d[1];i++){b.save();b.translate(h*e,i*e);b.fillRect(0,0,e,e);b.restore()}b.restore()};ol.filter.Lego=function(a){if(!a)a={};ol.filter.Base.call(this,a);var b=new Image;b.src=this.img[a.img]||this.img.ol3;b.crossOrigin=a.crossOrigin||null;this.pattern={canvas:document.createElement("canvas")};this.setBrick(a.brickSize,b);this.internal_=document.createElement("canvas")};ol.inherits(ol.filter.Lego,ol.filter.Base);ol.filter.Lego.prototype.img={brick:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAD10AAA9dAah0GUAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAGAElEQVRo3sWZy4tkVx3HP+fcc29Vd1dP17TdTcbJPDKPMGR0kVEZkuBCF0EE9Z8QXLhxMUsRF4oLwYWQTSCgSxUXroQhoiEuskgEUUQh+BhHOpkZO11dr3vvefxc3FPlNHNvPbrD1Dl016XoqvM539/znFbcZo3VjbFmxcMA3Mg2fSoAiQJDov7/B1o9+aEgkycv4PBSPU9eHeDEixNwOAFXPYvFia0+rcnQEeBr218cfLIwCqW1UWillEYphUKpCmCCIQAiCEhAJIggTiSISBAfggTvJZTifQghWO+89cOQexuOXN8Pwz/9ff9X/xF0uEA7AmTsjLp/2xZQCgXHlj0OEBEAeRwGkep3qN6pfibDB3DBixMnvdCXt8J3FZowNYFSjgv71RtPaehjD0alalVOqCtHU3qlAGrVAGbidCtUYLUAiV6dCUx8XV4BhUKjY0AJgUB4LE8sA7CkCRSalFYnE72WiBrLSCKCp6TALZNRDEDCwgAKQ/vyRidN9c32K1sbqlCP/C+P9kXJI597PA7HkGJRCLNUGCY767udF9e+9dz1S5ueoRzIEZa1OxcK9td+/fAHvYH0LY6MkgHFIuYwS0ifXe1+qXvn1vk99QfzCwokToUylPrre1/de/vMnf9+5MsSg2HMELegAsl86duvnP3e8y/f1r83v8Li1RO7k/9c2t/avHnt27xpyhRDguEIuxDA3OXXX93+8a0rz6ZvcKgadqUEL73wx+9sb5//WWKTGCOHsxEWM0H71e2ffmF3lPyEkZppVyVYefCw/9a5f3epSvsWh7MMsUgeaL20/dpLu4fJXZUvFCgi46/8i5RNFCCc4bA5JuZ7f/Kp7g9fuLSdvLnY8lEHxz8ItOPcaN7gPAB1tvPl7udupT9nvGSmLLlHSosWLdbJTgpgLna+eVv9hiO1ZIpFOGBEFmejBnrO/tc/0znXTf+sHMuPwD0MrSnETID6/SXPrH/junp3Xiw3atCjxJCRktKu10DHzrZ+pOvpc5cP/6T8CWtt4BATZ4tkBoCvTz8tbTb8TnHiYi/0pgCmPufMUkB1ss9vtU7Trgt9EgyGhIS0zgjRB6RukaSdfHpLPly2xTg2chQJmgRN2qiAa3DBtu5kYXgqAIFYEzTJDAVCnQIqaA+O0wyFjj8q1oY6AB/qd5nLw9JvcpqOOcFMT5dqlg/UAoy5exS2TgGg6DxhkHofqHVCGYf3ho/S904DcHZ6jpZ6lWMY1iogCDxsn8oDduP3BEI9QvSBWgU8YRDeGezsyEk1SNlD8HF51wjQoEAgHNkffXBw+XfJiZbXXCTBT2fZaAJfn4iEEt+z73bTk92jZTxPwOFxVCeGRif0tt4HCtxB+f0P7l//rTlBAN6gjcNicThcfU2NCnjf0NU43L59vf2XZf1A8wzX8JRTgLw+Ckx17SahIZGOyMri7dHalXf6DJdYfovPAgVlRLAzAXwI0gCQU5La8m6SXeH9pi+pWf5lUooIUFKSN6V0A1AE39RyeAYYEpvYNjf4OwP8XNuf50UycnKKKURjSTMALkjzzgpyEhI0LW7ygHvYRh00G7zARQL5dBYU9JtLWvQB52e0VX0MOl5anmOP+3yIjZldpteZijZXuIbBxZ1PAEbkc05GVspZtnX04hlHEDKucpUePYbklCgyNjjDLp9AERhjKSNAQc6IwSzPMQClt37OIeOQ7vQWxJPSZSf2OZMyK1h8jHsbNSgY0Z/tNRWA2HmuVXLIZsxnliw2mROAyR2Rjwmn8vyC0XynrUwQ3PzGs6QX06rDRgD9GIDEjF9pUFLSXyRsowLFIp2/44icDpZ02umq6S3ZxDwupp3hYs1cVMAu1noLBZaMNbJoAD3tl6prOodnTF5feBoBRmGweO8fyClISMlIowkkApRYyqbeZ5YJQrHc4UNieeGYArL8NeUkFcvgJKc/AU56ajxejod+/DT/W/IkQC4P3GoBwoGsFKAf9v2qAGIxej9MU8rTGdNjWtVsJv315aL3YwDYqG5MTDxAPMvTNkJS3ReY6AmtlTrhKsf/AHgAA6ezGE+FAAAAAElFTkSuQmCC",ol3:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAD10AAA9dAah0GUAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAHtUlEQVRo3sWZTWxcVxXHf/d9zIztcTz+pE6cOHXiyLJJadKgKE2oCBLlQwIWSCxYI0WiGxZZIYRAArFAYoEEi0hIsGBBURd0g4iK2lJAaWlaojZVKkU0H26cxB8Zz/f7uPeweHdebDLPnqlQ5l2N5/mN7tz/+Z//OffcM4rPUKCPl0eBAqqfAEAt5Ia1LwCuAg93CyCnAzgj7TstEKMluW+/x0AsWmKBmFggTu4lIpYome2Qw0kA8I2xL9T2Bp5COY6ncJRSDkopFEolANowBEAEATGIGBEkFjEiYkQbI0ZrMaFobYwxkY51pOumpSNTiau6bm7oZX1NP4Ai+ylYADkmGqUPxwSUQsG2ZbcDsBAA2QoGkeSvSZ4kr/alDcRGSyyxbJqqvG5+pHAwbRegVMz+leTBY7qcbTee8vsmQycRmnL6CkD1G4DXFl0fGegvANfpnws8+947AwqFg2MDSjAYzJY80QuAHl2gcPDJF3PiDLiimtIQC0ETEhD3klE8AJeuASg8CgeHir7vLBVOjwypQK3plyoromRNtzSamJg6QbcgvJ7C0J0YnCweG/jek/Ozw5q6bEiFiIHz+wNWBv68+rPNmlQjYnKE1Ai6cYfXA/W5Q6Uvl84f3zel3vH+SIDYoVAeofOdqa9PvbHn/PoDHYZ4eDSpE3fJgLs79YXToz858uxJ5+/en4jQ6hHr5OPZlZHhpcM/4BUv9PFw8agQdQVg1+UHnx/75fG5Gf83lFWGVUrQsmmu/HBsbN8f3Mi1MVLeGUJ3Lig8P/a7s5MN97c01I5+VUIk91err0/fLqFwgBHKOzmimzyQPzX2q1OTZfeianUVKCLNr93EZxiFIOyhnB0Tu6vf/XTp54uzY+4r3S1veYj5CEPBjqFsA3cDoEaLXy199rj/Is0eM2XILXzy5MkzSO6TAvAOFF84qf5KRfWYYhE2aJCzI5MDbxf7B58pTpf89x8qX1yWGKXKFaUBZIF1tWo/KzJPiYi3VAgYbrFEnpiYiBzBTgx0ts99YvDcvHr7YSBJka/Q4k1u3jz5eQ/EYebkXvL241NUeZN/31gkDwibhHjk8PGzTh+OrWw7X/6g/+TB8nuJrQCc4Z/KU08rb+1f/1gCSqy9NUNoP72txtXRb40dfJ+nkgMEZTw78riZLhDRndNP3vGG9GBKnRzhrppmilfhmcWoRYkxyuxv86euUaT24h4W2WN53WQmheB1ygc7MaCKuc+N5LeW6wfOXeUorwFQZIV5RlnbNqcGjBMyaAFUcfHwcHHxOznBakA6JQq34B4dkXtt+8QjvnCQa/Z/jxpFCmdbpPSJI7NyhMVzK/j2UQuFi4OLkz57FECcIcGCU8yZeirQvdxjjuvpTKGAem2EcjpjkjnUC5cvfIm/bRG3Y4e7AwOmEwPKOJotfhvlPj61dGaBEChtAdD88Yeq9et1LqWOUTj2lYzOItSmcxi2ZDXUw+k0n0bqDoXDJBsMM8rHKeIKFbxgIV9nL3cSFlPpZQBoa6AjgCYXK2YkndbckkxmWWfu2D00ozzYNinOlagwbRct/k92zNJARxFK01yur/mX2wDWGE0jfuHyNfa+Y6hQYNsmJQ45hqwwFaPpOVo6s2zDsCMDgsBq2sBR9xj8ZvX70+LJc9w+scA1Sjz49rjMy7zMywE5IY64PMcNDlkHKCbt9xhMZwhOooGODGhMzVyqTUxIm4Pll9797ixnWFZ3WORdSqz//hI+Pv7LT5dXOcNZltUa49y3qplC0Hb5uBMAbwcGDKYS/eLu6YMfrSZCUhWY+QCfGZ7iZYRbarSdYMfd0bvXazh8ii/yF2vcAVwitB1hZirWnROREFLYjN4uLQ5QTZ/WmeA2VwDUHbBks351HRxK3OaqtTTHEQwxmpjkxJApQh111kBAvBH+9O7y/KveFsfcYyNj82qywqZdxmWBAjEREbHdkrNEqNE6o6qJiVeiC4UPHuqg20PvExxGE6YAWp2jwEvabmIyqpoGuTB4ozEwd6lKvYflRzgBBIQWQrQjAG2MZABoEeJH4UU3N8f1rC/psPyz+AQWQEhIK6s09wACk+EC0NTwcCM3KrDAf6ihd6ui2ccxcrRoEaQg6lnQPYDYSLZlAS1cXBzyLHGfW0SZPDgMscgBDK10BARUs48mVgNxtl2GKh6ObVpOM8Uy94hsZpe0nakoMMdhPGJreRtAg9YuJ6NIwp18G7OJsilVyHGIQ2yySZ0WIYocQ+xhknEUhiYRoQUQ0KJBbSfleAChjvQuh4wypbQLovEpMWHrnPY2K0RoG/eR5SCgQXVn1SQAJNpNWiFlhm0+i8jZIrMNoN0j0jbhJMoPaOwu2sQFJt69oRKyadNqTGQBOFsAiM34CQchIdVuwtYyEOgu4jumQosiEX5a6aq0S9Z2T2zTThfdkS0MRN21lISAiBwD5KwDnLReStp0MZomrc4bTyaAhql131gztAhw8cnhWxeIBRASEWbVPju5wAS9/VYgdnthGwPSe5uynYqlpun9EuCTzHt0O67r5uP8teRRAC25H/cXgNmQvgKomhXdLwB2M7pu0pTyeK70mJYUm251sLfo/T8AGEoKes8eIGZ43E5wk36BBwhO2mbqgwZa9C0CAP4LFLGzNDDzmrAAAAAASUVORK5CYII=",lego:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA/CAQAAAD9VthUAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAADzoAAA86AZc528IAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAHvElEQVRYw8WZWWxcVxnHf+fec2fGu+M4qbPH2EmTLk4FApqQNrgiVYyKeClIwBsvPCAQkZAQPND2gRekCoGQEItYHhBLurCksoTKA6QNJW0CBZLWCc3qEBvHy3hsz93O+XiYMxM7nhmPGxGf++Dre2fO7/v+5/u+s4zigzSxVq3osaZNAwzkuq1nPeUrAE9p99JTAKWn5WYEwErpv9TdGbECRlKMgBEjRlIgsqlAKBBaSKUokAjgkcFz+Ce6BvM9sVbKU55WKKWUh1IeoJQCFhsgIIIgIohYEWwq1ooVK9ZasdbG1hhrjUmMsYlZsJEJzYIpmLwZs/8xZ9JpaGYHOYfPyvrChrdbpAxbjFRltCqhnQ2yxBTKf0WQUgNrwYqIFStGUkkllqIU5E/2aQBbEV8pz/ZM3Or8/95UmeUB+J63RiHoAWi1ZHTvNl6pNfXe99Taeq/W1HvuYOzvKG5c4q1afIWHj4eHBwgWwWCQ1aWvBvC8VXngE5DbmO3UxrOeqEhmTFEcPiIiadwEfVttWxmd623tyu7Mfnrjru5cM0Th+Nyp2Z/MztvJNDLkSImZJ27MhNWIr8j1tn+g9at7+/ubivaSHYkmjPF1f+sj7Uc3Xc29VPjm1JSJEzJkCZkjaVT8hvzubDvQ8cz9AwPeG/rHFD3BZkoeTqLwCuqzrQf7nw9+UJhOidEEFAhX0sCJr1fyXm/uPLr5849n/u1/j3mMWtqtYEFm5v/2pXUHdhzNjgaxzunQQzNX3wDdWIT0dT3bP3Qo8wIXSVWNDpWQys2xmW/3fbn1WpAWXUrWNaARvN+/7lu7jzysf8q4siuEh5A8fX5/+8XepLyEs8zfCd7raP/K9scf1T9iQjUUzU+JynOR3TQBgpAS1a16dVtusONTH8kc42ZjcFFKEApcJyBHjizt+O8Wr3e2P7Uv+3curyT7InhJ8nFCMmTJkqWlVlnzVsj0psc69vbrV1SyKnjJgCsEZMiQoanWINcfe39v6xfv808Suu6f5EVlQA7QAcC/1DXp42GmuazOiaJbjjDFSTUNCLOEZMiQEJAjrZYB9b0PmoPe7fpNZQAkYFb1A9CphtWwGlbNkmX/R59TpzhPAAwdf37XKWac1JZJAnc1VSfp0ufSqtK3NT/Y3DJVKZ5tYbHiwfvJAjc5dO7Pw4cZOb4vc51ccvZjh7ZfubaTC8y4evgeAjQaTYCpgZfq06TXpD++Rd6hHHTdZ8JKDs8yAsAD92/gjxSfGNvYzp7Wt3nj6sS2D5NxtXAeHNwnIFpOqSe+bg+2d6ejFXzXS8WlJUSyhBiKoAqj1yFuYQLQZCvFOMLDx8evPFuOF7HV0sqzXmsuP1mJ5tbfVirYc++VITnItvyN8rhJjqIrL7qS50KCX1mWeLXFr5Z02nqiJ2+lXOasIQHJkD75C6DjtQ8dH6Eg99FHyD+LBRclaomnqgL3lo++w4utWsBVbNYtr1htYZFBZgm2299Z5rmXl4+ZtwaPjDlt9CJ0gIeqXNXFN7WKDtMLnW1y+9e6Txc5z2le25Te0BTVic89ovf3yIXE1QeP4FbJbmCla21V723evjklncued/0mZA6AcEABfH/6rXzb2IM5fJD1zLvIB02zm3ak+iK0hK8mvmBnzA/Hoy3LJoyW4XIITn5daAbaX0w3XBnIIsCBL7zDpFNvPWoRvBY+larBZ5Gb6eX20xXxf/2QDMkgmc+sl8MyJH2cf/Seka3yGFv+kR7Ok/1riwxhvruJUYffhGCxWKS0IqqReFXFN5g583qaNokC0aSf/JUaVn95ufNrJ9SwGlapMkkUXuPMAy/E24CJbQVeVWeIXDAFbEYwWCymes3XAMZW9d5gC8k3Rn++79hJjErvvcBB0P53/sBBAOa5knmdnWwlywlQZ7mHfQivOsd6yVDEkGIwxDVrfo2yY4nJ5tMTLe9rkYKSkUtcEqXk9/DKok9d5nLlfpzxyn0Tu7Gk7jLVNx8eQFw98oUi6Vz07NiZ3c/4y+bz+i1gHxliEhJnQFKn6MbVu01ISRaSX2b8vk/4q4D77GErCTGxM2EBW1P8pLr4YJkjiKORhZ91hR1qpsG9m89O9pASOXxMXF6wrCb0ACIidBJe8ZNdjHID24DsA/RhCImInAnztQqr897UeI1lDp3ToU8TO2jiat39q0cLD7GJlNBdERFhLd8dPjamtldx98K8dhNGD91cZ6zKPl6hyNJPP5rYIcsGFGprVva+Nl4GF455lVzI0UcvU0ySX7R5aKabHnrwMRSJlhiQr7fT1QCprYPnmKHgzjQtliwZNrIZHyHBkHHLSMG4KI+JK6Lna+9wFuETUzecLAUHN6QkBARofHwCFImr6Mbld+Lw0Upwhy/acKWUMswS07YI77tllHJTqsW4t4lLtcLKBwyl0JN05YQSiqS0knW+a7eGu4W3rrgmJMwRNpCkLvRsaBoqKAkzZGgi66S/HV+Sf4GQxvor4xPbYDkVIuLS2RZ6CV4wRMQkNNpXGb9go1V8BSElJXRrWIXCupM9We2hvMPPG1bbaqxf3sWhamTzhjVpHsCc/a9dQ3xo82uJL9jRNRLfTTnnBO+u/pTkLT5c8fPNd9nt5tLmRbsVynbsXR704Bbeq775v0uht3btfyZT7OA5knjdAAAAAElFTkSuQmCC"};ol.filter.Lego.prototype.set=function(a,b){ol.filter.Base.prototype.set.call(this,a,b);if(a=="brickSize"&&this.pattern.canvas.width!=b){this.setBrick(b)}};ol.filter.Lego.prototype.setBrick=function(a,b,c){a=Number(a)||30;if(typeof b==="string"){var d=new Image;d.src=this.img[b]||this.img.ol3;d.crossOrigin=c||null;b=d}if(b)this.pattern.img=b;if(!this.pattern.img.width){var e=this;this.pattern.img.onload=function(){e.setBrick(a,b)};return}this.pattern.canvas.width=this.pattern.canvas.height=a;this.pattern.ctx=this.pattern.canvas.getContext("2d");this.pattern.ctx.fillStyle=this.pattern.ctx.createPattern(this.pattern.img,"repeat");this.set("brickSize",a);this.set("img",b.src)};ol.filter.Lego.prototype.getPattern=function(a,b){if(!this.pattern.ctx)return"transparent";var c=this.pattern.canvas;var d=this.pattern.ctx;var e=c.width/this.pattern.img.width;d.save();d.clearRect(0,0,c.width,c.height);d.scale(e,e);a/=e;b/=e;d.translate(a,b);d.beginPath();d.clearRect(-2*c.width,-2*c.height,4*c.width,4*c.height);d.rect(-a,-b,2*c.width/e,2*c.height/e);d.fill();d.restore();return d.createPattern(c,"repeat")};ol.filter.Lego.prototype.postcompose=function(a){var b=a.context;var c=b.canvas;var d=a.frameState.pixelRatio;b.save();var e=this.pattern.canvas.width*d,f=e/2;var g=a.frameState.extent;var h=a.frameState.viewState.resolution/d;var i=[-Math.round(g[0]/h%e),Math.round(g[1]/h%e)];var j=this.internal_.getContext("2d");var k=this.internal_.width=c.width;var l=this.internal_.height=c.height;j.webkitImageSmoothingEnabled=false;j.mozImageSmoothingEnabled=false;j.imageSmoothingEnabled=false;var m=Math.floor((k-i[0])/e);var n=Math.floor((l-i[1])/e);j.drawImage(c,i[0],i[1],m*e,n*e,0,0,m,n);b.webkitImageSmoothingEnabled=false;b.mozImageSmoothingEnabled=false;b.imageSmoothingEnabled=false;b.clearRect(0,0,k,l);b.drawImage(this.internal_,0,0,m,n,i[0],i[1],m*e,n*e);b.scale(d,d);b.fillStyle=this.getPattern(i[0]/d,i[1]/d);b.rect(0,0,k,l);b.fill();b.restore()};ol.filter.Texture=function(a){ol.filter.Base.call(this,a);this.setFilter(a)};ol.inherits(ol.filter.Texture,ol.filter.Base);ol.filter.Texture.prototype.setFilter=function(a){var b;a=a||{};if(a.img)b=option.img;else{b=new Image;if(a.src)b.src=ol.filter.Texture[a.src]||a.src;b.crossOrigin=a.crossOrigin||null}this.set("rotateWithView",a.rotateWithView!==false);this.set("opacity",typeof a.opacity=="number"?a.opacity:1);this.set("ready",false);var c=this;function d(b){c.pattern={};c.pattern.scale=a.scale||1;c.pattern.canvas=document.createElement("canvas");c.pattern.canvas.width=b.width*c.pattern.scale;c.pattern.canvas.height=b.height*c.pattern.scale;c.pattern.canvas.width=b.width;c.pattern.canvas.height=b.height;c.pattern.ctx=c.pattern.canvas.getContext("2d");c.pattern.ctx.fillStyle=c.pattern.ctx.createPattern(b,"repeat");c.set("ready",true)}if(b.width){d(b)}else{b.onload=function(){d(b)}}};ol.filter.Texture.prototype.getPattern=function(a,b){var c=this.pattern.canvas;var d=this.pattern.ctx;d.save();d.translate(-a,b);d.beginPath();d.rect(a,-b,c.width,c.height);d.fill();d.restore();return d.createPattern(c,"repeat")};ol.filter.Texture.prototype.postcompose=function(a){if(!this.pattern)return;var b=a.context;var c=b.canvas;var d=1.5*Math.max(c.width,c.height);var e=a.frameState.pixelToCoordinateTransform;if(!e){e=a.frameState.pixelToCoordinateMatrix,e[2]=e[4];e[3]=e[5];e[4]=e[12];e[5]=e[13]}var f=a.frameState.pixelRatio;var g=a.frameState.viewState.resolution;var h=c.width/2,i=c.height/2;b.save();b.globalCompositeOperation="multiply";b.globalAlpha=this.get("opacity");b.scale(f*this.pattern.scale,f*this.pattern.scale);if(this.get("rotateWithView")){g*=this.pattern.scale;b.fillStyle=this.getPattern((h*e[0]+i*e[1]+e[4])/g,(h*e[2]+i*e[3]+e[5])/g);b.translate(h/this.pattern.scale,i/this.pattern.scale);b.rotate(a.frameState.viewState.rotation);b.beginPath();b.rect(-h-d,-i-d,2*d,2*d);b.fill()}else{var j=-(h*e[0]+i*e[1]+e[4])/g;var k=(h*e[2]+i*e[3]+e[5])/g;var l=Math.cos(a.frameState.viewState.rotation);var m=Math.sin(a.frameState.viewState.rotation);var n=(j*l-k*m)/this.pattern.scale;var o=(j*m+k*l)/this.pattern.scale;b.translate(n,o);b.beginPath();b.fillStyle=this.pattern.ctx.fillStyle;b.rect(-n-d,-o-d,2*d,2*d);b.fill()}b.restore()};ol.interaction.CenterTouch=function(a){a=a||{};var b=/^pointermove$|^pointerup$/;this.targetStyle=a.targetStyle||[new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:true,stroke:new ol.style.Stroke({color:"#fff",width:3})})}),new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:true,stroke:new ol.style.Stroke({color:"#000",width:1})})})];if(!(this.targetStyle instanceof Array))this.targetStyle=[this.targetStyle];this.composite=a.composite||"";this.ctouch=new ol.interaction.Interaction({handleEvent:function(a){if(b.test(a.type)&&this.getMap()){a.coordinate=this.getMap().getView().getCenter();a.pixel=this.getMap().getSize();a.pixel=[a.pixel[0]/2,a.pixel[1]/2]}return true}});ol.interaction.Interaction.call(this,{handleEvent:function(c){if(b.test(c.type))this.pos_=c.coordinate;if(a.handleEvent)return a.handleEvent.call(this,c);return true}})};ol.inherits(ol.interaction.CenterTouch,ol.interaction.Interaction);ol.interaction.CenterTouch.prototype.setMap=function(a){if(this.getMap()){this.getMap().removeInteraction(this.ctouch);this.getMap().un("postcompose",this.drawTarget_,this)}ol.interaction.Interaction.prototype.setMap.call(this,a);if(this.getMap()){if(this.getActive())this.getMap().addInteraction(this.ctouch);this.getMap().on("postcompose",this.drawTarget_,this)}};ol.interaction.CenterTouch.prototype.setActive=function(a){ol.interaction.Interaction.prototype.setActive.call(this,a);this.pos_=null;if(this.getMap()){if(this.getActive()){this.getMap().addInteraction(this.ctouch)}else this.getMap().removeInteraction(this.ctouch)}};ol.interaction.CenterTouch.prototype.getPosition=function(a){if(!this.pos_){var b=this.getMap().getSize();b=[b[0]/2,b[1]/2];this.pos_=this.getMap().getCoordinateFromPixel(b)}return this.pos_};ol.interaction.CenterTouch.prototype.drawTarget_=function(a){if(!this.getMap()||!this.getActive())return;var b=a.context;var c=a.frameState.pixelRatio;b.save();var d=b.canvas.width/(2*c);var e=b.canvas.height/(2*c);var f=new ol.geom.Point(this.getMap().getCoordinateFromPixel([d,e]));if(this.composite)b.globalCompositeOperation=this.composite;for(var g=0;g<this.targetStyle.length;g++){var h=this.targetStyle[g];if(h instanceof ol.style.Style){var i=0;var j=ol.Map.prototype.getFeaturesAtPixel?false:h.getImage();if(j){i=j.getScale();j.setScale(c*i)}a.vectorContext.setStyle(h);a.vectorContext.drawGeometry(f);if(j)j.setScale(i)}}b.restore()};ol.interaction.Clip=function(a){this.layers_=[];ol.interaction.Pointer.call(this,{handleDownEvent:this.setPosition,handleMoveEvent:this.setPosition});a=a||{};this.pos=false;this.radius=a.radius||100;if(a.layers)this.addLayer(a.layers)};ol.inherits(ol.interaction.Clip,ol.interaction.Pointer);ol.interaction.Clip.prototype.setMap=function(a){if(this.getMap()){for(var b=0;b<this.layers_.length;b++){this.layers_[b].un("precompose",this.precompose_,this);this.layers_[b].un("postcompose",this.postcompose_,this)}this.getMap().renderSync()}ol.interaction.Pointer.prototype.setMap.call(this,a);if(a){for(var b=0;b<this.layers_.length;b++){this.layers_[b].on("precompose",this.precompose_,this);this.layers_[b].on("postcompose",this.postcompose_,this)}a.renderSync()}};ol.interaction.Clip.prototype.setRadius=function(a){this.radius=a;if(this.getMap())this.getMap().renderSync()};ol.interaction.Clip.prototype.addLayer=function(a){if(!(a instanceof Array))a=[a];for(var b=0;b<a.length;b++){if(this.getMap()){a[b].on("precompose",this.precompose_,this);a[b].on("postcompose",this.postcompose_,this);this.getMap().renderSync()}this.layers_.push(a[b])}};ol.interaction.Clip.prototype.removeLayer=function(a){if(!(a instanceof Array))a=[a];for(var b=0;b<a.length;b++){var c;for(c=0;c<this.layers_.length;c++){if(this.layers_[c]===a[b]){break}}if(c!=this.layers_.length&&this.getMap()){this.layers_.splice(c,1);a[b].un("precompose",this.precompose_,this);a[b].un("postcompose",this.postcompose_,this);this.getMap().renderSync()}}};ol.interaction.Clip.prototype.setPosition=function(a){if(a.pixel)this.pos=a.pixel;else{if(a&&a instanceof Array)this.pos=a;else a=[-1e7,-1e7]}if(this.getMap())this.getMap().renderSync()};ol.interaction.Clip.prototype.precompose_=function(a){var b=a.context;var c=a.frameState.pixelRatio;b.save();b.beginPath();b.arc(this.pos[0]*c,this.pos[1]*c,this.radius*c,0,2*Math.PI);b.clip()};ol.interaction.Clip.prototype.postcompose_=function(a){a.context.restore()};ol.interaction.Clip.prototype.setActive=function(a){ol.interaction.Pointer.prototype.setActive.call(this,a);if(a){for(var b=0;b<this.layers_.length;b++){this.layers_[b].on("precompose",this.precompose_,this);this.layers_[b].on("postcompose",this.postcompose_,this)}}else{for(var b=0;b<this.layers_.length;b++){this.layers_[b].un("precompose",this.precompose_,this);this.layers_[b].un("postcompose",this.postcompose_,this)}}if(this.getMap())this.getMap().renderSync()};ol.interaction.DrawRegular=function(a){if(!a)a={};var b=this;this.squaredClickTolerance_=a.clickTolerance?a.clickTolerance*a.clickTolerance:36;this.maxCircleCoordinates_=a.maxCircleCoordinates||100;this.features_=a.features;this.source_=a.source;this.squareFn_=a.squareCondition;this.centeredFn_=a.centerCondition;this.canRotate_=a.canRotate!==false;this.setSides(a.sides);var c=[255,255,255,1];var d=[0,153,255,1];var e=3;var f=[new ol.style.Style({stroke:new ol.style.Stroke({color:c,width:e+2})}),new ol.style.Style({image:new ol.style.Circle({radius:e*2,fill:new ol.style.Fill({color:d}),stroke:new ol.style.Stroke({color:c,width:e/2})}),stroke:new ol.style.Stroke({color:d,width:e}),fill:new ol.style.Fill({color:[255,255,255,.5]})})];this.sketch_=new ol.Collection;this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:this.sketch_,useSpatialIndex:false}),name:"DrawRegular overlay",displayInLayerSwitcher:false,style:a.style||f});ol.interaction.Interaction.call(this,{handleEvent:this.handleEvent_})};ol.inherits(ol.interaction.DrawRegular,ol.interaction.Interaction);ol.interaction.DrawRegular.prototype.setMap=function(a){if(this.getMap())this.getMap().removeLayer(this.overlayLayer_);ol.interaction.Interaction.prototype.setMap.call(this,a);this.overlayLayer_.setMap(a)};ol.interaction.DrawRegular.prototype.setActive=function(a){this.reset();ol.interaction.Interaction.prototype.setActive.call(this,a)};ol.interaction.DrawRegular.prototype.reset=function(){this.overlayLayer_.getSource().clear();this.started_=false};ol.interaction.DrawRegular.prototype.setSides=function(a){a=parseInt(a);this.sides_=a>2?a:0};ol.interaction.DrawRegular.prototype.canRotate=function(a){if(a===true||a===false)this.canRotate_=a;return this.canRotate_};ol.interaction.DrawRegular.prototype.getSides=function(){return this.sides_};ol.interaction.DrawRegular.prototype.startAngle={default:Math.PI/2,3:-Math.PI/2,4:Math.PI/4};ol.interaction.DrawRegular.prototype.getGeom_=function(){this.overlayLayer_.getSource().clear();if(!this.center_)return false;var a;if(this.coord_){var b=this.center_;var c=this.coord_;if(!this.sides_&&this.square_&&!this.centered_){b=[(c[0]+b[0])/2,(c[1]+b[1])/2];var d=[c[0]-b[0],c[1]-b[1]];var e=Math.sqrt(d[0]*d[0]+d[1]*d[1]);var f=new ol.geom.Circle(b,e,"XY");var g=this.getMap().getPixelFromCoordinate(b);var h=Math.max(100,Math.abs(g[0]-this.coordPx_[0]),Math.abs(g[1]-this.coordPx_[1]));h=Math.min(this.maxCircleCoordinates_,Math.round(h/3));return ol.geom.Polygon.fromCircle(f,h,0)}else{var j=this.canRotate_&&this.centered_&&this.square_;var d=[c[0]-b[0],c[1]-b[1]];if(this.square_&&!j){var k=Math.max(Math.abs(d[0]),Math.abs(d[1]));c[0]=b[0]+(d[0]>0?k:-k);c[1]=b[1]+(d[1]>0?k:-k)}var e=Math.sqrt(d[0]*d[0]+d[1]*d[1]);if(e>0){var f=new ol.geom.Circle(b,e,"XY");var l;if(j)l=Math.atan2(d[1],d[0]);else l=this.startAngle[this.sides_]||this.startAngle["default"];if(this.sides_)a=ol.geom.Polygon.fromCircle(f,this.sides_,l);else{var g=this.getMap().getPixelFromCoordinate(this.center_);var h=Math.max(100,Math.abs(g[0]-this.coordPx_[0]),Math.abs(g[1]-this.coordPx_[1]));h=Math.min(this.maxCircleCoordinates_,Math.round(h/(this.centered_?3:5)));a=ol.geom.Polygon.fromCircle(f,h,0)}if(j)return a;var m=a.getExtent();if(!this.centered_)b=this.center_;else b=[2*this.center_[0]-this.coord_[0],2*this.center_[1]-this.coord_[1]];var n=(b[0]-c[0])/(m[0]-m[2]);var o=(b[1]-c[1])/(m[1]-m[3]);if(this.square_){var p=Math.min(Math.abs(n),Math.abs(o));n=Math.sign(n)*p;o=Math.sign(o)*p}var q=[b[0]-m[0]*n,b[1]-m[1]*o];a.applyTransform(function(a,b,c){for(i=0;i<a.length;i+=c){b[i]=a[i]*n+q[0];b[i+1]=a[i+1]*o+q[1]}return b});return a}}}return new ol.geom.Point(this.center_)};ol.interaction.DrawRegular.prototype.drawSketch_=function(a){this.overlayLayer_.getSource().clear();if(a){this.square_=this.squareFn_?this.squareFn_(a):a.originalEvent.shiftKey;this.centered_=this.centeredFn_?this.centeredFn_(a):a.originalEvent.metaKey||a.originalEvent.ctrlKey;var b=this.getGeom_();if(b){var c=this.feature_;c.setGeometry(b);this.overlayLayer_.getSource().addFeature(c);if(this.coord_&&this.square_&&(this.canRotate_&&this.centered_&&this.coord_||!this.sides_&&!this.centered_)){this.overlayLayer_.getSource().addFeature(new ol.Feature(new ol.geom.LineString([this.center_,this.coord_])))}return c}}};ol.interaction.DrawRegular.prototype.drawPoint_=function(a,b){if(!b)this.overlayLayer_.getSource().clear()
;this.overlayLayer_.getSource().addFeature(new ol.Feature(new ol.geom.Point(a)))};ol.interaction.DrawRegular.prototype.handleEvent_=function(a){switch(a.type){case"pointerdown":{this.downPx_=a.pixel;this.start_(a)}break;case"pointerup":if(this.started_&&this.coord_){var b=this.downPx_[0]-a.pixel[0];var c=this.downPx_[1]-a.pixel[1];if(b*b+c*c<=this.squaredClickTolerance_){if(this.lastEvent=="pointermove"){this.end_(a)}else{b=this.upPx_[0]-a.pixel[0];c=this.upPx_[1]-a.pixel[1];if(b*b+c*c<=this.squaredClickTolerance_){this.end_(a)}else{this.handleMoveEvent_(a);this.drawPoint_(a.coordinate,true)}}}}this.upPx_=a.pixel;break;case"pointerdrag":if(this.started_){var d=this.getMap().getPixelFromCoordinate(this.center_);var b=d[0]-a.pixel[0];var c=d[1]-a.pixel[1];if(b*b+c*c<=this.squaredClickTolerance_){this.reset()}}break;case"pointermove":if(this.started_){var b=this.downPx_[0]-a.pixel[0];var c=this.downPx_[1]-a.pixel[1];if(b*b+c*c>this.squaredClickTolerance_){this.handleMoveEvent_(a);this.lastEvent=a.type}}break;default:this.lastEvent=a.type;if(this.started_&&a.type==="dblclick"){return false}break}return true};ol.interaction.DrawRegular.prototype.finishDrawing=function(){if(this.started_&&this.coord_){this.end_({pixel:this.upPx_,coordinate:this.coord_})}};ol.interaction.DrawRegular.prototype.handleMoveEvent_=function(a){if(this.started_){this.coord_=a.coordinate;this.coordPx_=a.pixel;var b=this.drawSketch_(a);this.dispatchEvent({type:"drawing",feature:b,pixel:a.pixel,startCoordinate:this.center_,coordinate:a.coordinate,square:this.square_,centered:this.centered_})}else{this.drawPoint_(a.coordinate)}};ol.interaction.DrawRegular.prototype.start_=function(a){if(!this.started_){this.started_=true;this.center_=a.coordinate;this.coord_=null;var b=this.feature_=new ol.Feature;this.drawSketch_(a);this.dispatchEvent({type:"drawstart",feature:b,pixel:a.pixel,coordinate:a.coordinate})}else{this.coord_=a.coordinate}};ol.interaction.DrawRegular.prototype.end_=function(a){this.coord_=a.coordinate;this.started_=false;if(this.coord_&&this.center_[0]!=this.coord_[0]&&this.center_[1]!=this.coord_[1]){var b=this.feature_;b.setGeometry(this.getGeom_());if(this.source_)this.source_.addFeature(b);else if(this.features_)this.features_.push(b);this.dispatchEvent({type:"drawend",feature:b,pixel:a.pixel,coordinate:a.coordinate,square:this.square_,centered:this.centered_})}else{this.dispatchEvent({type:"drawcancel",feature:null,pixel:a.pixel,coordinate:a.coordinate,square:this.square_,centered:this.centered_})}this.center_=this.coord_=null;this.drawSketch_()};ol.interaction.DrawTouch=function(a){var a=a||{};var b=this;a.handleEvent=function(a){if(this.get("tap")){switch(a.type){case"singleclick":this.addPoint();break;case"dblclick":this.addPoint();this.finishDrawing();return false;break;default:break}}return true};ol.interaction.CenterTouch.call(this,a);this.typeGeom_=a.type;this.source_=a.source;this.set("tap",a.tap!==false);var c=[255,255,255,1];var d=[0,153,255,1];var e=3;var f=[new ol.style.Style({stroke:new ol.style.Stroke({color:c,width:e+2})}),new ol.style.Style({image:new ol.style.Circle({radius:e*2,fill:new ol.style.Fill({color:d}),stroke:new ol.style.Stroke({color:c,width:e/2})}),stroke:new ol.style.Stroke({color:d,width:e}),fill:new ol.style.Fill({color:[255,255,255,.5]})})];this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false}),style:f});this.geom_=[]};ol.inherits(ol.interaction.DrawTouch,ol.interaction.CenterTouch);ol.interaction.DrawTouch.prototype.setMap=function(a){if(this.getMap()){this.getMap().un("postcompose",this.drawSketchLink_,this)}ol.interaction.CenterTouch.prototype.setMap.call(this,a);this.overlay_.setMap(a);if(this.getMap()){this.getMap().on("postcompose",this.drawSketchLink_,this)}};ol.interaction.DrawTouch.prototype.startDrawing=function(){this.geom_=[];this.addPoint()};ol.interaction.DrawTouch.prototype.getGeometryType=function(){return this.typeGeom_};ol.interaction.DrawTouch.prototype.finishDrawing=function(){if(!this.getMap())return;var a;switch(this.typeGeom_){case"LineString":if(this.geom_.length>1)a=new ol.Feature(new ol.geom.LineString(this.geom_));break;case"Polygon":if(this.geom_[this.geom_.length-1]!=this.geom_[0]){this.geom_.push(this.geom_[0])}if(this.geom_.length>3){a=new ol.Feature(new ol.geom.Polygon([this.geom_]))}break;default:break}if(a)this.source_.addFeature(a);this.geom_=[];this.drawSketch_()};ol.interaction.DrawTouch.prototype.addPoint=function(){if(!this.getMap())return;this.geom_.push(this.getPosition());switch(this.typeGeom_){case"Point":var a=new ol.Feature(new ol.geom.Point(this.geom_.pop()));this.source_.addFeature(a);break;case"LineString":case"Polygon":this.drawSketch_();break;default:break}};ol.interaction.DrawTouch.prototype.removeLastPoint=function(){if(!this.getMap())return;this.geom_.pop();this.drawSketch_()};ol.interaction.DrawTouch.prototype.drawSketch_=function(){this.overlay_.getSource().clear();if(this.geom_.length){var a;if(this.typeGeom_=="Polygon"){a=new ol.Feature(new ol.geom.Polygon([this.geom_]));this.overlay_.getSource().addFeature(a)}var b=new ol.geom.LineString(this.geom_);a=new ol.Feature(b);this.overlay_.getSource().addFeature(a);a=new ol.Feature(new ol.geom.Point(this.geom_.slice(-1).pop()));this.overlay_.getSource().addFeature(a)}};ol.interaction.DrawTouch.prototype.drawSketchLink_=function(a){if(!this.getActive()||!this.getPosition())return;var b=a.context;b.save();var c,d=this.getMap().getPixelFromCoordinate(this.getPosition());var e=a.frameState.pixelRatio||1;b.scale(e,e);b.strokeStyle="rgba(0, 153, 255, 1)";b.lineWidth=1;b.beginPath();b.arc(d[0],d[1],5,0,2*Math.PI);b.stroke();if(this.geom_.length){c=this.getMap().getPixelFromCoordinate(this.geom_[this.geom_.length-1]);b.beginPath();b.moveTo(c[0],c[1]);b.lineTo(d[0],d[1]);if(this.typeGeom_=="Polygon"){c=this.getMap().getPixelFromCoordinate(this.geom_[0]);b.lineTo(c[0],c[1])}b.stroke()}b.restore()};ol.interaction.DrawTouch.prototype.setActive=function(a){ol.interaction.CenterTouch.prototype.setActive.call(this,a);if(!a)this.geom_=[];this.drawSketch_()};ol.interaction.DropFile=function(a){a=a||{};ol.interaction.DragAndDrop.call(this,{});var b=a.zone||document;$(b).on("dragenter",this.onstop);$(b).on("dragover",this.onstop);$(b).on("dragleave",this.onstop);this.formatConstructors_=a.formatConstructors||[ol.format.GPX,ol.format.GeoJSON,ol.format.IGC,ol.format.KML,ol.format.TopoJSON];this.projection_=a.projection;this.accept_=a.accept||["gpx","json","geojson","igc","kml","topojson"];var c=this;$(b).on("drop",function(a){return c.ondrop(a.originalEvent)})};ol.inherits(ol.interaction.DropFile,ol.interaction.DragAndDrop);ol.interaction.DropFile.prototype.setMap=function(a){ol.interaction.Interaction.prototype.setMap.call(this,a)};ol.interaction.DropFile.prototype.onstop=function(a){a.preventDefault();a.stopPropagation();return false};ol.interaction.DropFile.prototype.ondrop=function(a){if(a.dataTransfer&&a.dataTransfer.files.length){var b=this;a.preventDefault();a.stopPropagation();var c=a.dataTransfer.files;var d;var e=/\.([0-9a-z]+)(?=[?#])|(\.)(?:[\w]+)$/;for(var f=0;d=c[f];f++){var g=d.name.match(e)[0];b.dispatchEvent({type:"loadstart",file:d,filesize:d.size,filetype:d.type,fileextension:g,projection:i,target:b});features=[];var h=new FileReader;var i=this.projection_||this.getMap().getView().getProjection();var j=this.formatConstructors_;if(!i)return;function k(a,b,c){try{return a.readFeatures(b,c)}catch(a){}}var l=d;h.onload=function(a){var c=a.target.result;var d=[];var e,f;for(e=0,f=j.length;e<f;++e){var g=j[e];var h=new g;d=k(h,c,{featureProjection:i});if(d&&d.length>0){b.dispatchEvent({type:"addfeatures",features:d,file:l,projection:i,target:b});b.dispatchEvent({type:"loadend",features:d,file:l,projection:i,target:b});return}}b.dispatchEvent({type:"loadend",file:l,target:b})};h.readAsText(d)}}else{}return false};ol.interaction.Flashlight=function(a){ol.interaction.Pointer.call(this,{handleDownEvent:this.setPosition,handleMoveEvent:this.setPosition});a=a||{};this.pos=false;this.radius=a.radius||100;this.setColor(a)};ol.inherits(ol.interaction.Flashlight,ol.interaction.Pointer);ol.interaction.Flashlight.prototype.setMap=function(a){if(this.getMap()){this.getMap().un("postcompose",this.postcompose_,this);this.getMap().render()}ol.interaction.Pointer.prototype.setMap.call(this,a);if(a){a.on("postcompose",this.postcompose_,this)}};ol.interaction.Flashlight.prototype.setRadius=function(a){this.radius=a;if(this.getMap())this.getMap().renderSync()};ol.interaction.Flashlight.prototype.setColor=function(a){var b=a.fill?a.fill:[0,0,0,.8];var c=ol.color.asArray(b);this.startColor=ol.color.asString(c);var d;if(a.color){c=this.endColor=ol.color.asString(ol.color.asArray(a.color)||a.color)}else{c[3]=0;this.endColor=ol.color.asString(c)}c[3]=.1;this.midColor=ol.color.asString(c);if(this.getMap())this.getMap().renderSync()};ol.interaction.Flashlight.prototype.setPosition=function(a){if(a.pixel)this.pos=a.pixel;else this.pos=a;if(this.getMap()){this.getMap().renderSync()}};ol.interaction.Flashlight.prototype.postcompose_=function(a){var b=a.context;var c=a.frameState.pixelRatio;var d=b.canvas.width;var e=b.canvas.height;b.save();b.scale(c,c);if(!this.pos){b.fillStyle=this.startColor;b.fillRect(0,0,d,e)}else{var f=Math.max(d,e);var g=b.createRadialGradient(this.pos[0],this.pos[1],d*this.radius/f,this.pos[0],this.pos[1],e*this.radius/f);g.addColorStop(0,this.startColor);g.addColorStop(.8,this.midColor);g.addColorStop(1,this.endColor);b.fillStyle=g;b.fillRect(this.pos[0]-f,this.pos[1]-f,2*f,2*f)}b.restore()};ol.interaction.GeolocationDraw=function(a){if(!a)a={};var b=this;var c=this.geolocation=new ol.Geolocation({projection:"EPSG:4326",trackingOptions:{maximumAge:1e4,enableHighAccuracy:true,timeout:6e5}});this.geolocation.on("change",this.draw_,this);this.path_=[];this.lastPosition_=false;var d=[255,255,255,1];var e=[0,153,255,1];var f=3;var g=new ol.style.Circle({radius:f*2,fill:new ol.style.Fill({color:e}),stroke:new ol.style.Stroke({color:d,width:f/2})});var h=[new ol.style.Style({stroke:new ol.style.Stroke({color:d,width:f+2})}),new ol.style.Style({stroke:new ol.style.Stroke({color:e,width:f}),fill:new ol.style.Fill({color:[255,255,255,.5]})})];var i=new ol.style.RegularShape({radius:f*3.5,points:3,rotation:0,fill:new ol.style.Fill({color:e}),stroke:new ol.style.Stroke({color:d,width:f/2})});var j=i.getImage();var k=j.getContext("2d");var l=document.createElement("canvas");l.width=l.height=j.width;l.getContext("2d").drawImage(j,0,0);k.clearRect(0,0,j.width,j.height);k.drawImage(l,0,0,j.width,j.height,f,0,j.width-2*f,j.height);var m=function(a){if(a.get("heading")===undefined){h[1].setImage(g)}else{h[1].setImage(i);i.setRotation(a.get("heading")||0)}return h};this.locStyle={error:new ol.style.Style({fill:new ol.style.Fill({color:[255,0,0,.2]})}),warn:new ol.style.Style({fill:new ol.style.Fill({color:[255,192,0,.2]})}),ok:new ol.style.Style({fill:new ol.style.Fill({color:[0,255,0,.2]})})};this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector,name:"GeolocationDraw overlay",style:a.style||m});this.sketch_=[new ol.Feature,new ol.Feature,new ol.Feature];this.overlayLayer_.getSource().addFeatures(this.sketch_);this.features_=a.features;this.source_=a.source;this.condition_=a.condition||function(a){return a.getAccuracy()<this.get("minAccuracy")};ol.interaction.Interaction.call(this,{handleEvent:function(){return!this.get("followTrack")||this.get("followTrack")=="auto"}});this.set("type",a.type||"LineString");this.set("attributes",a.attributes||{});this.set("minAccuracy",a.minAccuracy||20);this.set("tolerance",a.tolerance||5);this.set("zoom",a.zoom);this.setFollowTrack(a.followTrack===undefined?true:a.followTrack);this.setActive(false)};ol.inherits(ol.interaction.GeolocationDraw,ol.interaction.Interaction);ol.interaction.GeolocationDraw.prototype.setMap=function(a){if(this.getMap())this.getMap().removeLayer(this.overlayLayer_);ol.interaction.Pointer.prototype.setMap.call(this,a);this.overlayLayer_.setMap(a);if(a)this.geolocation.setProjection(a.getView().getProjection())};ol.interaction.GeolocationDraw.prototype.setActive=function(a){ol.interaction.Interaction.prototype.setActive.call(this,a);this.overlayLayer_.setVisible(a);if(this.getMap()){this.geolocation.setTracking(a);this.getMap().renderSync()}this.pause(!a);if(a){this.reset();this.dispatchEvent({type:"drawstart",feature:this.sketch_[1]})}else{var b=this.sketch_[1].clone();if(b.getGeometry()){if(this.features_)this.features_.push(b);if(this.source_)this.source_.addFeature(b);this.dispatchEvent({type:"drawend",feature:b})}}};ol.interaction.GeolocationDraw.prototype.reset=function(){this.sketch_[1].setGeometry();this.path_=[];this.lastPosition_=false};ol.interaction.GeolocationDraw.prototype.start=function(){this.setActive(true)};ol.interaction.GeolocationDraw.prototype.stop=function(){this.setActive(false)};ol.interaction.GeolocationDraw.prototype.pause=function(a){this.pause_=a!==false};ol.interaction.GeolocationDraw.prototype.setFollowTrack=function(a){this.set("followTrack",a);var b=this.getMap();if(a!==false&&!this.lastPosition_&&b){var c=this.path_[this.path_.length-1];if(c){b.getView().animate({center:c,zoom:a!="position"?this.get("zoom"):undefined})}}this.lastPosition_=false;this.dispatchEvent({type:"follow",following:a!==false})};ol.interaction.GeolocationDraw.prototype.draw_=function(a){var b=this.getMap();if(!b)return;var c=this.geolocation;var d=c.getAccuracy();var e=c.getPosition();e.push(Math.round((c.getAltitude()||0)*100)/100);e.push(Math.round((new Date).getTime()/1e3));var f=c.getAccuracyGeometry();switch(this.get("followTrack")){case true:if(this.get("followTrack")==true){b.getView().setZoom(this.get("zoom")||16);if(!ol.extent.containsExtent(b.getView().calculateExtent(b.getSize()),f.getExtent())){b.getView().fit(f.getExtent())}}case"position":b.getView().setCenter(e);break;case"auto":if(this.lastPosition_){var g=b.getView().getCenter();if(g[0]!=this.lastPosition_[0]||g[1]!=this.lastPosition_[1]){this.setFollowTrack(false)}else{b.getView().setCenter(e);this.lastPosition_=e}}else{b.getView().setCenter(e);if(this.get("zoom"))b.getView().setZoom(this.get("zoom"));this.lastPosition_=e}break;case"visible":if(!ol.extent.containsCoordinate(b.getView().calculateExtent(b.getSize()),e)){b.getView().setCenter(e)}break;default:break}var h=this.sketch_[0];h.setGeometry(f);if(d<this.get("minAccuracy")/2)h.setStyle(this.locStyle.ok);else if(d<this.get("minAccuracy"))h.setStyle(this.locStyle.warn);else h.setStyle(this.locStyle.error);var i;if(!this.pause_&&this.condition_.call(this,c)){h=this.sketch_[1];this.path_.push(e);switch(this.get("type")){case"Point":this.path_=[e];h.setGeometry(new ol.geom.Point(e,"XYZM"));var j=this.get("attributes");if(j.heading)h.set("heading",c.getHeading());if(j.accuracy)h.set("accuracy",c.getAccuracy());if(j.altitudeAccuracy)h.set("altitudeAccuracy",c.getAltitudeAccuracy());if(j.speed)h.set("speed",c.getSpeed());break;case"LineString":if(this.path_.length>1){i=new ol.geom.LineString(this.path_,"XYZM");i.simplify(this.get("tolerance"));h.setGeometry(i)}else h.setGeometry();break;case"Polygon":if(this.path_.length>2){i=new ol.geom.Polygon([this.path_],"XYZM");i.simplify(this.get("tolerance"));h.setGeometry(i)}else h.setGeometry();break}this.dispatchEvent({type:"drawing",feature:this.sketch_[1],geolocation:c})}this.sketch_[2].setGeometry(new ol.geom.Point(e));this.sketch_[2].set("heading",c.getHeading());this.dispatchEvent({type:"tracking",feature:this.sketch_[1],geolocation:c})};ol.interaction.Hover=function(a){if(!a)a={};var b=this;ol.interaction.Interaction.call(this,{handleEvent:function(c){if(c.type=="pointermove"){b.handleMove_(c)}if(a.handleEvent)return a.handleEvent(c);return true}});this.setFeatureFilter(a.featureFilter);this.setLayerFilter(a.layerFilter);this.setCursor(a.cursor)};ol.inherits(ol.interaction.Hover,ol.interaction.Interaction);ol.interaction.Hover.prototype.setMap=function(a){if(this.previousCursor_!==undefined&&this.getMap()){this.getMap().getTargetElement().style.cursor=this.previousCursor_;this.previousCursor_=undefined}ol.interaction.Interaction.prototype.setMap.call(this,a)};ol.interaction.Hover.prototype.setCursor=function(a){if(!a&&this.previousCursor_!==undefined&&this.getMap()){this.getMap().getTargetElement().style.cursor=this.previousCursor_;this.previousCursor_=undefined}this.cursor_=a};ol.interaction.Hover.prototype.setFeatureFilter=function(a){if(typeof a=="function")this.featureFilter_=a;else this.featureFilter_=function(){return true}};ol.interaction.Hover.prototype.setLayerFilter=function(a){if(typeof a=="function")this.layerFilter_=a;else this.layerFilter_=function(){return true}};ol.interaction.Hover.prototype.handleMove_=function(a){var b=this.getMap();if(b){var c,d;var e=this;var f=b.forEachFeatureAtPixel(a.pixel,function(a,b){if(e.layerFilter_.call(null,b)&&e.featureFilter_.call(null,a,b)){c=a;d=b;return true}else{c=d=null;return false}});if(f)this.dispatchEvent({type:"hover",feature:c,layer:d,coordinate:a.coordinate,pixel:a.pixel,map:a.map,dragging:a.dragging});if(this.feature_===c&&this.layer_===d){}else{this.feature_=c;this.layer_=d;if(c)this.dispatchEvent({type:"enter",feature:c,layer:d,coordinate:a.coordinate,pixel:a.pixel,map:a.map,dragging:a.dragging});else this.dispatchEvent({type:"leave",coordinate:a.coordinate,pixel:a.pixel,map:a.map,dragging:a.dragging})}if(this.cursor_){var g=b.getTargetElement().style;if(f){if(g.cursor!=this.cursor_){this.previousCursor_=g.cursor;g.cursor=this.cursor_}}else if(this.previousCursor_!==undefined){g.cursor=this.previousCursor_;this.previousCursor_=undefined}}}};ol.interaction.DrawHole=function(a){if(!a)a={};var b=this;this._select=new ol.interaction.Select;this._select.setActive(false);var c,d=a.geometryFunction;if(d){c=function(a,c){c=b._geometryFn(a,c);return d(a,c)}}else{c=function(a,c){return b._geometryFn(a,c)}}a.type="Polygon";a.geometryFunction=c;ol.interaction.Draw.call(this,a);if(a.layers){if(typeof a.layers==="function")this.layers_=a.layers;else if(a.layers.indexOf){this.layers_=function(b){return a.layers.indexOf(b)>=0}}}this.on("drawstart",this._startDrawing,this);this.on("drawend",this._finishDrawing,this)};ol.inherits(ol.interaction.DrawHole,ol.interaction.Draw);ol.interaction.DrawHole.prototype.setMap=function(a){if(this.getMap())this.getMap().removeInteraction(this._select);if(a)a.addInteraction(this._select);ol.interaction.Draw.prototype.setMap.call(this,a)};ol.interaction.DrawHole.prototype.setActive=function(a){this._select.getFeatures().clear();ol.interaction.Draw.prototype.setActive.call(this,a)};ol.interaction.DrawHole.prototype.removeLastPoint=function(){if(this._feature&&this._feature.getGeometry().getCoordinates()[0].length>2){ol.interaction.Draw.prototype.removeLastPoint.call(this)}};ol.interaction.DrawHole.prototype.getPolygon=function(){return this._select.getFeatures().item(0)};ol.interaction.DrawHole.prototype._startDrawing=function(a){var b=this.getMap();var c=this.layers_;this._feature=a.feature;coord=a.feature.getGeometry().getCoordinates()[0][0];var d=b.getFeaturesAtPixel(b.getPixelFromCoordinate(coord),{layerFilter:c});var e=null;if(d){if(d[0].getGeometry().getType()!=="Polygon")e=null;else if(d[0].getGeometry().intersectsCoordinate(coord))e=d[0];else e=null}else e=null;if(!e){this.setActive(false);this.setActive(true);this._select.getFeatures().clear()}else{this._select.getFeatures().push(e)}};ol.interaction.DrawHole.prototype._finishDrawing=function(a){var b=a.feature.getGeometry().getCoordinates()[0];if(b.length>3)this.getPolygon().getGeometry().appendLinearRing(new ol.geom.LinearRing(b));this._feature=null;this._select.getFeatures().clear()};ol.interaction.DrawHole.prototype._geometryFn=function(a,b){var c=a[0].pop();if(!this.getPolygon()||this.getPolygon().getGeometry().intersectsCoordinate(c)){this.lastOKCoord=[c[0],c[1]]}a[0].push([this.lastOKCoord[0],this.lastOKCoord[1]]);if(b){b.setCoordinates([a[0].concat([a[0][0]])])}else{b=new ol.geom.Polygon(a)}return b};ol.interaction.LongTouch=function(a){if(!a)a={};this.delay_=a.delay||1e3;var b=a.handleLongTouchEvent||function(){};var c=null;ol.interaction.Interaction.call(this,{handleEvent:function(a){if(this.getActive()){switch(a.type){case"pointerdown":if(c)clearTimeout(c);c=setTimeout(function(){a.type="longtouch";b(a)},this.delay_);break;case"pointerdrag":case"pointerup":if(c){clearTimeout(c);c=null}break;default:break}}else{if(c){clearTimeout(c);c=null}}return true}})};ol.inherits(ol.interaction.LongTouch,ol.interaction.Interaction);ol.interaction.Ripple=function(a){ol.interaction.Pointer.call(this,{handleDownEvent:this.rainDrop,handleMoveEvent:this.rainDrop});a=a||{};this.riprad=a.radius||3;this.ripplemap=[];this.last_map=[];this.interval=a.interval;this.rains(this.interval)};ol.inherits(ol.interaction.Ripple,ol.interaction.Pointer);ol.interaction.Ripple.prototype.setMap=function(a){if(this.oncompose){ol.Observable.unByKey(oncompose);if(this.getMap())this.getMap().render()}ol.interaction.Pointer.prototype.setMap.call(this,a);if(a){this.oncompose=a.on("postcompose",this.postcompose_,this)}};ol.interaction.Ripple.prototype.rains=function(a){if(this.onrain)clearTimeout(this.onrain);var b=this;vdelay=(typeof a=="number"?a:1e3)/2;delay=3*vdelay/2;var c=Math.random;function d(){if(b.width)b.rainDrop([c()*b.width,c()*b.height]);b.onrain=setTimeout(d,c()*vdelay+delay)}if(delay)d()};ol.interaction.Ripple.prototype.rainDrop=function(a){if(!this.width)return;var b,c;if(a.pixel){b=a.pixel[0]*this.ratio;c=a.pixel[1]*this.ratio}else{b=a[0]*this.ratio;c=a[1]*this.ratio}b<<=0;c<<=0;for(var d=c-this.riprad*this.ratio;d<c+this.riprad*this.ratio;d++){for(var e=b-this.riprad*this.ratio;e<b+this.riprad*this.ratio;e++){this.ripplemap[this.oldind+d*this.width+e]+=128}}};ol.interaction.Ripple.prototype.postcompose_=function(a){var b=a.context;var c=b.canvas;if(this.width!=c.width||this.height!=c.height){this.width=c.width;this.height=c.height;this.ratio=a.frameState.pixelRatio;this.half_width=this.width>>1;this.half_height=this.height>>1;this.size=this.width*(this.height+2)*2;this.oldind=this.width;this.newind=this.width*(this.height+3);for(var d=0;d<this.size;d++){this.last_map[d]=this.ripplemap[d]=0}}this.texture=b.getImageData(0,0,this.width,this.height);this.ripple=b.getImageData(0,0,this.width,this.height);var e,f,g,h,i;var j=this.oldind;this.oldind=this.newind;this.newind=j;var d=0;var k=this.ripple.data,l=this.texture.data;for(var m=0;m<this.height;m++){for(var n=0;n<this.width;n++){var o=this.newind+d,p=this.oldind+d;g=this.ripplemap[p-this.width]+this.ripplemap[p+this.width]+this.ripplemap[p-1]+this.ripplemap[p+1]>>1;g-=this.ripplemap[o];g-=g>>5;this.ripplemap[o]=g;g=1024-g;if(this.last_map[d]!=g){this.last_map[d]=g;e=((n-this.half_width)*g/1024<<0)+this.half_width;f=((m-this.half_height)*g/1024<<0)+this.half_height;if(e>=this.width)e=this.width-1;if(e<0)e=0;if(f>=this.height)f=this.height-1;if(f<0)f=0;i=(e+f*this.width)*4;h=d*4;k[h]=l[i];k[h+1]=l[i+1];k[h+2]=l[i+2]}++d}}b.putImageData(this.ripple,0,0);this.getMap().render()};ol.interaction.SnapGuides=function(a){if(!a)a={};function b(a,b){var c=a[1][0]-a[0][0];var d=a[1][1]-a[0][1];var e=b[1][0]-b[0][0];var f=b[1][1]-b[0][1];var g=c*f-d*e;if(g!=0){var h=(c*a[0][1]-c*b[0][1]-d*a[0][0]+d*b[0][0])/g;return[b[0][0]+h*e,b[0][1]+h*f]}else return false}function c(a,b){var c=a[0]-b[0];var d=a[1]-b[1];return Math.sqrt(c*c+d*d)}this.snapDistance_=a.pixelTolerance||10;var d=[new ol.style.Style({stroke:new ol.style.Stroke({color:"#ffcc33",lineDash:[8,5],width:1.25})})];if(a.style)d=a.style instanceof Array?a.style:[a.style];this.overlaySource_=new ol.source.Vector({features:new ol.Collection,useSpatialIndex:false});this.overlayLayer_=new ol.layer.Image({source:new ol.source.ImageVector({source:this.overlaySource_,style:function(a){return d}}),name:"Snap overlay",displayInLayerSwitcher:false});ol.interaction.Interaction.call(this,{handleEvent:function(a){if(this.getActive()){var d=this.overlaySource_.getFeatures();var e=null;var f=null;var g=a.frameState.viewState.resolution;for(var h=0,i;i=d[h];h++){var j=i.getGeometry().getClosestPoint(a.coordinate);if(c(j,a.coordinate)/g<this.snapDistance_){if(e){var k=b(e.getGeometry().getCoordinates(),i.getGeometry().getCoordinates());if(k){if(c(k,a.coordinate)/g<this.snapDistance_){f=k}}}else{f=j}e=i}}if(f)a.coordinate=f}return true}})};ol.inherits(ol.interaction.SnapGuides,ol.interaction.Interaction);ol.interaction.SnapGuides.prototype.setMap=function(a){if(this.getMap())this.getMap().removeLayer(this.overlayLayer_);ol.interaction.Interaction.prototype.setMap.call(this,a);this.overlayLayer_.setMap(a);if(a)this.projExtent_=a.getView().getProjection().getExtent()};ol.interaction.SnapGuides.prototype.setActive=function(a){this.overlayLayer_.setVisible(a);ol.interaction.Interaction.prototype.setActive.call(this,a)};ol.interaction.SnapGuides.prototype.clearGuides=function(a){if(!a)this.overlaySource_.clear();else{for(var b=0,c;c=a[b];b++){this.overlaySource_.removeFeature(c)}}};ol.interaction.SnapGuides.prototype.getGuides=function(a){return this.overlaySource_.getFeaturesCollection()};ol.interaction.SnapGuides.prototype.addGuide=function(a,b){if(a){var c=this.getMap();var d=c.getView().calculateExtent(c.getSize());d=ol.extent.buffer(d,Math.max(1e5+1,(d[2]-d[0])*100));d=ol.extent.getIntersection(d,this.projExtent_);var e=a[0][0]-a[1][0];var f=a[0][1]-a[1][1];var g=1/Math.sqrt(e*e+f*f);var h,i=[];var j,k;for(var l=0;l<1e8;l+=1e5){if(b)h=[a[0][0]+f*g*l,a[0][1]-e*g*l];else h=[a[0][0]+e*g*l,a[0][1]+f*g*l];if(ol.extent.containsCoordinate(d,h))i.push(h);else break}var m=new ol.Feature(new ol.geom.LineString(i));var i=[];for(var l=0;l>-1e8;l-=1e5){if(b)h=[a[0][0]+f*g*l,a[0][1]-e*g*l];else h=[a[0][0]+e*g*l,a[0][1]+f*g*l];if(ol.extent.containsCoordinate(d,h))i.push(h);else break}var n=new ol.Feature(new ol.geom.LineString(i));this.overlaySource_.addFeature(m);this.overlaySource_.addFeature(n);return[m,n]}};ol.interaction.SnapGuides.prototype.addOrthoGuide=function(a){return this.addGuide(a,true)};ol.interaction.SnapGuides.prototype.setDrawInteraction=function(a){var b=this;var c=0;var d=[];function e(a){var e=[];var f=2;switch(a.target.getType()){case"LineString":e=a.target.getCoordinates();f=2;break;case"Polygon":e=a.target.getCoordinates()[0];f=3;break;default:break}var g=e.length;if(g!=c&&g>f){b.clearGuides(d);d=b.addOrthoGuide([e[g-f],e[g-f-1]]);d=d.concat(b.addGuide([e[0],e[1]]));d=d.concat(b.addOrthoGuide([e[0],e[1]]));c=g}}a.on("drawstart",function(a){a.feature.getGeometry().on("change",e)});a.on("drawend",function(a){b.clearGuides(d);a.feature.getGeometry().un("change",e);c=0;d=[]})};ol.interaction.Split=function(a){if(!a)a={};ol.interaction.Interaction.call(this,{handleEvent:function(a){switch(a.type){case"singleclick":return this.handleDownEvent(a);case"pointermove":return this.handleMoveEvent(a);default:return true}return true}});this.snapDistance_=a.snapDistance||25;this.tolerance_=a.tolerance||1e-10;this.cursor_=a.cursor;this.sources_=a.sources?a.sources instanceof Array?a.sources:[a.sources]:[];if(a.features){this.sources_.push(new ol.source.Vector({features:features}))}this.filterSplit_=a.filter||function(){return true};var b=[255,255,255,1];var c=[0,153,255,1];var d=3;var e=new ol.style.Fill({color:"rgba(255,255,255,0.4)"});var f=new ol.style.Stroke({color:"#3399CC",width:1.25});var g=[new ol.style.Style({image:new ol.style.Circle({fill:e,stroke:f,radius:5}),fill:e,stroke:f})];var h=[new ol.style.Style({stroke:new ol.style.Stroke({color:b,width:d+2})}),new ol.style.Style({image:new ol.style.Circle({radius:2*d,fill:new ol.style.Fill({color:c}),stroke:new ol.style.Stroke({color:b,width:d/2})}),stroke:new ol.style.Stroke({color:c,width:d})})];if(a.sketchStyle)g=a.sketchStyle instanceof Array?a.sketchStyle:[a.sketchStyle];if(a.featureStyle)h=a.featureStyle instanceof Array?a.featureStyle:[a.featureStyle];this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false}),name:"Split overlay",displayInLayerSwitcher:false,style:function(a){if(a._sketch_)return g;else return h}})};ol.inherits(ol.interaction.Split,ol.interaction.Interaction);ol.interaction.Split.prototype.setMap=function(a){if(this.getMap())this.getMap().removeLayer(this.overlayLayer_);ol.interaction.Interaction.prototype.setMap.call(this,a);this.overlayLayer_.setMap(a)};ol.interaction.Split.prototype.getClosestFeature=function(a){var b,c,d,e=this.snapDistance_+1;for(var f=0;f<this.sources_.length;f++){var g=this.sources_[f];b=g.getClosestFeatureToCoordinate(a.coordinate);if(b.getGeometry().splitAt,this.tolerance_){c=b.getGeometry().getClosestPoint(a.coordinate);d=new ol.geom.LineString([a.coordinate,c]);e=d.getLength()/a.frameState.viewState.resolution;break}}if(e>this.snapDistance_)return false;else{var h=this.getNearestCoord(c,b.getGeometry().getCoordinates());var i=this.getMap().getPixelFromCoordinate(h);if(ol.coordinate.dist2d(a.pixel,i)<this.snapDistance_){c=h}return{source:g,feature:b,coord:c,link:d}}};ol.interaction.Split.prototype.getNearestCoord=function(a,b){var c,d=Number.MAX_VALUE,e;for(var f=0;f<b.length;f++){c=ol.coordinate.dist2d(a,b[f]);if(c<d){d=c;e=b[f]}}return e};ol.interaction.Split.prototype.handleDownEvent=function(a){var b=this.getClosestFeature(a);if(b){var c=this;c.overlayLayer_.getSource().clear();var d=b.feature.getGeometry().splitAt(b.coord,this.tolerance_);if(d.length>1){var e=[];for(var f=0;f<d.length;f++){var g=b.feature.clone();g.setGeometry(d[f]);e.push(g)}c.dispatchEvent({type:"beforesplit",original:b.feature,features:e});b.source.dispatchEvent({type:"beforesplit",original:b.feature,features:e});b.source.removeFeature(b.feature);for(var f=0;f<e.length;f++){b.source.addFeature(e[f])}c.dispatchEvent({type:"aftersplit",original:b.feature,features:e});b.source.dispatchEvent({type:"aftersplit",original:b.feature,features:e})}}return false};ol.interaction.Split.prototype.handleMoveEvent=function(a){var b=a.map;this.overlayLayer_.getSource().clear();var c=this.getClosestFeature(a);if(c&&this.filterSplit_(c.feature)){var d,e,f;this.overlayLayer_.getSource().addFeature(c.feature);e=new ol.Feature(new ol.geom.Point(c.coord));e._sketch_=true;this.overlayLayer_.getSource().addFeature(e);f=new ol.Feature(new ol.geom.LineString([a.coordinate,c.coord]));f._sketch_=true;this.overlayLayer_.getSource().addFeature(f)}var g=b.getTargetElement();if(this.cursor_){if(c){if(g.style.cursor!=this.cursor_){this.previousCursor_=g.style.cursor;g.style.cursor=this.cursor_}}else if(this.previousCursor_!==undefined){g.style.cursor=this.previousCursor_;this.previousCursor_=undefined}}};ol.interaction.Splitter=function(a){if(!a)a={};ol.interaction.Interaction.call(this,{handleEvent:function(a){if(a.type!="pointermove"&&a.type!="pointerdrag"){if(this.lastEvent_){this.splitSource(this.lastEvent_.feature);this.lastEvent_=null}this.moving_=false}else this.moving_=true;return true}});this.added_=[];this.removed_=[];if(a.features){this.source_=new ol.source.Vector({features:a.features})}else{this.source_=a.source?a.source:new ol.source.Vector({features:new ol.Collection})}var b=this.triggerSource;if(a.triggerFeatures){b=new ol.source.Vector({features:a.triggerFeatures})}if(b){b.on("addfeature",this.onAddFeature,this);b.on("changefeature",this.onChangeFeature,this);b.on("removefeature",this.onRemoveFeature,this)}else{this.source_.on("addfeature",this.onAddFeature,this);this.source_.on("changefeature",this.onChangeFeature,this);this.source_.on("removefeature",this.onRemoveFeature,this)}this.tolerance_=a.tolerance||1e-10;this.filterSplit_=a.filter||function(){return true}};ol.inherits(ol.interaction.Splitter,ol.interaction.Interaction);ol.interaction.Splitter.prototype.intersectSegs=function(a,b){var c=this.tolerance_;var d=a[0][0]-a[1][0];var e=b[0][0]-b[1][0];var f=a[0][1]-a[1][1];var g=b[0][1]-b[1][1];var h=d*g-f*e;if(Math.abs(h)<c){
return false}else{var i=((a[0][0]-b[1][0])*g-(a[0][1]-b[1][1])*e)/h;if(Math.abs(i)<c)return a[0];if(Math.abs(1-i)<c)return a[1];if(i<0||i>1)return false;var j=((a[0][1]-b[1][1])*d-(a[0][0]-b[1][0])*f)/h;if(Math.abs(j)<c)return b[1];if(Math.abs(1-j)<c)return b[0];if(j<0||j>1)return false;var k=a[0][0]*a[1][1]-a[0][1]*a[1][0];var l=b[0][0]*b[1][1]-b[0][1]*b[1][0];var m=[(k*e-l*d)/h,(k*g-l*f)/h];return m}};ol.interaction.Splitter.prototype.splitSource=function(a){if(this.splitting)return;var b=this;var c,d,e;this.source_.dispatchEvent({type:"beforesplit",feaure:a,source:this.source_});this.splitting=true;this.added_=[];this.removed_=[];var f=a.getGeometry().getCoordinates();var g,h=[];function i(b){if(b!==a){var c=b.getGeometry().getCoordinates();for(var d=0;d<c.length-1;d++){var e=this.intersectSegs(g,[c[d],c[d+1]]);if(e){h.push(e);k=b.getGeometry().splitAt(e,this.tolerance_);if(k&&k.length>1){l=b;return true}}}}return false}for(c=0;c<f.length-1;c++){g=[f[c],f[c+1]];var j=ol.extent.buffer(ol.extent.boundingExtent(g),this.tolerance_);var k;while(true){var l=false;this.source_.forEachFeatureIntersectingExtent(j,i,this);if(l){var m=l;this.source_.removeFeature(m);for(d=0;d<k.length;d++){e=m.clone();e.setGeometry(k[d]);this.source_.addFeature(e)}}else break}}for(c=0;c<f.length-2;c++){for(var n=c+1;n<f.length-1;n++){var o=this.intersectSegs([f[c],f[c+1]],[f[n],f[n+1]]);if(o&&o!=f[c+1]){h.push(o)}}}var p=false;if(h.length){var q=a.getGeometry().splitAt(h,this.tolerance_);if(q.length>1){for(d=0;d<q.length;d++){e=a.clone();e.setGeometry(q[d]);this.source_.addFeature(e)}p=true}}setTimeout(function(){if(p)b.source_.removeFeature(a);b.source_.dispatchEvent({type:"aftersplit",featureAdded:b.added_,featureRemoved:b.removed_,source:this.source_});b.splitting=false},0)};ol.interaction.Splitter.prototype.onAddFeature=function(a){this.splitSource(a.feature);if(this.splitting){this.added_.push(a.feature)}};ol.interaction.Splitter.prototype.onRemoveFeature=function(a){if(this.splitting){var b=this.added_.indexOf(a.feature);if(b==-1){this.removed_.push(a.feature)}else{this.added_.splice(b,1)}}};ol.interaction.Splitter.prototype.onChangeFeature=function(a){if(this.moving_){this.lastEvent_=a}else this.splitSource(a.feature)};ol.interaction.Synchronize=function(a){if(!a)a={};var b=this;ol.interaction.Interaction.call(this,{handleEvent:function(a){if(a.type=="pointermove"){b.handleMove_(a)}return true}});this.maps=a.maps};ol.inherits(ol.interaction.Synchronize,ol.interaction.Interaction);ol.interaction.Synchronize.prototype.setMap=function(a){if(this.getMap()){this.getMap().getView().un("change:center",this.syncMaps,this);this.getMap().getView().un("change:rotation",this.syncMaps,this);this.getMap().getView().un("change:resolution",this.syncMaps,this);ol.events.unlisten(this.getMap().getViewport(),ol.events.EventType.MOUSEOUT,this.handleMouseOut_,this)}ol.interaction.Interaction.prototype.setMap.call(this,a);if(a){this.getMap().getView().on("change:center",this.syncMaps,this);this.getMap().getView().on("change:rotation",this.syncMaps,this);this.getMap().getView().on("change:resolution",this.syncMaps,this);var b=this;$(this.getMap().getTargetElement()).mouseout(function(){for(var a=0;a<b.maps.length;a++){b.maps[a].hideTarget()}b.getMap().hideTarget()});this.syncMaps()}};ol.interaction.Synchronize.prototype.syncMaps=function(a){var b=this.getMap();if(!a)a={type:"all"};if(b){for(var c=0;c<this.maps.length;c++){switch(a.type){case"change:rotation":if(this.maps[c].getView().getRotation()!=b.getView().getRotation())this.maps[c].getView().setRotation(b.getView().getRotation());break;case"change:center":if(this.maps[c].getView().getCenter()!=b.getView().getCenter())this.maps[c].getView().setCenter(b.getView().getCenter());break;case"change:resolution":if(this.maps[c].getView().getResolution()!=b.getView().getResolution()){this.maps[c].getView().setResolution(b.getView().getResolution())}break;default:this.maps[c].getView().setRotation(b.getView().getRotation());this.maps[c].getView().setCenter(b.getView().getCenter());this.maps[c].getView().setResolution(b.getView().getResolution());break}}}};ol.interaction.Synchronize.prototype.handleMove_=function(a){for(var b=0;b<this.maps.length;b++){this.maps[b].showTarget(a.coordinate)}this.getMap().showTarget()};ol.interaction.Synchronize.prototype.handleMouseOut_=function(a,b){for(var c=0;c<b.maps.length;c++){b.maps[c].targetOverlay_.setPosition(undefined)}};ol.Map.prototype.showTarget=function(a){if(!this.targetOverlay_){var b=$("<div>").addClass("ol-target");this.targetOverlay_=new ol.Overlay({element:b.get(0)});this.targetOverlay_.setPositioning("center-center");this.addOverlay(this.targetOverlay_);b.parent().addClass("ol-target-overlay");this.targetOverlay_.setPosition([0,0])}this.targetOverlay_.setPosition(a)};ol.Map.prototype.hideTarget=function(){this.removeOverlay(this.targetOverlay_);this.targetOverlay_=undefined};ol.interaction.TinkerBell=function(a){a=a||{};ol.interaction.Pointer.call(this,{handleDownEvent:this.onMove,handleMoveEvent:this.onMove});this.set("color",a.color?ol.color.asString(a.color):"#fff");this.sparkle=[0,0];this.sparkles=[];this.lastSparkle=this.time=new Date;var b=this;this.out_=function(){b.isout_=true};this.isout_=true};ol.inherits(ol.interaction.TinkerBell,ol.interaction.Pointer);ol.interaction.TinkerBell.prototype.setMap=function(a){if(this.getMap()){this.getMap().un("postcompose",this.postcompose_,this);a.getViewport().removeEventListener("mouseout",this.out_,false);this.getMap().render()}ol.interaction.Pointer.prototype.setMap.call(this,a);if(a){a.on("postcompose",this.postcompose_,this);a.on("mouseout",this.onMove,this);a.getViewport().addEventListener("mouseout",this.out_,false)}};ol.interaction.TinkerBell.prototype.onMove=function(a){this.sparkle=a.pixel;this.isout_=false;this.getMap().render()};ol.interaction.TinkerBell.prototype.postcompose_=function(a){var b=15;var c=a.context;var d=c.canvas;var e=a.frameState.time-this.time;this.time=a.frameState.time;if(a.frameState.time-this.lastSparkle>30&&!this.isout_){this.lastSparkle=a.frameState.time;this.sparkles.push({p:[this.sparkle[0]+Math.random()*b-b/2,this.sparkle[1]+Math.random()*b],o:1})}c.save();c.scale(a.frameState.pixelRatio,a.frameState.pixelRatio);c.fillStyle=this.get("color");for(var f=this.sparkles.length-1,g;g=this.sparkles[f];f--){if(g.o<.2){this.sparkles.splice(0,f+1);break}c.globalAlpha=g.o;c.beginPath();c.arc(g.p[0],g.p[1],2.2,0,2*Math.PI,false);c.fill();g.o*=.98;g.p[0]+=Math.random()-.5;g.p[1]+=e*(1+Math.random())/30}c.restore();if(this.sparkles.length)this.getMap().render()};ol.interaction.TouchCompass=function(a){var a=a||{};var b=this;var c={};c.handleDownEvent=function(a){var b=this.getCenter_();var c=a.pixel[0]-b[0];var d=a.pixel[1]-b[1];this.start=a;return Math.sqrt(c*c+d*d)<this.size/2};c.handleDragEvent=function(a){if(!this.pos){this.pos=this.start;this.getMap().renderSync()}this.pos=a};c.handleUpEvent=function(a){this.pos=false;return true};ol.interaction.Pointer.call(this,c);this.ondrag_=a.onDrag;this.size=a.size||80;this.alpha=a.alpha||.5;if(!ol.interaction.TouchCompass.prototype.compass){var d=ol.interaction.TouchCompass.prototype.compass=document.createElement("canvas");var e=d.getContext("2d");var f=d.width=d.height=this.size;var g=f/10;var h=f/2;var i=.22*h;e.translate(h,h);e.fillStyle="#999";e.strokeStyle="#ccc";e.lineWidth=g;e.beginPath();e.arc(0,0,f*.42,0,2*Math.PI);e.fill();e.stroke();e.fillStyle="#99f";e.beginPath();e.moveTo(0,0);e.lineTo(h,0);e.lineTo(i,i);e.moveTo(0,0);e.lineTo(-h,0);e.lineTo(-i,-i);e.moveTo(0,0);e.lineTo(0,h);e.lineTo(-i,i);e.moveTo(0,0);e.lineTo(0,-h);e.lineTo(i,-i);e.moveTo(0,0);e.fill();e.fillStyle="#eee";e.beginPath();e.moveTo(0,0);e.lineTo(h,0);e.lineTo(i,-i);e.moveTo(0,0);e.lineTo(-h,0);e.lineTo(-i,i);e.moveTo(0,0);e.lineTo(0,h);e.lineTo(i,i);e.moveTo(0,0);e.lineTo(0,-h);e.lineTo(-i,-i);e.moveTo(0,0);e.fill()}};ol.inherits(ol.interaction.TouchCompass,ol.interaction.Pointer);ol.interaction.TouchCompass.prototype.compass=null;ol.interaction.TouchCompass.prototype.setMap=function(a){if(this.getMap()){this.getMap().un("postcompose",this.drawCompass_,this)}ol.interaction.Pointer.prototype.setMap.call(this,a);if(a){a.on("postcompose",this.drawCompass_,this)}};ol.interaction.TouchCompass.prototype.setActive=function(a){ol.interaction.Pointer.prototype.setActive.call(this,a);if(this.getMap())this.getMap().renderSync()};ol.interaction.TouchCompass.prototype.getCenter_=function(){var a=10;var b=this.size;var c=this.getMap().getSize();return[c[0]/2,c[1]-a-b/2]};ol.interaction.TouchCompass.prototype.drawCompass_=function(a){if(!this.getActive())return;var b=a.context;var c=a.frameState.pixelRatio;b.save();b.scale(c,c);b.globalAlpha=this.alpha;b.strokeStyle="#fff";b.lineWidth=5;var d=this.size;var e=this.getCenter_();b.drawImage(this.compass,0,0,this.compass.width,this.compass.height,e[0]-d/2,e[1]-d/2,d,d);if(this.pos){var f=this.pos.pixel[0]-this.start.pixel[0];var g=this.pos.pixel[1]-this.start.pixel[1];for(var h=1;h<=4;h++){b.beginPath();b.arc(e[0]+f/4*h,e[1]+g/4*h,d/2*(.6+.4*h/4),0,2*Math.PI);b.stroke()}}b.restore();if(this.pos){if(this.ondrag_){var i=this.getMap().getView().getResolution();var j={dpixel:[this.pos.pixel[0]-this.start.pixel[0],this.pos.pixel[1]-this.start.pixel[1]]};j.traction=[j.dpixel[0]*i,-j.dpixel[1]*i];this.ondrag_(j,this.pos)}a.frameState.animate=true}};ol.interaction.Transform=function(a){if(!a)a={};var b=this;this.handles_=new ol.Collection;this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:this.handles_,useSpatialIndex:false}),name:"Transform overlay",displayInLayerSwitcher:false,style:function(a){return b.style[(a.get("handle")||"default")+(a.get("constraint")||"")+(a.get("option")||"")]}});ol.interaction.Pointer.call(this,{handleDownEvent:this.handleDownEvent_,handleDragEvent:this.handleDragEvent_,handleMoveEvent:this.handleMoveEvent_,handleUpEvent:this.handleUpEvent_});this.features_=a.features;this.layers_=a.layers?a.layers instanceof Array?a.layers:[a.layers]:null;this.set("translateFeature",a.translateFeature!==false);this.set("translate",a.translate!==false);this.set("stretch",a.stretch!==false);this.set("scale",a.scale!==false);this.set("rotate",a.rotate!==false);this.set("keepAspectRatio",a.keepAspectRatio||function(a){return a.originalEvent.shiftKey});this.on("propertychange",function(){this.drawSketch_()});this.setDefaultStyle()};ol.inherits(ol.interaction.Transform,ol.interaction.Pointer);ol.interaction.Transform.prototype.Cursors={default:"auto",select:"pointer",translate:"move",rotate:"move",scale:"ne-resize",scale1:"nw-resize",scale2:"ne-resize",scale3:"nw-resize",scalev:"e-resize",scaleh1:"n-resize",scalev2:"e-resize",scaleh3:"n-resize"};ol.interaction.Transform.prototype.setMap=function(a){if(this.getMap())this.getMap().removeLayer(this.overlayLayer_);ol.interaction.Pointer.prototype.setMap.call(this,a);this.overlayLayer_.setMap(a);if(a!==null){this.isTouch=/touch/.test(a.getViewport().className);this.setDefaultStyle()}};ol.interaction.Transform.prototype.setActive=function(a){this.select(null);this.overlayLayer_.setVisible(a);ol.interaction.Pointer.prototype.setActive.call(this,a)};ol.interaction.Transform.prototype.setDefaultStyle=function(){var a=new ol.style.Stroke({color:[255,0,0,1],width:1});var b=new ol.style.Stroke({color:[255,0,0,1],width:1,lineDash:[4,4]});var c=new ol.style.Fill({color:[255,0,0,.01]});var d=new ol.style.Fill({color:[255,255,255,.8]});var e=new ol.style.RegularShape({fill:d,stroke:a,radius:this.isTouch?12:6,points:15});e.getAnchor()[0]=this.isTouch?-10:-5;var f=new ol.style.RegularShape({fill:d,stroke:a,radius:this.isTouch?16:8,points:4,angle:Math.PI/4});var g=new ol.style.RegularShape({fill:d,stroke:a,radius:this.isTouch?12:6,points:4,angle:Math.PI/4});function h(a,b,c){return[new ol.style.Style({image:a,stroke:b,fill:c})]}this.style={default:h(f,b,c),translate:h(f,a,d),rotate:h(e,a,d),rotate0:h(f,a,d),scale:h(f,a,d),scale1:h(f,a,d),scale2:h(f,a,d),scale3:h(f,a,d),scalev:h(g,a,d),scaleh1:h(g,a,d),scalev2:h(g,a,d),scaleh3:h(g,a,d)};this.drawSketch_()};ol.interaction.Transform.prototype.setStyle=function(a,b){if(!b)return;if(b instanceof Array)this.style[a]=b;else this.style[a]=[b];for(var c=0;c<this.style[a].length;c++){var d=this.style[a][c].getImage();if(d){if(a=="rotate")d.getAnchor()[0]=-5;if(this.isTouch)d.setScale(1.8)}var e=this.style[a][c].getText();if(e){if(a=="rotate")e.setOffsetX(this.isTouch?14:7);if(this.isTouch)e.setScale(1.8)}}this.drawSketch_()};ol.interaction.Transform.prototype.getFeatureAtPixel_=function(a){var b=this;return this.getMap().forEachFeatureAtPixel(a,function(a,c){var d=false;if(!c){if(a===b.bbox_)return false;b.handles_.forEach(function(b){if(b===a)d=true});if(d)return{feature:a,handle:a.get("handle"),constraint:a.get("constraint"),option:a.get("option")}}if(b.layers_){for(var e=0;e<b.layers_.length;e++){if(b.layers_[e]===c)return{feature:a}}return null}else if(b.features_){b.features_.forEach(function(b){if(b===a)d=true});if(d)return{feature:a};else return null}else return{feature:a}})||{}};ol.interaction.Transform.prototype.drawSketch_=function(a){this.overlayLayer_.getSource().clear();if(!this.feature_)return;if(a===true){if(!this.ispt_){this.overlayLayer_.getSource().addFeature(new ol.Feature({geometry:new ol.geom.Point(this.center_),handle:"rotate0"}));var b=this.feature_.getGeometry().getExtent();var c=ol.geom.Polygon.fromExtent(b);var d=this.bbox_=new ol.Feature(c);this.overlayLayer_.getSource().addFeature(d)}}else{var b=this.feature_.getGeometry().getExtent();if(this.ispt_){var e=this.getMap().getPixelFromCoordinate([b[0],b[1]]);b=ol.extent.boundingExtent([this.getMap().getCoordinateFromPixel([e[0]-10,e[1]-10]),this.getMap().getCoordinateFromPixel([e[0]+10,e[1]+10])])}var c=ol.geom.Polygon.fromExtent(b);var d=this.bbox_=new ol.Feature(c);var f=[];var g=c.getCoordinates()[0];if(!this.ispt_){f.push(d);if(this.get("stretch")&&this.get("scale"))for(var h=0;h<g.length-1;h++){d=new ol.Feature({geometry:new ol.geom.Point([(g[h][0]+g[h+1][0])/2,(g[h][1]+g[h+1][1])/2]),handle:"scale",constraint:h%2?"h":"v",option:h});f.push(d)}if(this.get("scale"))for(var h=0;h<g.length-1;h++){d=new ol.Feature({geometry:new ol.geom.Point(g[h]),handle:"scale",option:h});f.push(d)}if(this.get("translate")&&!this.get("translateFeature")){d=new ol.Feature({geometry:new ol.geom.Point([(g[0][0]+g[2][0])/2,(g[0][1]+g[2][1])/2]),handle:"translate"});f.push(d)}}if(this.get("rotate")){d=new ol.Feature({geometry:new ol.geom.Point(g[3]),handle:"rotate"});f.push(d)}this.overlayLayer_.getSource().addFeatures(f)}};ol.interaction.Transform.prototype.select=function(a){this.feature_=a;this.ispt_=this.feature_?this.feature_.getGeometry().getType()=="Point":false;this.drawSketch_();this.dispatchEvent({type:"select",feature:this.feature_})};ol.interaction.Transform.prototype.handleDownEvent_=function(a){var b=this.getFeatureAtPixel_(a.pixel);var c=b.feature;if(this.feature_&&this.feature_==c&&(this.ispt_&&this.get("translate")||this.get("translateFeature"))){b.handle="translate"}if(b.handle){this.mode_=b.handle;this.opt_=b.option;this.constraint_=b.constraint;this.coordinate_=a.coordinate;this.pixel_=a.pixel;this.geom_=this.feature_.getGeometry().clone();this.extent_=ol.geom.Polygon.fromExtent(this.geom_.getExtent()).getCoordinates()[0];this.center_=ol.extent.getCenter(this.geom_.getExtent());this.angle_=Math.atan2(this.center_[1]-a.coordinate[1],this.center_[0]-a.coordinate[0]);this.dispatchEvent({type:this.mode_+"start",feature:this.feature_,pixel:a.pixel,coordinate:a.coordinate});return true}else{this.feature_=c;this.ispt_=this.feature_?this.feature_.getGeometry().getType()=="Point":false;this.drawSketch_();this.dispatchEvent({type:"select",feature:this.feature_,pixel:a.pixel,coordinate:a.coordinate});return false}};ol.interaction.Transform.prototype.handleDragEvent_=function(a){switch(this.mode_){case"rotate":{var b=Math.atan2(this.center_[1]-a.coordinate[1],this.center_[0]-a.coordinate[0]);if(!this.ispt){var c=this.geom_.clone();c.rotate(b-this.angle_,this.center_);this.feature_.setGeometry(c)}this.drawSketch_(true);this.dispatchEvent({type:"rotating",feature:this.feature_,angle:b-this.angle_,pixel:a.pixel,coordinate:a.coordinate});break}case"translate":{var d=a.coordinate[0]-this.coordinate_[0];var e=a.coordinate[1]-this.coordinate_[1];this.feature_.getGeometry().translate(d,e);this.handles_.forEach(function(a){a.getGeometry().translate(d,e)});this.coordinate_=a.coordinate;this.dispatchEvent({type:"translating",feature:this.feature_,delta:[d,e],pixel:a.pixel,coordinate:a.coordinate});break}case"scale":{var f=this.center_;if(a.originalEvent.metaKey||a.originalEvent.ctrlKey){f=this.extent_[(Number(this.opt_)+2)%4]}var g=(a.coordinate[0]-f[0])/(this.coordinate_[0]-f[0]);var h=(a.coordinate[1]-f[1])/(this.coordinate_[1]-f[1]);if(this.constraint_){if(this.constraint_=="h")g=1;else h=1}else{if(this.get("keepAspectRatio")(a)){g=h=Math.min(g,h)}}var c=this.geom_.clone();c.applyTransform(function(a,b,c){if(c<2)return b;for(i=0;i<a.length;i+=c){if(g!=1)b[i]=f[0]+(a[i]-f[0])*g;if(h!=1)b[i+1]=f[1]+(a[i+1]-f[1])*h}return b});this.feature_.setGeometry(c);this.drawSketch_();this.dispatchEvent({type:"scaling",feature:this.feature_,scale:[g,h],pixel:a.pixel,coordinate:a.coordinate})}default:break}};ol.interaction.Transform.prototype.handleMoveEvent_=function(a){if(!this.mode_){var b=a.map;var c=this.getFeatureAtPixel_(a.pixel);var d=a.map.getTargetElement();if(c.feature){var e=c.handle?this.Cursors[(c.handle||"default")+(c.constraint||"")+(c.option||"")]:this.Cursors.select;if(this.previousCursor_===undefined){this.previousCursor_=d.style.cursor}d.style.cursor=e}else{if(this.previousCursor_!==undefined)d.style.cursor=this.previousCursor_;this.previousCursor_=undefined}}};ol.interaction.Transform.prototype.handleUpEvent_=function(a){this.dispatchEvent({type:this.mode_+"end",feature:this.feature_,oldgeom:this.geom_});this.drawSketch_();this.mode_=null;return false};ol.source.DBPedia=function(a){var b=a||{};var c=this;b.loader=this._loaderFn;this._url=b.url||"http://fr.dbpedia.org/sparql";this._maxResolution=b.maxResolution||100;this._lang=b.lang||"fr";this._limit=b.limit||1e3;if(!b.attributions)b.attributions=[new ol.Attribution({html:"&copy; <a href='http://dbpedia.org/'>DBpedia</a> CC-by-SA"})];if(!b.strategy)b.strategy=ol.loadingstrategy.bbox;ol.source.Vector.call(this,b)};ol.inherits(ol.source.DBPedia,ol.source.Vector);ol.source.DBPedia.prototype.readFeature=function(a,b,c){for(var d in b)a.set(d,b[d].value);if(c&&c.get("subject")==b.subject.value){c.set("type",c.get("type")+"\n"+b.type.value);return false}else{return true}};ol.source.DBPedia.prototype.querySubject=function(){return"?subject rdfs:label ?label. "+"OPTIONAL {?subject dbpedia-owl:thumbnail ?thumbnail}."+"OPTIONAL {?subject dbpedia-owl:abstract ?abstract} . "+"OPTIONAL {?subject rdf:type ?type}"};ol.source.DBPedia.prototype.queryFilter=function(){return"lang(?label) = '"+this._lang+"' "+"&& lang(?abstract) = '"+this._lang+"'"};ol.source.DBPedia.prototype._loaderFn=function(a,b,c){if(b>this._maxResolution)return;var d=this;var e=ol.proj.transformExtent(a,c,"EPSG:4326");query="PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> "+"SELECT DISTINCT * WHERE { "+"?subject geo:lat ?lat . "+"?subject geo:long ?long . "+this.querySubject()+" . "+"FILTER("+this.queryFilter()+") . "+"FILTER(xsd:float(?lat) <= "+e[3]+" && "+e[1]+" <= xsd:float(?lat) "+"&& xsd:float(?long) <= "+e[2]+" && "+e[0]+" <= xsd:float(?long) "+") . "+"} LIMIT "+this._limit;$.ajax({url:this._url,dataType:"jsonp",data:{query:query,format:"json"},success:function(a){var b=a.results.bindings;var e=[];var f,g,h,i=null;for(var j in b){f=b[j];g=[Number(b[j].long.value),Number(b[j].lat.value)];h=new ol.Feature(new ol.geom.Point(ol.proj.transform(g,"EPSG:4326",c)));if(d.readFeature(h,f,i)){e.push(h);i=h}}d.addFeatures(e)}})};(function(){var a={};ol.style.clearDBPediaStyleCache=function(){a={}};ol.style.dbPediaStyleFunction=function(b){if(!b)b={};var c;switch(typeof b.glyph){case"function":c=b.glyph;break;case"string":c=function(){return b.glyph};break;default:{c=function(a){var b=a.get("type");if(b){if(b.match("/Museum"))return"fa-camera";else if(b.match("/Monument"))return"fa-building";else if(b.match("/Sculpture"))return"fa-android";else if(b.match("/Religious"))return"fa-institution";else if(b.match("/Castle"))return"fa-key";else if(b.match("Water"))return"fa-tint";else if(b.match("Island"))return"fa-leaf";else if(b.match("/Event"))return"fa-heart";else if(b.match("/Artwork"))return"fa-asterisk";else if(b.match("/Stadium"))return"fa-futbol-o";else if(b.match("/Place"))return"fa-street-view"}return"fa-star"};break}}var d=b.radius||8;var e=b.fill||new ol.style.Fill({color:"navy"});var f=b.stroke||new ol.style.Stroke({color:"#fff",width:2});var g=b.prefix?b.prefix+"_":"";return function(b,h){var i=c(b);var j=g+i;var k=a[j];if(!k){a[j]=k=new ol.style.Style({image:new ol.style.FontSymbol({glyph:i,radius:d,fill:e,stroke:f})})}return[k]}}})();ol.source.GeoImage=function(a){var b={attributions:a.attributions,logo:a.logo,projection:a.projection};this.center=a.imageCenter;this.scale=a.imageScale;this.rotate=a.imageRotate?a.imageRotate:0;this.crop=a.imageCrop;this.mask=a.imageMask;this.image=a.image?a.image:new Image;this.image.crossOrigin=a.crossOrigin;var c=this;this.image.onload=function(){c.setCrop(c.crop);c.changed()};if(!a.image)this.image.src=a.url;b.canvasFunction=function(a,b,c,d,e){var f=document.createElement("canvas");f.width=d[0];f.height=d[1];var g=f.getContext("2d");if(!this.imageSize)return f;function h(b){return[(b[0]-a[0])/(a[2]-a[0])*d[0],(b[1]-a[3])/(a[1]-a[3])*d[1]]}if(this.mask){g.beginPath();var i=h(this.mask[0]);g.moveTo(i[0],i[1]);for(var j=1;j<this.mask.length;j++){i=h(this.mask[j]);g.lineTo(i[0],i[1])}g.clip()}var k=h(this.center);var l=(this.image.naturalWidth/2-this.crop[0])*this.scale[0]/b*c;var m=(this.image.naturalHeight/2-this.crop[1])*this.scale[1]/b*c;var n=this.imageSize[0]*this.scale[0]/b*c;var o=this.imageSize[1]*this.scale[1]/b*c;g.translate(k[0],k[1]);if(this.rotate)g.rotate(this.rotate);g.drawImage(this.image,this.crop[0],this.crop[1],this.imageSize[0],this.imageSize[1],-l,-m,n,o);return f};ol.source.ImageCanvas.call(this,b);this.setCrop(this.crop)};ol.inherits(ol.source.GeoImage,ol.source.ImageCanvas);ol.source.GeoImage.prototype.getCenter=function(){return this.center};ol.source.GeoImage.prototype.setCenter=function(a){this.center=a;this.changed()};ol.source.GeoImage.prototype.getScale=function(){return this.scale};ol.source.GeoImage.prototype.setScale=function(a){switch(typeof a){case"number":a=[a,a];break;case"object":if(a.length!=2)return;break;default:return}this.scale=a;this.changed()};ol.source.GeoImage.prototype.getRotation=function(){return this.rotate};ol.source.GeoImage.prototype.setRotation=function(a){this.rotate=a;this.changed()};ol.source.GeoImage.prototype.getImage=function(){return this.image};ol.source.GeoImage.prototype.getCrop=function(){return this.crop};ol.source.GeoImage.prototype.setMask=function(a){this.mask=a;this.changed()};ol.source.GeoImage.prototype.getMask=function(){return this.mask};ol.source.GeoImage.prototype.setCrop=function(a){if(!this.image.naturalWidth){this.crop=a;return}if(a){switch(typeof a){case"number":a=[a,a,this.image.naturalWidth-a,this.image.naturalHeight-a];break;case"object":if(a.length!=4)return;break;default:return}var a=ol.extent.boundingExtent([[a[0],a[1]],[a[2],a[3]]]);this.crop=[Math.max(0,a[0]),Math.max(0,a[1]),Math.min(this.image.naturalWidth,a[2]),Math.min(this.image.naturalHeight,a[3])]}else this.crop=[0,0,this.image.naturalWidth,this.image.naturalHeight];if(this.crop[2]<=this.crop[0])this.crop[2]=this.crop[0]+1;if(this.crop[3]<=this.crop[1])this.crop[3]=this.crop[1]+1;this.imageSize=[this.crop[2]-this.crop[0],this.crop[3]-this.crop[1]];this.changed()};ol.source.Source.prototype.getPreview=function(a,b){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANeSURBVHic7ZpPiE1RHMc/780MBhkik79JSUlIUbOxI+wkI2yRhYSUlJLNpJF/xcpiJBmZGBZsNM1CkmhKITGkGbH0/BuPmXnP4rxbb/TOn3fvOffeec6nfqvb/b7f93fveeec37ng8Xg8Ho/nf6Uu4d+fDswFssCvhHOJhaXAMeApMAQUyyIPPAdOAiuTStAVy4EHjDWsix5gdRLJ2mY34ulWYz6IEeA4kIk9awtkgTOEM/5vdAKT4k0/Ou3YMR/ELcbRm9AKFLBbgCJwNE4TYZkJfMG++SIwDCyLz0o4bI17WdyJz0r1TAZ+oDcxCBwAFgIzEIuhvcBbg3sLwOK4DFXLFvQGniCGSSUagS4DjUPOHESkA3XiOWCORqMR6Nfo9DjI3QqPUSd+ylBnv0Zn0GrWFvmIOvGNhjqrNDp/EAutyFgRKUM2tgO+Gur81FxvAKYZaimxXYBvmuuLDHWWaK4X0RfJCNsF6NdcbzXU2a65PohYFKWOc+jn8PUajbWIXaBKp9NB7lZYh34OzwFbFfd/NtDYYSth27urLGIm0M31AL3APWAAmIooymaDnPIl/Vz4NN1yHrd7gcvxWQnHAuA3bsyPop8hUsE13BSgK04TUViBeFo2zedJ8S6wElexW4D2eNOPTjNi6WvD/DtEr8E6tk6GGoAmxFY2iFHE9NZiQf8gogiB9gTEH23izAZuE77vHyU+ANucO1QwD3hD/MbLowAcdm20EmkwXx4n3NodS9rMB2HabYpEWs0HcRqHp0fNwAvJD+eBTZr7p6BvmQVxUaEzEbiruNfJekH15L8jtrEm7JJolEcOmKXRqQOuKDQuY7HZY8s8iNfzkSLxIuI43FTrkkLnOlBfRW4VsWk+oAX5weknxFAxJQNckGgVgZuIRVoomoGXEmGTMa+iQ6K7M4SW7k24QYgiuDQPYinbhugiF4H3RGtzZYCzyIvQXfpNI1ybLyeLpf5+iTbkRbiP2EcocTHm4+YI8iI8RFHwWjAfsA95Q+YZFU6wasl8wB7kReijtNbIILa0vcg/PRlGfPQwHmlCviDqAzaA+OREtzqr1ejOIDorxlNEjTGUBV4nnUWCvAJxGDlA8q9j3DEArAn2zvXAfOwfl6eVAmJrPpJ0Ih6Px+PxeJLjLwPul3vj5d0eAAAAAElFTkSuQmCC"};ol.source.Tile.prototype.getPreview=function(a,b){if(!a)a=[21020,6355964];if(!b)b=150;var c=this.getTileGrid().getTileCoordForCoordAndResolution(a,b);var d=this.getTileUrlFunction();return d.call(this,c,this.getProjection())};ol.source.TileWMS.prototype.getPreview=function(a,b){if(!a)a=[21020,6355964];if(!b)b=150;var c=this.getGetFeatureInfoUrl(a,b,this.getProjection()||"EPSG:3857",{});c=c.replace(/getfeatureinfo/i,"GetMap");return c};ol.layer.Layer.prototype.getPreview=function(a,b){if(this.get("preview"))return[this.get("preview")];if(!b)b=150;if(b<this.getMinResolution()||b>this.getMaxResolution()){var c=this.getMinResolution(),d=this.getMaxResolution();if(d>1e5)d=156543;if(c<.15)c=.15;b=d;while(d>c){c*=2;d/=2;b=c}}var e=this.getExtent();if(!a)a=[21020,6355964];if(e&&!ol.extent.containsCoordinate(e,a))a=[(e[0]+e[2])/2,(e[1]+e[3])/2];if(this.getSource)return[this.getSource().getPreview(a,b)];return[]};ol.layer.Group.prototype.getPreview=function(a,b){if(this.get("preview"))return[this.get("preview")];var c=[];if(this.getLayers){var d=this.getLayers().getArray();for(var e=0;e<d.length;e++){c=c.concat(d[e].getPreview(a,b))}}return c};(function(){function a(a){var b=this._hexgrid.coord2hex(this._geomFn(a));var c=b.toString();if(this._bin[c]){this._bin[c].get("features").push(a)}else{var e=new ol.Feature(new ol.geom.Polygon([this._hexgrid.getHexagon(b)]));e.set("features",[a]);e.set("center",new ol.geom.Point(ol.extent.getCenter(e.getGeometry().getExtent())));this._bin[c]=e;this._source.addFeature(e)}a.on("change",d,this)}function b(a){var b=this._hexgrid.coord2hex(this._geomFn(a)).toString();if(this._bin[b]){var c=this._bin[b].get("features").indexOf(a);if(c>-1)return{id:b,index:c}}for(b in this._bin){var c=this._bin[b].get("features").indexOf(a);if(c>-1)return{id:b,index:c,moved:true}}return false}function c(a,c){var e=c||b.call(this,a);if(e){var f=this._bin[e.id].get("features");f.splice(e.index,1);if(!f.length){this._source.removeFeature(this._bin[e.id]);delete this._bin[e.id]}}else{console.log("[ERROR:HexBin] remove feature feature doesn't exists anymore.")}a.un("change",d,this)}function d(d){var e=b.call(this,d.target);if(e&&e.moved){c.call(this,d.target,e);a.call(this,d.target)}this._source.changed()}function e(){this._bin={};this._source.clear();var b=this._origin.getFeatures();for(var c=0,d;d=b[c];c++){a.call(this,d)}}function f(b,d){this._hexgrid=new ol.HexGrid(d);this._bin={};this._source=b;this._origin=d.source;this._geomFn=d.geometryFunction||ol.coordinate.getFeatureCenter||function(a){return a.getGeometry().getFirstCoordinate()};e.call(this);this._origin.on("addfeature",function(b){a.call(this,b.feature)},this);this._origin.on("removefeature",function(a){c.call(this,a.feature)},this)}ol.source.HexBin=function(a){a=a||{};ol.source.Vector.call(this,a);f.call(this,this,a)};ol.inherits(ol.source.HexBin,ol.source.Vector);ol.source.HexBin.prototype.getSource=function(){return this._origin};ol.source.ImageHexBin=function(a){a=a||{};var b=new ol.source.Vector;f.call(this,b,a);a.source=b;ol.source.ImageVector.call(this,a)};ol.inherits(ol.source.ImageHexBin,ol.source.ImageVector);ol.source.ImageHexBin.prototype.getOriginSource=function(){return this._origin}})();ol.source.Mapillary=function(a){var b=a||{};var c=this;b.loader=this._loaderFn;this._maxResolution=b.maxResolution||100;this._limit=b.limit||100;if(!b.attributions)b.attributions=[new ol.Attribution({html:"&copy; <a href='https://www.mapillary.com/'>Mapillary</a>"})];if(!b.strategy)b.strategy=ol.loadingstrategy.bbox;ol.source.Vector.call(this,b)};ol.inherits(ol.source.Mapillary,ol.source.Vector);ol.source.Mapillary.prototype.readFeature=function(a,b){return true};ol.source.Mapillary.prototype._loaderFn=function(a,b,c){if(b>this._maxResolution)return;var d=this;var e=ol.proj.transformExtent(a,c,"EPSG:4326");var f=Date.now()-6*30*24*60*60*1e3;var g="https://a.mapillary.com/v2/search/im?client_id="+this.get("clientId")+"&max_lat="+e[3]+"&max_lon="+e[2]+"&min_lat="+e[1]+"&min_lon="+e[0]+"&limit="+(this._limit-1)+"&start_time="+f;$.ajax({url:g,dataType:"jsonp",success:function(a){console.log(a)}})};ol.layer.Vector.prototype.setRender3D=function(a){a.setLayer(this)};ol.render3D=function(a){var a=a||{};this.maxResolution_=a.maxResolution||100;this.defaultHeight_=a.defaultHeight||0;this.height_=this.getHfn(a.height)};ol.render3D.prototype.onPostcompose_=function(a){var b=a.frameState.viewState.resolution;if(b>this.maxResolution_)return;this.res_=b*400;if(this.animate_){var c=a.frameState.time-this.animate_;if(c<this.animateDuration_){this.elapsedRatio_=this.easing_(c/this.animateDuration_);a.frameState.animate=true}else{this.animate_=false;this.height_=this.toHeight_}}var d=a.frameState.pixelRatio;var e=a.context;var f=this.matrix_=a.frameState.coordinateToPixelTransform;if(!f){f=a.frameState.coordinateToPixelMatrix,f[2]=f[4];f[3]=f[5];f[4]=f[12];f[5]=f[13]}this.center_=[e.canvas.width/2/d,e.canvas.height/d];var g=this.layer_.getSource().getFeaturesInExtent(a.frameState.extent);e.save();e.scale(d,d);e.lineWidth=1;e.strokeStyle="red";e.fillStyle="rgba(0,0,255,0.5)";var h=[];for(var i=0;i<g.length;i++){h.push(this.getFeature3D_(g[i],this.getFeatureHeight(g[i])))}this.drawFeature3D_(e,h);e.restore()};ol.render3D.prototype.setLayer=function(a){if(this.layer_)this.layer_.un("postcompose",this.onPostcompose_,this);this.layer_=a;a.on("postcompose",this.onPostcompose_,this)};ol.render3D.prototype.getHfn=function(a){switch(typeof a){case"function":return a;case"string":{var b=this.defaultHeight_;return function(c){return Number(c.get(a))||b}}case"number":return function(b){return a};default:return function(a){return 10}}};ol.render3D.prototype.animate=function(a){a=a||{};this.toHeight_=this.getHfn(a.height);this.animate_=(new Date).getTime();this.animateDuration_=a.duration||1e3;this.easing_=a.easing||ol.easing.easeOut;this.layer_.changed()};ol.render3D.prototype.animating=function(){if(this.animate_&&(new Date).getTime()-this.animate_>this.animateDuration_){this.animate_=false}return!!this.animate_};ol.render3D.prototype.getFeatureHeight=function(a){if(this.animate_){var b=this.height_(a);var c=this.toHeight_(a);return b*(1-this.elapsedRatio_)+this.elapsedRatio_*c}else return this.height_(a)};ol.render3D.prototype.hvector_=function(a,b){p0=[a[0]*this.matrix_[0]+a[1]*this.matrix_[1]+this.matrix_[4],a[0]*this.matrix_[2]+a[1]*this.matrix_[3]+this.matrix_[5]];p1=[p0[0]+b/this.res_*(p0[0]-this.center_[0]),p0[1]+b/this.res_*(p0[1]-this.center_[1])];return{p0:p0,p1:p1}};ol.render3D.prototype.getFeature3D_=function(a,b){var c=a.getGeometry().getCoordinates()
;switch(a.getGeometry().getType()){case"Polygon":c=[c];case"MultiPolygon":var d=[];for(var e=0;e<c.length;e++){var f,g;for(var h=0;h<c[e].length;h++){var i=[];for(var j=0;j<c[e][h].length;j++){i.push(this.hvector_(c[e][h][j],b))}d.push(i)}}return{type:"MultiPolygon",feature:a,geom:d};case"Point":return{type:"Point",feature:a,geom:this.hvector_(c,b)};default:return{}}};ol.render3D.prototype.drawFeature3D_=function(a,b){for(var c=0;c<b.length;c++){switch(b[c].type){case"MultiPolygon":for(var d=0;d<b[c].geom.length;d++){var e=b[c].geom[d];for(var f=0;f<e.length;f++){a.beginPath();a.moveTo(e[f].p0[0],e[f].p0[1]);a.lineTo(e[f].p1[0],e[f].p1[1]);a.stroke()}}break;case"Point":{var g=b[c].geom;a.beginPath();a.moveTo(g.p0[0],g.p0[1]);a.lineTo(g.p1[0],g.p1[1]);a.stroke();break}default:break}}for(var c=0;c<b.length;c++){switch(b[c].type){case"MultiPolygon":{a.beginPath();for(var d=0;d<b[c].geom.length;d++){var e=b[c].geom[d];if(d==0){a.moveTo(e[0].p1[0],e[0].p1[1]);for(var f=1;f<e.length;f++){a.lineTo(e[f].p1[0],e[f].p1[1])}}else{a.moveTo(e[0].p1[0],e[0].p1[1]);for(var f=e.length-2;f>=0;f--){a.lineTo(e[f].p1[0],e[f].p1[1])}}a.closePath()}a.fill("evenodd");a.stroke();break}case"Point":{var e=b[c];var h=e.feature.get("label");var i=e.geom.p1;var j=a.fillStyle;a.fillStyle=a.strokeStyle;a.textAlign="center";a.textBaseline="bottom";a.fillText(h,i[0],i[1]);var k=a.measureText(h);var l=Number(a.font.match(/\d+(\.\d+)?/g).join([]));a.fillStyle="rgba(255,255,255,0.5)";a.fillRect(i[0]-k.width/2-5,i[1]-l-5,k.width+10,l+10);a.strokeRect(i[0]-k.width/2-5,i[1]-l-5,k.width+10,l+10);a.fillStyle=j}default:break}}};ol.source.WikiCommons=function(a){var b=a||{};var c=this;b.loader=this._loaderFn;this._maxResolution=b.maxResolution||100;this._lang=b.lang||"fr";this._limit=b.limit||100;if(!b.attributions)b.attributions=[new ol.Attribution({html:"&copy; <a href='https://commons.wikimedia.org/'>Wikimedia Commons</a>"})];if(!b.strategy)b.strategy=ol.loadingstrategy.bbox;ol.source.Vector.call(this,b)};ol.inherits(ol.source.WikiCommons,ol.source.Vector);ol.source.WikiCommons.prototype.readFeature=function(a,b){a.set("descriptionurl",b.descriptionurl);a.set("url",b.url);a.set("title",b.title.replace(/^file:|.jpg$/gi,""));a.set("thumbnail",b.url.replace(/^(.+wikipedia\/commons)\/([a-zA-Z0-9]\/[a-zA-Z0-9]{2})\/(.+)$/,"$1/thumb/$2/$3/200px-$3"));a.set("user",b.user);if(b.extmetadata&&b.extmetadata.LicenseShortName)a.set("copy",b.extmetadata.LicenseShortName.value);return true};ol.source.WikiCommons.prototype._loaderFn=function(a,b,c){if(b>this._maxResolution)return;var d=this;var e=ol.proj.transformExtent(a,c,"EPSG:4326");var f="https://commons.wikimedia.org/w/api.php?action=query&format=json&origin=*&prop=coordinates|imageinfo"+"&generator=geosearch&iiprop=timestamp|user|url|extmetadata|metadata|size&iiextmetadatafilter=LicenseShortName"+"&ggsbbox="+e[3]+"|"+e[0]+"|"+e[1]+"|"+e[2]+"&ggslimit="+this._limit+"&iilimit="+(this._limit-1)+"&ggsnamespace=6";$.ajax({url:f,dataType:"jsonp",success:function(a){var b=[];var e,f,g,h=null;if(!a.query||!a.query.pages)return;for(var i in a.query.pages){e=a.query.pages[i];if(e.coordinates&&e.coordinates.length){f=[e.coordinates[0].lon,e.coordinates[0].lat]}else{var j=e.imageinfo[0].metadata;if(!j){continue}f=[];var k=0;for(var l=0;l<j.length;l++){if(j[l].name=="GPSLongitude"){f[0]=j[l].value;k++}if(j[l].name=="GPSLatitude"){f[1]=j[l].value;k++}}if(k!=2){continue}}g=new ol.Feature(new ol.geom.Point(ol.proj.transform(f,"EPSG:4326",c)));e.imageinfo[0].title=e.title;if(d.readFeature(g,e.imageinfo[0])){b.push(g)}}d.addFeatures(b)}})};ol.Overlay.Magnify=function(a){var b=this;var c=$("<div>").addClass("ol-magnify");this.element=c.get(0);ol.Overlay.call(this,{positioning:a.positioning||"center-center",element:this.element,stopEvent:false});this.mgmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:a.target||this.element,view:new ol.View({projection:a.projection}),layers:a.layers});this.mgview_=this.mgmap_.getView();this.external_=a.target?true:false;this.set("zoomOffset",a.zoomOffset||1);this.set("active",true);this.on("propertychange",this.setView_,this)};ol.inherits(ol.Overlay.Magnify,ol.Overlay);ol.Overlay.Magnify.prototype.setMap=function(a){if(this.getMap()){$(this.getMap().getViewport()).off("mousemove",this.onMouseMove_);this.getMap().getView().un("propertychange",this.setView_,this)}ol.Overlay.prototype.setMap.call(this,a);var b=this;$(a.getViewport()).on("mousemove",{self:this},this.onMouseMove_);a.getView().on("propertychange",this.setView_,this);this.setView_()};ol.Overlay.Magnify.prototype.getMagMap=function(){return this.mgmap_};ol.Overlay.Magnify.prototype.getActive=function(){return this.get("active")};ol.Overlay.Magnify.prototype.setActive=function(a){return this.set("active",a)};ol.Overlay.Magnify.prototype.onMouseMove_=function(a){var b=a.data.self;if(!b.get("active")){b.setPosition()}else{var c=b.getMap().getEventCoordinate(a);if(!b.external_)b.setPosition(c);b.mgview_.setCenter(c);if($("canvas",b.element).css("display")=="none")b.mgmap_.updateSize()}};ol.Overlay.Magnify.prototype.setView_=function(a){if(!this.get("active")){this.setPosition();return}if(!a){this.setView_({key:"rotation"});this.setView_({key:"resolution"});return}switch(a.key){case"rotation":this.mgview_.setRotation(this.getMap().getView().getRotation());break;case"zoomOffset":case"resolution":{var b=Math.max(0,this.getMap().getView().getZoom()+Number(this.get("zoomOffset")));this.mgview_.setZoom(b);break}default:break}};ol.Overlay.Popup=function(a){var b=this;var c=$("<div>");a.element=c.get(0);this.offsetBox=a.offsetBox;$("<div>").addClass("anchor").appendTo(c);var d=$("<div>").addClass("ol-overlaycontainer-stopevent").appendTo(c);this.content=$("<div>").addClass("content").appendTo(d).get(0);this.closeBox=a.closeBox;this.onclose=a.onclose;this.onshow=a.onshow;$("<button>").addClass("closeBox").addClass(a.closeBox?"hasclosebox":"").attr("type","button").prependTo(d).click(function(){b.hide()});a.stopEvent=true;d.on("mousedown touchstart",function(a){a.stopPropagation()});ol.Overlay.call(this,a);this._elt=c;this.setPositioning(a.positioning);this.setPopupClass(a.popupClass)};ol.inherits(ol.Overlay.Popup,ol.Overlay);ol.Overlay.Popup.prototype.getClassPositioning=function(){var a="";var b=this.getPositioning();if(/bottom/.test(b))a+="ol-popup-bottom ";if(/top/.test(b))a+="ol-popup-top ";if(/left/.test(b))a+="ol-popup-left ";if(/right/.test(b))a+="ol-popup-right ";if(/^center/.test(b))a+="ol-popup-middle ";if(/center$/.test(b))a+="ol-popup-center ";return a};ol.Overlay.Popup.prototype.setClosebox=function(a){this.closeBox=a;if(a)this._elt.addClass("hasclosebox");else this._elt.removeClass("hasclosebox")};ol.Overlay.Popup.prototype.setPopupClass=function(a){this._elt.removeClass().addClass("ol-popup "+(a||"default")+" "+this.getClassPositioning()+(this.closeBox?" hasclosebox":""))};ol.Overlay.Popup.prototype.addPopupClass=function(a){this._elt.addClass(a)};ol.Overlay.Popup.prototype.removePopupClass=function(a){this._elt.removeClass(a)};ol.Overlay.Popup.prototype.setPositioning=function(a){if(a===undefined)return;if(/auto/.test(a)){this.autoPositioning=a.split("-");if(this.autoPositioning.length==1)this.autoPositioning[1]="auto"}else this.autoPositioning=false;a=a.replace(/auto/g,"center");if(a=="center")a="bottom-center";this.setPositioning_(a)};ol.Overlay.Popup.prototype.setPositioning_=function(a){ol.Overlay.prototype.setPositioning.call(this,a);this._elt.removeClass("ol-popup-top ol-popup-bottom ol-popup-left ol-popup-right ol-popup-center ol-popup-middle");this._elt.addClass(this.getClassPositioning())};ol.Overlay.Popup.prototype.getVisible=function(){return this._elt.hasClass("visible")};ol.Overlay.Popup.prototype.show=function(a,b){if(!b&&typeof a=="string"){b=a;a=null}var c=this;var d=this.getMap();if(!d)return;if(b&&b!==this.prevHTML){this.prevHTML=b;$(this.content).html("").append(b);$("*",this.content).on("load",function(){d.renderSync()})}if(a){if(this.autoPositioning){var e=d.getPixelFromCoordinate(a);var f=d.getSize();var g=[];if(this.autoPositioning[0]=="auto"){g[0]=e[1]<f[1]/3?"top":"bottom"}else g[0]=this.autoPositioning[0];g[1]=e[0]<2*f[0]/3?"left":"right";this.setPositioning_(g[0]+"-"+g[1]);if(this.offsetBox){this.setOffset([this.offsetBox[g[1]=="left"?2:0],this.offsetBox[g[0]=="top"?3:1]])}}this.setPosition(a);this._elt.parent().show();if(typeof this.onshow=="function")this.onshow();this._tout=setTimeout(function(){c._elt.addClass("visible")},0)}};ol.Overlay.Popup.prototype.hide=function(){if(this.getPosition()==undefined)return;if(typeof this.onclose=="function")this.onclose();this.setPosition(undefined);if(this._tout)clearTimeout(this._tout);this._elt.removeClass("visible")};ol.style.FontSymbol=function(a){a=a||{};var b=0;if(a.stroke)b=a.stroke.getWidth();ol.style.RegularShape.call(this,{radius:a.radius,fill:a.fill,rotation:a.rotation,rotateWithView:a.rotateWithView});if(typeof a.opacity=="number")this.setOpacity(a.opacity);this.color_=a.color;this.fontSize_=a.fontSize||1;this.stroke_=a.stroke;this.fill_=a.fill;this.radius_=a.radius-b;this.form_=a.form||"none";this.gradient_=a.gradient;this.offset_=[a.offsetX?a.offsetX:0,a.offsetY?a.offsetY:0];this.glyph_=this.getGlyph(a.glyph)||"";this.renderMarker_()};ol.inherits(ol.style.FontSymbol,ol.style.RegularShape);ol.style.Image.prototype.getImagePNG=function(){var a=this.getImage();if(a){try{return a.toDataURL("image/png")}catch(a){return false}}else return false};ol.style.FontSymbol.prototype.defs={fonts:{},glyphs:{}};ol.style.FontSymbol.addDefs=function(a,b){var c=a;if(typeof a=="string")c={font:a,name:a,copyright:""};if(!c.font||typeof c.font!="string"){console.log("bad font def");return}var d=c.font;ol.style.FontSymbol.prototype.defs.fonts[d]=c;for(var e in b){var f=b[e];if(typeof f=="string"&&f.length==1)f={char:f};ol.style.FontSymbol.prototype.defs.glyphs[e]={font:c.font,char:f.char||""+String.fromCharCode(f.code)||"",theme:f.theme||c.name,name:f.name||e,search:f.search||""}}};ol.style.FontSymbol.prototype.clone=function(){var a=new ol.style.FontSymbol({glyph:"",color:this.color_,fontSize:this.fontSize_,stroke:this.stroke_,fill:this.fill_,radius:this.radius_+(this.stroke_?this.stroke_.getWidth():0),form:this.form_,gradient:this.gradient_,offsetX:this.offset_[0],offsetY:this.offset_[1],opacity:this.getOpacity(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});a.setScale(this.getScale());a.glyph_=this.glyph_;a.renderMarker_();return a};ol.style.FontSymbol.prototype.getFill=function(){return this.fill_};ol.style.FontSymbol.prototype.getStroke=function(){return this.stroke_};ol.style.FontSymbol.prototype.getGlyph=function(a){if(a)return ol.style.FontSymbol.prototype.defs.glyphs[a]||{font:"none",char:a.charAt(0),theme:"none",name:"none",search:""};else return this.glyph_};ol.style.FontSymbol.prototype.getGlyphName=function(){for(var a in ol.style.FontSymbol.prototype.defs.glyphs){if(ol.style.FontSymbol.prototype.defs.glyphs[a]===this.glyph_)return a}return""};ol.style.FontSymbol.prototype.getFontInfo=function(a){return ol.style.FontSymbol.prototype.defs.fonts[a.font]};ol.style.FontSymbol.prototype.renderMarker_=function(a){var b;var c=0;if(this.stroke_){b=ol.color.asString(this.stroke_.getColor());c=this.stroke_.getWidth()}var d=this.getImage();var e={strokeStyle:b,strokeWidth:c,size:d.width};var f=d.getContext("2d");f.clearRect(0,0,d.width,d.height);this.drawMarker_(e,f,0,0);var g=this.getAnchor();g[0]=d.width/2-this.offset_[0];g[1]=d.width/2-this.offset_[1]};ol.style.FontSymbol.prototype.drawPath_=function(a,b){var c=2*this.radius_+a.strokeWidth+1;var d=a.strokeWidth/2;var e=a.size/2;var f={fac:1,posX:a.size/2,posY:a.size/2};b.lineJoin="round";b.beginPath();switch(this.form_){case"none":f.fac=1;break;case"circle":case"ban":b.arc(e,e,c/2,0,2*Math.PI,true);break;case"poi":b.arc(e,e-.4*this.radius_,.6*this.radius_,.15*Math.PI,.85*Math.PI,true);b.lineTo(e-.89*.05*c,(.95+.45*.05)*c+d);b.arc(e,.95*c+d,.05*c,.85*Math.PI,.15*Math.PI,true);f={fac:.45,posX:e,posY:e-.35*this.radius_};break;case"bubble":b.arc(e,e-.2*this.radius_,.8*this.radius_,.4*Math.PI,.6*Math.PI,true);b.lineTo(.5*c+d,c+d);f={fac:.7,posX:e,posY:e-.2*this.radius_};break;case"marker":b.arc(e,e-.2*this.radius_,.8*this.radius_,.25*Math.PI,.75*Math.PI,true);b.lineTo(.5*c+d,c+d);f={fac:.7,posX:e,posY:e-.2*this.radius_};break;case"coma":b.moveTo(e+.8*this.radius_,e-.2*this.radius_);b.quadraticCurveTo(.95*c+d,.75*c+d,.5*c+d,c+d);b.arc(e,e-.2*this.radius_,.8*this.radius_,.45*Math.PI,0,false);f={fac:.7,posX:e,posY:e-.2*this.radius_};break;default:{var g;switch(this.form_){case"shield":g=[.05,0,.95,0,.95,.8,.5,1,.05,.8,.05,0];f.posY=.45*c+d;break;case"blazon":g=[.1,0,.9,0,.9,.8,.6,.8,.5,1,.4,.8,.1,.8,.1,0];f.fac=.8;f.posY=.4*c+d;break;case"bookmark":g=[.05,0,.95,0,.95,1,.5,.8,.05,1,.05,0];f.fac=.9;f.posY=.4*c+d;break;case"hexagon":g=[.05,.2,.5,0,.95,.2,.95,.8,.5,1,.05,.8,.05,.2];f.fac=.9;f.posY=.5*c+d;break;case"diamond":g=[.25,0,.75,0,1,.2,1,.4,.5,1,0,.4,0,.2,.25,0];f.fac=.75;f.posY=.35*c+d;break;case"triangle":g=[0,0,1,0,.5,1,0,0];f.fac=.6;f.posY=.3*c+d;break;case"sign":g=[.5,.05,1,.95,0,.95,.5,.05];f.fac=.7;f.posY=.65*c+d;break;case"lozenge":g=[.5,0,1,.5,.5,1,0,.5,.5,0];f.fac=.7;break;case"square":default:g=[0,0,1,0,1,1,0,1,0,0];break}for(var h=0;h<g.length;h+=2)b.lineTo(g[h]*c+d,g[h+1]*c+d)}}b.closePath();return f};ol.style.FontSymbol.prototype.drawMarker_=function(a,b,c,d){var e=this.fill_?this.fill_.getColor():"#000";var f=this.stroke_?this.stroke_.getColor():"#000";if(this.form_=="none"&&this.stroke_&&this.fill_){f=this.fill_.getColor();e=this.stroke_.getColor()}b.setTransform(1,0,0,1,0,0);b.translate(c,d);var g=this.drawPath_(a,b);if(this.fill_){if(this.gradient_&&this.form_!="none"){var h=b.createLinearGradient(0,0,a.size/2,a.size);h.addColorStop(1,ol.color.asString(e));h.addColorStop(0,ol.color.asString(f));b.fillStyle=h}else b.fillStyle=ol.color.asString(e);b.fill()}if(this.stroke_&&a.strokeWidth){b.strokeStyle=a.strokeStyle;b.lineWidth=a.strokeWidth;b.stroke()}if(this.glyph_.char){b.font=2*g.fac*this.radius_*this.fontSize_+"px "+this.glyph_.font;b.strokeStyle=b.fillStyle;b.lineWidth=a.strokeWidth*(this.form_=="none"?2:1);b.fillStyle=ol.color.asString(this.color_||f);b.textAlign="center";b.textBaseline="middle";var i=this.glyph_.char;if(a.strokeWidth&&f!="transparent")b.strokeText(i,g.posX,g.posY);b.fillText(i,g.posX,g.posY)}if(this.form_=="ban"&&this.stroke_&&a.strokeWidth){b.strokeStyle=a.strokeStyle;b.lineWidth=a.strokeWidth;var j=this.radius_+a.strokeWidth;var k=this.radius_*Math.cos(Math.PI/4);b.moveTo(j+k,j-k);b.lineTo(j-k,j+k);b.stroke()}};ol.style.FontSymbol.prototype.getChecksum=function(){var a=this.stroke_!==null?this.stroke_.getChecksum():"-";var b=this.fill_!==null?this.fill_.getChecksum():"-";var c=this.checksums_===null||(a!=this.checksums_[1]||b!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.form_+"-"+this.glyphs_!=this.checksums_[4]);if(c){var d="c"+a+b+(this.radius_!==void 0?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[d,a,b,this.radius_,this.form_+"-"+this.glyphs_]}return this.checksums_[0]};ol.style.Chart=function(a){options=a||{};var b=0;if(a.stroke)b=a.stroke.getWidth();ol.style.RegularShape.call(this,{radius:options.radius+b,fill:new ol.style.Fill({color:[0,0,0]}),rotation:options.rotation,snapToPixel:options.snapToPixel});if(options.scale)this.setScale(options.scale);this.stroke_=options.stroke;this.radius_=options.radius||20;this.donutratio_=options.donutRatio||.5;this.type_=options.type;this.offset_=[options.offsetX?options.offsetX:0,options.offsetY?options.offsetY:0];this.animation_=typeof options.animation=="number"?{animate:true,step:options.animation}:this.animation_={animate:false,step:1};this.data_=options.data;if(options.colors instanceof Array){this.colors_=options.colors}else{this.colors_=ol.style.Chart.colors[options.colors];if(!this.colors_)this.colors_=ol.style.Chart.colors.classic}this.renderChart_()};ol.inherits(ol.style.Chart,ol.style.RegularShape);ol.style.Chart.colors={classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],dark:["#960","#003","#900","#060","#099","#909","#990","#090"],pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]};ol.style.Chart.prototype.clone=function(){var a=new ol.style.Chart({type:this.type_,radius:this.radius_,rotation:this.getRotation(),scale:this.getScale(),data:this.getData(),snapToPixel:this.getSnapToPixel(),stroke:this.stroke_,colors:this.colors_,offsetX:this.offset_[0],offsetY:this.offset_[1],animation:this.animation_});a.setScale(this.getScale());a.setOpacity(this.getOpacity());return a};ol.style.Chart.prototype.getData=function(){return this.data_};ol.style.Chart.prototype.setData=function(a){this.data_=a;this.renderChart_()};ol.style.Chart.prototype.getRadius=function(){return this.radius_};ol.style.Chart.prototype.setRadius=function(a,b){this.radius_=a;this.donuratio_=b||this.donuratio_;this.renderChart_()};ol.style.Chart.prototype.setAnimation=function(a){if(a===false){if(this.animation_.animate==false)return;this.animation_.animate=false}else{if(this.animation_.step==a)return;this.animation_.animate=true;this.animation_.step=a}this.renderChart_()};ol.style.Chart.prototype.renderChart_=function(a){var b;var c=0;if(this.stroke_){b=ol.color.asString(this.stroke_.getColor());c=this.stroke_.getWidth()}var d=this.getImage();var e=d.getContext("2d");e.clearRect(0,0,d.width,d.height);e.lineJoin="round";var f=0;for(var g=0;g<this.data_.length;g++)f+=this.data_[g];e.setTransform(1,0,0,1,0,0);e.translate(0,0);var h=this.animation_.animate?this.animation_.step:1;switch(this.type_){case"donut":case"pie3D":case"pie":{var i,j=Math.PI*(h-1.5);var k=d.width/2;e.strokeStyle=b;e.lineWidth=c;e.save();if(this.type_=="pie3D"){e.translate(0,k*.3);e.scale(1,.7);e.beginPath();e.fillStyle="#369";e.arc(k,k*1.4,this.radius_*h,0,2*Math.PI);e.fill();e.stroke()}if(this.type_=="donut"){e.save();e.beginPath();e.rect(0,0,2*k,2*k);e.arc(k,k,this.radius_*h*this.donutratio_,0,2*Math.PI);e.clip("evenodd")}for(var g=0;g<this.data_.length;g++){e.beginPath();e.moveTo(k,k);e.fillStyle=this.colors_[g%this.colors_.length];i=j+2*Math.PI*this.data_[g]/f*h;e.arc(k,k,this.radius_*h,j,i);e.closePath();e.fill();e.stroke();j=i}if(this.type_=="donut"){e.restore();e.beginPath();e.strokeStyle=b;e.lineWidth=c;e.arc(k,k,this.radius_*h*this.donutratio_,Math.PI*(h-1.5),j);e.stroke()}e.restore();break}case"bar":default:{var l=0;for(var g=0;g<this.data_.length;g++){if(l<this.data_[g])l=this.data_[g]}var m=Math.min(5,2*this.radius_/this.data_.length);var k=d.width/2;var n=d.width-c;var o,p=k-this.data_.length*m/2;e.strokeStyle=b;e.lineWidth=c;for(var g=0;g<this.data_.length;g++){e.beginPath();e.fillStyle=this.colors_[g%this.colors_.length];o=p+m;var q=this.data_[g]/l*2*this.radius_*h;e.rect(p,n-q,m,q);e.closePath();e.fill();e.stroke();p=o}}}var i=this.getAnchor();i[0]=k-this.offset_[0];i[1]=k-this.offset_[1]};ol.style.Chart.prototype.getChecksum=function(){var a=this.stroke_!==null?this.stroke_.getChecksum():"-";var b=this.checksums_===null||(a!=this.checksums_[1]||fillChecksum!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.data_.join("|")!=this.checksums_[4]);if(b){var c="c"+a+fillChecksum+(this.radius_!==void 0?this.radius_.toString():"-")+this.data_.join("|");this.checksums_=[c,a,fillChecksum,this.radius_,this.data_.join("|")]}return this.checksums_[0]};ol.style.FillPattern=function(a){if(!a)a={};var b;var c=this.canvas_=document.createElement("canvas");var d=Number(a.scale)>0?Number(a.scale):1;var e=d*ol.has.DEVICE_PIXEL_RATIO||ol.has.DEVICE_PIXEL_RATIO;var f=c.getContext("2d");if(a.image){a.image.load();var g=a.image.getImage();if(g.width){c.width=Math.round(g.width*e);c.height=Math.round(g.height*e);f.globalAlpha=typeof a.opacity=="number"?a.opacity:1;f.drawImage(g,0,0,g.width,g.height,0,0,c.width,c.height);b=f.createPattern(c,"repeat")}else{var h=this;b=[0,0,0,0];g.onload=function(){c.width=Math.round(g.width*e);c.height=Math.round(g.height*e);f.globalAlpha=typeof a.opacity=="number"?a.opacity:1;f.drawImage(g,0,0,g.width,g.height,0,0,c.width,c.height);b=f.createPattern(c,"repeat");h.setColor(b)}}}else{var i=this.getPattern_(a);c.width=Math.round(i.width*e);c.height=Math.round(i.height*e);f.beginPath();if(a.fill){f.fillStyle=ol.color.asString(a.fill.getColor());f.fillRect(0,0,c.width,c.height)}f.scale(e,e);f.lineCap="round";f.lineWidth=i.stroke||1;f.fillStyle=ol.color.asString(a.color||"#000");f.strokeStyle=ol.color.asString(a.color||"#000");if(i.circles)for(var j=0;j<i.circles.length;j++){var k=i.circles[j];f.beginPath();f.arc(k[0],k[1],k[2],0,2*Math.PI);if(i.fill)f.fill();if(i.stroke)f.stroke()}if(!i.repeat)i.repeat=[[0,0]];if(i.char){f.font=i.font||i.width+"px Arial";f.textAlign="center";f.textBaseline="middle";if(i.angle){f.fillText(i.char,i.width/4,i.height/4);f.fillText(i.char,5*i.width/4,5*i.height/4);f.fillText(i.char,i.width/4,5*i.height/4);f.fillText(i.char,5*i.width/4,i.height/4);f.fillText(i.char,3*i.width/4,3*i.height/4);f.fillText(i.char,-i.width/4,-i.height/4);f.fillText(i.char,3*i.width/4,-i.height/4);f.fillText(i.char,-i.width/4,3*i.height/4)}else f.fillText(i.char,i.width/2,i.height/2)}if(i.lines)for(var j=0;j<i.lines.length;j++)for(var l=0;l<i.repeat.length;l++){var m=i.lines[j];f.beginPath();f.moveTo(m[0]+i.repeat[l][0],m[1]+i.repeat[l][1]);for(var n=2;n<m.length;n+=2){f.lineTo(m[n]+i.repeat[l][0],m[n+1]+i.repeat[l][1])}if(i.fill)f.fill();if(i.stroke)f.stroke();f.save();f.strokeStyle="red";f.strokeWidth=.1;f.restore()}b=f.createPattern(c,"repeat");if(a.offset){var o=a.offset;if(typeof o=="number")o=[o,o];if(o instanceof Array){var p=Math.round(o[0]*e);var q=Math.round(o[1]*e);f.scale(1/e,1/e);f.clearRect(0,0,c.width,c.height);f.translate(p,q);f.fillStyle=b;f.fillRect(-p,-q,c.width,c.height);b=f.createPattern(c,"repeat")}}}ol.style.Fill.call(this,{color:b})};ol.inherits(ol.style.FillPattern,ol.style.Fill);ol.style.FillPattern.prototype.clone=function(){var a=ol.style.Fill.prototype.clone.call(this);a.canvas_=this.canvas_;return a};ol.style.FillPattern.prototype.getImage=function(){return this.canvas_};ol.style.FillPattern.prototype.getPattern_=function(a){var b=ol.style.FillPattern.prototype.patterns[a.pattern]||ol.style.FillPattern.prototype.patterns.dot;var c=Math.round(a.spacing)||10;var d=Math.round(c/2)+.5;switch(a.pattern){case"dot":case"circle":{var e=a.size===0?0:a.size/2||2;if(!a.angle){b.width=b.height=c;b.circles=[[c/2,c/2,e]];if(a.pattern=="circle"){b.circles=b.circles.concat([[c/2+c,c/2,e],[c/2-c,c/2,e],[c/2,c/2+c,e],[c/2,c/2-c,e],[c/2+c,c/2+c,e],[c/2+c,c/2-c,e],[c/2-c,c/2+c,e],[c/2-c,c/2-c,e]])}}else{c=b.width=b.height=Math.round(c*1.4);b.circles=[[c/4,c/4,e],[3*c/4,3*c/4,e]];if(a.pattern=="circle"){b.circles=b.circles.concat([[c/4+c,c/4,e],[c/4,c/4+c,e],[3*c/4-c,3*c/4,e],[3*c/4,3*c/4-c,e],[c/4+c,c/4+c,e],[3*c/4-c,3*c/4-c,e]])}}break}case"tile":case"square":{var e=a.size===0?0:a.size/2||2;if(!a.angle){b.width=b.height=c;b.lines=[[c/2-e,c/2-e,c/2+e,c/2-e,c/2+e,c/2+e,c/2-e,c/2+e,c/2-e,c/2-e]]}else{b.width=b.height=c;b.lines=[[c/2-e,c/2,c/2,c/2-e,c/2+e,c/2,c/2,c/2+e,c/2-e,c/2]]}if(a.pattern=="square")b.repeat=[[0,0],[0,c],[c,0],[0,-c],[-c,0],[-c,-c],[c,c],[-c,c],[c,-c]];break}case"cross":{if(a.angle)a.angle=45}case"hatch":{var f=Math.round(((a.angle||0)-90)%360);if(f>180)f-=360;f*=Math.PI/180;var g=Math.cos(f);var h=Math.sin(f);if(Math.abs(h)<1e-4){b.width=b.height=c;b.lines=[[0,.5,c,.5]];b.repeat=[[0,0],[0,c]]}else if(Math.abs(g)<1e-4){b.width=b.height=c;b.lines=[[.5,0,.5,c]];b.repeat=[[0,0],[c,0]];if(a.pattern=="cross"){b.lines.push([0,.5,c,.5]);b.repeat.push([0,c])}}else{var i=b.width=Math.round(Math.abs(c/h))||1;var j=b.height=Math.round(Math.abs(c/g))||1;if(a.pattern=="cross"){b.lines=[[-i,-j,2*i,2*j],[2*i,-j,-i,2*j]];b.repeat=[[0,0]]}else if(g*h>0){b.lines=[[-i,-j,2*i,2*j]];b.repeat=[[0,0],[i,0],[0,j]]}else{b.lines=[[2*i,-j,-i,2*j]];b.repeat=[[0,0],[-i,0],[0,j]]}}b.stroke=a.size===0?0:a.size||4}default:break}return b};ol.style.FillPattern.addPattern=function(a,b){if(!b)b={};ol.style.FillPattern.prototype.patterns[a||b.char]={width:b.width||b.size||10,height:b.height||b.size||10,font:b.font,char:b.char,circles:b.circles,lines:b.lines,repeat:b.repeat,stroke:b.stroke,angle:b.angle,fill:b.fill}};ol.style.FillPattern.prototype.patterns={hatch:{width:5,height:5,lines:[[0,2.5,5,2.5]],stroke:1},cross:{width:7,height:7,lines:[[0,3,10,3],[3,0,3,10]],stroke:1},dot:{width:8,height:8,circles:[[5,5,2]],stroke:false,fill:true},circle:{width:10,height:10,circles:[[5,5,2]],stroke:1,fill:false},square:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],stroke:1,fill:false},tile:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],fill:true},woven:{width:12,height:12,lines:[[3,3,9,9],[0,12,3,9],[9,3,12,0],[-1,1,1,-1],[13,11,11,13]],stroke:1},crosses:{width:8,height:8,lines:[[2,2,6,6],[2,6,6,2]],stroke:1},caps:{width:8,height:8,lines:[[2,6,4,2,6,6]],stroke:1},nylon:{width:20,height:20,lines:[[1,6,1,1,6,1],[6,11,11,11,11,6],[11,16,11,21,16,21],[16,11,21,11,21,16]],repeat:[[0,0],[-20,0],[0,-20]],stroke:1},hexagon:{width:20,height:12,lines:[[0,10,4,4,10,4,14,10,10,16,4,16,0,10]],stroke:1,repeat:[[0,0],[10,6],[10,-6],[-10,-6]]},cemetry:{width:15,height:19,lines:[[0,3.5,7,3.5],[3.5,0,3.5,10]],stroke:1,repeat:[[0,0],[7,9]]},sand:{width:20,height:20,circles:[[1,2,1],[9,3,1],[2,16,1],[7,8,1],[6,14,1],[4,19,1],[14,2,1],[12,10,1],[14,18,1],[18,8,1],[18,14,1]],fill:1},conglomerate:{width:30,height:20,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],stroke:1},gravel:{width:15,height:10,circles:[[4,2,1],[5,9,1],[1,7,1]],lines:[[7,5,6,6,7,7,8,7,9,7,10,5,9,4,7,5],[11,2,14,4,14,1,12,1,11,2]],stroke:1},brick:{width:18,height:16,lines:[[0,1,18,1],[0,10,18,10],[6,1,6,10],[12,10,12,18],[12,0,12,1]],stroke:1},dolomite:{width:20,height:16,lines:[[0,1,20,1],[0,9,20,9],[1,9,6,1],[11,9,14,16],[14,0,14.4,1]],stroke:1},coal:{width:20,height:16,lines:[[1,5,7,1,7,7],[11,10,12,5,18,9],[5,10,2,15,9,15],[15,16,15,13,20,16],[15,0,15,2,20,0]],fill:1},breccia:{width:20,height:16,lines:[[1,5,7,1,7,7,1,5],[11,10,12,5,18,9,11,10],[5,10,2,15,9,15,5,10],[15,16,15,13,22,18],[15,0,15,2,20,0]],stroke:1},clay:{width:20,height:20,lines:[[0,0,3,11,0,20],[11,0,10,3,13,13,11,20],[0,0,10,3,20,0],[0,12,3,11,13,13,20,12]],stroke:1},flooded:{width:15,height:10,lines:[[0,1,10,1],[0,6,5,6],[10,6,15,6]],stroke:1},chaos:{width:40,height:40,lines:[[40,2,40,0,38,0,40,2],[4,0,3,2,2,5,0,0,0,3,2,7,5,6,7,7,8,10,9,12,9,13,9,14,8,14,6,15,2,15,0,20,0,22,2,20,5,19,8,15,10,14,11,12.25,10,12,10,10,12,9,13,7,12,6,13,4,16,7,17,4,20,0,18,0,15,3,14,2,14,0,12,1,11,0,10,1,11,4,10,7,9,8,8,5,6,4,5,3,5,1,5,0,4,0],[7,1,7,3,8,3,8,2,7,1],[4,3,5,5,4,5,4,3],[34,5,33,7,38,10,38,8,36,5,34,5],[27,0,23,2,21,8,30,0,27,0],[25,8,26,12,26,16,22.71875,15.375,20,13,18,15,17,18,13,22,17,21,19,22,21,20,19,18,22,17,30,25,26,26,24,28,21.75,33.34375,20,36,18,40,20,40,24,37,25,32,27,31,26,38,27,37,30,32,32,35,36,37,38,40,38,39,40,40,37,36,34,32,37,31,36,29,33,27,34,24,39,21,40,21,40,16,37,20,31,22,32,25,27,20,29,15,30,20,32,20,34,18,33,12,31,11,29,14,26,9,25,8],[39,24,37,26,40,28,39,24],[13,15,9,19,14,18,13,15],[18,23,14,27,16,27,17,25,20,26,18,23],[6,24,2,26,1,28,2,30,5,28,12,30,16,32,18,30,15,30,12,28,9,25,7,27,6,24],[29,27,32,28,33,31,30,29,27,28,29,27],[5,35,1,33,3,36,13,38,15,35,10,36,5,35]],fill:1},grass:{width:27,height:22,lines:[[0,10.5,13,10.5],[2.5,10,1.5,7],[4.5,10,4.5,5,3.5,4],[7,10,7.5,6,8.5,3],[10,10,11,6]],repeat:[[0,0],[14,10]],stroke:1},swamp:{width:24,height:23,lines:[[0,10.5,9.5,10.5],[2.5,10,2.5,7],[4.5,10,4.5,4],[6.5,10,6.5,6],[3,12.5,7,12.5]],repeat:[[0,0],[14,10]],stroke:1},wave:{width:10,height:8,lines:[[0,0,5,4,10,0]],stroke:1},vine:{width:13,height:13,lines:[[3,0,3,6],[9,7,9,13]],stroke:1},forest:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],stroke:1},scrub:{width:26,height:20,lines:[[1,4,4,8,6,4]],circles:[[20,13,1.5]],stroke:1},tree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78]],repeat:[[3,1],[18,16]],stroke:1},pine:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49]],repeat:[[3,1],[18,16]],stroke:1},pines:{width:22,height:20,lines:[[1,4,3.5,1,6,4],[1,8,3.5,5,6,8],[3.5,1,3.5,11],[12,14.5,14.5,14,17,14.5],[12,18,17,18],[14.5,12,14.5,18]],repeat:[[2,1]],stroke:1},rock:{width:20,height:20,lines:[[1,0,1,9],[4,0,4,9],[7,0,7,9],[10,1,19,1],[10,4,19,4],[10,7,19,7],[0,11,9,11],[0,14,9,14],[0,17,9,17],[12,10,12,19],[15,10,15,19],[18,10,18,19]],repeat:[[.5,.5]],stroke:1},rocks:{width:20,height:20,lines:[[5,0,3,0,5,4,4,6,0,3,0,5,3,6,5,9,3.75,10,2.5,10,0,9,0,10,4,11,5,14,4,15,0,13,0,13,0,13,0,14,0,14,5,16,5,18,3,19,0,19,-.25,19.9375,5,20,10,19,10,20,11,20,12,19,14,20,15,20,17,19,20,20,20,19,19,16,20,15,20,11,20,10,19,8,20,5,20,0,19,0,20,2,19,4,17,4,16,3,15,0,14,0,15,4,11,5,10,4,11,0,10,0,9,4,6,5,5,0],[18,5,19,6,18,10,16,10,14,9,16,5,18,5],[5,6,9,5,10,6,10,9,6,10,5,6],[14,5,14,8,13,9,12,9,11,7,12,5,14,5],[5,11,8,10,9,11,10,14,6,15,6,15,5,11],[13,10,14,11,15,14,15,14,15,14,11,15,10,11,11,10,13,10],[15,12,16,11,19,11,19,15,16,14,16,14,15,12],[6,16,9,15,10,18,5,19,6,16],[10,16,14,16,14,18,13,19,11,18,10,16],[15,15,18,16,18,18,16,19,15,18,15,15]],stroke:1}};ol.style.Photo=function(a){a=a||{};this.sanchor_=a.kind=="anchored"?8:0;this.shadow_=Number(a.shadow)||0;if(!a.stroke){a.stroke=new ol.style.Stroke({width:0,color:"#000"})}var b=a.stroke.getWidth();if(b<0)b=0;if(a.kind=="folio")b+=6;a.stroke.setWidth(b);ol.style.RegularShape.call(this,{radius:a.radius+b+this.sanchor_/2+this.shadow_/2,points:0});if(!this.hitDetectionCanvas_){var c=this.getImage();for(var d in this){if(this[d]&&this[d].getContext&&this[d]!==c){this.hitDetectionCanvas_=this[d];break}}}this.stroke_=a.stroke;this.fill_=a.fill;this.crop_=a.crop;this.crossOrigin_=a.crossOrigin;this.kind_=a.kind||"default";this.radius_=a.radius;this.src_=a.src;this.offset_=[a.offsetX?a.offsetX:0,a.offsetY?a.offsetY:0];this.onload_=a.onload;if(typeof a.opacity=="number")this.setOpacity(a.opacity);if(typeof a.rotation=="number")this.setRotation(a.rotation);this.renderPhoto_()};ol.inherits(ol.style.Photo,ol.style.RegularShape);ol.style.Photo.prototype.clone=function(){return new ol.style.Photo({stroke:this.stroke_,fill:this.fill_,shadow:this.shadow_,crop:this.crop_,crossOrigin:this.crossOrigin_,kind:this.kind_,radius:this.radius_,src:this.src_,offsetX:this.offset_[0],offsetY:this.offset_[1],opacity:this.getOpacity(),rotation:this.getRotation()})};CanvasRenderingContext2D.prototype.roundRect=function(a,b,c,d,e){if(!e)this.rect(a,b,c,d);else{if(c<2*e)e=c/2;if(d<2*e)e=d/2;this.beginPath();this.moveTo(a+e,b);this.arcTo(a+c,b,a+c,b+d,e);this.arcTo(a+c,b+d,a,b+d,e);this.arcTo(a,b+d,a,b,e);this.arcTo(a,b,a+c,b,e);this.closePath()}return this};ol.style.Photo.prototype.drawBack_=function(a,b,c){var d=a.canvas;a.beginPath();a.fillStyle=b;a.clearRect(0,0,d.width,d.height);switch(this.kind_){case"square":a.rect(0,0,d.width-this.shadow_,d.height-this.shadow_);break;case"circle":a.arc(this.radius_+c,this.radius_+c,this.radius_+c,0,2*Math.PI,false);break;case"folio":offset=6;c-=offset;a.strokeStyle="rgba(0,0,0,0.5)";var e=d.width-this.shadow_-2*offset;var f=Math.atan(6/e);a.save();a.rotate(-f);a.translate(-6,2);a.beginPath();a.rect(offset,offset,e,e);a.stroke();a.fill();a.restore();a.save();a.translate(6,-1);a.rotate(f);a.beginPath();a.rect(offset,offset,e,e);a.stroke();a.fill();a.restore();a.beginPath();a.rect(offset,offset,e,e);a.stroke();break;case"anchored":
a.roundRect(this.sanchor_/2,0,d.width-this.sanchor_-this.shadow_,d.height-this.sanchor_-this.shadow_,c);a.moveTo(d.width/2-this.sanchor_-this.shadow_/2,d.height-this.sanchor_-this.shadow_);a.lineTo(d.width/2+this.sanchor_-this.shadow_/2,d.height-this.sanchor_-this.shadow_);a.lineTo(d.width/2-this.shadow_/2,d.height-this.shadow_);break;default:a.roundRect(0,0,d.width-this.shadow_,d.height-this.shadow_,c);break}a.closePath()};ol.style.Photo.prototype.renderPhoto_=function(){var a;var b=0;if(this.stroke_){a=ol.color.asString(this.stroke_.getColor());b=this.stroke_.getWidth()}var c=this.getImage();var d=this.hitDetectionCanvas_.getContext("2d");this.drawBack_(d,"#000",b);d.fill();var d=c.getContext("2d");this.drawBack_(d,a,b);if(this.shadow_){d.shadowColor="rgba(0,0,0,0.5)";d.shadowBlur=this.shadow_/2;d.shadowOffsetX=this.shadow_/2;d.shadowOffsetY=this.shadow_/2}d.fill();d.shadowColor="transparent";var e=this;var f=this.img_=new Image;if(this.crossOrigin_)f.crossOrigin=this.crossOrigin_;f.src=this.src_;if(f.width)e.drawImage_(f);else f.onload=function(){e.drawImage_(f);if(e.onload_)e.onload_()};var g=this.getAnchor();g[0]=(c.width-this.shadow_)/2;g[1]=(c.height-this.shadow_)/2;if(this.sanchor_){g[1]=c.height-this.shadow_}};ol.style.Photo.prototype.drawImage_=function(a){var b=this.getImage();var c=b.getContext("2d");var d=0;if(this.stroke_)d=this.stroke_.getWidth();var e=2*this.radius_;c.save();if(this.kind_=="circle"){c.beginPath();c.arc(this.radius_+d,this.radius_+d,this.radius_,0,2*Math.PI,false);c.clip()}var f,g,h,i,j,k,l,m,n;if(this.crop_){f=Math.min(a.width/e,a.height/e);m=n=f*e;k=(a.width-m)/2;l=(a.height-n)/2;g=h=0;i=j=e+1}else{f=Math.min(e/a.width,e/a.height);k=l=0;m=a.width;n=a.height;i=f*m;j=f*n;g=(e-i)/2;h=(e-j)/2}g+=d+this.sanchor_/2;h+=d;c.drawImage(a,k,l,m,n,g,h,i,j);c.restore();if(this.kind_=="circle"&&d){c.beginPath();c.strokeStyle=ol.color.asString(this.stroke_.getColor());c.lineWidth=d/4;c.arc(this.radius_+d,this.radius_+d,this.radius_,0,2*Math.PI,false);c.stroke()}};ol.style.Photo.prototype.getChecksum=function(){var a=this.stroke_!==null?this.stroke_.getChecksum():"-";var b=this.fill_!==null?this.fill_.getChecksum():"-";var c=this.checksums_===null||(a!=this.checksums_[1]||b!=this.checksums_[2]||this.radius_!=this.checksums_[3]);if(c){var d="c"+a+b+(this.radius_!==void 0?this.radius_.toString():"-");this.checksums_=[d,a,b,this.radius_]}return this.checksums_[0]};(function(){function a(a){if(a.frameState.viewState.resolution>this.textPathMaxResolution_)return;var b=a.frameState.extent;var c=a.frameState.coordinateToPixelTransform;function d(a,b){var d=[];for(var e=0;e<a.length;e++){d.push(c[0]*a[e][0]+c[1]*a[e][1]+c[4]);d.push(c[2]*a[e][0]+c[3]*a[e][1]+c[5])}if(b&&d[0]>d[d.length-2]){var f=[];for(var e=d.length-2;e>=0;e-=2){f.push(d[e]);f.push(d[e+1])}return f}else return d}var e=a.context;e.save();e.scale(a.frameState.pixelRatio,a.frameState.pixelRatio);var f=this.getSource().getFeaturesInExtent(b);for(var g=0,h;h=f[g];g++){{var i=this.textPathStyle_(h,a.frameState.viewState.resolution);for(var j,k=0;j=i[k];k++){var l=j.getGeometry()||h.getGeometry();var m;switch(l.getType()){case"LineString":m=l.getCoordinates();break;case"MultiLineString":m=l.getLineString(0).getCoordinates();break;default:continue}var n=j.getText();var o=d(m,n.getRotateWithView());e.font=n.getFont();e.textBaseline=n.getTextBaseline();e.textAlign=n.getTextAlign();e.lineWidth=n.getStroke()?n.getStroke().getWidth()||0:0;e.strokeStyle=n.getStroke()?n.getStroke().getColor()||"#fff":"#fff";e.fillStyle=n.getFill()?n.getFill().getColor()||"#000":"#000";e.textJustify=n.getTextAlign()=="justify";e.textOverflow=n.getTextOverflow?n.getTextOverflow():"";e.minWidth=n.getMinWidth?n.getMinWidth():0;e.textPath(n.getText()||h.get("name"),o)}}}e.restore()}ol.layer.Vector.prototype.setTextPathStyle=function(b,c){if(b===null){if(this.textPath_)this.unByKey(this.textPath_);this.textPath_=null;this.changed();return}if(!this.textPath_){this.textPath_=this.on("postcompose",a,this)}if(b===undefined){b=[new ol.style.Style({text:new ol.style.Text})]}if(typeof b=="function")this.textPathStyle_=b;else this.textPathStyle_=function(){return b};this.textPathMaxResolution_=Number(c)||Number.MAX_VALUE;this.changed()};ol.style.TextPath=function(a){if(!a)a={};ol.style.Text.call(this,a);this.textOverflow_=typeof a.textOverflow!="undefined"?a.textOverflow:"visible";this.minWidth_=a.minWidth||0};ol.inherits(ol.style.TextPath,ol.style.Text);ol.style.TextPath.prototype.getTextOverflow=function(){return this.textOverflow_};ol.style.TextPath.prototype.getMinWidth=function(){return this.minWidth_}})();CanvasRenderingContext2D.prototype.textPath=function(a,b){var c=this;function d(a,b,c,d){var e=c-a;var f=d-b;return Math.sqrt(e*e+f*f)}var e,f=0;var g=2;function h(a,b){if(!e||f+e<b){for(;g<a.length;){e=d(a[g-2],a[g-1],a[g],a[g+1]);if(f+e>b)break;g+=2;if(g>=a.length)break;f+=e}}var c,h,i,j=b-f;if(g>=a.length){g=a.length-2}if(!j){c=a[g-2];h=a[g-1];i=Math.atan2(a[g+1]-a[g-1],a[g]-a[g-2])}else{c=a[g-2]+(a[g]-a[g-2])*j/e;h=a[g-1]+(a[g+1]-a[g-1])*j/e;i=Math.atan2(a[g+1]-a[g-1],a[g]-a[g-2])}return[c,h,i]}var i=c.measureText(" ").width*.25;var j=0;var k=0;for(var l=2;l<b.length;l+=2){k+=d(b[l-2],b[l-1],b[l],b[l+1])}if(k<c.minWidth)return;var m=a.split(" ").length-1;if(c.textOverflow!="visible"){if(k<c.measureText(a).width+(a.length-1+m)*i){var n=c.textOverflow=="ellipsis"?"…":c.textOverflow;do{m=a.split(" ").length-1;a=a.slice(0,a.length-1)}while(a&&k<c.measureText(a+n).width+(a.length+n.length-1+m)*i);a+=n}}switch(c.textJustify||c.textAlign){case true:case"center":case"end":case"right":{if(c.textJustify){j=0;i=(k-c.measureText(a).width)/(a.length-1+m)}else{j=k-c.measureText(a).width-(a.length+m)*i;if(c.textAlign=="center")j/=2}break}default:break}for(var o=0;o<a.length;o++){var p=a[o];var q=c.measureText(p).width;var r=h(b,j+q/2);c.save();c.textAlign="center";c.translate(r[0],r[1]);c.rotate(r[2]);if(c.lineWidth)c.strokeText(p,0,0);c.fillText(p,0,0);c.restore();j+=q+i*(p==" "?2:1)}};ol.style.Shadow=function(a){options=a||{};if(!options.fill)options.fill=new ol.style.Fill({color:"rgba(0,0,0,0.5)"});ol.style.RegularShape.call(this,{radius:options.radius,fill:options.fill});this.fill_=options.fill;this.radius_=options.radius;this.blur_=options.blur===0?0:options.blur||options.radius/3;this.offset_=[options.offsetX?options.offsetX:0,options.offsetY?options.offsetY:0];this.renderShadow_()};ol.inherits(ol.style.Shadow,ol.style.RegularShape);ol.style.Shadow.prototype.clone=function(){var a=new ol.style.Shadow({fill:this.fill_,radius:this.radius_,blur:this.blur_,offsetX:this.offset_[0],offsetY:this.offset_[1]});a.setScale(this.getScale());a.setOpacity(this.getOpacity());return a};ol.style.Shadow.prototype.renderShadow_=function(){var a=this.radius_;var b=this.getImage();var c=[b.width,b.height];c[1]=a;var d=b.getContext("2d");d.beginPath();d.clearRect(0,0,b.width,b.height);d.scale(1,.5);d.arc(a,-a,a-this.blur_,0,2*Math.PI,false);d.fillStyle="#000";d.shadowColor=this.fill_.getColor();d.shadowBlur=.7*this.blur_;d.shadowOffsetX=0;d.shadowOffsetY=a;d.closePath();d.fill();d.shadowColor="transparent";var e=this.getAnchor();e[0]=b.width/2-this.offset_[0];e[1]=b.height/5-this.offset_[1]};ol.style.Shadow.prototype.getChecksum=function(){var a=this.stroke_!==null?this.stroke_.getChecksum():"-";var b=this.fill_!==null?this.fill_.getChecksum():"-";var c=this.checksums_===null||(a!=this.checksums_[1]||b!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.form_+"-"+this.glyphs_!=this.checksums_[4]);if(c){var d="c"+a+b+(this.radius_!==void 0?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[d,a,b,this.radius_,this.form_+"-"+this.glyphs_]}return this.checksums_[0]};ol.geom.Geometry.prototype.cspline=function(a){if(this.calcCSpline_){if(this.csplineGeometryRevision!=this.getRevision()||this.csplineOption!=JSON.stringify(a)){this.csplineGeometry_=this.calcCSpline_(a);this.csplineGeometryRevision=this.getRevision();this.csplineOption=JSON.stringify(a)}return this.csplineGeometry_}else{return this}};ol.geom.GeometryCollection.prototype.calcCSpline_=function(a){var b=[],c=this.getGeometries();for(var d=0;d<c.length;d++){b.push(c[d].cspline())}return new ol.geom.GeometryCollection(b)};ol.geom.MultiLineString.prototype.calcCSpline_=function(a){var b=[],c=this.getLineStrings();for(var d=0;d<c.length;d++){b.push(c[d].cspline().getCoordinates())}return new ol.geom.MultiLineString(b)};ol.geom.Polygon.prototype.calcCSpline_=function(a){var b=[],c=this.getCoordinates();for(var d=0;d<c.length;d++){b.push(new ol.geom.LineString(c[d]).cspline().getCoordinates())}return new ol.geom.Polygon(b)};ol.geom.MultiPolygon.prototype.calcCSpline_=function(a){var b=[],c=this.getPolygons();for(var d=0;d<c.length;d++){b.push(c[d].cspline().getCoordinates())}return new ol.geom.MultiPolygon(b)};ol.geom.LineString.prototype.calcCSpline_=function(a){if(!a)a={};var b=this.getCoordinates();var c=typeof a.tension==="number"?a.tension:.5;var d=a.resolution||this.getLength()/b.length/(a.pointsPerSeg||10);var e,f=[],g,h,i,j,k,l,m,n,o,p,q,r,s;e=b.slice(0);if(b.length>2&&b[0][0]==b[b.length-1][0]&&b[0][1]==b[b.length-1][1]){e.unshift(b[b.length-2]);e.push(b[1])}else{e.unshift(b[0]);e.push(b[b.length-1])}function t(a,b,c,d){var e=c-a;var f=d-b;return Math.sqrt(e*e+f*f)}for(s=1;s<e.length-2;s++){var u=t(e[s][0],e[s][1],e[s+1][0],e[s+1][1]);var v=Math.round(u/d);var w=1;if(a.normalize){var u=t(e[s+1][0],e[s+1][1],e[s-1][0],e[s-1][1]);var x=t(e[s+2][0],e[s+2][1],e[s][0],e[s][1]);if(u<x)w=u/x;else w=x/u}i=(e[s+1][0]-e[s-1][0])*c*w;j=(e[s+2][0]-e[s][0])*c*w;k=(e[s+1][1]-e[s-1][1])*c*w;l=(e[s+2][1]-e[s][1])*c*w;for(r=0;r<=v;r++){q=r/v;m=2*Math.pow(q,3)-3*Math.pow(q,2)+1;n=-(2*Math.pow(q,3))+3*Math.pow(q,2);o=Math.pow(q,3)-2*Math.pow(q,2)+q;p=Math.pow(q,3)-Math.pow(q,2);g=m*e[s][0]+n*e[s+1][0]+o*i+p*j;h=m*e[s][1]+n*e[s+1][1]+o*k+p*l;f.push([g,h])}}return new ol.geom.LineString(f)};var exif2geojson;(function(){function a(a){return a.numerator/a.denominator}function b(b){if(b)return a(b[0])+a(b[1])/60+a(b[2])/3600;else return null}exif2geojson=function(c,d){d=d||{};if(typeof d.loading!="function")d.loading=function(){};if(typeof d.onLoad!="function")d.onLoad=function(a){console.log(a)};var e={type:"FeatureCollection",features:[]};var f=c.length;for(var g=0,h;h=c[g];g++){EXIF.getData(h,function(){if(this.exifdata.GPSLongitudeRef){fjs={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[]}};e.features.push(fjs);fjs.geometry.coordinates=[(this.exifdata.GPSLongitudeRef=="E"?1:-1)*b(this.exifdata.GPSLongitude),(this.exifdata.GPSLatitudeRef=="N"?1:-1)*b(this.exifdata.GPSLatitude)];if(this.exifdata.GPSAltitude)fjs.geometry.coordinates.push(a(this.exifdata.GPSAltitude));fjs.properties.url=this.src||this.name;if(this.exifdata.ImageDescription)fjs.properties.description=this.exifdata.ImageDescription;if(d.date&&this.exifdata.DateTime)fjs.properties.date=this.exifdata.DateTime;if(d.camera){if(this.exifdata.Make)fjs.properties.make=this.exifdata.Make;if(this.exifdata.Model)fjs.properties.model=this.exifdata.Model.replace(new RegExp(String.fromCharCode(0),"g"),"")}if(d.image){fjs.properties.size=this.size;fjs.properties.type=this.type;if(this.exifdata.ImageHeight)fjs.properties.height=this.exifdata.ImageHeight;if(this.exifdata.ImageWidth)fjs.properties.width=this.exifdata.ImageWidth}}f--;d.loading(f);if(!f)d.onLoad(e)})}}})();ol.HexGrid=function(a){a=a||{};ol.Object.call(this,a);this.size_=a.size||8e4;this.origin_=a.origin||[0,0];this.layout_=this.layout[a.layout]||this.layout.pointy};ol.inherits(ol.HexGrid,ol.Object);ol.HexGrid.prototype.layout={pointy:[Math.sqrt(3),Math.sqrt(3)/2,0,3/2,Math.sqrt(3)/3,-1/3,0,2/3,Math.cos(Math.PI/180*(60*0+30)),Math.sin(Math.PI/180*(60*0+30)),Math.cos(Math.PI/180*(60*1+30)),Math.sin(Math.PI/180*(60*1+30)),Math.cos(Math.PI/180*(60*2+30)),Math.sin(Math.PI/180*(60*2+30)),Math.cos(Math.PI/180*(60*3+30)),Math.sin(Math.PI/180*(60*3+30)),Math.cos(Math.PI/180*(60*4+30)),Math.sin(Math.PI/180*(60*4+30)),Math.cos(Math.PI/180*(60*5+30)),Math.sin(Math.PI/180*(60*5+30))],flat:[3/2,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,Math.cos(Math.PI/180*(60*0)),Math.sin(Math.PI/180*(60*0)),Math.cos(Math.PI/180*(60*1)),Math.sin(Math.PI/180*(60*1)),Math.cos(Math.PI/180*(60*2)),Math.sin(Math.PI/180*(60*2)),Math.cos(Math.PI/180*(60*3)),Math.sin(Math.PI/180*(60*3)),Math.cos(Math.PI/180*(60*4)),Math.sin(Math.PI/180*(60*4)),Math.cos(Math.PI/180*(60*5)),Math.sin(Math.PI/180*(60*5))]};ol.HexGrid.prototype.setLayout=function(a){this.layout_=this.layout[a]||this.layout.pointy;this.changed()};ol.HexGrid.prototype.getLayout=function(){return this.layout_[9]!=0?"pointy":"flat"};ol.HexGrid.prototype.setOrigin=function(a){this.origin_=a;this.changed()};ol.HexGrid.prototype.getOrigin=function(a){return this.origin_};ol.HexGrid.prototype.setSize=function(a){this.size_=a||8e4;this.changed()};ol.HexGrid.prototype.getSize=function(a){return this.size_};ol.HexGrid.prototype.cube2hex=function(a){return[a[0],a[2]]};ol.HexGrid.prototype.hex2cube=function(a){return[a[0],-a[0]-a[1],a[1]]};ol.HexGrid.prototype.hex2offset=function(a){if(this.layout_[9])return[a[0]+(a[1]-(a[1]&1))/2,a[1]];else return[a[0],a[1]+(a[0]+(a[0]&1))/2]};ol.HexGrid.prototype.offset2hex=function(a){if(this.layout_[9])return[q=a[0]-(a[1]-(a[1]&1))/2,r=a[1]];else return[a[0],a[1]-(a[0]+(a[0]&1))/2]};ol.HexGrid.prototype.cube_round=function(a){var b=Math.round(a[0]);var c=Math.round(a[1]);var d=Math.round(a[2]);var e=Math.abs(b-a[0]);var f=Math.abs(c-a[1]);var g=Math.abs(d-a[2]);if(e>f&&e>g)b=-c-d;else if(f>g)c=-b-d;else d=-b-c;return[b,c,d]};ol.HexGrid.prototype.hex_round=function(a){return this.cube2hex(this.cube_round(this.hex2cube(a)))};ol.HexGrid.prototype.hex_corner=function(a,b,c){return[a[0]+b*this.layout_[8+2*(c%6)],a[1]+b*this.layout_[9+2*(c%6)]]};ol.HexGrid.prototype.getHexagonAtCoord=function(a){returhn(this.getHexagon(this.coord2hex(a)))};ol.HexGrid.prototype.getHexagon=function(a){var b=[];var c=this.hex2coord(a);for(var d=0;d<=7;d++){b.push(this.hex_corner(c,this.size_,d,this.layout_[8]))}return b};ol.HexGrid.prototype.hex2coord=function(a){return[this.origin_[0]+this.size_*(this.layout_[0]*a[0]+this.layout_[1]*a[1]),this.origin_[1]+this.size_*(this.layout_[2]*a[0]+this.layout_[3]*a[1])]};ol.HexGrid.prototype.coord2hex=function(a){var b=[(a[0]-this.origin_[0])/this.size_,(a[1]-this.origin_[1])/this.size_];var c=this.layout_[4]*b[0]+this.layout_[5]*b[1];var d=this.layout_[6]*b[0]+this.layout_[7]*b[1];return this.hex_round([c,d])};ol.HexGrid.prototype.cube_distance=function(a,b){return Math.max(Math.abs(a[0]-b[0]),Math.abs(a[1]-b[1]),Math.abs(a[2]-b[2]))};(function(){function a(a,b,c){return a+(b-a)*c}function b(b,c,d){return[a(b[0]+1e-6,c[0],d),a(b[1]+1e-6,c[1],d),a(b[2]+1e-6,c[2],d)]}ol.HexGrid.prototype.cube_line=function(a,c){var d=this.cube_distance(a,c);if(!d)return[a];var e=[];for(var f=0;f<=d;f++){e.push(this.cube_round(b(a,c,f/d)))}return e}})();ol.HexGrid.prototype.neighbors={cube:[[+1,-1,0],[+1,0,-1],[0,+1,-1],[-1,+1,0],[-1,0,+1],[0,-1,+1]],hex:[[+1,0],[+1,-1],[0,-1],[-1,0],[-1,+1],[0,+1]]};ol.HexGrid.prototype.hex_neighbors=function(a,b){if(b!==undefined){return[a[0]+this.neighbors.hex[b%6][0],a[1]+this.neighbors.hex[b%6][1]]}else{var c=[];for(b=0;b<6;b++){c.push([a[0]+this.neighbors.hex[b][0],a[1]+this.neighbors.hex[b][1]])}return c}};ol.HexGrid.prototype.cube_neighbors=function(a,b){if(b!==undefined){return[a[0]+this.neighbors.cube[b%6][0],a[1]+this.neighbors.cube[b%6][1],a[2]+this.neighbors.cube[b%6][2]]}else{var c=[];for(b=0;b<6;b++){c.push([a[0]+this.neighbors.cube[b][0],a[1]+this.neighbors.cube[b][1],a[2]+this.neighbors.cube[b][2]])}for(b=0;b<6;b++)c[b]=this.cube2hex(c[b]);return c}};$.fn.exportMap=function(a,b){if(!b)b={};function c(a,c,d){if(d=="pdf"){var e=c.toDataURL("image/jpeg");var f,g,h,i,j="a4";var k=Number($(a).data("margin"))||0;if(c.width>c.height){i="landscape";f=[297,210]}else{i="portrait";f=[210,297]}var l=Math.min((f[0]-2*k)/c.width,(f[1]-2*k)/c.height);g=l*c.width;h=l*c.height;var m=(f[0]-g)/2;var n=(f[1]-h)/2;var o=new jsPDF(i,"mm",j);o.addImage(e,"JPEG",m,n,g,h);a.href=o.output("datauristring")}else a.href=c.toDataURL("image/"+(b.format||d),b.quality)}if(!this.each)return;return this.each(function(){if("download"in this){var d=this;$(this).on("click",function(){var e=$(this).attr("download").split(".").pop();if(e=="jpg")e="jpeg";if(b.dpi){a.once("precompose",function(a){var c=a.context.canvas;var d=b.dpi/96;c.width=Math.ceil(c.width*d);c.height=Math.ceil(c.height*d);a.context.scale(d,d)})}var f=$(this).text();if(e!="png"){a.once("precompose",function(a){a.context.fillStyle="white";a.context.fillRect(0,0,a.context.canvas.width,a.context.canvas.height)})}a.once("postcompose",function(b){c(d,b.context.canvas,e);setTimeout(function(){a.renderSync()},500)});a.renderSync()})}else{$(this).on("click",function(){alert("Export functions are not supported by your browser...")})}})};(function(){function a(a,b,c){return(a[0]-c[0])*(b[1]-c[1])-(a[1]-c[1])*(b[0]-c[0])<=0}ol.coordinate.convexHull=function(b){b.sort(function(a,b){return a[0]==b[0]?a[1]-b[1]:a[0]-b[0]});var c=[];for(var d=0;d<b.length;d++){while(c.length>=2&&a(c[c.length-2],c[c.length-1],b[d])){c.pop()}c.push(b[d])}var e=[];for(var d=b.length-1;d>=0;d--){while(e.length>=2&&a(e[e.length-2],e[e.length-1],b[d])){e.pop()}e.push(b[d])}e.pop();c.pop();return c.concat(e)};function b(a){var c=[];switch(a.getType()){case"Point":c.push(a.getCoordinates());break;case"LineString":case"LinearRing":case"MultiPoint":c=a.getCoordinates();break;case"MultiLineString":var d=a.getLineStrings();for(var e=0;e<d.length;e++)c.concat(b(d[e]));break;case"Polygon":c=b(a.getLinearRing(0));break;case"MultiPolygon":var d=a.getPolygons();for(var e=0;e<d.length;e++)c.concat(b(d[e]));break;case"GeometryCollection":var d=a.getGeometries();for(var e=0;e<d.length;e++)c.concat(b(d[e]));break;default:break}return c}ol.geom.Geometry.prototype.convexHull=function(){return ol.coordinate.convexHull(b(this))}})();ol.coordinate.dist2d=function(a,b){var c=a[0]-b[0];var d=a[1]-b[1];return Math.sqrt(c*c+d*d)};ol.coordinate.equal=function(a,b){return a[0]==b[0]&&a[1]==b[1]};ol.coordinate.getFeatureCenter=function(a){return ol.coordinate.getGeomCenter(a.getGeometry())};ol.coordinate.getGeomCenter=function(a){switch(a.getType()){case"Point":return a.getCoordinates();case"MultiPolygon":a=a.getPolygon(0);case"Polygon":return a.getInteriorPoint().getCoordinates();default:return a.getClosestPoint(ol.extent.getCenter(a.getExtent()))}};ol.geom.LineString.prototype.splitAt=function(a,b){if(!a)return[this];if(!b)b=1e-10;if(a.length&&a[0].length){var c=[this];for(var d=0;d<a.length;d++){var e=[];for(var f=0;f<c.length;f++){var g=c[f].splitAt(a[d],b);e=e.concat(g)}c=e}return c}if(ol.coordinate.equal(a,this.getFirstCoordinate())||ol.coordinate.equal(a,this.getLastCoordinate())){return[this]}var h=this.getCoordinates();var i=[h[0]],j,k;var l=[];for(var d=0;d<h.length-1;d++){if(ol.coordinate.equal(h[d],h[d+1]))continue;if(ol.coordinate.equal(a,h[d+1])){i.push(h[d+1]);l.push(new ol.geom.LineString(i));i=[]}else if(!ol.coordinate.equal(a,h[d])){var m,n;if(h[d][0]==h[d+1][0]){m=n=(h[d][1]-a[1])/(h[d][1]-h[d+1][1])}else if(h[d][1]==h[d+1][1]){m=n=(h[d][0]-a[0])/(h[d][0]-h[d+1][0])}else{m=(h[d][0]-a[0])/(h[d][0]-h[d+1][0]);n=(h[d][1]-a[1])/(h[d][1]-h[d+1][1])}if(Math.abs(m-n)<b&&0<=m&&m<=1){i.push(a);l.push(new ol.geom.LineString(i));i=[a]}}i.push(h[d+1])}if(i.length>1)l.push(new ol.geom.LineString(i));if(l.length)return l;else return[this]};ol.Map.prototype.animExtent=function(a,b){var c;b=b||{};if(b.projection){a=ol.proj.transformExtent(a,b.projection,this.getView().getProjection())}var d=(new Date).getTime();var e=b.duration||1e3;var f=b.easing||ol.easing.upAndDown;var g=b.lineWidth||2;var h=b.color||"red";function i(b){var i=b.frameState;var j=i.pixelRatio;var k=i.time-d;if(k>e)ol.Observable.unByKey(c);else{var l=k/e;var m=this.getPixelFromCoordinate([a[0],a[1]]);var n=this.getPixelFromCoordinate([a[2],a[3]]);var o=b.context;o.save();o.scale(j,j);o.beginPath();var p=f(l);o.globalAlpha=f(1-l);o.lineWidth=g;o.strokeStyle=h;o.rect(m[0],m[1],n[0]-m[0],n[1]-m[1]);o.stroke();o.restore();i.animate=true}}c=this.on("postcompose",i,this);this.renderSync()};ol.ordering={};ol.ordering.yOrdering=function(a){return function(a,b){return a.getGeometry().getExtent()[1]<b.getGeometry().getExtent()[1]}};ol.ordering.zIndex=function(a){if(!a)a={};var b=a.attribute||"zIndex";if(option.equalFn){return function(a,c){if(a.get(b)==c.get(b))return option.equalFn(a,c);return a.get(b)<c.get(b)}}else{return function(a,c){return a.get(b)<c.get(b)}}};function resizeLayerSwitcher(){var a=60;setTimeout(function(){if($(".ol-forceopen")){if($(".ol-unselectable").height()-a<=$(".ol-forceopen").height()){$(".ol-forceopen > ul").css("height",$(".ol-unselectable").height()-a+"px")}else{$(".ol-forceopen > ul").css("height","100%");$(".ol-forceopen > ul").css("height","auto")}}},0)}window.addEventListener("resize",function(){resizeLayerSwitcher()});"use strict";angular.module("DHuS-webclient").factory("CartStatusService",function(){return{cartActive:false,cartFootprints:false,isUserDialog:false,getCartActive:function(){return this.cartActive},setCartActive:function(a){this.cartActive=a},getCartFootprints:function(){return this.cartFootprints},setCartFootprints:function(a){this.cartFootprints=a},getIsUserDialog:function(){return this.isUserDialog},setIsUserDialog:function(a){this.isUserDialog=a}}});(function(){"use strict"})();angular.module("DHuS-webclient").factory("DatastoreModel",function(){return{dsModel:{dslist:[]},datastoresCount:0,createModel:function(a,b){if(!a)return;this.dsModel.dslist=a;this.dsModel.dslist.forEach(function(a){a.dstype=DatastoreUtils.getDatastoreTypeFromOdata(a["@odata.type"])});this.datastoresCount=a.length}}});(function(){"use strict"})();angular.module("DHuS-webclient").directive("datastoreList",["ODataDatastoreService","DatastoreModel",function(a,b){return{restrict:"AE",replace:true,templateUrl:"components/datastore/datastore-list/view.html",compile:function(c,d){return{pre:function(c,d,e){c.init=function(){a.getDatastoreList().then(function(a){b.createModel(a.data.value,a.data.value.length);c.dslist=b.dsModel.dslist;c.datastoresCount=b.datastoresCount})};c.$watch(function(){return b.dsModel.dslist},function(a){c.dslist=a});c.$watch(function(){return b.datastoresCount},function(a){c.datastoresCount=a});c.createDatastore=function(){DatastoreDetailsManager.getDatastoreDetails(null,true)};c.init()},post:function(a,b,c){}}}}}]);(function(){"use strict"})();angular.module("DHuS-webclient").directive("datastoreItem",["ODataDatastoreService","DatastoreModel",function(a,b){var c={restrict:"AE",replace:true,templateUrl:"components/datastore/datastore-list/datastore-item/view.html",scope:{datastore:"="},compile:function(c,d){return{post:function(c,d,e){c.objName="Data Store";c.editDatastore=function(){DatastoreDetailsManager.getDatastoreDetails(c.datastore.Name,false)};c.deleteDatastore=function(){a.deleteDatastore(c.datastore.Name).then(function(d){if(d.status>=200&&d.status<300){a.getDatastoreList().then(function(a){b.createModel(a.data.value,a.data.value.length);ToastManager.success(c.objName+" deleted")})}else{ToastManager.error("error deleting "+c.objName)}},function(a){ToastManager.error("error deleting "+c.objName)})};c.hoverIn=function(){c.visibleItemButton=true};c.hoverOut=function(){c.visibleItemButton=false}}}}};return c}]);var DatastoreDetailsManager={getDatastoreDetails:function(){},setDatastoreDetails:function(a){this.getDatastoreDetails=a}};angular.module("DHuS-webclient").directive("datastoreDetails",["ODataDatastoreService","DatastoreModel","ODataEvictionService","ConfigurationService",function(a,b,c,d){return{restrict:"AE",replace:true,templateUrl:"components/datastore/datastore-details/view.html",scope:{text:"="},compile:function(e,f){return{pre:function(a,b,c){a.openstack_ds=ApplicationService.settings.openstack_ds;a.hfs_ds=ApplicationService.settings.hfs_ds;a.gmp_ds=ApplicationService.settings.gmp_ds;a.remote_ds=ApplicationService.settings.remote_ds;if(!d.isLoaded()){d.getConfiguration().then(function(b){if(b){a.openstack_ds=ApplicationService.settings.openstack_ds;a.hfs_ds=ApplicationService.settings.hfs_ds;a.gmp_ds=ApplicationService.settings.gmp_ds;a.remote_ds=ApplicationService.settings.remote_ds}},function(a){})}else{baseUrl=ApplicationConfig.baseUrl}},post:function(d,e,f){d.datastore={};d.datastore.Quotas={};d.datastore.MySQLConnectionInfo={};d.datastore.Configuration={};d.checkFields=true;d.isNew=false;DatastoreDetailsManager.setDatastoreDetails(function(a,b){d.getDatastoreDetails(a,b)});d.$watch(function(){return d.datastore.Type},function(a){if(!d.isNew)return;d.resetFields()});function g(b,c){var e=ApplicationService.settings.datastores;d.openstack_ds=e===undefined||e.openstack_ds===undefined?true:e.openstack_ds;d.hfs_ds=e===undefined||e.hfs_ds===undefined?true:e.hfs_ds;d.gmp_ds=e===undefined||e.gmp_ds===undefined?true:e.gmp_ds;d.remote_ds=e===undefined||e.remote_ds===undefined?true:e.remote_ds;a.evictions().then(function(a){var b=[];for(var c=0;c<a.data.value.length;c++){b.push(a.data.value[c].Name)}d.evictionsName=b});if(c){d.datastore={};d.resetFields()}else{h(b)}}function h(b){a.evictions().then(function(a){},function(a){d.datastore.Eviction="ERROR"});c.getEvictionList().then(function(c){d.datastore={};d.datastore.evictions=c.data.value;a.checkCurrentDataStore(b).then(function(a){if(a.status>=200&&a.status<=204){var b=a.data;d.datastore.Name=b.Name;d.datastore.Priority=b.Priority;d.datastore.MaximumSize=b.MaximumSize;d.datastore.CurrentSize=b.CurrentSize;d.datastore.AutoEviction=b.AutoEviction;d.datastore.ReadOnly=b.ReadOnly;if(b.Eviction){d.datastore.Eviction=b.Eviction.Name}d.datastore.Type=DatastoreUtils.getDatastoreTypeFromOdata(b["@odata.type"]);switch(d.datastore.Type){case"Open Stack Data Store":d.datastore.Provider=b.Provider;d.datastore.Identity=b.Identity;d.datastore.Identity=b.Identity;d.datastore.Credential=b.Credential;d.datastore.Url=b.Url;d.datastore.Region=b.Region;d.datastore.Container=b.Container;break;case"HFS Data Store":d.datastore.Path=b.Path;d.datastore.MaxFileDepth=b.MaxFileDepth;d.datastore.MaxItems=b.MaxItems;break;case"DHuS Remote Data Store":d.datastore.ServiceUrl=b.ServiceUrl;d.datastore.Login=b.Login;d.datastore.Password=b.Password;break;case"GMP Data Store":d.datastore.RepoLocation=b.RepoLocation;d.datastore.HFSLocation=b.HFSLocation;d.datastore.MaxQueuedRequest=b.MaxQueuedRequest;d.datastore.Quotas={};d.datastore.QuotasMaxQueryPerUser=b.Quotas.MaxQueryPerUser;d.datastore.QuotasTimespan=b.Quotas.Timespan;d.datastore.IsMaster=b.IsMaster||false;d.datastore.MySQLConnectionInfo={};d.datastore.MySQLConnectionInfoDatabaseUrl=b.MySQLConnectionInfo.DatabaseUrl;d.datastore.MySQLConnectionInfoUser=b.MySQLConnectionInfo.User;d.datastore.MySQLConnectionInfoPassword=b.MySQLConnectionInfo.Password;d.datastore.Configuration={};d.datastore.ConfigurationAgentId=b.Configuration.AgentId;d.datastore.ConfigurationTargetId=b.Configuration.TargetId;break;default:console.warn("DataStore type Unknown");break}}else{d.datastore.Eviction="ERROR"}},function(a){d.datastore.Eviction="ERROR";ToastManager.error(msg+(". Reason: "+a.data.error.message))})})}d.getDatastoreDetails=function(a,b){d.isNew=b;g(a,b);if(!$("#dsDetails").hasClass("in"))$("#dsDetails").modal("show")};$("#dsDetails").on("shown.bs.modal",function(a){d.resetErrorDivs()});d.checkType=function(){var a=true;if(!d.datastore.Type||d.datastore.Type.trim()===""){$("#dscheckType").css("display","inline-block");a=false}else{$("#dscheckType").css("display","none")}d.checkFields=d.checkFields&&a};d.checkName=function(){var a=true;if(!d.datastore.Name||d.datastore.Name.trim()===""){$("#dscheckName").css("display","inline-block");a=false}else{$("#dscheckName").css("display","none")}if(/[^a-zA-Z0-9\-\_\/]/.test(d.datastore.Name)){a=false;ToastManager.error("Data Store Name Input is not alphanumeric")}d.checkFields=d.checkFields&&a};d.checkPriority=function(){var a=d.datastore.Priority==="";d.validateField(a,"#dscheckPriority")};d.validateField=function(a,b){$(b).css("display",a?"inline-block":"none");d.checkFields=d.checkFields&&a?false:true};d.checkMaximumSize=function(){var a=true;if(d.datastore.MaximumSize===""){$("#dscheckMaximumSize").css("display","inline-block");a=false}else{$("#dscheckMaximumSize").css("display","none")}d.checkFields=d.checkFields&&a};d.checkCurrentSize=function(){var a=true;if(d.datastore.CurrentSize===""){$("#dscheckCurrentSize").css("display","inline-block");a=false}else{$("#dscheckCurrentSize").css("display","none")}d.checkFields=d.checkFields&&a};d.checkHFSPath=function(){var a=true;if(!d.datastore.Path||d.datastore.Path===""){$("#dscheckPath").css("display","inline-block");a=false}else{$("#dscheckPath").css("display","none")}d.checkFields=d.checkFields&&a};d.checkHFSMaxFileDepth=function(){var a=true;if(d.datastore.MaxFileDepth===""){$("#dscheckMaxFileDepth").css("display","inline-block");a=false}else{$("#dscheckMaxFileDepth").css("display","none")}d.checkFields=d.checkFields&&a};d.checkHFSMaxItems=function(){var a=true;if(d.datastore.MaxItems===""){$("#dscheckMaxItems").css("display","inline-block");a=false}else{$("#dscheckMaxItems").css("display","none")}d.checkFields=d.checkFields&&a};d.checkOSProvider=function(){var a=!d.datastore.Provider||d.datastore.Provider==="";var b="#dscheckProvider";$(b).css("display",a?"inline-block":"none");d.checkFields=d.checkFields&&a?false:true};d.checkOSIdentity=function(){var a=true;if(!d.datastore.Identity||d.datastore.Identity===""){$("#dscheckIdentity").css("display","inline-block");a=false}else{$("#dscheckIdentity").css("display","none")}d.checkFields=d.checkFields&&a};d.checkOSCredential=function(){var a=true;if(!d.datastore.Credential||d.datastore.Credential===""){$("#dscheckCredential").css("display","inline-block");a=false}else{$("#dscheckCredential").css("display","none")}d.checkFields=d.checkFields&&a};d.checkOSUrl=function(){var a=true;if(!d.datastore.Url||d.datastore.Url===""){$("#dscheckUrl").css("display","inline-block");a=false}else{$("#dscheckUrl").css("display","none")}d.checkFields=d.checkFields&&a};d.checkOSRegion=function(){var a=true;if(!d.datastore.Region||d.datastore.Region===""){$("#dscheckRegion").css("display","inline-block");a=false}else{$("#dscheckRegion").css("display","none")}d.checkFields=d.checkFields&&a};d.checkOSContainer=function(){var a=true;if(!d.datastore.Container||d.datastore.Container===""){$("#dscheckContainer").css("display","inline-block");a=false}else{$("#dscheckContainer").css("display","none")}d.checkFields=d.checkFields&&a};d.checkRMServiceUrl=function(){var a=true;if(!d.datastore.ServiceUrl||d.datastore.ServiceUrl===""){$("#dscheckRMServiceUrl").css("display","inline-block");a=false}else{$("#dscheckRMServiceUrl").css("display","none")}d.checkFields=d.checkFields&&a};d.checkRMLogin=function(){var a=true;if(!d.datastore.Login||d.datastore.Login===""){$("#dscheckRMLogin").css("display","inline-block");a=false}else{$("#dscheckRMLogin").css("display","none")}d.checkFields=d.checkFields&&a};d.checkRMPassword=function(){var a=true;if(!d.datastore.Login||d.datastore.Login===""){$("#dscheckRMPassword").css("display","inline-block");a=false}else{$("#dscheckRMPassword").css("display","none")}d.checkFields=d.checkFields&&a};d.checkGMPRepoLocation=function(){var a=true;if(!d.datastore.RepoLocation||d.datastore.RepoLocation===""){$("#dscheckGMPRepoLocation").css("display","inline-block");a=false}else{$("#dscheckGMPRepoLocation").css("display","none")}d.checkFields=d.checkFields&&a};d.checkGMPHFSLocation=function(){var a=true;if(!d.datastore.HFSLocation||d.datastore.HFSLocation===""){$("#dscheckHFSLocation").css("display","inline-block");a=false}else{$("#dscheckHFSLocation").css("display","none")}
d.checkFields=d.checkFields&&a};d.checkMaxQueuedRequest=function(){var a=true;if(!d.datastore.MaxQueuedRequest||d.datastore.MaxQueuedRequest===""){$("#dscheckMaxQueuedRequest").css("display","inline-block");a=false}else{$("#dscheckMaxQueuedRequest").css("display","none")}d.checkFields=d.checkFields&&a};d.checkGMPQuotasMaxQueryPerUser=function(){var a=true;if(!d.datastore.QuotasMaxQueryPerUser||d.datastore.QuotasMaxQueryPerUser===""){$("#dscheckQuotasMaxQueryPerUser").css("display","inline-block");a=false}else{$("#dscheckQuotasMaxQueryPerUser").css("display","none")}d.checkFields=d.checkFields&&a};d.checkGMPQuotasTimespan=function(){var a=true;if(!d.datastore.QuotasTimespan||d.datastore.QuotasTimespan===""){$("#dscheckQuotasTimespan").css("display","inline-block");a=false}else{$("#dscheckQuotasTimespan").css("display","none")}d.checkFields=d.checkFields&&a};d.checkGMPMySQLConnectionInfoDatabaseUrl=function(){var a=true;if(!d.datastore.MySQLConnectionInfoDatabaseUrl||d.datastore.MySQLConnectionInfoDatabaseUrl===""){$("#dscheckMySQLConnectionInfoDatabaseUrl").css("display","inline-block");a=false}else{$("#dscheckMySQLConnectionInfoDatabaseUrl").css("display","none")}d.checkFields=d.checkFields&&a};d.checkGMPMySQLConnectionInfoUser=function(){var a=true;if(!d.datastore.MySQLConnectionInfoUser||d.datastore.MySQLConnectionInfoUser===""){$("#dscheckMySQLConnectionInfoUser").css("display","inline-block");a=false}else{$("#dscheckMySQLConnectionInfoUser").css("display","none")}d.checkFields=d.checkFields&&a};d.checkGMPMySQLConnectionInfoPassword=function(){var a=true;if(!d.datastore.MySQLConnectionInfoDatabaseUrl||d.datastore.MySQLConnectionInfoDatabaseUrl===""){$("#dscheckMySQLConnectionInfoPassword").css("display","inline-block");a=false}else{$("#dscheckMySQLConnectionInfoPassword").css("display","none")}d.checkFields=d.checkFields&&a};d.checkGMPConfigurationAgentId=function(){var a=true;if(!d.datastore.ConfigurationAgentId||d.datastore.ConfigurationAgentId===""){$("#dscheckConfigurationAgentId").css("display","inline-block");a=false}else{$("#dscheckConfigurationAgentId").css("display","none")}d.checkFields=d.checkFields&&a};d.checkGMPConfigurationTargetId=function(){var a=true;if(!d.datastore.ConfigurationTargetId||d.datastore.ConfigurationTargetId===""){$("#dscheckConfigurationTargetId").css("display","inline-block");a=false}else{$("#dscheckConfigurationTargetId").css("display","none")}d.checkFields=d.checkFields&&a};d.validator=function(){d.checkFields=true;d.checkType();d.checkName();d.checkPriority();if(d.datastore.Type!=="DHuS Remote Data Store"){d.checkMaximumSize();d.checkCurrentSize()}switch(d.datastore.Type){case"Open Stack Data Store":d.checkOSProvider();d.checkOSIdentity();d.checkOSCredential();d.checkOSUrl();d.checkOSRegion();d.checkOSContainer();break;case"HFS Data Store":d.checkHFSPath();d.checkHFSMaxFileDepth();d.checkHFSMaxItems();break;case"DHuS Remote Data Store":d.checkRMServiceUrl();d.checkRMLogin();d.checkRMPassword();break;case"GMP Data Store":d.checkGMPRepoLocation();d.checkGMPHFSLocation();d.checkMaxQueuedRequest();d.checkGMPQuotasMaxQueryPerUser();d.checkGMPQuotasTimespan();d.checkGMPMySQLConnectionInfoDatabaseUrl();d.checkGMPMySQLConnectionInfoUser();d.checkGMPMySQLConnectionInfoPassword();d.checkGMPConfigurationAgentId();d.checkGMPConfigurationTargetId();break;default:console.warn("cant identify data store type: ",dataStoreType);break}};d.save=function(){if(!d.datastore.Type){ToastManager.error("Please Select a Data Store Type");d.resetFields();return}d.validator();if(!d.checkFields){console.error("Invalid fields for:",d.datastore);return}if(d.isNew){d.createDatastore()}else{d.updateDatastore()}};d.createDatastore=function(){var c="datastore creation failed";var e=d.createBodyrequest();var f=d.datastore.Eviction;a.createDatastore(e).then(function(e){if(e.status>=200&&e.status<=204){a.getDatastoreList().then(function(c){b.createModel(c.data.value,c.data.value.length);ToastManager.success("datastore created");if(f){a.linkEvictionToDatastore(f,d.datastore.Name)}d.close()})}else{ToastManager.error(c+(". Reason: "+e.data.error.message||""))}},function(a){ToastManager.error(c+(". Reason: "+a.data.error.message||""))})};d.createBodyrequest=function(){var a={};a.Name=d.datastore.Name.replace(/\s/g,"");a.Priority=d.datastore.Priority;a.MaximumSize=d.datastore.MaximumSize;a.CurrentSize=d.datastore.CurrentSize;a.AutoEviction=d.datastore.AutoEviction||false;a.ReadOnly=d.datastore.ReadOnly||false;a.Type=d.datastore.Type;switch(a.Type){case"Open Stack Data Store":a.Provider=d.datastore.Provider;a.Identity=d.datastore.Identity;a.Credential=d.datastore.Credential;a.Url=d.datastore.Url;a.Region=d.datastore.Region;a.Container=d.datastore.Container;break;case"HFS Data Store":a.Path=d.datastore.Path;a.MaxFileDepth=d.datastore.MaxFileDepth;a.MaxItems=d.datastore.MaxItems;break;case"DHuS Remote Data Store":a.MaximumSize=undefined;a.CurrentSize=undefined;a.AutoEviction=undefined;a.ServiceUrl=d.datastore.ServiceUrl;a.Login=d.datastore.Login;a.Password=d.datastore.Password;break;case"GMP Data Store":a.RepoLocation=d.datastore.RepoLocation;a.HFSLocation=d.datastore.HFSLocation;a.MaxQueuedRequest=d.datastore.MaxQueuedRequest;a.Quotas={};a.Quotas.MaxQueryPerUser=d.datastore.QuotasMaxQueryPerUser;a.Quotas.Timespan=d.datastore.QuotasTimespan;a.IsMaster=d.datastore.IsMaster||false;a.MySQLConnectionInfo={};a.MySQLConnectionInfo.DatabaseUrl=d.datastore.MySQLConnectionInfoDatabaseUrl;a.MySQLConnectionInfo.User=d.datastore.MySQLConnectionInfoUser;a.MySQLConnectionInfo.Password=d.datastore.MySQLConnectionInfoPassword;a.Configuration={};a.Configuration.AgentId=d.datastore.ConfigurationAgentId;a.Configuration.TargetId=d.datastore.ConfigurationTargetId;break;default:console.warn("datastore-details case unknown");break}return a};d.updateDatastore=function(){var c="datastore update failed";var e=d.createBodyrequest();var f=d.datastore.Eviction;a.updateDatastore(e.Name,e).then(function(e){if(e.status>=200&&e.status<=204){a.getDatastoreList().then(function(c){b.createModel(c.data.value,c.data.value.length);ToastManager.success("datastore updated");if(f){a.linkEvictionToDatastore(f,d.datastore.Name)}d.close()})}else{ToastManager.error(c+(". Reason: "+e.data.error.message||""))}},function(a){ToastManager.error(c+(". Reason: "+a.data.error.message||""))})};d.resetErrorDivs=function(){$("#dscheckType").css("display","none");$("#dscheckName").css("display","none");$("#dscheckPriority").css("display","none");$("#dscheckMaximumSize").css("display","none");$("#dscheckCurrentSize").css("display","none");$("#dscheckProvider").css("display","none");$("#dscheckIdentity").css("display","none");$("#dscheckCredential").css("display","none");$("#dscheckUrl").css("display","none");$("#dscheckRegion").css("display","none");$("#dscheckContainer").css("display","none");$("#dscheckPath").css("display","none");$("#dscheckMaxFileDepth").css("display","none");$("#dscheckMaxItems").css("display","none");$("#dscheckRMServiceUrl").css("display","none");$("#dscheckRMLogin").css("display","none");$("#dscheckRMPassword").css("display","none");$("#dscheckGMPRepoLocation").css("display","none");$("#dscheckHFSLocation").css("display","none");$("#dscheckMaxQueuedRequest").css("display","none");$("#dscheckQuotasMaxQueryPerUser").css("display","none");$("#dscheckQuotasTimespan").css("display","none");$("#dscheckMySQLConnectionInfoDatabaseUrl").css("display","none");$("#dscheckMySQLConnectionInfoUser").css("display","none");$("#dscheckMySQLConnectionInfoPassword").css("display","none");$("#dscheckConfigurationAgentId").css("display","none");$("#dscheckConfigurationTargetId").css("display","none")};d.resetFields=function(){d.datastore.Name="";d.datastore.Priority="";d.datastore.MaximumSize="";d.datastore.CurrentSize="";d.datastore.AutoEviction=false;d.datastore.ReadOnly=false;d.datastore.Path="";d.datastore.MaxFileDepth="";d.datastore.MaxItems="";d.datastore.Provider="";d.datastore.Identity="";d.datastore.Credential="";d.datastore.Url="";d.datastore.Region="";d.datastore.Container="";d.datastore.ServiceUrl="";d.datastore.Login="";d.datastore.Password="";d.datastore.RepoLocation="";d.datastore.HFSLocation="";d.datastore.MaxQueuedRequest="";d.datastore.QuotasMaxQueryPerUser="";d.datastore.QuotasTimespan="";d.datastore.IsMaster="";d.datastore.MySQLConnectionInfoDatabaseUrl="";d.datastore.MySQLConnectionInfoUser="";d.datastore.MySQLConnectionInfoPassword="";d.datastore.ConfigurationAgentId="";d.datastore.ConfigurationTargetId=""};d.close=function(){$("#dsDetails").modal("hide")};d.linkEvictionToDatastore=function(){a.linkEvictionToDatastore(d.datastore.Eviction,d.datastore.Name)}}}}}}]);(function(){"use strict"})();angular.module("DHuS-webclient").factory("ODataDatastoreService",["$http",function(a){var b={model:null,datastoreUrl:"odata/v2/DataStores(':name')",getAllDatastoresUrl:"odata/v2/DataStores",evictionsUrl:"odata/v2/Evictions",expandParameter:"$expand=Eviction",formatParameter:"$format=json",requestHeaders:{"Content-Type":"application/json",Accept:"application/json"},evictions:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.evictionsUrl+"?$select=Name&"+b.formatParameter,method:"GET",headers:b.requestHeaders})},checkCurrentDataStore:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.getAllDatastoresUrl+"('"+b+"')? "+c.expandParameter,method:"GET",headers:c.requestHeaders})},linkEvictionToDatastore:function(b,c){var d=this;return a({url:ApplicationConfig.baseUrl+d.getAllDatastoresUrl+"('"+c+"')/Eviction/$ref",method:"PATCH",data:{"@odata.id":"Evictions('"+b+"')"},headers:d.requestHeaders})},getDatastoreList:function(){var b=this;return a({url:ApplicationConfig.baseUrl+b.getAllDatastoresUrl+"?"+b.formatParameter,method:"GET",headers:b.requestHeaders})},createDatastore:function(b){var c=this;var d=DatastoreUtils.getOdataFromDatastoreType(b.Type);switch(b.Type){case"Open Stack Data Store":return a({url:ApplicationConfig.baseUrl+c.getAllDatastoresUrl,method:"POST",data:{"@odata.type":d,Name:b.Name,ReadOnly:b.ReadOnly,Priority:b.Priority,MaximumSize:b.MaximumSize,CurrentSize:b.CurrentSize,AutoEviction:b.AutoEviction,Provider:b.Provider,Identity:b.Identity,Credential:b.Credential,Url:b.Url,Region:b.Region,Container:b.Container},headers:c.requestHeaders});case"HFS Data Store":return a({url:ApplicationConfig.baseUrl+c.getAllDatastoresUrl,method:"POST",data:{"@odata.type":d,Name:b.Name,ReadOnly:b.ReadOnly,Priority:b.Priority,MaximumSize:b.MaximumSize,CurrentSize:b.CurrentSize,AutoEviction:b.AutoEviction,Path:b.Path,MaxFileDepth:b.MaxFileDepth,MaxItems:b.MaxItems},headers:c.requestHeaders});case"DHuS Remote Data Store":return a({url:ApplicationConfig.baseUrl+c.getAllDatastoresUrl,method:"POST",data:{"@odata.type":d,Name:b.Name,ServiceUrl:b.ServiceUrl,Login:b.Login,Password:b.Password,Priority:b.Priority,ReadOnly:b.ReadOnly},headers:c.requestHeaders});case"GMP Data Store":return a({url:ApplicationConfig.baseUrl+c.getAllDatastoresUrl,method:"POST",data:{"@odata.type":d,Name:b.Name,Priority:b.Priority,ReadOnly:b.ReadOnly,MaximumSize:b.MaximumSize,CurrentSize:b.CurrentSize,AutoEviction:b.AutoEviction,RepoLocation:b.RepoLocation,HFSLocation:b.HFSLocation,MaxQueuedRequest:b.MaxQueuedRequest,Quotas:{MaxQueryPerUser:b.Quotas.MaxQueryPerUser,Timespan:b.Quotas.Timespan},IsMaster:true,MySQLConnectionInfo:{DatabaseUrl:b.MySQLConnectionInfo.DatabaseUrl,User:b.MySQLConnectionInfo.User,Password:b.MySQLConnectionInfo.Password},Configuration:{AgentId:b.Configuration.AgentId,TargetId:b.Configuration.TargetId}},headers:c.requestHeaders});default:console.warn("can't identify Type!!! for:",b);break}},readDatastore:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.datastoreUrl.replace(":name",b)+"?"+c.formatParameter,method:"GET"})},updateDatastore:function(b,c){var d=this;c["@odata.type"]=DatastoreUtils.getOdataFromDatastoreType(c.Type);c.Type=undefined;c.Eviction=undefined;c.CurrentEviction=undefined;c.evictions=undefined;return a({url:ApplicationConfig.baseUrl+d.datastoreUrl.replace(":name",b),method:"PATCH",data:c,headers:d.requestHeaders})},deleteDatastore:function(b){var c=this;return a({url:ApplicationConfig.baseUrl+c.datastoreUrl.replace(":name",b),method:"DELETE",headers:c.requestHeaders})}};return b}]);var DatastoreUtils={getDatastoreTypeFromOdata:function(a){var b={};switch(a){case"#OData.DHuS.OpenStackDataStore":b="Open Stack Data Store";break;case"#OData.DHuS.HFSDataStore":b="HFS Data Store";break;case"#OData.DHuS.RemoteDHuSDataStore":b="DHuS Remote Data Store";break;case"#OData.DHuS.GMPDataStore":b="GMP Data Store";break;default:console.warn("cant identify Odata Datastore Type!!!",a);break}return b},getOdataFromDatastoreType:function(a){var b={};switch(a){case"Open Stack Data Store":b="#OData.DHuS.OpenStackDataStore";break;case"HFS Data Store":b="#OData.DHuS.HFSDataStore";break;case"DHuS Remote Data Store":b="#OData.DHuS.RemoteDHuSDataStore";break;case"GMP Data Store":b="#OData.DHuS.GMPDataStore";break;default:console.warn("cant identify Type!!!",a);break}return b}};angular.module("DHuS-webclient").run(["$templateCache",function(a){"use strict";a.put("application_layout.html","\x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div> <alert-manager></alert-manager> <toast-manager></toast-manager> \x3c!-- bof toolbar --\x3e <div id="dhus-toolbar-container"> <dhus-toolbar></dhus-toolbar> \x3c!-- <navbar></navbar> --\x3e </div> \x3c!-- eof toolbar --\x3e \x3c!-- bof section container --\x3e <div id="page-container" class="container page-container"> <div class="slide" ng-view></div> </div> <product-details></product-details> <spinner-manager></spinner-manager> <user-dialog></user-dialog> \x3c!-- eof section container --\x3e \x3c!-- map component --\x3e \x3c!--<div ng-show="showMap">--\x3e \x3c!--<dhus-map ></dhus-map>--\x3e \x3c!--<div id="search-box-container" >--\x3e \x3c!--<search-box></search-box>--\x3e \x3c!--</div>--\x3e \x3c!--</div>--\x3e </div>');a.put("sections/admin-odata-synchronizer/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div> <style type="text/css"></style> <odata-synchronizer-list> </odata-synchronizer-list> </div> </div>');a.put("sections/check-reset/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.nomap {\n"+"        padding: 0;\n"+"        margin: 0;\n"+"        background-color: black;\n"+"        position: fixed;\n"+"        width: 100%;\n"+"        height:100%;\n"+"        z-index: 10;\n"+"        \n"+"    }\n"+"\n"+"    .fab-map {\n"+"          vertical-align: middle;\n"+"          margin-top: 50px;          \n"+"          padding: 15px;\n"+"          line-height: 20px;\n"+"          font-size: 15px;\n"+"          position: relative;\n"+"          float: right;\n"+"          display: block;\n"+"          height: 56px;\n"+"          width: 56px;\n"+"          color: #fff;\n"+"          fill: currentColor;\n"+"          cursor: pointer;\n"+"          text-decoration: none;            \n"+"          border-radius: 50%;          \n"+"          overflow: hidden;                \n"+"          background-color: #373B50;\n"+"          box-shadow: 3px 5px 19px 0 rgba(49,50,50,.62) !important;\n"+"      }\n"+"    .bgimage {\n"+"      \t/*background-image: url('images/bg_s3.jpg');*/\n"+"    \tbackground-size: cover;\n"+"    \tbackground-repeat: no-repeat;\n"+"    \twidth: 100%;\n"+"    \theight: 100%;\n"+"    \tposition: fixed;\n"+"      }</style> </div> </div>");a.put("sections/example/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <h1>hello from example!</h1> </div>");a.put("sections/forgot-password/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <style type="text/css">.user-button {\n'+"    background-color: rgb(55, 59, 80)!important;\n"+"    vertical-align: middle;\n"+"    margin-top: 12px;\n"+"    line-height: 20px;\n"+"    font-size: 14px;\n"+"    margin-left: 20px;\n"+"    position: relative;\n"+"    float: right;\n"+"    padding: 10px;\n"+"    cursor: pointer;\n"+"    color:white;\n"+"    text-decoration: none;\n"+"\n"+"}\n"+".user-button:hover{\n"+"    color:white;\n"+"    text-decoration: none;\n"+"}\n"+".user-button:visited{\n"+"    color:white;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+"h3{\n"+"  text-align: center;\n"+"}\n"+"hr{\n"+"  width: 80%;\n"+"  border: 0px;\n"+"}\n"+"\n"+".group            { \n"+"  position:relative; \n"+"  margin-bottom:35px; \n"+"}\n"+"input               {\n"+"  font-size:13px;\n"+"  padding:10px 10px 10px 5px;\n"+"  display:block;\n"+"  width:100%;\n"+"  border:none;\n"+"  border-bottom:1px solid #757575;\n"+"}\n"+"input:focus         { outline:none; }\n"+"\n"+"/* LABEL ======================================= */\n"+"label                {\n"+"  color:#999; \n"+"  font-size:13px;\n"+"  font-weight:normal;\n"+"  position:absolute;\n"+"  pointer-events:none;  \n"+"  top:-15px;\n"+"  display: none;\n"+"  transition:0.2s ease all; \n"+"  -moz-transition:0.2s ease all; \n"+"  -webkit-transition:0.2s ease all;\n"+"}\n"+"\n"+"\n"+"input:invalid ~ .invalid-field{\n"+"    display: inline-block !important;\n"+"}\n"+"\n"+".invalid-field {\n"+"  display:none;\n"+"  color: rgb(255,110,64);\n"+"  top: 45px;\n"+"  font-size: 9px;\n"+"}\n"+"\n"+"\n"+"/* BOTTOM BARS ================================= */\n"+".bar    { position:relative; display:block; width:100%; }\n"+".bar:before, .bar:after     {\n"+"  content:'';\n"+"  height:2px; \n"+"  width:0;\n"+"  bottom:1px; \n"+"  position:absolute;\n"+"  background:rgb(55, 59, 80); \n"+"  transition:0.2s ease all; \n"+"  -moz-transition:0.2s ease all; \n"+"  -webkit-transition:0.2s ease all;\n"+"}\n"+".bar:before {\n"+"  left:50%;\n"+"}\n"+".bar:after {\n"+"  right:50%; \n"+"}\n"+"\n"+"/* active state */\n"+"input:focus ~ .bar:before, input:focus ~ .bar:after {\n"+"  width:50%;\n"+"}\n"+"\n"+"/* HIGHLIGHTER ================================== */\n"+".highlight {\n"+"  position:absolute;\n"+"  height:60%; \n"+"  width:100px; \n"+"  top:25%; \n"+"  left:0;\n"+"  pointer-events:none;\n"+"  opacity:0.5;\n"+"}\n"+"\n"+"/* active state */\n"+"input:focus ~ .highlight {\n"+"  -webkit-animation:inputHighlighter 0.3s ease;\n"+"  -moz-animation:inputHighlighter 0.3s ease;\n"+"  animation:inputHighlighter 0.3s ease;\n"+"}\n"+"\n"+"\n"+"/* ANIMATIONS ================ */\n"+"@-webkit-keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"@-moz-keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"@keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"\n"+".gotomap {\n"+"  top: 20px;\n"+'}</style> <div class="container"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8"> <h3>Forgot Password</h3> </div> <div class="col-md-1 col-sd-3 col-xs-3 gotomap"><gotomap-button></gotomap-button></div> </div> <hr> <div class="row"> <div class="col-md-12"> <b>Please fill this form to receive a link that will allow you to set a new password. </b> </div> </div> <hr> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="user.username" value="user.username" ng-change="checkUsername()" class="form-control" placeholder="Username"> <span class="highlight"></span> <span class="bar"></span> <label id="usernameLbl">Username</label> <span class="invalid-field" id="checkUsername">Username empty</span> </div> </div> </div> <hr> <div class="row"> <div class="group col-md-6"> <input id="email" type="text" ng-model="user.email" value="user.email" ng-change="checkEmail()" class="form-control" placeholder="E-mail"> <span class="highlight"></span> <span class="bar"></span> <label id="emailLbl">E-mail</label> <span class="invalid-field" id="checkEmail">E-mail not valid</span> </div> <div class="group col-md-6"> <input id="confirmemail" type="text" ng-model="user.confirmemail" ng-change="checkConfimEmail()" class="form-control" placeholder="Confirm E-mail"> <span class="highlight"></span> <span class="bar"></span> <label id="confirmEmailLbl" l>Confirm E-mail</label> <span class="invalid-field" id="checkConfirmEmail">E-mail doesn\'t match</span> </div> </div> <hr> <div class="row" style="text-align:right"> <div class="user-button" ng-click="retrievePassword()">SEND</div> </div> <hr> </div> </div>');a.put("sections/main/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>.nomap {\n"+"        padding: 0;\n"+"        margin: 0;\n"+"        background-color: black;\n"+"        position: fixed;\n"+"        width: 100%;\n"+"        height:100%;\n"+"        z-index: 10;\n"+"\n"+"    }\n"+"\n"+"    .fab-map {\n"+"          vertical-align: middle;\n"+"          margin-top: 110px;\n"+"          padding: 10px;\n"+"          line-height: 20px;\n"+"          font-size: 15px;\n"+"          position: relative;\n"+"          float: right;\n"+"          display: block;\n"+"          height: 46px;\n"+"          width: 46px;\n"+"          color: #fff;\n"+"          fill: currentColor;\n"+"          cursor: pointer;\n"+"          text-decoration: none;\n"+"          border-radius: 50%;\n"+"          overflow: hidden;\n"+"          box-shadow: 3px 5px 19px 0 rgba(49,50,50,.62) !important;\n"+"          background-color: #373B50;\n"+"      }\n"+"    .bgimage {\n"+"      \t/*background-image: url('images/bg_s3.jpg');*/\n"+"    \tbackground-size: cover;\n"+"    \tbackground-repeat: no-repeat;\n"+"    \twidth: 100%;\n"+"    \theight: 100%;\n"+"    \tposition: fixed;\n"+'      }</style> \x3c!-- style="background: url(\'images/bg_s3.jpg\') no-repeat scroll center center / 100% auto #000024" --\x3e <div ng-if="showmap"><dhus-map></dhus-map></div> <div ng-if="!showmap" class="nomap bgimage"><img id="bgimage" src="" class="bgimage"></div> <list-container></list-container> <div id="search-box-container"> <search-box></search-box> </div> <div advanced-search></div> <div cart-menu></div> <div info-badge></div> <div info-element></div> <div ng-if="showmap" map-graticule></div> \x3c!-- <div style="position:fixed; background-color: red; width: 100px; height:500px;    z-index: 999;"></div> --\x3e </div> </div>');a.put("sections/management/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <style>.nav-tabs {\n"+"  overflow-y: auto;\n"+"  max-height: 42px;\n"+'}</style> <div style="overflow: hidden"> <ul class="nav nav-tabs"> <li ng-if="isUserManagement" class="active"><a data-toggle="tab" data-target="#mngusers">USERS</a></li> <li ng-if="isDataManagement"><a data-toggle="tab" data-target="#mngcollections">COLLECTIONS</a></li> <li ng-if="false"><a data-toggle="tab" data-target="#mngdataright">DATA RIGHT ACCESS</a></li> <li ng-if="isSystemManagement"><a data-toggle="tab" data-target="#mngsystem">SYSTEM</a></li> <li ng-if="isSystemManagement"><a data-toggle="tab" data-target="#mngeviction">EVICTION</a></li> <li ng-if="isSystemManagement"><a data-toggle="tab" data-target="#mngdatastore">DATA STORES</a></li> </ul> </div> <div class="tab-content"> <div ng-if="isUserManagement" id="mngusers" class="tab-pane fade in active"> <management-users></management-users> </div> <div ng-if="isDataManagement" id="mngcollections" class="tab-pane fade"> <management-collections></management-collections> </div> <div id="mngdataright" class="tab-pane fade"> <h3>Coming Soon</h3> </div> <div ng-if="isSystemManagement" id="mngsystem" class="tab-pane fade"> <system-panel-container></system-panel-container> </div> <div ng-if="isSystemManagement" id="mngeviction" class="tab-pane fade"> <eviction-container></eviction-container> </div> <div ng-if="isSystemManagement" id="mngdatastore" class="tab-pane fade"> <datastore-list></datastore-list> </div> </div> </div>')
;a.put("sections/reset-password/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <style type="text/css">.reset-button {\n'+"    background-color: rgb(55, 59, 80)!important;\n"+"    vertical-align: middle;\n"+"    margin-top: 12px;\n"+"    line-height: 20px;\n"+"    font-size: 14px;\n"+"    margin-left: 20px;\n"+"    position: relative;\n"+"    float: right;\n"+"    padding: 10px;\n"+"    cursor: pointer;\n"+"    color:white;\n"+"    text-decoration: none;\n"+"\n"+"}\n"+".reset-button:hover{\n"+"    color:white;\n"+"    text-decoration: none;\n"+"}\n"+".reset-button:visited{\n"+"    color:white;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+"h3{\n"+"  text-align: center;\n"+"}\n"+"hr{\n"+"  width: 80%;\n"+"  border: 0px;\n"+"}\n"+"\n"+".group            { \n"+"  position:relative; \n"+"  margin-bottom:35px; \n"+"}\n"+"input               {\n"+"  font-size:13px;\n"+"  padding:10px 10px 10px 5px;\n"+"  display:block;\n"+"  width:100%;\n"+"  border:none;\n"+"  border-bottom:1px solid #757575;\n"+"}\n"+"input:focus         { outline:none; }\n"+"\n"+"/* LABEL ======================================= */\n"+"label                {\n"+"  color:#999; \n"+"  font-size:13px;\n"+"  font-weight:normal;\n"+"  position:absolute;\n"+"  pointer-events:none;  \n"+"  top:-15px;\n"+"  display: none;\n"+"  transition:0.2s ease all; \n"+"  -moz-transition:0.2s ease all; \n"+"  -webkit-transition:0.2s ease all;\n"+"}\n"+"\n"+"\n"+"input:invalid ~ .invalid-field{\n"+"    display: inline-block !important;\n"+"}\n"+"\n"+".invalid-field {\n"+"  display:none;\n"+"  color: rgb(255,110,64);\n"+"  top: 45px;\n"+"  font-size: 9px;\n"+"}\n"+"\n"+"\n"+"/* BOTTOM BARS ================================= */\n"+".bar    { position:relative; display:block; width:100%; }\n"+".bar:before, .bar:after     {\n"+"  content:'';\n"+"  height:2px; \n"+"  width:0;\n"+"  bottom:1px; \n"+"  position:absolute;\n"+"  background:rgb(55, 59, 80); \n"+"  transition:0.2s ease all; \n"+"  -moz-transition:0.2s ease all; \n"+"  -webkit-transition:0.2s ease all;\n"+"}\n"+".bar:before {\n"+"  left:50%;\n"+"}\n"+".bar:after {\n"+"  right:50%; \n"+"}\n"+"\n"+"/* active state */\n"+"input:focus ~ .bar:before, input:focus ~ .bar:after {\n"+"  width:50%;\n"+"}\n"+"\n"+"/* HIGHLIGHTER ================================== */\n"+".highlight {\n"+"  position:absolute;\n"+"  height:60%; \n"+"  width:100px; \n"+"  top:25%; \n"+"  left:0;\n"+"  pointer-events:none;\n"+"  opacity:0.5;\n"+"}\n"+"\n"+"/* active state */\n"+"input:focus ~ .highlight {\n"+"  -webkit-animation:inputHighlighter 0.3s ease;\n"+"  -moz-animation:inputHighlighter 0.3s ease;\n"+"  animation:inputHighlighter 0.3s ease;\n"+"}\n"+"\n"+"\n"+"/* ANIMATIONS ================ */\n"+"@-webkit-keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"@-moz-keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"@keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"\n"+".gotomap {\n"+"  top: 20px;\n"+"}\n"+"\n"+"#reset-password-page {\n"+"  padding-top: 60px;\n"+'}</style> <div id="reset-password-page" class="container"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8"> <h3>Reset Password</h3> </div> <div class="col-md-1 col-sd-3 col-xs-3 gotomap"><gotomap-button></gotomap-button></div> </div> <hr> <div class="row"> <div class="col-md-12"> <b>Please fill this form to reset your password. </b> <br> Password field accepts only alphanumeric characters plus "!", "@", "#", "$", "%", "^", "&", "*", ")", "(", "+", "=", ".", "_", "-".<br> Password fields minimum length is 8 characters. </div> </div> <hr> <div class="row"> <div class="group col-md-6"> <input id="reset-password" type="password" ng-model="password" ng-change="checkPwd()" class="form-control" placeholder="Password"> <span class="highlight"></span> <span class="bar"></span> <label id="reset-pwdLbl">Password</label> <span class="invalid-field" id="reset-checkPasswordLength">Password too short. Minimum 8 characters.</span> <span class="invalid-field" id="reset-checkPassword">Password empty</span> <span class="invalid-field" id="reset-checkPasswordNonLatin">Password cannot contain special characters</span> </div> <div class="group col-md-6"> <input id="reset-confirmpassword" type="password" ng-model="confirmpwd" ng-change="checkConfirmPwd()" class="form-control" placeholder="Confirm Password"> <span class="highlight"></span> <span class="bar"></span> <label id="reset-confirmPwdLbl">Confirm Password</label> <span class="invalid-field" id="reset-checkConfirmPassword">Password doesn\'t match</span> </div> </div> <hr> <div class="row" style="text-align:right"> <div class="reset-button" ng-click="resetPassword()">SEND</div> </div> <hr> </div> </div>');a.put("sections/self-registration/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <style type="text/css">.user-button {\n'+"    background-color: rgb(55, 59, 80)!important;\n"+"    vertical-align: middle;\n"+"    margin-top: 12px;\n"+"    line-height: 20px;\n"+"    font-size: 14px;\n"+"    margin-left: 20px;\n"+"    position: relative;\n"+"    float: right;\n"+"    padding: 10px;\n"+"    cursor: pointer;\n"+"    color:white;\n"+"    text-decoration: none;\n"+"\n"+"}\n"+".user-button:hover{\n"+"    color:white;\n"+"    text-decoration: none;\n"+"}\n"+".user-button:visited{\n"+"    color:white;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+"h3{\n"+"  text-align: center;\n"+"}\n"+"hr{\n"+"  width: 80%;\n"+"  border: 0px;\n"+"}\n"+"\n"+".group            { \n"+"  position:relative; \n"+"  margin-bottom:35px; \n"+"}\n"+"input               {\n"+"  font-size:13px;\n"+"  padding:10px 10px 10px 5px;\n"+"  display:block;\n"+"  width:100%;\n"+"  border:none;\n"+"  border-bottom:1px solid #757575;\n"+"}\n"+"input:focus         { outline:none; }\n"+"\n"+"/* LABEL ======================================= */\n"+"label                {\n"+"  color:#999; \n"+"  font-size:13px;\n"+"  font-weight:normal;\n"+"  position:absolute;\n"+"  pointer-events:none;  \n"+"  top:-15px;\n"+"  display: none;\n"+"  transition:0.2s ease all; \n"+"  -moz-transition:0.2s ease all; \n"+"  -webkit-transition:0.2s ease all;\n"+"}\n"+"\n"+"/* active state */\n"+"\n"+"/**input:focus ~ label{\n"+"  top:-15px;\n"+"  font-size:13px;\n"+"  color: rgb(55, 59, 80);\n"+"}**/\n"+"\n"+"input:invalid ~ .invalid-field{\n"+"    display: inline-block !important;\n"+"}\n"+"\n"+".invalid-field {\n"+"  display:none;\n"+"  color: rgb(255,110,64);\n"+"  top: 45px;\n"+"  font-size: 9px;\n"+"}\n"+"\n"+".select-label {\n"+"  display:none;  \n"+"  top: -20px;\n"+"  color: rgb(55, 59, 80);\n"+"  font-size: 13px;\n"+"}\n"+"\n"+"/* BOTTOM BARS ================================= */\n"+".bar    { position:relative; display:block; width:100%; }\n"+".bar:before, .bar:after     {\n"+"  content:'';\n"+"  height:2px; \n"+"  width:0;\n"+"  bottom:1px; \n"+"  position:absolute;\n"+"  background:rgb(55, 59, 80); \n"+"  transition:0.2s ease all; \n"+"  -moz-transition:0.2s ease all; \n"+"  -webkit-transition:0.2s ease all;\n"+"}\n"+".bar:before {\n"+"  left:50%;\n"+"}\n"+".bar:after {\n"+"  right:50%; \n"+"}\n"+"\n"+"/* active state */\n"+"input:focus ~ .bar:before, input:focus ~ .bar:after {\n"+"  width:50%;\n"+"}\n"+"\n"+"/* HIGHLIGHTER ================================== */\n"+".highlight {\n"+"  position:absolute;\n"+"  height:60%; \n"+"  width:100px; \n"+"  top:25%; \n"+"  left:0;\n"+"  pointer-events:none;\n"+"  opacity:0.5;\n"+"}\n"+"\n"+"/* active state */\n"+"input:focus ~ .highlight {\n"+"  -webkit-animation:inputHighlighter 0.3s ease;\n"+"  -moz-animation:inputHighlighter 0.3s ease;\n"+"  animation:inputHighlighter 0.3s ease;\n"+"}\n"+"\n"+"/* Style Select Field */\n"+"select {\n"+"  font-family: inherit;\n"+"  background-color: transparent;\n"+"  width: 100%;\n"+"  padding: 8px 0;\n"+"  font-size: 13px;  \n"+"  border: none;\n"+"  border-bottom: 1px solid rgb(0,0,0);\n"+"}\n"+"\n"+"/* Remove focus */\n"+"select:focus {\n"+"  outline: none;\n"+"}\n"+"\n"+"/* Hide label */\n"+".mdl-selectfield label {display:none;}\n"+"/* Use custom arrow */\n"+"\n"+".mdl-selectfield {\n"+"  font-family: 'Roboto','Helvetica','Arial',sans-serif;\n"+"  position: relative;    \n"+"}\n"+"\n"+".mdl-selectfield::after {  \n"+"        position: absolute;\n"+"        top: 0.75em;\n"+"        right: 0.5em;\n"+"        /* Styling the down arrow */\n"+"        width: 0;\n"+"        height: 0;\n"+"        padding: 0;\n"+"        content: '';\n"+"        border-left: .25em solid transparent;\n"+"        border-right: .25em solid transparent;\n"+"        border-top: .375em solid rgba(0,0,0, 1);\n"+"        pointer-events: none;   \n"+"        color: black;     \n"+"  \n"+"}\n"+"\n"+".mdl-selectfield select {-webkit-appearance: none;\n"+"                         -moz-appearance: none;}\n"+"\n"+".mdl-selectfield select::-ms-expand {display: none;}                         \n"+"\n"+"/* ANIMATIONS ================ */\n"+"@-webkit-keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"@-moz-keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"@keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"\n"+".terms{\n"+"  text-align: center;\n"+"  padding: 20px 0px;\n"+"  font-weight: bold;\n"+"}\n"+".terms > a {\n"+"    color: #23527c;\n"+"}\n"+"\n"+".form-control {\n"+"    border: none;            \n"+"    border-radius: 0px !important;\n"+"    border-bottom:1px solid #757575;\n"+"    box-shadow: none !important;\n"+"}\n"+".gotomap {\n"+"  top: 20px;\n"+'}</style> <div class="container"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-xs-8 col-sd-8"> <h3>Register new account</h3> </div> <div class="col-md-1 col-sd-3 col-xs-3 gotomap"><gotomap-button></gotomap-button></div> </div> <hr> <div class="row"> <div class="col-md-12"> <b>Sentinel data access is free and open to all.</b><br><br> On completion of the registration form below you will receive an e-mail with a link to validate your e-mail address. Following this you can start to download the data.<br> Username field accepts only lowercase alphanumeric characters plus ".", "-" and "_".<br> Password field accepts only alphanumeric characters plus "!", "@", "#", "$", "%", "^", "&", "*", ")", "(", "+", "=", ".", "_", "-".<br> Password fields minimum length is 8 characters. </div> </div> <hr> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="user.firstname" value="user.firstname" ng-change="checkName()" class="form-control" placeholder="Firstname"> <span class="highlight"></span> <span class="bar"></span> <label id="firstnameLbl">Firstname</label> <span class="invalid-field" id="checkName">Firstname empty</span> </div> </div> <div class="group col-md-6"> <div> <input type="text" ng-model="user.lastname" value="user.lastname" ng-change="checkLastname()" class="form-control" placeholder="Lastname"> <span class="highlight"></span> <span class="bar"></span> <label id="lastnameLbl">Lastname</label> <span class="invalid-field" id="checkLastname">Lastname empty</span> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="user.username" value="user.username" ng-change="checkUsername()" class="form-control" placeholder="Username" ng-trim="false"> <span class="highlight"></span> <span class="bar"></span> <label id="usernameLbl">Username</label> <span class="invalid-field" id="checkUsername">Username empty</span> <span class="invalid-field" id="checkUsernameInvalid">Username contains illegal characters.</span> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <input id="password" type="password" ng-model="user.password" ng-change="checkPwd()" class="form-control" placeholder="Password"> <span class="highlight"></span> <span class="bar"></span> <label id="pwdLbl">Password</label> <span class="invalid-field" id="checkPasswordLength">Password too short. Minimum 8 characters.</span> <span class="invalid-field" id="checkPassword">Password empty</span> <span class="invalid-field" id="checkPasswordNonLatin">Password cannot contain special characters</span> </div> <div class="group col-md-6"> <input id="confirmpassword" type="password" ng-model="user.confirmpwd" ng-change="checkConfimPwd()" class="form-control" placeholder="Confirm Password"> <span class="highlight"></span> <span class="bar"></span> <label id="confirmPwdLbl">Confirm Password</label> <span class="invalid-field" id="checkConfirmPassword">Password doesn\'t match</span> </div> </div> <div class="row"> <div class="group col-md-6"> <input id="email" type="text" ng-model="user.email" value="user.email" ng-change="checkEmail()" class="form-control" placeholder="E-mail"> <span class="highlight"></span> <span class="bar"></span> <label id="emailLbl">E-mail</label> <span class="invalid-field" id="checkEmail">E-mail not valid</span> </div> <div class="group col-md-6"> <input id="confirmemail" type="text" ng-model="user.confirmemail" ng-change="checkConfimEmail()" class="form-control" placeholder="Confirm E-mail"> <span class="highlight"></span> <span class="bar"></span> <label id="confirmEmailLbl" l>Confirm E-mail</label> <span class="invalid-field" id="checkConfirmEmail">E-mail doesn\'t match</span> </div> </div> <div class="row"> <div class="group col-md-6"> <div class="mdl-selectfield"> <label id="domainLbl" class="select-label">Select Domain</label> <select class="browser-default" ng-model="user.domain" ng-change="checkDomain()"> <option value="unknown" disabled selected>Select Domain</option> <option value="{{domain}}" ng-repeat="domain in domains">{{domain}}</option> </select> </div> <span class="invalid-field" id="checkDomain">Domain empty</span> </div> <div class="group col-md-6" id="subdomain"> <input id="domainDesc" style="display:none !important" type="text" ng-model="user.subDomain" value="user.subDomain" ng-change="checkSubDomain()" class="form-control" placeholder="Domain"> <span class="highlight"></span> <span class="bar"></span> <label id="domainLabel">Domain</label> <span class="invalid-field" id="checkSubDomain">Domain empty</span> </div> </div> <div class="row"> <div class="group col-md-6"> <div class="mdl-selectfield"> <label id="usageLbl" class="select-label">Select Usage</label> <select class="browser-default" ng-model="user.usage" ng-change="checkUsage()"> <option value="unknown" disabled selected>Select Usage</option> <option value="{{usage}}" ng-repeat="usage in usages">{{usage}}</option> </select> </div> <span class="invalid-field" id="checkUsage">Usage empty</span> </div> <div class="group col-md-6" id="subusage"> <input id="usageDesc" style="display:none !important" type="text" ng-model="user.subUsage" value="user.subUsage" ng-change="checkSubUsage()" class="form-control" placeholder="Usage"> <span class="highlight"></span> <span class="bar"></span> <label id="usageLabel">Usage</label> <span class="invalid-field" id="checkSubUsage">Usage empty</span> </div> </div> <div class="row"> <div class="group col-md-6"> <div class="mdl-selectfield"> <label id="countryLbl" class="select-label">Select your country</label> <select id="country" class="browser-default" ng-model="user.country" ng-change="checkCountry()"> <option value="unknown" disabled selected>Select your country</option> <option value="{{country.name}}" ng-repeat="country in countries">{{country.name}}</option> </select> </div> <span class="invalid-field" id="checkCountry">Country empty</span> </div> </div> <div class="row"> <div class="col-md-12 terms"> By registering in this website you are deemed to have accepted the <a href="{{TandCLink}}" target="_blank">T&C for Sentinel data use</a>. </div> </div> <div class="row" style="text-align:right"> <div class="user-button" ng-click="register()">REGISTER</div> </div> <hr> </div> </div>');a.put("sections/terms-conditions/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>#terms .row{\n"+"\t\t\tpadding: 5px 0;\n"+"\t\t}\n"+"\t\t#terms .container{\n"+"\t\t\ttext-align: left;\n"+"\t\t  \tpadding-top: 40px;\n"+"\t\t  \tpadding-bottom: 40px;\n"+"\t\t}\n"+"\t\t#terms h3{\n"+"\t\t\ttext-align: center;\n"+"\t\t}\n"+"\n"+"\t\t.gotomap {\n"+"\t\t\ttop: 20px;\n"+'\t\t}</style> <div id="terms" class="container"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8"> <h3>Terms of {{title}} portal and Data supply conditions</h3> </div> <div class="col-md-1 col-sd-3 col-xs-3 gotomap"><gotomap-button></gotomap-button></div> </div> <div class="row"> 1. Introduction The Copernicus program is a cooperation of the European Union and the European Space Agency (ESA) for Earth observation. ESA coordinates the acquisition and delivery of Earth observation data from space. Starting with the successful launch of Sentinel-1A in 2014, the series of Sentinel satellites will deliver a wide range of data for environmental and civil security purposes. Under the ESA – European Community GMES Agreement of 28 February 2008, as amended subsequently, the agency is charged with managing the GMES Space Component (GSC) Programme. A new agreement to be concluded between ESA and the European Union (EU), consistent with the EU Copernicus Regulation, will provide the legal framework for the continuation of ESA’s activities related to the Copernicus Space Component. </div> <div class="row"> 2. Data supply The Sentinel Data Hub is an ESA online portal, which makes Sentinel data available to individuals and entities worldwide. The portal allows the searching for Sentinel data and the download of Sentinel data, selected by the user. </div> <div class="row"> 3. Copyrights Any Sentinel data available through the Sentinel Data Hub will be governed by the Terms and Conditions of the use and distribution of Sentinel data, which the User is deemed to have accepted by using the Sentinel data. Any other contents of ESA\'s Sentinel Data Hub website are intended for non-commercial use. ESA grants permission to users to visit the site, and to download and copy information, images, documents and materials from the website for non-commercial use. ESA does not grant the right to resell or redistribute any information, documents, images or material from its website or to compile or create derivative works from material on its website. Use of material on the website is subject to the terms and conditions outlined below. All material published on the ESA Sentinel Online website is protected by copyright and owned or controlled by ESA or the party credited as the provider of the content, software or other material. Copyright in the material must be recognised by an appropriate on-screen credit in a form such as "European Space Agency - ESA". If a remote sensing product is being used, the credit "produced from ESA remote sensing data" must be added, plus, if applicable, "image processed by (name of the institution as indicated on the Internet Server)". </div> <div class="row"> 4. User registration To access Sentinel data at the Sentinel Data Hub portal, individuals and entities need to register as a user and provide information to ESA. Through the registration, the user will be granted a password to access Sentinel data. </div> <div class="row"> 5. Personal data privacy When the user accesses ESA\'s Sentinel Data Hub website, registers as a user or downloads content, certain information about users, such as internet protocol (IP) addresses, data downloaded, pages visited, software used and time spent, as well as other similar information, will be stored on ESA servers. The collected information will be used by ESA only for the traffic analysis of the webpage, as well as for monitoring, reporting and communication regarding the distribution and use of Sentinel data towards ESA internal bodies, ESA Member States, the European Union and the general public. Whenever sharing user information with individuals or entities other than ESA, the data will be dealt with anonymously. </div> <div class="row"> 6. Use of cookies Cookies are pieces of information that a website transfers to an individual hard drive for record-keeping purposes; passwords are not saved in cookies. Cookies help ESA to know which pages are visited most often and helps ESA to ensure that its website responds to users\' needs. If you do not wish to receive a cookie, or if you wish your browser to notify you when you receive a cookie, you may use the option on your web browser to disable cookies. Click on the \'help\' section of your browser to learn how to change cookie preferences. However, please note that if you disable all cookies you may not be able to take advantage of all the features available on this website. ESA does not use personal identification details transferred through cookies either for promotion or marketing purposes, nor will such information be shared with a third party. </div> <div class="row"> 7. Availability of the Service ESA will make best efforts to provide the Sentinel data access service through the Sentinel data Hub. It is understood and recognised by all individuals and entities having accepted these Data Supply Conditions, that ESA is not in a position to guarantee the availability of Sentinel data through the Sentinel Data Hub. In particular, ESA reserves the right to review, modify, suspend or terminate the provision of Sentinel data through the Sentinel Data Hub at any time in the event: of technical capacity constraints due to the number of user requests of lack of sufficient funding for sustaining Sentinel missions, and associated facilities and activities, that satellite or ground system failure occurs, that planned activities of related Sentinel systems and facilities are suspended or cancelled in order for ESA to carry out activities considered of a higher priority. The operating entity, i.e. ESA, may modify the Sentinels’ operations plans at any time, should it consider such corrective action necessary for ensuring the missions safety and success. </div> <div class="row"> 8. Waiver of Liability With regard to the service offered by ESA through the Sentinel Data Hub portal, the user shall have no claim against ESA, its employees, related entities or employees of such entities, with respect to any injury to, or death of its own employees or employees of related entities or for damage to or loss of its own property or that of its related entities, whether such injury, death, damage or loss arise through negligence or otherwise, except in the case of gross negligence or wilful misconduct. </div> <div class="row"> 9. Use of the Sentinel Data Hub By registering at the Sentinel Data Hub portal, accessing and\\or downloading available Sentinel data, the user shall act in good faith and shall not misuse or interfere the service of the portal. </div> </div> </div> </div>')
;a.put("sections/upload-product/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <style>.borderdiv {\n"+"\t\t\tborder: inset;\n"+"\t\t\tborder-radius: 20px;\n"+"\t\t}\n"+"\n"+"\t\t.bordertextarea {\n"+"\t\t\tbackground: #B0B0B0 !important;\n"+"\t\t}\n"+"\n"+"\t\t.upload-button {\n"+"\t\t\tborder-radius: 0px;\n"+"\t\t\tvertical-align: middle;\n"+"\t\t\tmargin-bottom: 20px;\n"+"\t\t\tline-height: 20px;\n"+"\t\t\tfont-weight: bold;\n"+"\t\t\tposition: relative;\n"+"\t\t\ttext-decoration: none;\n"+"\t\t\ttext-align: center;\n"+"\t\t\tbackground-color: rgb(55, 59, 80);\n"+"\t\t\tcolor: white;\n"+"\t\t\tcursor: pointer;\n"+"\t\t\tmargin-top: 10px;\n"+"\t\t\tfont-size: 1.5vw;\n"+"\t\t}\n"+"\n"+"\t\t.icon {\n"+"\t\t\tfloat: right;\n"+"\t\t\tmargin-right: 10px;\n"+"\t\t\tpadding: 7px;\n"+"\t\t}\n"+"\n"+"\t\t.icon:hover {\n"+"\t\t\t/*background-color: rgb(55, 59, 80) !important;\n"+"        color: white !important;*/\n"+"\t\t\tcursor: pointer !important;\n"+"\t\t\tcolor: black !important;\n"+"\t\t}\n"+"\n"+"\t\t.user-button {\n"+"\t\t\tbackground-color: rgb(55, 59, 80) !important;\n"+"\t\t\tvertical-align: middle;\n"+"\t\t\tmargin-top: 12px;\n"+"\t\t\tline-height: 20px;\n"+"\t\t\tfont-size: 14px;\n"+"\t\t\tmargin-left: 5px;\n"+"\t\t\tposition: relative;\n"+"\t\t\tpadding: 10px;\n"+"\t\t\tcursor: pointer;\n"+"\t\t\tcolor: white;\n"+"\t\t\ttext-decoration: none;\n"+"\t\t\ttext-align: center;\n"+"\t\t}\n"+"\n"+"\t\t.user-button:hover {\n"+"\t\t\tcolor: white;\n"+"\t\t\ttext-decoration: none;\n"+"\t\t}\n"+"\n"+"\t\t.user-button:visited {\n"+"\t\t\tcolor: white;\n"+"\t\t\ttext-decoration: none;\n"+"\t\t}\n"+"\n"+"\t\t.visible {\n"+"\t\t\tdisplay: inline;\n"+"\t\t}\n"+"\n"+"\t\t.notVisible {\n"+"\t\t\tdisplay: none;\n"+"\t\t}\n"+"\n"+"\t\t#upload-management-page .showftp {\n"+"\t\t\tvisibility: visible !important;\n"+"\t\t}\n"+"\n"+"\t\t#upload-management-page .hideftp {\n"+"\t\t\tvisibility: hidden !important;\n"+"\t\t}\n"+"\n"+"\t\t.selectedColor {\n"+"\t\t\tbackground: yellow;\n"+"\t\t}\n"+"\n"+"\t\t.notSelectedColor {\n"+"\t\t\tbackground: green;\n"+"\t\t}\n"+"\n"+"\t\t.btn-file {\n"+"\t\t\tposition: relative;\n"+"\t\t\toverflow: hidden;\n"+"\t\t}\n"+"\n"+"\t\t.btn-file input[type=file] {\n"+"\t\t\tposition: absolute;\n"+"\t\t\ttop: 0;\n"+"\t\t\tright: 0;\n"+"\t\t\tmin-width: 100%;\n"+"\t\t\tmin-height: 100%;\n"+"\t\t\tfont-size: 100px;\n"+"\t\t\ttext-align: right;\n"+"\t\t\tfilter: alpha(opacity=0);\n"+"\t\t\topacity: 0;\n"+"\t\t\toutline: none;\n"+"\t\t\tbackground: white;\n"+"\t\t\tcursor: inherit;\n"+"\t\t\tdisplay: block;\n"+"\t\t}\n"+"\n"+"\t\t.fab-cart-disabled {\n"+"\t\t\tbackground-color: #afb1b9 !important;\n"+"\t\t\tcursor: default !important;\n"+"\t\t\tcolor: black !important;\n"+"\t\t}\n"+"\n"+"\t\t.notActive {\n"+"\t\t\tbackground: none !important;\n"+"\t\t}\n"+"\n"+"\t\t#upload-management-page header {\n"+"\t\t\twidth: 100%;\n"+"\t\t\theight: 60px;\n"+"\t\t\ttext-align: center;\n"+"\t\t\tfont-size: 22px;\n"+"\t\t\tfont-weight: bold;\n"+"\t\t\tpadding-top: 15px;\n"+"\t\t}\n"+"\n"+"\t\t#upload-management-page input:invalid~.invalid-field {\n"+"\t\t\tdisplay: inline-block !important;\n"+"\t\t}\n"+"\n"+"\t\t#upload-management-page .invalid-field {\n"+"\t\t\tdisplay: none;\n"+"\t\t\tcolor: rgb(255, 110, 64);\n"+"\t\t\ttop: 30px;\n"+"\t\t\tfont-size: 9px;\n"+"\t\t}\n"+"\n"+"\t\t@media screen and (max-width: 992px) {\n"+"\n"+"\t\t\t#showPassword {\n"+"\t\t\t\tdisplay: none;\n"+"\t\t\t}\n"+"\t\t}\n"+"\n"+"\t\t.next-filescanner-box {\n"+"\t\t\tbackground-color: #C8C8C8;\n"+"\t\t\tmargin: 20px;\n"+"\n"+'\t\t}</style> <div id="upload-management-page" class="container" ng-controller="UploadCtrl"> <header class="row" style="margin-top: auto"> <div class="col-md-1 col-sd-1 col-xs-1"> </div> <div class="col-md-10 col-sd-8 col-xs-8">Upload Management </div> <div id="gotomap" class="col-md-1 col-sd-3 col-xs-3"> <gotomap-button></gotomap-button> </div> </header> <div style="width: 70%;float:left"> <div class="row" style="margin-top: auto"> <div class="col-md-12 col-sd-12 col-xs-12"> <h3> Upload Product </h3> <div class="fileinput fileinput-new" data-provides="fileinput"> <span class="btn btn-default btn-file"><span>Choose file</span><input onchange="text = $(this).val();\n'+'                text = text.substring(text.lastIndexOf(&quot;\\\\&quot;) + 1, text.length);$(&quot;#upload-file-info&quot;).html(text);angular.element(this).scope().setIfSelectedFile(this)" type="file" file-model="fileToUpload"></span> <span id="upload-file-info" class="fileinput-filename">No file choosen</span> </div> </div> </div> <div class="row"> <div class="col-md-12 col-sd-12 col-xs-12"> <div ng-class="{\'\': isSelectedFile == true, \'fab-cart-disabled\': isSelectedFile == false}" class="user-button" style="float: right" ng-click="uploadProduct()">UPLOAD</div> </div> </div> <div class="row" style="margin-top: auto"> <div class="col-md-12 col-sd-12 col-xs-12"> <h3>File scanners</h3> <div class="row"> <div class="col-md-4 col-sd-4 col-xs-4" style="padding-left: 0px"> <label> <span>FtpScanner</span> </label> <input style="margin-left: 5px" ng-disabled="toggle" type="checkbox" ng-model="isFtp" ng-checked="false" title="Ftp Scanner" ng-click="cleanFields()"> </div> <div class="col-md-4 col-sd-4 col-xs-4"></div> <div class="col-md-4 col-sd-4 col-xs-4" style="text-align: right;padding-right: 25px"> <label> <span>SourceRemove</span> </label> <input type="checkbox" ng-model="isSourceRemove" title="Source Remove"> </div> </div> <div> <label>Url to scan</label> <input id="urltoscan" class="form-control page-selector-input" ng-model="urltoscan"> <label class="invalid-field" id="checkUrl">Url empty</label> </div> <label>Pattern</label> <input id="pattern" type="text" class="form-control page-selector-input" ng-model="pattern"> \x3c!-- Cron2 --\x3e <div class="row"> <div class="col-md-10 col-sd-10 col-xs-10" style="padding-left:0px"> <label>Schedule</label> </div> <div class="col-md-1 col-sd-1 col-xs-1" style="text-align: right;padding-left: 20px;padding-right:0px!important"> <label id="showPassword">isActive</label> </div> <div class="col-md-1 col-sd-1 col-xs-1" style="text-align: left;padding-left: 25px;padding-right:0px!important"> <input type="checkbox" ng-model="isCron" ng-checked="false" title="isActive"> </div> </div> <input id="cronValue" type="text" class="form-control page-selector-input" ng-model="cronValue"> <label ng-class="{\'hideftp\': isFtp==false, \'showftp\': isFtp==true}">Username</label> <input ng-class="{\'hideftp\': isFtp==false, \'showftp\': isFtp==true}" id="username" class="form-control page-selector-input" ng-model="username" autocomplete="false"> <div class="row" ng-class="{\'hideftp\': isFtp==false, \'showftp\': isFtp==true}"> <div class="col-md-10 col-sd-10 col-xs-10" style="padding-left:0px"> <label>Password</label> </div> <div class="col-md-1 col-sd-1 col-xs-1" style="text-align: right;padding-left: 35px;padding-right:0px!important"> <label id="showPassword">Show</label> </div> <div class="col-md-1 col-sd-1 col-xs-1" style="text-align: left;padding-left: 25px;padding-right:0px!important"> <input type="checkbox" ng-model="showpassword" ng-checked="false" title="Show Password"> </div> </div> <input ng-class="{\'hideftp\': isFtp==false, \'showftp\': isFtp==true}" id="password" type="{{showpassword ? \'text\' : \'password\'}}" class="form-control page-selector-input" placeholder="*********" ng-model="password" autocomplete="false"> <label>Scanning information</label> <textarea disabled class="bordertextarea form-control" ng-model="scanninginfo" rows="5" id="comment"></textarea> </div> </div> <div class="row" style="margin-top: auto"> <div class="col-md-12 col-sd-12 col-xs-12"> <div class="user-button" style="float: left" ng-click="refreshAllFilescanners()">REFRESH ALL</div> <div ng-class="{\'visible\': toggle==false, \'notVisible\': toggle==true}" class="user-button" style="float: right" ng-click="addFileScanner()">ADD</div> <div ng-class="{\'visible\': toggle==true, \'notVisible\': toggle==false}" class="user-button" style="float: right" ng-click="saveFileScanner(x)">SAVE</div> </div> </div> <div class="row" style="margin-top: 5%"> <div class="col-md-12 col-sd-12 col-xs-12"> <div style="margin-left: -5%" data-ng-app="" data-ng-init="names=[]"> <ul> <li class="list-group-item" style="background-color: #C8C8C8">Display {{ names.length }} elements</li> <a href="" ng-click="getScanningInfo(x)" ng-mouseover="setIdFileScannerHovered(x)" ng-mouseleave="resetIdFileScannerHovered()" data-ng-repeat="x in names" ng-class="{\'notActive\': x.toggle==false, \'active\': x.toggle==true}" class="list-group-item" style="height: 60px"> <div id="infoFileScanner"> <span class="{{x.classicon}}"></span> <span>{{ x.Url }}</span> </div> <div id="buttons" ng-class="{\'notVisible\': (x.toggleHover || x.toggle)==false, \'visible\': (x.toggleHover || x.toggle)==true}"> <div class="glyphicon glyphicon-remove icon" ng-click="removeFileScanner(x)" title="Remove File Scanner"></div> <div class="glyphicon glyphicon-time icon" ng-click="scheduleFileScanner(x)" style="{{x.styleColor}}" title="Schedule File Scanner"></div> <div class="glyphicon glyphicon-stop icon" ng-click="stopFileScanner(x)" title="Stop File Scanner"> </div> <div class="glyphicon glyphicon-play icon" ng-click="playFileScanner(x)" title="Play File Scanner"> </div> </div> </a> </ul> </div> </div> </div> </div> <div style="width: 30%;float: right;margin-top:2%"> <collection-upload collections-ids="{{collections}}"></collection-upload> </div> </div> </div>');a.put("sections/user-cart/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div> <style type="text/css"></style> <cart-container> </cart-container> </div> </div>');a.put("sections/user-products/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div> <style type="text/css"></style> <myproducts-container> </myproducts-container> </div> </div>');a.put("sections/user-profile/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+'--\x3e <style type="text/css">.user-button {\n'+"    background-color: rgb(55, 59, 80)!important;\n"+"    vertical-align: middle;\n"+"    margin-top: 12px;\n"+"    line-height: 20px;\n"+"    font-size: 14px;\n"+"    margin-left: 20px;\n"+"    position: relative;\n"+"    float: right;\n"+"    padding: 10px;\n"+"    cursor: pointer;\n"+"    color:white;\n"+"    text-decoration: none;\n"+"\n"+"}\n"+".user-button:hover{\n"+"    color:white;\n"+"    text-decoration: none;\n"+"}\n"+".user-button:visited{\n"+"    color:white;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+"h3{\n"+"  text-align: center;\n"+"}\n"+"hr{\n"+"  width: 80%;\n"+"  border: 0px;\n"+"}\n"+"\n"+".group            {\n"+"  position:relative;\n"+"  margin-bottom:35px;\n"+"}\n"+"input               {\n"+"  font-size:13px;\n"+"  padding:10px 10px 10px 5px;\n"+"  display:block;\n"+"  width:100%;\n"+"  border:none;\n"+"  border-bottom:1px solid #757575;\n"+"}\n"+"input:focus         { outline:none; }\n"+"\n"+"/* LABEL ======================================= */\n"+"label                {\n"+"  color:#999;\n"+"  font-size:13px;\n"+"  font-weight:normal;\n"+"  position:absolute;\n"+"  pointer-events:none;\n"+"  top:10px;\n"+"  transition:0.2s ease all;\n"+"  -moz-transition:0.2s ease all;\n"+"  -webkit-transition:0.2s ease all;\n"+"}\n"+"\n"+"/* active state */\n"+"input:focus ~ .lbl-field, input:valid ~ .lbl-field, input:invalid ~ .lbl-field  {\n"+"  top:-15px;\n"+"  font-size:13px;\n"+"  color: rgb(55, 59, 80);\n"+"}\n"+"\n"+"input:invalid ~ .invalid-field{\n"+"    display: inline-block !important;\n"+"}\n"+"\n"+".invalid-field {\n"+"  display:none;\n"+"  color: rgb(255,110,64);\n"+"  top: 45px;\n"+"  font-size: 9px;\n"+"}\n"+"\n"+"  #user-profile .select-label {\n"+"  /*display:none;*/\n"+"  top: -20px;\n"+"  color: rgb(55, 59, 80);\n"+"  font-size: 13px;\n"+"}\n"+"\n"+"/* BOTTOM BARS ================================= */\n"+".bar    { position:relative; display:block; width:100%; }\n"+".bar:before, .bar:after     {\n"+"  content:'';\n"+"  height:2px;\n"+"  width:0;\n"+"  bottom:1px;\n"+"  position:absolute;\n"+"  background:rgb(55, 59, 80);\n"+"  transition:0.2s ease all;\n"+"  -moz-transition:0.2s ease all;\n"+"  -webkit-transition:0.2s ease all;\n"+"}\n"+".bar:before {\n"+"  left:50%;\n"+"}\n"+".bar:after {\n"+"  right:50%;\n"+"}\n"+"\n"+"/* active state */\n"+"input:focus ~ .bar:before, input:focus ~ .bar:after {\n"+"  width:50%;\n"+"}\n"+"\n"+"/* HIGHLIGHTER ================================== */\n"+".highlight {\n"+"  position:absolute;\n"+"  height:60%;\n"+"  width:100px;\n"+"  top:25%;\n"+"  left:0;\n"+"  pointer-events:none;\n"+"  opacity:0.5;\n"+"}\n"+"\n"+"/* active state */\n"+"input:focus ~ .highlight {\n"+"  -webkit-animation:inputHighlighter 0.3s ease;\n"+"  -moz-animation:inputHighlighter 0.3s ease;\n"+"  animation:inputHighlighter 0.3s ease;\n"+"}\n"+"\n"+"/* Style Select Field */\n"+"select {\n"+"  font-family: inherit;\n"+"  background-color: transparent;\n"+"  width: 100%;\n"+"  padding: 8px 0;\n"+"  font-size: 13px;\n"+"  border: none;\n"+"  border-bottom: 1px solid rgb(0,0,0);\n"+"}\n"+"\n"+"/* Remove focus */\n"+"select:focus {\n"+"  outline: none;\n"+"}\n"+"\n"+"/* Hide label */\n"+"  #user-profile .mdl-selectfield label {/*display:none;*/}\n"+"/* Use custom arrow */\n"+"\n"+".mdl-selectfield {\n"+"  font-family: 'Roboto','Helvetica','Arial',sans-serif;\n"+"  position: relative;\n"+"}\n"+"\n"+".mdl-selectfield::after {\n"+"        position: absolute;\n"+"        top: 0.75em;\n"+"        right: 0.5em;\n"+"        /* Styling the down arrow */\n"+"        width: 0;\n"+"        height: 0;\n"+"        padding: 0;\n"+"        content: '';\n"+"        border-left: .25em solid transparent;\n"+"        border-right: .25em solid transparent;\n"+"        border-top: .375em solid rgba(0,0,0, 1);\n"+"        pointer-events: none;\n"+"        color: black;\n"+"\n"+"}\n"+"\n"+".mdl-selectfield select {-webkit-appearance: none;\n"+"                         -moz-appearance: none;}\n"+"\n"+".mdl-selectfield select::-ms-expand {display: none;}\n"+"\n"+"/* ANIMATIONS ================ */\n"+"@-webkit-keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"@-moz-keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"@keyframes inputHighlighter {\n"+"    from { background:rgb(55, 59, 80); }\n"+"  to    { width:0; background:transparent; }\n"+"}\n"+"\n"+".gotomap {\n"+"  top: 20px;\n"+'}</style> <div id="user-profile" class="container"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8"> <h3>User {{user.username}} profile</h3> </div> <div class="col-md-1 col-sd-3 col-xs-3 gotomap"><gotomap-button></gotomap-button></div> </div> <hr> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="user.firstname" value="user.firstname" ng-blur="checkName()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Firstname</label> <label class="invalid-field" id="checkName">Firstname empty</label> </div> </div> <div class="group col-md-6"> <div> <input type="text" ng-model="user.lastname" value="user.lastname" ng-blur="checkLastname()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Lastname</label> <label class="invalid-field" id="checkLastname">Lastname empty</label> </div> </div> </div> <hr> <div class="row"> <div class="group col-md-6"> <input id="email" type="email" ng-model="user.email" value="user.email" ng-blur="checkEmail()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">E-mail</label> <label class="invalid-field" id="checkEmail">E-mail not valid</label> </div> <div class="group col-md-6"> <input id="confirmemail" type="text" ng-blur="checkConfimEmail()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Confirm E-mail</label> <label class="invalid-field" id="checkConfirmEmail">E-mail doesn\'t match</label> </div> </div> <hr> <div class="row"> <div class="group col-md-6"> <div class="mdl-selectfield"> <label id="domainLbl" class="select-label">Select Domain</label> <select class="browser-default" ng-model="user.domain" ng-change="checkDomain()"> <option value="unknown" disabled selected>Select Domain</option> <option value="{{domain}}" ng-repeat="domain in domains">{{domain}}</option> </select> </div> <label class="invalid-field" id="checkDomain">Domain empty</label> </div> <div class="group col-md-6"> <input id="domainDesc" style="display:none !important" type="text" ng-model="user.subDomain" value="user.subDomain" ng-blur="checkSubDomain()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field" id="domainLabel" style="display:none !important">Domain</label> <label class="invalid-field" id="checkSubDomain">Domain empty</label> </div> </div> <hr> <div class="row"> <div class="group col-md-6"> <div class="mdl-selectfield"> <label id="usageLbl" class="select-label">Select Usage</label> <select class="browser-default" ng-model="user.usage" ng-change="checkUsage()"> <option value="unknown" disabled selected>Select Usage</option> <option value="{{usage}}" ng-repeat="usage in usages">{{usage}}</option> </select> </div> <label class="invalid-field" id="checkUsage">Usage empty</label> </div> <div class="group col-md-6"> <input id="usageDesc" style="display:none !important" type="text" ng-model="user.subUsage" value="user.subUsage" ng-blur="checkSubUsage()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field" id="usageLabel" style="display:none !important">Usage</label> <label class="invalid-field" id="checkSubUsage">Usage empty</label> </div> </div> <hr> <div class="row"> <div class="group col-md-6"> <div class="mdl-selectfield"> <label id="countryLbl" class="select-label">Select your country</label> <select id="country" class="browser-default" ng-model="user.country" ng-change="checkCountry()"> <option value="unknown" disabled selected>Select your country</option> <option value="{{country}}" ng-repeat="country in countries">{{country}}</option> </select> </div> <label class="invalid-field" id="checkCountry">Country empty</label> </div> </div> <div class="row" style="text-align:right"> <div class="user-button" ng-click="sendUpdate()">SAVE MODIFICATION</div> </div> <hr> <div class="row"> <h3>Change password</h3> </div> Password field accepts only alphanumeric characters plus "!", "@", "#", "$", "%", "^", "&", "*", ")", "(", "+", "=", ".", "_", "-".<br> Password fields minimum length is 8 characters. <hr> <div class="row"> <div class="group col-md-6"> <input autocomplete="new-password" class="oldpassword" type="password" ng-blur="checkOldPwd()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Old Password</label> <label class="invalid-field" id="checkOldPassword">Old Password empty</label> </div> </div> <hr> <div class="row"> <div class="group col-md-6"> <input autocomplete="new-password" class="password" type="password" ng-blur="checkPwd()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Password</label> <label class="invalid-field" id="checkPasswordLength">Password too short. Minimum 8 characters.</label> <label class="invalid-field" id="checkPassword">Password empty</label> <label class="invalid-field" id="checkPasswordNonLatin">Password cannot contain special characters</label> </div> <div class="group col-md-6"> <input autocomplete="new-password" class="confirmpassword" type="password" ng-blur="checkConfimPwd()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Confirm Password</label> <label class="invalid-field" id="checkConfirmPassword">Password doesn\'t match</label> </div> </div> <hr> <div class="row" style="text-align:right"> <div class="user-button" id="changepasswd" ng-click="changePassword()">CHANGE PASSWORD</div> </div> <hr> </div> </div>');a.put("sections/user-searches/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div> <style type="text/css"></style> <searches-container> </searches-container> </div> </div>');a.put("components/actions-toolbar/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>nav .glyphicon.glyphicon-floppy-disk{\n"+"            top: -6px !important;\n"+"            left: -6px !important; \n"+"        }   \n"+"\n"+"        .nav {\n"+"          list-style: none;\n"+"          margin-left: 10px;          \n"+"        }\n"+"\n"+"        .nav li {\n"+"          position: relative;\n"+"          display: inline-block;\n"+"          margin-right: -4px;\n"+"        }    \n"+"        .nav a {\n"+"          display: block;\n"+"          background-color: #f7f7f7;\n"+"          background-image: -webkit-gradient(linear, left top, left bottom, from(#f7f7f7), to(#e7e7e7));\n"+"          background-image: -webkit-linear-gradient(top, #f7f7f7, #e7e7e7); \n"+"          background-image: -moz-linear-gradient(top, #f7f7f7, #e7e7e7); \n"+"          background-image: -ms-linear-gradient(top, #f7f7f7, #e7e7e7); \n"+"          background-image: -o-linear-gradient(top, #f7f7f7, #e7e7e7); \n"+"          \n"+"          margin: 5px;\n"+"          width: 30px;\n"+"          height: 30px;\n"+"          position: relative;\n"+"          text-align: center;\n"+"          line-height: 30px;\n"+"          border-radius: 50%;\n"+"          box-shadow: 0px 1px 3px #aaa, inset 0px 1px 2px #fff;\n"+"          color: #333;\n"+"        }\n"+"        .nav a:hover{\n"+"          text-decoration: none;\n"+"          \n"+"          background: #f5f5f5;\n"+"          /*color: #a7a7a7;*/\n"+"          color: #666;\n"+"        }  \n"+"\n"+"        .nav li:before {\n"+'          content: "";\n'+"          display: block;\n"+"          border-top: 1px solid #ddd;\n"+"          border-bottom: 1px solid #fff;\n"+"          width: 100%;\n"+"          height: 1px;\n"+"          position: absolute;\n"+"          top: 50%;\n"+"          z-index: 0;\n"+"        }\n"+"\n"+"        .nav a:before {\n"+'          content: "";\n'+"          display: block;\n"+"          background: #fff;\n"+"          border-top: 2px solid #ddd;\n"+"          position: absolute;\n"+"          top: -18px;\n"+"          left: -18px;\n"+"          bottom: -18px;\n"+"          right: -18px;\n"+"          z-index: -1;\n"+"          border-radius: 50%;\n"+"          box-shadow: inset 0px 8px 48px #ddd;\n"+'        }</style> \x3c!--<div class="save-search-button" ng-click="saveSearch()" id="save-search-button">    <svg viewBox="0 0 24 24"  height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;"><g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></g></svg>     \n'+'    </div>--\x3e <nav> <ul class="nav"> <li><a><div class="glyphicon glyphicon-floppy-disk" style="top: -7px !important; left: -7px !important" ng-click="saveSearch()" title="Save Search"></div></a></li> </ul> </nav> </div> </div>')
;a.put("components/advanced-filter/view.html","<div> \x3c!--\n"+"\tData HUb Service (DHuS) - For Space data distribution.\n"+"\tCopyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"\tCopyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"\tCopyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"\tThis file is part of DHuS software sources.\n"+"\n"+"\tThis program is free software: you can redistribute it and/or modify\n"+"\tit under the terms of the GNU Affero General Public License as\n"+"\tpublished by the Free Software Foundation, either version 3 of the\n"+"\tLicense, or (at your option) any later version.\n"+"\n"+"\tThis program is distributed in the hope that it will be useful,\n"+"\tbut WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"\tMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"\tGNU Affero General Public License for more details.\n"+"\n"+"\tYou should have received a copy of the GNU Affero General Public License\n"+"\talong with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>.filter-label {\n"+"\t\t\t\tfont-weight: normal !important;\n"+"\t\t\t}\n"+" \t\t\t.filter-highlight {\n"+"\t\t\t\ttop: 50% !important;\n"+"\t\t\t}\n"+" \t\t\t.filter-checkbox-label {\n"+"\t\t\t\tfont-weight: bold !important;\n"+"\t\t\t}\n"+" \t\t\t.filter-bar:before,\n"+"\t\t\t.filter-bar:after {\n"+"\t\t\t\theight: 1px !important;\n"+"\t\t\t\tcolor: rgba(0, 0, 0, 1) !important;\n"+"\t\t\t\tbackground: rgba(0, 0, 0, 1) !important;\n"+"\t\t\t}\n"+" \t\t\t.filter-checkbox {\n"+"\t\t\t\tmargin-bottom: 25px !important;\n"+"\t\t\t}\n"+" \t\t\t.filter-input:invalid {\n"+"\t\t\t\tcolor: red;\n"+"\t\t\t}\n"+" \t\t\tinput::-webkit-calendar-picker-indicator {\n"+"\t\t\t\tdisplay: none;\n"+"\t\t\t}\n"+" \t\t\t#adv-options label {\n"+"\t\t\t\tfont-weight: normal;\n"+"\t\t\t\tpointer-events: none;\n"+"\t\t\t\ttransition: 0.2s ease all;\n"+"\t\t\t\t-moz-transition: 0.2s ease all;\n"+"\t\t\t\t-webkit-transition: 0.2s ease all;\n"+"\t\t\t}\n"+" \t\t\t.adv-selectfield label {\n"+"\t\t\t\tdisplay: none;\n"+"\t\t\t}\n"+" \t\t\t.adv-selectfield {\n"+"\t\t\t\tfont-family: 'Roboto', 'Helvetica', 'Arial', sans-serif;\n"+"\t\t\t\tposition: relative;\n"+"\t\t\t}\n"+" \t\t\t.adv-selectfield:hover {\n"+"\t\t\t\tcursor: pointer;\n"+"\t\t\t}\n"+" \t\t\t.adv-selectfield::after {\n"+"\t\t\t\tposition: absolute;\n"+"\t\t\t\ttop: -1.5em;\n"+"\t\t\t\tright: 0.5em;\n"+"\t\t\t\t/* Styling the down arrow */\n"+"\t\t\t\twidth: 0;\n"+"\t\t\t\theight: 0;\n"+"\t\t\t\tpadding: 0;\n"+"\t\t\t\tcontent: '';\n"+"\t\t\t\tborder-left: .4em solid transparent;\n"+"\t\t\t\tborder-right: .4em solid transparent;\n"+"\t\t\t\tborder-top: .7em solid rgba(0, 0, 0, 1);\n"+"\t\t\t\tpointer-events: none;\n"+"\t\t\t\tcolor: black;\n"+"\t\t\t}\n"+" \t\t\t.adv-selectfield datalist {\n"+"\t\t\t\t-webkit-appearance: none;\n"+"\t\t\t\t-moz-appearance: none;\n"+"\t\t\t\tbackground-color: transparent;\n"+"\t\t\t\twidth: 100%;\n"+"\t\t\t}\n"+" \t\t\t.adv-selectfield datalist::-ms-expand {\n"+"\t\t\t\tdisplay: none;\n"+"\t\t\t}\n"+" \t\t\t.adv-select-label {\n"+"\t\t\t\ttop: -20px;\n"+"\t\t\t\tcolor: rgb(55, 59, 80);\n"+"\t\t\t\tfont-size: 13px;\n"+"\t\t\t}\n"+" \t\t\t#adv-options .group {\n"+"\t\t\t\tposition: relative;\n"+"\t\t\t\tmargin-bottom: 15px;\n"+"\t\t\t}\n"+" \t\t\t.filter-adv-selection:hover {\n"+"\t\t\t\t/*cursor:pointer;*/\n"+"\t\t\t\t/*background: #e5e7e9!important;*/\n"+"\t\t\t}\n"+" \t\t\t#adv-options {\n"+"\t\t\t\tposition: relative;\n"+"\t\t\t}\n"+" \t\t\t#adv-options select {\n"+"\t\t\t\twidth: 100%;\n"+"\t\t\t\tbackground: none;\n"+"\t\t\t\theight: 34px !important;\n"+"\t\t\t\tline-height: 28px !important;\n"+"\t\t\t}\n"+" \t\t\t#adv-options>* {\n"+"\t\t\t\tbox-sizing: border-box;\n"+"\t\t\t}\n"+" \t\t\t#adv-options input {\n"+"\t\t\t\tposition: absolute;\n"+"\t\t\t\twidth: 75%;\n"+"\t\t\t\t/*background: #e5e7e9 !important;  */\n"+"\t\t\t\theight: 25px !important;\n"+"\t\t\t\tline-height: 25px !important;\n"+"\t\t\t\ttop: 30px;\n"+"\t\t\t\tmargin-left: 2px;\n"+"\t\t\t\tpadding-left: 7px !important;\n"+"\t\t\t\tborder: none;\n"+"\t\t\t}\n"+" \t\t\t#adv-options select:hover {\n"+"\t\t\t\tcursor: pointer;\n"+"\t\t\t}\n"+" \t\t\t.mission-checkbox-lightgrey {\n"+"\t\t\t\tcolor: grey;\n"+"\t\t\t\tpointer-events: none;\n"+"\t\t\t}\n"+" \t\t\t.mission-checkbox-black {\n"+"\t\t\t\tcolor: black;\n"+"\t\t\t\tpointer-events: all;\n"+"\t\t\t}\n"+" \t\t\t.mission-section-disabled {\n"+"\t\t\t\tbackground: lightgrey;\n"+"\t\t\t\topacity: 0.4;\n"+"\t\t\t}\n"+" \t\t\t.mission-label-disabled {\n"+"\t\t\t\tcolor: grey;\n"+'\t\t\t}</style> <div> <div ng-repeat="mission in missions" ng-class="{ \' mission-section-disabled\': isDisabled}"> <div class="row filter-checkbox"> <div class="col-md-1 col-xs-4 col-sd-4"> <div class="glyphicon mission-checkbox" ng-click="mission.selected = !mission.selected;  updateMissionSelection($index);" ng-class="{ \' glyphicon-unchecked\': !mission.selected, \' glyphicon-check\': mission.selected, \' mission-checkbox-lightgrey\': isDisabled, \' mission-checkbox-black\': !isDisabled}"> </div> </div> <div class="col-md-11 col-xs-8 col-sd-8 filter-checkbox-label" ng-class="{ \' mission-label-disabled\': isDisabled}"> {{mission.name}} </div> </div> <div class="row"> <div ng-repeat="filter in mission.filters"> <div ng-if="(filter.complexindexes && filter.complexindexes.length > 0)"> <div id="adv-options" class="group col-md-6"> <label class="filter-label" ng-class="{ \' mission-label-disabled\': isDisabled}"> {{filter.indexlabel}} </label> <select id="{{$parent.$parent.$index}}_{{$index}}_optlist" class="browser-default" ng-disabled="checkIsDisabled(disableFilter)" ng-model="filter.indexvalue" ng-change="updateFilter($parent.$parent.$index)" onchange="this.previousElementSibling.value=this.value; this.previousElementSibling.focus()"> <option ng-repeat="option in filter.complexindexes" value="{{option.value}}"> {{option.label}} </option> </select> </div> </div> \x3c!-- Sentinel-5P --\x3e <div ng-if="!(filter.complexindexes && filter.complexindexes.length > 0)"> <div class="col-md-6" ng-if="!(filter.indexvalues && filter.indexvalues.split(\'|\').length > 0)"> <div class="group"> <label class="filter-label" ng-class="{ \' mission-label-disabled\': isDisabled}"> {{filter.indexlabel}} </label> <input class="form-control filter-input" ng-disabled="checkIsDisabled(disableFilter)" ng-model="filter.indexvalue" ng-blur="updateFilter($parent.$parent.$parent.$index)" pattern="{{filter.regex}}" value="filter.indexvalue"> <span class="highlight filter-highlight"></span> <span class="bar filter-bar"></span> </div> </div> \x3c!-- Sentinel-1 Sentinel-2 Sentinel-3 --\x3e <div id="adv-options" class="group col-md-6" ng-if="(filter.indexvalues && filter.indexvalues.split(\'|\').length > 0)"> <label class="filter-label" ng-class="{ \' mission-label-disabled\': isDisabled}"> {{filter.indexlabel}} </label> <input class="form-control filter-input filter-adv-selection" ng-disabled="checkIsDisabled(disableFilter)" ng-model="filter.indexvalue" ng-blur="updateFilter($parent.$parent.$parent.$index)" ng-click="clearInput($parent.$parent.$parent.$index, $parent.$index)" pattern="{{filter.regex}}" name="{{$parent.$parent.$index}}_{{$index}}_namelist" list="{{$parent.$parent.$index}}_{{$index}}_optlist" autofocus value="filter.indexvalue"> <select id="{{$parent.$parent.$parent.$index}}_{{$index}}_optlist" class="browser-default" ng-disabled="checkIsDisabled(disableFilter)" ng-model="filter.indexvalue" ng-change="updateFilter($parent.$parent.$parent.$index)" onchange="this.previousElementSibling.value=this.value; this.previousElementSibling.focus()"> <option selected></option> <option ng-repeat="option in filter.indexvalues.split(\'|\')" value="{{option}}"> {{option}} </option> </select> </div> </div> </div> </div> </div> </div> </div> </div>');a.put("components/advanced-search/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>#advanced-search-container{\n"+"\t\t    position: fixed;\n"+"\t\t    background-color: white;\n"+"\t\t    width: 728px;\n"+"\t\t    height: 700px;\n"+"\t\t    z-index: 999;\n"+"\t\t    top: 150px;\n"+"\t\t    left: calc(-728px -20px);\n"+"\t\t    box-shadow: 3px 5px 19px 0 rgba(49,50,50,.62);\n"+"\t\t    padding: 0px;\n"+"\t\t    padding-top: 33px;\n"+"\t\t}\n"+"\n"+"\t\t#advanced-search-close-button{\n"+"\t\t\tposition: absolute;\n"+"\t\t\ttop:10px;\n"+"\t\t\tright:10px;\n"+"\t\t}\n"+"\n"+"\t\t#advanced-search-content{\n"+"\t\t\tposition: relative;\n"+"\t        height: 100%;\n"+"\t        width: 100%;\n"+"\t        background-color: white;\n"+"\t        overflow-y: auto;\n"+"\t        overflow-x: hidden;\n"+"\t\t}\n"+"\n"+"\t\t.advanced-search-collapse-title {\n"+"\t\t\tmargin-left: 5px;\n"+"\t\t\tfont-size: 14px;\n"+"\t\t}\n"+"\n"+"\t\t.advanced-search-clear {\n"+"\t\t\tmargin-right: 10px;\n"+"\t\t\tfont-size: 14px;\n"+"\t\t\tfloat: right;\n"+"\t\t\tfont-weight: normal !important;\n"+"\t\t}\n"+"\n"+"\t\t.advanced-search-clear:hover {\n"+"\t\t\ttext-decoration: underline;\n"+"\t\t}\n"+"\n"+"\t\t.advanced-search-heading {\n"+"\t\t\tpadding: 5px 10px !important;\n"+"\t\t}\n"+"\t\t.advanced-search-panel-title {\n"+"\t\t\tmargin-top: -5px !important;\n"+"\t\t\tcursor: default !important;\n"+"\t\t}\n"+"\n"+"\t\t.panel-heading .accordion-toggle:before {\n"+"\t\t    font-family: 'Glyphicons Halflings';\n"+"\t\t    content: '\\e113';\n"+"\t\t    float: left;\n"+"\t\t    color: grey;\n"+"\t\t  }\n"+"\t\t  .panel-heading .accordion-toggle.collapsed:before {\n"+'\t\t    content: "\\e114";\n'+"\t\t  }\n"+"\t\t  .advanced-search-subtitle{\n"+"\t\t  \tmargin-top:10px;\n"+"\t\t  }\n"+"\n"+"\t\t   .collapse {\n"+"\t\t        position: inherit;\n"+"\t\t    }\n"+"\t\t  #section_0 {\n"+"\t\t  \toverflow-y: hidden !important;\n"+"\t\t  }\n"+"\n"+"\t\t  /*#advanced-search-content  .dropdown-menu{\n"+"\t\t  \tposition: fixed !important;\t\n"+"\t\t\t}*/\n"+"\t\t\t\n"+"\t\t  .advanced-panel {\n"+"\t\t  \tmargin-bottom: 8px !important;\n"+"\t\t  }\n"+"\t\t  .advanced-calendar-button {\n"+"\t\t  \tborder:none;\n"+"\t\t  \tleft: 5px;\n"+"\t\t  }\n"+"\t\t  .advanced-calendar-label {\n"+"\t\t  \ttop: 10px;\n"+"\t\t  }\n"+"\n"+"\t\t  .advanced-calendar-date-input {\n"+"\t\t  \tpadding: 0px;\n"+"\t\t  \ttext-align: center;\n"+"\t\t  }\n"+"\t\t  .advanced-calendar-date-input{\n"+"\t\t  \tfont-size: 11px;\n"+"\t\t  }\n"+"\n"+"\t\t  .btn-file {\n"+"\t\t    position: relative;\n"+"\t\t    overflow: hidden;\n"+"\t\t  }\n"+"\t\t  .btn-file input[type=file] {\n"+"\t\t    position: absolute;\n"+"\t\t    top: 0;\n"+"\t\t    right: 0;\n"+"\t\t    min-width: 100%;\n"+"\t\t    min-height: 100%;\n"+"\t\t    font-size: 100px;\n"+"\t\t    text-align: right;\n"+"\t\t    filter: alpha(opacity=0);\n"+"\t\t    opacity: 0;\n"+"\t\t    outline: none;\n"+"\t\t    background: white;\n"+"\t\t    cursor: inherit;\n"+"\t\t    display: block;\n"+"\t\t  }\n"+"\t\t  .fab-cart-disabled\n"+"\t\t  {\n"+"\t\t    background-color: #afb1b9 !important;\n"+"\t\t    cursor: default !important;\n"+"\t\t    color: black !important;\n"+"\t\t  }\n"+"\n"+"\t\t  .user-button {\n"+"\t\t    background-color: rgb(55, 59, 80)!important;\n"+"\t\t    vertical-align: middle;\n"+"\t\t    margin-top: 12px;\n"+"\t\t    line-height: 20px;\n"+"\t\t    font-size: 14px;\n"+"\t\t    margin-left: 5px;\n"+"\t\t    position: relative;\n"+"\t\t    padding: 10px;\n"+"\t\t    cursor: pointer;\n"+"\t\t    color:white;\n"+"\t\t    text-decoration: none;\n"+"\t\t    text-align: center;\n"+"\t\t  }\n"+"\t\t  .user-button:hover{\n"+"\t\t    color:white;\n"+"\t\t    text-decoration: none;\n"+"\t\t  }\n"+"\t\t  .user-button:visited{\n"+"\t\t    color:white;\n"+"\t\t    text-decoration: none;\n"+"\t\t  }\n"+"\n"+"\t\t  #advanced-search-container .sort-message {\n"+"\t\t  \tfont-size: 12px;\n"+"    \t\ttext-align: justify;\n"+"\t\t  }\n"+"\n"+"\t\t  #advanced-search-container .sort-message-checkbox {\n"+"\t\t\tmargin-bottom: 25px !important;\n"+"\t\t  }\n"+"\n"+"\t\t  .shapefile_description {\n"+"\t\t  \tfont-size: 12px;\n"+"    \t\ttext-align: justify;\n"+"    \t\tfont-style: italic;\n"+"\t\t  }\n"+"\n"+"\t\t\t.resize-button {\n"+"\t\t\t\tfloat: right;\n"+"\t\t\t\ttop: 6px;\n"+"\t\t\t}\n"+"\n"+"\t\t\t.list-top-right-container{\n"+"\t\t\t\tposition: absolute;\n"+"\t\t\t\ttop: 4px;\n"+"\t\t\t\tright: 16px;\n"+"\t\t\t\twidth: 70px;\n"+"\t\t\t\theight: 20px;\n"+"\t\t\t}\n"+"\n"+"\t\t\t.list-top-right-element{\n"+"\t\t\t\tfloat: right;\n"+"\t\t\t\ttransform: scale(0.9);\n"+"\t\t\t\tmargin-left: 3px;\n"+"\t\t\t\twidth: 20px;\n"+"\t\t\t\theight: 20px;\n"+"\t\t\t}\n"+"\n"+"\t\t\t#advanced-search-container .form-control {\n"+"\t\t\t\theight: 28px;\n"+"    \t\t\tpadding: 0px 12px;\n"+'\t\t\t}</style> <div id="advanced-search-container"> <span class="list-top-right-container"> <span class="list-top-right-element" title="Close"> <svg ng-click="closeAdvancedSearch()" style="width: 20px; height: 20px"> <g> <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"> </g> </svg> </span> <span class="resize-button" ng-show="showtoggle" ng-click="toggleExpandAdvancedSearch()" ng-class="toggleButtonClass" title="{{toggleExpandTitle}}"></span> </span> <div id="advanced-search-content"> <div class="panel panel-default details"> <div ng-if="enable_shapefile" class="panel-heading advanced-search-heading" role="tab"> <h4 class="panel-title advanced-search-panel-title"> <a class="accordion-toggle collapsed" role="button" data-toggle="collapse" data-parent="#accordion" aria-expanded="false" data-target="#section_1" aria-controls="section_1"> <span class="advanced-search-collapse-title">Upload shape file for geographical selection</span> </a> </h4> </div> <div ng-if="enable_shapefile" id="section_1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="section_1" style="overflow:visible;padding:15px 5px"> <div class="row"> <div class="col-md-8 col-sd-6 col-xs-6"> <div class="fileinput fileinput-new" data-provides="fileinput"> <span class="btn btn-default btn-file"><span>Choose file</span><input onchange="text = $(this).val();\n'+'\t\t\t\t                text = text.substring(text.lastIndexOf(&quot;\\\\&quot;) + 1, text.length);$(&quot;#shape-file-info&quot;).html(text);angular.element(this).scope().setIfSelectedFile(this)" type="file" shapefile-model="fileToUpload"></span> <span id="shape-file-info" class="fileinput-filename">No file choosen</span> </div> </div> <div class="col-md-4 col-sd-6 col-xs-6"> <div class="btn btn-default btn-file" style="float: right" ng-click="uploadShapeFile()" title="Upload Shape File">Upload</div> </div> </div> <div class="row shapefile_description" ng-if="isdragsupported"> <br> {{shapefile_description }} </div> </div> <div class="panel-heading advanced-search-heading" role="tab"> <h4 class="panel-title advanced-search-panel-title"> <a class="accordion-toggle" role="button" data-toggle="collapse" data-parent="#accordion" aria-expanded="false" data-target="#section_2" aria-controls="section_2"> <span class="advanced-search-collapse-title">Advanced search</span> </a> <span class="advanced-search-clear" ng-click="clearFilter()" title="Clear Search Filter">Clear</span> </h4> </div> <div id="section_2" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="section_2" style="overflow:visible;padding:15px 5px"> <div class="row"> <div class="col-md-6 col-sd-6 col-xs-12 advanced-search-subtitle" style="padding: 0px"> <div class="row"> <div class="col-md-12 col-sd-12 col-xs-12"> &raquo; Sort By: </div> </div> <div class="row"> <div class="col-md-12 col-sd-12 col-xs-12 advanced-calendar-label" style="padding-bottom: 20px"> <select class="form-control" ng-change="sortedbyChange()" ng-model="model.sortedby" ng-options="item.value as item.name  for item in  model.options"> </select> </div> </div> </div> <div class="col-md-6 col-sd-6 col-xs-12 advanced-search-subtitle" style="padding: 0px"> <div class="row"> <div class="col-md-12 col-sd-12 col-xs-12"> &raquo; Order By: </div> </div> <div class="row"> <div class="col-md-12 col-sd-12 col-xs-12 advanced-calendar-label" style="padding-bottom: 20px"> <select class="form-control" ng-change="orderbyChange()" ng-model="model.order" ng-options="ord.value as ord.name  for ord in  model.orderOptions"> </select> </div> </div> </div> </div> <div class="row"> <div class="col-md-1 col-xs-4 col-sd-4"> <div ng-if="showCheckbox" class="glyphicon sort-message-checkbox" ng-class="{ \' glyphicon-unchecked\': !sortmessage.selected, \'glyphicon-check\': sortmessage.selected }" ng-click="sortmessage.selected = !sortmessage.selected;  updateFilter()"></div> </div> <div class="col-md-11 col-xs-8 col-sd-8 sort-message">{{sortMessage}}</div> </div> <div class="row" ng-if="showsensingfilter"> <div class="col-md-4 col-sd-12 col-xs-12">&raquo; Sensing period</div> </div> <div class="row" ng-if="showsensingfilter"> <div class="col-md-6 col-sd-6 col-xs-12 advanced-search-subtitle"> <p class="input-group"> <input type="text" class="form-control advanced-calendar-date-input" uib-datepicker-popup="{{format}}" ng-model="model.sensingPeriodFrom" is-open="status.openedSensingPeriodFrom" date-disabled="disabled(date, mode)" max-date="model.sensingPeriodTo" ng-required="true" ng-blur="updateFilter()" readonly close-text="Close" data-container="body" popup-placement="auto bottom-left"> <span class="input-group-btn"> <button type="button" class="btn btn-default advanced-calendar-button" ng-click="openSensingPeriodFrom($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div class="col-md-6 col-sd-6 col-xs-12 advanced-search-subtitle"> <p class="input-group"> <input type="text" class="form-control advanced-calendar-date-input" uib-datepicker-popup="{{format}}" ng-model="model.sensingPeriodTo" is-open="status.openedSensingPeriodTo" date-disabled="disabled(date, mode)" ng-required="true" min-date="model.sensingPeriodFrom" ng-blur="updateFilter()" close-text="Close" readonly data-container="body" popup-placement="auto bottom-left"> <span class="input-group-btn"> <button type="button" class="btn btn-default advanced-calendar-button" ng-click="openSensingPeriodTo($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> </div> <div class="row" ng-if="showingestionfilter"> <div class="col-md-4 col-sd-12 col-xs-12">&raquo; Ingestion period</div> </div> <div class="row" ng-if="showsensingfilter"> <div class="col-md-6 col-sd-6 col-xs-12 advanced-search-subtitle"> <p class="input-group"> <input type="text" class="form-control advanced-calendar-date-input" uib-datepicker-popup="{{format}}" ng-model="model.ingestionFrom" is-open="status.openedIngestionFrom" date-disabled="disabled(date, mode)" max-date="model.ingestionTo" ng-required="true" ng-blur="updateFilter()" close-text="Close" readonly data-container="body" popup-placement="auto bottom-left"> <span class="input-group-btn"> <button type="button" class="btn btn-default advanced-calendar-button" ng-click="openIngestionFrom($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div class="col-md-6 col-sd-6 col-xs-12 advanced-search-subtitle"> <p class="input-group"> <input type="text" class="form-control advanced-calendar-date-input" uib-datepicker-popup="{{format}}" ng-model="model.ingestionTo" is-open="status.openedIngestionTo" date-disabled="disabled(date, mode)" min-date="model.ingestionFrom" ng-required="true" close-text="Close" ng-blur="updateFilter()" readonly data-container="body" popup-placement="auto bottom-left"> <span class="input-group-btn"> <button type="button" class="btn btn-default advanced-calendar-button" ng-click="openIngestionTo($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> </div> <advanced-filter disable-filter="{{disableAdvFilter}}"></advanced-filter> </div> </div> </div> </div> </div> </div>');a.put("components/alert-manager/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>#alertmessage{\n"+"          width: 100%;\n"+"          text-align: center;          \n"+"          margin: 10px 0px;    \n"+"          word-wrap: break-word;            \n"+"        }\n"+"\n"+"        .confirmbutton {\n"+"          background-color: rgb(55, 59, 80)!important;\n"+"          vertical-align: middle;\n"+"          margin-top: 12px;\n"+"          line-height: 20px;\n"+"          font-size: 14px;\n"+"          margin-left: 20px;\n"+"          position: relative;\n"+"          float: right;\n"+"          padding: 10px;\n"+"          cursor: pointer;\n"+"          color:white;\n"+"          text-decoration: none;\n"+"\n"+"      }\n"+"      .confirmbutton:hover{\n"+"          color:white;\n"+"          text-decoration: none;\n"+"      }\n"+"      .confirmbutton:visited{\n"+"          color:white;\n"+"          text-decoration: none;\n"+"      }     \n"+"\n"+"        h4{\n"+"        text-align: center;\n"+"        color:black;\n"+"        font-size: 25px;\n"+"        }        \n"+"\n"+"        .modal {\n"+"          text-align: center;\n"+"        }\n"+"\n"+"        @media screen and (min-width: 768px) { \n"+"          .modal:before {\n"+"            display: inline-block;\n"+"            vertical-align: middle;\n"+'            content: " ";\n'+"            height: 100%;\n"+"          }\n"+"        }\n"+"\n"+"        .modal-dialog {\n"+"          display: inline-block;\n"+"          text-align: left;\n"+"          vertical-align: middle;\n"+"          width:90%;\n"+"        }\n"+"\n"+"        @media screen and (min-width: 768px) { \n"+"          .modal-dialog {\n"+"            display: inline-block;\n"+"            vertical-align: middle;\n"+"             width: 30%;            \n"+"             max-width: 400px;            \n"+"          }\n"+"        }\n"+"        /*.modal-dialog {\n"+"            width: 30%;\n"+"            max-width: 400px;\n"+"        }*/\n"+"\n"+"        .modal-header {\n"+"            border: none !important;\n"+"        } \n"+"\n"+"        .modal-body-alert {\n"+"            padding-left: 30px;\n"+"            padding-right: 15px;\n"+"            padding-top: 15px;\n"+"            padding-bottom: 15px;\n"+"        }        \n"+"      \n"+"        .divider {\n"+"          border-top: 1px solid #EEE !important;\n"+"          width: 80%;\n"+"        }\n"+"\n"+"        #alerticon {\n"+"          height: 52px !important;\n"+"          width: 52px !important;\n"+"          text-align: center;\n"+"          width: 100%;\n"+"          margin: 10px 0px;\n"+"        }\n"+"        .success #alerticon{\n"+"          color: #419641;\n"+"        }\n"+"\n"+"        .error #alerticon{\n"+"          color: #d9534f;\n"+"        }\n"+"\n"+"        .warn #alerticon{\n"+"          color: #f0ad4e;\n"+"        }\n"+"\n"+"        .info #alerticon{\n"+"          color: #337ab7;\n"+"        }\n"+"\n"+"        #alerttitle{\n"+"          font-size: 26px;\n"+"          margin: 0px 0px 15px 0px;\n"+"          text-align: center;\n"+"        }\n"+"        .success #alerttitle{\n"+"          border-bottom: #419641 2px solid;\n"+"        }\n"+"\n"+"        .error #alerttitle{\n"+"          border-bottom: #d9534f 2px solid;\n"+"        }\n"+"\n"+"        .warn #alerttitle{\n"+"          border-bottom: #f0ad4e 2px solid;\n"+"        }\n"+"\n"+"        .info #alerttitle{\n"+"          border-bottom: #337ab7 2px solid;\n"+"        }\n"+"        \n"+"         \n"+"        .fab {\n"+"          vertical-align: middle;\n"+"          margin-top: 12px;\n"+"          margin-left: 20px;\n"+"          padding: 6px;\n"+"          line-height: 20px;\n"+"          font-size: 15px;\n"+"          position: relative;\n"+"          float: right;\n"+"          display: block;\n"+"          height: 62px;\n"+"          width: 62px;\n"+"          color: #fff;\n"+"          fill: currentColor;\n"+"          cursor: pointer;\n"+"          text-decoration: none;            \n"+"          border-radius: 50%;          \n"+"          overflow: hidden;\n"+"          transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"          transition-delay: 0.2s;\n"+"          box-shadow: 0 0px 0px 0 rgba(0, 0, 0, 0);\n"+"      }\n"+"        \n"+"        .fab.error {\n"+"          color: #d9534f;\n"+"        } \n"+"\n"+"        .fab.warn {\n"+"          color: #f0ad4e;\n"+"        }\n"+"\n"+"        .fab.success {\n"+"          color: #419641;\n"+"        }\n"+"\n"+"        .fab.info {\n"+"          color: #337ab7;\n"+"        }  \n"+"\n"+"        #alertmessage h1{\n"+"          font-size: 16px;               \n"+"        } \n"+"        #alertmessage h3{\n"+"          font-size: 14px;               \n"+"        } \n"+"        #alertmessage p{\n"+"          text-align: justify;\n"+"          text-decoration: none !important;               \n"+"        }   \n"+"\n"+"        #alertModal {\n"+"          z-index: 9990;\n"+'        }</style> <div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="alerttitle" ng-keyup="$event.keyCode == 13 && close()"> <div class="modal-dialog" role="document"> <div class="modal-content"> <div class="modal-header"> <div class="modal-title" id="alerttitle"></div> </div> <div class="modal-body modal-body-alert"> <div class="row"> <div class="col-md-2 col-sd-3 col-xs-3"> <div class="fab error"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></g> </svg> </div> <div class="fab info"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="info"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></g> </svg> </div> <div class="fab warn"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></g> </svg> </div> <div class="fab success"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="check-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></g> </svg> </div> </div> <div class="col-md-10 col-sd-9 col-xs-9"> <div id="alertmessage"></div> </div> </div> <div class="row" style="text-align:right"> <div class="confirmbutton" ng-click="close()">OK</div> </div> </div> </div> </div> </div> </div> </div>')
;a.put("components/cart-menu/view.html","<div> \x3c!--/* \n"+" * Data HUb Service (DHuS) - For Space data distribution.\n"+" * Copyright (C) 2013,2014,2015,2016,2017,2018 European Space Agency (ESA)\n"+" * Copyright (C) 2013,2014,2015,2016,2017,2018 GAEL Systems\n"+" * Copyright (C) 2013,2014,2015,2016,2017,2018 Serco Spa\n"+" * \n"+" * This file is part of DHuS software sources.\n"+" *\n"+" * This program is free software: you can redistribute it and/or modify\n"+" * it under the terms of the GNU Affero General Public License as\n"+" * published by the Free Software Foundation, either version 3 of the\n"+" * License, or (at your option) any later version.\n"+" * \n"+" * This program is distributed in the hope that it will be useful,\n"+" * but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+" * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+" * GNU Affero General Public License for more details.\n"+" *\n"+" * You should have received a copy of the GNU Affero General Public License\n"+" * along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" */\n"+"--\x3e <style>/*CONTAINER*/\n"+"\t\t#cart-menu-container {\n"+"\t\t\tz-index: 998;\n"+"\t\t\tposition: fixed;\n"+"\t\t\tmin-height: 150px;\n"+"\t\t\twidth: 40%;\n"+"\t\t\tbackground-color: white;\n"+"\t\t\tbox-shadow: 3px 5px 19px 0 rgba(49, 50, 50, .62);\n"+"\t\t\topacity: 1;\n"+"\t\t}\n"+"\n"+"\t\t/**************************TOP****************************/\n"+"\t\t#cart-top-container {\n"+"\t\t\tpadding: 7px;\n"+"\t\t\theight: 55px;\n"+"\t\t\twidth: 100%;\n"+"\t\t\tbackground-color: #FAFAFA;\n"+"\t\t\tmargin-bottom: 4px;\n"+"\t\t}\n"+"\n"+"\t\t/*panel header info*/\n"+"\t\t#cart-header-title-container {\n"+"\t\t\tfloat: left;\n"+"\t\t\twidth: 100%;\n"+"\t\t\tfont-weight: bold;\n"+"\t\t\tfont-size: 14px;\n"+"\t\t\tcolor: #373b50;\n"+"\t\t}\n"+"\n"+"\t\t/*Top right buttons in cart-menu-container*/\n"+"\t\t#cart-header-top-right-container {\n"+"\t\t\tposition: absolute;\n"+"\t\t\ttop: 4px;\n"+"\t\t\tright: 16px;\n"+"\t\t\theight: 20px;\n"+"\t\t\twidth: 40px;\n"+"\t\t}\n"+"\n"+"\t\t#cart-panel-resize-button {\n"+"\t\t\tfloat: right;\n"+"\t\t\ttop: 6px;\n"+"\t\t}\n"+"\n"+"\t\t#cart-panel-close-button-container {\n"+"\t\t\tfloat: right;\n"+"\t\t\tmargin-left: 3px;\n"+"\t\t\theight: 20px;\n"+"\t\t}\n"+"\n"+"\t\t#cart-panel-close-button {\n"+"\t\t\theight: 20px;\n"+"\t\t\twidth: 20px;\n"+"\t\t}\n"+"\n"+"\t\t/****************************MID*****************************/\n"+"\t\t#cart-middle-container {\n"+"\t\t\theight: calc(100% - 105px);\n"+"\t\t\tbackground-color: white;\n"+"\t\t\toverflow-y: auto;\n"+"\t\t\toverflow-x: hidden;\n"+"\t\t}\n"+"\n"+"\t\t/**************************BOTTOM****************************/\n"+"\t\t#cart-bottom-container {\n"+"\t\t\tpadding: 10px;\n"+"\t\t\theight: 50px;\n"+"\t\t\twidth: 100%;\n"+"\t\t\tbackground-color: #FAFAFA;\n"+"\t\t\tfont-size: 14px;\n"+"\t\t}\n"+"\n"+"\t\t.select-page-button {\n"+"\t\t\tcursor: pointer;\n"+"\t\t\tmargin-right: 2.5px;\n"+"\t\t\tmargin-left: 2.5px;\n"+"\t\t}\n"+"\n"+"\t\t#cart-page-selector {\n"+"\t\t\ttext-align: center;\n"+"\t\t\tcursor: pointer;\n"+"\t\t\tpadding: 7px;\n"+"\t\t\twidth: 40px !important;\n"+"\t\t\tborder: 1px solid #9A9A9A !important;\n"+"\t\t}\n"+"\n"+"\t\t.svg-cart-icon-container {\n"+"\t\t\tfloat: right;\n"+"\t\t\tpadding-right: 10px;\n"+"\t\t}\n"+"\n"+"\t\t.svg-cart-icon {\n"+"\t\t\tfill: #333;\n"+"\t\t\theight: 26px;\n"+"\t\t\twidth: 26px;\n"+"\t\t}\n"+"\n"+"\t\t.svg-cart-icon:hover {\n"+"\t\t\tfill: gray;\n"+'\t\t}</style> \x3c!-- CART LIST PANEL --\x3e <div id="cart-menu-container"> \x3c!-- TOP --\x3e <div id="cart-top-container"> <div id="cart-header-title-container"> <div ng-if="productCount==0">{{MSG_CART_EMPTY}}</div> <div ng-if="productCount>0"> <div>Your cart contains {{productCount}} products.</div> <div>Display {{visualizedProductsFrom}} to {{visualizedProductsTo}} of {{productCount}} products.</div> </div> </div> \x3c!-- Floating Buttons --\x3e <span id="cart-header-top-right-container"> <span id="cart-panel-close-button-container" ng-click="closeCartMenuPanel()" title="{{toggleClosePanelTitle}}"> <svg id="cart-panel-close-button"> <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"> </svg> </span> <span id="cart-panel-resize-button" ng-click="toggleExpandCartMenu()" ng-class="toggleButtonClass" title="{{toggleExpandTitle}}"></span> </span> </div> \x3c!-- MID - Instantiate ROW-cart-ITEMS --\x3e <div id="cart-middle-container"> <div ng-repeat="product in model"> <cart-item product="product" uuid="product.uuid"></cart-item> </div> </div> \x3c!-- BOTTOM --\x3e \x3c!-- Pagination Handlers --\x3e <div id="cart-bottom-container" ng-hide="productCount==0"> <span>Products per page:</span> <select ng-model="productsPerPage" title="{{productsPerPageTitle}}"> <option value="25">25</option> <option value="50">50</option> <option value="75">75</option> <option value="100">100</option> <option value="125">125</option> <option value="150">150</option> </select> <span ng-class="{\'disabled-button\': (currentPage == 1 || pageCount == 1)}"> <span class="select-page-button" ng-click="gotoFirstPage()" title="{{goToFirstPageTitle}}">&lt;&lt;</span> <span class="select-page-button" ng-click="gotoPreviousPage()" title="{{goToPreviousPageTitle}}">&lt;</span> </span> <span>page: </span> <input id="cart-page-selector" ng-click="selectPageDidClicked(this)" ng-model="currentPage" title="{{currentPageTitle}}"> <span>of {{pageCount}} </span> <span ng-class="{\'disabled-button\': (currentPage == pageCount || pageCount == 1)}"> <span class="select-page-button" ng-click="gotoNextPage()" title="{{goToNextPageTitle}}">&gt;</span> <span class="select-page-button" ng-click="gotoLastPage()" title="{{goToLastPageTitle}}">&gt;&gt;</span> </span>  \x3c!-- Download Cart icon-button --\x3e <span ng-if="hasProducts" class="svg-cart-icon-container" title="{{downloadCartTitle}}"> <svg class="svg-cart-icon" ng-click="downloadCart()" viewbox="0 0 22 22"> <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"> </svg> </span> \x3c!-- Clear Cart icon-button --\x3e <span ng-if="hasProducts" class="svg-cart-icon-container" title="{{clearCartTitle}}"> <svg class="svg-cart-icon" ng-click="clearCart()" viewbox="0 0 22 22"> <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"> </svg> </span> \x3c!-- Cart Menu footprints icon-button --\x3e \x3c!-- <span class="svg-cart-icon-container" title="{{cartFootprintsTitle}}">\n'+'\t\t\t\t<svg ng-class="{\'activate-button\': (toggleShowCartFootprints)}" class="svg-cart-icon" ng-click="getCartFootprints()"\n'+'\t\t\t\t viewBox="0 0 22 22">\n'+'\t\t\t\t\t<path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z" />\n'+"\t\t\t\t</svg>\n"+"\t\t\t</span> --\x3e </div> </div></div>");a.put("components/cart/cart-item/view.html","<div> \x3c!-- /* \n"+"\t\t* Data HUb Service (DHuS) - For Space data distribution.\n"+"\t\t* Copyright (C) 2013,2014,2015,2016,2017,2018 European Space Agency (ESA)\n"+"\t\t* Copyright (C) 2013,2014,2015,2016,2017,2018 GAEL Systems\n"+"\t\t* Copyright (C) 2013,2014,2015,2016,2017,2018 Serco Spa\n"+"\t\t* \n"+"\t\t* This file is part of DHuS software sources.\n"+"\t\t*\n"+"\t\t* This program is free software: you can redistribute it and/or modify\n"+"\t\t* it under the terms of the GNU Affero General Public License as\n"+"\t\t* published by the Free Software Foundation, either version 3 of the\n"+"\t\t* License, or (at your option) any later version.\n"+"\t\t* \n"+"\t\t* This program is distributed in the hope that it will be useful,\n"+"\t\t* but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"\t\t* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"\t\t* GNU Affero General Public License for more details.\n"+"\t\t*\n"+"\t\t* You should have received a copy of the GNU Affero General Public License\n"+"\t\t* along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\t\t*/ --\x3e <style>/*CSS for injected Popover*/\n"+"\t\t.popover {\n"+"\t\t\tborder: none !important;\n"+"\t\t\tbackground-color: transparent;\n"+"\t\t\tbox-shadow: none;\n"+"\t\t\tborder-radius: 10px;\n"+"\t\t\theight: 200px;\n"+"\t\t\twidth: 100%;\n"+"\t\t}\n"+"\n"+"\t\t.popover-content {\n"+"\t\t\tdisplay: inline-block;\n"+"\t\t\tbackground-color: rgba(243, 243, 243, 1);\n"+"\t\t\tbox-shadow: 3px 5px 19px 0 rgba(49, 50, 50, .62);\n"+"\t\t\tborder-radius: 10px;\n"+"\t\t\tposition: relative;\n"+"\t\t\theight: 200px;\n"+"\t\t\twidth: 100%;\n"+"\t\t}\n"+"\n"+"\t\t.arrow,\n"+"\t\t.arrow::after {\n"+"\t\t\tborder-right-color: rgba(243, 243, 243, 1);\n"+"\t\t}\n"+"\n"+"\t\t/*End Popover injected*/\n"+"\n"+"\t\t.cart-item {\n"+"\t\t\twidth: 100%;\n"+"\t\t\tposition: relative;\n"+"\t\t\tbackground-color: inherit;\n"+"\t\t\tborder-top: 1px solid #bdc3c7;\n"+"\t\t\tcolor: #34495e;\n"+"\t\t\theight: 103px;\n"+"\t\t\tpadding-top: 5px;\n"+"\t\t\tcursor: default;\n"+"\t\t}\n"+"\n"+"\t\t.cart-item-offline {\n"+"\t\t\tbackground-color: darkgrey;\n"+"\t\t\tmargin-left: 2px;\n"+"\t\t\tmargin-right: 2px;\n"+"\t\t\tpadding-bottom: 6px !important;\n"+"\t\t\tmargin-top: -2px;\n"+"\t\t}\n"+"\n"+"\t\t.placeholder-image {\n"+"\t\t\twidth: 100px;\n"+"\t\t\theight: auto;\n"+"\t\t\tdisplay: block;\n"+"\t\t\tbackground-repeat: no-repeat;\n"+"\t\t\tbackground-image: url('data:image/jpg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAA6AEADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDxWUZc1PcriOPn+AfyqKX73/1qlueUjz/dH8q9apJvm7HVFLQS3I2t9KYOX+nFS2yjYxoBxIRXbk3LPEcik1dP8CMUmqfM1cui0lu7hVtomO7O0MegHqeOmRzxWv4e+02OqjNpL5ggYmNlJJycZxwQPbuO+DRpd1bWlu0lw5OwrKiIclWUHDH5SB8xUDnr7HB6qa8hciG2i/eGIFV4Q5OfcdCD+J65ryM0nJYmUHTundXf4u/o/wBTuwkYqip89no7fpY2NPRLm+VmAOxCN+B8zEnPTr3z0711GqSyN8P/ABHDuBVNMuRxnH+rb/A/n3rhdLuUxsVJFTGVZkYAjsQ3Tp+PtkYrpb7UH/4Q/wAQWwwGXTbnepwdv7tuR+FfF4qhKNWPNpZr8z1sTarh3y69TwB+XxU067lj/wB0fyqBv9aQT3qzP9yPv8o/lX3dd2crHgU1e1xbdCEb6VGR+844/rU9scqw9qjK4k6d646VWcJKUXZnVOEZRt0Oz8MCWaJzIQsKkZkd+FwuSfwAX24FbSPNKCoZXCxkeVv5JyAcjkEHKYyQfm5xmuc8OOxhvEd8QbULLkgnntjOfTGOeB7HvYdLnNtG67eEZZI2ZS456FQSCcL155JBAK8+Vjq6p4qU6m7/AMjuoQ58PGCf9XMy0tN8k0s8UTOF3yx7z+7IHAbjJwe5PGSOwNTa1K6eHdW/eIwNjOmFGONhA/D/AD3qzbRvJL5sqoVGOmGY9MgZB9MfgfaoPEEMaeGdSFqxMa2U+AvQgoeegzxjnJzx2rz6k3VcXLudNo01KK7HjUgPmValOY4/90fyqvJy55qdv9SmfT0r7DEatnz9LoPtujfSpQm489ajtSCH+lTxjJry6ztqehQV9GaWmX9xpF6l1bMysAAdpwSOMjPbpXoGn6nPfr+5tpBbAF/P2BcLvzgMODgZyAfXGCdo8+WLKqT6V6P4Ie1j09CEGbcs5fdwrdSPmOAcHOfujnJUcnx8bOL95rVHpQg4U7otxWzT3qqsZkeMAMSeGUkgJjOAeGyTjpiofEtpJF4d1ppBk/Y5mIZTlD5ZBA6d+K1rXVpdkrNYrFBKFcXLh0DufvZI6qAT8p+b5cZyQK5/xNr/AJ+havZw2UzK9nMRJ5RC4CnLAEEgepz36815yVbnWml0Dnzppdjxp8eYf6VPP/q0Ax90VXb75qxOflj/AN0V9/iI2bPnKT2JLRcIw74q1APmAIqtbf6t/pVuDqv1rx670PUw6uzVQYUY9K2dE1C5055mhZQjKSdw4XlcsMc525H4msde30rUsRmOfP8Azy/qK8WtK002rn0FCiqlFxZ3JhluRaGC7VtzbGjl2/u1yG4X+EgEADHG8EletM8SiKXwvrD2kZEKWFwgQMQoUIQCPXjHqefrXOaQi/2toEe0eXJaKHXHDAmUkEd810niMlfAF2ykhv7PkTI67fJPH04HHtWWLoexrQhe+vp1f+R40avNTlLun+R//9k=');\n"+"\t\t}\n"+"\n"+"\t\t.cart-thumbnail {\n"+"\t\t\tmax-height: 64px;\n"+"\t\t\tmax-width: 64px;\n"+"\t\t}\n"+"\n"+"\t\t.cart-row-middle {\n"+"\t\t\tdisplay: table;\n"+"\t\t\twidth: 100%;\n"+"\t\t\tmargin-top: 10px;\n"+"\t\t}\n"+"\n"+"\t\t.logo,\n"+"\t\t#cart-row-attributes {\n"+"\t\t\tdisplay: table-cell;\n"+"\t\t\tvertical-align: top;\n"+"\t\t}\n"+"\n"+"\t\t#cart-row-attributes {\n"+"\t\t\tpadding-left: 10px;\n"+"\t\t\tfont-size: 12px;\n"+"\t\t\tfont-style: italic;\n"+"\t\t}\n"+"\n"+"\t\t.logo {\n"+"\t\t\twidth: 60px;\n"+"\t\t\theight: 60px;\n"+"\t\t\topacity: 1;\n"+"\t\t}\n"+"\n"+"\t\t#cart-item {\n"+"\t\t\tline-height: 20px;\n"+"\t\t}\n"+"\n"+"\t\t#cart-item .list-item-title {\n"+"\t\t\tfont-size: 12px;\n"+"\t\t\tfont-weight: bold;\n"+"\t\t}\n"+"\n"+"\t\t.item-title {\n"+"\t\t\toverflow-x: hidden;\n"+"\t\t\ttext-overflow: ellipsis;\n"+"\t\t    white-space: nowrap;\n"+"\t\t}\n"+"\n"+"\t\t.cart-item-button {\n"+"\t\t\tfont-size: 16px !important;\n"+"\t\t\tmargin-left: 15px;\n"+"\t\t\tcursor: pointer;\n"+"\t\t}\n"+"\n"+"\t\t.cart-item-button-top {\n"+"\t\t\tfont-size: 14px !important;\n"+"\t\t\tmargin-left: 10px;\n"+"\t\t\tcursor: pointer;\n"+"\t\t}\n"+"\n"+"\t\t.cart-button {\n"+"\t\t\tbackground-color: #505050;\n"+"\t\t\tcolor: #fff;\n"+"\t\t\tfont-family: 'Open Sans', Helvetica, sans-serif;\n"+"\t\t\tfont-size: 12px;\n"+"\t\t\ttext-align: center;\n"+"\t\t\tline-height: 15px;\n"+"\t\t\theight: 15px;\n"+"\t\t\tdisplay: inline;\n"+"\t\t\tmargin-left: 1px;\n"+"\t\t\tmargin-right: 2px;\n"+"\t\t\tpadding: 1px 5px 1px 5px;\n"+"\t\t}\n"+"\n"+"\t\t.button.S1 {\n"+"\t\t\tbackground-color: #DC143C;\n"+"\t\t}\n"+"\n"+"\t\t.button.S2 {\n"+"\t\t\tbackground-color: #0f9d58;\n"+"\t\t}\n"+"\n"+"\t\t.button.S3 {\n"+"\t\t\tbackground-color: #191970;\n"+"\t\t}\n"+"\n"+"\t\t.overflow {\n"+"\t\t\twhite-space: nowrap;\n"+"\t\t\toverflow-x: hidden;\n"+"\t\t\ttext-overflow: ellipsis;\n"+"\t\t}\n"+"\n"+"\t\t.listrow {\n"+"\t\t\tmargin-top: -5px;\n"+"\t\t\toverflow: hidden;\n"+"\t\t\ttext-overflow: ellipsis;\n"+"\t\t}\n"+"\n"+"\t\t.cart-default-color {\n"+"\t\t\tcolor: black;\n"+"\t\t}\n"+"\n"+"\t\t.cart-offline {\n"+"\t\t\tcolor: #fff;\n"+"\t\t\tbackground-color: #505050;\n"+"\t\t\tfont-family: 'Open Sans', Helvetica, sans-serif;\n"+"\t\t\tfont-size: 12px;\n"+"\t\t\tpadding: 1px 5px 1px 5px;\n"+"\t\t\tpadding-left: 0px !important;\n"+"\t\t\tfloat: right;\n"+"\t\t}\n"+"\n"+"\t\t.undraggable {\n"+"\t\t\t-moz-user-select: none;\n"+"\t\t\t-webkit-user-drag: none;\n"+"\t\t}\n"+"\n"+"\t\t.unselectable {\n"+"\t\t\t-webkit-touch-callout: none;\n"+"\t\t\t-webkit-user-select: none;\n"+"\t\t\t-khtml-user-select: none;\n"+"\t\t\t-moz-user-select: none;\n"+"\t\t\t-ms-user-select: none;\n"+"\t\t\tuser-select: none;\n"+"\t\t}\n"+"\n"+"\t\t/*Buttons floating on bottom right*/\n"+"\t\t.cart-floating-bottom-right-buttons {\n"+"\t\t\tposition: absolute;\n"+"\t\t\tbottom: 1px;\n"+"\t\t\tright: 20px;\n"+"\t\t\tmargin-bottom: 3px;\n"+"\t\t}\n"+"\n"+"\t\t.popover-image {\n"+"\t\t\topacity: 1;\n"+"\t\t\tmax-width: 100%;\n"+"\t\t\tmax-height: 200px;\n"+"\t\t\tdisplay: inline-block;\n"+"\t\t\tposition: absolute;\n"+"\t\t\tmargin: auto;\n"+"\t\t\tpadding: 5px;\n"+"\t\t\ttop: 0;\n"+"\t\t\tleft: 0;\n"+"\t\t\tright: 0;\n"+"\t\t\tbottom: 0;\n"+'\t\t}</style> \x3c!-- CART-ROW-ITEM VIEW--\x3e <div id="cart-item" class="cart-item" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()"> <div class="row" ng-class="{ \' cart-item-offline\': !product.transformation && product.offline}"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding-right: 20px"> \x3c!-- <span ng-if="showSelect" style="float: right;" class="glyphicon"\n'+"            ng-class=\"{ ' glyphicon-unchecked': !product.selected, 'glyphicon-check': product.selected, 'selected-item': product.selected }\"\n"+'            ng-click="selectProduct(); $event.stopPropagation();" title="Select product"></span> --\x3e <span ng-if="!product.transformation || product.transformation.status == \'COMPLETED\'" style="float: right; width:14px; height:14px" class="glyphicon glyphicon-unchecked" ng-click="selectProduct();" title="{{attributeTitles[0]}}" ng-class="{ \' glyphicon-unchecked\': !product.selected, \'glyphicon-check\': product.selected, \'selected-item\': product.selected }"></span> <span ng-show="!product.transformation && product.isOrderOn" class="pop-order-trigger glyphicon glyphicon-time" data-trigger="hover" data-toggle="pop-order" data-container="body" data-placement="right"> </span> <span ng-show="product.transformation" class="pop-order-trigger glyphicon glyphicon-time" data-trigger="hover" data-toggle="pop-transformation" data-container="body" data-placement="right"> </span> \x3c!-- Product Offline --\x3e <div ng-if="!product.transformation && product.offline" class="row item-title"> <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10" style="display: flex; padding: 0px"> <span class="cart-button raised" style="{{product.label_style}}">{{mission}}</span> <span ng-if="product.instrument" class="cart-button raised" style="{{product.instrlabel_style}}">{{product.instrument}}</span> <div class="list-item-title" style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap" title="{{product.identifier}}">{{product.identifier}}</div> </div> \x3c!-- <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1" style="padding: 0px;"> --\x3e \x3c!-- </div> --\x3e <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2" style="padding: 0px"> <span class="cart-button raised cart-offline">Offline</span> \x3c!-- lta status --\x3e </div> </div> \x3c!-- Product not Offline --\x3e <div ng-if="!product.offline || product.transformation" class="row item-title"> \x3c!-- <div style="float: right; width:14px; height:14px;" class="glyphicon glyphicon-unchecked"\n'+'\t\t\t\t\t\tng-click="selectProduct();" title="{{attributeTitles[0]}}"\n'+"\t\t\t\t\t\tng-class=\"{ ' glyphicon-unchecked': !product.selected, 'glyphicon-check': product.selected, 'selected-item': product.selected }\">\n"+'\t\t\t\t\t</div> --\x3e <div style="display: flex; padding: 0px"> <span class="cart-button raised" style="{{product.label_style}}">{{mission}}</span> <span ng-if="product.instrument" class="cart-button raised" style="{{product.instrlabel_style}}">{{product.instrument}}</span> <div class="list-item-title overflow" title="{{product.identifier}}"> <span ng-if="product.transformation && product.transformation.status != \'COMPLETED\'" style="font-weight: normal">L2A On-Demand from Parent: </span> {{product.identifier}}</div> </div> </div> <div class="row listrow"> \x3c!-- cart row middle: contains the quicklook and the attributes --\x3e <div class="cart-row-middle"> \x3c!-- QuickLook --\x3e <div ng-show="showquicklook"> <a class="logo unselectable undraggable"> <img ng-if="!product.quicklook" style="opacity:1" src="images/placeholder.png" alt="no placeholder" draggable="false"> \x3c!-- popover on hover on thumbnail --\x3e <div data-trigger="hover" data-toggle="pop" data-container="body" data-placement="right"> <img ng-if="product.quicklook" class="cart-thumbnail" ng-src="{{quicklooksrc}}" alt="quicklook" draggable="false"> </div> </a> </div> \x3c!-- Attributes: Download Url, SUMMARY: Mission, Instrument, Sensing Date, Size --\x3e <div id="cart-row-attributes"> <div ng-if="!product.transformation || product.transformation.status == \'COMPLETED\'" class="overflow"> Download URL:<a href="{{link}}">{{link}}</a></div> <div title="{{summary}}" style="white-space: nowrap"> <span ng-if="satellitename"> Mission:<span class="cart-default-color">{{satellitename}}</span></span> <span ng-if="product.instrument">Instrument:<span class="cart-default-color">{{product.instrument}}</span></span> <span ng-if="date">Sensing Date:<span class="cart-default-color">{{date}}</span></span> <span ng-if="size">Size:<span class="cart-default-color">{{size}}</span></span> </div> </div> </div> </div> </div> </div> \x3c!-- FLOATING UI Buttons --\x3e <div ng-if="!product.transformation || product.transformation.status == \'COMPLETED\'" class="cart-floating-bottom-right-buttons" ng-show="visibleItemButton"> <div class="glyphicon-screenshot glyphicon cart-item-button" ng-click="zoomCart(product)" title="{{attributeTitles[1]}}"></div> <div class="glyphicon-trash glyphicon cart-item-button" ng-click="removeProductFromCart();" title="{{attributeTitles[2]}}"></div> <div class="glyphicon-eye-open glyphicon cart-item-button" ng-click="showProductDetails();" title="{{attributeTitles[3]}}"></div> <div class="glyphicon-download-alt glyphicon cart-item-button" ng-click="downloadProduct() ;" title="{{attributeTitles[4]}}"></div> </div> </div> </div>');a.put("components/cart/product-cart/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016,2017,2018 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016,2017,2018 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016,2017,2018 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'  --\x3e <style></style> <div ng-repeat="product in model "> <cart-item product="product" uuid="product.uuid"></cart-item> </div> </div>');a.put("components/cart/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016,2017,2018 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016,2017,2018 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016,2017,2018 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>#content {\n"+"        max-height: calc(100% - 120px);\n"+"        overflow-y: auto !important;\n"+"        overflow-x: hidden;\n"+"        padding: 0px 3% !important;\n"+"        margin-top: 60px !important;\n"+"        position: absolute;\n"+"        width: 100%;\n"+"    }\n"+"\n"+"    #container {\n"+"        height: 100%;\n"+"        width: 100%;\n"+"        margin: 0;\n"+"        padding: 0;\n"+"    }\n"+"    header {\n"+"        width: 100%;\n"+"        height: 60px;\n"+"        position: fixed;\n"+"        background: white;\n"+"        text-align: center;\n"+"        font-size: 16px;\n"+"        font-weight: bold;\n"+"        padding-top: 20px;\n"+"    }\n"+"\n"+"    @media screen and (min-width: 993px) and (max-width: 1200px) {\n"+"\n"+"        header {\n"+"           font-size: 16px;\n"+"        }\n"+"      }\n"+"\n"+"      @media screen and (min-width: 769px) and(max-width: 992px) {\n"+"\n"+"        header {\n"+"           font-size: 14px;\n"+"        }\n"+"      }\n"+"\n"+"      @media screen and (max-width: 768px) {\n"+"\n"+"        header {\n"+"           font-size: 14px;\n"+"        }\n"+"      }\n"+"\n"+"    footer {\n"+"        width: 100%;\n"+"        height: 60px;\n"+"        position: fixed;\n"+"        bottom: 0;\n"+"        line-height: 60px;\n"+"        padding-left: 5px;\n"+"    }\n"+"\n"+"    footer .cart-button {\n"+"        border-radius: 0px;\n"+"        vertical-align: middle;\n"+"        margin-bottom: 20px;\n"+"        line-height: 20px;\n"+"        font-size: 14px;\n"+"        font-weight: bold;\n"+"        margin-right: 20px;\n"+"        position: relative;\n"+"        padding: 10px;\n"+"        text-decoration: none;\n"+"        text-align: center;\n"+"        background-color: rgb(55, 59, 80);\n"+"        color: white;\n"+"        cursor: pointer;\n"+"        float: right;\n"+"        margin-top: 10px;\n"+"    }\n"+"\n"+"    footer .cart-button:hover {\n"+"        background-color: rgb(55, 59, 80) !important;\n"+"        color: white !important;\n"+"        cursor: pointer !important;\n"+"    }\n"+"\n"+"    footer .cart-button:disabled {\n"+"        background-color: #afb1b9 !important;\n"+"        cursor: default !important;\n"+"        color: black !important;\n"+"    }\n"+"\n"+"    .disabled-button{\n"+"        opacity:0.4;\n"+"        cursor: default;\n"+"     }\n"+"\n"+"     .select-page-button{\n"+"        cursor: pointer;\n"+"     }\n"+"\n"+"     .page-selector-input{\n"+"        width: 40px !important;\n"+"        cursor: pointer;\n"+"        margin: 0px;\n"+"        padding: 7px;\n"+"        height: 30px;\n"+"        border-bottom: 1px solid #9A9A9A !important;\n"+"        text-align: center;\n"+"\t\tdisplay: inline;\n"+"     }\n"+"\n"+"\t .pagination-button{\n"+"        margin-right: 2.5px;\n"+"        margin-left: 2.5px;\n"+"        display:inline;\n"+"     }\n"+"\n"+"     .page-label {\n"+"        font-weight: bold;\n"+"        font-size: 13px;\n"+"        padding-right: 3px;\n"+"     }\n"+"\n"+"     .cart-toolbar {\n"+"        line-height: 60px;\n"+"        vertical-align: middle;\n"+"     }\n"+"\n"+"     .fab-cart {\n"+"        vertical-align: middle;\n"+"        margin-top: 10px;\n"+"        /* padding: 15px; */\n"+"        line-height: 25px;\n"+"        font-size: 16px;\n"+"        position: relative;\n"+"        float: right;\n"+"        display: block;\n"+"        height: 40px;\n"+"        width: 40px;\n"+"        color: #fff;\n"+"        fill: currentColor;\n"+"        cursor: pointer;\n"+"        text-decoration: none;\n"+"        border-radius: 50%;\n"+"        overflow: hidden;\n"+"        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"        background-color: #373B50;\n"+"        text-align: center;\n"+"        padding: 5px;\n"+"        display:none;\n"+"        margin-right: 20px;\n"+"      }\n"+"\n"+"      .fab-cart-disabled {\n"+"        background-color: #afb1b9 !important;\n"+"        cursor: default !important;\n"+"        color: black !important;\n"+"      }\n"+"\n"+"      .cart-title {\n"+"        overflow: hidden;\n"+"        text-overflow: ellipsis;\n"+"        white-space: nowrap;\n"+'      }</style> <div id="container"> <header class="cart-header row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8 cart-title" ng-if="productCount==0"> Your cart is empty </div> <div class="col-md-10 col-sd-8 col-xs-8 cart-title" ng-if="productCount>0"> Your cart contains {{productCount}} products. Display {{visualizedProductsFrom}} to {{visualizedProductsTo}} of {{productCount}} products. </div> <div class="col-md-1 col-sd-3 col-xs-3"><gotomap-button></gotomap-button></div> </header> <div id="content"> <product-cart></product-cart> </div> <footer> <div> <span class="page-label"> <span id="page-label-id"> Products per page: </span> <select ng-model="productsPerPage" id="cart-pagination"> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="5">5</option> <option value="25">25</option> <option value="50">50</option> <option value="75">75</option> <option value="100">100</option> <option value="125">125</option> <option value="150">150</option> </select> </span> <span ng-class="{\'disabled-button\': currentPage == 1}" class="select-page-button" ng-click="gotoFirstPage()"> &lt;&lt; </span> <span ng-class="{\'disabled-button\': currentPage == 1}" class="select-page-button" ng-click="gotoPreviousPage()"> &lt; </span> <span> <span id="page-num-id" class="page-label" ng-hide="productCount==0">Page#: </span> <input id="cart-page-selector" ng-click="selectPageDidClicked(this)" type="text" class="form-control page-selector-input" ng-model="currentPage" ng-hide="productCount==0"> <span id="page-count-id" class="page-label large-device" ng-hide="productCount==0">of {{pageCount}}</span> </span> <span ng-class="{\'disabled-button\': (currentPage == pageCount || pageCount == 1 || pageCount == 0 ) }" class="select-page-button" ng-click="gotoNextPage()"> &gt; </span> <span ng-class="{\'disabled-button\': ( currentPage == pageCount || pageCount == 1 || pageCount == 0 )}" class="select-page-button" ng-click="gotoLastPage()"> &gt;&gt; </span> <button class="btn btn-default cart-button" ng-click="clearCart()" ng-disabled="productCount == 0">CLEAR CART</button> <button class="btn btn-default cart-button" ng-click="downloadCart()" ng-disabled="productCount == 0">DOWNLOAD CART</button> <div id="show-clear-button" class="fab-cart pan glyphicon glyphicon-erase dhus-button" ng-click="clearCart()" title="Clear Cart" ng-class="{\'fab-cart-disabled\': ( productCount == 0)}"> </div> <div id="show-download-button" class="fab-cart pan glyphicon glyphicon-download-alt dhus-button" ng-click="downloadCart()" title="Download Cart" ng-class="{\'fab-cart-disabled\': ( productCount == 0)}"> </div> </div> </footer> </div> </div> </div>')
;a.put("components/collection-details/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>#collDetailsView {\n"+"      margin-top: 20px\n"+"    }\n"+"   #collDetailsView   .group            { \n"+"      position:relative; \n"+"      margin-bottom:45px; \n"+"    }\n"+"\n"+"    #collDetailsView   .checkFunction  { \n"+"      top: -5px; \n"+"    }\n"+"    #collDetailsView input               {\n"+"      font-size:13px;\n"+"      padding:2px;\n"+"      display:block;\n"+"      width:100%;\n"+"      border:none;\n"+"      border-bottom:1px solid #757575;\n"+"    }\n"+"    #collDetailsView input:focus         { outline:none; }\n"+"\n"+"    /* LABEL ======================================= */\n"+"    #collDetailsView label                {\n"+"      color:#999; \n"+"      font-size:13px;\n"+"      font-weight:normal;\n"+"      position:absolute;\n"+"      pointer-events:none;  \n"+"      top:-20px;\n"+"      transition:0.2s ease all; \n"+"      -moz-transition:0.2s ease all; \n"+"      -webkit-transition:0.2s ease all;\n"+"    }\n"+"\n"+"    /* active state */\n"+"    #collDetailsView input:focus ~ .lbl-field, #collDetailsView input:valid ~ .lbl-field, #collDetailsView input:invalid ~ .lbl-field  {      \n"+"      font-size:13px;\n"+"      color: rgb(55, 59, 80);\n"+"    }\n"+"\n"+"    #collDetailsView input:invalid ~ .invalid-field{\n"+"        display: inline-block !important;\n"+"    }\n"+"\n"+"    #collDetailsView .invalid-field {\n"+"      display:none;\n"+"      color: rgb(255,110,64);\n"+"      top: 30px;\n"+"      font-size: 9px;\n"+"    }\n"+"\n"+"    #collDetailsView .coll-details{\n"+"      border: 1px solid;\n"+"      margin-bottom: 30px;\n"+'    }</style> <div id="collDetailsView"> <div class="row"> <div class="col-md-6 group"> <input id="coll-detail-name" type="text" ng-model="collection.name" value="collection.name" ng-blur="checkName()" ng-readonly="disableField"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Name</label> <label class="invalid-field" id="collcheckName">Name is empty</label> </div> <div class="col-md-6 group" hidden> <input type="text" ng-model="collection.parent.name" value="collection.parent.name" readonly> <label class="lbl-field">Parent</label> </div> </div> <div class="row"> <div class="col-md-12 col-sd-12 col-xs-12"> <label class="lbl-field">Description</label> <textarea class="coll-details form-control" ng-model="collection.description" rows="2" ng-readonly="disableField"></textarea> </div> </div> </div> </div> </div>');a.put("components/collection-management/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>/** Easy Tree style */\n"+".collection-management-tree {\n"+"    min-height: 20px;\n"+"    margin-bottom: 20px;\n"+"    background-color: #fff;\n"+"    color: #373b50;\n"+"    border: none;\n"+"    border-top: none;\n"+"    padding-bottom: 15px;\n"+"    font-size: 12px;    \n"+"    font-family: 'Oxygen', sans-serif;\n"+"    overflow-x: auto;\n"+"    background: none !important;\n"+"}\n"+"\n"+".collection-management-tree > ul {\n"+"    padding-left: 15px;\n"+"}\n"+"\n"+".collection-management-tree li {\n"+"    list-style-type: none;\n"+"    margin: 0;\n"+"    padding: 10px 5px 0 5px;\n"+"    position: relative\n"+"}\n"+"\n"+".collection-management-tree li::before, .collection-management-tree li::after {\n"+"    content: '';\n"+"    left: -30px;\n"+"    position: absolute;\n"+"    right: auto\n"+"}\n"+"\n"+".collection-management-tree li::before {\n"+"    border-left: 1px solid #eaeaea;\n"+"    bottom: 50px;\n"+"    height: 100%;\n"+"    top: 0;\n"+"    width: 1px\n"+"}\n"+"\n"+".collection-management-tree li::after {\n"+"    border-top: 1px solid #eaeaea;\n"+"    height: 20px;\n"+"    top: 25px;\n"+"    width: 35px\n"+"}\n"+"\n"+".collection-management-tree li > span {\n"+"    \n"+"    display: flex;\n"+"    padding: 5px;\n"+"    text-decoration: none\n"+"}\n"+"\n"+".collection_checkbox{    \n"+"    width: 30px;\n"+"}\n"+"\n"+".collection-management-tree li.parent_li > a {\n"+"    cursor: pointer\n"+"}\n"+"\n"+"\n"+".collection-management-tree > ul > li::before, .collection-management-tree > ul > li::after {\n"+"    border: 0\n"+"}\n"+"\n"+".collection-management-tree li:last-child::before {\n"+"    height: 30px\n"+"}\n"+"\n"+"\n"+"\n"+".collection-management-tree li > span:hover{\n"+"    background: #eaeaea; \n"+"}\n"+".collection-management-tree li.parent_li > span:hover + ul li.li_selected span {\n"+"    background: #eaeaea;\n"+"   \n"+"}\n"+"\n"+".collection-management-tree li > span > a {\n"+"    color: #373b50;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+".collection-management-tree li:hover > span:hover > a:hover {\n"+"   \n"+"    background: #eaeaea;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+".collection-management-tree li > span > span.glyphicon-folder-close, .collection-management-tree li > span > span.glyphicon-folder-open {\n"+"    margin-right: 5px;\n"+"}\n"+"\n"+".collection-management-tree li.li_selected > span, .collection-management-tree li.li_selected > span > a {\n"+"    background: #eaeaea;\n"+"   \n"+"}\n"+"\n"+".collection-management-tree li.li_selected > span:hover, .collection-management-tree li.li_selected > span:hover > a {\n"+"    background: #eaeaea;\n"+"   \n"+"}\n"+"\n"+".collection-management-tree .collection-management-tree-toolbar {\n"+"    background-color: #fff;\n"+"}\n"+"\n"+".collection-management-tree .collection-management-tree-toolbar > div {\n"+"    display: inline-block;\n"+"}\n"+"\n"+".collection-management-tree .collection-management-tree-toolbar > div > button {\n"+"    border-radius: 0;\n"+"    margin: 20px 5px;\n"+"}\n"+"\n"+".collection-management-tree .collection-management-tree-toolbar .create .input-group {\n"+"    top: -15px;\n"+"    margin-left: 5px;\n"+"    margin-right: 5px;\n"+"}\n"+"\n"+".collection-management-tree .collection-management-tree-toolbar .create .input-group input {\n"+"    border-radius: 0;\n"+"}\n"+"\n"+".collection-management-tree .collection-management-tree-toolbar .create .input-group button {\n"+"    border-radius: 0;\n"+"}\n"+"\n"+"\n"+"#jquery-script-menu {\n"+"position: fixed;\n"+"height: 90px;\n"+"width: 100%;\n"+"top: 0;\n"+"left: 0;\n"+"\n"+"background: #fff;\n"+"z-index: 999999;\n"+"padding: 10px 0;\n"+"-webkit-box-sizing:content-box;\n"+"-moz-box-sizing:content-box;\n"+"box-sizing:content-box;\n"+"}\n"+"\n"+".jquery-script-center {\n"+"width: 960px;\n"+"margin: 0 auto;\n"+"}\n"+".jquery-script-center ul {\n"+"width: 212px;\n"+"float:left;\n"+"line-height:45px;\n"+"margin:0;\n"+"padding:0;\n"+"list-style:none;\n"+"}\n"+".jquery-script-center a {\n"+"    text-decoration:none;\n"+"}\n"+".jquery-script-ads {\n"+"width: 728px;\n"+"height:90px;\n"+"float:right;\n"+"}\n"+".jquery-script-clear {\n"+"clear:both;\n"+"height:0;\n"+"}\n"+"\n"+".collection-checkbox {\n"+"    font-weight: bold;\n"+"    font-size: 18px;\n"+"    /*display: none;*/\n"+"}\n"+"\n"+".collection-title {\n"+"    display: flex;\n"+"    padding: 5px;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+".collection-title-checkbox {\n"+"    width: 30px;\n"+"    margin-left: 20px !important;\n"+"}\n"+"\n"+"a, a:hover .collname {\n"+"    color:  black !important;\n"+"    text-decoration: none;\n"+'}</style> <div ng-if="collections.length == 0" class="row collection-checkbox">No Collections Found</div> <div ng-if="collections.length > 0" class="row collection-checkbox"> <span class="collection-title">Collections</span> </div> \x3c!--<span class="collection-title"><input type="button" class="collection-title-checkbox"  ng-click="getSelectedCollections()">get selected</span> --\x3e <div id="collection-management-tree" class="collection-management-tree"></div> </div> </div> ');a.put("components/collection-products/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.coll-product-container{\n"+"        background-color: white;\n"+"        /*min-width: 40%;*/\n"+"        width: 100%;\n"+"        height: 400px;        \n"+"        \n"+"     }\n"+"\n"+"     .coll-product-footer {\n"+"        font-size: 14px;\n"+"     }\n"+"\n"+"     @media screen and (min-width: 993px) and (max-width: 1200px) { \n"+"        /*.list-container {\n"+"          min-width: 50%  !important;\n"+"        }*/\n"+"        .coll-product-footer {\n"+"           font-size: 14px;\n"+"        }\n"+"      } \n"+"\n"+"      @media screen and (min-width: 769px) and(max-width: 992px) { \n"+"        /*.list-container {\n"+"          min-width: 100% !important;\n"+"        }*/\n"+"        .coll-product-footer {\n"+"           font-size: 13px;\n"+"        }\n"+"      } \n"+"\n"+"      @media screen and (max-width: 768px) { \n"+"        /*.list-container {\n"+"          min-width: 100% !important;\n"+"        }*/\n"+"        .coll-product-footer {\n"+"           font-size: 13px;\n"+"        }\n"+"      }   \n"+"\n"+"     \n"+"\n"+"     .coll-product-list-container{\n"+"        padding: 0px 0px 0px 0px;\n"+"        position: relative;\n"+"        height: 100%;\n"+"        width: 100%;          \n"+"     }\n"+"\n"+"     .coll-product-list{\n"+"        position: relative;\n"+"        height: calc(100% - 85px);\n"+"        width: 100%;\n"+"        background-color: white;\n"+"        overflow-y: auto;\n"+"        overflow-x: auto; \n"+"     }\n"+"\n"+"     .coll-product-toolbar{\n"+"        position: relative;        \n"+"        width: 100%;\n"+"        background-color: white;\n"+"        padding: 10px;\n"+"        background-color: #FAFAFA;\n"+"        height: 50px;\n"+"     }\n"+"\n"+"     .coll-product-header{\n"+"        position: relative;\n"+"        height: 35px;\n"+"        background-color: white;\n"+"        top: 0px;        \n"+"        background-color: #FAFAFA;\n"+"     }\n"+"\n"+"     .disabled-button{\n"+"        opacity:0.4;\n"+"        cursor: default;\n"+"     }\n"+"\n"+"     .select-page-button{\n"+"        cursor: pointer;\n"+"     }\n"+"\n"+"     .page-selector-input{\n"+"        width: 40px !important;\n"+"        cursor: pointer;\n"+"        margin: 0px;\n"+"        padding: 7px;\n"+"        height: 30px;\n"+"        border: 1px solid #9A9A9A !important;\n"+"        display: inline;\n"+"     }\n"+"     \n"+"     .pagination-button{\n"+"        margin-right: 2.5px;\n"+"        margin-left: 2.5px;\n"+"        display:inline;\n"+"     }\n"+"\n"+"     .coll-product-list-checkbox {\n"+"        width: 30px;                \n"+"     }\n"+"\n"+"     .coll-product{\n"+"        display: inline-flex;\n"+"        font-size: 12px;\n"+"        font-family: Roboto;\n"+"        height: 25px;\n"+"        line-height: 20px;\n"+"     }\n"+"\n"+"     .coll-product:hover{\n"+"        background: #dedede;\n"+"     }\n"+"\n"+"     .coll-products-left {\n"+"        float: left; \n"+"        display: inline-flex;\n"+"        padding-left: 0px;\n"+"     }\n"+"\n"+"     .coll-products-right {\n"+"        float: right; \n"+"        display: inline-flex;        \n"+'     }</style> <div id="coll-product-container" class="coll-product-container"> <div class="coll-product-list-container"> <div class="coll-product-header"> <div class="listtitle row" style="color: #373b50; font-weight: bold; font-size: 14px"> <div ng-show="productCount" class="col-md-6 coll-products-left"> <input type="checkbox" id="product-list-all-checkbox" class="coll-product-list-checkbox" ng-disabled="disableField" ng-click="checkUncheckAll()"> <span> Display {{visualizedProductsFrom}} to {{visualizedProductsTo}} of {{productCount}} products.</span> </div> <div class="listtitle" style="color: #373b50; font-weight: bold; margin-left:5px" ng-hide="productCount">No products found.</div> <div class="col-md-6 coll-products-right"> <span>Search: </span> <input type="text" style="padding: 0px !important" ng-model="filter" id="coll-product-search"> </div> </div> </div> <div class="coll-product-list"> <div ng-repeat="product in products "> <div class="coll-product" title="{{product.identifier}}"><input type="checkbox" class="coll-product-list-checkbox" ng-disabled="disableField" ng-checked="isChecked(product)" ng-click="addRemoveProduct(product)"><span>{{product.identifier}}</span></div> </div> </div> <div class="coll-product-toolbar"> <div style="height:20px"> <span ng-show="productCount" id="coll-product-per-page-label" class="coll-product-footer">Products per page:</span> <select ng-show="productCount" title="Products per page" ng-model="productsPerPage" ng-change="updateValue()" id="coll-product-pagination"> <option value="25">25</option> <option value="50">50</option> <option value="75">75</option> <option value="100">100</option> <option value="125">125</option> <option value="150">150</option> </select> <span ng-show="productCount" class="pagination-button" ng-class="{\'disabled-button\': (productCount == 0 || currentPage == 1)}" class="select-page-button" ng-click="gotoFirstPage()" class="pagination-button"> &lt;&lt; </span> <span ng-show="productCount" class="pagination-button" ng-class="{\'disabled-button\': (productCount == 0 ||  currentPage == 1)}" class="select-page-button" ng-click="gotoPreviousPage()"> &lt; </span> <span id="coll-page-label-id" ng-show="productCount" class="coll-product-footer">page:</span> <input ng-show="productCount" id="coll-product-page-selector" ng-click="selectPageDidClicked(this)" type="text" class="page-selector-input" ng-model="currentPage" title="Enter page number"> <span ng-show="productCount" class="coll-product-footer">of {{pageCount}}</span> <span ng-show="productCount" class="pagination-button" ng-class="{\'disabled-button\': (productCount == 0 || currentPage == pageCount || pageCount == 1 || pageCount == 0 ) }" class="select-page-button" ng-click="gotoNextPage()"> &gt; </span> <span ng-show="productCount" class="pagination-button" ng-class="{\'disabled-button\': ( productCount == 0 || currentPage == pageCount || pageCount == 1 || pageCount == 0 )}" class="select-page-button" ng-click="gotoLastPage()"> &gt;&gt; </span> </div> </div> </div> </div> </div> </div>');a.put("components/collection-upload/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>/** Easy Tree style */\n"+".collection-upload-tree {\n"+"    min-height: 20px;\n"+"    margin-bottom: 20px;\n"+"    background-color: #fff;\n"+"    color: #373b50;\n"+"    border: none;\n"+"    border-top: none;\n"+"    padding-bottom: 15px;\n"+"    font-size: 12px;    \n"+"    font-family: 'Oxygen', sans-serif;\n"+"    overflow-x: auto;\n"+"    background: none !important;\n"+"}\n"+"\n"+".collection-upload-tree > ul {\n"+"    padding-left: 15px;\n"+"}\n"+"\n"+".collection-upload-tree li {\n"+"    list-style-type: none;\n"+"    margin: 0;\n"+"    padding: 10px 5px 0 5px;\n"+"    position: relative\n"+"}\n"+"\n"+".collection-upload-tree li::before, .collection-upload-tree li::after {\n"+"    content: '';\n"+"    left: -30px;\n"+"    position: absolute;\n"+"    right: auto\n"+"}\n"+"\n"+".collection-upload-tree li::before {\n"+"    border-left: 1px solid #eaeaea;\n"+"    bottom: 50px;\n"+"    height: 100%;\n"+"    top: 0;\n"+"    width: 1px\n"+"}\n"+"\n"+".collection-upload-tree li::after {\n"+"    border-top: 1px solid #eaeaea;\n"+"    height: 20px;\n"+"    top: 25px;\n"+"    width: 35px\n"+"}\n"+"\n"+".collection-upload-tree li > span {\n"+"    \n"+"    display: flex;\n"+"    padding: 5px;\n"+"    text-decoration: none\n"+"}\n"+"\n"+".collection_checkbox{    \n"+"    width: 30px;\n"+"}\n"+"\n"+".collection-upload-tree li.parent_li > span {\n"+"    cursor: pointer\n"+"}\n"+"\n"+"\n"+".collection-upload-tree > ul > li::before, .collection-upload-tree > ul > li::after {\n"+"    border: 0\n"+"}\n"+"\n"+".collection-upload-tree li:last-child::before {\n"+"    height: 30px\n"+"}\n"+"\n"+"\n"+"\n"+".collection-upload-tree li > span:hover{\n"+"    background: #eaeaea; \n"+"}\n"+".collection-upload-tree li.parent_li > span:hover + ul li.li_selected span {\n"+"    background: #eaeaea;\n"+"   \n"+"}\n"+"\n"+".collection-upload-tree li > span > a {\n"+"    color: #373b50;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+".collection-upload-tree li:hover > span:hover > a:hover {\n"+"   \n"+"    background: #eaeaea;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+".collection-upload-tree li > span > span.glyphicon-folder-close, .collection-upload-tree li > span > span.glyphicon-folder-open {\n"+"    margin-right: 5px;\n"+"}\n"+"\n"+".collection-upload-tree li.li_selected > span, .collection-upload-tree li.li_selected > span > a {\n"+"    background: #eaeaea;\n"+"   \n"+"}\n"+"\n"+".collection-upload-tree li.li_selected > span:hover, .collection-upload-tree li.li_selected > span:hover > a {\n"+"    background: #eaeaea;\n"+"   \n"+"}\n"+"\n"+".collection-upload-tree .collection-upload-tree-toolbar {\n"+"    background-color: #fff;\n"+"}\n"+"\n"+".collection-upload-tree .collection-upload-tree-toolbar > div {\n"+"    display: inline-block;\n"+"}\n"+"\n"+".collection-upload-tree .collection-upload-tree-toolbar > div > button {\n"+"    border-radius: 0;\n"+"    margin: 20px 5px;\n"+"}\n"+"\n"+".collection-upload-tree .collection-upload-tree-toolbar .create .input-group {\n"+"    top: -15px;\n"+"    margin-left: 5px;\n"+"    margin-right: 5px;\n"+"}\n"+"\n"+".collection-upload-tree .collection-upload-tree-toolbar .create .input-group input {\n"+"    border-radius: 0;\n"+"}\n"+"\n"+".collection-upload-tree .collection-upload-tree-toolbar .create .input-group button {\n"+"    border-radius: 0;\n"+"}\n"+"\n"+"\n"+"#jquery-script-menu {\n"+"position: fixed;\n"+"height: 90px;\n"+"width: 100%;\n"+"top: 0;\n"+"left: 0;\n"+"\n"+"background: #fff;\n"+"z-index: 999999;\n"+"padding: 10px 0;\n"+"-webkit-box-sizing:content-box;\n"+"-moz-box-sizing:content-box;\n"+"box-sizing:content-box;\n"+"}\n"+"\n"+".jquery-script-center {\n"+"width: 960px;\n"+"margin: 0 auto;\n"+"}\n"+".jquery-script-center ul {\n"+"width: 212px;\n"+"float:left;\n"+"line-height:45px;\n"+"margin:0;\n"+"padding:0;\n"+"list-style:none;\n"+"}\n"+".jquery-script-center a {\n"+"    text-decoration:none;\n"+"}\n"+".jquery-script-ads {\n"+"width: 728px;\n"+"height:90px;\n"+"float:right;\n"+"}\n"+".jquery-script-clear {\n"+"clear:both;\n"+"height:0;\n"+"}\n"+"\n"+".collection-checkbox {\n"+"    font-weight: bold;\n"+"    font-size: 18px;\n"+"    /*display: none;*/\n"+"}\n"+"\n"+".collection-title {\n"+"    display: flex;\n"+"    padding: 5px;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+".collection-title-checkbox {\n"+"    width: 30px;\n"+"    margin-left: 20px !important;\n"+'}</style> <div ng-if="collections.length == 0" class="row collection-checkbox">No Collections Found</div> <div ng-if="collections.length > 0" class="row collection-checkbox"> <span class="collection-title"><input type="checkbox" class="collection-title-checkbox" ng-model="isAllSelected" ng-click="selectDeselectAll(isAllSelected)">Collections</span> </div> \x3c!--<span class="collection-title"><input type="button" class="collection-title-checkbox"  ng-click="getSelectedCollections()">get selected</span> --\x3e <div id="collection-upload-tree" class="collection-upload-tree"></div> </div> </div> ')
;a.put("components/datastore/datastore-details/view.html","<div> <span> \x3c!-- \n"+"      Data HUb Service (DHuS) - For Space data distribution.\n"+"      Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"      Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"      Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"      \n"+"      This file is part of DHuS software sources.\n"+"     \n"+"      This program is free software: you can redistribute it and/or modify\n"+"      it under the terms of the GNU Affero General Public License as\n"+"      published by the Free Software Foundation, either version 3 of the\n"+"      License, or (at your option) any later version.\n"+"      \n"+"      This program is distributed in the hope that it will be useful,\n"+"      but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"      GNU Affero General Public License for more details.\n"+"     \n"+"      You should have received a copy of the GNU Affero General Public License\n"+"      along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"     \n"+"    --\x3e </span> <style>#dsDetails .panel-heading {\n"+"\t\t\theight: 30px;\n"+"\t\t\tbackground-color: lightgray;\n"+"\t\t\tline-height: 10px;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .panel-default {\n"+"\t\t\tborder: 1px #aaa solid;\n"+"\t\t\twidth: 50%;\n"+"\t\t}\n"+"\n"+"\t\t@media screen and (min-width: 993px) and (max-width: 1200px) {\n"+"\t\t\t#dsDetails .panel-default {\n"+"\t\t\t\twidth: 50%;\n"+"\t\t\t}\n"+"\t\t}\n"+"\n"+"\t\t@media screen and (min-width: 769px) and(max-width: 992px) {\n"+"\t\t\t#dsDetails .panel-default {\n"+"\t\t\t\twidth: 100%;\n"+"\t\t\t}\n"+"\t\t}\n"+"\n"+"\t\t@media screen and (max-width: 768px) {\n"+"\t\t\t#dsDetails .panel-default {\n"+"\t\t\t\twidth: 100%;\n"+"\t\t\t}\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .group {\n"+"\t\t\tposition: relative;\n"+"\t\t\tmargin-bottom: 35px;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .checkFunction {\n"+"\t\t\ttop: -5px;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails input {\n"+"\t\t\tfont-size: 13px;\n"+"\t\t\tpadding: 2px;\n"+"\t\t\tdisplay: block;\n"+"\t\t\twidth: 100%;\n"+"\t\t\tborder: none;\n"+"\t\t\tborder-bottom: 1px solid #757575;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails input:focus {\n"+"\t\t\toutline: none;\n"+"\t\t}\n"+"\n"+"\t\t/* LABEL ======================================= */\n"+"\t\t#dsDetails label {\n"+"\t\t\tcolor: #999;\n"+"\t\t\tfont-size: 13px;\n"+"\t\t\tfont-weight: normal;\n"+"\t\t\tposition: absolute;\n"+"\t\t\tpointer-events: none;\n"+"\t\t\ttop: 10px;\n"+"\t\t\ttransition: 0.2s ease all;\n"+"\t\t\t-moz-transition: 0.2s ease all;\n"+"\t\t\t-webkit-transition: 0.2s ease all;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .fixed-field {\n"+"\t\t\ttop: -15px;\n"+"\t\t\tfont-size: 13px;\n"+"\t\t\tcolor: rgb(55, 59, 80);\n"+"\t\t}\n"+"\n"+"\t\t/* active state */\n"+"\t\t#dsDetails input:focus~.lbl-field,\n"+"\t\t#dsDetails input:valid~.lbl-field,\n"+"\t\t#dsDetails input:invalid~.lbl-field {\n"+"\t\t\ttop: -15px;\n"+"\t\t\tfont-size: 13px;\n"+"\t\t\tcolor: rgb(55, 59, 80);\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails input:invalid~.invalid-field {\n"+"\t\t\tdisplay: inline-block !important;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .invalid-field {\n"+"\t\t\tdisplay: none;\n"+"\t\t\tcolor: rgb(255, 110, 64);\n"+"\t\t\ttop: 30px;\n"+"\t\t\tfont-size: 9px;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .select-label {\n"+"\t\t\ttop: -20px;\n"+"\t\t\tcolor: rgb(55, 59, 80);\n"+"\t\t\tfont-size: 13px;\n"+"\t\t}\n"+"\n"+"\t\t/* BOTTOM BARS ================================= */\n"+"\t\t#dsDetails .bar {\n"+"\t\t\tposition: relative;\n"+"\t\t\tdisplay: block;\n"+"\t\t\twidth: 100%;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .bar:before,\n"+"\t\t.bar:after {\n"+"\t\t\tcontent: '';\n"+"\t\t\theight: 2px;\n"+"\t\t\twidth: 0;\n"+"\t\t\tbottom: 1px;\n"+"\t\t\tposition: absolute;\n"+"\t\t\tbackground: rgb(55, 59, 80);\n"+"\t\t\ttransition: 0.2s ease all;\n"+"\t\t\t-moz-transition: 0.2s ease all;\n"+"\t\t\t-webkit-transition: 0.2s ease all;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .bar:before {\n"+"\t\t\tleft: 50%;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .bar:after {\n"+"\t\t\tright: 50%;\n"+"\t\t}\n"+"\n"+"\t\t/* active state */\n"+"\t\t#dsDetails input:focus~.bar:before,\n"+"\t\t#dsDetails input:focus~.bar:after {\n"+"\t\t\twidth: 50%;\n"+"\t\t}\n"+"\n"+"\t\t/* HIGHLIGHTER ================================== */\n"+"\t\t#dsDetails .highlight {\n"+"\t\t\tposition: absolute;\n"+"\t\t\theight: 60%;\n"+"\t\t\twidth: 100px;\n"+"\t\t\ttop: 25%;\n"+"\t\t\tleft: 0;\n"+"\t\t\tpointer-events: none;\n"+"\t\t\topacity: 0.5;\n"+"\t\t}\n"+"\n"+"\t\t/* active state */\n"+"\t\t#dsDetails input:focus~.highlight {\n"+"\t\t\t-webkit-animation: inputHighlighter 0.3s ease;\n"+"\t\t\t-moz-animation: inputHighlighter 0.3s ease;\n"+"\t\t\tanimation: inputHighlighter 0.3s ease;\n"+"\t\t}\n"+"\n"+"\t\t/* Style Select Field */\n"+"\t\t#dsDetails select {\n"+"\t\t\tfont-family: inherit;\n"+"\t\t\tbackground-color: transparent;\n"+"\t\t\twidth: 100%;\n"+"\t\t\tpadding: 2px 0;\n"+"\t\t\tfont-size: 13px;\n"+"\t\t\tborder: none;\n"+"\t\t\tborder-bottom: 1px solid rgb(0, 0, 0);\n"+"\t\t}\n"+"\n"+"\t\t/* Remove focus */\n"+"\t\t#dsDetails select:focus {\n"+"\t\t\toutline: none;\n"+"\t\t}\n"+"\n"+"\t\t/* ANIMATIONS ================ */\n"+"\t\t@-webkit-keyframes inputHighlighter {\n"+"\t\t\tfrom {\n"+"\t\t\t\tbackground: rgb(55, 59, 80);\n"+"\t\t\t}\n"+"\n"+"\t\t\tto {\n"+"\t\t\t\twidth: 0;\n"+"\t\t\t\tbackground: transparent;\n"+"\t\t\t}\n"+"\t\t}\n"+"\n"+"\t\t@-moz-keyframes inputHighlighter {\n"+"\t\t\tfrom {\n"+"\t\t\t\tbackground: rgb(55, 59, 80);\n"+"\t\t\t}\n"+"\n"+"\t\t\tto {\n"+"\t\t\t\twidth: 0;\n"+"\t\t\t\tbackground: transparent;\n"+"\t\t\t}\n"+"\t\t}\n"+"\n"+"\t\t@keyframes inputHighlighter {\n"+"\t\t\tfrom {\n"+"\t\t\t\tbackground: rgb(55, 59, 80);\n"+"\t\t\t}\n"+"\n"+"\t\t\tto {\n"+"\t\t\t\twidth: 0;\n"+"\t\t\t\tbackground: transparent;\n"+"\t\t\t}\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .fab-details {\n"+"\t\t\tbackground-color: #373B50 !important;\n"+"\t\t\tvertical-align: middle;\n"+"\t\t\tmargin-left: 20px;\n"+"\t\t\tpadding: 6px;\n"+"\t\t\tline-height: 20px;\n"+"\t\t\tfont-size: 15px;\n"+"\t\t\tposition: relative;\n"+"\t\t\tdisplay: block;\n"+"\t\t\theight: 40px;\n"+"\t\t\twidth: 40px;\n"+"\t\t\tcolor: #fff;\n"+"\t\t\tfill: currentColor;\n"+"\t\t\tcursor: pointer;\n"+"\t\t\ttext-decoration: none;\n"+"\t\t\tborder-radius: 50%;\n"+"\t\t\toverflow: hidden;\n"+"\t\t\ttransition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"\t\t\ttransition-delay: 0.2s;\n"+"\t\t\tbox-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"\t\t}\n"+"\n"+"\t\t@media screen and (max-width: 480px) {\n"+"\t\t\t#dsDetails .fab-details {\n"+"\t\t\t\tbackground-color: #373B50 !important;\n"+"\t\t\t\tvertical-align: middle;\n"+"\t\t\t\tmargin-left: 20px;\n"+"\t\t\t\tpadding: 6px;\n"+"\t\t\t\tline-height: 20px;\n"+"\t\t\t\tfont-size: 15px;\n"+"\t\t\t\tposition: relative;\n"+"\t\t\t\tdisplay: block;\n"+"\t\t\t\theight: 32px !important;\n"+"\t\t\t\twidth: 32px !important;\n"+"\t\t\t\tcolor: #fff;\n"+"\t\t\t\tfill: currentColor;\n"+"\t\t\t\tcursor: pointer;\n"+"\t\t\t\ttext-decoration: none;\n"+"\t\t\t\tborder-radius: 50%;\n"+"\t\t\t\toverflow: hidden;\n"+"\t\t\t\ttransition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"\t\t\t\ttransition-delay: 0.2s;\n"+"\t\t\t\tbox-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"\t\t\t}\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .fab-reset-eviction {\n"+"\t\t\tfont-size: 26px;\n"+"\t\t}\n"+"\n"+"\t\t@media screen and (max-width: 480px) {\n"+"\t\t\t#dsDetails .fab-reset-eviction {\n"+"\t\t\t\tfont-size: 22px;\n"+"\t\t\t\tpadding: 4px;\n"+"\t\t\t}\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .fab-details.fab-right {\n"+"\t\t\tfloat: right;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .fab-details.fab-left {\n"+"\t\t\tfloat: left;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .modal-dialog {\n"+"\t\t\twidth: 60%;\n"+"\t\t\tmax-height: 65%;\n"+"\t\t\tmargin: 0px auto;\n"+"\t\t\tposition: relative;\n"+"\t\t\tmargin-top: 2%;\n"+"\t\t\tmargin-bottom: 2%;\n"+"\t\t\t/*position: fixed;*/\n"+"\t\t\theight: 65%;\n"+"\t\t\tpadding: 0;\n"+"\t\t\tbackground: white;\n"+"\t\t\tpadding-bottom: 30px;\n"+"\t\t\toverflow-y: auto;\n"+"\t\t\toverflow-x: hidden;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .btn {\n"+"\t\t\tbackground: #373B50;\n"+"\t\t\tcolor: #FFF;\n"+"\t\t}\n"+"\n"+"\t\t@media screen and (min-width: 500px) {\n"+"\t\t\t#dsDetails .eviction-details-modal-dialog {\n"+"\t\t\t\twidth: 60% !important;\n"+"\t\t\t\tmax-width: 60% !important;\n"+"\t\t\t}\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .modal-header {\n"+"\t\t\tbackground: #373B50;\n"+"\t\t\tcolor: #FFF;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .sectiontitle {\n"+"\t\t\tbackground-color: rgb(55, 59, 80);\n"+"\t\t\tcolor: #fff;\n"+"\t\t\ttext-align: left;\n"+"\t\t\tpadding: 10px;\n"+"\t\t\tmargin-bottom: 15px;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .modal-container {\n"+"\t\t\tpadding: 20px;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .eviction-details-modal {\n"+"\t\t\tposition: fixed;\n"+"\t\t\ttop: 0;\n"+"\t\t\tright: 0;\n"+"\t\t\tbottom: 0;\n"+"\t\t\tleft: 0;\n"+"\t\t\toverflow: hidden;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .eviction-details-modal-content {\n"+"\t\t\tposition: absolute;\n"+"\t\t\ttop: 0;\n"+"\t\t\tright: 0;\n"+"\t\t\tbottom: 0;\n"+"\t\t\tleft: 0;\n"+"\t\t\tborder-radius: 0;\n"+"\t\t\tbox-shadow: none;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .eviction-details-modal-header {\n"+"\t\t\tposition: absolute;\n"+"\t\t\ttop: 0;\n"+"\t\t\tright: 0;\n"+"\t\t\tleft: 0;\n"+"\t\t\theight: 40px;\n"+"\t\t\tpadding: 10px;\n"+"\t\t\tborder: 0;\n"+"\t\t\ttext-align: center;\n"+"\t\t\tfont-size: bold;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .eviction-details-modal-body {\n"+"\t\t\tposition: absolute;\n"+"\t\t\ttop: 51px;\n"+"\t\t\tbottom: 30px;\n"+"\t\t\twidth: 100%;\n"+"\t\t\toverflow-y: auto;\n"+"\t\t\toverflow-x: hidden;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .eviction-details-modal-footer {\n"+"\t\t\tposition: absolute;\n"+"\t\t\tright: 0;\n"+"\t\t\tbottom: 0;\n"+"\t\t\tleft: 0;\n"+"\t\t\tbackground: #f1f3f5;\n"+"\t\t\tpadding: 5px;\n"+"\t\t\theight: 50px;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .modal-footer .left {\n"+"\t\t\ttext-align: left;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .modal-footer .right {\n"+"\t\t\ttext-align: right;\n"+"\t\t}\n"+"\n"+"\t\t#dsDetails .eviction-details-modal-row {\n"+"\t\t\tmargin: 0px;\n"+"\t\t}\n"+"\n"+"\t\t.datastore-checkbox-attribute {\n"+"\t\t\tdisplay: inline-block;\n"+"\t\t\twidth: 30px;\n"+'\t\t}</style> <div class="modal fade eviction-details-modal" data-keyboard="false" data-backdrop="static" id="dsDetails" tabindex="-1" role="dialog" aria-labelledby="evictionTitle" aria-hidden="true"> <div class="modal-dialog eviction-details-modal-dialog"> \x3c!-- COMMON FIELDS FOR DATA STORES --\x3e \x3c!-- TOP --\x3e <div class="modal-header eviction-details-modal-header">Data Store Properties</div> \x3c!-- MIDDLE --\x3e <div class="modal-body eviction-details-modal-body container-fluid"> <div class="row" style="margin-top: 5px"> \x3c!-- Type --\x3e <div class="group col-md-6"> <div ng-if="!isNew"> <input type="text" ng-model="datastore.Type" value="datastore.Type" readonly> <span class="highlight"></span> <span class="bar"></span> <label class="fixed-field">Type</label> </div> <div ng-if="isNew" ng-click="resetErrorDivs()"> <label class="select-label">Data Store Type</label> <select ng-model="datastore.Type"> <option value="" ng-selected></option> <option ng-if="openstack_ds" value="Open Stack Data Store">Open Stack Data Store</option> <option ng-if="hfs_ds" value="HFS Data Store">HFS Data Store</option> <option ng-if="gmp_ds" value="GMP Data Store">GMP Data Store</option> <option ng-if="remote_ds" value="DHuS Remote Data Store">DHuS Remote Data Store</option> \x3c!-- <option value="PDGS Data Store">PDGS Data Store</option> --\x3e </select> <label class="invalid-field" id="dscheckType">Type empty</label> </div> </div> <div class="group col-md-6"> <label class="select-label">Link Eviction</label> <select ng-model="datastore.Eviction"> \x3c!-- <option ng-value="datastore.Eviction">{{datastore.Eviction}}</option> --\x3e <option ng-repeat="x in evictionsName" value="{{x}}">{{x}}</option> </select> </div> \x3c!-- <div class="group col-md-6" ng-if="!isNew">\n'+'\t\t\t\t\t\t<input type="text" ng-model="datastore.Eviction" readonly=\'true\'>\n'+'\t\t\t\t\t\t<label class="fixed-field ">Linked Eviction</label>\n'+'\t\t\t\t\t</div> --\x3e </div> <div class="row"> \x3c!-- DS Name --\x3e <div class="group col-md-6"> <div ng-if="!isNew"> <input type="text" ng-model="datastore.Name" value="datastore.Name" readonly> <span class="highlight"></span> <span class="bar"></span> <label class="fixed-field">Name</label> </div> <div ng-if="isNew"> <input type="text" ng-model="datastore.Name" value="datastore.Name" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Name</label> <label class="invalid-field" id="dscheckName">Name empty</label> </div> </div> \x3c!-- Priority --\x3e <div class="group col-md-6"> <input type="number" ng-model="datastore.Priority" value="datastore.Priority" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Priority</label> <label class="invalid-field" id="dscheckPriority">Priority empty</label> </div> \x3c!-- Maximum Size --\x3e <div class="group col-md-6" ng-if="datastore.Type !== &quot;DHuS Remote Data Store&quot;"> <div> <input type="number" ng-model="datastore.MaximumSize" value="datastore.MaximumSize" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Maximum Size</label> <label class="invalid-field" id="dscheckMaximumSize">Maximum Size empty</label> </div> </div> \x3c!-- Current Size --\x3e <div class="group col-md-6" ng-if="datastore.Type !== &quot;DHuS Remote Data Store&quot;"> <div> <input type="number" ng-model="datastore.CurrentSize" value="datastore.CurrentSize" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Current Size</label> <label class="invalid-field" id="dscheckCurrentSize">Current Size empty</label> </div> </div> \x3c!-- AutoEviction --\x3e <div class="group col-md-6" ng-if="datastore.Type !== &quot;DHuS Remote Data Store&quot;"> <div> <span>Auto Eviction</span> <input tabindex="-1" type="checkbox" style="display:inline-block; width:30px" ng-model="datastore.AutoEviction" ng-click="resetErrorDivs()" ng-init="false"> </div> </div> \x3c!-- Readonly --\x3e <div class="group col-md-6"> <div> <span>Read Only</span> <input tabindex="-1" type="checkbox" style="display:inline-block; width:30px" ng-model="datastore.ReadOnly" ng-click="resetErrorDivs()" ng-init="false"> </div> </div> </div> \x3c!-- Specific Options for mdoels --\x3e <div class="row"> <div class="group col-md-6"> <span><b>Data Store Options: {{datastore.Type}}</b></span> </div> </div> \x3c!-- Open Stack Options --\x3e <div class="row" ng-if="datastore.Type == &quot;Open Stack Data Store&quot;"> \x3c!-- Provider --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.Provider" value="datastore.Provider" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Provider</label> <label class="invalid-field" id="dscheckProvider">Provider empty</label> </div> \x3c!-- Identity --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.Identity" value="datastore.Identity" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Identity</label> <label class="invalid-field" id="dscheckIdentity">Identity empty</label> </div> \x3c!-- Credential --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.Credential" value="datastore.Credential" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Credential</label> <label class="invalid-field" id="dscheckCredential">Credential empty</label> </div> \x3c!-- Url --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.Url" value="datastore.Url" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Url</label> <label class="invalid-field" id="dscheckUrl">Url empty</label> </div> \x3c!-- Region --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.Region" value="datastore.Region" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Region</label> <label class="invalid-field" id="dscheckRegion">Region empty</label> </div> \x3c!-- Container --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.Container" value="datastore.Container" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Container</label> <label class="invalid-field" id="dscheckContainer">Container empty</label> </div> </div> \x3c!-- HFS Options --\x3e <div class="row" ng-if="datastore.Type == &quot;HFS Data Store&quot;"> <div class="group col-md-6"> <input type="text" ng-model="datastore.Path" value="datastore.Path" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Path</label> <label class="invalid-field" id="dscheckPath">Path Empty</label> </div> <div class="group col-md-6"> <input type="number" ng-model="datastore.MaxFileDepth" value="datastore.MaxFileDepth" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">MaxFileDepth</label> <label class="invalid-field" id="dscheckMaxFileDepth">MaxFileDepth empty</label> </div> <div class="group col-md-6"> <input type="number" ng-model="datastore.MaxItems" value="datastore.MaxItems" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">MaxItems</label> <label class="invalid-field" id="dscheckMaxItems">MaxItems empty</label> </div> </div> \x3c!-- GMP Options --\x3e <div class="row" ng-if="datastore.Type == &quot;GMP Data Store&quot;"> \x3c!-- GMPRepoLocation --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.RepoLocation" value="datastore.RepoLocation" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">RepoLocation</label> <label class="invalid-field" id="dscheckGMPRepoLocation">RepoLocation Empty</label> </div> \x3c!-- HFSLocation --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.HFSLocation" value="datastore.HFSLocation" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">HFSLocation</label> <label class="invalid-field" id="dscheckHFSLocation">HFSLocation Empty</label> </div> \x3c!-- MaxQueuedRequest --\x3e <div class="group col-md-6"> <input type="number" ng-model="datastore.MaxQueuedRequest" value="datastore.MaxQueuedRequest" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">MaxQueuedRequest</label> <label class="invalid-field" id="dscheckMaxQueuedRequest">MaxQueuedRequest empty</label> </div> \x3c!-- Quotas MaxQueryPerUser --\x3e <div class="group col-md-6"> <input type="number" ng-model="datastore.QuotasMaxQueryPerUser" value="datastore.QuotasMaxQueryPerUser" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Quotas MaxQueryPerUser</label> <label class="invalid-field" id="dscheckQuotasMaxQueryPerUser">Quotas MaxQueryPerUser empty</label> </div> \x3c!-- Quotas Timespan --\x3e <div class="group col-md-6"> <input type="number" ng-model="datastore.QuotasTimespan" value="datastore.QuotasTimespan" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Quotas Timespan</label> <label class="invalid-field" id="dscheckQuotasTimespan">Quotas Timespan empty</label> </div> \x3c!-- IsMaster --\x3e <div class="group col-md-6"> <span>IsMaster</span> <input tabindex="-1" type="checkbox" style="display:inline-block; width:30px" ng-model="datastore.IsMaster" ng-click="resetErrorDivs()"> </div> \x3c!-- DatabaseUrl --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.MySQLConnectionInfoDatabaseUrl" value="datastore.MySQLConnectionInfoDatabaseUrl" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">MySQL DatabaseUrl</label> <label class="invalid-field" id="dscheckMySQLConnectionInfoDatabaseUrl">MySQL DatabaseUrl Empty</label> </div> \x3c!-- User --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.MySQLConnectionInfoUser" value="datastore.MySQLConnectionInfoUser" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">MySQL User</label> <label class="invalid-field" id="dscheckMySQLConnectionInfoUser">MySQL User Empty</label> </div> \x3c!-- Password --\x3e <div class="group col-md-6"> <input type="password" ng-model="datastore.MySQLConnectionInfoPassword" value="datastore.MySQLConnectionInfoPassword" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">MySQL Password</label> <label class="invalid-field" id="dscheckMySQLConnectionInfoPassword">MySQL Password Empty</label> </div> \x3c!-- Configuration AgentId --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.ConfigurationAgentId" value="datastore.ConfigurationAgentId" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">AgentId</label> <label class="invalid-field" id="dscheckConfigurationAgentId">AgentId Empty</label> </div> \x3c!-- Configuration TargetId --\x3e <div class="group col-md-6"> <input type="text" ng-model="datastore.ConfigurationTargetId" value="datastore.ConfigurationTargetId" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">TargetId</label> <label class="invalid-field" id="dscheckConfigurationTargetId">TargetId Empty</label> </div> </div> \x3c!-- Remote DS Options --\x3e <div class="row" ng-if="datastore.Type == &quot;DHuS Remote Data Store&quot;"> <div class="group col-md-6"> <input type="text" ng-model="datastore.ServiceUrl" value="datastore.ServiceUrl" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">ServiceUrl</label> <label class="invalid-field" id="dscheckRMServiceUrl">ServiceUrl Empty</label> </div> <div class="group col-md-6"> <input type="text" ng-model="datastore.Login" value="datastore.Login" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Login</label> <label class="invalid-field" id="dscheckRMLogin">Login Empty</label> </div> <div class="group col-md-6"> <input type="password" ng-model="datastore.Password" value="datastore.Password" ng-click="resetErrorDivs()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Password</label> <label class="invalid-field" id="dscheckRMPassword">Password Empty</label> </div> </div> \x3c!-- PDGS Options TODO... --\x3e </div> \x3c!-- BOTTOM --\x3e <div class="modal-footer eviction-details-modal-footer"> <div class="left col-md-6"> <div ng-show="isNew" class="left-button fab-details fab-left fab-reset-eviction" title="Reset Fields" ng-click="resetFields()"> <div class="glyphicon glyphicon-erase"></div> </div> </div> \x3c!-- Close --\x3e <div class="right col-md-6"> <div class="fab-details fab-right" title="Close" ng-click="close()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet"> <g> <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"> </g> </svg> </div> \x3c!-- Save --\x3e <div class="fab-details fab-right" title="Save" ng-click="save()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet"> <g> <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"> </g> </svg> </div> </div> </div> </div> </div> </div>');a.put("components/datastore/datastore-list/datastore-item/view.html","<div> <span> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e </span> <div> <style>#datastore-item {\n"+"\t\t\t\twidth: 100%;\n"+"\t\t\t\tposition: relative;\n"+"\t\t\t\tbackground-color: inherit;\n"+"\t\t\t\tborder-top: 1px solid #bdc3c7;\n"+"\t\t\t\tcolor: #34495e;\n"+"\t\t\t\theight: 90px;\n"+"\t\t\t\tpadding-top: 4px;\n"+"\t\t\t}\n"+"\n"+"\t\t\t#datastore-item .attributes {\n"+"\t\t\t\tfont-size: 13px;\n"+"\t\t\t\tpadding-left: 10px;\n"+"\t\t\t\tfont-style: italic;\n"+"\t\t\t}\n"+"\n"+"\t\t\t#ds-name {\n"+"\t\t\t\tfont-size: 13px;\n"+"\t\t\t\tfont-weight: bold;\n"+"\t\t\t\tline-height: 20px;\n"+"\t\t\t}\n"+"\n"+"\t\t\t.ds-property {\n"+"\t\t\t\tfont-size: 13px;\n"+"\t\t\t\tfont-style: italic;\n"+"\t\t\t}\n"+"\n"+"\t\t\t.ds-value {\n"+"\t\t\t\tcolor: black;\n"+"\t\t\t}\n"+"\n"+"\t\t\t.item-buttons {\n"+"\t\t\t\tposition: absolute;\n"+"\t\t\t\tright: 15px;\n"+"\t\t\t\tbottom: 10px;\n"+"\t\t\t}\n"+"\n"+"\t\t\t.item-button {\n"+"\t\t\t\tcursor: pointer;\n"+'\t\t\t}</style> <div id="datastore-item" class="row col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()"> \x3c!-- Common Properties --\x3e <div id="ds-name" title="{{datastore.Name}}">{{datastore.Name}} <span style="float: right">{{datastore.dstype}}</span> </div> <div class="ds-property">Priority:<span class="ds-value">{{datastore.Priority}}</span></div> <div class="ds-property">Read Only:<span class="ds-value">{{datastore.ReadOnly}}</span></div> \x3c!-- Open Stack --\x3e <div ng-if="datastore.dstype == &quot;Open Stack Data Store&quot;" class="ds-property"> Container: <span class="ds-value">{{datastore.Container}}</span> </div> \x3c!-- HFS --\x3e <div ng-if="datastore.dstype == &quot;HFS Data Store&quot;" class="ds-property"> Path: <span class="ds-value">{{datastore.Path}}</span> </div> \x3c!-- GMP --\x3e <div ng-if="datastore.dstype == &quot;GMP Data Store&quot;" class="ds-property"> HFSLocation: <span class="ds-value">{{datastore.HFSLocation}}</span> IsMaster: <span class="ds-value">{{datastore.IsMaster}}</span> </div> \x3c!-- Remote DS --\x3e <div ng-if="datastore.dstype == &quot;DHuS Remote Data Store&quot;" class="ds-property"> ServiceUrl: <span class="ds-value">{{datastore.ServiceUrl}}</span> </div> <div class="item-buttons" ng-show="visibleItemButton"> <div class="glyphicon glyphicon-remove item-button" ng-click="deleteDatastore()" title="Delete {{objName}}"></div> <div class="glyphicon glyphicon-pencil item-button" ng-click="editDatastore()" title="Edit {{objName}}"></div> </div> </div> </div> </div>')
;a.put("components/datastore/datastore-list/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016-2017-2018-2019 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016-2017-2018-2019 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016-2017-2018-2019 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"--\x3e <div> <style>#datastoreContainer {\n"+"\t\t\t\theight: 100%;\n"+"\t\t\t\twidth: 100%;\n"+"\t\t\t\tmargin: 0;\n"+"\t\t\t\tpadding: 0;\n"+"\t\t\t}\n"+"\n"+"\t\t\t#datastoreContainer header {\n"+"\t\t\t\twidth: 95%;\n"+"\t\t\t\theight: 60px;\n"+"\t\t\t\tposition: inherit;\n"+"\t\t\t\tbackground: white;\n"+"\t\t\t\ttext-align: center;\n"+"\t\t\t\tfont-size: 16px;\n"+"\t\t\t\tfont-weight: bold;\n"+"\t\t\t}\n"+"\n"+"\t\t\t.datastore-title {\n"+"\t\t\t\toverflow: hidden;\n"+"\t\t\t\ttext-overflow: ellipsis;\n"+"\t\t\t\twhite-space: nowrap;\n"+"\t\t\t}\n"+"\n"+"\t\t\t#datastore-content {\n"+"\t\t\t\tmax-height: calc(100% - 150px);\n"+"\t\t\t\toverflow-y: auto !important;\n"+"\t\t\t\toverflow-x: hidden;\n"+"\t\t\t\tpadding: 0px 3% !important;\n"+"\t\t\t\tposition: absolute;\n"+"\t\t\t\twidth: 100%;\n"+"\t\t\t}\n"+"\n"+"\t\t\tfooter {\n"+"\t\t\t\twidth: 100%;\n"+"\t\t\t\theight: 60px;\n"+"\t\t\t\tposition: fixed;\n"+"\t\t\t\tbottom: 0;\n"+"\t\t\t\tline-height: 60px;\n"+"\t\t\t\tpadding-left: 5px;\n"+"\t\t\t}\n"+"\n"+"\t\t\tfooter .datastore-button {\n"+"\t\t\t\tposition: relative;\n"+"\t\t\t\tvertical-align: middle;\n"+"\t\t\t\ttext-align: center;\n"+"\t\t\t\ttext-decoration: none;\n"+"\t\t\t\tborder-radius: 0px;\n"+"\t\t\t\tline-height: 20px;\n"+"\t\t\t\tfont-size: 14px;\n"+"\t\t\t\tmargin-top: 10px;\n"+"\t\t\t\tmargin-right: 20px;\n"+"\t\t\t\tmargin-bottom: 20px;\n"+"\t\t\t\tpadding: 10px;\n"+"\t\t\t\tfont-weight: bold;\n"+"\t\t\t\tcolor: white;\n"+"\t\t\t\tcursor: pointer;\n"+"\t\t\t\tfloat: right;\n"+"\t\t\t\tbackground-color: rgb(55, 59, 80);\n"+"\t\t\t}\n"+"\n"+"\t\t\tfooter .datastore-button:hover {\n"+"\t\t\t\tbackground-color: rgb(55, 59, 80) !important;\n"+"\t\t\t\tcursor: pointer !important;\n"+"\t\t\t\tcolor: white !important;\n"+"\t\t\t}\n"+"\n"+"\t\t\tfooter .datastore-button:disabled {\n"+"\t\t\t\tbackground-color: #afb1b9 !important;\n"+"\t\t\t\tcursor: default !important;\n"+"\t\t\t\tcolor: black !important;\n"+'\t\t\t}</style> \x3c!-- CONTAINER --\x3e <div id="datastoreContainer" class="row"> \x3c!-- TOP --\x3e <header class="row"> <div class="col-md-1 col-sd-2 col-xs-2"></div> <div class="col-md-10 col-sd-8 col-xs-8 datastore-title" ng-if="datastoresCount==0"> No Data Stores Configured </div> <div class="col-md-10 col-sd-8 col-xs-8 datastore-title" ng-if="datastoresCount>0"> Configured Data Stores: {{datastoresCount}}. </div> <div class="col-md-1 col-sd-2 col-xs-2"> <gotomap-button></gotomap-button> </div> </header> \x3c!-- MID --\x3e <div id="datastore-content"> <div ng-repeat="datastore in dslist "> <datastore-item datastore="datastore"></datastore-item> </div> </div> \x3c!-- BOTTOM --\x3e <footer> <button class="btn btn-default datastore-button" ng-click="createDatastore()">CREATE DATA STORE</button> </footer> </div> </div> </div>');a.put("components/eviction-container/eviction-item/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.eviction-item{\n"+"        \t/*height: 100px;*/\n"+"        \twidth: 100%;\n"+"        \tposition: relative;\n"+"      \t\tbackground-color: inherit;\n"+"        \tborder-top: 1px solid #bdc3c7; \n"+"   \t\t\tcolor: #34495e;\n"+"   \t\t\theight: 73px;\n"+"   \t\t\tpadding-top: 4px;\n"+"   \t\t\tcursor: default;\n"+"        }\n"+"\n"+"        \n"+"        /* **** */\n"+"        .header {\n"+"\t\t    display:table; \n"+"\t\t    width:100%;\n"+"\t\t    margin-top: 10px;\n"+"\t\t}\n"+"\t\t.logo,\n"+"\t\t.attributes {\n"+"\t\t    display:table-cell; \n"+"\t\t    vertical-align:top;\n"+"\t\t    \n"+"\t\t}\n"+"\t\t#eviction-item .attributes{\n"+"\t\t\tpadding-left: 10px;\n"+"\t\t\t    font-size: 13px;\n"+"    \t\t\tfont-style: italic;\n"+"    \t\t\t\n"+"\t\t}\n"+"\t\t.logo{\n"+"\t\t\twidth:60px;\n"+"\t\t\theight:60px;\n"+"\t\t\topacity: 1;\n"+"\t\t}\n"+"\t\t#eviction-item .list-item-title{\n"+"\t\t\tfont-size: 13px;\n"+"\t\t    font-weight: bold;\n"+"\t\t    line-height: 20px;\n"+"\n"+"\t\t    \n"+"\t\t}\n"+"\n"+"\t\t.item-title {\n"+"\t\t\toverflow-x: hidden;\n"+"\t\t\ttext-overflow:ellipsis;\n"+"\t\t}\n"+"\t\t\n"+"\t\t.tooltip{\n"+"\t\t\tbackground-color: red;\n"+"\t\t\tposition:fixed;\n"+"\t\t\tz-index:99999999;\n"+"\t\t}\n"+"\n"+"\t\t.item-buttons{\n"+"\t\t\tposition:absolute;\n"+"\t\t\tbottom:10px;\n"+"\t\t\tright: 20px;\n"+"\t\n"+"\t\t}\n"+"\n"+"\t\t.item-button{\n"+"\t\t\tmargin-left: 15px;\n"+"\t\t\tcursor: pointer;\n"+"\t\t}\n"+"        \n"+"\t\t.button {\n"+"\t\t  background-color: #505050;\n"+"\t\t  color: #fff;\n"+"\t\t  font-family: 'Open Sans', Helvetica, sans-serif ;\n"+"\t\t  font-size: 12px;\n"+"\t\t}\n"+"\n"+"\t\t.button.raised {            \n"+"\t\t  text-align: center;\n"+"\t\t  line-height: 15px;\n"+"\t\t  height: 15px;\n"+"\t\t  width: 30px; \n"+"\t\t  margin-top: 0px;\n"+"    \t  margin-left: 0px;\n"+"    \t  margin-bottom: 3px;\n"+"\t\t  font-family: 'Open Sans', Helvetica, sans-serif ;\n"+"\t\t  font-size: 12px;\n"+"\t\t  padding: 1px 5px 1px 5px;\n"+"\t\t}\n"+"\n"+"\t\t.list-link {\n"+"\t\t\twhite-space: nowrap;\n"+"\t\t\toverflow-x: hidden;\n"+"\t\t\ttext-overflow: ellipsis !important;\n"+"\t\t}\n"+"\n"+"\t\t.listrow {\n"+"\t\t\tmargin-top: -5px;\n"+"\t\t}\n"+"\n"+"\t\t.list-attribute-value {\n"+"\t\t\tcolor: black;\n"+"\t\t}\n"+"\n"+"\t\t.attributes-values {\n"+"\t\t\tpadding-left: 0px !important;\n"+'\t\t}</style> <div id="eviction-item" class="eviction-item" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="row item-title"> <div style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap"> <span class="list-item-title" style="float: left" title="{{eviction.Name}}">{{eviction.Name}} </span> <span class="list-item-title" style="float: right" title="{{(eviction.SoftEviction) ? \'SOFT EVICTION\' : \'HARD EVICTION\'}} - Eviction Status: {{eviction.Status}}">{{(eviction.SoftEviction) ? "SOFT EVICTION" : "HARD EVICTION"}} - Eviction Status: {{eviction.Status}} </span> </div> </div> <div class="row item-title"> <div style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap"> <span class="attributes attributes-values" style="float: left">Keep Period: <span class="list-attribute-value">{{eviction.KeepPeriod}} </span> - Keep Period Unit: <span class="list-attribute-value">{{eviction.KeepPeriodUnit}} </span> </span> </div> </div> <div class="row item-title"> <div style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap"> <span class="attributes attributes-values" style="float: left">{{(eviction.Cron.Active) ? "Eviction is active" : "Eviction is NOT active"}} {{(eviction.Cron.Schedule) ? " - Scheduled at: " : ""}} <span class="list-attribute-value">{{(eviction.Cron.Schedule) ? eviction.Cron.Schedule : ""}} </span> </span> </div> </div> </div> </div> <div class="item-buttons" ng-show="visibleItemButton"> <div class="glyphicon glyphicon glyphicon-play item-button" ng-click="startEviction()" title="Start Eviction"></div> <div class="glyphicon glyphicon glyphicon-stop item-button" ng-click="stopEviction()" title="Stop Eviction"></div> <div class="glyphicon glyphicon glyphicon-remove item-button" ng-click="deleteEviction()" title="Delete Eviction"> </div> <div class="glyphicon glyphicon glyphicon-pencil item-button" ng-click="editEviction()" title="Edit Eviction"> </div> </div> </div> </div> </div>');a.put("components/eviction-container/eviction-list/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>#evictionContent {\n"+"            max-height: calc(100% - 150px);\n"+"            overflow-y: auto !important;\n"+"            overflow-x: hidden;\n"+"            padding: 0px 3% !important;   \n"+"            position: absolute;         \n"+"            width: 100%;\n"+"        }\n"+"        \n"+"        #evictionContainer {\n"+"            height: 100%;\n"+"            width: 100%;\n"+"            margin: 0;\n"+"            padding: 0;\n"+"        }\n"+"        \n"+"        #evictionContainer header{\n"+"            width: 95%;\n"+"            height: 60px;\n"+"            position: inherit;\n"+"            background: white;\n"+"            text-align: center;\n"+"            font-size: 16px;\n"+"            font-weight: bold;            \n"+"        }\n"+"        \n"+"        @media screen and (min-width: 993px) and (max-width: 1200px) {\n"+"            #evictionContainer header {\n"+"                font-size: 16px;\n"+"            }\n"+"        }\n"+"        \n"+"        @media screen and (min-width: 769px) and(max-width: 992px) {\n"+"            #evictionContainer header {\n"+"                font-size: 14px;\n"+"            }\n"+"        }\n"+"        \n"+"        @media screen and (max-width: 768px) {\n"+"            #evictionContainer header {\n"+"                font-size: 14px;\n"+"            }\n"+"        }\n"+"        \n"+"        footer {\n"+"            width: 100%;\n"+"            height: 60px;\n"+"            position: fixed;\n"+"            bottom: 0;\n"+"            line-height: 60px;\n"+"            padding-left: 5px;\n"+"        }\n"+"        \n"+"        footer .eviction-button {\n"+"            border-radius: 0px;\n"+"            vertical-align: middle;\n"+"            margin-bottom: 20px;\n"+"            line-height: 20px;\n"+"            font-size: 14px;\n"+"            font-weight: bold;\n"+"            margin-right: 20px;\n"+"            position: relative;\n"+"            padding: 10px;\n"+"            text-decoration: none;\n"+"            text-align: center;\n"+"            background-color: rgb(55, 59, 80);\n"+"            color: white;\n"+"            cursor: pointer;\n"+"            float: right;\n"+"            margin-top: 10px;\n"+"        }\n"+"        \n"+"        footer .eviction-button:hover {\n"+"            background-color: rgb(55, 59, 80) !important;\n"+"            color: white !important;\n"+"            cursor: pointer !important;\n"+"        }\n"+"        \n"+"        footer .eviction-button:disabled {\n"+"            background-color: #afb1b9 !important;\n"+"            cursor: default !important;\n"+"            color: black !important;\n"+"        }\n"+"        \n"+"        .disabled-button {\n"+"            opacity: 0.4;\n"+"            cursor: default;\n"+"        }\n"+"        \n"+"        .select-page-button {\n"+"            cursor: pointer;\n"+"        }\n"+"        \n"+"        .page-selector-input {\n"+"            width: 40px !important;\n"+"            cursor: pointer;\n"+"            margin: 0px;\n"+"            padding: 7px;\n"+"            height: 30px;\n"+"            border-bottom: 1px solid #9A9A9A !important;\n"+"            text-align: center;\n"+"            display: inline;\n"+"        }\n"+"        \n"+"        .pagination-button {\n"+"            margin-right: 2.5px;\n"+"            margin-left: 2.5px;\n"+"            display: inline;\n"+"        }\n"+"        \n"+"        .page-label {\n"+"            font-weight: bold;\n"+"            font-size: 13px;\n"+"            padding-right: 3px;\n"+"        }\n"+"        \n"+"        .eviction-toolbar {\n"+"            line-height: 60px;\n"+"            vertical-align: middle;\n"+"        }\n"+"        \n"+"        .fab-eviction {\n"+"            vertical-align: middle;\n"+"            margin-top: 10px;\n"+"            /* padding: 15px; */\n"+"            line-height: 25px;\n"+"            font-size: 16px;\n"+"            position: relative;\n"+"            float: right;\n"+"            display: block;\n"+"            height: 40px;\n"+"            width: 40px;\n"+"            color: #fff;\n"+"            fill: currentColor;\n"+"            cursor: pointer;\n"+"            text-decoration: none;\n"+"            border-radius: 50%;\n"+"            overflow: hidden;\n"+"            box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"            background-color: #373B50;\n"+"            text-align: center;\n"+"            padding: 5px;\n"+"            display: none;\n"+"            margin-right: 20px;\n"+"        }\n"+"        \n"+"        .fab-eviction-disabled {\n"+"            background-color: #afb1b9 !important;\n"+"            cursor: default !important;\n"+"            color: black !important;\n"+"        }\n"+"        \n"+"        .eviction-title {\n"+"            overflow: hidden;\n"+"            text-overflow: ellipsis;\n"+"            white-space: nowrap;\n"+'        }</style> <div id="evictionContainer"> <header class="row eviction-header"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8 eviction-title" ng-if="evictionsCount==0"> No Eviction Configured </div> <div class="col-md-10 col-sd-8 col-xs-8 eviction-title" ng-if="evictionsCount>0"> Configured Evictions: {{evictionsCount}}. </div> <div class="col-md-1 col-sd-3 col-xs-3"> <gotomap-button></gotomap-button> </div> </div> </header> <div id="evictionContent"> <div ng-repeat="eviction in evictionList "> <eviction-item eviction="eviction"></eviction-item> </div> </div> <footer> <div> <button class="btn btn-default eviction-button" ng-click="createEviction()">CREATE EVICTION</button> </div> </footer> </div> </div> </div>');a.put("components/eviction-container/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>/*#evictionContent {\n"+"            max-height: calc(100% - 120px);\n"+"            overflow-y: auto !important;\n"+"            overflow-x: hidden;\n"+"            padding: 0px 3% !important;            \n"+"            width: 100%;\n"+"        }\n"+"        \n"+"        #evictionContainer {\n"+"            height: 100%;\n"+"            width: 100%;\n"+"            margin: 0;\n"+"            padding: 0;\n"+'        }*/</style> <div> \x3c!-- <header class="eviction-header row">\n'+'                <div class="col-md-1 "></div>\n'+'                <div class="col-md-10 col-sd-8 col-xs-8 eviction-title" ng-if="evictionsCount==0">\n'+"                    No Eviction Configured\n"+"                </div>\n"+'                <div class="col-md-10 col-sd-8 col-xs-8 eviction-title" ng-if="evictionsCount>0">\n'+"                    {{evictionsCount}} evictions configured. Display {{visualizedEvictionsFrom}} to {{visualizedEvictionsTo} of {{evictionsCount}} evictions.\n"+"                </div>\n"+'                <div class="col-md-1 col-sd-3 col-xs-3">\n'+"                    <gotomap-button></gotomap-button>\n"+"                </div>\n"+"            </header> --\x3e <eviction-list></eviction-list> </div> </div> </div>")
;a.put("components/eviction-details/view.html","<div> \x3c!-- \n"+"      Data HUb Service (DHuS) - For Space data distribution.\n"+"      Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"      Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"      Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"      \n"+"      This file is part of DHuS software sources.\n"+"     \n"+"      This program is free software: you can redistribute it and/or modify\n"+"      it under the terms of the GNU Affero General Public License as\n"+"      published by the Free Software Foundation, either version 3 of the\n"+"      License, or (at your option) any later version.\n"+"      \n"+"      This program is distributed in the hope that it will be useful,\n"+"      but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"      GNU Affero General Public License for more details.\n"+"     \n"+"      You should have received a copy of the GNU Affero General Public License\n"+"      along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"     \n"+"    --\x3e <div> <style>#evtDetails .panel-heading {\n"+"                height: 30px;    \n"+"                background-color: lightgray;    \n"+"                line-height: 10px;\n"+"            }\n"+"\n"+"            #evtDetails .panel-default {\n"+"                border: 1px #aaa solid;\n"+"                width: 50%;\n"+"            }\n"+"\n"+"            @media screen and (min-width: 993px) and (max-width: 1200px) { \n"+"\n"+"                #evtDetails .panel-default {\n"+"                    width: 50%;\n"+"                }\n"+"            } \n"+"\n"+"            @media screen and (min-width: 769px) and(max-width: 992px) { \n"+"\n"+"                #evtDetails .panel-default {\n"+"                    width: 100%;\n"+"                }\n"+"            } \n"+"\n"+"            @media screen and (max-width: 768px) { \n"+"\n"+"                #evtDetails .panel-default {\n"+"                    width: 100%;\n"+"                }\n"+"            }\n"+"\n"+"            #evtDetails   .group            { \n"+"                position:relative; \n"+"                margin-bottom:35px; \n"+"            }\n"+"\n"+"            #evtDetails   .checkFunction  { \n"+"                top: -5px; \n"+"            }\n"+"            #evtDetails input               {\n"+"                font-size:13px;\n"+"                padding:2px;\n"+"                display:block;\n"+"                width:100%;\n"+"                border:none;\n"+"                border-bottom:1px solid #757575;\n"+"            }\n"+"            #evtDetails input:focus         { outline:none; }\n"+"\n"+"            /* LABEL ======================================= */\n"+"            #evtDetails label                {\n"+"                color:#999; \n"+"                font-size:13px;\n"+"                font-weight:normal;\n"+"                position:absolute;\n"+"                pointer-events:none;  \n"+"                top:10px;\n"+"                transition:0.2s ease all; \n"+"                -moz-transition:0.2s ease all; \n"+"                -webkit-transition:0.2s ease all;\n"+"            }\n"+"\n"+"            #evtDetails .fixed-field  {\n"+"                top:-15px;\n"+"                font-size:13px;\n"+"                color: rgb(55, 59, 80);\n"+"            }\n"+"\n"+"            /* active state */\n"+"            #evtDetails input:focus ~ .lbl-field, #evtDetails input:valid ~ .lbl-field, #evtDetails input:invalid ~ .lbl-field  {\n"+"                top:-15px;\n"+"                font-size:13px;\n"+"                color: rgb(55, 59, 80);\n"+"            }\n"+"\n"+"            #evtDetails input:invalid ~ .invalid-field{\n"+"                display: inline-block !important;\n"+"            }\n"+"\n"+"            #evtDetails .invalid-field {\n"+"                display:none;\n"+"                color: rgb(255,110,64);\n"+"                top: 30px;\n"+"                font-size: 9px;\n"+"            }\n"+"\n"+"            #evtDetails .select-label {      \n"+"                top: -20px;\n"+"                color: rgb(55, 59, 80);\n"+"                font-size: 13px;\n"+"            }\n"+"\n"+"            /* BOTTOM BARS ================================= */\n"+"            #evtDetails .bar    { position:relative; display:block; width:100%; }\n"+"            #evtDetails .bar:before, .bar:after     {\n"+"                content:'';\n"+"                height:2px; \n"+"                width:0;\n"+"                bottom:1px; \n"+"                position:absolute;\n"+"                background:rgb(55, 59, 80); \n"+"                transition:0.2s ease all; \n"+"                -moz-transition:0.2s ease all; \n"+"                -webkit-transition:0.2s ease all;\n"+"            }\n"+"            #evtDetails .bar:before {\n"+"                left:50%;\n"+"            }\n"+"            #evtDetails .bar:after {\n"+"                right:50%; \n"+"            }\n"+"\n"+"            /* active state */\n"+"            #evtDetails input:focus ~ .bar:before, #evtDetails input:focus ~ .bar:after {\n"+"                width:50%;\n"+"            }\n"+"\n"+"            /* HIGHLIGHTER ================================== */\n"+"            #evtDetails .highlight {\n"+"                position:absolute;\n"+"                height:60%; \n"+"                width:100px; \n"+"                top:25%; \n"+"                left:0;\n"+"                pointer-events:none;\n"+"                opacity:0.5;\n"+"            }\n"+"\n"+"            /* active state */\n"+"            #evtDetails input:focus ~ .highlight {\n"+"                -webkit-animation:inputHighlighter 0.3s ease;\n"+"                -moz-animation:inputHighlighter 0.3s ease;\n"+"                animation:inputHighlighter 0.3s ease;\n"+"            }\n"+"\n"+"            /* Style Select Field */\n"+"            #evtDetails select {\n"+"                font-family: inherit;\n"+"                background-color: transparent;\n"+"                width: 100%;\n"+"                padding: 2px 0;\n"+"                font-size: 13px;  \n"+"                border: none;\n"+"                border-bottom: 1px solid rgb(0,0,0);\n"+"            }\n"+"\n"+"            /* Remove focus */\n"+"            #evtDetails select:focus {\n"+"                outline: none;\n"+"            }                          \n"+"\n"+"            /* ANIMATIONS ================ */\n"+"            @-webkit-keyframes inputHighlighter {\n"+"                from { background:rgb(55, 59, 80); }\n"+"                to    { width:0; background:transparent; }\n"+"            }\n"+"            @-moz-keyframes inputHighlighter {\n"+"                from { background:rgb(55, 59, 80); }\n"+"                to    { width:0; background:transparent; }\n"+"            }\n"+"            @keyframes inputHighlighter {\n"+"                from { background:rgb(55, 59, 80); }\n"+"                to    { width:0; background:transparent; }\n"+"            }\n"+"            #evtDetails   .fab-details {\n"+"                background-color: #373B50 !important;\n"+"                vertical-align: middle;      \n"+"                margin-left: 20px;\n"+"                padding: 6px;\n"+"                line-height: 20px;\n"+"                font-size: 15px;\n"+"                position: relative;        \n"+"                display: block;\n"+"                height: 40px;\n"+"                width: 40px;\n"+"                color: #fff;\n"+"                fill: currentColor;\n"+"                cursor: pointer;\n"+"                text-decoration: none;            \n"+"                border-radius: 50%;          \n"+"                overflow: hidden;\n"+"                transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"                transition-delay: 0.2s;\n"+"                box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"            }\n"+"\n"+"            @media screen and (max-width: 480px) { \n"+"                #evtDetails .fab-details {\n"+"                    background-color: #373B50 !important;\n"+"                    vertical-align: middle;      \n"+"                    margin-left: 20px;\n"+"                    padding: 6px;\n"+"                    line-height: 20px;\n"+"                    font-size: 15px;\n"+"                    position: relative;        \n"+"                    display: block;\n"+"                    height: 32px !important;\n"+"                    width: 32px !important;\n"+"                    color: #fff;\n"+"                    fill: currentColor;\n"+"                    cursor: pointer;\n"+"                    text-decoration: none;            \n"+"                    border-radius: 50%;          \n"+"                    overflow: hidden;\n"+"                    transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"                    transition-delay: 0.2s;\n"+"                    box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"                }\n"+"            }\n"+"\n"+"            #evtDetails   .fab-reset-eviction {\n"+"\n"+"                font-size: 26px;        \n"+"            }\n"+"\n"+"            @media screen and (max-width: 480px) { \n"+"                #evtDetails .fab-reset-eviction {\n"+"                    font-size: 22px; \n"+"                    padding: 4px;\n"+"                }\n"+"            }\n"+"\n"+"            #evtDetails  .fab-details.fab-right {\n"+"                float: right;\n"+"            }\n"+"\n"+"            #evtDetails  .fab-details.fab-left {\n"+"                float: left;\n"+"            }\n"+"\n"+"            #evtDetails .modal-dialog {         \n"+"                width: 60%;\n"+"                max-height: 65%;\n"+"                margin: 0px auto;\n"+"                position: relative;\n"+"                margin-top: 2%;\n"+"                margin-bottom: 2%\n"+"                    position: fixed;\n"+"                height: 65%;\n"+"                padding: 0;\n"+"                background: white;\n"+"                padding-bottom: 30px;\n"+"                overflow-y: auto;\n"+"                overflow-x: hidden;\n"+"            }\n"+"\n"+"            #evtDetails .btn{\n"+"                background: #373B50;\n"+"                color: #FFF;\n"+"            }  \n"+"\n"+"            @media screen and (min-width: 500px) { \n"+"                #evtDetails .eviction-details-modal-dialog {\n"+"                    width: 60% !important;  \n"+"                    max-width: 60% !important;                            \n"+"                }\n"+"            }\n"+"\n"+"            #evtDetails .modal-header{  \n"+"                background: #373B50;\n"+"                color: #FFF;\n"+"            }        \n"+"\n"+"            #evtDetails .sectiontitle{\n"+"                background-color: rgb(55, 59, 80);\n"+"                color: #fff;\n"+"                text-align: left;\n"+"                padding: 10px;\n"+"                margin-bottom: 15px;\n"+"            }            \n"+"\n"+"            #evtDetails .modal-container {\n"+"                padding: 20px;\n"+"            }\n"+"\n"+"\n"+"            #evtDetails   .eviction-details-modal {\n"+"                position: fixed;\n"+"                top: 0;\n"+"                right: 0;\n"+"                bottom: 0;\n"+"                left: 0;\n"+"                overflow: hidden;\n"+"            }\n"+"\n"+"            #evtDetails   .eviction-details-modal-content {\n"+"                position: absolute;\n"+"                top: 0;\n"+"                right: 0;\n"+"                bottom: 0;\n"+"                left: 0;\n"+"                border-radius: 0;\n"+"                box-shadow: none;\n"+"            }\n"+"\n"+"            #evtDetails   .eviction-details-modal-header {\n"+"                position: absolute;\n"+"                top: 0;\n"+"                right: 0;\n"+"                left: 0;\n"+"                height: 40px;\n"+"                padding: 10px;        \n"+"                border: 0;\n"+"                text-align: center;\n"+"                font-size: bold;\n"+"            }\n"+"\n"+"            #evtDetails   .eviction-details-modal-body {\n"+"                position: absolute;        \n"+"                top: 51px;\n"+"                bottom: 30px;\n"+"                width: 100%;\n"+"                overflow-y: auto;\n"+"                overflow-x: hidden;            \n"+"            }\n"+"\n"+"            #evtDetails   .eviction-details-modal-footer {\n"+"                position: absolute;\n"+"                right: 0;\n"+"                bottom: 0;\n"+"                left: 0;\n"+"                background: #f1f3f5;\n"+"                padding: 5px;\n"+"                height: 50px;\n"+"            }\n"+"            #evtDetails   .modal-footer .left{\n"+"                text-align: left;      \n"+"            }\n"+"            #evtDetails   .modal-footer .right{\n"+"                text-align: right;        \n"+"            }      \n"+"\n"+"            #evtDetails   .eviction-details-modal-row {\n"+"                margin: 0px;\n"+'            }</style> <div class="modal fade eviction-details-modal" data-keyboard="false" data-backdrop="static" id="evtDetails" tabindex="-1" role="dialog" aria-labelledby="evictionTitle" aria-hidden="true"> <div class="modal-dialog eviction-details-modal-dialog"> <div class="modal-header eviction-details-modal-header">Eviction Properties</div> <div class="modal-body eviction-details-modal-body container-fluid"> <div class="row"> <div class="group col-md-6"> <div ng-if="!isNew"> <input type="text" ng-model="eviction.Name" value="eviction.Name" readonly> <span class="highlight"></span> <span class="bar"></span> <label class="fixed-field">Name</label> </div> <div ng-if="isNew"> <input type="text" ng-model="eviction.Name" value="eviction.Name"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Name</label> <label class="invalid-field" id="evtcheckName">Name empty</label> </div> </div> <div class="group col-md-6"> <input type="number" ng-model="eviction.MaxEvictedProducts" value="eviction.MaxEvictedProducts"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Maximum Evicted Products</label> <label class="invalid-field" id="evtcheckMaxEvictedProducts">Maximum Evicted Products empty</label> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="number" ng-model="eviction.KeepPeriod" value="eviction.KeepPeriod"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Keep Period</label> <label class="invalid-field" id="evtcheckKeepPeriod">Keep Period empty</label> </div> </div> <div class="group col-md-6"> <div> <label class="select-label">Keep Period Unit</label> <select ng-model="eviction.KeepPeriodUnit"> <option ng-repeat="x in periods" value="{{x}}">{{x}}</option> </select> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="eviction.Filter" value="eviction.Filter"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Filter</label> </div> </div> <div class="group col-md-6"> <div> <input type="text" ng-model="eviction.OrderBy" value="eviction.OrderBy"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Order By</label> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <label class="select-label">Status</label> <select ng-model="eviction.Status"> <option value="STARTED">STARTED</option> <option value="STOPPED" ng-selected="STOPPED">STOPPED</option> </select> </div> </div> <div class="group col-md-6"> <div> <label class="select-label">Target Collection</label> <select ng-model="eviction.TargetCollection"> <option ng-repeat="x in collectionsName" value="{{x}}">{{x}}</option> </select> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <span>is Soft Eviction</span> <input type="checkbox" style="width:30px;display:inline-block" ng-model="eviction.SoftEviction"> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <span><b>Eviction Scheduling</b></span> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="eviction.Cron.Schedule" value="eviction.Cron.Schedule"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Schedule</label> <label class="invalid-field" id="evtcheckCron">Schedule empty</label> </div> </div> <div class="group col-md-6"> <div> <span>is Active</span> <input type="checkbox" style="width:30px;display:inline-block" ng-model="eviction.Cron.Active"> </div> </div> </div> </div> <div class="modal-footer eviction-details-modal-footer"> <div class="left col-md-6"> <div ng-show="isNew" class="left-button fab-details fab-left fab-reset-eviction" title="Reset Fields" ng-click="resetFields()"><div class="glyphicon glyphicon-erase"></div> </div> </div> <div class="right col-md-6"> <div class="fab-details fab-right" title="Close" ng-click="close()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></g> </svg> </div> <div class="fab-details fab-right" title="Save" ng-click="save()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"></g> </svg> </div> </div> </div> </div> </div> </div> </div>');a.put("components/example/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <p>text: {{text}}</p> </div>");a.put("components/gotomap-button/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.home {\n"+"                background-image: url('images/world-map.png');\n"+"                background-size: contain;\n"+"                background-repeat: no-repeat;\n"+"                height: 30px;\n"+"                width: 30px;\n"+"                position: absolute;\n"+"                float: right;\n"+"                top: 0px;\n"+"                right: 30px;\n"+"            }\n"+"\n"+"            .home:hover {\n"+"                cursor: pointer;\n"+"                background-image: url('images/world-map-black.png');\n"+'            }</style> <div class="home" title="Return to Map" ng-click="redirectHome()"> </div> </div> </div>');a.put("components/info-badge/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>#infoBadge {\n"+"      overflow: auto !important;\n"+"      position: absolute;\n"+"      bottom: 90px;\n"+"      right: 10px;\n"+"      top: auto;\n"+"    }         \n"+"    #infoBadge a{\n"+"      display: block;\n"+"      padding: 10px 0px;\n"+"      font-weight: bold;\n"+"      color: #23527c !important;;\n"+"      \n"+"    }\n"+"    #infoBadge a:hover{text-decoration: underline;}\n"+"\n"+"    #datahublogo{\n"+"      max-width: 50px;\n"+"      display: inline-block;\n"+"      vertical-align: middle;\n"+"    }\n"+"    #datahubtitle{\n"+"      display: inline-block;\n"+"      vertical-align: middle !important;\n"+"      font-weight: bold;\n"+"      padding: 0px 15px;\n"+"      font-size: 20px;\n"+"    }\n"+"\n"+"    #infoBadge hr{\n"+"      border: 0px;\n"+"      border-bottom: 1px solid #ADADAD;\n"+"      margin: 10px 0px;\n"+"    }\n"+"\n"+"    #logos{\n"+"      vertical-align: middle;\n"+"      text-align: center;\n"+"      padding-top:20px;\n"+"    }\n"+"    #logos img{\n"+"      vertical-align: middle;\n"+"    }\n"+"    .info-callout {\n"+"      /*position: absolute;\n"+"      bottom: 0;\n"+"      right: 0;*/\n"+"      margin-left: 10px;      \n"+"      padding: 18px 20px;\n"+"      background-color: white;\n"+"      /* easy rounded corners for modern browsers */\n"+"      -moz-border-radius: 0px;\n"+"      -webkit-border-radius: 0px;\n"+"      border-radius: 0px;\n"+"      display:none;\n"+"      z-index:  99;    \n"+"      box-shadow: 3px 5px 19px 0 rgba(49,50,50,.62);  \n"+"      max-width: 500px;\n"+"      max-height: 400px;\n"+"    }\n"+"    \n"+"\n"+"    \n"+"    border-info-callout { border: 1px solid #fff; padding: 17px 19px; }\n"+'    .border-info-callout  { border-bottom-color: #fff; top: -11px; }</style> <div id="infoBadge" class="info-callout border-info-callout"> <div class="row"> <img src="" id="datahublogo"> <div id="datahubtitle"></div> </div> <div class="row" style="margin: 15px 0px 0px"> The {{title}} is a web based system designed to provide EO data users with distributed mirror archives and bulk dissemination capabilities for the Sentinels products. <a href="{{TandCLink}}" target="_blank">Terms of {{title}} portal and Data supply conditions</a> </div> <div class="row"> <hr> <div id="datahubversion"></div> <div id="logos"> <img src="images/serco.png" height="20" width="48"> <img src="images/gael.png" height="20" width="48"> <img src="images/noa.png" width="48"> <img src="images/grnet.png" width="48"> <img src="images/copernicus.jpg" width="48"> <img src="images/logo_esa1.png" width="48"> <img src="images/european_union_emblem.png" width="48"> </div> </div> </div> </div> </div>');a.put("components/info-element/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>/* FAB */\n"+"      .fab-info {\n"+"          vertical-align: middle;\n"+"          margin-bottom: 15px;\n"+"          margin-right: 22px;\n"+"          padding: 8px;\n"+"          line-height: 20px;\n"+"          font-size: 15px;\n"+"          display: block;\n"+"          height: 40px;\n"+"          width: 40px;\n"+"          color: #fff;\n"+"          fill: currentColor;\n"+"          cursor: pointer;\n"+"          text-decoration: none;\n"+"          border-radius: 50%;\n"+"          overflow: hidden;\n"+"          box-shadow: 3px 5px 19px 0 rgba(49,50,50,.62) !important;\n"+"          background-color: #373B50;\n"+"          z-index: 10;\n"+"          bottom:0;\n"+"          right:0;\n"+"          position: absolute;\n"+'      }</style> <div ng-click="openInfo()" class="fab-info dhus-button" title="About"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="info-outline"><path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"></g> </svg> </div> </div> </div>')
;a.put("components/list/list-item/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"--\x3e <div> <style>/*CSS for injected Popovers*/\n"+"      .popover,\n"+"      .popover-content {\n"+"        box-shadow: 3px 5px 19px 0 rgba(49, 50, 50, .62);\n"+"        height: 200px;\n"+"        width: 100%;\n"+"        border-radius: 10px;\n"+"      }\n"+"\n"+"      .popover {\n"+"        border: none !important;\n"+"        background-color: transparent;\n"+"      }\n"+"\n"+"      .popover-content {\n"+"        background-color: rgba(243, 243, 243, 1);\n"+"        display: inline-block;\n"+"        position: relative;\n"+"      }\n"+"\n"+"      .arrow,\n"+"      .arrow::after {\n"+"        border-right-color: rgba(243, 243, 243, 1);\n"+"      }\n"+"\n"+"\n"+"      .popover-content .popover-image {\n"+"        opacity: 1;\n"+"        max-width: 100%;\n"+"        max-height: 200px;\n"+"        display: inline-block;\n"+"        position: absolute;\n"+"        margin: auto;\n"+"        padding: 5px;\n"+"        top: 0;\n"+"        left: 0;\n"+"        right: 0;\n"+"        bottom: 0;\n"+"      }\n"+"      \n"+"      /*End Popover injected*/\n"+"\n"+"      .item {\n"+"        position: relative;\n"+"        color: #34495e;\n"+"        border-top: 1px solid #bdc3c7;\n"+"        padding-top: 5px;\n"+"        margin-bottom: -5px;\n"+"        height: 108px;\n"+"        width: 100%;\n"+"      }\n"+"\n"+"      .item-offline {\n"+"        background-color: darkgrey;\n"+"        margin-left: 2px;\n"+"        margin-right: 2px;\n"+"        padding-bottom: 6px !important;\n"+"        margin-top: -2px;\n"+"      }\n"+"\n"+"      .placeholder-image {\n"+"        display: block;\n"+"        background-repeat: no-repeat;\n"+"        background-image: url('data:image/jpg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAA6AEADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDxWUZc1PcriOPn+AfyqKX73/1qlueUjz/dH8q9apJvm7HVFLQS3I2t9KYOX+nFS2yjYxoBxIRXbk3LPEcik1dP8CMUmqfM1cui0lu7hVtomO7O0MegHqeOmRzxWv4e+02OqjNpL5ggYmNlJJycZxwQPbuO+DRpd1bWlu0lw5OwrKiIclWUHDH5SB8xUDnr7HB6qa8hciG2i/eGIFV4Q5OfcdCD+J65ryM0nJYmUHTundXf4u/o/wBTuwkYqip89no7fpY2NPRLm+VmAOxCN+B8zEnPTr3z0711GqSyN8P/ABHDuBVNMuRxnH+rb/A/n3rhdLuUxsVJFTGVZkYAjsQ3Tp+PtkYrpb7UH/4Q/wAQWwwGXTbnepwdv7tuR+FfF4qhKNWPNpZr8z1sTarh3y69TwB+XxU067lj/wB0fyqBv9aQT3qzP9yPv8o/lX3dd2crHgU1e1xbdCEb6VGR+844/rU9scqw9qjK4k6d646VWcJKUXZnVOEZRt0Oz8MCWaJzIQsKkZkd+FwuSfwAX24FbSPNKCoZXCxkeVv5JyAcjkEHKYyQfm5xmuc8OOxhvEd8QbULLkgnntjOfTGOeB7HvYdLnNtG67eEZZI2ZS456FQSCcL155JBAK8+Vjq6p4qU6m7/AMjuoQ58PGCf9XMy0tN8k0s8UTOF3yx7z+7IHAbjJwe5PGSOwNTa1K6eHdW/eIwNjOmFGONhA/D/AD3qzbRvJL5sqoVGOmGY9MgZB9MfgfaoPEEMaeGdSFqxMa2U+AvQgoeegzxjnJzx2rz6k3VcXLudNo01KK7HjUgPmValOY4/90fyqvJy55qdv9SmfT0r7DEatnz9LoPtujfSpQm489ajtSCH+lTxjJry6ztqehQV9GaWmX9xpF6l1bMysAAdpwSOMjPbpXoGn6nPfr+5tpBbAF/P2BcLvzgMODgZyAfXGCdo8+WLKqT6V6P4Ie1j09CEGbcs5fdwrdSPmOAcHOfujnJUcnx8bOL95rVHpQg4U7otxWzT3qqsZkeMAMSeGUkgJjOAeGyTjpiofEtpJF4d1ppBk/Y5mIZTlD5ZBA6d+K1rXVpdkrNYrFBKFcXLh0DufvZI6qAT8p+b5cZyQK5/xNr/AJ+havZw2UzK9nMRJ5RC4CnLAEEgepz36815yVbnWml0Dnzppdjxp8eYf6VPP/q0Ax90VXb75qxOflj/AN0V9/iI2bPnKT2JLRcIw74q1APmAIqtbf6t/pVuDqv1rx670PUw6uzVQYUY9K2dE1C5055mhZQjKSdw4XlcsMc525H4msde30rUsRmOfP8Azy/qK8WtK002rn0FCiqlFxZ3JhluRaGC7VtzbGjl2/u1yG4X+EgEADHG8EletM8SiKXwvrD2kZEKWFwgQMQoUIQCPXjHqefrXOaQi/2toEe0eXJaKHXHDAmUkEd810niMlfAF2ykhv7PkTI67fJPH04HHtWWLoexrQhe+vp1f+R40avNTlLun+R//9k=');\n"+"        height: auto;\n"+"        width: 100px;\n"+"      }\n"+"\n"+"      .header {\n"+"        display: table;\n"+"        margin-top: 10px;\n"+"        width: 100%;\n"+"      }\n"+"\n"+"      .logo,\n"+"      .attributes {\n"+"        display: table-cell;\n"+"        vertical-align: top;\n"+"      }\n"+"\n"+"      .logo {\n"+"        min-width: 60px;\n"+"        height: 60px;\n"+"      }\n"+"\n"+"      .attributes {\n"+"        line-height: 20px;\n"+"        padding-left: 10px;\n"+"        font-size: 12px;\n"+"        font-style: italic;\n"+"        -webkit-user-select: none;\n"+"      }\n"+"\n"+"      .list-item-title {\n"+"        font-size: 12px;\n"+"        font-weight: bold;\n"+"        line-height: 20px;\n"+"      }\n"+"\n"+"      .tooltip {\n"+"        background-color: red;\n"+"        position: fixed;\n"+"        z-index: 99999999;\n"+"      }\n"+"\n"+"      .item-buttons {\n"+"        position: absolute;\n"+"        bottom: 10px;\n"+"        right: 20px;\n"+"        font-size: 16px;\n"+"      }\n"+"\n"+"      .item-button {\n"+"        margin-left: 15px;\n"+"      }\n"+"\n"+"      .item-title {\n"+"        overflow-x: hidden;\n"+"        text-overflow: ellipsis;\n"+"        white-space: nowrap;\n"+"      }\n"+"\n"+"      .button.S1 {\n"+"        background-color: #DC143C;\n"+"        color: #fff;\n"+"      }\n"+"\n"+"      .button.S2 {\n"+"        background-color: #0f9d58;\n"+"        color: #fff;\n"+"      }\n"+"\n"+"      .button.S3 {\n"+"        background-color: #191970;\n"+"        color: #fff;\n"+"      }\n"+"\n"+"      .button {\n"+"        background-color: #505050;\n"+"        color: #fff;\n"+"        font-family: 'Open Sans', Helvetica, sans-serif;\n"+"        font-size: 12px;\n"+"        height: 15px;\n"+"      }\n"+"\n"+"      .button.raised {\n"+"        text-align: center;\n"+"        line-height: 15px;\n"+"        display: inline;\n"+"        margin-left: 1px;\n"+"        margin-right: 2px;\n"+"        padding: 1px 5px 1px 5px;\n"+"      }\n"+"\n"+"      .list-link {\n"+"        white-space: nowrap;\n"+"        overflow-x: hidden;\n"+"        text-overflow: ellipsis !important;\n"+"      }\n"+"\n"+"      .listrow {\n"+"        margin-top: -5px;\n"+"      }\n"+"\n"+"      .list-attribute-value {\n"+"        color: black;\n"+"      }\n"+"\n"+"      .item-checkbox {\n"+"        display: inline-block;\n"+"      }\n"+"\n"+"      .selected-item {\n"+"        color: green;\n"+"      }\n"+"\n"+"      .list-thumbnail {\n"+"        max-height: 64px;\n"+"        max-width: 64px;\n"+"      }\n"+"\n"+"      .offline {\n"+"        color: #fff;\n"+"        background-color: #505050;\n"+"        font-family: 'Open Sans', Helvetica, sans-serif;\n"+"        font-size: 12px;\n"+"        margin-top: 1px !important;\n"+"        padding: 1px 5px 1px 5px;\n"+"        padding-left: 0px !important;\n"+"        float: right;\n"+"      }\n"+"\n"+"      .unselectable {\n"+"        -moz-user-select: none;\n"+"        -khtml-user-select: none;\n"+"        -webkit-user-select: none;\n"+"        -o-user-select: none;\n"+"        user-select: none;\n"+"      }\n"+"\n"+"      .undrag {\n"+"        -webkit-user-drag: none;\n"+"      }\n"+"\n"+"      .selectable {\n"+"        -webkit-user-select: text !important;\n"+'      }</style> <div class="item" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()"> <div class="row" ng-class="{ \' item-offline\': product.offline, \' \': !product.offline }"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding-right: 20px"> <span ng-if="showSelect" style="float: right" class="glyphicon" ng-class="{ \' glyphicon-unchecked\': !product.selected, \'glyphicon-check\': product.selected, \'selected-item\': product.selected }" ng-click="selectProduct(); $event.stopPropagation();" title="Select product"></span> <span ng-if="product.isincart" class="glyphicon glyphicon-shopping-cart" style="float: right; color:green; margin-right:5px; margin-left:2px" title="Product in cart"></span> <span ng-show="product.isOrderOn" class="pop-order-trigger glyphicon glyphicon-time" data-trigger="hover" data-toggle="pop-order" data-container="body" data-placement="right"> </span> \x3c!-- Offline --\x3e <div ng-if="product.offline" class="row item-title"> <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10" style="display: flex; padding: 0px"> <span class="button raised" style="{{product.label_style}}">{{mission}}</span> <span ng-if="product.instrument" class="button raised" style="{{product.instrlabel_style}}">{{product.instrument}}</span> <div class="list-item-title" style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap" title="{{product.identifier}}"> {{product.identifier}} </div> </div> <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2" style="padding: 0px"> <span class="button raised offline">Offline</span> </div> </div> \x3c!-- Online --\x3e <div ng-if="!product.offline" class="row item-title"> <div style="display: flex; padding: 0px"> <span class="button raised" style="{{product.label_style}}">{{mission}}</span> <span ng-if="product.instrument" class="button raised" style="{{product.instrlabel_style}}">{{product.instrument}}</span> <div class="list-item-title" style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap" title="{{product.identifier}}">{{product.identifier}} </div> </div> </div> \x3c!-- content --\x3e <div class="row listrow" style="overflow:hidden;text-overflow:ellipsis"> <div class="header" style="overflow:hidden;text-overflow:ellipsis"> \x3c!-- QuickLook --\x3e <div ng-show="showquicklook"> <a class="logo unselectable undraggable"> <img ng-if="!product.quicklook" style="opacity:1" src="images/placeholder.png" alt="no placeholder" draggable="false"> \x3c!-- popover on hover on thumbnail --\x3e <div data-trigger="hover" data-toggle="pop" data-container="body" data-placement="right"> <img ng-if="product.quicklook" class="list-thumbnail" ng-src="{{quicklooksrc}}" alt="quicklook" draggable="false"> </div> </a> </div> \x3c!-- Attributes --\x3e <div class="attributes unselectable" style="overflow:hidden;text-overflow:ellipsis"> <div class="list-link selectable">Download URL: <a class="list-link selectable" style="overflow:hidden;text-overflow:ellipsis" href="{{link}}">{{link}}</a> </div> <div class="selectable" title="{{summary}}" style="overflow:hidden;text-overflow:ellipsis; white-space: nowrap"> <span ng-if="satellitename"> Mission: <span class="list-attribute-value">{{satellitename}}</span>&nbsp; </span> <span ng-if="product.instrument">Instrument: <span class="list-attribute-value">{{product.instrument}}</span>&nbsp; </span> <span ng-if="date">Sensing Date: <span class="list-attribute-value">{{date}}</span>&nbsp; </span> <span ng-if="size">Size: <span class="list-attribute-value">{{size}}</span> </span> </div> </div> </div> </div> </div> </div> \x3c!-- buttons --\x3e <div class="item-buttons unselectable undrag" ng-show="visibleItemButton"> <div class="unselectable undrag glyphicon glyphicon glyphicon-screenshot item-button" ng-click="zoomTo(product)" title="Zoom to product"></div> <div class="unselectable undrag glyphicon glyphicon-eye-open item-button" ng-click="showProductDetails()" title="View Product Details"></div> <div class="unselectable undrag glyphicon item-button" title="Add Product to Cart" ng-click="addProductToCart()" ng-show="!product.isincart" ng-if="showcart"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="18" width="18" fill="#373b50" version="1.0" x="0px" y="0px" viewbox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"> <g> <circle cx="25" cy="29" r="3"></circle> <circle cx="11" cy="29" r="3"></circle> <path d="M30,6H8.602L8,2C7.703,0.734,7.105,0,6,0H2C0.895,0,0,0.895,0,2s0.895,2,2,2h2.301L7,22c0.203,1.203,0.895,2,2,2h18   c1.105,0,1.75-0.906,2-2c0,0,2.835-13.227,2.94-13.66C32.28,6.891,31.104,6,30,6z M24,16h-4v4h-4v-4h-4v-4h4V8h4v4h4V16z"> </path> </g> </svg> </div> <div class="glyphicon item-button" title="Remove Product from Cart" ng-click="removeProductFromCart()" ng-show="product.isincart" ng-if="showcart"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="18" width="18" fill="#373b50" version="1.0" x="0px" y="0px" viewbox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"> <g> <circle cx="25.001" cy="29" r="3"></circle> <circle cx="11" cy="29" r="3"></circle> <path d="M30,6H8.602L8,2C7.703,0.734,7.105,0,6,0H2C0.895,0,0,0.895,0,2s0.895,2,2,2h2.301L7,22c0.203,1.203,0.895,2,2,2h18.001   c1.104,0,1.749-0.906,1.999-2c0,0,2.835-13.227,2.94-13.66C32.28,6.891,31.104,6,30,6z M24,16H12v-4h12V16z"> </path> </g> </svg> </div> <div class="glyphicon glyphicon-download-alt item-button" ng-click="downloadProduct()" title="Download Product"> </div> <div class="unselectable undrag glyphicon glyphicon-cog item-button" title="L2A On-Demand processing" ng-click="requestOnDemandProduct()" ng-show="isOnDemandEnabled()" ng-if="!hide_on_demand"> </div> <div class="glyphicon glyphicon-remove item-button" ng-click="deleteProduct()" ng-if="showDeleteButton" title="Delete Product"></div> </div> </div> </div> </div>');a.put("components/list/product-list/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div> <style></style> \x3c!--      <div id="list-tooltip" style="font-size: 13px;font-weight: bold;line-height: 20px;z-index:99999;opacity:1;position:fixed;background-color:black;color:white;padding:3px;"></div> --\x3e <div ng-repeat="product in model "> <list-item product="product" uuid="product.uuid"> </list-item> </div> </div> </div>');a.put("components/list/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>.list-container {\n"+"        background-color: white;\n"+"        width: 40%;\n"+"        height: 100px;\n"+"        position: fixed;\n"+"        left: 20px;\n"+"        min-height: 150px;\n"+"        opacity: 0.9;\n"+"        box-shadow: 3px 5px 19px 0 rgba(49, 50, 50, .62);\n"+"        z-index: 98;\n"+"      }\n"+"\n"+"      \n"+"      .list-footer {\n"+"        font-size: 14px;\n"+"      }\n"+"\n"+"      @media screen and (min-width: 993px) and (max-width: 1200px) {\n"+"        .list-footer {\n"+"          font-size: 14px;\n"+"        }\n"+"      }\n"+"\n"+"      @media screen and (min-width: 769px) and(max-width: 992px) {\n"+"        .list-footer {\n"+"          font-size: 13px;\n"+"        }\n"+"      }\n"+"\n"+"      @media screen and (max-width: 768px) {\n"+"        .list-footer {\n"+"          font-size: 13px;\n"+"        }\n"+"      }\n"+"\n"+"      #show-list-button {\n"+"        position: fixed;\n"+"        display: none;\n"+"        height: 56px;\n"+"        margin-top: 5px;\n"+"        padding: 16px;\n"+"        left: 25px;\n"+"        width: 56px;\n"+"        font-size: 22px;\n"+"        cursor: pointer;\n"+"        z-index: 998;\n"+"      }\n"+"\n"+"      .products-list-container {\n"+"        position: relative;\n"+"        padding: 0px;\n"+"        height: 100%;\n"+"        width: 100%;\n"+"        display: block;\n"+"      }\n"+"\n"+"      .products-list {\n"+"        position: relative;\n"+"        height: calc(100% - 105px);\n"+"        width: 100%;\n"+"        background-color: white;\n"+"        overflow-y: auto;\n"+"        overflow-x: hidden;\n"+"      }\n"+"\n"+"      .list-toolbar {\n"+"        position: relative;\n"+"        width: 100%;\n"+"        padding: 10px;\n"+"        background-color: #FAFAFA;\n"+"        height: 50px;\n"+"      }\n"+"\n"+"      .list-header {\n"+"        position: relative;\n"+"        height: 55px;\n"+"        top: 0px;\n"+"        padding: 7px;\n"+"        background-color: #FAFAFA;\n"+"      }\n"+"\n"+"      .disabled-button {\n"+"        opacity: 0.4;\n"+"        cursor: default;\n"+"      }\n"+"\n"+"      .select-page-button {\n"+"        cursor: pointer;\n"+"      }\n"+"\n"+"      .page-selector-input {\n"+"        display: inline;\n"+"        cursor: pointer;\n"+"        width: 40px !important;\n"+"        margin: 0px;\n"+"        padding: 7px;\n"+"        border: 1px solid #9A9A9A !important;\n"+"        text-align: center;\n"+"      }\n"+"\n"+"      .pagination-button {\n"+"        margin-right: 2.5px;\n"+"        margin-left: 2.5px;\n"+"        display: inline;\n"+"      }\n"+"\n"+"      .expanded-button-list {\n"+"        background-color: red;\n"+"      }\n"+"\n"+"      .not-expanded-button-list {\n"+"        background-color: green;\n"+"      }\n"+"\n"+"      .request-done {\n"+"        position: relative;\n"+"        min-height: 35px;\n"+"        max-height: 75px;\n"+"        top: 0px;\n"+"        padding: 7px;\n"+"        width: 100%;\n"+"        background-color: #FAFAFA;\n"+"        overflow-y: auto;\n"+"        border-top: 1px solid #bdc3c7;\n"+"      }\n"+"\n"+"      .add-all-to-cart {\n"+"        font-size: 20px;\n"+"      }\n"+"\n"+"      .add-all-to-cart:hover {\n"+"        fill: gray;\n"+"      }\n"+"\n"+"      .delete-all {\n"+"        font-size: 23px;\n"+"      }\n"+"\n"+"      .delete-all:hover {\n"+"        color: gray;\n"+"      }\n"+"\n"+"      .undrag {\n"+"        -webkit-user-drag: none;\n"+"      }\n"+"\n"+"      .unselectable {\n"+"        -webkit-touch-callout: none;\n"+"        -webkit-user-select: none;\n"+"        -khtml-user-select: none;\n"+"        -ms-user-select: none;\n"+"        user-select: none;\n"+"      }\n"+"\n"+"      .onclick-menu {\n"+"        margin-top: 3px;\n"+"        position: absolute;;\n"+"        display: inline-block;\n"+"      }\n"+"\n"+"      .onclick-menu:before {\n"+'        content: "?";\n'+"      }\n"+"\n"+"      .onclick-menu:focus {\n"+"        /* clicking on label should toggle the menu */\n"+"        pointer-events: none;\n"+"      }\n"+"\n"+"      .onclick-menu:focus .onclick-menu-content {\n"+"        /*  opacity is 1 in opened state (see below) */\n"+"        opacity: 1;\n"+"        visibility: visible;\n"+"        /* don't let pointer-events affect descendant elements */\n"+"        pointer-events: auto;\n"+"      }\n"+"\n"+"      .onclick-menu-content {\n"+"        position: absolute;\n"+"        right: 5px;\n"+"        z-index: 1;\n"+"        /* use opacity to fake immediate toggle */\n"+"        opacity: 0;\n"+"        visibility: hidden;\n"+"        transition: visibility 0.5s;\n"+"      }\n"+"\n"+"    .dropdownItem {\n"+"      height: 35px;\n"+"      width: 100px;\n"+"      position: relative !important;\n"+"      font-family: 'Source Sans Pro',sans-serif;\n"+"      color: #373b50;\n"+"      font-weight: bold;\n"+"      font-size: 18px;\n"+"    }\n"+"\n"+"    .checkbox-container {\n"+"      position: relative;\n"+"      padding-top: 2px;\n"+"      float: left;\n"+"      width: 50px;\n"+"      height: 30px;\n"+"      border-radius: 2px;\n"+"      margin-top: 10px;\n"+"      -webkit-touch-callout: none;\n"+"      -webkit-user-select: none;\n"+"      -khtml-user-select: none;\n"+"      -moz-user-select: none;\n"+"      -ms-user-select: none;\n"+"      user-select: none;\n"+"    }\n"+"\n"+"    .checkbox-svg {\n"+"      margin-left: 5px;\n"+"    }\n"+"\n"+"    .show-select-container{\n"+"      position: relative;\n"+"      right: 10px;\n"+"    }\n"+"\n"+"    .listtitle{\n"+"      color: #373b50;\n"+"      font-weight: bold;\n"+"      font-size: 14px;\n"+"      float: left;\n"+"      width: 250px;\n"+"      /* background-color: yellow; */\n"+"    }\n"+"\n"+"    .list-selected{\n"+"      float: left;\n"+"      color: #373b50;\n"+"      font-weight: bold;\n"+"      font-size: 14px;\n"+"      margin-top: 12px;\n"+"      margin-right: 10px;\n"+"    }\n"+"\n"+"  .scaled{\n"+"    transform: scale(0.8);\n"+"    z-index: 10;\n"+"  }\n"+"\n"+"  .listtitle-right{\n"+"    float: right;\n"+"    height: 50px;\n"+"    width: 160px;\n"+"  }\n"+"\n"+"  .checkbox-container {\n"+"    float: right;\n"+"    margin-top: 7px;\n"+"    margin-right: 10px;\n"+"    width: 35px;\n"+"    height: 25px;\n"+"    border-radius: 2px;\n"+"  }\n"+"\n"+"  .checkbox-svg {\n"+"    margin-left: 5px;\n"+"  }\n"+"\n"+"  .show-select-container {\n"+"    position: relative;\n"+"  }\n"+"\n"+"  .listtitle {\n"+"    color: #373b50;\n"+"    font-weight: bold;\n"+"    font-size: 14px;\n"+"    float: left;\n"+"    width: 220px;\n"+"  }\n"+"\n"+"  .list-selected {\n"+"    float: left;\n"+"    font-size: 14px;\n"+"    margin-right: 1px;\n"+"    font-weight: bold;\n"+"    font-weight: bold;\n"+"    width: 150px;\n"+"    margin-top: 10px;\n"+"    color: #373b50;\n"+"  }\n"+"\n"+"  .scaled {\n"+"    transform: scale(0.7);\n"+"  }\n"+"\n"+"  .listtitle-right {\n"+"    float: left;\n"+"    width: 100px;\n"+"  }\n"+"\n"+"  .header-right {\n"+"    padding-right: 10px;\n"+"    margin-top: 11px;\n"+"    float: right;\n"+"    width: 190px;\n"+"    height: 100%;\n"+"  }\n"+"\n"+"  .es {\n"+"    margin-left: -2px !important;\n"+"  }\n"+"\n"+"  .righted {\n"+"    position: relative;\n"+"    right: 40px;\n"+"  }\n"+"\n"+"  .resize-button {\n"+"    float: right;\n"+"    top: 6px;\n"+"  }\n"+"\n"+"  .list-top-right-container{\n"+"    position: absolute;\n"+"    top: 4px;\n"+"    right: 16px;\n"+"    width: 70px;\n"+"    height: 20px;\n"+"  }\n"+"\n"+"  .list-top-right-element{\n"+"    float: right;\n"+"    transform: scale(0.9);\n"+"    margin-left: 3px;\n"+"    width: 20px;\n"+"    height: 20px;\n"+'  }</style> <div ng-show="visibleList" id="list-container" class="list-container undrag"> <div ng-show="visibleList" class="products-list-container undrag"> <div ng-show="visibleList" class="list-header"> <span class="listtitle" ng-hide="productCount">No products found.</span> \x3c!-- TOP LEFT ELEMENT --\x3e <div ng-show="productCount" class="listtitle"> <div> <span>Display {{visualizedProductsFrom}} to {{visualizedProductsTo}} of {{productCount}} products.</span> <br> <span title="Order By {{sortedby}} {{order}}">Order By: {{sortedby}} </span> <span class="glyphicon glyphicon-arrow-up" ng-show="order === \'Ascending\'" title="Order By {{sortedby}} {{order}}"></span> <span class="glyphicon glyphicon-arrow-down" ng-show="order === \'Descending\'" title="Order By {{sortedby}} {{order}}"></span> </div> </div> \x3c!-- TOP RIGHT ELEMENT --\x3e <div class="header-right"> <div class="listtitle-right"> <div class="show-select-container" ng-if="showSelect" ng-show="productCount"> <span class="list-selected unselectable" ng-show="productCount"> <span>{{selectCounter}} </span> <span class="item-element" style="margin-right: -2px !important; padding-right: 0px !important">product</span> <span class="es" ng-show="checkIsOneSelected()">&#160;&#160;</span> <span class="es" ng-show="!checkIsOneSelected()">s</span> <span>selected</span> </span> </div> \x3c!-- <div class="listtitle righted" ng-hide="productCount">No products found.</div> --\x3e </div> \x3c!-- Checkbox Element --\x3e <div class="checkbox-container scaled unselectable undrag" ng-hide="!productCount"> \x3c!-- Indeterminate checkbox --\x3e <span class="checkbox-svg" id="check-box-indeterminate" title="Select all items" ng-show="checkSomeSelected()"> <svg height="25px" width="25px" ng-click="SelectAll()"> <g id="indeterminate-check-box"> <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"> </g> </svg> </span> \x3c!-- Full checkbox --\x3e <span class="checkbox-svg" id="check-box-full" title="Unselect all items" ng-show="checkFull()"> <svg height="25px" width="25px" ng-click="DeselectAll()"> <g id="full-check-box"> <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"> </g> </svg> </span> \x3c!-- Empty checkbox --\x3e <span class="checkbox-svg" id="check-box-empty" title="Select all items" ng-show="checkEmpty()"> <svg height="25px" width="25px" ng-click="SelectAll()"> <g id="empty-check-box"> <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"> </g> </svg> </span> </div> </div> \x3c!-- Close Button --\x3e <span class="list-top-right-container"> <span class="list-top-right-element" title="Close"> <svg ng-click="hideList()" style="width: 20px; height: 20px"> <g> <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"> </g> </svg> </span> <span class="resize-button" ng-show="showtoggle" ng-click="toggleExpandList()" ng-class="toggleButtonClass" title="{{toggleExpandListTitle}}"></span> </span> </div> <request-done ng-show="visibleList"></request-done> <div ng-show="visibleList" id="product-list" class="products-list"> <product-list></product-list> </div> <div ng-show="visibleList" class="list-toolbar undrag unselectable"> <div ng-show="visibleList " style="height:20px"> <span ng-show="visibleList && productCount" id="product-per-page-label" class="list-footer">Products per page:</span> <select ng-show="visibleList && productCount" title="Products per page" ng-model="productsPerPage" ng-change="updateValue()" id="pagination" ng-options="o as o for o in options"> </select> <span ng-show="visibleList && productCount" class="pagination-button" ng-class="{\'disabled-button\': (productCount == 0 || currentPage == 1)}" class="select-page-button" ng-click="gotoFirstPage()" class="pagination-button"> &lt;&lt; </span> <span ng-show="visibleList && productCount" class="pagination-button" ng-class="{\'disabled-button\': (productCount == 0 ||  currentPage == 1)}" class="select-page-button" ng-click="gotoPreviousPage()"> &lt; </span> <span ng-show="visibleList && productCount" class="list-footer">page:</span> <input ng-show="visibleList && productCount" id="page-selector" ng-click="selectPageDidClicked(this)" type="text" class="page-selector-input" ng-model="currentPage" title="Enter page number"> <span ng-show="visibleList && productCount" class="list-footer">of {{pageCount}}</span> <span ng-show="visibleList && productCount" class="pagination-button" ng-class="{\'disabled-button\': (productCount == 0 || currentPage == pageCount || pageCount == 1 || pageCount == 0 ) }" class="select-page-button" ng-click="gotoNextPage()"> &gt; </span> <span ng-show="visibleList && productCount" class="pagination-button" ng-class="{\'disabled-button\': ( productCount == 0 || currentPage == pageCount || pageCount == 1 || pageCount == 0 )}" class="select-page-button" ng-click="gotoLastPage()"> &gt;&gt; </span> \x3c!-- <span draggable="false" onselectstart="return false;" ng-show="visibleList" ng-click="hideList()" class="list-footer unselectable"\n'+'              style="float: right; padding-right: 10px; line-height:30px;">CLOSE</span> --\x3e <span ng-if="showDeleteButton" ng-show="visibleList" style="float: right; padding-right: 10px; line-height:25px" class="glyphicon glyphicon-trash delete-all" ng-click="deleteAll()" title="Delete selected products "></span> <span onselectstart="return false" ng-if="showcart" ng-show="visibleList" id="add-all-to-cart" class="add-all-to-cart unselectable" style="float: right; padding-right: 10px; line-height:25px" ng-click="addAllToCart()" title="Add selected products to cart"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="add-all-to-cart" height="26" width="26" fill="#333" version="1.0" x="0px" y="0px" viewbox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"> <g> <circle cx="25" cy="29" r="3"></circle> <circle cx="11" cy="29" r="3"></circle> <path d="M30,6H8.602L8,2C7.703,0.734,7.105,0,6,0H2C0.895,0,0,0.895,0,2s0.895,2,2,2h2.301L7,22c0.203,1.203,0.895,2,2,2h18   c1.105,0,1.75-0.906,2-2c0,0,2.835-13.227,2.94-13.66C32.28,6.891,31.104,6,30,6z M24,16h-4v4h-4v-4h-4v-4h4V8h4v4h4V16z"></path> </g> </svg> </span> \x3c!-- <span ng-click="removeAllSelected()">RAS</span> --\x3e </div> </div> </div> </div> <div id="show-list-button" style="display:none" class="fab-map pan glyphicon glyphicon-list-alt dhus-button" ng-click="showList()" title="Show product list"> </div> </div> </div>')
;a.put("components/login-button/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>/* LOGIN ICON */\n"+"        .login-ico {\n"+"            vertical-align: middle;\n"+"            margin-top: 5px;\n"+"            margin-right: 5px;\n"+"            padding: 3px;\n"+"            line-height: 20px;\n"+"            font-size: 15px;\n"+"            position: relative;\n"+"            float: right;\n"+"            display: block;\n"+"            height: 37px;\n"+"            cursor: pointer;\n"+'        }</style> \x3c!-- LOGIN ICON--\x3e <img ng-click="openLogin()" class="login-ico" title="Login" src="images/not-logged.png"> </div> </div>');a.put("components/login-dialog/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>#wronglogin {\n"+"            width: 100%;\n"+"            text-align: center;\n"+"            font-weight: bold;\n"+"            margin: 10px 0px;\n"+"            color: rgb(190, 0, 0);\n"+"        }\n"+"\n"+"        .login {\n"+"            background-color: rgb(55, 59, 80) !important;\n"+"            vertical-align: middle;\n"+"            line-height: 20px;\n"+"            font-size: 15px;\n"+"            margin-right: 20px;\n"+"            position: relative;\n"+"            padding: 10px;\n"+"            cursor: pointer;\n"+"            width: 100%;\n"+"            text-align: center;\n"+"        }\n"+"\n"+"        h4 {\n"+"            text-align: center;\n"+"            color: black;\n"+"            font-size: 25px;\n"+"        }\n"+"\n"+"        .modal {\n"+"            text-align: center;\n"+"        }\n"+"\n"+"        @media screen and (min-width: 768px) {\n"+"            .modal:before {\n"+"                display: inline-block;\n"+"                vertical-align: middle;\n"+'                content: " ";\n'+"                height: 100%;\n"+"            }\n"+"        }\n"+"\n"+"        .modal-dialog {\n"+"            display: inline-block;\n"+"            text-align: left;\n"+"            vertical-align: middle;\n"+"            width: 90%;\n"+"        }\n"+"\n"+"        @media screen and (min-width: 768px) {\n"+"            .modal-dialog {\n"+"                display: inline-block;\n"+"                vertical-align: middle;\n"+"                width: 30%;\n"+"                max-width: 400px;\n"+"            }\n"+"        }\n"+"        /*.modal-dialog {\n"+"            width: 30%;\n"+"            max-width: 400px;\n"+"        }*/\n"+"\n"+"        .modal-header {\n"+"            border: none !important;\n"+"        }\n"+"\n"+"        .group {\n"+"            position: relative;\n"+"            margin-bottom: 35px;\n"+"        }\n"+"\n"+"        .form-control {\n"+"            border: none;\n"+"            border-radius: 0px !important;\n"+"            border-bottom: 1px solid #757575;\n"+"            box-shadow: none !important;\n"+"        }\n"+"\n"+"        input {\n"+"            font-size: 13px;\n"+"            padding: 10px 10px 10px 5px;\n"+"            display: block;\n"+"            width: 100%;\n"+"            border: none;\n"+"            border-bottom: 1px solid #757575;\n"+"            color: rgb(55, 59, 80);\n"+"        }\n"+"\n"+"        input:focus {\n"+"            outline: none;\n"+"        }\n"+"        /* BOTTOM BARS ================================= */\n"+"\n"+"        .bar {\n"+"            position: relative;\n"+"            display: block;\n"+"            width: 100%;\n"+"        }\n"+"\n"+"        .bar:before,\n"+"        .bar:after {\n"+"            content: '';\n"+"            height: 2px;\n"+"            width: 0;\n"+"            bottom: 1px;\n"+"            position: absolute;\n"+"            background: rgb(55, 59, 80);\n"+"            transition: 0.2s ease all;\n"+"            -moz-transition: 0.2s ease all;\n"+"            -webkit-transition: 0.2s ease all;\n"+"        }\n"+"\n"+"        .bar:before {\n"+"            left: 50%;\n"+"        }\n"+"\n"+"        .bar:after {\n"+"            right: 50%;\n"+"        }\n"+"        /* active state */\n"+"\n"+"        input:focus~.bar:before,\n"+"        input:focus~.bar:after {\n"+"            width: 50%;\n"+"        }\n"+"        /* HIGHLIGHTER ================================== */\n"+"\n"+"        .highlight {\n"+"            position: absolute;\n"+"            height: 60%;\n"+"            width: 100px;\n"+"            top: 25%;\n"+"            left: 0;\n"+"            pointer-events: none;\n"+"            opacity: 0.5;\n"+"        }\n"+"        /* active state */\n"+"\n"+"        input:focus~.highlight {\n"+"            -webkit-animation: inputHighlighter 0.3s ease;\n"+"            -moz-animation: inputHighlighter 0.3s ease;\n"+"            animation: inputHighlighter 0.3s ease;\n"+"        }\n"+"\n"+"        .forgot {\n"+"            text-align: center;\n"+"            padding-top: 20px;\n"+"            font-weight: bold;\n"+"        }\n"+"\n"+"        .forgot>a {\n"+"            color: black;\n"+"        }\n"+"\n"+"        .forgot>a:visited {\n"+"            color: black;\n"+"        }\n"+"\n"+"        .signup {\n"+"            color: black;\n"+"            font-size: 16px;\n"+"            text-align: center;\n"+"        }\n"+"\n"+"        .signup>a {\n"+"            color: black;\n"+"            font-weight: bold;\n"+"        }\n"+"\n"+"        .signup>a:visited {\n"+"            color: black;\n"+"        }\n"+"\n"+"        .divider {\n"+"            border-top: 1px solid #EEE !important;\n"+"            width: 80%;\n"+"        }\n"+"        /* ANIMATIONS ================ */\n"+"\n"+"        @-webkit-keyframes inputHighlighter {\n"+"            from {\n"+"                background: rgb(55, 59, 80);\n"+"            }\n"+"            to {\n"+"                width: 0;\n"+"                background: transparent;\n"+"            }\n"+"        }\n"+"\n"+"        @-moz-keyframes inputHighlighter {\n"+"            from {\n"+"                background: rgb(55, 59, 80);\n"+"            }\n"+"            to {\n"+"                width: 0;\n"+"                background: transparent;\n"+"            }\n"+"        }\n"+"\n"+"        @keyframes inputHighlighter {\n"+"            from {\n"+"                background: rgb(55, 59, 80);\n"+"            }\n"+"            to {\n"+"                width: 0;\n"+"                background: transparent;\n"+"            }\n"+'        }</style> <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginLabel" ng-keyup="$event.keyCode == 13 && login()"> <div class="modal-dialog" role="document"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" id="loginLabel">LOGIN</h4> </div> <div class="modal-body"> <form name="form"> <div id="wronglogin"></div> <div class="row"> <div class="group"> <input auto-complete id="loginUsername" type="text" ng-model="user.username" class="form-control" placeholder="Username" value="" name="username"> <span class="highlight"></span> <span class="bar"></span> </div> </div> <div class="row"> <div class="group"> <input type="password" auto-complete ng-model="user.password" class="form-control" placeholder="Password" name="password"> <span class="highlight"></span> <span class="bar"></span> </div> </div> <div class="row"> <button class="login" ng-click="login()" type="submit">LOGIN</button> </div> <div ng-if="forgotpassword" class="row"> <div class="col-md-12 forgot" ng-click="close()"> <a href="#/forgot-password">Forgot password?</a> </div> </div> <div ng-show="showsignup" ng-model="showsignup"> <hr class="divider"> <div class="row"> <div class="col-md-12 signup" ng-click="close()"> Don\'t have an account? <a href="#/self-registration">Sign up</a> </div> </div> </div> </form> </div> </div> </div> </div> </div> </div>');a.put("components/management-collections/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>#coll-content { \n"+"        \n"+"        max-height: calc(100% - 162px);\n"+"        overflow-y: auto !important;\n"+"        overflow-x: hidden;\n"+"        padding: 0px 3% !important;\n"+"        margin-top: 60px !important;\n"+"        position: absolute;\n"+"        width: 100%;\n"+"    }\n"+"\n"+"    #container {\n"+"        height: 100%;\n"+"        width: 100%;\n"+"        margin: 0;\n"+"        padding: 0;    \n"+"    }\n"+"    header {\n"+"        width: 100%;\n"+"        height: 60px;\n"+"        position: fixed;        \n"+"        background: white;\n"+"        text-align: center;\n"+"        font-size: 16px;\n"+"        font-weight: bold;\n"+"        padding-top: 20px;\n"+"    }\n"+"    \n"+"    @media screen and (min-width: 993px) and (max-width: 1200px) { \n"+"        \n"+"        header {\n"+"           font-size: 16px;\n"+"        }\n"+"      } \n"+"\n"+"      @media screen and (min-width: 769px) and(max-width: 992px) { \n"+"        \n"+"        header {\n"+"           font-size: 14px;\n"+"        }\n"+"      } \n"+"\n"+"      @media screen and (max-width: 768px) { \n"+"        \n"+"        header {\n"+"           font-size: 14px;\n"+"        }\n"+"      }  \n"+"\n"+"    footer {\n"+"        width: 100%;\n"+"        height: 60px;        \n"+"        position: fixed;\n"+"        bottom: 0;  \n"+"        line-height: 60px;      \n"+"        padding-left: 5px;\n"+"    }\n"+"\n"+"    footer .collection-button {\n"+"        border-radius: 0px;\n"+"        vertical-align: middle;\n"+"        margin-bottom: 20px;\n"+"        line-height: 20px;        \n"+"        position: relative;    \n"+"        padding: 10px;                \n"+"        text-decoration: none;\n"+"        text-align: center;\n"+"        background-color: rgb(55, 59, 80);\n"+"        color: white;\n"+"        cursor: pointer;\n"+"        float: right; \n"+"        margin-top: 10px;       \n"+"    }\n"+"\n"+"    @media screen and (min-width: 993px) and (max-width: 1200px) { \n"+"        \n"+"        footer .collection-button {\n"+"            font-size: 14px;\n"+"            font-weight: bold;\n"+"            margin-right: 20px;\n"+"        }\n"+"      } \n"+"\n"+"      @media screen and (min-width: 769px) and(max-width: 992px) { \n"+"        \n"+"        footer .collection-button {\n"+"            font-size: 12px;\n"+"            font-weight: bold;            \n"+"        }\n"+"      } \n"+"\n"+"      @media screen and (max-width: 768px) { \n"+"        \n"+"        footer .collection-button {\n"+"            font-size: 10px;\n"+"            font-weight: bold;            \n"+"        }\n"+"      }\n"+"    \n"+"\n"+"    footer .collection-button-left {\n"+"        float: left !important; \n"+"    }\n"+"\n"+"    footer .collection-button:hover {                \n"+"        background-color: rgb(55, 59, 80) !important;\n"+"        color: white !important;\n"+"        cursor: pointer !important;\n"+"    }\n"+"\n"+"    footer .collection-button:focus {                \n"+"        background-color: rgb(55, 59, 80) !important;\n"+"        color: white !important;        \n"+"    }\n"+"    \n"+"    footer .collection-button:disabled {\n"+"        background-color: #afb1b9 !important;        \n"+"        cursor: default !important;\n"+"        color: black !important;        \n"+"    }        \n"+"\n"+"    .disabled-button{\n"+"        opacity:0.4;\n"+"        cursor: default;\n"+"     }\n"+"\n"+"     .select-page-button{\n"+"        cursor: pointer;\n"+"     }\n"+"\n"+"     .page-selector-input{\n"+"        width: 40px !important;\n"+"        cursor: pointer;\n"+"        margin: 0px;\n"+"        padding: 7px;\n"+"        height: 30px;\n"+"        border-bottom: 1px solid #9A9A9A !important;\n"+"        text-align: center;\n"+"\t\tdisplay: inline;\n"+"     }\n"+"\n"+"\t .pagination-button{\n"+"        margin-right: 2.5px;\n"+"        margin-left: 2.5px;\n"+"        display:inline;\n"+"     } \n"+"\n"+"     .page-label {\n"+"        font-weight: bold;\n"+"        font-size: 13px;\n"+"        padding-right: 3px;\n"+"     }   \n"+"\n"+"     .collection-toolbar {\n"+"        line-height: 60px;\n"+"        vertical-align: middle;\n"+"     }\n"+"\n"+"     .fab-collection {\n"+"        vertical-align: middle;\n"+"        margin-top: 10px;\n"+"        /* padding: 15px; */\n"+"        line-height: 25px;\n"+"        font-size: 16px; \n"+"        position: relative;\n"+"        float: right;\n"+"        display: block;\n"+"        height: 40px;\n"+"        width: 40px;\n"+"        color: #fff;\n"+"        fill: currentColor;\n"+"        cursor: pointer;\n"+"        text-decoration: none;\n"+"        border-radius: 50%;\n"+"        overflow: hidden;\n"+"        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"        background-color: #373B50;\n"+"        text-align: center;\n"+"        padding: 5px;\n"+"        display:none;\n"+"        margin-right: 20px;\n"+"      }\n"+"\n"+"      .fab-collection-left {\n"+"        float: left !important;\n"+"      }\n"+"\n"+"      .fab-collection-disabled {\n"+"        background-color: #afb1b9 !important;        \n"+"        cursor: default !important;\n"+"        color: black !important;\n"+"      }\n"+"\n"+"      .collection-title {\n"+"        overflow: hidden;\n"+"        text-overflow: ellipsis;\n"+"        white-space: nowrap;\n"+'      }</style> <div id="container"> <header class="collection-header row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8 cart-title"> Collections Management </div> <div class="col-md-1 col-sd-3 col-xs-3"><gotomap-button></gotomap-button></div> </header> <div id="coll-content"> <div class="row product-details-modal-row"> <div class="col-md-6"> <div class="row-fluid"> <div id="coll-mng-container" class="col-md-12"> <collection-management></collection-management> </div> </div> </div> <div class="col-md-6"> <div class="row-fluid"> <div class="col-md-12"> <collection-details></collection-details> </div> </div> <div class="row-fluid"> <div class="col-md-12"> <collection-products></collection-products> </div> </div> </div> </div> </div> <footer> <div> <button id="btn-create-collection" class="btn btn-default collection-button collection-button-left" ng-click="addCollection()">CREATE</button> <button id="btn-reset-collection" class="btn btn-default collection-button collection-button-left" ng-click="resetFields()">RESET</button> <button id="btn-cancel-collection" class="btn btn-default collection-button" ng-click="reset()">CANCEL</button> <button id="btn-delete-collection" class="btn btn-default collection-button" ng-click="deleteCollection()">DELETE</button> <button id="btn-update-collection" class="btn btn-default collection-button" ng-click="updateCollection()">UPDATE</button> <button id="btn-save-collection" class="btn btn-default collection-button" ng-click="saveCollection()">SAVE</button> </div> </footer> </div> </div> </div>');a.put("components/management-users/user-item/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.user-item{\n"+"        \t/*height: 100px;*/\n"+"        \twidth: 100%;\n"+"        \tposition: relative;\n"+"      \t\tbackground-color: inherit;\n"+"        \tborder-top: 1px solid #bdc3c7; \n"+"   \t\t\tcolor: #34495e;\n"+"   \t\t\theight: 60px;\n"+"   \t\t\tpadding-top: 4px;\n"+"   \t\t\tcursor: default;\n"+"        }\n"+"        \n"+"        /* **** */\n"+"        .header {\n"+"\t\t    display:table; \n"+"\t\t    width:100%;\n"+"\t\t    margin-top: 10px;\n"+"\t\t}\n"+"\t\t.logo,\n"+"\t\t.attributes {\n"+"\t\t    display:table-cell; \n"+"\t\t    vertical-align:top;\n"+"\t\t    \n"+"\t\t}\n"+"\t\t#user-item .attributes{\t\t\t\n"+"\t\t\t    font-size: 13px;\n"+"    \t\t\tfont-style: italic;\n"+"    \t\t\t\n"+"\t\t}\n"+"\t\t.logo{\n"+"\t\t\twidth:60px;\n"+"\t\t\theight:60px;\n"+"\t\t\topacity: 1;\n"+"\t\t}\n"+"\t\t#user-item .user-item-title{\n"+"\t\t\tfont-size: 13px;\n"+"\t\t    font-weight: bold;\n"+"\t\t    line-height: 20px;\n"+"\n"+"\t\t    \n"+"\t\t}\n"+"\n"+"\t\t.item-title {\n"+"\t\t\toverflow-x: hidden;\n"+"\t\t\ttext-overflow:ellipsis;\n"+"\t\t}\n"+"\t\t\n"+"\t\t.tooltip{\n"+"\t\t\tbackground-color: red;\n"+"\t\t\tposition:fixed;\n"+"\t\t\tz-index:99999999;\n"+"\t\t}\n"+"\n"+"\t\t#user-item .item-buttons{\n"+"\t\t\tposition:absolute;\n"+"\t\t\tbottom:30px;\n"+"\t\t\tright: 20px;\n"+"\t\n"+"\t\t}\n"+"\n"+"\t\t.item-button{\n"+"\t\t\tmargin-left: 15px;\n"+"\t\t\tcursor: pointer;\n"+"\t\t}\n"+"        \n"+"\n"+"\t\t.listrow {\n"+"\t\t\tmargin-top: -5px;\n"+"\t\t}\n"+"\n"+"\t\t.list-attribute-value {\n"+"\t\t\tcolor: black;\n"+'\t\t}</style> <div id="user-item" class="user-item" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> \x3c!-- title --\x3e <div class="row item-title"> <div style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap"> <span class="user-item-title" title="{{user.username}}">{{user.username}} </span> </div> </div> \x3c!-- content --\x3e <div class="row listrow" style="overflow:hidden;text-overflow:ellipsis"> <div class="header" style="overflow:hidden;text-overflow:ellipsis"> <div class="attributes" style="overflow:hidden;text-overflow:ellipsis"> <div style="overflow:hidden;text-overflow:ellipsis; white-space: nowrap">E-mail: <span class="list-attribute-value">{{user.email}}</span>; Firstname: <span class="list-attribute-value">{{user.firstname}}</span>; Lastname: <span class="list-attribute-value">{{user.lastname}}</span>; Country: <span class="list-attribute-value">{{user.country}}</span>; isLocked: <span class="list-attribute-value">{{user.lockedReason ? true : false}}</span></div> </div> </div> </div> </div> </div> \x3c!-- buttons --\x3e <div class="item-buttons" ng-show="visibleItemButton"> <div class="glyphicon glyphicon-pencil item-button" ng-click="showUserDetails()" title="Edit User"></div> <div class="glyphicon glyphicon-wrench item-button" ng-if="show_admin_change_password" ng-click="showChangePassword()" title="Edit User Password"></div> <div class="glyphicon glyphicon-remove item-button" ng-click="removeUser()" title="Delete User"></div> </div> </div> </div> </div> ');a.put("components/management-users/users-list/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+'--\x3e <div> <style></style> <div ng-repeat="user in model.users "> <user-item user="user" uuid="user.uuid"> </user-item> </div> </div> </div>');a.put("components/management-users/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>#usercontent {\n"+"        max-height: calc(100% - 162px);\n"+"        overflow-y: auto !important;\n"+"        overflow-x: hidden;\n"+"        padding: 0px 3% !important;\n"+"        margin-top: 80px !important;\n"+"        position: absolute;\n"+"        width: 100%;\n"+"    }\n"+"\n"+"    #usercontainer {\n"+"        height: 100%;\n"+"        width: 100%;\n"+"        margin: 0;\n"+"        padding: 0;\n"+"    }\n"+"    #usercontainer header {\n"+"        width: 100%;\n"+"        height: 80px;\n"+"        position: fixed;\n"+"        background: white;\n"+"        text-align: center;\n"+"        font-size: 16px;\n"+"        font-weight: bold;\n"+"        padding-top:10px;\n"+"    }\n"+"\n"+"    @media screen and (min-width: 993px) and (max-width: 1200px) {\n"+"\n"+"        header {\n"+"           font-size: 16px;\n"+"        }\n"+"      }\n"+"\n"+"      @media screen and (min-width: 769px) and(max-width: 992px) {\n"+"\n"+"        header {\n"+"           font-size: 14px;\n"+"        }\n"+"      }\n"+"\n"+"      @media screen and (max-width: 768px) {\n"+"\n"+"        header {\n"+"           font-size: 14px;\n"+"        }\n"+"      }\n"+"\n"+"    #usercontainer footer {\n"+"        width: 100%;\n"+"        height: 60px;\n"+"        position: fixed;\n"+"        bottom: 0;\n"+"        line-height: 60px;\n"+"        padding-left: 5px;\n"+"    }\n"+"\n"+"    #usercontainer footer .mngusers-button {\n"+"        border-radius: 0px;\n"+"        vertical-align: middle;\n"+"        margin-bottom: 20px;\n"+"        line-height: 20px;\n"+"        font-size: 14px;\n"+"        font-weight: bold;\n"+"        margin-right: 20px;\n"+"        position: relative;\n"+"        padding: 10px;\n"+"        text-decoration: none;\n"+"        text-align: center;\n"+"        background-color: rgb(55, 59, 80);\n"+"        color: white;\n"+"        cursor: pointer;\n"+"        float: right;\n"+"        margin-top: 10px;\n"+"    }\n"+"\n"+"    #usercontainer footer .mngusers-button:hover {\n"+"        background-color: rgb(55, 59, 80) !important;\n"+"        color: white !important;\n"+"        cursor: pointer !important;\n"+"    }\n"+"\n"+"    #usercontainer footer .mngusers-button:disabled {\n"+"        background-color: #afb1b9 !important;\n"+"        cursor: default !important;\n"+"        color: black !important;\n"+"    }\n"+"\n"+"    .disabled-button{\n"+"        opacity:0.4;\n"+"        cursor: default;\n"+"     }\n"+"\n"+"     .select-page-button{\n"+"        cursor: pointer;\n"+"     }\n"+"\n"+"     .page-selector-input{\n"+"        width: 40px !important;\n"+"        cursor: pointer;\n"+"        margin: 0px;\n"+"        padding: 7px;\n"+"        height: 30px;\n"+"        border-bottom: 1px solid #9A9A9A !important;\n"+"        text-align: center;\n"+"    display: inline;\n"+"     }\n"+"\n"+"\n"+"\n"+"     .user-search-filter {\n"+"        cursor: pointer;\n"+"        margin: 0px;\n"+"        padding: 7px;\n"+"        height: 30px;\n"+"        border-bottom: 1px solid #9A9A9A !important;\n"+"        display: inline;\n"+"\n"+"     }\n"+"\n"+"   .pagination-button{\n"+"        margin-right: 2.5px;\n"+"        margin-left: 2.5px;\n"+"        display:inline;\n"+"     }\n"+"\n"+"     .page-label {\n"+"        font-weight: bold;\n"+"        font-size: 13px;\n"+"        padding-right: 3px;\n"+"     }\n"+"\n"+"     .mngusers-toolbar {\n"+"        line-height: 60px;\n"+"        vertical-align: middle;\n"+"     }\n"+"\n"+"     .fab-mngusers {\n"+"        vertical-align: middle;\n"+"        margin-top: 10px;\n"+"        /* padding: 15px; */\n"+"        line-height: 25px;\n"+"        font-size: 16px;\n"+"        position: relative;\n"+"        float: right;\n"+"        display: block;\n"+"        height: 40px;\n"+"        width: 40px;\n"+"        color: #fff;\n"+"        fill: currentColor;\n"+"        cursor: pointer;\n"+"        text-decoration: none;\n"+"        border-radius: 50%;\n"+"        overflow: hidden;\n"+"        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"        background-color: #373B50;\n"+"        text-align: center;\n"+"        padding: 5px;\n"+"        display:none;\n"+"        margin-right: 20px;\n"+"      }\n"+"\n"+"      .fab-mngusers-disabled {\n"+"        background-color: #afb1b9 !important;\n"+"        cursor: default !important;\n"+"        color: black !important;\n"+"      }\n"+"\n"+"      .mngusers-title {\n"+"        overflow: hidden;\n"+"        text-overflow: ellipsis;\n"+"        white-space: nowrap;\n"+"      }\n"+"\n"+"      .search-user-filter{\n"+"        height: 35px;\n"+"        margin-bottom: 10px;\n"+"      }\n"+"\n"+"      .search-user-page-label{\n"+"        line-height: 30px;\n"+"      }\n"+"\n"+"      header .mngusers-header {\n"+"        height: 80px !important;\n"+'      }</style> <div id="usercontainer"> <header class="row mngusers-header"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8 mngusers-title" ng-if="usersCount==0"> No users found </div> <div class="col-md-10 col-sd-8 col-xs-8 mnguser-title" ng-if="usersCount>0"> Display {{visualizedUsersFrom}} to {{visualizedUsersTo}} of {{usersCount}} users. </div> <div class="col-md-1 col-sd-3 col-xs-3"><gotomap-button></gotomap-button></div> </div> <div class="row search-user-filter"> <div class="col-md-6"> <div class="col-md-1 col-sd-2 col-xs-2 page-label search-user-page-label">Search: </div> <div class="col-md-9 col-sd-8 col-xs-8"> <input id="user-filter" type="text" class="form-control user-search-filter" ng-model="model.searchfilter" ng-change="setFilter()"> </div> <div></div> </div> </div> </header> <div id="usercontent"> <users-list></users-list> </div> <footer> <div> <span class="page-label"> <span id="page-label-id"> Users per page: </span> <select ng-model="usersPerPage" id="mnguser-pagination"> <option value="25">25</option> <option value="50">50</option> <option value="75">75</option> <option value="100">100</option> <option value="125">125</option> <option value="150">150</option> </select> </span> <span ng-class="{\'disabled-button\': currentPage == 1}" class="select-page-button" ng-click="gotoFirstPage()"> &lt;&lt; </span> <span ng-class="{\'disabled-button\': currentPage == 1}" class="select-page-button" ng-click="gotoPreviousPage()"> &lt; </span> <span> <span id="page-num-id" class="page-label" ng-hide="usersCount==0">Page#: </span> <input id="mnguser-page-selector" ng-click="selectPageDidClicked(this)" type="text" class="form-control page-selector-input" ng-model="currentPage" ng-hide="usersCount==0"> <span id="page-count-id" class="page-label large-device" ng-hide="usersCount==0">of {{pageCount}}</span> </span> <span ng-class="{\'disabled-button\': (currentPage == pageCount || pageCount == 1 || pageCount == 0 ) }" class="select-page-button" ng-click="gotoNextPage()"> &gt; </span> <span ng-class="{\'disabled-button\': ( currentPage == pageCount || pageCount == 1 || pageCount == 0 )}" class="select-page-button" ng-click="gotoLastPage()"> &gt;&gt; </span> <button class="btn btn-default mngusers-button" ng-click="showCreateUser()">CREATE USER</button> \x3c!--<div   id="show-download-button" class="fab-cart pan glyphicon glyphicon-download-alt dhus-button" ng-click="downloadCart()"  title="Download Cart" ng-class="{\'fab-cart-disabled\': ( productCount == 0)}">--\x3e </div> </footer> </div> </div> </div>')
;a.put("components/map-graticule/view.html","<div> \x3c!--\n"+"    Data HUb Service (DHuS) - For Space data distribution.\n"+"    Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"    Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"    Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"    This file is part of DHuS software sources.\n"+"  \n"+"    This program is free software: you can redistribute it and/or modify\n"+"    it under the terms of the GNU Affero General Public License as\n"+"    published by the Free Software Foundation, either version 3 of the\n"+"    License, or (at your option) any later version.\n"+"  \n"+"    This program is distributed in the hope that it will be useful,\n"+"    but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"    GNU Affero General Public License for more details.\n"+"  \n"+"    You should have received a copy of the GNU Affero General Public License\n"+"    along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"  --\x3e <div> <style>.map-graticule-container {\n"+"        position: absolute;\n"+"        background-color: #373B50;\n"+"        color: #FFFFFF;\n"+"        font-weight: bold;\n"+"        bottom: 10px;\n"+"        left: 350px;\n"+"        z-index: 100;\n"+"        width: 77px;\n"+"        height: 19px;\n"+"        font-family: Trebuchet, Arial, sans-serif;\n"+"        font-size: 12px;\n"+"        box-shadow: 3px 5px 19px 0 rgba(49, 50, 50, .62);\n"+"      }\n"+"\n"+"      .graticule-parent {\n"+"        display: table;\n"+"      }\n"+"\n"+"      .graticule-child {\n"+"        display: table-cell;\n"+"        vertical-align: middle;\n"+"        padding-bottom: 5px;\n"+"      }\n"+"\n"+"      .unselectable {\n"+"        -webkit-touch-callout: none;\n"+"        -webkit-user-select: none;\n"+"        -khtml-user-select: none;\n"+"        -moz-user-select: none;\n"+"        -ms-user-select: none;\n"+"        user-select: none;\n"+"      }\n"+"\n"+"      .graticule-icon {\n"+"        transform: scale(0.6)\n"+'      }</style> \x3c!-- Configurable Graticule --\x3e <div ng-if="!hide_graticule" class="map-graticule-container"> \x3c!-- Graticule On --\x3e <div ng-if="st" ng-click="graticuleOn()" title="Show Graticule"> <span class="graticule-parent"> <svg class="graticule-icon" fill="white" height="20px" width="20px"> <g transform="translate(-3,-3)"> <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"> </g> </svg> <div class="graticule-child unselectable">Graticule</div> </span> </div> \x3c!-- Graticule Off --\x3e <div ng-if="!st" ng-click="graticuleOff()" title="Hide Graticule"> <span class="graticule-parent"> <svg class="graticule-icon" fill="white" height="20px" width="20px"> <g transform="translate(-3,-3)"> <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"> </g> </svg> <span class="graticule-child unselectable">Graticule</span> </span> </div> </div> </div> </div>');a.put("components/map/ol3switcher-button/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>/* FAB */\n"+"      .fab-layer {\n"+"          vertical-align: middle;\n"+"          margin-top: 10px;\n"+"          margin-right: 0px;\n"+"          padding: 10px;\n"+"          line-height: 20px;\n"+"          font-size: 15px;          \n"+"          float: right;\n"+"          display: block;\n"+"          height: 46px;\n"+"          width: 46px;\n"+"          color: #FFF;\n"+"          fill: currentcolor;\n"+"          cursor: pointer;\n"+"          text-decoration: none;\n"+"          border-radius: 50%;\n"+"          overflow: hidden;\n"+"          transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1) 0.2s;\n"+"          box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.26);\n"+"          background-color: #373B50;\n"+"          box-shadow: 3px 5px 19px 0 rgba(49,50,50,.62) !important;\n"+"      }</style> <div> </div> </div> </div>");a.put("components/map/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+'--\x3e <div class="map-item"> <script>(function () { if (!window.CESIUM_BASE_URL) window.CESIUM_BASE_URL = "libs/Cesium/Cesium.js"; })()<\/script> <style>#map {\n'+"        padding: 0;\n"+"        margin: 0;\n"+"        background-color: black;\n"+"        position: fixed;\n"+"        width: 100%;\n"+"        z-index: 10;\n"+"      }\n"+"\n"+"      .toggle-map-button {\n"+"        position: absolute;\n"+"        top: 40px;\n"+"        right: 15px;\n"+"        float: right;\n"+"        z-index: 5;\n"+"        color: #385f96;\n"+"      }\n"+"\n"+"      .clear-map-selection {\n"+"        position: absolute;\n"+"        top: 40px;\n"+"        right: 100px;\n"+"        float: right;\n"+"        z-index: 5;\n"+"        color: #385f96;\n"+"      }\n"+"\n"+"      .ol-zoom {\n"+"        position: relative;\n"+"        bottom: 140px;\n"+"        top: inherit;\n"+"        float: right;\n"+"        left: -10px;\n"+"        display: none;\n"+"      }\n"+"\n"+"      .toggle-layers-button {\n"+"        position: absolute;\n"+"        top: 0px;\n"+"        right: 9px;\n"+"        float: right;\n"+"        z-index: 5;\n"+"        color: #385f96;\n"+"      }\n"+"\n"+"      .layer-switcher {\n"+"        padding: 10px 90px 0px 0px;\n"+"        right: 0px !important;\n"+"        background-color: rgba(255, 255, 255, 0);\n"+"      }\n"+"\n"+"      .map-item {\n"+"        height: 100%;\n"+"      }\n"+"\n"+"      .layer-switcher {\n"+"        position: absolute;\n"+"        top: 3.5em;\n"+"        right: 0.5em;\n"+"        text-align: left;\n"+"        background-color: none;\n"+"      }\n"+"\n"+"      .layer-switcher .panel2 {\n"+"        padding-right: 50px;\n"+"        border: 1px solid #cccccc;\n"+"        background-color: white;\n"+"        margin: 0;\n"+"        display: none;\n"+"        font-size: 11px;\n"+"      }\n"+"\n"+"      .layer-switcher.shown .panel2 {\n"+"        display: table;\n"+"      }\n"+"\n"+"      .layer-switcher button {\n"+"        float: right;\n"+"        width: 38px;\n"+"        height: 38px;\n"+"        background-image: none;\n"+"        background-color: transparent;\n"+"        border: none;\n"+"      }\n"+"\n"+"      .layer-switcher button:focus,\n"+"      .layer-switcher button:hover {\n"+"        background-color: transparent;\n"+"      }\n"+"\n"+"      .layer-switcher ul {\n"+"        width: 100%;\n"+"        padding-left: 1em;\n"+"        list-style: none;\n"+"        margin-top: 10px;\n"+"        margin-bottom: 10px;\n"+"      }\n"+"\n"+"      .layer-switcher li {\n"+"        display: flex;\n"+"        line-height: 20px;\n"+"      }\n"+"\n"+"      .layer-switcher li.group {\n"+"        padding-top: 90px;\n"+"      }\n"+"\n"+"      .layer-switcher input {\n"+"        margin: 4px;\n"+"        width: 13px;\n"+"      }\n"+"\n"+"      /* -- layer selector -- */\n"+"\n"+"      .pan {\n"+"        z-index: 11;\n"+"        margin-right: 15px;\n"+"      }\n"+"\n"+"      .ol-mouse-position {\n"+"        background-color: #ffffff;\n"+"        bottom: 10px !important;\n"+"        left: 20px !important;\n"+"        top: inherit;\n"+"        width: 250px;\n"+"        text-align: center;\n"+"        opacity: 0.8;\n"+"    }\n"+"      .switcher-mouse-position {\n"+"        background-color: #ffffff;\n"+"        bottom: 10px !important;\n"+"        left: 20px !important;\n"+"        width: 70px;\n"+"        text-align: center;\n"+"        opacity: 0.8;\n"+"        height: 20px;\n"+"        position: fixed;\n"+"        z-index: 1;\n"+"        display: none;\n"+"    }\n"+"\n"+"      #action-box-container {\n"+"        bottom: 8px !important;\n"+"        left: 190px !important;\n"+"        top: inherit;\n"+"        text-align: center;\n"+"        opacity: 0.8;\n"+"        position: absolute;\n"+"        z-index: 12;\n"+"      }\n"+"\n"+"      #action-box-container .btn {\n"+"        height: 20px;\n"+"        line-height: 5px;\n"+"        font-weight: bold;\n"+"        border-radius: 0 !important;\n"+"      }\n"+"\n"+"      #action-box-container .btn.btn-primary.active.focus {\n"+"        outline-offset: 0px !important;\n"+"        outline-color: transparent !important;\n"+"      }\n"+"\n"+"      #action-box-container .btn.btn-primary.active {\n"+"        background-color: #373B50;\n"+"        border-color: #797F9E;\n"+"      }\n"+"\n"+"      #action-box-container .btn.btn-primary {\n"+"        background-color: #797F9E;\n"+"        border-color: #373B50;\n"+"      }\n"+"\n"+"      #bounding-box {\n"+"        left: 10px;\n"+"      }\n"+"\n"+"      #polygon-box {\n"+"        left: 10px;\n"+"      }\n"+"\n"+"      #clear-box-container {\n"+"        bottom: 8px !important;\n"+"        left: 390px !important;\n"+"        top: inherit;\n"+"        text-align: center;\n"+"        opacity: 0.8;\n"+"        position: absolute;\n"+"        z-index: 12;\n"+"      }\n"+"\n"+"      #clear-box-container .btn {\n"+"        height: 20px;\n"+"        line-height: 5px;\n"+"        font-weight: bold;\n"+"        border-radius: 0 !important;\n"+"      }\n"+"\n"+"      #clear-box-container .btn.btn-primary.active.focus {\n"+"        outline-offset: 0px !important;\n"+"        outline-color: transparent !important;\n"+"      }\n"+"\n"+"      #clear-box-container .btn.btn-primary {\n"+"        background-color: #797F9E;\n"+"        border-color: #373B50;\n"+"      }\n"+"\n"+"      .switcher-container {\n"+"        z-index: 11;\n"+"        position: absolute;\n"+"        top: 110px;\n"+"        right: 15px;\n"+"        width: 46px;\n"+"        height: 90px;\n"+"        border-radius: 30px;\n"+"        background-color: gray;\n"+"        box-shadow: 3px 5px 19px 0 rgba(49, 50, 50, .62);\n"+"      }\n"+"\n"+"      .switcher {\n"+"        z-index: 13;\n"+"        position: absolute;\n"+"        margin-top: 25px;\n"+"        margin-left: 15px;\n"+"        padding: 5px;\n"+"        height: 82px;\n"+"        width: 42px;\n"+"        border-radius: 10px;\n"+"      }\n"+"\n"+"      .svg-background {\n"+"        z-index: 25;\n"+"        position: absolute;\n"+"        margin: 2px 2px 2px 5px;\n"+"        padding: 6px 5px;\n"+"        height: 86px;\n"+"        width: 42px;\n"+"        background-color: transparent;\n"+"      }\n"+"\n"+"      .svg-container {\n"+"        margin-left: 0px;\n"+"      }\n"+"\n"+"      #moving-circle-toggle {\n"+"        z-index: 15;\n"+"        position: absolute;\n"+"        margin-top: 16px;\n"+"        margin-left: 3px;\n"+"        margin-bottom: 0px;\n"+"        width: 40px;\n"+"        height: 40px;\n"+"        bottom: 46px;\n"+"        background-color: #373B50;\n"+"        border-radius: 50%;\n"+"      }\n"+"\n"+"      .onoffswitch {        \n"+"        position: fixed;\n"+"        width: 70px;\n"+"        bottom: 12px !important;\n"+"        left: 20px !important;\n"+"        margin-left: 255px !important;\n"+"        -webkit-user-select: none;\n"+"        -moz-user-select: none;\n"+"        -ms-user-select: none;\n"+"        z-index: 1;\n"+"        height: 20px;\n"+"        border-radius: 20px;\n"+"        box-shadow: 3px 5px 19px 0 rgba(49,50,50,.62) !important;\n"+"\n"+"      }\n"+"      .onoffswitch-checkbox {\n"+"          display: none;\n"+"      }\n"+"      .onoffswitch-label {\n"+"          display: block; overflow: hidden; cursor: pointer;\n"+"          border: 2px solid #808080; border-radius: 20px;\n"+"          top: 0px !important; \n"+"          bottom: 0px !important;\n"+"      }\n"+"      .onoffswitch-inner {\n"+"          display: block; width: 200%; margin-left: -100%;\n"+"          transition: margin 0.3s ease-in 0s;\n"+"      }\n"+"      .onoffswitch-inner:before, .onoffswitch-inner:after {\n"+"          display: block; float: left; width: 50%; height: 20px; padding: 0; line-height: 20px;\n"+"          font-size: 13px; color: white; font-family: Trebuchet, Arial, sans-serif; font-weight: bold;\n"+"          box-sizing: border-box;\n"+"      }\n"+"      .onoffswitch-inner:before {\n"+'          content: "DD";\n'+"          padding-left: 10px;\n"+"          background-color: #383B4F; color: #FFFFFF;\n"+"      }\n"+"      .onoffswitch-inner:after {\n"+'          content: "DMS";\n'+"          padding-right: 10px;\n"+"          background-color: #383B4F; color: #FFFFFF;\n"+"          text-align: right;\n"+"      }\n"+"      .onoffswitch-switch {\n"+"          display: block;\n"+"          width: 20px;\n"+"          height: 20px;\n"+"          margin: 2px;\n"+"          background: #FFFFFF;\n"+"          position: absolute;\n"+"          top: 0px !important;\n"+"          bottom: 0!important;\n"+"          right: 46px;\n"+"          border: 2px solid #808080;\n"+"          border-radius: 30px;\n"+"          transition: all 0.3s ease-in 0s;\n"+"      }\n"+"      .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner {\n"+"          margin-left: 0;\n"+"      }\n"+"      .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-switch {\n"+"          right: 0px; \n"+"      }\n"+"\n"+"      #map label {\n"+"          display: inline-block !important;\n"+"          max-width: 100% !important;\n"+"          margin-bottom: 5px !important;\n"+"          position: unset !important;\n"+"      }\n"+'      /**/</style> \x3c!-- toggle-switch button --\x3e <div class="switcher-container" ng-click="toggleActivedSelection()" ng-class="toggleSwitcherClass" title="{{toggleSwitcherTitle}}"> <div class="svg-background"> <span class="svg-container"> <svg fill="white" viewbox="0 0 30 30" height="50%" width="100%" style="pointer-events: none"> <g> <path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"> </g> </svg> </span> <span class="svg-container"> <svg fill="white" viewbox="0 0 30 30" height="50%" width="100%" style="pointer-events: none"> <g> <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm2 4v-2H3c0 1.1.89 2 2 2zM3 9h2V7H3v2zm12 12h2v-2h-2v2zm4-18H9c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2z"></path> </g> </svg> </span> </div> \x3c!-- circle-toggle-button --\x3e <div id="moving-circle-toggle"></div> </div> <div id="map"> <div ng-if="isMapLayerSwitcherVisible"> <ol3switcher-button></ol3switcher-button> </div> <div class="onoffswitch" title="{{titleformat}}"> <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked ng-click="switchCoordinate()"> <label class="onoffswitch-label" for="myonoffswitch"> <span class="onoffswitch-inner"></span> <span class="onoffswitch-switch"></span> </label> </div> </div> </div> </div>')
;a.put("components/navbar/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>/* EUROPEAN COMMISSION LOGO */\n"+"\n"+"        .european-commission-logo{\n"+"            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAA8CAYAAADmBa1FAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEQAACxEBf2RfkQAAAAd0SU1FB94JCQolMSBCrw8AAA5TSURBVHhe7VoJVBblGv4V10ow07LSW7ZZmruWuaeg5oK4W66EVmpZZiqouYLkbiyi5L4AKuAGqKWSslgebfGqpckFFBDR8pdVAXnv88z9NMQfHe9BuBfnP+c53zcz78y888z7vdv8JpPxMxgwGDAYMBgwGDAYMBgwGDAYKDkGRKQMoVcDyFrdj7ze65Zquby8vGeAJsCjeh8Usm0VKus956GWg1VWUiQ3uB8LhawtzgsAXn6oCdTz8CDrMRD1DtAbqAM8oec8ykC2+Y0bN0IBT1ynqt7zHjo5EFUZaJWbmzsM45t0A/dDAuTfBsm7gAuY97ufcx8aWRBTBegKjAVawyIdMD6JsZxeEiD7qrLocIz7cX41veeWejlmCiDkLcAelvwJxk60RuANoB6OP6KXBMi3B8HrgGjgOK73JVeJ3vNLnRzIK08fChKaYhyBcQrQKycnpwdGJ7oNzO1wrCZQVi8BOK++ch3bMEYAUbiOvd7z/+/kVD77CAMZUJuEAgxwQ2BlY4AvMP8QeA/zkcqCx2AcrOTeAUFdMH+NL0UvAZBvAKwAwT8qwjn64hov6L3G/4ScIrASRhv6T5KIeWOMdiCMpI0FnLE9C1iEh/QCvsbcFftdgHGYk9h3QSR9MM/5DCOJ764IH4prtlHbL92nRTfEecG45xbgABAIfId9UwHd+XiJkc2UC4QMgbLLobg/xt3AQSAS28EkFcc/xtgH6EzgnP4Yx2KcCRlvIADYhn27gPWQ/xxjt+zsbGYXQwEv4G2AWcdwjPWAFwHdAQ2yXDnjgR+oJ3AM2Aysx772JUag3huDrMeh7CyAxG6B0ovVA71HMrHPFeM3wE7M+ZA/0T8C3wI7gGU4NglgkCOxXOIMdsyVaflLuTJoySCZcnVh8R0wdrpP19Ee56xRL/c7XJeBkfenHl/hWC29z1wiclC8OpSkVaYASZj/BjDYbAU8MZ8O0MeSSPrWHhf+zOwfk5g6Mv5SqjPmi1PM19ZdMmcFX7qa+R2w54I50zcu0Tz4h+PxzY7+fqljQkqa++mky8MiIuLrxyaZx8QnmPuPdg953NRqXpVCYbfgUVOzFbd8OA0C93YDjgBToFsMX7LScw2NBfvrlQiJem4K5awZtKCoL8BgsxJYBawGNgEhAC3oEHAYiJywPCq5yejAvFedNsvLI/zkucHr86o5rMwsb+uVZGq5+DdTiwXHTW2X/FHhHZ9LLw73z61q73u1TOvFZx7rufxKDYdvUk1tlpwx2XqevwsScOyoyc6z981ngJ5dQfZXSs8wRfa3GDcA1NcD43yAQfd1oBpQhbFHDw8PXEZZtAetGTgBsPpagv0fQFGmYbb0yWp7MvbN6+6y83iFLt45pk6e8je8MAds/0ZZu/8cr9R1idTsM1esOntIGcho+/PJ3Tn3FpOdd7yp49Ih+YiuQgPA/cMU4T9i7oJ94RgXwFio2xygFcAG1ATsm4ixIcDiiCviUYwM+MVPPoMhFBioluUSKL4W2M4HAI5yqWKkK9kPhAHBfWeEnqnQdVnO3ciy7rlAmoz8XKy7L5S6Q6fJ6s1NpXqveVKz91xp7DQZ5C+948X8fb07iYaeryo96S6+UXpy9S1Qq4+xhHk68/ZuwHPAswBdHoN5X6A1wEBs/cAtuOAN8ABVGaSgLBs2TJ82QhE+DJchqy9aBVOo2djnDizq5rLjl7sRXQbW2m7cWFkb1BCkTpQa/Vxl2cbWUrOvq/SZMlw8MH9u4CwxdQShFi3bokW/hnuvVFbL4M1MZym26Z9n4hlowcx2RqkUsi7mrESZWjK2dMT+ZhhfoXUXO9G4MfsQTLmWAMyLV1B5gA9C4glGd4K564Ze00JOFkZ0tZ7zhWgwwkUGTx8mtQfMESu4jio9Fkjl7oukxaiJ0st5pNQC+Taweis7DwtkWyT6JWWZczF6AwsBV1ozRu6boQi1x8hyf7gilvXAC9huAbCwGgAUf6sVStiwD6EsmdbBtIkBZiP3KfhhZI7N4LjafurOf1oiuhxI6zHhI5m7wk4agWgr+GJad0G/XRa+utNnY8XFs7u8MngGXEhBy7ZIdCPcm8F6NvTgSlvFfge26e4WY5sZCVPSwaoi7Yk5XQUJZsrZiC8CqSXdyrPFbtGKaBYCgYpIWnIQsBPb9MnMU1mJMeugrz4wyHVPXMWuy3ILLnsrW095fcQUGTV3oNSHXy5I8k15Et101BcyCBZfa4CrLouGns9Dn96sTqHDJsxJLvP8pSo/p2ujZTM/pz+n22CxRPRmUMdYH2DboEpJET0OStJq86d2rBSZMnGJugPMU+mrJ7UbHxhRrotX9u1EewoD4OvDp2j+t3yXrwvNLPgCKiMYthg5UerhhVSE7O0vxaJF89MXCyc3VcmS2OXYpnVPYSFDa6bVAnQPtG4WTYOYNWFkF5FpH5tdNUuCaBYsJNUM/AlcVmABk4xjicB5IB6IBWKcFu4zV+7mk3cb0Vj+Td53Fh//NmLv/ME90jcvLeWb6tVNVvi1lDoDZxbIQCxmHWxkvQbMA37lCwfeVMbBypD9brq3dco9PIW5NcB8mpbsRBej2qvFX9jQdUCJMVCCaZ0PfZ56mBk4xiYS3QrTIzaMuAwHNBkVEGJlt+xaQddR3cFd2n4yWuq89+U9iS4H/91ouIt0/nSsFjxvv5ZFi2ZZ7wKdOgCNoSfJDVD5/cfY5qobBTCNY3An7AFmHRzZpm0H0F/r/oRWZJaPm9YAmDZlAhlAOpCmxlRaNXAW+BlgPySs/8zQGEs+mkHtSYevpDYyivKd71KUQM6m50KtiKnQGS6mQKFjsrVo0dXZQcT9jwLRfOH02+wcYs7GEl0FiWTG4QaZmTQUgD1xug3m1M/yJWF8usgI1HshZdEToBgb6swqWAyw9+EDheijFwMsCuYDXLaudhO3/1i+i3cBH+0lzDoGTXWUTYFNpdWHnxdaAZZBMHRwcRTPTW8hDXTWRTTuywKEjaWGtGqMLEyoI/N8WrEj82hl4Y7YHoa5gwqCdti2V76aPrz4icZNnwCBnkAiEA/EAjHAaeAXgNnGbiBIuRfvrpN2/GyJaJbXdQbMlnddRkgLx8nSCD7bxn6+VnZXRPArC0uu2ddNGrw/WRo7OovtJx9LdawAnekdg+F66LAPhI5HC/YtoBn8MUlmkcUagJnGzYrwFczpt+lW2CNZhDmDOQNl8Xf6cFNrgD6aD+GrrJgWzGKAkX0WIzoebgYDCZfq2+ODoi0RrflZVHtlOvhIu4/Gy4atzaWZ0ySp1X8Oipeh8lQvd+nn8r54b2gt/+g3R0yQu5Nk5t0WfTSDWjtFFL/g8GMDK0Htaw7gxH4HcOsLj7Ji+nRWhMw46J/5wmroXfFFJsdyFDdm25FflkOBYIB/VGHhwnSKVRitZRHdB0a3wlxH/oBWd8g0GThthDzTx10af/CFBO5qIA0cJ6GQcUZR86HYoFIsvFdikei6qnHEVI4Nr0FM81h6Qy8aBoP4dGyzpctipYmqCPmvKObOtPDmAHvmTxUZgXovhJtaA6NJLMDKSyOWS41WjTnzZ5a3DDoTgM/ajgs8VK5zwTz69gqwDKtC1aWr1G2RtBr9qVTtsRD5MqtFBMq7dvAsEk09+ZWlI9ADhLIRNghg06gPtjkfpqrCjzCntbOjN4mVLzAMc3ugFV5Adb38FJkcbsov1mwq8RMWu3bsZ9CiWX6zJ83gyDybfpzkz+v1Zcixag6+OVV6rhBd6AE5Db765HFdm14rE2q9u3pkvjYpLZKBj98op/PFq4rwZjtUK1qg31zqSCuHDMvyafTpGOlimJ4yzatdZATqvRBuWhHgkmKZyo+q/GuAPcDlR6W6qwKADRkGF7u9R+K2B0XEXAPkQSAY1w2OiovfHH7mVj+aVqiyDerBngW/XdpiZMnNLIQ9aPY2WgLMuflMXAH0yQTnzZnelYhF84XgxvxLbDm9uJ5zw/N6dm7GyVO/S2zcOcnOvVGkyOH1cm7EXENGcdNgoBv/5nsvHfmfkvyogO1boFGp7eJv/Ou1/PxyWJYe5itXMtatWy+nTv0maenpcj4hQZIvXtTGlJQUSU5OlqSkJA3x8efk4sUUiY2Nk6QLFzS57OwcPHPhP5ASw9Ttv9Gv1JyjEW2+khGweYv8+utxORQRIbPnuMnevd9K+PcHJSh4m2wNDBZ//wDxXblS1uKFbNu+Q5av8BU/P385ceKkXEy+aBB9L4sg0RkZmRl+/v6yf/8BjcRNfn4SExMjx479JN+D7MCgbbJj5y7Zs2eP7Nm7V5MJCQmRiIhI+euvv+TKFbNBtB6isbQz8JPMzEwB8YJtDZwjymtkXruWpe1LT8+4dYzbPE7cPIdjwZ/hOvAWaNEofzOOHDmi+V8iLi5OG2nVifDLCfDVnNNXh4d/L+fOn9d897lz5+QC/HRsbKwkJibinHhN7vr167dxbRCtiE5LS8sIDAoGWUkSFrZbVq1aAzexV3btCtF89YED4RIQsFkOHjokc93nSWhYmOzHvu07dsq+ffs1NxIauluCcI31GzbKn1gB+X8G0YpoWGBGRGSknDnzhxw+/IPmi0+cOCEnT52Cnz4mp38/LdHRh7WsZOMmP03m4KEIjezIyCiJio6WqKhoTeZA+EFJTUsziC7os+k66KPNZjOC2hUNqampmr8m0pHuZWVlCaxesjKz5PLly5oM5em7eZzyV69e1WSuYk6fXcCiz+Iefe4VL0rtcRYOW6LPem2NiknfGvlH3gNB1Nm8wOjY+G1R/xpaaonU82BP91ntVbP3qkyM8mCwRp7ut/b8MwPWOurRp/TKtPd53tTR4w1T+2UtHxjaejY1tXEr/r5x6X1rxpMZDBgMGAwYDBgMGAwYDBgMGAwYDBgMGAwUCQP/BoJ+km9w+NbUAAAAAElFTkSuQmCC');\n"+"            background-size: contain;\n"+"            background-repeat: no-repeat;\n"+"            height: 60px;\n"+"            width: 80px;\n"+"            top:6px;\n"+"            position:relative;\n"+"            float: left;\n"+"        }\n"+"\n"+"        .esa-logo{\n"+"            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAA8CAYAAACuNrLFAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEQAACxEBf2RfkQAAAAd0SU1FB94CHA4SL11UDDgAAA7USURBVHhe7ZsHtFXFFYaNCXZBRQVbQHAZ0CgoxJpYsa2loomgokaxV7BHjS12KRFQgg0Dxq5EBSsKYkns2GLBiCaoiQ1EEymPYr7vrn3vOvdw330vrOd7T9bctf4158zsM2fO3nv27L1n7lJLpV/iQOJA4kDiQOJA4kDiQOJA4kDiQOJA4kDiQOJA4kDiQOJA4kDiQOJA4kDiQOJAA3Hg22+//QFYbuHChW0oV6HsUlNT033u3Lmbc/9z7tcHa3LdnnJFyqUb6NWpm6bkgIJHoKuBjcCx8+fPP5Ny5wULFtwJ/gr+DJ4Hl1J/KPgDOAFsyLMdwDJNOf707sXkQAh+WQS5Bfg1OA0hfw7uc8ZT/gm8B24Et4ORKMcFlJPBB9AfCI6E9rCwDMkiLKYsmuQxhLYW2B1hXkE5JIT7RShAN8rR4EPaRoQyjKK8HLwSCnAIz5yqQkBzKstFN5eQJvmY9NL6c8C1G4FtAi7WnCtcSgV7JZihAnC/RywBr3KtIowJ03861y+CKQi/P+Vw6h8NJbnLJYT+29Z/NImy0TmAkNYD14NxChs8xLXCvDAU4N64H4sw76JOH+B1Zz/1J4YC3BsKom8wENwDHgVXQ7MlWL7RPyy9sDoHYs3fECFd6owGQxDUc+Ap1/MQ5AeUt4ZijOOZs2hTuH8DLgU6hqOY/SdRvglUovEKP5TlCejvBgeBlZNMmhEHENAPEcpvENZEMDRM+KtcP039eUDh3gCuB58qaOrOUFkoh4KHQhGupXwp+prA9S2hNPdT90b0MZjrjVOo2EwUAEH8CIEcjnCeAP9E+CrC72L2usY/bRt0vUKYzm4tgTN/pApCqYAHUT4ABnG9O/Q7KGhwHNjfkjYVZRLXLhmt68MC6FYE3UOpHuP5jx1nKNow6vfUt6hLobRyM2fOXDXGdRHP29dHYCp9TASGsnuAdeRJtbFBY4TUEfTkea2myu6YPgTv2jd9XEj7jn6n767PtzYJDYPTQ9+HQRvXvwxuAo8wcB0/FUFB6w/oELokOPNvo3yWcozPcX1JNUHIALAqynUOdM/JsHnz5u1UTWjhkOqTDIV+NvcVf7TPddyU2ymYSkwMJd8UOi3anGp90T6Fse1bW9RCe0twTAh6QW19WQ/dbHALl52apRKE6e9NeQUfpKOm0CeByc4ISuP8a8DV4D3qRlLeDR7g+mJKnUD9hV3po1V9NBi61cPK3MNza9X2DHRdQxHnVWNysY2+Pge/8puyfcp46relL5emqgLL9DUD2gPyfalgjP1Yymn1GVORJr5jjfrwp1Fp+JD1QrhTKAfxcWdRPg7uAM+EMmjK7gAqgaHha0CL8BQYQf0inj11mtG2pou57sz1SsUPC4F05tnbaetT6YNnzZrVjnb9i7kZoSyk7j/UqYjvgH/lZ7Ozkrru2T65XyP6mp8RyDfUTwRaNeES9g+QpfmI+3Y5ZVIpJ1C/MNfX81QZIhsdvQTNV1kF4X4BbX0bVbh1vSxm/y8Y2MMKk1InTz9AQRu+GQK61muy7wfXgbHAdXecbaaG6ad9RrgtMJ89aNsPuqsoB0JzGug7e/bsMjrqjqe9f36c9Ld0JJE+ywpfAdHnhbQdECb6aNp1Rqdn6GpUXoVe7BdaU9fmLApklMpDP2UjlTEUck3ujwRvFoVLWcO7jsspk7P/i6xwudcCbqNlo2yD0m9PaUq8NP547/11yaRR2xngysDkzRgFGTP6RepuVsvBcODs0JMfCf7ih4WyaPqH8bFb52aIWULjfenHUqo0f7Qf3tHLd2aUpb1KRd06uT46qHDUl2Yj1zPAwaBsjedeS+EYZ2WUQMug+S44XlzvD83UrJJkFaT4buqWB9eCgr9BqaKMzYzXzbArczN7Wn780kPTlfoncooyrVEFXNfLZCYfeKsfzUDN1Cmkc6jTCujNF2L4UADNm7NGa/F7ynuhPVmtzzDIUHJv8AIohoxvxCw9RkGA9bPjcsmhvVeFWfZJjtF3cF/RM6fPzcH7GQHreF3HfYuiAnCfVQDN8WVgxQq+wm7UmwUdGDghpyD7Bh+K7SfxnkU2vKDZCbycU4Av65JJo7arueAUYDJnmoIFrv3G9SeB3/IBOocTub4RuBRoHVQOFeaEIpOD0a2pN4toOOhmkbPbKMI+tAIFf6E4MzMz5aDcLHPpKK2xXmv2KdblWbeet81hS/p+N6MAPvIYWC3GpVBVxNIP+q+pe4TSd7l7uRfoAoHh5OoZlBxbxw1WyrWvEvVah3VBd8ZqSD2e65JV8sXcNzsF+CmDMqTTo7+E0nj/ecZ6NPfGrqtSbgB6U/84pcuFkYLe/zW075CbuT2hMWnkXoLnAxSYcXdb1n/7sS4/61ppSTKzrA00o3PCmkvdZsDQSz/AjGQWU7kvOYvB7NdVllCytvGNJaUKGi3Bf4G7nOYD/q6iOAlo7wpq3cFU6Aob2mHgBeAmmPkRcwqfgrLxxPu+or5No87yai9TmxmQ6VoF6jrvrO4fZrmwfsqEaHe3T+Y4k3UYdXIOzCnAZrRdL+OrMS9ndpeBdp+MAmiVjJuzs3UWdRsCHc56/aCdxnccGt9QDAMnU19nGAhNDZjOt/iNZfsWvNyk2W60PRiCnkNZpli1DRAyrU7nZqMADKYdcAPHjJjC1USbUNkVeKrHNV3HaCfaHuZeUz4GuP+ved8mt573of5ZHEM9Yk3jcjLMMvprFfW2tbIu6jvVoQA6ZZ2gPYX+nbGGgnVBR/DsnLK14vnR1H8SwtBXqDXHYBsYVFRmymVQqhMVfF7I1KmkzvDpwGzgEHAn16WkU3NUAGPxKxnYA5GYcR/gNk0g90dQb4h4MPfG/AreTKFhoPsCd0NzrqYws37r1Q8ORVFBZJZOk6ng82gzfNQ5NLlk6HQBOB76Hpk+DKVG5iyAptqsYdcIHQ3F6sLh0JTlAzJKZnbR00smvXRuDRHfDwGWWQjqzAV0VAkIJ00Tv5kdG/daC/dMzJXsB1yqWsoXyquorynSN0cFMJ+t0+YGj1u6OkTm/p3h1qkMJmt06FwidBD1AVQAt4WNm0smkg/VZ3Ar+CEEdTSlUYTOpbn/AUCh9Ba061cMAI/B2NISECbWnHyJcTKQ+zOqmU7aPbK2VWBrSs8qFiIUrtfl7GJX0EVQ/+Pc0qWV+xlj0Q96i+uSVeD6S7+TZ1wuzwZlazv0hsYt82MLBVDhs301ryWAQbZggEfxEeb9zf+b+FGwRgXOdIVpvD8GuPdv+WCxHjpne8l8B7P3imfMJmoFBsezho8qTyG0VPBe0z4ozzwUwplU8upVAGh16jpUUgLq20JvzkEHzONoOoiTipYlchxm53TWxPBa+jEBdTLPZxNQX1F3OnWeixxQwfT3oa4s9Rx+h5Ph9py1aHYKoJk6H4a4Lpo9M/Xq7p4zXUugAih4c/9aAh1GFcLsoJlBj4v1zM2mtak7l7b7zKLJNK6fBPoY7wB3yoTnCd1Q2jYvDOrMyt0MsuZTZ+sG4AwuxPehcEYNRh4zisymX5eMCUWFodQ8f5Np1wfoUmHWehrK8Debg5jJvd/RGgysoABH5BVAa8G3exayTIm5b14KIAM0ifBLweoAPgwK0UAIWlPvtdAPMAKYAMwGOntVFLN+W1UQ4kHSqCy0u9b3gymGnPocLgf9QVmePeMHqJgeKv0gy3Ce1QHUepjEOYr++lHeBD4G2byBZlv/pDAzud4baNoL3UnLz1T2jipTQEd1F+Chlez+w79p70Zdy/iOMqeRsUzGYv1SoQMd2+1UOBU+O6Z4b/NTgGDQIQzYGa3pV9gKfgxw5nut8E0AmRVU6NJqCfQTxhtu8YEr5Dxut35Nxx4GzCu4H6DPoCPlLDbZUmucDY0zzjW3LO8ejNQa6OUbv+edNp0yLVkp4+i7INPKZT1y6TzBrH9jkst08is5mvncj+B5Q1XDPx3iShHA27QbQru7+SLXM/OWorkrgNrtUuCM1QFU4JaF2U+bnrs7YOdRupYa4rjGG+boRI7nA/ehzMfMS1NvIsg/i3R2M8hZUpyZ1Zy6WEeNCHTMynbWKjG3WAe9+/0b55TRDJ778Tqjpf0Fn6Fvqgrh3iL5AdpM5bbPLDdrqBCVaPNj8j08b79Zy2Toun1d393o7c5EBtaPAbvG6qw5K4oWwSVBxhm66bi5/ntAw8ygx788+aKSuHt4A9c9nDEN9RH0uxomdi/6frKa4Gn/GngoZQPoFjl9Yx1tm0DjSeVaD4SEUjjztQhuY5f1pULQx2WgbK8iOzbaXJI8Se1S9VFGOd2pHNJQvGnQfpyZDFZfYAKwVNButY7FdPuHDw9TaJI9A+D6qRUw/tXJ01l8jTp3FD3qdbpKUEkQMbP/r+NR9GMySa/aP6m4BHkkbDr4gnsPrp6JdfF4VtXTxqEEJrg6QKsSvwU+Ax53t7+3VWpgOFmI5Ss4ilqTFWj3fR4r8xyFS5HnJD2LcNGcOXN+EjQuY/a1cwabNajgGqqzYM4WfITJIC2AGz6mO7UAKoV1xfOBardJIddVw8dnKA353D52P8GDJCZ6/HjNpp66B0MOpV46nabF/pOIFisUrBQNLC4foi8zlotttWpT9MUdU5M9h2CWxdx6yFHHrxjumSMYzL07ZzpXzhzPCKr9bhvrGLpOmxCZDDzz5/8IPCHj7HLzxuXkIhhlaNRuiWFYk0nqO3yxMxMh7QkM9cwEau5NCnm2v3hu0HqhUhivu1yYILL0/KAKpC/hczqS+hbng1005UkBvkMBNkTXmkWEZTr1eISnWdf0Gxk8iz9gtODW5yjojHdfBjpMznwjAxM87uY5288Opbgu9hYK+/Pp9z3gQCjB2ubpEaQRgqY/uzToGwjDxcJeQfgDOmlaBx1Ic/p9dbq+B5+chliJAwjPTJlbsR090xe7hv4NTCfQQyGeE/CUsEuBOXNNvYc9T6StW+LqEsYBBKtXv6N/6vAv31x7dqCnwqbcFHgaaHnuF9kgWcJYkT4ncSBxIHEgcSBxIHEgcSBxIHEgcSBxIHEgcSBxIHEgcSBxIHEgcSBxIHEgcSBxIHEgceC748D/AClxwXKuQwRNAAAAAElFTkSuQmCC');\n"+"            background-size: contain;\n"+"            background-repeat: no-repeat;\n"+"            height: 60px;\n"+"            width: 80px;\n"+"            top:13px;\n"+"            position:relative;\n"+"            float: left;\n"+"        }\n"+"\n"+"        .toolbar-actions{\n"+"            float: right;\n"+"            width: 100px;\n"+"            height: 55px;\n"+"            background-color: gray;\n"+"            top: 5px;\n"+"            padding: 5px;\n"+"            position: relative;\n"+"        }\n"+"\n"+"         \n"+"\n"+"        .map-button{\n"+"            vertical-align: middle;\n"+"            margin-top: 12px;\n"+"            margin-left: 20px;\n"+"            padding: 6px;\n"+"            line-height: 20px;\n"+"            font-size: 15px;\n"+"            position: relative;\n"+"            float: right;\n"+"            display: block;\n"+"            height: 40px;\n"+"            width: 40px;\n"+"            color: #fff;\n"+"            fill: currentColor;\n"+"            cursor: pointer;\n"+"            text-decoration: none;\n"+"\n"+"        }\n"+"\n"+"        .map-button:hover{\n"+"            color:white;\n"+"            text-decoration: none;\n"+"        }\n"+"\n"+"        .map-button:visited{\n"+"            color:white;\n"+"            text-decoration: none;\n"+"        }\n"+"\n"+"        /********/\n"+"        .map-button:link,.map-button:visited,.map-button:hover,.map-button:active  {\n"+"        color: white;\n"+"        }\n"+"        .login-button :link,.login-button:visited,.login-button:hover,.login-button:active  {\n"+"        color: white;\n"+"        }\n"+"        \n"+"        /*********/\n"+"        .login-button {\n"+"            background-color: #797F9E!important;\n"+"            vertical-align: middle;\n"+"            margin-top: 12px;\n"+"            line-height: 20px;\n"+"            font-size: 15px;\n"+"            margin-left: 20px;\n"+"            position: relative;\n"+"            float: right;\n"+"            padding: 10px;\n"+"            cursor: pointer;\n"+"            color:white;\n"+"            text-decoration: none;\n"+"\n"+"        }\n"+"        .login-button:hover{\n"+"            color:white;\n"+"            text-decoration: none;\n"+"        }\n"+"        .login-button:visited{\n"+"            color:white;\n"+"            text-decoration: none;\n"+"        }\n"+"\n"+"        #toolbar{\n"+"            box-shadow: 3px 5px 19px 0 rgba(49,50,50,.62);\n"+"        }\n"+"\n"+"        .brand { \n"+"            position: absolute;\n"+"            width: 100%;\n"+"            left: 0;\n"+"            top: 0;\n"+"            text-align: center;\n"+"            margin: auto;\n"+"            color: rgb(255, 255, 255);\n"+"            font-size: 24px;\n"+"            line-height: 60px;            \n"+"            white-space: nowrap;\n"+"            \n"+"        }\n"+"\n"+"        .navbar-brand\n"+"        {\n"+"            position: absolute;\n"+"            width: 100%;\n"+"            left: 0;\n"+"            top: 0;\n"+"            text-align: center;\n"+"            margin: auto;\n"+"        }</style> \x3c!-- *************************************************************************** --\x3e \x3c!--\n"+'    <div id="toolbar" class="navbar toolbar" role="navigation">\n'+'        <div class="row">            \n'+'            <div class="col-md-4">\n'+'                <div class="row">            \n'+'                    <div class="european-commission-logo"></div>\n'+'                    <div class="esa-logo"></div>\n'+"                </div>\n"+"            </div>            \n"+'            <div class="col-md-4"><apptitle></apptitle></div>\n'+'            <div class="col-md-4 ">\n'+'                <div class="row">\n'+'                    <a href="#/home" class="map-button" title="Map">\n'+'                        <svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;"><g><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"></path></g></svg>\n'+"                    </a>                    \n"+'                    <login-button ng-show="!userInfo.isLogged"></login-button>\n'+'                    <signup-button ng-show="!userInfo.isLogged" ></signup-button>\n'+"                    <login-dialog></login-dialog>                    \n"+'                    <user-button ng-show="userInfo.isLogged" ></user-button>\n'+"                </div>\n"+"            </div>\n"+"        </div>\n"+"    </div>\n"+"--\x3e \x3c!-- *************************************************************************** --\x3e </div> </div>");a.put("components/odata-synchronizer/odata-synchronizer-item/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.cart-item{\n"+"        \t/*height: 100px;*/\n"+"        \twidth: 100%;\n"+"        \tposition: relative;\n"+"      \t\tbackground-color: inherit;\n"+"        \tborder-top: 1px solid #bdc3c7; \n"+"   \t\t\tcolor: #34495e;\n"+"   \t\t\theight: 103px;\n"+"   \t\t\tpadding-top: 4px;\n"+"   \t\t\tcursor: default;\n"+"        }\n"+"\n"+"        .placeholder-image{\n"+"\n"+"\t\t\twidth:            100px;\n"+"\t\t\theight:           auto;\n"+"\t\t\tdisplay: block;\n"+"\t\t\tbackground-repeat: no-repeat;\n"+"\t\t\tbackground-image: url('data:image/jpg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAA6AEADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDxWUZc1PcriOPn+AfyqKX73/1qlueUjz/dH8q9apJvm7HVFLQS3I2t9KYOX+nFS2yjYxoBxIRXbk3LPEcik1dP8CMUmqfM1cui0lu7hVtomO7O0MegHqeOmRzxWv4e+02OqjNpL5ggYmNlJJycZxwQPbuO+DRpd1bWlu0lw5OwrKiIclWUHDH5SB8xUDnr7HB6qa8hciG2i/eGIFV4Q5OfcdCD+J65ryM0nJYmUHTundXf4u/o/wBTuwkYqip89no7fpY2NPRLm+VmAOxCN+B8zEnPTr3z0711GqSyN8P/ABHDuBVNMuRxnH+rb/A/n3rhdLuUxsVJFTGVZkYAjsQ3Tp+PtkYrpb7UH/4Q/wAQWwwGXTbnepwdv7tuR+FfF4qhKNWPNpZr8z1sTarh3y69TwB+XxU067lj/wB0fyqBv9aQT3qzP9yPv8o/lX3dd2crHgU1e1xbdCEb6VGR+844/rU9scqw9qjK4k6d646VWcJKUXZnVOEZRt0Oz8MCWaJzIQsKkZkd+FwuSfwAX24FbSPNKCoZXCxkeVv5JyAcjkEHKYyQfm5xmuc8OOxhvEd8QbULLkgnntjOfTGOeB7HvYdLnNtG67eEZZI2ZS456FQSCcL155JBAK8+Vjq6p4qU6m7/AMjuoQ58PGCf9XMy0tN8k0s8UTOF3yx7z+7IHAbjJwe5PGSOwNTa1K6eHdW/eIwNjOmFGONhA/D/AD3qzbRvJL5sqoVGOmGY9MgZB9MfgfaoPEEMaeGdSFqxMa2U+AvQgoeegzxjnJzx2rz6k3VcXLudNo01KK7HjUgPmValOY4/90fyqvJy55qdv9SmfT0r7DEatnz9LoPtujfSpQm489ajtSCH+lTxjJry6ztqehQV9GaWmX9xpF6l1bMysAAdpwSOMjPbpXoGn6nPfr+5tpBbAF/P2BcLvzgMODgZyAfXGCdo8+WLKqT6V6P4Ie1j09CEGbcs5fdwrdSPmOAcHOfujnJUcnx8bOL95rVHpQg4U7otxWzT3qqsZkeMAMSeGUkgJjOAeGyTjpiofEtpJF4d1ppBk/Y5mIZTlD5ZBA6d+K1rXVpdkrNYrFBKFcXLh0DufvZI6qAT8p+b5cZyQK5/xNr/AJ+havZw2UzK9nMRJ5RC4CnLAEEgepz36815yVbnWml0Dnzppdjxp8eYf6VPP/q0Ax90VXb75qxOflj/AN0V9/iI2bPnKT2JLRcIw74q1APmAIqtbf6t/pVuDqv1rx670PUw6uzVQYUY9K2dE1C5055mhZQjKSdw4XlcsMc525H4msde30rUsRmOfP8Azy/qK8WtK002rn0FCiqlFxZ3JhluRaGC7VtzbGjl2/u1yG4X+EgEADHG8EletM8SiKXwvrD2kZEKWFwgQMQoUIQCPXjHqefrXOaQi/2toEe0eXJaKHXHDAmUkEd810niMlfAF2ykhv7PkTI67fJPH04HHtWWLoexrQhe+vp1f+R40avNTlLun+R//9k=');\n"+"\n"+"        }\n"+"        /* **** */\n"+"        .header {\n"+"\t\t    display:table; \n"+"\t\t    width:100%;\n"+"\t\t    margin-top: 10px;\n"+"\t\t}\n"+"\t\t.logo,\n"+"\t\t.attributes {\n"+"\t\t    display:table-cell; \n"+"\t\t    vertical-align:top;\n"+"\t\t    \n"+"\t\t}\n"+"\t\t#cart-item .attributes{\n"+"\t\t\tpadding-left: 10px;\n"+"\t\t\t    font-size: 13px;\n"+"    \t\t\tfont-style: italic;\n"+"    \t\t\t\n"+"\t\t}\n"+"\t\t.logo{\n"+"\t\t\twidth:60px;\n"+"\t\t\theight:60px;\n"+"\t\t\topacity: 1;\n"+"\t\t}\n"+"\t\t#cart-item .list-item-title{\n"+"\t\t\tfont-size: 13px;\n"+"\t\t    font-weight: bold;\n"+"\t\t    line-height: 20px;\n"+"\n"+"\t\t    \n"+"\t\t}\n"+"\n"+"\t\t.item-title {\n"+"\t\t\toverflow-x: hidden;\n"+"\t\t\ttext-overflow:ellipsis;\n"+"\t\t}\n"+"\t\t\n"+"\t\t.tooltip{\n"+"\t\t\tbackground-color: red;\n"+"\t\t\tposition:fixed;\n"+"\t\t\tz-index:99999999;\n"+"\t\t}\n"+"\n"+"\t\t.item-buttons{\n"+"\t\t\tposition:absolute;\n"+"\t\t\tbottom:10px;\n"+"\t\t\tright: 20px;\n"+"\t\n"+"\t\t}\n"+"\n"+"\t\t.item-button{\n"+"\t\t\tmargin-left: 15px;\n"+"\t\t\tcursor: pointer;\n"+"\t\t}\n"+"        /* marker label */\n"+"        .button.S1 {\n"+"\t\t  background-color: #DC143C;\n"+"\t\t  color: #fff;\n"+"\t\t  font-family: 'Open Sans', Helvetica, sans-serif ;\n"+"\t\t  font-size: 12px;\n"+"\t\t}\n"+"\n"+"\t\t.button.S2 {\n"+"\t\t  background-color: #0f9d58;\n"+"\t\t  color: #fff;\n"+"\t\t  font-family: 'Open Sans', Helvetica, sans-serif ;\n"+"\t\t  font-size: 12px;\n"+"\t\t}\n"+"\n"+"\t\t.button.S3 {\n"+"\t\t  background-color: #191970;\n"+"\t\t  color: #fff;\n"+"\t\t  font-family: 'Open Sans', Helvetica, sans-serif ;\n"+"\t\t  font-size: 12px;\n"+"\t\t}\n"+"\n"+"\t\t.button {\n"+"\t\t  background-color: #505050;\n"+"\t\t  color: #fff;\n"+"\t\t  font-family: 'Open Sans', Helvetica, sans-serif ;\n"+"\t\t  font-size: 12px;\n"+"\t\t}\n"+"\n"+"\t\t.button.raised {            \n"+"\t\t  text-align: center;\n"+"\t\t  line-height: 15px;\n"+"\t\t  height: 15px;\n"+"\t\t  width: 30px; \n"+"\t\t  margin-top: 0px;\n"+"    \t  margin-left: 0px;\n"+"    \t  margin-bottom: 3px;\n"+"\t\t  font-family: 'Open Sans', Helvetica, sans-serif ;\n"+"\t\t  font-size: 12px;\n"+"\t\t  padding: 1px 5px 1px 5px;\n"+"\t\t}\n"+"\n"+"\t\t.list-link {\n"+"\t\t\twhite-space: nowrap;\n"+"\t\t\toverflow-x: hidden;\n"+"\t\t\ttext-overflow: ellipsis !important;\n"+"\t\t}\n"+"\n"+"\t\t.listrow {\n"+"\t\t\tmargin-top: -5px;\n"+"\t\t}\n"+"\n"+"\t\t.list-attribute-value {\n"+"\t\t\tcolor: black;\n"+"\t\t}\n"+"\n"+"\t\t.attributes-values {\n"+"\t\t\tpadding-left: 0px !important;\n"+'\t\t}</style> <div id="cart-item" class="cart-item" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> \x3c!-- title --\x3e <div class="row item-title"> <div style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap"> <span class="list-item-title" style="float: left" title="{{synchronizer.label}} - {{synchronizer.date}}">{{synchronizer.label}} - {{synchronizer.date}} </span> <span class="list-item-title" style="float: right" title="Last Creation Date: {{(synchronizer.lastCreationDate != null && synchronizer.lastCreationDate != \'Invalid date\') ? synchronizer.lastCreationDate : \'N/A\'}} - Synchronizer Status: {{synchronizer.status}}">Last Creation Date: {{(synchronizer.lastCreationDate != null && synchronizer.lastCreationDate != "Invalid date") ? synchronizer.lastCreationDate : "N/A"}} - Synchronizer Status: {{synchronizer.status}} </span> </div> </div> <div class="row item-title"> <div style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap"> <span class="attributes attributes-values" style="float: left">Service Url: <span class="list-attribute-value">{{synchronizer.serviceUrl}} </span> - Copy Product: <span class="list-attribute-value">{{synchronizer.copyProduct}} </span> - Schedule: <span class="list-attribute-value">{{synchronizer.schedule}} </span> </span> </div> </div> </div> </div> \x3c!-- buttons --\x3e <div class="item-buttons" ng-show="visibleItemButton"> <div class="glyphicon glyphicon glyphicon-play item-button" ng-click="startOdataSynchronizer()" title="Play Synchronizer"></div> <div class="glyphicon glyphicon glyphicon-stop item-button" ng-click="stopOdataSynchronizer()" title="Stop Synchronizer"></div> <div class="glyphicon glyphicon glyphicon-remove item-button" ng-click="deleteOdataSynchronizer()" title="Delete Synchronizer"> </div> <div class="glyphicon glyphicon glyphicon-pencil item-button" ng-click="editSynchronizer()" title="Edit Synchronizer"> </div> </div> </div> </div> </div>')
;a.put("components/odata-synchronizer/odata-synchronizer-list/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>#content {       \n"+"        max-height: calc(100% - 120px);\n"+"        overflow-y: auto !important;\n"+"        overflow-x: hidden;\n"+"        padding: 0px 3% !important;\n"+"        margin-top: 60px !important;\n"+"        position: absolute;\n"+"        width: 100%;\n"+"    }\n"+"\n"+"    #container {\n"+"        height: 100%;\n"+"        width: 100%;\n"+"        margin: 0;\n"+"        padding: 0;    \n"+"    }\n"+"    header {\n"+"        width: 100%;\n"+"        height: 60px;\n"+"        position: fixed;        \n"+"        background: white;\n"+"        text-align: center;\n"+"        font-size: 16px;\n"+"        font-weight: bold;\n"+"        padding-top: 20px;\n"+"    }\n"+"    \n"+"    @media screen and (min-width: 993px) and (max-width: 1200px) { \n"+"        \n"+"        header {\n"+"           font-size: 16px;\n"+"        }\n"+"      } \n"+"\n"+"      @media screen and (min-width: 769px) and(max-width: 992px) { \n"+"        \n"+"        header {\n"+"           font-size: 14px;\n"+"        }\n"+"      } \n"+"\n"+"      @media screen and (max-width: 768px) { \n"+"        \n"+"        header {\n"+"           font-size: 14px;\n"+"        }\n"+"      }  \n"+"\n"+"    footer {\n"+"        width: 100%;\n"+"        height: 60px;        \n"+"        position: fixed;\n"+"        bottom: 0;  \n"+"        line-height: 60px;      \n"+"        padding-left: 5px;\n"+"    }\n"+"\n"+"    footer .cart-button {\n"+"        border-radius: 0px;\n"+"        vertical-align: middle;\n"+"        margin-bottom: 20px;\n"+"        line-height: 20px;\n"+"        font-size: 14px;\n"+"        font-weight: bold;\n"+"        margin-right: 20px;\n"+"        position: relative;    \n"+"        padding: 10px;                \n"+"        text-decoration: none;\n"+"        text-align: center;\n"+"        background-color: rgb(55, 59, 80);\n"+"        color: white;\n"+"        cursor: pointer;\n"+"        float: right; \n"+"        margin-top: 10px;       \n"+"    }\n"+"\n"+"    footer .cart-button:hover {                \n"+"        background-color: rgb(55, 59, 80) !important;\n"+"        color: white !important;\n"+"        cursor: pointer !important;\n"+"    }\n"+"    \n"+"    footer .cart-button:disabled {\n"+"        background-color: #afb1b9 !important;        \n"+"        cursor: default !important;\n"+"        color: black !important;        \n"+"    }        \n"+"\n"+"    .disabled-button{\n"+"        opacity:0.4;\n"+"        cursor: default;\n"+"     }\n"+"\n"+"     .select-page-button{\n"+"        cursor: pointer;\n"+"     }\n"+"\n"+"     .page-selector-input{\n"+"        width: 40px !important;\n"+"        cursor: pointer;\n"+"        margin: 0px;\n"+"        padding: 7px;\n"+"        height: 30px;\n"+"        border-bottom: 1px solid #9A9A9A !important;\n"+"        text-align: center;\n"+"\t\tdisplay: inline;\n"+"     }\n"+"\n"+"\t .pagination-button{\n"+"        margin-right: 2.5px;\n"+"        margin-left: 2.5px;\n"+"        display:inline;\n"+"     } \n"+"\n"+"     .page-label {\n"+"        font-weight: bold;\n"+"        font-size: 13px;\n"+"        padding-right: 3px;\n"+"     }   \n"+"\n"+"     .cart-toolbar {\n"+"        line-height: 60px;\n"+"        vertical-align: middle;\n"+"     }\n"+"\n"+"     .fab-cart {\n"+"        vertical-align: middle;\n"+"        margin-top: 10px;\n"+"        /* padding: 15px; */\n"+"        line-height: 25px;\n"+"        font-size: 16px; \n"+"        position: relative;\n"+"        float: right;\n"+"        display: block;\n"+"        height: 40px;\n"+"        width: 40px;\n"+"        color: #fff;\n"+"        fill: currentColor;\n"+"        cursor: pointer;\n"+"        text-decoration: none;\n"+"        border-radius: 50%;\n"+"        overflow: hidden;\n"+"        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"        background-color: #373B50;\n"+"        text-align: center;\n"+"        padding: 5px;\n"+"        display:none;\n"+"        margin-right: 20px;\n"+"      }\n"+"\n"+"      .fab-cart-disabled {\n"+"        background-color: #afb1b9 !important;        \n"+"        cursor: default !important;\n"+"        color: black !important;\n"+"      }\n"+"\n"+"      .cart-title {\n"+"        overflow: hidden;\n"+"        text-overflow: ellipsis;\n"+"        white-space: nowrap;\n"+'      }</style> <div id="container"> <header class="cart-header row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8 cart-title" ng-if="synchronizerCount==0"> Your ODATA synchronizer is empty </div> <div class="col-md-10 col-sd-8 col-xs-8 cart-title" ng-if="synchronizerCount>0"> Your ODATA synchronizer contains {{synchronizerCount}} synchronizers. </div> <div class="col-md-1 col-sd-3 col-xs-3"><gotomap-button></gotomap-button></div> </header> <div id="content"> <div ng-repeat="synchronizer in list "> <odata-synchronizer-item synchronizer="synchronizer"> </odata-synchronizer-item> </div> </div> <footer> <div> <button class="btn btn-default cart-button" ng-click="createOdataSynchronizer()">CREATE SYNCHRONIZER</button> </div> </footer> </div> </div> </div>');a.put("components/odata-synchronizer/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>#content {       \n"+"        max-height: calc(100% - 120px);\n"+"        overflow-y: auto !important;\n"+"        overflow-x: hidden;\n"+"        padding: 0px 3% !important;\n"+"        margin-top: 60px !important;\n"+"        position: absolute;\n"+"        width: 100%;\n"+"    }\n"+"\n"+"    #container {\n"+"        height: 100%;\n"+"        width: 100%;\n"+"        margin: 0;\n"+"        padding: 0;    \n"+"    }\n"+"    header {\n"+"        width: 100%;\n"+"        height: 60px;\n"+"        position: fixed;        \n"+"        background: white;\n"+"        text-align: center;\n"+"        font-size: 16px;\n"+"        font-weight: bold;\n"+"        padding-top: 20px;\n"+"    }\n"+"    \n"+"    @media screen and (min-width: 993px) and (max-width: 1200px) { \n"+"        \n"+"        header {\n"+"           font-size: 16px;\n"+"        }\n"+"      } \n"+"\n"+"      @media screen and (min-width: 769px) and(max-width: 992px) { \n"+"        \n"+"        header {\n"+"           font-size: 14px;\n"+"        }\n"+"      } \n"+"\n"+"      @media screen and (max-width: 768px) { \n"+"        \n"+"        header {\n"+"           font-size: 14px;\n"+"        }\n"+"      }  \n"+"\n"+"    footer {\n"+"        width: 100%;\n"+"        height: 60px;        \n"+"        position: fixed;\n"+"        bottom: 0;  \n"+"        line-height: 60px;      \n"+"        padding-left: 5px;\n"+"    }\n"+"\n"+"    footer .cart-button {\n"+"        border-radius: 0px;\n"+"        vertical-align: middle;\n"+"        margin-bottom: 20px;\n"+"        line-height: 20px;\n"+"        font-size: 14px;\n"+"        font-weight: bold;\n"+"        margin-right: 20px;\n"+"        position: relative;    \n"+"        padding: 10px;                \n"+"        text-decoration: none;\n"+"        text-align: center;\n"+"        background-color: rgb(55, 59, 80);\n"+"        color: white;\n"+"        cursor: pointer;\n"+"        float: right; \n"+"        margin-top: 10px;       \n"+"    }\n"+"\n"+"    footer .cart-button:hover {                \n"+"        background-color: rgb(55, 59, 80) !important;\n"+"        color: white !important;\n"+"        cursor: pointer !important;\n"+"    }\n"+"    \n"+"    footer .cart-button:disabled {\n"+"        background-color: #afb1b9 !important;        \n"+"        cursor: default !important;\n"+"        color: black !important;        \n"+"    }        \n"+"\n"+"    .disabled-button{\n"+"        opacity:0.4;\n"+"        cursor: default;\n"+"     }\n"+"\n"+"     .select-page-button{\n"+"        cursor: pointer;\n"+"     }\n"+"\n"+"     .page-selector-input{\n"+"        width: 40px !important;\n"+"        cursor: pointer;\n"+"        margin: 0px;\n"+"        padding: 7px;\n"+"        height: 30px;\n"+"        border-bottom: 1px solid #9A9A9A !important;\n"+"        text-align: center;\n"+"\t\tdisplay: inline;\n"+"     }\n"+"\n"+"\t .pagination-button{\n"+"        margin-right: 2.5px;\n"+"        margin-left: 2.5px;\n"+"        display:inline;\n"+"     } \n"+"\n"+"     .page-label {\n"+"        font-weight: bold;\n"+"        font-size: 13px;\n"+"        padding-right: 3px;\n"+"     }   \n"+"\n"+"     .cart-toolbar {\n"+"        line-height: 60px;\n"+"        vertical-align: middle;\n"+"     }\n"+"\n"+"     .fab-cart {\n"+"        vertical-align: middle;\n"+"        margin-top: 10px;\n"+"        /* padding: 15px; */\n"+"        line-height: 25px;\n"+"        font-size: 16px; \n"+"        position: relative;\n"+"        float: right;\n"+"        display: block;\n"+"        height: 40px;\n"+"        width: 40px;\n"+"        color: #fff;\n"+"        fill: currentColor;\n"+"        cursor: pointer;\n"+"        text-decoration: none;\n"+"        border-radius: 50%;\n"+"        overflow: hidden;\n"+"        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"        background-color: #373B50;\n"+"        text-align: center;\n"+"        padding: 5px;\n"+"        display:none;\n"+"        margin-right: 20px;\n"+"      }\n"+"\n"+"      .fab-cart-disabled {\n"+"        background-color: #afb1b9 !important;        \n"+"        cursor: default !important;\n"+"        color: black !important;\n"+"      }\n"+"\n"+"      .cart-title {\n"+"        overflow: hidden;\n"+"        text-overflow: ellipsis;\n"+"        white-space: nowrap;\n"+'      }</style> <div id="container"> <header class="cart-header row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8 cart-title" ng-if="synchronizerCount==0"> Your ODATA synchronizer is empty </div> <div class="col-md-10 col-sd-8 col-xs-8 cart-title" ng-if="synchronizerCount>0"> Your ODATA synchronizer contains {{synchronizerCount}} synchronizers. Display {{visualizedSynchronizersFrom}} to {{visualizedSynchronizersTo} of {{synchronizerCount}} synchronizers. </div> <div class="col-md-1 col-sd-3 col-xs-3"><gotomap-button></gotomap-button></div> </header> <div id="content"> <odata-synchronizer-list></odata-synchronizer-list> </div> </div> </div> </div>');a.put("components/product-attributes/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.panel-default >.panel-heading{\n"+"    border-bottom: 1px solid #DFDFE2;        \n"+"  }\n"+"\n"+"  .panel-title {\n"+"    cursor: pointer;\n"+"    text-transform: capitalize;\n"+"    font-weight: bold;\n"+"    color: #373B50;\n"+"  }\n"+"  .attr{ font-weight: bold; }\n"+"\n"+"  .panel-body {\n"+"    padding: 5px 15px;\n"+"  }\n"+"\n"+"  .panel-group .details{\n"+"    margin-bottom: 15px !important;    \n"+"  }        \n"+"\n"+"  .collapse.in {\n"+"    overflow-x: auto;\n"+"  }\n"+"\n"+"  .panel-heading .accordion-toggle {\n"+"    padding-left: 5px;\n"+"  }\n"+"\n"+"  .panel-heading .accordion-toggle:before {\n"+"    font-family: 'Glyphicons Halflings';\n"+"    content: '\\e113';\n"+"    float: left;\n"+"    color: grey;    \n"+"  }\n"+"\n"+"  .panel-heading .accordion-toggle.collapsed:before {    \n"+'    content: "\\e114";    \n'+"  }\n"+"\n"+"  .panel-attributes {\n"+"    font-size: 13px;\n"+"  }\n"+"\n"+"  .panel-attributes-title {\n"+"    font-size: 15px;\n"+'  }</style> <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true"> <div ng-repeat="section in model.indexes"> <div ng-if="section.name.length > 0 &&  section.name == \'summary\'"> <div class="panel panel-default details"> <div class="panel-heading" role="tab"> <h4 class="panel-title panel-attributes-title"> <a class="accordion-toggle" role="button" data-toggle="collapse" data-parent="#accordion" aria-expanded="true" data-target="#section_{{section.name}}" aria-controls="section_{{section.name}}"> {{section.name}} </a> </h4> </div> <div id="section_{{section.name}}" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="section_{{section.name}}"> <div ng-repeat="attrs in section.children | orderBy: \'name\'"> <div class="panel-body panel-attributes"> <span class="attr">{{attrs.name}}:</span> <span class="value">{{attrs.value }}</span> </div> </div> </div> </div> </div> </div> <div ng-repeat="section in model.indexes"> <div ng-if="section.name.length > 0 &&  section.name != \'summary\'"> <div class="panel panel-default details"> <div class="panel-heading" role="tab"> <h4 class="panel-title panel-attributes-title"> <a class="accordion-toggle collapsed" role="button" data-toggle="collapse" data-parent="#accordion" aria-expanded="false" data-target="#section_{{section.name}}" aria-controls="section_{{section.name}}"> {{section.name}} </a> </h4> </div> <div id="section_{{section.name}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="section_{{section.name}}"> <div ng-repeat="attrs in section.children | orderBy: \'name\'"> <div class="panel-body panel-attributes"> <span class="attr">{{attrs.name}}:</span> <span ng-if="(attrs.value.indexOf(\'<a\')==0)" class="value"><a target="_blank" href="{{attrs.value | checkHTML}}">{{attrs.value | checkHTML}}</a></span> <span ng-if="!(attrs.value.indexOf(\'<a\')==0)" class="value">{{attrs.value}}</span> </div> </div> </div> </div> </div> </div> </div> </div> </div>')
;a.put("components/product-details/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.fab-details {\n"+"                background-color: #373B50 !important;\n"+"                vertical-align: middle;\n"+"                margin-left: 20px;\n"+"                padding: 6px;\n"+"                line-height: 20px;\n"+"                font-size: 15px;\n"+"                position: relative;\n"+"                display: block;\n"+"                height: 40px;\n"+"                width: 40px;\n"+"                color: #fff;\n"+"                fill: currentColor;\n"+"                cursor: pointer;\n"+"                text-decoration: none;\n"+"                border-radius: 50%;\n"+"                overflow: hidden;\n"+"                transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"                transition-delay: 0.2s;\n"+"                box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"            }\n"+"\n"+"            @media screen and (max-width: 480px) {\n"+"                #productView .fab-details {\n"+"                    background-color: #373B50 !important;\n"+"                    vertical-align: middle;\n"+"                    margin-left: 20px;\n"+"                    padding: 6px;\n"+"                    line-height: 20px;\n"+"                    font-size: 15px;\n"+"                    position: relative;\n"+"                    display: block;\n"+"                    height: 32px !important;\n"+"                    width: 32px !important;\n"+"                    color: #fff;\n"+"                    fill: currentColor;\n"+"                    cursor: pointer;\n"+"                    text-decoration: none;\n"+"                    border-radius: 50%;\n"+"                    overflow: hidden;\n"+"                    transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"                    transition-delay: 0.2s;\n"+"                    box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"                }\n"+"            }\n"+"\n"+"            .fab-details.fab-right {\n"+"                float: right;\n"+"            }\n"+"\n"+"            .fab-details.fab-left {\n"+"                float: left;\n"+"            }\n"+"\n"+"            #productView .modal-dialog {\n"+"                width: 80%;\n"+"                max-height: 90%;\n"+"                margin: 0px auto;\n"+"                position: relative;\n"+"                margin-top: 2%;\n"+"                margin-bottom: 2% position: fixed;\n"+"                height: 100%;\n"+"                padding: 0;\n"+"                background: white;\n"+"                padding-bottom: 65px;\n"+"                overflow-y: auto;\n"+"                overflow-x: auto;\n"+"            }\n"+"\n"+"            #productView .btn {\n"+"                background: #373B50;\n"+"                color: #FFF;\n"+"            }\n"+"\n"+"            @media screen and (min-width: 500px) {\n"+"                #productView .product-details-modal-dialog {\n"+"                    width: 80% !important;\n"+"                    max-width: 80% !important;\n"+"                }\n"+"            }\n"+"\n"+"            #productView .modal-header {\n"+"                background: #373B50;\n"+"                color: #FFF;\n"+"            }\n"+"\n"+"            #productView .sectiontitle {\n"+"                background-color: rgb(55, 59, 80);\n"+"                color: #fff;\n"+"                text-align: left;\n"+"                padding: 10px;\n"+"                margin-bottom: 15px;\n"+"            }\n"+"\n"+"            #productView .prodlink {\n"+"                font-size: 12px;\n"+"                color: #fff;\n"+"                background-color: rgb(55, 59, 80);\n"+"            }\n"+"\n"+"            #productView .modal-container {\n"+"                padding: 20px;\n"+"            }\n"+"\n"+"            .product-details-modal {\n"+"                position: fixed;\n"+"                top: 0;\n"+"                right: 0;\n"+"                bottom: 0;\n"+"                left: 0;\n"+"                overflow: hidden;\n"+"            }\n"+"\n"+"            .product-details-modal-content {\n"+"                position: absolute;\n"+"                top: 0;\n"+"                right: 0;\n"+"                bottom: 0;\n"+"                left: 0;\n"+"                border-radius: 0;\n"+"                box-shadow: none;\n"+"            }\n"+"\n"+"            .product-details-modal-header {\n"+"                position: absolute;\n"+"                top: 0;\n"+"                right: 0;\n"+"                left: 0;\n"+"                height: 50px;\n"+"                padding: 10px;\n"+"                background: #6598d9;\n"+"                border: 0;\n"+"            }\n"+"\n"+"            .product-details-modal-body {\n"+"                position: absolute;\n"+"                top: 51px;\n"+"                bottom: 75px;\n"+"                width: 100%;\n"+"                overflow-y: auto;\n"+"                overflow-x: auto;\n"+"                padding: 0px !important;\n"+"            }\n"+"\n"+"            .product-details-modal-footer {\n"+"                position: absolute;\n"+"                right: 0;\n"+"                bottom: 0;\n"+"                left: 0;\n"+"                background: #f1f3f5;\n"+"                padding: 10px;\n"+"                height: 65px;\n"+"            }\n"+"\n"+"            .modal-footer .left {\n"+"                text-align: left;\n"+"            }\n"+"\n"+"            .modal-footer .right {\n"+"                text-align: right;\n"+"            }\n"+"\n"+"            /*.right-button{\n"+"        position: absolute;\n"+"        top: 50%;\n"+"        right: 10px;\n"+"        z-index: 10;\n"+"        margin-top: -30px;\n"+"      }\n"+"\n"+"      .left-button{\n"+"        position: absolute;\n"+"        top: 50%;\n"+"        left: 10px;\n"+"        z-index: 10;\n"+"        margin-top: -30px;\n"+"      }*/\n"+"\n"+"            .product-details-modal-row {\n"+"                margin: 0px;\n"+"            }\n"+"\n"+"            #productView .product-link {\n"+"                padding: 3px;\n"+"                text-align: center;\n"+"            }\n"+"\n"+"            #downloadbutton a {\n"+"                color: white;\n"+"            }\n"+"\n"+"            .tci-button {\n"+"                background-color: #0f9d58;\n"+"                color: #fff;\n"+"                font-family: 'Open Sans', Helvetica, sans-serif;\n"+"                font-size: 16px !important;\n"+"            }\n"+"\n"+"            .tci-button.raised {\n"+"                text-align: center;\n"+"                line-height: 15px;\n"+"                height: 15px;\n"+"                width: 30px;\n"+"                border-radius: 5px;\n"+"                margin-top: 0px;\n"+"                margin-left: 0px;\n"+"                margin-bottom: 3px;\n"+"                font-family: 'Open Sans', Helvetica, sans-serif;\n"+"                padding: 1px 5px 1px 5px;\n"+"            }\n"+"\n"+"            .tci-fab-button {\n"+"                color: white !important;\n"+"                font-size: 16px;\n"+"                font-weight: bold;\n"+"                line-height: 28px;\n"+"                padding-right: 5px !important;\n"+"                cursor: pointer;\n"+"            }\n"+"\n"+"            .fab-tci {\n"+"                background-color: #0f9d58 !important;\n"+"                cursor: pointer;\n"+"            }\n"+"\n"+"            .download-button-link {\n"+"                color: #337ab7;\n"+"                text-decoration: none;\n"+"            }\n"+"\n"+"            .download-button-link:hover {\n"+"                text-decoration: underline;\n"+"            }\n"+"\n"+"            #productView .offline {\n"+"                color: #fff;\n"+"                background-color: #505050;\n"+"                font-family: 'Open Sans', Helvetica, sans-serif;\n"+"                font-size: 12px;\n"+"                padding: 1px 5px 1px 5px;\n"+"                padding-left: 0px !important;\n"+"                float: left;\n"+"            }\n"+"\n"+"            #productView .button {\n"+"                background-color: #505050;\n"+"                color: #fff;\n"+"                font-family: 'Open Sans', Helvetica, sans-serif;\n"+"                font-size: 12px;\n"+"            }\n"+"\n"+"            #productView .button.raised {\n"+"                text-align: center;\n"+"                line-height: 15px;\n"+"                height: 15px;\n"+"                display: inline;\n"+"                margin-top: 2px;\n"+"                margin-left: 15px;\n"+"                margin-right: 2px;\n"+"                margin-bottom: 3px;\n"+"                font-family: 'Open Sans', Helvetica, sans-serif;\n"+"                font-size: 14px;\n"+"                padding: 1px 5px 1px 5px;\n"+"                font-weight: bold;\n"+"            }\n"+"\n"+"            .lta-info {\n"+"                text-align: center;\n"+"            }\n"+"\n"+"            .lta-info-title {\n"+"                font-weight: bold;\n"+'            }</style> <div class="modal fade product-details-modal" id="productView" tabindex="-1" role="dialog" aria-labelledby="productTitle" aria-hidden="true"> <div class="modal-dialog product-details-modal-dialog"> <div class="modal-header product-details-modal-header">{{product.title}}</div> <div class="modal-body product-details-modal-body container-fluid"> <div class="row product-details-modal-row" style="margin-bottom: 15px"> <div class="col-md-12 product-link download-button-link"> <span ng-click="downloadProduct()">{{product.link}}</span> <span ng-if="product.offline" class="button raised offline">Offline</span> </div> <div ng-if="product.isOrderDetails" class="lta-info"> <span ng-if="order_properties[\'id\']" class="lta-info-title">Order Id: </span> <span ng-if="order_properties[\'id\']">{{product.order.id}}</span> <span ng-if="order_properties[\'status\']" class="lta-info-title">Status: </span><span ng-class="order_style[product.order.status]" ng-if="order_properties[\'status\']">{{product.order.status}}</span> <span ng-if="order_properties[\'statusMessage\']" class="lta-info-title">Status Message: </span><span ng-if="order_properties[\'statusMessage\']">{{product.order.statusMessage}}</span> <span ng-if="order_properties[\'submissionTime\']" class="lta-info-title">Submission Time: </span><span ng-if="order_properties[\'submissionTime\']">{{product.order.submissionTime}}</span> <span ng-if="order_properties[\'estimatedTime\']" class="lta-info-title">Estimated Time: </span><span ng-if="order_properties[\'estimatedTime\']">{{product.order.estimatedTime}}</span> </div> <div ng-show="product.tci_link" class="col-md-12 product-link" ng-click="downloadTCI()"> <span class="tci-button raised" style="{{product.label_style}}" ng-click="downloadTCI()">Download TCI</span> </div> </div> <div class="row product-details-modal-row"> <div class="col-md-6"> <div class="row-fluid" ng-hide="hideminimap"> <div class="col-md-12 sectiontitle"> <div class="col-md-1 glyphicon glyphicon-chevron-up" ng-show="windows.map" ng-click="windows.map = !windows.map" title="Minimize"></div> <div class="col-md-1 glyphicon glyphicon-chevron-down" ng-show="!windows.map" ng-click="maximizeMap()" title="Maximize"></div> <div class="col-md-11">Footprint</div> </div> <product-map ng-show="windows.map" product-uuid="{{product.id}}"></product-map> </div> <div class="row-fluid"> <div class="col-md-12 sectiontitle"> <div class="col-md-1 glyphicon glyphicon-chevron-up" ng-show="windows.attributes" ng-click="windows.attributes = !windows.attributes" title="Minimize"></div> <div class="col-md-1 glyphicon glyphicon-chevron-down" ng-show="!windows.attributes" ng-click="windows.attributes = !windows.attributes" title="Maximize"></div> <div class="col-md-11"> Attributes </div> </div> <div class="col-md-12"> <product-attributes ng-show="windows.attributes" product-uuid="{{product.id}}"> </product-attributes> </div> </div> </div> <div class="col-md-6"> <div class="row-fluid" ng-show="showquicklook"> <div class="col-md-12 sectiontitle"> <div class="col-md-1 glyphicon glyphicon-chevron-up" ng-show="windows.quicklook" ng-click="windows.quicklook = !windows.quicklook" title="Minimize"></div> <div class="col-md-1 glyphicon glyphicon-chevron-down" ng-show="!windows.quicklook" ng-click="windows.quicklook = !windows.quicklook" title="Maximize"></div> <div class="col-md-11"> Quicklook </div> </div> <product-quicklook ng-show="windows.quicklook" product-uuid="{{product.id}}" has-quicklook="{{product.hasQuicklook}}" uuid="product.id" quicklook="product.hasQuicklook"></product-quicklook> </div> <div class="row-fluid"> <div class="col-md-12 sectiontitle"> <div class="col-md-1 glyphicon glyphicon-chevron-up" ng-show="windows.inspector" ng-click="windows.inspector = !windows.inspector" title="Minimize"></div> <div class="col-md-1 glyphicon glyphicon-chevron-down" ng-show="!windows.inspector" ng-click="windows.inspector = !windows.inspector" title="Maximize"></div> <div class="col-md-11"> Inspector </div> </div> <div class="col-md-12"> <product-metadata ng-show="windows.inspector" product-uuid="{{product.id}}"> </product-metadata> </div> </div> </div> </div> </div> <div class="modal-footer product-details-modal-footer"> <div class="left col-md-6"> <div ng-model="prevbutton" ng-disabled="prevbutton.disabled" class="left-button fab-details fab-left" title="Previous Product" ng-click="showPrevProduct()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="arrow-back"> <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"> </g> </svg> </div> <div ng-model="nextbutton" ng-disabled="nextbutton.disabled" class="right-button fab-details fab-left" title="Next Product" ng-click="showNextProduct()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="arrow-forward"> <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"> </g> </svg> </div> </div> <div class="right col-md-6"> <div id="downloadbutton" class="fab-details fab-right" prodlink="{{product.link}}" title="Download Product" ng-click="downloadProduct()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="file-download"> <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"> </g> </svg> </div> <div class="fab-details fab-right" title="Close" ng-click="close()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="close"> <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"> </g> </svg> </div> </div> </div> </div> </div> </div> </div>');a.put("components/product-map/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div> <script>(function(){if(!window.CESIUM_BASE_URL) window.CESIUM_BASE_URL = "libs/Cesium/Cesium.js";})()<\/script> <style>#map-container {\n'+"\n"+"        padding: 0;\n"+"        margin: auto;  \n"+"        width: 100%;\n"+"        /*height: 70%;*/        \n"+"        position:relative;\n"+"        display: block;\n"+"\n"+"    }\n"+"\n"+"    #productmap {\n"+"\n"+"        padding: 0;\n"+"        margin: auto;  \n"+"        width: 100%;\n"+"        /*height: 70%;      */\n"+"        position:relative;\n"+"        display: block;\n"+"\n"+"    }\n"+"\n"+"    #productmap .ol-zoom {\n"+"      position: relative;\n"+"      bottom: 140px;\n"+"      top: inherit;\n"+"      float: right;\n"+"      left: -10px;\n"+"      display: none;\n"+"    }\n"+"\n"+"    #productmap .ol-viewport{\n"+"      overflow: visible !important;\n"+"    }\n"+"\n"+"    #productmap .ol-attribution button, #productmap .ol-attribution ul {\n"+"        display: none;\n"+'    }</style> <div class="col-md-12"> <div id="map-container"> <div id="productmap"></div> </div> </div> </div> </div>');a.put("components/product-metadata/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>/** Easy Tree style */\n"+".easy-tree {\n"+"    min-height: 20px;\n"+"    margin-bottom: 20px;\n"+"    background-color: #fff;\n"+"    color: #373b50;\n"+"    border: none;\n"+"    border-top: none;\n"+"    padding-bottom: 15px;\n"+"    font-size: 12px;    \n"+"    font-family: 'Oxygen', sans-serif;  \n"+"}\n"+"\n"+".easy-tree > ul {\n"+"    padding-left: 15px;\n"+"}\n"+"\n"+".easy-tree li {\n"+"    list-style-type: none;\n"+"    margin: 0;\n"+"    padding: 10px 5px 0 5px;\n"+"    position: relative\n"+"}\n"+"\n"+".easy-tree li::before, .easy-tree li::after {\n"+"    content: '';\n"+"    left: -30px;\n"+"    position: absolute;\n"+"    right: auto\n"+"}\n"+"\n"+".easy-tree li::before {\n"+"    border-left: 1px solid #eaeaea;\n"+"    bottom: 50px;\n"+"    height: 100%;\n"+"    top: 0;\n"+"    width: 1px\n"+"}\n"+"\n"+".easy-tree li::after {\n"+"    border-top: 1px solid #eaeaea;\n"+"    height: 20px;\n"+"    top: 25px;\n"+"    width: 35px\n"+"}\n"+"\n"+".easy-tree li > span {\n"+"    \n"+"    display: inline-block;\n"+"    padding: 5px;\n"+"    text-decoration: none\n"+"}\n"+"\n"+".easy-tree li.parent_li > span {\n"+"    cursor: pointer\n"+"}\n"+"\n"+"\n"+".easy-tree > ul > li::before, .easy-tree > ul > li::after {\n"+"    border: 0\n"+"}\n"+"\n"+".easy-tree li:last-child::before {\n"+"    height: 30px\n"+"}\n"+"\n"+"\n"+"\n"+".easy-tree li > span:hover{\n"+"    background: #eaeaea; \n"+"}\n"+".easy-tree li.parent_li > span:hover + ul li.li_selected span {\n"+"    background: #eaeaea;\n"+"   \n"+"}\n"+"\n"+".easy-tree li > span > a {\n"+"    color: #373b50;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+".easy-tree li:hover > span:hover > a:hover {\n"+"   \n"+"    background: #eaeaea;\n"+"    text-decoration: none;\n"+"}\n"+"\n"+".easy-tree li > span > span.glyphicon-folder-close, .easy-tree li > span > span.glyphicon-folder-open {\n"+"    margin-right: 5px;\n"+"}\n"+"\n"+".easy-tree li.li_selected > span, .easy-tree li.li_selected > span > a {\n"+"    background: #eaeaea;\n"+"   \n"+"}\n"+"\n"+".easy-tree li.li_selected > span:hover, .easy-tree li.li_selected > span:hover > a {\n"+"    background: #eaeaea;\n"+"   \n"+"}\n"+"\n"+".easy-tree .easy-tree-toolbar {\n"+"    background-color: #fff;\n"+"}\n"+"\n"+".easy-tree .easy-tree-toolbar > div {\n"+"    display: inline-block;\n"+"}\n"+"\n"+".easy-tree .easy-tree-toolbar > div > button {\n"+"    border-radius: 0;\n"+"    margin: 20px 5px;\n"+"}\n"+"\n"+".easy-tree .easy-tree-toolbar .create .input-group {\n"+"    top: -15px;\n"+"    margin-left: 5px;\n"+"    margin-right: 5px;\n"+"}\n"+"\n"+".easy-tree .easy-tree-toolbar .create .input-group input {\n"+"    border-radius: 0;\n"+"}\n"+"\n"+".easy-tree .easy-tree-toolbar .create .input-group button {\n"+"    border-radius: 0;\n"+"}\n"+"\n"+".download-prod-node {\n"+"  padding: 5px; \n"+"}\n"+"\n"+"\n"+"#jquery-script-menu {\n"+"position: fixed;\n"+"height: 90px;\n"+"width: 100%;\n"+"top: 0;\n"+"left: 0;\n"+"\n"+"background: #fff;\n"+"z-index: 999999;\n"+"padding: 10px 0;\n"+"-webkit-box-sizing:content-box;\n"+"-moz-box-sizing:content-box;\n"+"box-sizing:content-box;\n"+"}\n"+"\n"+".jquery-script-center {\n"+"width: 960px;\n"+"margin: 0 auto;\n"+"}\n"+".jquery-script-center ul {\n"+"width: 212px;\n"+"float:left;\n"+"line-height:45px;\n"+"margin:0;\n"+"padding:0;\n"+"list-style:none;\n"+"}\n"+".jquery-script-center a {\n"+"    text-decoration:none;\n"+"}\n"+".jquery-script-ads {\n"+"width: 728px;\n"+"height:90px;\n"+"float:right;\n"+"}\n"+".jquery-script-clear {\n"+"clear:both;\n"+"height:0;\n"+'}</style> <div id="easytree" class="easy-tree"></div> </div> </div>');a.put("components/product-quicklook/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>#carousel-container  {\n"+"    text-align: center;    \n"+"    padding: 0;\n"+"    margin: auto;\n"+"    width: 100%;\n"+"    /* height: 70%; */\n"+"    position: relative;\n"+"    display: block;\n"+"  }\n"+"  \n"+"\n"+"  #carousel-container img {\n"+"    max-width: 100% !important;   \n"+"    max-height: 100% !important; \n"+"    padding-bottom: 10px;       \n"+"  }\n"+"\n"+"  #noquicklook-container  {\n"+"    text-align: center;    \n"+"    padding: 0;\n"+"    margin: auto;\n"+"    width: 100%;\n"+"    /* height: 70%; */\n"+"    position: relative;\n"+"    display: block;\n"+"  }\n"+"  \n"+"\n"+"  #noquicklook-container img {\n"+"    max-width: 100% !important;   \n"+"    max-height: 100% !important; \n"+"    padding-bottom: 10px;       \n"+"  }\n"+"\n"+"  .carousel {text-align: center;}\n"+"\n"+"  .undraggable {\n"+"    -moz-user-select: none;\n"+"    -webkit-user-drag: none;\n"+"  }\n"+"\n"+"  .unselectable {\n"+"    -webkit-touch-callout: none;\n"+"    -webkit-user-select: none;\n"+"    -khtml-user-select: none;\n"+"    -moz-user-select: none;\n"+"    -ms-user-select: none;\n"+"    user-select: none;\n"+'  }</style> <div class="col-md-12 undraggable unselectable"> <div ng-show="product.quicklook" id="carousel-container" data-ride="carousel" class="unselectable undraggable"> <a href="{{url}}" target="_blank"> <img draggable="false" ng-src="{{url}}" alt="quicklook" fallback-src="{{noquicklook}}"> </a> </div> <div ng-show="!product.quicklook" id="noquicklook-container" data-ride="carousel"> <img draggable="false" ng-src="{{noquicklook}}"> </div> </div> </div> </div>');a.put("components/request-done/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div> <style></style> <div ng-show="doneRequest.length > 0" class="request-done"> <b>{{title}}</b> {{doneRequest}} </div> </div> </div>');a.put("components/saved-searches/search-item/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.search-item{\n"+"        \t/*height: 100px;*/\n"+"        \twidth: 100%;\n"+"        \tposition: relative;\n"+"      \t\tbackground-color: inherit;\n"+"        \tborder-top: 1px solid #bdc3c7; \n"+"   \t\t\tcolor: #34495e;      \t\t\t\t\n"+"   \t\t\tpadding-top: 10px;\n"+"   \t\t\tcursor: default;\n"+"        }\n"+"        \n"+"        \t\n"+"\t\t#search-item .list-item-title{\n"+"\t\t\tfont-size: 13px;\n"+"\t\t    font-weight: bold;\n"+"\t\t    line-height: 20px;\n"+"\t\t    \n"+"\t\t}\t\t\n"+"\n"+"\t\t.search-item-buttons{\n"+"\t\t\tfloat: right;\t\t\t\n"+"\t\t}\n"+"\n"+"\t\t.item-button{\n"+"\t\t\tmargin-left: 15px;\n"+"\t\t\tcursor: pointer;\n"+"\t\t}\n"+"\n"+"\t\t.item-button-disabled{\n"+"\t\t\tmargin-left: 15px;\n"+"\t\t\tcursor: pointer;\n"+"\t\t\tcolor: silver !important;\t\t\t\n"+"\t\t}\n"+'        /* **** */</style> <div id="search-item" class="search-item" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> \x3c!-- title --\x3e <div class="row"> <span class="list-item-title" title="{{product.complete}}">{{product.complete}} </span> </div> </div> </div> <div class="row" style="height: 24px"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="row search-item-buttons" ng-show="visibleItemButton"> <div class="glyphicon glyphicon-search item-button" ng-click="executeSavedSearch()" title="Execute Saved Search"></div> <div class="glyphicon glyphicon-envelope item-button" ng-show="product.notify" ng-click="updateNotificationStatus()" title="Deactivate Notification"></div> <div class="glyphicon glyphicon-envelope item-button-disabled" ng-show="!product.notify" ng-click="updateNotificationStatus()" title="Activate Notification"></div> <div class="glyphicon glyphicon-trash item-button" ng-click="removeSavedSearch()" title="Delete Search"> </div> </div> \x3c!-- content --\x3e </div> </div> \x3c!-- buttons --\x3e </div> </div> </div>');a.put("components/saved-searches/searches-list/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div> <style></style> <div ng-repeat="product in model "> <search-item product="product" id="product.id"> </search-item> </div> </div> </div>')
;a.put("components/saved-searches/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>#saved-search-content {       \n"+"        max-height: calc(100% - 120px);\n"+"        overflow-y: auto !important;\n"+"        overflow-x: hidden;\n"+"        padding: 0px 3% !important;\n"+"        margin-top: 60px !important;\n"+"        position: absolute;\n"+"        width: 100%;\n"+"    }\n"+"\n"+"    #saved-search-container {\n"+"        height: 100%;\n"+"        width: 100%;\n"+"        margin: 0;\n"+"        padding: 0;    \n"+"    }\n"+"    header {\n"+"        width: 100%;\n"+"        height: 60px;\n"+"        position: fixed;        \n"+"        background: white;\n"+"        text-align: center;\n"+"        font-size: 16px;\n"+"        font-weight: bold;\n"+"        padding-top: 20px;\n"+"    }\n"+"\n"+"    footer {\n"+"        width: 100%;\n"+"        height: 60px;        \n"+"        position: fixed;\n"+"        bottom: 0;  \n"+"        line-height: 60px;      \n"+"        padding-left: 5px;\n"+"    }\n"+"\n"+"    footer .saved-search-button {\n"+"        border-radius: 0px;\n"+"        vertical-align: middle;\n"+"        margin-bottom: 20px;\n"+"        line-height: 20px;\n"+"        font-size: 14px;\n"+"        font-weight: bold;\n"+"        margin-right: 20px;\n"+"        position: relative;    \n"+"        padding: 10px;                \n"+"        text-decoration: none;\n"+"        text-align: center;\n"+"        background-color: rgb(55, 59, 80);\n"+"        color: white;\n"+"        cursor: pointer;\n"+"        float: right; \n"+"        margin-top: 10px;       \n"+"    }\n"+"\n"+"    footer .saved-search-button:hover {                \n"+"        background-color: rgb(55, 59, 80) !important;\n"+"        color: white !important;\n"+"        cursor: pointer !important;\n"+"    }\n"+"    \n"+"    footer .saved-search-button:disabled {\n"+"        background-color: #afb1b9 !important;        \n"+"        cursor: default !important;\n"+"        color: black !important;        \n"+"    }        \n"+"\n"+"    .disabled-button{\n"+"        opacity:0.4;\n"+"        cursor: default;\n"+"     }\n"+"\n"+"     .select-page-button{\n"+"        cursor: pointer;\n"+"     }\n"+"\n"+"     .page-selector-input{\n"+"        width: 40px !important;\n"+"        cursor: pointer;\n"+"        margin: 0px;\n"+"        padding: 7px;\n"+"        height: 30px;\n"+"        border-bottom: 1px solid #9A9A9A !important;\n"+"        text-align: center;\n"+"\t\tdisplay: inline;\n"+"     }\n"+"\n"+"\t .pagination-button{\n"+"        margin-right: 2.5px;\n"+"        margin-left: 2.5px;\n"+"        display:inline;\n"+"     } \n"+"\n"+"     .page-label {\n"+"        font-weight: bold;\n"+"        font-size: 13px;\n"+"        padding-right: 3px;\n"+"     }   \n"+"\n"+"     .saved-search-toolbar {\n"+"        line-height: 60px;\n"+"        vertical-align: middle;\n"+"     }\n"+"\n"+"     .fab-saved-search {\n"+"        vertical-align: middle;\n"+"        margin-top: 10px;\n"+"        /* padding: 15px; */\n"+"        line-height: 25px;\n"+"        font-size: 16px; \n"+"        position: relative;\n"+"        float: right;\n"+"        display: block;\n"+"        height: 40px;\n"+"        width: 40px;\n"+"        color: #fff;\n"+"        fill: currentColor;\n"+"        cursor: pointer;\n"+"        text-decoration: none;\n"+"        border-radius: 50%;\n"+"        overflow: hidden;\n"+"        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"        background-color: #373B50;\n"+"        text-align: center;\n"+"        padding: 5px;\n"+"        display:none;\n"+"        margin-right: 20px;\n"+"      }\n"+"\n"+"      .fab-saved-search-disabled {\n"+"        background-color: #afb1b9 !important;        \n"+"        cursor: default !important;\n"+"        color: black !important;\n"+'      }</style> <div id="saved-search-container"> <header class="saved-search-header row"> <div class="col-md-1"></div> <div class="col-md-10 col-sd-8 col-xs-8" ng-if="productCount==0"> No saved searches. </div> <div class="col-md-10 col-sd-8 col-xs-8" ng-if="productCount>0"> Display {{visualizedProductsFrom}} to {{visualizedProductsTo}} of {{productCount}} saved searches. </div> <div class="col-md-1 col-sd-3 col-xs-3"><gotomap-button></gotomap-button></div> </header> <div id="saved-search-content" ng-if="productCount>0"> <searches-list></searches-list> </div> <footer> <div> <span class="page-label"> <span id="saved-search-label-id"> Results per page: </span> <select ng-model="productsPerPage" id="saved-search-pagination"> \x3c!--<option value="1">1</option>\n'+'                             <option value="2">2</option>\n'+'                             <option value="3">3</option>\n'+'                             <option value="5">5</option>--\x3e <option value="25">25</option> <option value="50">50</option> <option value="75">75</option> <option value="100">100</option> <option value="125">125</option> <option value="150">150</option> </select> </span> <span ng-class="{\'disabled-button\': currentPage == 1}" class="select-page-button" ng-click="gotoFirstPage()"> &lt;&lt; </span> <span ng-class="{\'disabled-button\': currentPage == 1}" class="select-page-button" ng-click="gotoPreviousPage()"> &lt; </span> <span> <span id="saved-search-num-id" class="page-label" ng-hide="productCount==0">Page#: </span> <input id="saved-search-page-selector" ng-click="selectPageDidClicked(this)" type="text" class="form-control page-selector-input" ng-model="currentPage" ng-hide="productCount==0"> <span id="saved-search-count-id" class="page-label large-device" ng-hide="productCount==0">of {{pageCount}}</span> </span> <span ng-class="{\'disabled-button\': (currentPage == pageCount || pageCount == 1 || pageCount == 0 ) }" class="select-page-button" ng-click="gotoNextPage()"> &gt; </span> <span ng-class="{\'disabled-button\': ( currentPage == pageCount || pageCount == 1 || pageCount == 0 )}" class="select-page-button" ng-click="gotoLastPage()"> &gt;&gt; </span> <button class="btn btn-default saved-search-button" ng-click="clearSavedSearches()" ng-disabled="productCount == 0">CLEAR SAVED SEARCHES</button> <div class="fab-saved-search pan glyphicon glyphicon-erase dhus-button" ng-click="clearSavedSearches()" title="Clear Saved Searches" ng-class="{\'fab-saved-search-disabled\': ( productCount == 0)}"> </div> </div> </footer> </div> </div> </div>');a.put("components/search-box/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>.search-box-container {\n"+"                height: 100%;\n"+"                width: 100%;\n"+"                background-color: white;\n"+"            }\n"+"\n"+"            .search-input {\n"+"                color: #000;\n"+"                background-color: #FFFFFF;\n"+"                padding: 5px;\n"+"                position: relative;\n"+"                float: left !important;\n"+"                width: 90%;\n"+"            }\n"+"\n"+"            #search-input {\n"+"                color: #000;\n"+"                background-color: white;\n"+"                padding: 5px;\n"+"                float: left;\n"+"                width: 90%;\n"+"                border: none;\n"+"                height: 30px;\n"+"            }\n"+"\n"+"            #search-box-container {\n"+"                position: fixed;\n"+"                top: 70px;\n"+"                left: 20px;\n"+"                z-index: 10;\n"+"                /*  transition: width .4s;*/\n"+"                box-shadow: 3px 5px 19px 0 rgba(49, 50, 50, .62);\n"+"                background-color: #fff;\n"+"                height: 32px;\n"+"            }\n"+"\n"+"            .search-input {\n"+"                color: #000;\n"+"                background-color: #FFFFFF;\n"+"                padding: 5px;\n"+"                position: relative;\n"+"                float: left !important;\n"+"            }\n"+"\n"+"            #search-input {\n"+"                color: #000;\n"+"                background-color: white;\n"+"                padding: 5px;\n"+"                float: left;\n"+"                width: inherit;\n"+"                border: none;\n"+"                /* left: 30px; */\n"+"                position: relative;\n"+"\n"+"            }\n"+"\n"+"            #search-box-container {\n"+"                /*-webkit-transition: width 0.4s;\n"+"            transition: width 0.4s;*/\n"+"                -webkit-box-shadow: 3px 5px 19px 0px rgba(49, 50, 50, 0.6false2);\n"+"                -moz-box-shadow: 3px 5px 19px 0px rgba(49, 50, 50, 0.62);\n"+"                box-shadow: 3px 5px 19px 0px rgba(49, 50, 50, 0.62);\n"+"                background-color: white;\n"+"            }\n"+"\n"+"            .search-button {\n"+"                padding: 5px;\n"+"                float: left;\n"+"                position: relative;\n"+"                background-color: #797F9E;\n"+"                background-image: linear-gradient(#373B50, #373B50);\n"+"                width: 40px;\n"+"                height: 32px;\n"+"                display: block;\n"+"                color: #fff;\n"+"                float: right;\n"+"                fill: currentColor;\n"+"                position: relative;\n"+"                cursor: pointer;\n"+"                z-index: 5;\n"+"                background-color: #797F9E;\n"+"                background-image: -webkit-linear-gradient(#4d90fe, #4787ed);\n"+"                background-image: linear-gradient(#373B50, #373B50);\n"+"            }\n"+"\n"+"            .grayfy{\n"+"              background-image: linear-gradient(darkgrey, darkgrey) !important;\n"+"              cursor: default;\n"+"            }\n"+"\n"+"            .deselected-search-button {\n"+"                background-image: none;\n"+"                background-color: #717171 !important;\n"+"            }\n"+"\n"+"            .save-button {\n"+"                padding: 5px;\n"+"                float: left;\n"+"                position: relative;\n"+"                background-color: #fff;\n"+"                background-image: linear-gradient(#fff, #fff);\n"+"                width: 40px;\n"+"                height: 32px;\n"+"                display: block;\n"+"                color: #333;\n"+"                float: right;\n"+"                fill: currentColor;\n"+"                position: relative;\n"+"                cursor: pointer;\n"+"                z-index: 5;\n"+"                background-image: -webkit-linear-gradient(#fff, #fff);\n"+"                background-image: linear-gradient(#fff, #fff);\n"+"            }\n"+"\n"+"            .clear-button {\n"+"                padding: 8px;\n"+"                position: relative;\n"+"                background-color: #fff;\n"+"                width: 20px;\n"+"                height: 30px;\n"+"                display: block;\n"+"                color: #777;\n"+"                float: right;\n"+"                cursor: pointer;\n"+"                z-index: 5;\n"+"                display: none;\n"+"            }\n"+"\n"+"            .advance-search-button-active {\n"+"                color: green;\n"+"            }\n"+"\n"+"            .cart-button-active{\n"+"                color: green;\n"+"            }\n"+"\n"+"            .top-bar-button {\n"+"                float: left;\n"+"                width: 30px;\n"+"                height: 32px;\n"+"                font-size: 15px;\n"+"                padding: 6px 0px 6px 8px;\n"+"            }\n"+"\n"+"            .ui-widget {\n"+"                z-index: 11000000;\n"+"                background-color: white;\n"+"                opacity: 0.9;\n"+"            }\n"+"\n"+"            .search-box-ui-widget {\n"+"                width: calc(100% - 100px);\n"+"            }\n"+"\n"+"            .ui-menu-item {\n"+"                display: table;\n"+"                text-decoration: none;\n"+"            }\n"+"\n"+"            @media screen and (min-width: 994px) {\n"+"                #ui-id-1 {\n"+"                    max-width: calc(40% - 111px);\n"+"                }\n"+"            }\n"+"\n"+"            @media screen and (min-width: 993px) and (max-width: 1200px) {\n"+"                #ui-id-1 {\n"+"                    max-width: calc(50% - 111px);\n"+"                }\n"+"            }\n"+"\n"+"            @media screen and (min-width: 769px) and(max-width: 992px) {\n"+"                #ui-id-1 {\n"+"                    max-width: calc(100% - 71px);\n"+"                }\n"+"            }\n"+"\n"+"            @media screen and (max-width: 768px) {\n"+"                #ui-id-1 {\n"+"                    max-width: calc(100% - 71px);\n"+"                }\n"+'            }</style> <div class="search-box-container"> <div class="row"> <div class="top-bar-button" ng-click="toggleAdvancedMenu()"> <div id="advanced-search-icon" ng-class="{\'advance-search-button-active\': (advancedSearchButtonActive)}" class="glyphicon glyphicon-menu-hamburger"></div> </div> <div class="top-bar-button" ng-click="toggleMenuCart()" ng-if="showcart"> <div id="menu-cart-icon" class="glyphicon glyphicon-shopping-cart"></div> </div> <div class="ui-widget search-box-ui-widget"> <input ng-model="model.textQuery" ng-keyup="getSuggestions($event)" type="text" class="form-control" ng-focus="showClear()" ng-blur="hideClear()" id="search-input" placeholder="Insert search criteria..."> </div> <div class="search-button" ng-class="{\'grayfy\': (cartStatus)}" ng-click="search()" id="search-button"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g> <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path> </g> </svg> </div> <div class="save-button" ng-click="saveSearch()" id="save-search-button" title="Save Search"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="save"> <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"> </g> </svg> </div> <div class="clear-button glyphicon glyphicon-remove" id="clear-filter-button" ng-click="clearFilter()" title="Clear Search Filter"></div> </div> </div> </div> </div>');a.put("components/signup-button/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.signup-button {\n"+"            background-color: rgb(173, 173, 173) !important;     \n"+"            vertical-align: middle;\n"+"            margin-top: 8px;\n"+"            line-height: 20px;\n"+"            font-size: 15px;\n"+"            margin-left: 20px;\n"+"            position: relative;\n"+"            float: right;\n"+"            padding: 7px;\n"+"            cursor: pointer;\n"+'        }</style> <div ng-show="showsignup" ng-model="showsignup"> <div class="signup-button" ng-click="signup()">SIGN UP</div> </div> </div> </div>');a.put("components/spinner-manager/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>/*#spinner-container{\n"+"        \n"+"\n"+"        display: -webkit-box;\n"+"        display: -moz-box;\n"+"        display: -ms-flexbox;\n"+"        display: -webkit-flex;\n"+"        display: flex; \n"+"\n"+"        \n"+"\n"+"        width: 100%;\n"+"\n"+"        -webkit-box-pack : center;\n"+"        -moz-box-pack : center;\n"+"        -ms-flex-pack : center;\n"+"        -webkit-justify-content : center;\n"+"        justify-content : center;\n"+"        height: 50%; \n"+"        top: auto;\n"+"        bottom: 0;\n"+"        right: 0;\n"+"        left: 0;\n"+"        position: fixed;\n"+"        z-index: 3;\n"+"      }*/\n"+"\n"+"\n"+"      @-moz-keyframes three-quarters-loader {\n"+"        0% {\n"+"          -moz-transform: rotate(0deg);\n"+"          transform: rotate(0deg);\n"+"        }\n"+"        100% {\n"+"          -moz-transform: rotate(360deg);\n"+"          transform: rotate(360deg);\n"+"        }\n"+"      }\n"+"      @-webkit-keyframes three-quarters-loader {\n"+"        0% {\n"+"          -webkit-transform: rotate(0deg);\n"+"          transform: rotate(0deg);\n"+"        }\n"+"        100% {\n"+"          -webkit-transform: rotate(360deg);\n"+"          transform: rotate(360deg);\n"+"        }\n"+"      }\n"+"      @keyframes three-quarters-loader {\n"+"        0% {\n"+"          -moz-transform: rotate(0deg);\n"+"          -ms-transform: rotate(0deg);\n"+"          -webkit-transform: rotate(0deg);\n"+"          transform: rotate(0deg);\n"+"        }\n"+"        100% {\n"+"          -moz-transform: rotate(360deg);\n"+"          -ms-transform: rotate(360deg);\n"+"          -webkit-transform: rotate(360deg);\n"+"          transform: rotate(360deg);\n"+"        }\n"+"      }\n"+"      /* :not(:required) hides this rule from IE9 and below */\n"+"      .three-quarters-loader:not(:required) {\n"+"        -moz-animation: three-quarters-loader 1250ms infinite linear;\n"+"        -webkit-animation: three-quarters-loader 1250ms infinite linear;\n"+"        animation: three-quarters-loader 1250ms infinite linear;\n"+"        border: 4px solid #38e;\n"+"        border-right-color: transparent;\n"+"        border-radius: 16px;\n"+"        box-sizing: border-box;\n"+"        display: inline-block;\n"+"        position: absolute;\n"+"        overflow: hidden;\n"+"        text-indent: -9999px;\n"+"        width: 32px;\n"+"        height: 32px;\n"+"        z-index: 10000000;        \n"+"        top: 50%;\n"+"        left: 50%;\n"+"        margin-top: -16px;\n"+"        margin-left: -16px;\n"+'      }</style> <div id="wait" style="display: none" class="three-quarters-loader"> Loading… </div> </div> </div>')
;a.put("components/synchronizer-details/view.html","<div> \x3c!-- \n"+"      Data HUb Service (DHuS) - For Space data distribution.\n"+"      Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"      Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"      Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"      \n"+"      This file is part of DHuS software sources.\n"+"     \n"+"      This program is free software: you can redistribute it and/or modify\n"+"      it under the terms of the GNU Affero General Public License as\n"+"      published by the Free Software Foundation, either version 3 of the\n"+"      License, or (at your option) any later version.\n"+"      \n"+"      This program is distributed in the hope that it will be useful,\n"+"      but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"      GNU Affero General Public License for more details.\n"+"     \n"+"      You should have received a copy of the GNU Affero General Public License\n"+"      along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"     \n"+"    --\x3e <div> <style>#synchDetails .panel-heading {\n"+"                height: 30px;    \n"+"                background-color: lightgray;    \n"+"                line-height: 10px;\n"+"            }\n"+"\n"+"            #synchDetails .panel-default {\n"+"                border: 1px #aaa solid;\n"+"                width: 50%;\n"+"            }\n"+"\n"+"            @media screen and (min-width: 993px) and (max-width: 1200px) { \n"+"\n"+"                #synchDetails .panel-default {\n"+"                    width: 50%;\n"+"                }\n"+"            } \n"+"\n"+"            @media screen and (min-width: 769px) and(max-width: 992px) { \n"+"\n"+"                #synchDetails .panel-default {\n"+"                    width: 100%;\n"+"                }\n"+"            } \n"+"\n"+"            @media screen and (max-width: 768px) { \n"+"\n"+"                #synchDetails .panel-default {\n"+"                    width: 100%;\n"+"                }\n"+"            }\n"+"\n"+"            #synchDetails   .group            { \n"+"                position:relative; \n"+"                margin-bottom:35px; \n"+"            }\n"+"\n"+"            #synchDetails   .checkFunction  { \n"+"                top: -5px; \n"+"            }\n"+"            #synchDetails input               {\n"+"                font-size:13px;\n"+"                padding:2px;\n"+"                display:block;\n"+"                width:100%;\n"+"                border:none;\n"+"                border-bottom:1px solid #757575;\n"+"            }\n"+"            #synchDetails input:focus         { outline:none; }\n"+"\n"+"            /* LABEL ======================================= */\n"+"            #synchDetails label                {\n"+"                color:#999; \n"+"                font-size:13px;\n"+"                font-weight:normal;\n"+"                position:absolute;\n"+"                pointer-events:none;  \n"+"                top:10px;\n"+"                transition:0.2s ease all; \n"+"                -moz-transition:0.2s ease all; \n"+"                -webkit-transition:0.2s ease all;\n"+"            }\n"+"\n"+"            /* active state */\n"+"            #synchDetails input:focus ~ .lbl-field, #synchDetails input:valid ~ .lbl-field, #synchDetails input:invalid ~ .lbl-field  {\n"+"                top:-15px;\n"+"                font-size:13px;\n"+"                color: rgb(55, 59, 80);\n"+"            }\n"+"\n"+"            #synchDetails input:invalid ~ .invalid-field{\n"+"                display: inline-block !important;\n"+"            }\n"+"\n"+"            #synchDetails .invalid-field {\n"+"                display:none;\n"+"                color: rgb(255,110,64);\n"+"                top: 30px;\n"+"                font-size: 9px;\n"+"            }\n"+"\n"+"            #synchDetails .select-label {      \n"+"                top: -20px;\n"+"                color: rgb(55, 59, 80);\n"+"                font-size: 13px;\n"+"            }\n"+"\n"+"            /* BOTTOM BARS ================================= */\n"+"            #synchDetails .bar    { position:relative; display:block; width:100%; }\n"+"            #synchDetails .bar:before, .bar:after     {\n"+"                content:'';\n"+"                height:2px; \n"+"                width:0;\n"+"                bottom:1px; \n"+"                position:absolute;\n"+"                background:rgb(55, 59, 80); \n"+"                transition:0.2s ease all; \n"+"                -moz-transition:0.2s ease all; \n"+"                -webkit-transition:0.2s ease all;\n"+"            }\n"+"            #synchDetails .bar:before {\n"+"                left:50%;\n"+"            }\n"+"            #synchDetails .bar:after {\n"+"                right:50%; \n"+"            }\n"+"\n"+"            /* active state */\n"+"            #synchDetails input:focus ~ .bar:before, #synchDetails input:focus ~ .bar:after {\n"+"                width:50%;\n"+"            }\n"+"\n"+"            /* HIGHLIGHTER ================================== */\n"+"            #synchDetails .highlight {\n"+"                position:absolute;\n"+"                height:60%; \n"+"                width:100px; \n"+"                top:25%; \n"+"                left:0;\n"+"                pointer-events:none;\n"+"                opacity:0.5;\n"+"            }\n"+"\n"+"            /* active state */\n"+"            #synchDetails input:focus ~ .highlight {\n"+"                -webkit-animation:inputHighlighter 0.3s ease;\n"+"                -moz-animation:inputHighlighter 0.3s ease;\n"+"                animation:inputHighlighter 0.3s ease;\n"+"            }\n"+"\n"+"            /* Style Select Field */\n"+"            #synchDetails select {\n"+"                font-family: inherit;\n"+"                background-color: transparent;\n"+"                width: 100%;\n"+"                padding: 2px 0;\n"+"                font-size: 13px;  \n"+"                border: none;\n"+"                border-bottom: 1px solid rgb(0,0,0);\n"+"            }\n"+"\n"+"            /* Remove focus */\n"+"            #synchDetails select:focus {\n"+"                outline: none;\n"+"            }                          \n"+"\n"+"            /* ANIMATIONS ================ */\n"+"            @-webkit-keyframes inputHighlighter {\n"+"                from { background:rgb(55, 59, 80); }\n"+"                to    { width:0; background:transparent; }\n"+"            }\n"+"            @-moz-keyframes inputHighlighter {\n"+"                from { background:rgb(55, 59, 80); }\n"+"                to    { width:0; background:transparent; }\n"+"            }\n"+"            @keyframes inputHighlighter {\n"+"                from { background:rgb(55, 59, 80); }\n"+"                to    { width:0; background:transparent; }\n"+"            }\n"+"            #synchDetails   .fab-details {\n"+"                background-color: #373B50 !important;\n"+"                vertical-align: middle;      \n"+"                margin-left: 20px;\n"+"                padding: 6px;\n"+"                line-height: 20px;\n"+"                font-size: 15px;\n"+"                position: relative;        \n"+"                display: block;\n"+"                height: 40px;\n"+"                width: 40px;\n"+"                color: #fff;\n"+"                fill: currentColor;\n"+"                cursor: pointer;\n"+"                text-decoration: none;            \n"+"                border-radius: 50%;          \n"+"                overflow: hidden;\n"+"                transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"                transition-delay: 0.2s;\n"+"                box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"            }\n"+"\n"+"            @media screen and (max-width: 480px) { \n"+"                #synchDetails .fab-details {\n"+"                    background-color: #373B50 !important;\n"+"                    vertical-align: middle;      \n"+"                    margin-left: 20px;\n"+"                    padding: 6px;\n"+"                    line-height: 20px;\n"+"                    font-size: 15px;\n"+"                    position: relative;        \n"+"                    display: block;\n"+"                    height: 32px !important;\n"+"                    width: 32px !important;\n"+"                    color: #fff;\n"+"                    fill: currentColor;\n"+"                    cursor: pointer;\n"+"                    text-decoration: none;            \n"+"                    border-radius: 50%;          \n"+"                    overflow: hidden;\n"+"                    transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"                    transition-delay: 0.2s;\n"+"                    box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"                }\n"+"            }\n"+"\n"+"            #synchDetails   .fab-reset-synch {\n"+"\n"+"                font-size: 26px;        \n"+"            }\n"+"\n"+"            @media screen and (max-width: 480px) { \n"+"                #synchDetails .fab-reset-synch {\n"+"                    font-size: 22px; \n"+"                    padding: 4px;\n"+"                }\n"+"            }\n"+"\n"+"            #synchDetails  .fab-details.fab-right {\n"+"                float: right;\n"+"            }\n"+"\n"+"            #synchDetails  .fab-details.fab-left {\n"+"                float: left;\n"+"            }\n"+"\n"+"            #synchDetails .modal-dialog {         \n"+"                width: 60%;\n"+"                max-height: 65%;\n"+"                margin: 0px auto;\n"+"                position: relative;\n"+"                margin-top: 2%;\n"+"                margin-bottom: 2%\n"+"                    position: fixed;\n"+"                height: 65%;\n"+"                padding: 0;\n"+"                background: white;\n"+"                padding-bottom: 30px;\n"+"                overflow-y: auto;\n"+"                overflow-x: hidden;\n"+"            }\n"+"\n"+"            #synchDetails .btn{\n"+"                background: #373B50;\n"+"                color: #FFF;\n"+"            }  \n"+"\n"+"            @media screen and (min-width: 500px) { \n"+"                #synchDetails .synch-details-modal-dialog {\n"+"                    width: 60% !important;  \n"+"                    max-width: 60% !important;                            \n"+"                }\n"+"            }\n"+"\n"+"            #synchDetails .modal-header{  \n"+"                background: #373B50;\n"+"                color: #FFF;\n"+"            }        \n"+"\n"+"            #synchDetails .sectiontitle{\n"+"                background-color: rgb(55, 59, 80);\n"+"                color: #fff;\n"+"                text-align: left;\n"+"                padding: 10px;\n"+"                margin-bottom: 15px;\n"+"            }\n"+"\n"+"            #synchDetails .prodlink{\n"+"                font-size: 12px;\n"+"                color: #fff;\n"+"                background-color: rgb(55, 59, 80);\n"+"            }\n"+"\n"+"            #synchDetails .modal-container {\n"+"                padding: 20px;\n"+"            }\n"+"\n"+"\n"+"            #synchDetails   .synch-details-modal {\n"+"                position: fixed;\n"+"                top: 0;\n"+"                right: 0;\n"+"                bottom: 0;\n"+"                left: 0;\n"+"                overflow: hidden;\n"+"            }\n"+"\n"+"            #synchDetails   .synch-details-modal-content {\n"+"                position: absolute;\n"+"                top: 0;\n"+"                right: 0;\n"+"                bottom: 0;\n"+"                left: 0;\n"+"                border-radius: 0;\n"+"                box-shadow: none;\n"+"            }\n"+"\n"+"            #synchDetails   .synch-details-modal-header {\n"+"                position: absolute;\n"+"                top: 0;\n"+"                right: 0;\n"+"                left: 0;\n"+"                height: 40px;\n"+"                padding: 10px;        \n"+"                border: 0;\n"+"                text-align: center;\n"+"                font-size: bold;\n"+"            }\n"+"\n"+"            #synchDetails   .synch-details-modal-body {\n"+"                position: absolute;        \n"+"                top: 51px;\n"+"                bottom: 30px;\n"+"                width: 100%;\n"+"                overflow-y: auto;\n"+"                overflow-x: hidden;            \n"+"            }\n"+"\n"+"            #synchDetails   .synch-details-modal-footer {\n"+"                position: absolute;\n"+"                right: 0;\n"+"                bottom: 0;\n"+"                left: 0;\n"+"                background: #f1f3f5;\n"+"                padding: 5px;\n"+"                height: 50px;\n"+"            }\n"+"            #synchDetails   .modal-footer .left{\n"+"                text-align: left;      \n"+"            }\n"+"            #synchDetails   .modal-footer .right{\n"+"                text-align: right;        \n"+"            }      \n"+"\n"+"            #synchDetails   .synch-details-modal-row {\n"+"                margin: 0px;\n"+'            }</style> <div class="modal fade synch-details-modal" data-keyboard="false" data-backdrop="static" id="synchDetails" tabindex="-1" role="dialog" aria-labelledby="synchTitle" aria-hidden="true"> <div class="modal-dialog synch-details-modal-dialog"> <div class="modal-header synch-details-modal-header">Synchronizer Properties</div> <div class="modal-body synch-details-modal-body container-fluid"> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="synch.label" value="synch.label"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Label</label> </div> </div> <div class="group col-md-6"> <input type="text" ng-model="synch.serviceUrl" value="synch.serviceUrl"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Service Url</label> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="synch.serviceLoginUsername" value="synch.serviceLoginUsername"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Service Login Username</label> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="password" ng-model="synch.serviceLoginPassword" ng-blur="checkPassword()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Service Login Password</label> <span class="invalid-field" id="servicePwd">Empty Password</span> </div> </div> <div class="group col-md-6"> <div> <input type="password" ng-model="confirmPwd" ng-blur="checkConfirmPassword()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Service Login Confirm Password</label> <span class="invalid-field" id="serviceConfirmPwd">Password doesn\'t match</span> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="synch.schedule" value="synch.schedule"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Schedule</label> </div> </div> <div class="group col-md-6"> <div> <input type="text" ng-model="synch.pageSize" value="synch.pageSize"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Page size</label> </div> </div> </div> <div class="row"> <div class="group col-md-6"> \x3c!-- <input type="text" ng-model="synch.request" value="synch.request"> --\x3e \x3c!-- <span class="highlight"></span>\n'+'                            <span class="bar"></span> --\x3e <div> <label class="select-label">Request</label> <select ng-model="synch.request"> \x3c!--option value="unknown" disabled="disabled" selected="selected" >Request</option--\x3e <option value="start">Start</option> <option value="stop" ng-selected="stop">Stop</option> </select> </div> </div> <div class="group col-md-6"> <div> \x3c!--input type="text" ng-model="synch.collections"  value="synch.collections"--\x3e <label class="select-label">Target Collection</label> <select ng-model="synch.collections"> <option ng-repeat="x in collectionsName" value="{{x}}">{{x}}</option> </select> \x3c!--span class="highlight"></span>\n'+'                                <span class="bar"></span>\n'+'                                <label class="lbl-field">Target Collection</label--\x3e </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="synch.copyProduct" value="synch.copyProduct"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Copy product</label> </div> </div> <div class="group col-md-6"> <div> <input type="text" ng-model="synch.remoteIncoming" value="synch.remoteIncoming"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Remote Incoming</label> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="synch.sourceCollection" value="synch.sourceCollection"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Source Collection</label> </div> </div> <div class="group col-md-6"> <div> <input type="text" ng-model="synch.lastCreationDate" value="synch.lastCreationDate"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Last Creation Date</label> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="synch.filterParam" value="synch.filterParam"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Filter Param</label> </div> </div> <div class="group col-md-6"> <div> <input type="text" ng-model="synch.geoFilter" value="synch.geoFilter"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Geo Filter</label> </div> </div> </div> </div> <div class="modal-footer synch-details-modal-footer"> <div class="left col-md-6"> \x3c!--<div ng-show="!isNew" ng-model="prevbutton" ng-disabled="prevbutton.disabled" class="left-button fab-details fab-left" title="Previous Product" ng-click="showPrevSynch()">\n'+'                          <svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;">\n'+'                            <g id="arrow-back"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></g>\n'+"                          </svg>\n"+"                        </div>      \n"+'                        <div ng-show="!isNew" ng-model="nextbutton" ng-disabled="nextbutton.disabled" class="right-button fab-details fab-left" title="Next Product" ng-click="showNextSynch()">\n'+'                          <svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;">\n'+'                            <g id="arrow-forward"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></g>\n'+"                          </svg>\n"+'                        </div>--\x3e <div ng-show="isNew" class="left-button fab-details fab-left fab-reset-synch" title="Reset Fields" ng-click="resetFields()"><div class="glyphicon glyphicon-erase"></div> </div> </div> <div class="right col-md-6"> <div class="fab-details fab-right" title="Close" ng-click="close()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></g> </svg> </div> <div class="fab-details fab-right" title="Save" ng-click="save()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"></g> </svg> </div> </div> </div> </div> </div> </div> </div>')
;a.put("components/system-panel-container/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div id="system-container"> <style type="text/css">#system-container .action-button {\n'+"      background-color: rgb(55, 59, 80)!important;\n"+"      vertical-align: middle;\n"+"      margin-top: 12px;\n"+"      line-height: 20px;\n"+"      font-size: 14px;\n"+"      margin-left: 20px;\n"+"      position: relative;\n"+"      float: right;\n"+"      padding: 10px;\n"+"      cursor: pointer;\n"+"      color:white;\n"+"      text-decoration: none;\n"+"\n"+"  }\n"+"  #system-container .action-button:hover{\n"+"      color:white;\n"+"      text-decoration: none;\n"+"  }\n"+"  #system-container .action-button:visited{\n"+"      color:white;\n"+"      text-decoration: none;\n"+"  }\n"+"\n"+"  #system-container  h3{\n"+"    text-align: center;\n"+"  }\n"+"  #system-container  hr{\n"+"    width: 80%;\n"+"    border: 0px;\n"+"  }\n"+"\n"+"  #system-container  .group            { \n"+"    position:relative; \n"+"    margin-bottom:35px; \n"+"  }\n"+"  #system-container  input               {\n"+"    font-size:13px;\n"+"    padding:10px 10px 10px 5px;\n"+"    display:block;\n"+"    width:100%;\n"+"    border:none;\n"+"    border-bottom:1px solid #757575;\n"+"  }\n"+"  #system-container  input:focus         { outline:none; }\n"+"\n"+" \n"+"  #system-container  label                {\n"+"    color:#999; \n"+"    font-size:13px;\n"+"    font-weight:normal;\n"+"    position:absolute;\n"+"    pointer-events:none;  \n"+"    top:-15px;\n"+"    display: none;\n"+"    transition:0.2s ease all; \n"+"    -moz-transition:0.2s ease all; \n"+"    -webkit-transition:0.2s ease all;\n"+"  }\n"+"\n"+"\n"+"  #system-container input:invalid ~ #system-container .invalid-field{\n"+"      display: inline-block !important;\n"+"  }\n"+"\n"+"  #system-container .invalid-field {\n"+"    display:none;\n"+"    color: rgb(255,110,64);\n"+"    top: 45px;\n"+"    font-size: 9px;\n"+"  }\n"+"\n"+"  #system-container .field-error {\n"+"   \n"+"    color: rgb(255,110,64);\n"+"    top: 45px;\n"+"    font-size: 9px;\n"+"    }\n"+"\n"+"  #system-container  .select-label {\n"+"    display:none;  \n"+"    top: -20px;\n"+"    color: rgb(55, 59, 80);\n"+"    font-size: 13px;\n"+"  }\n"+"\n"+" \n"+"  #system-container  .bar    { position:relative; display:block; width:100%; }\n"+"  #system-container  .bar:before,  #system-container .bar:after     {\n"+"    content:'';\n"+"    height:2px; \n"+"    width:0;\n"+"    bottom:1px; \n"+"    position:absolute;\n"+"    background:rgb(55, 59, 80); \n"+"    transition:0.2s ease all; \n"+"    -moz-transition:0.2s ease all; \n"+"    -webkit-transition:0.2s ease all;\n"+"  }\n"+"  #system-container .bar:before {\n"+"    left:50%;\n"+"  }\n"+"  #system-container  .bar:after {\n"+"    right:50%; \n"+"  }\n"+"\n"+" \n"+"   #system-container input:focus ~ #system-container  .bar:before,  #system-container  input:focus ~ #system-container  .bar:after {\n"+"    width:50%;\n"+"  }\n"+"\n"+"  \n"+"    #system-container .highlight {\n"+"    position:absolute;\n"+"    height:60%; \n"+"    width:100px; \n"+"    top:25%; \n"+"    left:0;\n"+"    pointer-events:none;\n"+"    opacity:0.5;\n"+"  }\n"+"\n"+" \n"+"   #system-container input:focus ~ #system-container .highlight {\n"+"    -webkit-animation:inputHighlighter 0.3s ease;\n"+"    -moz-animation:inputHighlighter 0.3s ease;\n"+"    animation:inputHighlighter 0.3s ease;\n"+"  }\n"+"\n"+"  \n"+"  #system-container   select {\n"+"    font-family: inherit;\n"+"    background-color: transparent;\n"+"    width: 100%;\n"+"    padding: 8px 0;\n"+"    font-size: 13px;  \n"+"    border: none;\n"+"    border-bottom: 1px solid rgb(0,0,0);\n"+"  }\n"+"\n"+"  \n"+" #system-container  select:focus {\n"+"    outline: none;\n"+"  }\n"+"\n"+" \n"+"  /*  .mdl-selectfield label {display:none;}\n"+"  \n"+"\n"+"   .mdl-selectfield {\n"+"    font-family: 'Roboto','Helvetica','Arial',sans-serif;\n"+"    position: relative;    \n"+"  }\n"+"\n"+"    .mdl-selectfield::after {  \n"+"          position: absolute;\n"+"          top: 0.75em;\n"+"          right: 0.5em;\n"+"         \n"+"          width: 0;\n"+"          height: 0;\n"+"          padding: 0;\n"+"          content: '';\n"+"          border-left: .25em solid transparent;\n"+"          border-right: .25em solid transparent;\n"+"          border-top: .375em solid rgba(0,0,0, 1);\n"+"          pointer-events: none;   \n"+"          color: black;     \n"+"    \n"+"  }\n"+"\n"+"    .mdl-selectfield select {-webkit-appearance: none;\n"+"                           -moz-appearance: none;}\n"+"\n"+"    .mdl-selectfield select::-ms-expand {display: none;}                         \n"+"\n"+" */\n"+"  @-webkit-keyframes inputHighlighter {\n"+"      from { background:rgb(55, 59, 80); }\n"+"    to    { width:0; background:transparent; }\n"+"  }\n"+"  @-moz-keyframes inputHighlighter {\n"+"      from { background:rgb(55, 59, 80); }\n"+"    to    { width:0; background:transparent; }\n"+"  }\n"+"  @keyframes inputHighlighter {\n"+"      from { background:rgb(55, 59, 80); }\n"+"    to    { width:0; background:transparent; }\n"+"  }\n"+"\n"+" #system-container .terms{\n"+"    text-align: center;\n"+"    padding: 20px 0px;\n"+"    font-weight: bold;\n"+"  }\n"+"  #system-container .terms > a {\n"+"      color: #23527c;\n"+"  }\n"+"\n"+"  #system-container .form-control {\n"+"      border: none;            \n"+"      border-radius: 0px !important;\n"+"      border-bottom:1px solid #757575;\n"+"      box-shadow: none !important;\n"+"  }\n"+"  #system-container .gotomap {\n"+"    top: 20px;\n"+'  }</style> <div class="container"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-xs-8 col-sd-8"> <h3>Mail Configuration</h3> </div> <div class="col-md-1 col-sd-3 col-xs-3 gotomap"><gotomap-button></gotomap-button></div> </div> <hr> <hr> <div class="row"> <div class="group col-md-6"> <div> <p>SMTP Server</p> <input type="text" ng-model="model.basic.mailServerSmtp" ng-change="checkSMTPServer()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="SMTPServerError">SMTP Server empty</span> </div> </div> <div class="group col-md-6"> <div class="group col-md-3"> <p>Port</p> <input type="text" ng-model="model.basic.mailServerPort" ng-change="checkPort()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="portError">Port empty</span> </div> <div class="group col-md-3"> <span>TLS</span><input type="checkbox" style="width:30px;display:inline-block" ng-model="model.basic.mailServerTls"> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <p>Username</p> <input type="text" ng-model="model.basic.mailServerUser" ng-change="checkUsername()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="mailServerUserError">Username empty</span> </div> </div> <div class="group col-md-6"> <p>Password</p> <input type="password" ng-model="model.basic.mailServerPassword" ng-change="checkPwd()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="passwordLengthError">Password too short. Minimum 8 characters.</span> <span class="field-error" ng-show="passwordError">Password empty</span> </div> </div> <div class="row"> <div class="group col-md-6"> <p>Expeditor Mail</p> <input type="email" ng-model="model.basic.mailServerFromMail" ng-change="checkExpeditorMail()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="expeditorMailError">Expeditor mail empty</span> </div> <div class="group col-md-6"> <p>Expeditor Name</p> <input type="text" ng-model="model.basic.mailServerFromName" ng-change="checkExpeditorName()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="checkExpeditorNameError">Expeditor name empty</span> </div> </div> <div class="row"> <div class="group col-md-6"> <p>Reply to</p> <input type="email" ng-model="model.basic.mailServerReplyTo" ng-change="checkReplyTo()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="replyToError">Reply to empty</span> </div> </div> <div class="row"> <div class="group col-md-3"> <span>Mail user when:</span> </div> <div class="group col-md-3"> <span>creating account:</span><input style="width:30px;display:inline-block" type="checkbox" ng-model="model.basic.mailWhenCreate"> </div> <div class="group col-md-3"> <span>administrator updates his account:</span><input style="width:30px;display:inline-block" type="checkbox" ng-model="model.basic.mailWhenUpdate"> </div> <div class="group col-md-3"> <span>deleting account:</span><input style="width:30px;display:inline-block" type="checkbox" ng-model="model.basic.mailWhenDelete"> </div> </div> </div> \x3c!-- ___________________________________________________________--\x3e <br><br><br> <div class="container"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-xs-8 col-sd-8"> <h3>Support</h3> </div> </div> <hr> <div class="row"> <div class="group col-md-6"> <p>Mail</p> <input type="email" ng-model="model.basic.supportMail" ng-change="checkSupportMail()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="supportMailError">Support Mail empty</span> </div> <div class="group col-md-6"> <p>Name</p> <input type="text" ng-model="model.basic.supportName" ng-change="checkSupportMailName()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> \x3c!-- <span class="field-error" ng-init="supportMailNameError = false" ng-show="supportMailNameError">Support Name empty</span>  --\x3e </div> </div> <div class="row"> <div class="group col-md-6"> <p>Registration mail</p> <input type="email" ng-model="model.basic.registrationMail" ng-change="checkRegistrationMail()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="registrationMailEmailError">Registration Mail empty</span> </div> </div> <div class="row" style="text-align:right"> <div class="action-button" ng-click="basicSave()">SAVE</div> <div class="action-button" ng-click="rootConfigReset()">RESET TO DEFAULT VALUES</div> </div> </div> \x3c!-- ___________________________________________________________--\x3e <br><br><br> <div class="container"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-xs-8 col-sd-8"> <h3>Root configuration</h3> </div> </div> <div class="row"> <div class="group col-md-6"> <p>Old Password</p> <input type="password" ng-init="model.rootConfig = {}" ng-model="model.rootConfig.oldPassword" ng-change="checkOldPassword()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="oldPasswordError">Old password empty</span> </div> <div class="group col-md-6"> <p>New Password</p> <input type="password" ng-model="model.rootConfig.newPassword" ng-change="checkNewPassword()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="newPasswordError">New Password empty</span> </div> </div> <div class="row"> <div class="group col-md-6"> <p>Confirm Password</p> <input type="password" ng-model="model.rootConfig.confirmPassword" ng-change="checkConfirmPassword()" class="form-control"> <span class="highlight"></span> <span class="bar"></span> <span class="field-error" ng-show="confirmPasswordError">Confirm password empty</span> <span class="field-error" ng-if="passwordDoNotMatchError">Password do not match.</span> </div> </div> <div class="row" style="text-align:right"> <div class="action-button" ng-click="rootConfigSave()">SAVE</div> </div> </div> \x3c!-- ___________________________________________________________--\x3e <br><br><br> <div class="container"> <div class="row"> <div class="col-md-1"></div> <div class="col-md-10 col-xs-8 col-sd-8"> <h3>Restore Database</h3> </div> </div> <div class="row"> <div class="group col-md-4"> <p>Choose database dump that will be restored</p> </div> <div class="group col-md-4"> <select class="browser-default" ng-model="model.restoreDB.date" ng-options="item.value as   item.key   for item in dumpedDatabases"> </select> </div> <div class="group col-md-4"> <div class="action-button" ng-click="restoreDatabase(model.restoreDB.date)">RESTORE</div> </div> </div> </div> \x3c!-- ____________________________--\x3e <br><br><br> </div> </div>');a.put("components/test-odata/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+'--\x3e <div> <style></style> <div class="btn btn-default" ng-click="showSynchronizerDetails()">Create</div> </div> </div>');a.put("components/title/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.title-component{\n"+"            color: rgb(255, 255, 255);\n"+"            display: block;\n"+"            font-size: 24px;\n"+"\n"+"            line-height: 55px;\n"+"            text-align: center;\n"+"            white-space: nowrap;\n"+"            width: 100%;\n"+"            text-align:center;\n"+"        }\n"+"\n"+"        .selectable {\n"+"            -moz-user-select: text;\n"+"            -khtml-user-select: text;\n"+"            -webkit-user-select: text;\n"+"            -ms-user-select: text;\n"+"            user-select: text;\n"+'        }</style> \x3c!--using selectable class because the whole div wrapping this element has unselectable class, but this text must be selectable--\x3e <div class="title-component selectable">{{title}}</div> </div> </div>');a.put("components/toast-manager/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>.ng-toast.ng-toast--top, .ng-toast.ng-toast--top .ng-toast__list {\n"+"        top: auto;\n"+"        bottom: 0px;\n"+"      }\n"+"\n"+"      .alert {\n"+"      \tborder-radius: 0px;\n"+"      \tcolor: white;\n"+"      \tpadding: 10px !important;\n"+"      }\n"+"\n"+"      .alert-danger {\n"+"      \tbackground-color: #d9534f;\n"+"      \tborder-color: #d9534f;\n"+"      }\n"+"\n"+"      .alert-success {\n"+"      \tbackground-color: #419641;\n"+"      \tborder-color: #419641;\n"+"      }\n"+"\n"+"      .alert-info {\n"+"      \tbackground-color: #337ab7;\n"+"      \tborder-color: #337ab7;\t\n"+"      }\n"+"\n"+"      .alert-warning {\n"+"      \tbackground-color: #f0ad4e;\n"+"      \tborder-color: #f0ad4e;\t\n"+"      }</style> <toast></toast> </div> </div>")
;a.put("components/toolbar/view.html","<div> \x3c!--\n"+"      Data HUb Service (DHuS) - For Space data distribution.\n"+"      Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"      Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"      Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"      This file is part of DHuS software sources.\n"+"\n"+"      This program is free software: you can redistribute it and/or modify\n"+"      it under the terms of the GNU Affero General Public License as\n"+"      published by the Free Software Foundation, either version 3 of the\n"+"      License, or (at your option) any later version.\n"+"\n"+"      This program is distributed in the hope that it will be useful,\n"+"      but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"      GNU Affero General Public License for more details.\n"+"\n"+"      You should have received a copy of the GNU Affero General Public License\n"+"      along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"    --\x3e <div> \x3c!--ToolBar CSS--\x3e <style>/* EUROPEAN COMMISSION LOGO */\n"+"        .toolbar-logo {\n"+"            float: left;\n"+"            padding-left: 5px;\n"+"        }\n"+"\n"+"        .toolbar-logo-right {\n"+"            float: right;\n"+"            padding-left: 5px;\n"+"        }\n"+"\n"+"        @media screen and (min-width: 993px) and (max-width: 1200px) {\n"+"\n"+"            .toolbar-logo {\n"+"\n"+"            }\n"+"\n"+"            .toolbar-logo-right {\n"+"\n"+"            }\n"+"          }\n"+"\n"+"          @media screen and (min-width: 769px) and(max-width: 992px) {\n"+"\n"+"            .toolbar-logo {\n"+"               display: none;\n"+"            }\n"+"\n"+"            .toolbar-logo-right {\n"+"                display: none;\n"+"            }\n"+"          }\n"+"\n"+"          @media screen and (max-width: 768px) {\n"+"\n"+"            .toolbar-logo {\n"+"                display: none;\n"+"            }\n"+"\n"+"            .toolbar-logo-right {\n"+"                 display: none;\n"+"            }\n"+"          }\n"+"\n"+"        .toolbar-image {\n"+"            height: 55px;\n"+"        }\n"+"\n"+"        .toolbar-image-right {\n"+"            height: 40px;\n"+"        }\n"+"        .european-commission-logo{\n"+"            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAA8CAYAAADmBa1FAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEQAACxEBf2RfkQAAAAd0SU1FB94JCQolMSBCrw8AAA5TSURBVHhe7VoJVBblGv4V10ow07LSW7ZZmruWuaeg5oK4W66EVmpZZiqouYLkbiyi5L4AKuAGqKWSslgebfGqpckFFBDR8pdVAXnv88z9NMQfHe9BuBfnP+c53zcz78y888z7vdv8JpPxMxgwGDAYMBgwGDAYMBgwGDAYKDkGRKQMoVcDyFrdj7ze65Zquby8vGeAJsCjeh8Usm0VKus956GWg1VWUiQ3uB8LhawtzgsAXn6oCdTz8CDrMRD1DtAbqAM8oec8ykC2+Y0bN0IBT1ynqt7zHjo5EFUZaJWbmzsM45t0A/dDAuTfBsm7gAuY97ufcx8aWRBTBegKjAVawyIdMD6JsZxeEiD7qrLocIz7cX41veeWejlmCiDkLcAelvwJxk60RuANoB6OP6KXBMi3B8HrgGjgOK73JVeJ3vNLnRzIK08fChKaYhyBcQrQKycnpwdGJ7oNzO1wrCZQVi8BOK++ch3bMEYAUbiOvd7z/+/kVD77CAMZUJuEAgxwQ2BlY4AvMP8QeA/zkcqCx2AcrOTeAUFdMH+NL0UvAZBvAKwAwT8qwjn64hov6L3G/4ScIrASRhv6T5KIeWOMdiCMpI0FnLE9C1iEh/QCvsbcFftdgHGYk9h3QSR9MM/5DCOJ764IH4prtlHbL92nRTfEecG45xbgABAIfId9UwHd+XiJkc2UC4QMgbLLobg/xt3AQSAS28EkFcc/xtgH6EzgnP4Yx2KcCRlvIADYhn27gPWQ/xxjt+zsbGYXQwEv4G2AWcdwjPWAFwHdAQ2yXDnjgR+oJ3AM2Aysx772JUag3huDrMeh7CyAxG6B0ovVA71HMrHPFeM3wE7M+ZA/0T8C3wI7gGU4NglgkCOxXOIMdsyVaflLuTJoySCZcnVh8R0wdrpP19Ee56xRL/c7XJeBkfenHl/hWC29z1wiclC8OpSkVaYASZj/BjDYbAU8MZ8O0MeSSPrWHhf+zOwfk5g6Mv5SqjPmi1PM19ZdMmcFX7qa+R2w54I50zcu0Tz4h+PxzY7+fqljQkqa++mky8MiIuLrxyaZx8QnmPuPdg953NRqXpVCYbfgUVOzFbd8OA0C93YDjgBToFsMX7LScw2NBfvrlQiJem4K5awZtKCoL8BgsxJYBawGNgEhAC3oEHAYiJywPCq5yejAvFedNsvLI/zkucHr86o5rMwsb+uVZGq5+DdTiwXHTW2X/FHhHZ9LLw73z61q73u1TOvFZx7rufxKDYdvUk1tlpwx2XqevwsScOyoyc6z981ngJ5dQfZXSs8wRfa3GDcA1NcD43yAQfd1oBpQhbFHDw8PXEZZtAetGTgBsPpagv0fQFGmYbb0yWp7MvbN6+6y83iFLt45pk6e8je8MAds/0ZZu/8cr9R1idTsM1esOntIGcho+/PJ3Tn3FpOdd7yp49Ih+YiuQgPA/cMU4T9i7oJ94RgXwFio2xygFcAG1ATsm4ixIcDiiCviUYwM+MVPPoMhFBioluUSKL4W2M4HAI5yqWKkK9kPhAHBfWeEnqnQdVnO3ciy7rlAmoz8XKy7L5S6Q6fJ6s1NpXqveVKz91xp7DQZ5C+948X8fb07iYaeryo96S6+UXpy9S1Qq4+xhHk68/ZuwHPAswBdHoN5X6A1wEBs/cAtuOAN8ABVGaSgLBs2TJ82QhE+DJchqy9aBVOo2djnDizq5rLjl7sRXQbW2m7cWFkb1BCkTpQa/Vxl2cbWUrOvq/SZMlw8MH9u4CwxdQShFi3bokW/hnuvVFbL4M1MZym26Z9n4hlowcx2RqkUsi7mrESZWjK2dMT+ZhhfoXUXO9G4MfsQTLmWAMyLV1B5gA9C4glGd4K564Ze00JOFkZ0tZ7zhWgwwkUGTx8mtQfMESu4jio9Fkjl7oukxaiJ0st5pNQC+Taweis7DwtkWyT6JWWZczF6AwsBV1ozRu6boQi1x8hyf7gilvXAC9huAbCwGgAUf6sVStiwD6EsmdbBtIkBZiP3KfhhZI7N4LjafurOf1oiuhxI6zHhI5m7wk4agWgr+GJad0G/XRa+utNnY8XFs7u8MngGXEhBy7ZIdCPcm8F6NvTgSlvFfge26e4WY5sZCVPSwaoi7Yk5XQUJZsrZiC8CqSXdyrPFbtGKaBYCgYpIWnIQsBPb9MnMU1mJMeugrz4wyHVPXMWuy3ILLnsrW095fcQUGTV3oNSHXy5I8k15Et101BcyCBZfa4CrLouGns9Dn96sTqHDJsxJLvP8pSo/p2ujZTM/pz+n22CxRPRmUMdYH2DboEpJET0OStJq86d2rBSZMnGJugPMU+mrJ7UbHxhRrotX9u1EewoD4OvDp2j+t3yXrwvNLPgCKiMYthg5UerhhVSE7O0vxaJF89MXCyc3VcmS2OXYpnVPYSFDa6bVAnQPtG4WTYOYNWFkF5FpH5tdNUuCaBYsJNUM/AlcVmABk4xjicB5IB6IBWKcFu4zV+7mk3cb0Vj+Td53Fh//NmLv/ME90jcvLeWb6tVNVvi1lDoDZxbIQCxmHWxkvQbMA37lCwfeVMbBypD9brq3dco9PIW5NcB8mpbsRBej2qvFX9jQdUCJMVCCaZ0PfZ56mBk4xiYS3QrTIzaMuAwHNBkVEGJlt+xaQddR3cFd2n4yWuq89+U9iS4H/91ouIt0/nSsFjxvv5ZFi2ZZ7wKdOgCNoSfJDVD5/cfY5qobBTCNY3An7AFmHRzZpm0H0F/r/oRWZJaPm9YAmDZlAhlAOpCmxlRaNXAW+BlgPySs/8zQGEs+mkHtSYevpDYyivKd71KUQM6m50KtiKnQGS6mQKFjsrVo0dXZQcT9jwLRfOH02+wcYs7GEl0FiWTG4QaZmTQUgD1xug3m1M/yJWF8usgI1HshZdEToBgb6swqWAyw9+EDheijFwMsCuYDXLaudhO3/1i+i3cBH+0lzDoGTXWUTYFNpdWHnxdaAZZBMHRwcRTPTW8hDXTWRTTuywKEjaWGtGqMLEyoI/N8WrEj82hl4Y7YHoa5gwqCdti2V76aPrz4icZNnwCBnkAiEA/EAjHAaeAXgNnGbiBIuRfvrpN2/GyJaJbXdQbMlnddRkgLx8nSCD7bxn6+VnZXRPArC0uu2ddNGrw/WRo7OovtJx9LdawAnekdg+F66LAPhI5HC/YtoBn8MUlmkcUagJnGzYrwFczpt+lW2CNZhDmDOQNl8Xf6cFNrgD6aD+GrrJgWzGKAkX0WIzoebgYDCZfq2+ODoi0RrflZVHtlOvhIu4/Gy4atzaWZ0ySp1X8Oipeh8lQvd+nn8r54b2gt/+g3R0yQu5Nk5t0WfTSDWjtFFL/g8GMDK0Htaw7gxH4HcOsLj7Ji+nRWhMw46J/5wmroXfFFJsdyFDdm25FflkOBYIB/VGHhwnSKVRitZRHdB0a3wlxH/oBWd8g0GThthDzTx10af/CFBO5qIA0cJ6GQcUZR86HYoFIsvFdikei6qnHEVI4Nr0FM81h6Qy8aBoP4dGyzpctipYmqCPmvKObOtPDmAHvmTxUZgXovhJtaA6NJLMDKSyOWS41WjTnzZ5a3DDoTgM/ajgs8VK5zwTz69gqwDKtC1aWr1G2RtBr9qVTtsRD5MqtFBMq7dvAsEk09+ZWlI9ADhLIRNghg06gPtjkfpqrCjzCntbOjN4mVLzAMc3ugFV5Adb38FJkcbsov1mwq8RMWu3bsZ9CiWX6zJ83gyDybfpzkz+v1Zcixag6+OVV6rhBd6AE5Db765HFdm14rE2q9u3pkvjYpLZKBj98op/PFq4rwZjtUK1qg31zqSCuHDMvyafTpGOlimJ4yzatdZATqvRBuWhHgkmKZyo+q/GuAPcDlR6W6qwKADRkGF7u9R+K2B0XEXAPkQSAY1w2OiovfHH7mVj+aVqiyDerBngW/XdpiZMnNLIQ9aPY2WgLMuflMXAH0yQTnzZnelYhF84XgxvxLbDm9uJ5zw/N6dm7GyVO/S2zcOcnOvVGkyOH1cm7EXENGcdNgoBv/5nsvHfmfkvyogO1boFGp7eJv/Ou1/PxyWJYe5itXMtatWy+nTv0maenpcj4hQZIvXtTGlJQUSU5OlqSkJA3x8efk4sUUiY2Nk6QLFzS57OwcPHPhP5ASw9Ttv9Gv1JyjEW2+khGweYv8+utxORQRIbPnuMnevd9K+PcHJSh4m2wNDBZ//wDxXblS1uKFbNu+Q5av8BU/P385ceKkXEy+aBB9L4sg0RkZmRl+/v6yf/8BjcRNfn4SExMjx479JN+D7MCgbbJj5y7Zs2eP7Nm7V5MJCQmRiIhI+euvv+TKFbNBtB6isbQz8JPMzEwB8YJtDZwjymtkXruWpe1LT8+4dYzbPE7cPIdjwZ/hOvAWaNEofzOOHDmi+V8iLi5OG2nVifDLCfDVnNNXh4d/L+fOn9d897lz5+QC/HRsbKwkJibinHhN7vr167dxbRCtiE5LS8sIDAoGWUkSFrZbVq1aAzexV3btCtF89YED4RIQsFkOHjokc93nSWhYmOzHvu07dsq+ffs1NxIauluCcI31GzbKn1gB+X8G0YpoWGBGRGSknDnzhxw+/IPmi0+cOCEnT52Cnz4mp38/LdHRh7WsZOMmP03m4KEIjezIyCiJio6WqKhoTeZA+EFJTUsziC7os+k66KPNZjOC2hUNqampmr8m0pHuZWVlCaxesjKz5PLly5oM5em7eZzyV69e1WSuYk6fXcCiz+Iefe4VL0rtcRYOW6LPem2NiknfGvlH3gNB1Nm8wOjY+G1R/xpaaonU82BP91ntVbP3qkyM8mCwRp7ut/b8MwPWOurRp/TKtPd53tTR4w1T+2UtHxjaejY1tXEr/r5x6X1rxpMZDBgMGAwYDBgMGAwYDBgMGAwYDBgMGAwUCQP/BoJ+km9w+NbUAAAAAElFTkSuQmCC');\n"+"            background-size: contain;\n"+"            background-repeat: no-repeat;\n"+"            height: 55px;\n"+"            width: 80px;\n"+"            top:3px;\n"+"            position:relative;\n"+"            float: left;\n"+"        }\n"+"\n"+"        .esa-logo{\n"+"            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAA8CAYAAACuNrLFAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEQAACxEBf2RfkQAAAAd0SU1FB94CHA4SL11UDDgAAA7USURBVHhe7ZsHtFXFFYaNCXZBRQVbQHAZ0CgoxJpYsa2loomgokaxV7BHjS12KRFQgg0Dxq5EBSsKYkns2GLBiCaoiQ1EEymPYr7vrn3vOvdw330vrOd7T9bctf4158zsM2fO3nv27L1n7lJLpV/iQOJA4kDiQOJA4kDiQOJA4kDiQOJA4kDiQOJA4kDiQOJA4kDiQOJA4kDiQOJAA3Hg22+//QFYbuHChW0oV6HsUlNT033u3Lmbc/9z7tcHa3LdnnJFyqUb6NWpm6bkgIJHoKuBjcCx8+fPP5Ny5wULFtwJ/gr+DJ4Hl1J/KPgDOAFsyLMdwDJNOf707sXkQAh+WQS5Bfg1OA0hfw7uc8ZT/gm8B24Et4ORKMcFlJPBB9AfCI6E9rCwDMkiLKYsmuQxhLYW2B1hXkE5JIT7RShAN8rR4EPaRoQyjKK8HLwSCnAIz5yqQkBzKstFN5eQJvmY9NL6c8C1G4FtAi7WnCtcSgV7JZihAnC/RywBr3KtIowJ03861y+CKQi/P+Vw6h8NJbnLJYT+29Z/NImy0TmAkNYD14NxChs8xLXCvDAU4N64H4sw76JOH+B1Zz/1J4YC3BsKom8wENwDHgVXQ7MlWL7RPyy9sDoHYs3fECFd6owGQxDUc+Ap1/MQ5AeUt4ZijOOZs2hTuH8DLgU6hqOY/SdRvglUovEKP5TlCejvBgeBlZNMmhEHENAPEcpvENZEMDRM+KtcP039eUDh3gCuB58qaOrOUFkoh4KHQhGupXwp+prA9S2hNPdT90b0MZjrjVOo2EwUAEH8CIEcjnCeAP9E+CrC72L2usY/bRt0vUKYzm4tgTN/pApCqYAHUT4ABnG9O/Q7KGhwHNjfkjYVZRLXLhmt68MC6FYE3UOpHuP5jx1nKNow6vfUt6hLobRyM2fOXDXGdRHP29dHYCp9TASGsnuAdeRJtbFBY4TUEfTkea2myu6YPgTv2jd9XEj7jn6n767PtzYJDYPTQ9+HQRvXvwxuAo8wcB0/FUFB6w/oELokOPNvo3yWcozPcX1JNUHIALAqynUOdM/JsHnz5u1UTWjhkOqTDIV+NvcVf7TPddyU2ymYSkwMJd8UOi3anGp90T6Fse1bW9RCe0twTAh6QW19WQ/dbHALl52apRKE6e9NeQUfpKOm0CeByc4ISuP8a8DV4D3qRlLeDR7g+mJKnUD9hV3po1V9NBi61cPK3MNza9X2DHRdQxHnVWNysY2+Pge/8puyfcp46relL5emqgLL9DUD2gPyfalgjP1Yymn1GVORJr5jjfrwp1Fp+JD1QrhTKAfxcWdRPg7uAM+EMmjK7gAqgaHha0CL8BQYQf0inj11mtG2pou57sz1SsUPC4F05tnbaetT6YNnzZrVjnb9i7kZoSyk7j/UqYjvgH/lZ7Ozkrru2T65XyP6mp8RyDfUTwRaNeES9g+QpfmI+3Y5ZVIpJ1C/MNfX81QZIhsdvQTNV1kF4X4BbX0bVbh1vSxm/y8Y2MMKk1InTz9AQRu+GQK61muy7wfXgbHAdXecbaaG6ad9RrgtMJ89aNsPuqsoB0JzGug7e/bsMjrqjqe9f36c9Ld0JJE+ywpfAdHnhbQdECb6aNp1Rqdn6GpUXoVe7BdaU9fmLApklMpDP2UjlTEUck3ujwRvFoVLWcO7jsspk7P/i6xwudcCbqNlo2yD0m9PaUq8NP547/11yaRR2xngysDkzRgFGTP6RepuVsvBcODs0JMfCf7ih4WyaPqH8bFb52aIWULjfenHUqo0f7Qf3tHLd2aUpb1KRd06uT46qHDUl2Yj1zPAwaBsjedeS+EYZ2WUQMug+S44XlzvD83UrJJkFaT4buqWB9eCgr9BqaKMzYzXzbArczN7Wn780kPTlfoncooyrVEFXNfLZCYfeKsfzUDN1Cmkc6jTCujNF2L4UADNm7NGa/F7ynuhPVmtzzDIUHJv8AIohoxvxCw9RkGA9bPjcsmhvVeFWfZJjtF3cF/RM6fPzcH7GQHreF3HfYuiAnCfVQDN8WVgxQq+wm7UmwUdGDghpyD7Bh+K7SfxnkU2vKDZCbycU4Av65JJo7arueAUYDJnmoIFrv3G9SeB3/IBOocTub4RuBRoHVQOFeaEIpOD0a2pN4toOOhmkbPbKMI+tAIFf6E4MzMz5aDcLHPpKK2xXmv2KdblWbeet81hS/p+N6MAPvIYWC3GpVBVxNIP+q+pe4TSd7l7uRfoAoHh5OoZlBxbxw1WyrWvEvVah3VBd8ZqSD2e65JV8sXcNzsF+CmDMqTTo7+E0nj/ecZ6NPfGrqtSbgB6U/84pcuFkYLe/zW075CbuT2hMWnkXoLnAxSYcXdb1n/7sS4/61ppSTKzrA00o3PCmkvdZsDQSz/AjGQWU7kvOYvB7NdVllCytvGNJaUKGi3Bf4G7nOYD/q6iOAlo7wpq3cFU6Aob2mHgBeAmmPkRcwqfgrLxxPu+or5No87yai9TmxmQ6VoF6jrvrO4fZrmwfsqEaHe3T+Y4k3UYdXIOzCnAZrRdL+OrMS9ndpeBdp+MAmiVjJuzs3UWdRsCHc56/aCdxnccGt9QDAMnU19nGAhNDZjOt/iNZfsWvNyk2W60PRiCnkNZpli1DRAyrU7nZqMADKYdcAPHjJjC1USbUNkVeKrHNV3HaCfaHuZeUz4GuP+ved8mt573of5ZHEM9Yk3jcjLMMvprFfW2tbIu6jvVoQA6ZZ2gPYX+nbGGgnVBR/DsnLK14vnR1H8SwtBXqDXHYBsYVFRmymVQqhMVfF7I1KmkzvDpwGzgEHAn16WkU3NUAGPxKxnYA5GYcR/gNk0g90dQb4h4MPfG/AreTKFhoPsCd0NzrqYws37r1Q8ORVFBZJZOk6ng82gzfNQ5NLlk6HQBOB76Hpk+DKVG5iyAptqsYdcIHQ3F6sLh0JTlAzJKZnbR00smvXRuDRHfDwGWWQjqzAV0VAkIJ00Tv5kdG/daC/dMzJXsB1yqWsoXyquorynSN0cFMJ+t0+YGj1u6OkTm/p3h1qkMJmt06FwidBD1AVQAt4WNm0smkg/VZ3Ar+CEEdTSlUYTOpbn/AUCh9Ba061cMAI/B2NISECbWnHyJcTKQ+zOqmU7aPbK2VWBrSs8qFiIUrtfl7GJX0EVQ/+Pc0qWV+xlj0Q96i+uSVeD6S7+TZ1wuzwZlazv0hsYt82MLBVDhs301ryWAQbZggEfxEeb9zf+b+FGwRgXOdIVpvD8GuPdv+WCxHjpne8l8B7P3imfMJmoFBsezho8qTyG0VPBe0z4ozzwUwplU8upVAGh16jpUUgLq20JvzkEHzONoOoiTipYlchxm53TWxPBa+jEBdTLPZxNQX1F3OnWeixxQwfT3oa4s9Rx+h5Ph9py1aHYKoJk6H4a4Lpo9M/Xq7p4zXUugAih4c/9aAh1GFcLsoJlBj4v1zM2mtak7l7b7zKLJNK6fBPoY7wB3yoTnCd1Q2jYvDOrMyt0MsuZTZ+sG4AwuxPehcEYNRh4zisymX5eMCUWFodQ8f5Np1wfoUmHWehrK8Debg5jJvd/RGgysoABH5BVAa8G3exayTIm5b14KIAM0ifBLweoAPgwK0UAIWlPvtdAPMAKYAMwGOntVFLN+W1UQ4kHSqCy0u9b3gymGnPocLgf9QVmePeMHqJgeKv0gy3Ce1QHUepjEOYr++lHeBD4G2byBZlv/pDAzud4baNoL3UnLz1T2jipTQEd1F+Chlez+w79p70Zdy/iOMqeRsUzGYv1SoQMd2+1UOBU+O6Z4b/NTgGDQIQzYGa3pV9gKfgxw5nut8E0AmRVU6NJqCfQTxhtu8YEr5Dxut35Nxx4GzCu4H6DPoCPlLDbZUmucDY0zzjW3LO8ejNQa6OUbv+edNp0yLVkp4+i7INPKZT1y6TzBrH9jkst08is5mvncj+B5Q1XDPx3iShHA27QbQru7+SLXM/OWorkrgNrtUuCM1QFU4JaF2U+bnrs7YOdRupYa4rjGG+boRI7nA/ehzMfMS1NvIsg/i3R2M8hZUpyZ1Zy6WEeNCHTMynbWKjG3WAe9+/0b55TRDJ778Tqjpf0Fn6Fvqgrh3iL5AdpM5bbPLDdrqBCVaPNj8j08b79Zy2Toun1d393o7c5EBtaPAbvG6qw5K4oWwSVBxhm66bi5/ntAw8ygx788+aKSuHt4A9c9nDEN9RH0uxomdi/6frKa4Gn/GngoZQPoFjl9Yx1tm0DjSeVaD4SEUjjztQhuY5f1pULQx2WgbK8iOzbaXJI8Se1S9VFGOd2pHNJQvGnQfpyZDFZfYAKwVNButY7FdPuHDw9TaJI9A+D6qRUw/tXJ01l8jTp3FD3qdbpKUEkQMbP/r+NR9GMySa/aP6m4BHkkbDr4gnsPrp6JdfF4VtXTxqEEJrg6QKsSvwU+Ax53t7+3VWpgOFmI5Ss4ilqTFWj3fR4r8xyFS5HnJD2LcNGcOXN+EjQuY/a1cwabNajgGqqzYM4WfITJIC2AGz6mO7UAKoV1xfOBardJIddVw8dnKA353D52P8GDJCZ6/HjNpp66B0MOpV46nabF/pOIFisUrBQNLC4foi8zlotttWpT9MUdU5M9h2CWxdx6yFHHrxjumSMYzL07ZzpXzhzPCKr9bhvrGLpOmxCZDDzz5/8IPCHj7HLzxuXkIhhlaNRuiWFYk0nqO3yxMxMh7QkM9cwEau5NCnm2v3hu0HqhUhivu1yYILL0/KAKpC/hczqS+hbng1005UkBvkMBNkTXmkWEZTr1eISnWdf0Gxk8iz9gtODW5yjojHdfBjpMznwjAxM87uY5288Opbgu9hYK+/Pp9z3gQCjB2ubpEaQRgqY/uzToGwjDxcJeQfgDOmlaBx1Ic/p9dbq+B5+chliJAwjPTJlbsR090xe7hv4NTCfQQyGeE/CUsEuBOXNNvYc9T6StW+LqEsYBBKtXv6N/6vAv31x7dqCnwqbcFHgaaHnuF9kgWcJYkT4ncSBxIHEgcSBxIHEgcSBxIHEgcSBxIHEgcSBxIHEgcSBxIHEgcSBxIHEgcSBxIHEgceC748D/AClxwXKuQwRNAAAAAElFTkSuQmCC');\n"+"            background-size: contain;\n"+"            background-repeat: no-repeat;\n"+"            height: 55px;\n"+"            width: 80px;\n"+"            top:8px;\n"+"            position:relative;\n"+"            float: left;\n"+"        }\n"+"\n"+"        .def-home {\n"+"            height: 30px;\n"+"            width: 0px;\n"+"            top:11px;\n"+"            position:relative;\n"+"            float: right;\n"+"        }\n"+"\n"+"        .toolbar-actions{\n"+"            float: right;\n"+"            width: 100px;\n"+"            height: 55px;\n"+"            background-color: gray;\n"+"            top: 5px;\n"+"            padding: 5px;\n"+"            position: relative;\n"+"        }\n"+"\n"+"\n"+"\n"+"        .map-button{\n"+"            vertical-align: middle;\n"+"            margin-top: 8px;\n"+"            padding: 6px;\n"+"            line-height: 20px;\n"+"            font-size: 15px;\n"+"            position: relative;\n"+"            float: right;\n"+"            display: block;\n"+"            height: 40px;\n"+"            width: 40px;\n"+"            color: #fff;\n"+"            cursor: pointer;\n"+"            fill:currentColor;\n"+"            text-decoration: none;\n"+"\n"+"        }\n"+"\n"+"        .home-button {\n"+"            margin-top: 6px !important;\n"+"        }\n"+"\n"+"        .map-button:hover{\n"+"            color:white;\n"+"            text-decoration: none;\n"+"        }\n"+"\n"+"        .map-button:visited{\n"+"            color:white;\n"+"            text-decoration: none;\n"+"        }\n"+"\n"+"        /********/\n"+"        .map-button:link,.map-button:visited,.map-button:hover,.map-button:active  {\n"+"        color: white;\n"+"        }\n"+"        .login-button :link,.login-button:visited,.login-button:hover,.login-button:active  {\n"+"        color: white;\n"+"        }\n"+"        /*\n"+"        .map-button:visited {\n"+"        color: white;\n"+"        }\n"+"\n"+"        .map-button:hover {\n"+"        color: white;\n"+"        }\n"+"\n"+"        .map-button:active {\n"+"            color: white;\n"+"        }\n"+"        */\n"+"        /*********/\n"+"        .login-button {\n"+"            background-color: #797F9E!important;\n"+"            vertical-align: middle;\n"+"            margin-top: 12px;\n"+"            line-height: 20px;\n"+"            font-size: 15px;\n"+"            margin-left: 20px;\n"+"            position: relative;\n"+"            float: right;\n"+"            padding: 10px;\n"+"            cursor: pointer;\n"+"            color:white;\n"+"            text-decoration: none;\n"+"\n"+"        }\n"+"        .login-button:hover{\n"+"            color:white;\n"+"            text-decoration: none;\n"+"        }\n"+"        .login-button:visited{\n"+"            color:white;\n"+"            text-decoration: none;\n"+"        }\n"+"\n"+"        #toolbar{\n"+"            box-shadow: 3px 5px 19px 0 rgba(49,50,50,.62);\n"+"        }\n"+"\n"+"        .old-link {\n"+"            color: white;\n"+"            font-size: 11px;\n"+"            font-style: italic;\n"+"        }\n"+"\n"+"        .col-old-link {\n"+"            width:100%;\n"+"            text-align: right;\n"+"            line-height: 20px;\n"+"        }\n"+"\n"+"        .rowbar {\n"+"            height: 55px !important;\n"+"        }\n"+"        .little {\n"+"            height: 40px !important;\n"+"        }\n"+"\n"+"        .rowminimum {\n"+"            height: 20px !important;\n"+"            float: right;\n"+"            width: 100%;\n"+"            position: absolute;\n"+"            padding-right: 15px;\n"+"        }\n"+"\n"+"        .guide {\n"+"            margin-top: 6px !important;\n"+"        }\n"+"\n"+"        .unselectable {\n"+"            -moz-user-select: -moz-none;\n"+"            -khtml-user-select: none;\n"+"            -webkit-user-select: none;\n"+"            -o-user-select: none;\n"+"            user-select: none;\n"+'        }</style> <div ondragstart="return false" ondrop="return false" id="toolbar" class="navbar toolbar unselectable" role="navigation"> <div class="row"> \x3c!-- left element --\x3e <div class="col-md-4"> <div class="row"> \x3c!-- logos --\x3e <span ng-repeat="logo in logos"> <a href="{{logo.link}}" target="_blank"> <span class="toolbar-logo" title="{{logo.link}}"> <img draggable="false" class="toolbar-image" src="{{logo.image}}"> </span> </a> </span> </div> </div> \x3c!-- center element TITLE --\x3e <div class="col-md-4"> <apptitle></apptitle> </div> \x3c!-- right element --\x3e <div class="col-md-4"> <div class="row rowbar"> <div class="row little"> \x3c!-- buttons --\x3e \x3c!--<map-button></map-button>--\x3e <a href="{{home_link}}" home target="_blank"> <div ng-show="show_home" class="map-button home-button" title="{{home_title}}"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="home"> <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"> </g> </svg> </div> </a> <a href="{{userguide_link}}" target="_blank"> <div ng-show="show_userguide" class="map-button guide" title="{{userguide_title}}"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="help"> <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"> </g> </svg> </div> </a> <span ng-repeat="logo in rightlogos"> <a href="{{logo.link}}" target="_blank"> </a></span> <login-button ng-show="!userInfo.isLogged"></login-button> \x3c!-- <signup-button ng-show="!userInfo.isLogged" ></signup-button> --\x3e \x3c!-- <login-dialog></login-dialog> --\x3e <user-button ng-show="userInfo.isLogged"></user-button> </div> </div> </div> </div> </div> </div></div>');a.put("components/user-button/view.html","<div> \x3c!-- \n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"  \n"+"  This file is part of DHuS software sources.\n"+" \n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"  \n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+" \n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+" \n"+"--\x3e <div> <style>/* FAB */\n"+"      .fab-user {\n"+"          vertical-align: middle;\n"+"          margin-top: 12px;\n"+"          margin-left: 20px;\n"+"          margin-right: 10px;\n"+"          padding: 6px;\n"+"          line-height: 20px;\n"+"          font-size: 15px;\n"+"          position: relative;\n"+"          float: right;\n"+"          display: block;\n"+"          height: 40px;\n"+"          width: 40px;\n"+"          color: #fff;\n"+"          fill: currentColor;\n"+"          cursor: pointer;\n"+"          text-decoration: none;            \n"+"          border-radius: 50%;          \n"+"          overflow: hidden;\n"+"          transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"          transition-delay: 0.2s;\n"+"          box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"      }\n"+"      \n"+"      .fab-user.user {\n"+"        background-color: #797F9E;\n"+"        height: 27px !important;\n"+"        width: 27px !important;\n"+"      }\n"+"\n"+"      .fab-user:after {\n"+"        \n"+"        position: absolute;\n"+"        content: '';\n"+"        top: 100%;\n"+"        left: 50%;\n"+"        margin-left: -20px;\n"+"        width: 0;\n"+"        height: 0;\n"+"        border-style: solid;\n"+"        border-width: 0 10px 10px 10px;\n"+"        border-color: transparent transparent #fff transparent;\n"+"      }\n"+"\n"+"      /* LOGIN ICON */\n"+"        .user-ico {\n"+"            vertical-align: middle;\n"+"            margin-top: 5px;\n"+"            margin-right: 5px;\n"+"            padding: 3px;\n"+"            line-height: 20px;\n"+"            font-size: 15px;\n"+"            position: relative;\n"+"            float: right;\n"+"            display: block;\n"+"            height: 37px;\n"+"            cursor: pointer;\n"+'        }</style> <img ng-click="openBadge()" class="user-ico" title="User Profile" src="images/logged.png"> </div> </div>')
;a.put("components/user-details/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>#userView .panel-heading {\n"+"      height: 30px;\n"+"      background-color: lightgray;\n"+"      line-height: 10px;\n"+"    }\n"+"\n"+"    #userView .panel-default {\n"+"      border: 1px #aaa solid;\n"+"      width: 50%;\n"+"    }\n"+"\n"+"    @media screen and (min-width: 993px) and (max-width: 1200px) {\n"+"\n"+"      #userView .panel-default {\n"+"         width: 50%;\n"+"      }\n"+"    }\n"+"\n"+"    @media screen and (min-width: 769px) and(max-width: 992px) {\n"+"\n"+"      #userView .panel-default {\n"+"         width: 100%;\n"+"      }\n"+"    }\n"+"\n"+"    @media screen and (max-width: 768px) {\n"+"\n"+"      #userView .panel-default {\n"+"         width: 100%;\n"+"      }\n"+"    }\n"+"\n"+"    #userView   .group            {\n"+"      position:relative;\n"+"      margin-bottom:35px;\n"+"    }\n"+"\n"+"    #userView   .checkFunction  {\n"+"      top: -5px;\n"+"    }\n"+"    #userView input               {\n"+"      font-size:13px;\n"+"      padding:2px;\n"+"      display:block;\n"+"      width:100%;\n"+"      border:none;\n"+"      border-bottom:1px solid #757575;\n"+"    }\n"+"    #userView input:focus         { outline:none; }\n"+"\n"+"    /* LABEL ======================================= */\n"+"    #userView label                {\n"+"      color:#999;\n"+"      font-size:13px;\n"+"      font-weight:normal;\n"+"      position:absolute;\n"+"      pointer-events:none;\n"+"      top:10px;\n"+"      transition:0.2s ease all;\n"+"      -moz-transition:0.2s ease all;\n"+"      -webkit-transition:0.2s ease all;\n"+"    }\n"+"\n"+"    /* active state */\n"+"    #userView input:focus ~ .lbl-field, #userView input:valid ~ .lbl-field, #userView input:invalid ~ .lbl-field  {\n"+"      top:-15px;\n"+"      font-size:13px;\n"+"      color: rgb(55, 59, 80);\n"+"    }\n"+"\n"+"    .username-lbl-field {\n"+"      top:-15px !important;\n"+"      color: rgb(55, 59, 80) !important;\n"+"    }\n"+"\n"+"    #userView input:invalid ~ .invalid-field{\n"+"        display: inline-block !important;\n"+"    }\n"+"\n"+"    #userView .invalid-field {\n"+"      display:none;\n"+"      color: rgb(255,110,64);\n"+"      top: 30px;\n"+"      font-size: 9px;\n"+"    }\n"+"\n"+"    #userView .select-label {\n"+"      display:none;\n"+"      top: -20px;\n"+"      color: rgb(55, 59, 80);\n"+"      font-size: 13px;\n"+"    }\n"+"\n"+"    /* BOTTOM BARS ================================= */\n"+"    #userView .bar    { position:relative; display:block; width:100%; }\n"+"    #userView .bar:before, .bar:after     {\n"+"      content:'';\n"+"      height:2px;\n"+"      width:0;\n"+"      bottom:1px;\n"+"      position:absolute;\n"+"      background:rgb(55, 59, 80);\n"+"      transition:0.2s ease all;\n"+"      -moz-transition:0.2s ease all;\n"+"      -webkit-transition:0.2s ease all;\n"+"    }\n"+"    #userView .bar:before {\n"+"      left:50%;\n"+"    }\n"+"    #userView .bar:after {\n"+"      right:50%;\n"+"    }\n"+"\n"+"    /* active state */\n"+"    #userView input:focus ~ .bar:before, #userView input:focus ~ .bar:after {\n"+"      width:50%;\n"+"    }\n"+"\n"+"    /* HIGHLIGHTER ================================== */\n"+"    #userView .highlight {\n"+"      position:absolute;\n"+"      height:60%;\n"+"      width:100px;\n"+"      top:25%;\n"+"      left:0;\n"+"      pointer-events:none;\n"+"      opacity:0.5;\n"+"    }\n"+"\n"+"    /* active state */\n"+"    #userView input:focus ~ .highlight {\n"+"      -webkit-animation:inputHighlighter 0.3s ease;\n"+"      -moz-animation:inputHighlighter 0.3s ease;\n"+"      animation:inputHighlighter 0.3s ease;\n"+"    }\n"+"\n"+"    /* Style Select Field */\n"+"    #userView select {\n"+"      font-family: inherit;\n"+"      background-color: transparent;\n"+"      width: 100%;\n"+"      padding: 2px 0;\n"+"      font-size: 13px;\n"+"      border: none;\n"+"      border-bottom: 1px solid rgb(0,0,0);\n"+"    }\n"+"\n"+"    /* Remove focus */\n"+"    #userView select:focus {\n"+"      outline: none;\n"+"    }\n"+"\n"+"    /* Hide label */\n"+"    #userView .user-selectfield label {display:inline;}\n"+"    /* Use custom arrow */\n"+"\n"+"    #userView .user-selectfield {\n"+"      font-family: 'Roboto','Helvetica','Arial',sans-serif;\n"+"      position: relative;\n"+"    }\n"+"\n"+"    #userView .user-selectfield::after {\n"+"            position: absolute;\n"+"            top: 0.75em;\n"+"            right: 0.5em;\n"+"            /* Styling the down arrow */\n"+"            width: 0;\n"+"            height: 0;\n"+"            padding: 0;\n"+"            content: '';\n"+"            border-left: .25em solid transparent;\n"+"            border-right: .25em solid transparent;\n"+"            border-top: .375em solid rgba(0,0,0, 1);\n"+"            pointer-events: none;\n"+"            color: black;\n"+"\n"+"    }\n"+"\n"+"    #userView .user-selectfield select {-webkit-appearance: none;\n"+"                             -moz-appearance: none;}\n"+"\n"+"    #userView .user-selectfield select::-ms-expand {display: none;}\n"+"\n"+"    /* ANIMATIONS ================ */\n"+"    @-webkit-keyframes inputHighlighter {\n"+"        from { background:rgb(55, 59, 80); }\n"+"      to    { width:0; background:transparent; }\n"+"    }\n"+"    @-moz-keyframes inputHighlighter {\n"+"        from { background:rgb(55, 59, 80); }\n"+"      to    { width:0; background:transparent; }\n"+"    }\n"+"    @keyframes inputHighlighter {\n"+"        from { background:rgb(55, 59, 80); }\n"+"      to    { width:0; background:transparent; }\n"+"    }\n"+"    #userView   .fab-details {\n"+"        background-color: #373B50 !important;\n"+"        vertical-align: middle;\n"+"        margin-left: 20px;\n"+"        padding: 6px;\n"+"        line-height: 20px;\n"+"        font-size: 15px;\n"+"        position: relative;\n"+"        display: block;\n"+"        height: 40px;\n"+"        width: 40px;\n"+"        color: #fff;\n"+"        fill: currentColor;\n"+"        cursor: pointer;\n"+"        text-decoration: none;\n"+"        border-radius: 50%;\n"+"        overflow: hidden;\n"+"        transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"        transition-delay: 0.2s;\n"+"        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"      }\n"+"\n"+"      @media screen and (max-width: 480px) {\n"+"        #userView .fab-details {\n"+"          background-color: #373B50 !important;\n"+"          vertical-align: middle;\n"+"          margin-left: 20px;\n"+"          padding: 6px;\n"+"          line-height: 20px;\n"+"          font-size: 15px;\n"+"          position: relative;\n"+"          display: block;\n"+"          height: 32px !important;\n"+"          width: 32px !important;\n"+"          color: #fff;\n"+"          fill: currentColor;\n"+"          cursor: pointer;\n"+"          text-decoration: none;\n"+"          border-radius: 50%;\n"+"          overflow: hidden;\n"+"          transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"          transition-delay: 0.2s;\n"+"          box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"        }\n"+"      }\n"+"\n"+"      #userView   .fab-reset-user {\n"+"\n"+"        font-size: 26px;\n"+"      }\n"+"\n"+"      @media screen and (max-width: 480px) {\n"+"        #userView .fab-reset-user {\n"+"          font-size: 22px;\n"+"          padding: 4px;\n"+"        }\n"+"      }\n"+"\n"+"     #userView  .fab-details.fab-right {\n"+"        float: right;\n"+"      }\n"+"\n"+"     #userView  .fab-details.fab-left {\n"+"        float: left;\n"+"      }\n"+"\n"+"      #userView .modal-dialog {\n"+"        width: 80%;\n"+"        max-height: 90%;\n"+"        margin: 0px auto;\n"+"        position: relative;\n"+"        margin-top: 2%;\n"+"        margin-bottom: 2%\n"+"        position: fixed;\n"+"        height: 100%;\n"+"        padding: 0;\n"+"        background: white;\n"+"        padding-bottom: 30px;\n"+"        overflow-y: auto;\n"+"        overflow-x: hidden;\n"+"      }\n"+"\n"+"       #userView .btn{\n"+"        background: #373B50;\n"+"        color: #FFF;\n"+"      }\n"+"\n"+"      @media screen and (min-width: 500px) {\n"+"        #userView .user-details-modal-dialog {\n"+"           width: 80% !important;\n"+"           max-width: 80% !important;\n"+"        }\n"+"      }\n"+"\n"+"      #userView .modal-header{\n"+"        background: #373B50;\n"+"        color: #FFF;\n"+"      }\n"+"\n"+"      #userView .sectiontitle{\n"+"        background-color: rgb(55, 59, 80);\n"+"        color: #fff;\n"+"        text-align: left;\n"+"        padding: 10px;\n"+"        margin-bottom: 15px;\n"+"      }\n"+"\n"+"      #userView .prodlink{\n"+"        font-size: 12px;\n"+"        color: #fff;\n"+"        background-color: rgb(55, 59, 80);\n"+"      }\n"+"\n"+"      #userView .modal-container {\n"+"        padding: 20px;\n"+"      }\n"+"\n"+"    #userView   .user-details-modal {\n"+"        position: fixed;\n"+"        top: 0;\n"+"        right: 0;\n"+"        bottom: 0;\n"+"        left: 0;\n"+"        overflow: hidden;\n"+"      }\n"+"\n"+"    #userView   .user-details-modal-content {\n"+"        position: absolute;\n"+"        top: 0;\n"+"        right: 0;\n"+"        bottom: 0;\n"+"        left: 0;\n"+"        border-radius: 0;\n"+"        box-shadow: none;\n"+"      }\n"+"\n"+"    #userView   .user-details-modal-header {\n"+"        position: absolute;\n"+"        top: 0;\n"+"        right: 0;\n"+"        left: 0;\n"+"        height: 40px;\n"+"        padding: 10px;\n"+"        border: 0;\n"+"        text-align: center;\n"+"        font-size: bold;\n"+"      }\n"+"\n"+"    #userView   .user-details-modal-body {\n"+"        position: absolute;\n"+"        top: 51px;\n"+"        bottom: 30px;\n"+"        width: 100%;\n"+"        overflow-y: auto;\n"+"        overflow-x: hidden;\n"+"      }\n"+"\n"+"    #userView   .user-details-modal-footer {\n"+"        position: absolute;\n"+"        right: 0;\n"+"        bottom: 0;\n"+"        left: 0;\n"+"        background: #f1f3f5;\n"+"        padding: 5px;\n"+"        height: 50px;\n"+"      }\n"+"    #userView   .modal-footer .left{\n"+"        text-align: left;\n"+"      }\n"+"    #userView   .modal-footer .right{\n"+"        text-align: right;\n"+"      }\n"+"\n"+"    #userView   .user-details-modal-row {\n"+"        margin: 0px;\n"+'      }</style> <div class="modal fade user-details-modal" id="userView" tabindex="-1" role="dialog" aria-labelledby="userTitle" aria-hidden="true" data-keyboard="false" data-backdrop="static"> <div class="modal-dialog user-details-modal-dialog"> <div class="modal-header user-details-modal-header">User {{user.username}} Details</div> <div class="modal-body user-details-modal-body container-fluid"> <div class="row"> <div class="group col-md-6"> <div ng-if="!isNew"> <input type="text" ng-model="user.username" value="user.username" ng-blur="checkUsername()" readonly> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field username-lbl-field">Username</label> </div> <div ng-if="isNew"> <input type="text" ng-model="user.username" value="user.username" ng-blur="checkUsername()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field username-lbl-field">Username</label> <label class="invalid-field" id="admincheckUsername">Username empty</label> </div> </div> <div class="group col-md-6"> <input id="adminemail" type="email" ng-model="user.email" value="user.email" ng-blur="checkEmail()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">E-mail</label> <label class="invalid-field" id="admincheckEmail">E-mail not valid</label> </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input type="text" ng-model="user.firstname" value="user.firstname" ng-blur="checkName()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Firstname</label> <label class="invalid-field" id="admincheckName">Firstname empty</label> </div> </div> <div class="group col-md-6"> <div> <input type="text" ng-model="user.lastname" value="user.lastname" ng-blur="checkLastname()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field">Lastname</label> <label class="invalid-field" id="admincheckLastname">Lastname empty</label> </div> </div> </div> <div class="row"> <div class="group col-md-6"> <div class="user-selectfield"> <label id="admindomainLbl" class="select-label">Select Domain</label> <select class="browser-default" ng-model="user.domain" ng-change="checkDomain()" ng-init="checkDomain()"> <option value="unknown" disabled selected>Select Domain</option> <option value="{{domain}}" ng-repeat="domain in domains">{{domain}}</option> </select> </div> <label class="invalid-field" id="admincheckDomain">Domain empty</label> </div> <div class="group col-md-6"> <input id="admindomainDesc" style="display:none !important" type="text" ng-model="user.subDomain" value="user.subDomain" ng-blur="checkSubDomain()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field" id="admindomainLabel" style="display:none">Domain</label> <label class="invalid-field" id="admincheckSubDomain">Domain empty</label> </div> </div> <div class="row"> <div class="group col-md-6"> <div class="user-selectfield"> <label id="adminusageLbl" class="select-label">Select Usage</label> <select class="browser-default" ng-model="user.usage" ng-change="checkUsage()"> <option value="unknown" disabled selected>Select Usage</option> <option value="{{usage}}" ng-repeat="usage in usages">{{usage}}</option> </select> </div> <label class="invalid-field" id="admincheckUsage">Usage empty</label> </div> <div class="group col-md-6"> <input id="adminusageDesc" style="display:none !important" type="text" ng-model="user.subUsage" value="user.subUsage" ng-blur="checkSubUsage()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field" id="adminusageLabel" style="display:none">Usage</label> <label class="invalid-field" id="admincheckSubUsage">Usage empty</label> </div> </div> <div class="row"> <div class="group col-md-6"> <div class="user-selectfield"> <label id="admincountryLbl" class="select-label">Select your country</label> <select id="admincountry" class="browser-default" ng-model="user.country" ng-options="country.name as country.name for country in countries" ng-change="checkCountry($index)"> </select> </div> <label class="invalid-field" id="admincheckCountry">Country empty</label> </div> <div class="col-md-6"> <div class="col-md-1"><input type="checkbox" label="Locked" ng-model="isLocked" value="isLocked" ng-click="clearReason()"></div> <div class="col-md-2">Locked</div> <div class="group col-md-9"> <input id="lockedReason" type="text" ng-model="user.lockedReason" value="user.lockedReason" ng-change="checkIsLocked()"> <span class="highlight"></span> <span class="bar"></span> </div> </div> </div> <div class="panel panel-default"> <div class="panel-heading"> <div class="row"> <div class="col-md-1 col-xs-4 col-sm-4"><input type="checkbox" value="selected" ng-model="selected" ng-change="selectUnselectAll()"></div> <div class="col-md-11 col-xs-8 col-sm-8">Available Functions</div> </div> </div> <div class="panel-body"> <div ng-repeat="role in availableRoles "> <div class="row"> <div class="col-md-1 col-xs-4 col-sm-4"><input type="checkbox" id="userRole_{{role.id}}"></div> <div class="col-md-11 col-xs-8 col-sm-8">{{role.title}}</div> </div> </div> </div> </div> </div> <div class="modal-footer user-details-modal-footer"> <div class="left col-md-6"> <div ng-show="!isNew" ng-model="prevbutton" ng-disabled="prevbutton.disabled" class="left-button fab-details fab-left" title="Previous Product" ng-click="showPrevUser()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="arrow-back"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></g> </svg> </div> <div ng-show="!isNew" ng-model="nextbutton" ng-disabled="nextbutton.disabled" class="right-button fab-details fab-left" title="Next Product" ng-click="showNextUser()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="arrow-forward"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></g> </svg> </div> <div ng-show="isNew" class="left-button fab-details fab-left fab-reset-user" title="Reset Fields" ng-click="resetFields()"><div class="glyphicon glyphicon-erase"></div> </div> </div> <div class="right col-md-6"> <div class="fab-details fab-right" title="Close" ng-click="close()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></g> </svg> </div> <div class="fab-details fab-right" title="Save" ng-click="save()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"></g> </svg> </div> </div> </div> </div> </div> </div> </div>');a.put("components/user-dialog/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>.user-badge {\n"+"            color: #373B50;\n"+"            margin-right: 3px;\n"+"            font-size: 14px;\n"+"        }\n"+"\n"+"        .badge-button {\n"+"            background-color: #373B50 !important;\n"+"            color: #fff !important;\n"+"            float: right;\n"+"            border-radius: 0px;\n"+"            -moz-border-radius: 0px;\n"+"            -webkit-border-radius: 0px;\n"+"            cursor: pointer;\n"+"        }\n"+"\n"+"        .badge-footer {\n"+"            margin-top: 10px !important;\n"+"            display: flex;\n"+"        }\n"+"\n"+"        .user-h4 {\n"+"            font-size: 20px;\n"+"            text-align: left;\n"+"        }\n"+"\n"+"        .user-h5 {\n"+"            font-size: 0.83em;\n"+"            text-align: left;\n"+"        }\n"+"\n"+"        #userBadge hr {\n"+"            border: 0px;\n"+"            border-bottom: 1px solid;\n"+"            color: #ADADAD;\n"+"            margin-top: 5px !important;\n"+"        }\n"+"\n"+"        .callout {\n"+"            position: relative;\n"+"            margin-top: 0px;\n"+"            margin-right: 10px;\n"+"            float: right;\n"+"            padding: 10px 10px;\n"+"            background-color: white;\n"+"            /* easy rounded corners for modern browsers */\n"+"            -moz-border-radius: 0px;\n"+"            -webkit-border-radius: 0px;\n"+"            border-radius: 0px;\n"+"            display: none;\n"+"            z-index: 10;\n"+"            box-shadow: 3px 5px 19px 0 rgba(49, 50, 50, .62);\n"+"            width: 260px;\n"+"        }\n"+"\n"+"        .callout .notch {\n"+"            position: absolute;\n"+"            top: -10px;\n"+"            right: 100px;\n"+"            margin: 0;\n"+"            border-top: 0;\n"+"            border-left: 10px solid transparent;\n"+"            border-right: 10px solid transparent;\n"+"            border-bottom: 10px solid #fff;\n"+"            padding: 0;\n"+"            width: 0;\n"+"            height: 0;\n"+"            /* ie6 height fix */\n"+"            font-size: 0;\n"+"            line-height: 0;\n"+"            /* ie6 transparent fix */\n"+"            _border-right-color: white;\n"+"            _border-left-color: white;\n"+"            _filter: chroma(color=white);\n"+"            display: none;\n"+"            z-index: 10;\n"+"            ``\n"+"        }\n"+"\n"+"        #roles {\n"+"            padding: 10px 0px;\n"+"        }\n"+"\n"+"        #roles .glyphicon {\n"+"            height: 20px !important;\n"+"        }\n"+"\n"+"        border-callout {\n"+"            border: 1px solid #fff;\n"+"            padding: 17px 19px;\n"+"        }\n"+"\n"+"        .border-callout .border-notch {\n"+"            border-bottom-color: #fff;\n"+"            top: -11px;\n"+"        }\n"+"\n"+"        /*login part begin*/\n"+"        #wronglogin {\n"+"            width: 100%;\n"+"            text-align: center;\n"+"            font-weight: bold;\n"+"            margin: 10px 0px;\n"+"            color: rgb(190, 0, 0);\n"+"        }\n"+"\n"+"        .login-btn {\n"+"            background-color: #373B50 !important;\n"+"            color: #fff !important;\n"+"            border-radius: 0px;\n"+"            -moz-border-radius: 0px;\n"+"            -webkit-border-radius: 0px;\n"+"            cursor: pointer;\n"+"            width: 100%;\n"+"        }\n"+"\n"+"        .login-h4 {\n"+"            font-size: 18px;\n"+"            text-align: center;\n"+"        }\n"+"\n"+"        #userBadge .group {\n"+"            position: relative;\n"+"            margin-bottom: 25px;\n"+"        }\n"+"\n"+"        #userBadge .form-control {\n"+"            border: none;\n"+"            border-radius: 0px !important;\n"+"            border-bottom: 1px solid #757575;\n"+"            box-shadow: none !important;\n"+"        }\n"+"\n"+"        #userBadge input {\n"+"            font-size: 13px;\n"+"            padding: 10px 10px 10px 5px;\n"+"            display: block;\n"+"            width: 100%;\n"+"            border: none;\n"+"            border-bottom: 1px solid #757575;\n"+"            color: rgb(55, 59, 80);\n"+"        }\n"+"\n"+"        #userBadge input:focus {\n"+"            outline: none;\n"+"        }\n"+"        /* BOTTOM BARS ================================= */\n"+"\n"+"        #userBadge .bar {\n"+"            position: relative;\n"+"            display: block;\n"+"            width: 100%;\n"+"        }\n"+"\n"+"        #userBadge .bar:before,\n"+"        #userBadge .bar:after {\n"+"            content: '';\n"+"            height: 2px;\n"+"            width: 0;\n"+"            bottom: 1px;\n"+"            position: absolute;\n"+"            background: rgb(55, 59, 80);\n"+"            transition: 0.2s ease all;\n"+"            -moz-transition: 0.2s ease all;\n"+"            -webkit-transition: 0.2s ease all;\n"+"        }\n"+"\n"+"        #userBadge .bar:before {\n"+"            left: 50%;\n"+"        }\n"+"\n"+"        #userBadge .bar:after {\n"+"            right: 50%;\n"+"        }\n"+"        /* active state */\n"+"\n"+"        #userBadge input:focus~.bar:before,\n"+"        #userBadge input:focus~.bar:after {\n"+"            width: 50%;\n"+"        }\n"+"        /* HIGHLIGHTER ================================== */\n"+"\n"+"        #userBadge .highlight {\n"+"            position: absolute;\n"+"            height: 60%;\n"+"            width: 100px;\n"+"            top: 25%;\n"+"            left: 0;\n"+"            pointer-events: none;\n"+"            opacity: 0.5;\n"+"        }\n"+"        /* active state */\n"+"\n"+"        #userBadge input:focus~.highlight {\n"+"            -webkit-animation: inputHighlighter 0.3s ease;\n"+"            -moz-animation: inputHighlighter 0.3s ease;\n"+"            animation: inputHighlighter 0.3s ease;\n"+"        }\n"+"\n"+"        .forgot {\n"+"            padding-top: 10px;\n"+"            font-weight: bold;\n"+"            float: right;\n"+"            font-size: 12px;\n"+"            text-align: right;\n"+"            padding-right: : 0;\n"+"            width: 133px;\n"+"            white-space: nowrap;\n"+"            overflow: hidden;\n"+"        }\n"+"\n"+"        .forgot>a {\n"+"            color: black;\n"+"        }\n"+"\n"+"        .forgot>a:visited {\n"+"            color: black;\n"+"        }\n"+"\n"+"        .signup {\n"+"            padding-top: 10px;\n"+"            color: black;\n"+"            font-size: 12px;\n"+"            float: left;\n"+"            text-align: left;\n"+"            padding-left: 0;\n"+"            width: 57px;\n"+"            white-space: nowrap;\n"+"            overflow: hidden;\n"+"        }\n"+"\n"+"        .signup>a {\n"+"            color: black;\n"+"            font-weight: bold;\n"+"        }\n"+"\n"+"        .signup>a:visited {\n"+"            color: black;\n"+"        }\n"+"\n"+"        .divider {\n"+"            border-top: 1px solid #EEE !important;\n"+"            width: 80%;\n"+"        }\n"+"        /* ANIMATIONS ================ */\n"+"\n"+"        @-webkit-keyframes inputHighlighter {\n"+"            from {\n"+"                background: rgb(55, 59, 80);\n"+"            }\n"+"            to {\n"+"                width: 0;\n"+"                background: transparent;\n"+"            }\n"+"        }\n"+"\n"+"        @-moz-keyframes inputHighlighter {\n"+"            from {\n"+"                background: rgb(55, 59, 80);\n"+"            }\n"+"            to {\n"+"                width: 0;\n"+"                background: transparent;\n"+"            }\n"+"        }\n"+"\n"+"        @keyframes inputHighlighter {\n"+"            from {\n"+"                background: rgb(55, 59, 80);\n"+"            }\n"+"            to {\n"+"                width: 0;\n"+"                background: transparent;\n"+"            }\n"+"        }\n"+'        /*login part end*/</style> <div id="userBadge" class="callout border-callout"> <div ng-show="userInfo.isLogged"> <div class="row"> <h4 class="user-h4">{{user.username}}</h4> <h5 class="user-h5">{{user.email}}</h5> <div id="roles"> <div class="user-badge">Allowed functions</div> <div class="user-badge glyphicon glyphicon-search" title="Search" style="display:none" id="role_SEARCH"></div> <div class="user-badge glyphicon glyphicon-save" title="Download" style="display:none" id="role_DOWNLOAD"></div> <div class="user-badge glyphicon glyphicon-open" title="Upload" style="display:none" id="role_UPLOAD"></div> <div class="user-badge glyphicon glyphicon-user" title="User Manager" style="display:none" id="role_USER_MANAGER"></div> <div class="user-badge glyphicon glyphicon-folder-open" title="Archive Manager" style="display:none" id="role_ARCHIVE_MANAGER"></div> <div class="user-badge glyphicon glyphicon-folder-open" title="Data Manager" style="display:none" id="role_DATA_MANAGER"></div> <div class="user-badge glyphicon glyphicon-hdd" title="System Manager" style="display:none" id="role_SYSTEM_MANAGER"></div> <div class="user-badge glyphicon glyphicon-calendar" title="Event Manager" style="display:none" id="role_EVENT_MANAGER"></div> </div> </div> <hr> <div ng-show="showcart" class="row user-badge" ng-click="userDialogGoCart()"> <div title="Cart" class="col-md-2 glyphicon glyphicon-shopping-cart"></div> <div class="col-md-10">Cart</div> </div> <div class="row user-badge"> <div title="Saved Searches" class="col-md-2 glyphicon glyphicon-floppy-disk" ng-click="loadSearches()"></div> <div class="col-md-10" ng-click="loadSearches()">Saved Searches</div> </div> \x3c!-- <div ng-show="showcart" class="row user-badge" style="color:blue;">\n'+'                    <div title="Cart" class="col-md-2 glyphicon glyphicon-shopping-cart" ng-click="loadCart()"></div>\n'+'                    <div class="col-md-10" ng-click="toggleCart()">New Cart</div>\n'+'                </div> --\x3e \x3c!-- <div ng-if="isUploadUser" class="row user-badge">\n'+'        <div title="Uploaded Products" class="col-md-2 glyphicon glyphicon-open-file" ng-click="loadUploadedProducts()"></div>\n'+'        <div class="col-md-10" ng-click="loadUploadedProducts()">Uploaded Products</div>\n'+'      </div> --\x3e <hr> <div ng-if="isManagement" class="row user-badge"> <div title="Management" class="col-md-2 glyphicon glyphicon-user" ng-click="loadManagement()"></div> <div class="col-md-10" ng-click="loadManagement()">Management</div> </div> <div ng-if="isSynchroUser" class="row user-badge"> <div title="Management" class="col-md-2 glyphicon glyphicon-refresh" ng-click="loadSynchronizers()"></div> <div class="col-md-10" ng-click="loadSynchronizers()">OData Synchronizers</div> </div> <div ng-if="isUploadUser" class="row user-badge"> <div title="Upload" class="col-md-2 glyphicon glyphicon-open" ng-click="loadUpload()"></div> <div class="col-md-10" ng-click="loadUpload()">Upload</div> </div> <div class="row badge-footer"> <button ng-show="editprofile && !isRootUser" class="btn btn-default badge-button" ng-click="editProfile()">EDIT PROFILE</button> <button class="btn btn-default badge-button" ng-click="logout()">LOGOUT</button> </div> <b class="border-notch notch"></b> <b class="notch"></b> </div> <div ng-show="!userInfo.isLogged"> <div class="row" ng-hide="hideLoginTitle"> <h4 class="login-h4">{{loginTitle}}</h4> </div> <br> <form name="form"> <div id="wronglogin"></div> <div class="row"> <div class="group"> <input auto-complete id="loginUsername" type="text" ng-model="username" class="form-control" placeholder="Username" value="" name="username"> <span class="highlight"></span> <span class="bar"></span> </div> </div> <div class="row"> <div class="group"> <input type="password" auto-complete ng-model="password" class="form-control" placeholder="Password" name="password"> <span class="highlight"></span> <span class="bar"></span> </div> </div> <div class="row"> <button class="btn btn-default login-btn" ng-click="login()" type="submit">LOGIN</button> </div> <div class="row"> <div class="col-md-6 forgot" ng-if="forgotpassword" ng-click="closeBadge()"> <a href="#/forgot-password">Forgot password?</a> </div> <div class="col-md-6 signup" ng-show="showsignup" ng-model="showsignup" ng-click="closeBadge()"> <a href="#/self-registration">Sign up</a> </div> </div> </form> <b class="border-notch notch"></b> <b class="notch"></b> </div> </div> </div> </div>')
;a.put("components/user-password/view.html","<div> \x3c!--\n"+"  Data HUb Service (DHuS) - For Space data distribution.\n"+"  Copyright (C) 2013,2014,2015,2016 European Space Agency (ESA)\n"+"  Copyright (C) 2013,2014,2015,2016 GAEL Systems\n"+"  Copyright (C) 2013,2014,2015,2016 Serco Spa\n"+"\n"+"  This file is part of DHuS software sources.\n"+"\n"+"  This program is free software: you can redistribute it and/or modify\n"+"  it under the terms of the GNU Affero General Public License as\n"+"  published by the Free Software Foundation, either version 3 of the\n"+"  License, or (at your option) any later version.\n"+"\n"+"  This program is distributed in the hope that it will be useful,\n"+"  but WITHOUT ANY WARRANTY; without even the implied warranty of\n"+"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n"+"  GNU Affero General Public License for more details.\n"+"\n"+"  You should have received a copy of the GNU Affero General Public License\n"+"  along with this program. If not, see <http://www.gnu.org/licenses/>.\n"+"\n"+"--\x3e <div> <style>#adminUserPwd .panel-heading {\n"+"            height: 30px;\n"+"            background-color: lightgray;\n"+"            line-height: 10px;\n"+"        }\n"+"\n"+"        #adminUserPwd .panel-default {\n"+"            border: 1px #aaa solid;\n"+"            width: 50%;\n"+"        }\n"+"\n"+"        @media screen and (min-width: 993px) and (max-width: 1200px) {\n"+"            #adminUserPwd .panel-default {\n"+"                width: 50%;\n"+"            }\n"+"        }\n"+"\n"+"        @media screen and (min-width: 769px) and(max-width: 992px) {\n"+"            #adminUserPwd .panel-default {\n"+"                width: 100%;\n"+"            }\n"+"        }\n"+"\n"+"        @media screen and (max-width: 768px) {\n"+"            #adminUserPwd .panel-default {\n"+"                width: 100%;\n"+"            }\n"+"        }\n"+"\n"+"        #adminUserPwd .group {\n"+"            position: relative;\n"+"            margin-bottom: 35px;\n"+"        }\n"+"\n"+"        #adminUserPwd .checkFunction {\n"+"            top: -5px;\n"+"        }\n"+"\n"+"        #adminUserPwd input {\n"+"            font-size: 13px;\n"+"            padding: 2px;\n"+"            display: block;\n"+"            width: 100%;\n"+"            border: none;\n"+"            border-bottom: 1px solid #757575;\n"+"        }\n"+"\n"+"        #adminUserPwd input:focus {\n"+"            outline: none;\n"+"        }\n"+"        /* LABEL ======================================= */\n"+"\n"+"        #adminUserPwd label {\n"+"            color: #999;\n"+"            font-size: 13px;\n"+"            font-weight: normal;\n"+"            position: absolute;\n"+"            pointer-events: none;\n"+"            top: 10px;\n"+"            transition: 0.2s ease all;\n"+"            -moz-transition: 0.2s ease all;\n"+"            -webkit-transition: 0.2s ease all;\n"+"        }\n"+"        /* active state */\n"+"\n"+"        #adminUserPwd input:focus ~ .lbl-field,\n"+"        #adminUserPwd input:valid ~ .lbl-field,\n"+"        #adminUserPwd input:invalid ~ .lbl-field {\n"+"            top: -15px;\n"+"            font-size: 13px;\n"+"            color: rgb(55, 59, 80);\n"+"        }\n"+"\n"+"        .username-lbl-field {\n"+"            top: -15px !important;\n"+"            color: rgb(55, 59, 80) !important;\n"+"        }\n"+"\n"+"        #adminUserPwd input:invalid ~ .invalid-field {\n"+"            display: inline-block !important;\n"+"        }\n"+"\n"+"        #adminUserPwd .invalid-field {\n"+"            display: none;\n"+"            color: rgb(255, 110, 64);\n"+"            top: 30px;\n"+"            font-size: 9px;\n"+"        }\n"+"\n"+"        #adminUserPwd .select-label {\n"+"            display: none;\n"+"            top: -20px;\n"+"            color: rgb(55, 59, 80);\n"+"            font-size: 13px;\n"+"        }\n"+"        /* BOTTOM BARS ================================= */\n"+"\n"+"        #adminUserPwd .bar {\n"+"            position: relative;\n"+"            display: block;\n"+"            width: 100%;\n"+"        }\n"+"\n"+"        #adminUserPwd .bar:before,\n"+"        .bar:after {\n"+"            content: '';\n"+"            height: 2px;\n"+"            width: 0;\n"+"            bottom: 1px;\n"+"            position: absolute;\n"+"            background: rgb(55, 59, 80);\n"+"            transition: 0.2s ease all;\n"+"            -moz-transition: 0.2s ease all;\n"+"            -webkit-transition: 0.2s ease all;\n"+"        }\n"+"\n"+"        #adminUserPwd .bar:before {\n"+"            left: 50%;\n"+"        }\n"+"\n"+"        #adminUserPwd .bar:after {\n"+"            right: 50%;\n"+"        }\n"+"        /* active state */\n"+"\n"+"        #adminUserPwd input:focus ~ .bar:before,\n"+"        #adminUserPwd input:focus ~ .bar:after {\n"+"            width: 50%;\n"+"        }\n"+"        /* HIGHLIGHTER ================================== */\n"+"\n"+"        #adminUserPwd .highlight {\n"+"            position: absolute;\n"+"            height: 60%;\n"+"            width: 100px;\n"+"            top: 25%;\n"+"            left: 0;\n"+"            pointer-events: none;\n"+"            opacity: 0.5;\n"+"        }\n"+"        /* active state */\n"+"\n"+"        #adminUserPwd input:focus ~ .highlight {\n"+"            -webkit-animation: inputHighlighter 0.3s ease;\n"+"            -moz-animation: inputHighlighter 0.3s ease;\n"+"            animation: inputHighlighter 0.3s ease;\n"+"        }\n"+"        /* Style Select Field */\n"+"\n"+"        #adminUserPwd select {\n"+"            font-family: inherit;\n"+"            background-color: transparent;\n"+"            width: 100%;\n"+"            padding: 2px 0;\n"+"            font-size: 13px;\n"+"            border: none;\n"+"            border-bottom: 1px solid rgb(0, 0, 0);\n"+"        }\n"+"        /* Remove focus */\n"+"\n"+"        #adminUserPwd select:focus {\n"+"            outline: none;\n"+"        }\n"+"        /* Hide label */\n"+"\n"+"        #adminUserPwd .user-selectfield label {\n"+"            display: inline;\n"+"        }\n"+"        /* Use custom arrow */\n"+"\n"+"        #adminUserPwd .user-selectfield {\n"+"            font-family: 'Roboto', 'Helvetica', 'Arial', sans-serif;\n"+"            position: relative;\n"+"        }\n"+"\n"+"        #adminUserPwd .user-selectfield::after {\n"+"            position: absolute;\n"+"            top: 0.75em;\n"+"            right: 0.5em;\n"+"            /* Styling the down arrow */\n"+"            width: 0;\n"+"            height: 0;\n"+"            padding: 0;\n"+"            content: '';\n"+"            border-left: .25em solid transparent;\n"+"            border-right: .25em solid transparent;\n"+"            border-top: .375em solid rgba(0, 0, 0, 1);\n"+"            pointer-events: none;\n"+"            color: black;\n"+"        }\n"+"\n"+"        #adminUserPwd .user-selectfield select {\n"+"            -webkit-appearance: none;\n"+"            -moz-appearance: none;\n"+"        }\n"+"\n"+"        #adminUserPwd .user-selectfield select::-ms-expand {\n"+"            display: none;\n"+"        }\n"+"        /* ANIMATIONS ================ */\n"+"\n"+"        @-webkit-keyframes inputHighlighter {\n"+"            from {\n"+"                background: rgb(55, 59, 80);\n"+"            }\n"+"            to {\n"+"                width: 0;\n"+"                background: transparent;\n"+"            }\n"+"        }\n"+"\n"+"        @-moz-keyframes inputHighlighter {\n"+"            from {\n"+"                background: rgb(55, 59, 80);\n"+"            }\n"+"            to {\n"+"                width: 0;\n"+"                background: transparent;\n"+"            }\n"+"        }\n"+"\n"+"        @keyframes inputHighlighter {\n"+"            from {\n"+"                background: rgb(55, 59, 80);\n"+"            }\n"+"            to {\n"+"                width: 0;\n"+"                background: transparent;\n"+"            }\n"+"        }\n"+"\n"+"        #adminUserPwd .fab-details {\n"+"            background-color: #373B50 !important;\n"+"            vertical-align: middle;\n"+"            margin-left: 20px;\n"+"            padding: 6px;\n"+"            line-height: 20px;\n"+"            font-size: 15px;\n"+"            position: relative;\n"+"            display: block;\n"+"            height: 40px;\n"+"            width: 40px;\n"+"            color: #fff;\n"+"            fill: currentColor;\n"+"            cursor: pointer;\n"+"            text-decoration: none;\n"+"            border-radius: 50%;\n"+"            overflow: hidden;\n"+"            transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"            transition-delay: 0.2s;\n"+"            box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"        }\n"+"\n"+"        @media screen and (max-width: 480px) {\n"+"            #adminUserPwd .fab-details {\n"+"                background-color: #373B50 !important;\n"+"                vertical-align: middle;\n"+"                margin-left: 20px;\n"+"                padding: 6px;\n"+"                line-height: 20px;\n"+"                font-size: 15px;\n"+"                position: relative;\n"+"                display: block;\n"+"                height: 32px !important;\n"+"                width: 32px !important;\n"+"                color: #fff;\n"+"                fill: currentColor;\n"+"                cursor: pointer;\n"+"                text-decoration: none;\n"+"                border-radius: 50%;\n"+"                overflow: hidden;\n"+"                transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n"+"                transition-delay: 0.2s;\n"+"                box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);\n"+"            }\n"+"        }\n"+"\n"+"        #adminUserPwd .fab-reset-user {\n"+"            font-size: 26px;\n"+"        }\n"+"\n"+"        @media screen and (max-width: 480px) {\n"+"            #adminUserPwd .fab-reset-user {\n"+"                font-size: 22px;\n"+"                padding: 4px;\n"+"            }\n"+"        }\n"+"\n"+"        #adminUserPwd .fab-details.fab-right {\n"+"            float: right;\n"+"        }\n"+"\n"+"        #adminUserPwd .fab-details.fab-left {\n"+"            float: left;\n"+"        }\n"+"\n"+"        #adminUserPwd .modal-dialog {\n"+"            width: 80%;\n"+"            max-height: 50%;\n"+"            margin: 0px auto;\n"+"            position: relative;\n"+"            margin-top: 2%;\n"+"            margin-bottom: 2% position: fixed;\n"+"            height: 50%;\n"+"            padding: 0;\n"+"            background: white;\n"+"            padding-bottom: 30px;\n"+"            overflow-y: auto;\n"+"            overflow-x: hidden;\n"+"        }\n"+"\n"+"        #adminUserPwd .btn {\n"+"            background: #373B50;\n"+"            color: #FFF;\n"+"        }\n"+"\n"+"        @media screen and (min-width: 500px) {\n"+"            #adminUserPwd .user-details-modal-dialog {\n"+"                width: 50% !important;\n"+"                max-width: 60% !important;\n"+"            }\n"+"        }\n"+"\n"+"        #adminUserPwd .modal-header {\n"+"            background: #373B50;\n"+"            color: #FFF;\n"+"        }\n"+"\n"+"        #adminUserPwd .sectiontitle {\n"+"            background-color: rgb(55, 59, 80);\n"+"            color: #fff;\n"+"            text-align: left;\n"+"            padding: 10px;\n"+"            margin-bottom: 15px;\n"+"        }\n"+"\n"+"        #adminUserPwd .prodlink {\n"+"            font-size: 12px;\n"+"            color: #fff;\n"+"            background-color: rgb(55, 59, 80);\n"+"        }\n"+"\n"+"        #adminUserPwd .modal-container {\n"+"            padding: 20px;\n"+"        }\n"+"\n"+"        #adminUserPwd .user-details-modal {\n"+"            position: fixed;\n"+"            top: 0;\n"+"            right: 0;\n"+"            bottom: 0;\n"+"            left: 0;\n"+"            overflow: hidden;\n"+"        }\n"+"\n"+"        #adminUserPwd .user-details-modal-content {\n"+"            position: absolute;\n"+"            top: 0;\n"+"            right: 0;\n"+"            bottom: 0;\n"+"            left: 0;\n"+"            border-radius: 0;\n"+"            box-shadow: none;\n"+"        }\n"+"\n"+"        #adminUserPwd .user-details-modal-header {\n"+"            position: absolute;\n"+"            top: 0;\n"+"            right: 0;\n"+"            left: 0;\n"+"            height: 40px;\n"+"            padding: 10px;\n"+"            border: 0;\n"+"            text-align: center;\n"+"            font-weight: bold;\n"+"        }\n"+"\n"+"        #adminUserPwd .user-details-modal-body {\n"+"            position: absolute;\n"+"            top: 51px;\n"+"            bottom: 30px;\n"+"            width: 100%;\n"+"            overflow-y: auto;\n"+"            overflow-x: hidden;\n"+"        }\n"+"\n"+"        #adminUserPwd .user-details-modal-footer {\n"+"            position: absolute;\n"+"            right: 0;\n"+"            bottom: 0;\n"+"            left: 0;\n"+"            background: #f1f3f5;\n"+"            padding: 5px;\n"+"            height: 50px;\n"+"        }\n"+"\n"+"        #adminUserPwd .modal-footer .left {\n"+"            text-align: left;\n"+"        }\n"+"\n"+"        #adminUserPwd .modal-footer .right {\n"+"            text-align: right;\n"+"        }\n"+"        /*.right-button{\n"+"        position: absolute;\n"+"        top: 50%;\n"+"        right: 10px;\n"+"        z-index: 10;\n"+"        margin-top: -30px;\n"+"      }\n"+"\n"+"      .left-button{\n"+"        position: absolute;\n"+"        top: 50%;\n"+"        left: 10px;\n"+"        z-index: 10;\n"+"        margin-top: -30px;\n"+"      }*/\n"+"\n"+"        #adminUserPwd .user-details-modal-row {\n"+"            margin: 0px;\n"+"        }\n"+"\n"+"        #adminUserPwd h3 {\n"+"            font-size: 16px;\n"+"            font-weight: bold;\n"+"            text-align: center;\n"+'        }</style> <div class="modal fade user-details-modal" id="adminUserPwd" tabindex="-1" role="dialog" aria-labelledby="userTitle" aria-hidden="true"> <div class="modal-dialog user-details-modal-dialog"> <div class="modal-header user-details-modal-header">User {{username}} Password Management</div> <div class="modal-body user-details-modal-body container-fluid"> <div class="row"> <div class="group col-md-12"> <h3>Set a new password for user {{username}} </h3> Password field accepts only alphanumeric characters plus "!", "@", "#", "$", "%", "^", "&", "*", ")", "(", "+", "=", ".", "_", "-".<br> Password fields minimum length is 8 characters. </div> </div> <div class="row"> <div class="group col-md-6"> <div> <input autocomplete="new-password" class="user-password-admin" type="password" ng-model="userpwd" value="userpwd" ng-blur="checkPassword()"> <span class="highlight"></span> <span class="bar"></span> <label class="lbl-field username-lbl-field">Password</label> <label class="invalid-field" id="admincheckPwdToChange">Password empty</label> <label class="invalid-field" id="admincheckPwdLength">Password too short. Minimum 8 characters.</label> <label class="invalid-field" id="admincheckPasswordNonLatin">Password cannot contain special characters</label> </div> </div> </div> </div> <div class="modal-footer user-details-modal-footer"> <div class="right col-md-12"> <div class="fab-details fab-right" title="Close" ng-click="close()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="close"> <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"> </g> </svg> </div> <div class="fab-details fab-right" title="Save" ng-click="save()"> <svg viewbox="0 0 24 24" height="100%" width="100%" preserveaspectratio="xMidYMid meet" fit="" style="pointer-events: none; display: block"> <g id="save"> <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"> </g> </svg> </div> </div> </div> </div> </div> </div> </div>')}]);